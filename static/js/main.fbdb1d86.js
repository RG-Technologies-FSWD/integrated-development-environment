/*! For license information please see main.fbdb1d86.js.LICENSE.txt */
(()=>{var __webpack_modules__={49:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>FY});var i={};n.r(i),n.d(i,{CancellationTokenSource:()=>gY,Emitter:()=>pY,KeyCode:()=>mY,KeyMod:()=>bY,MarkerSeverity:()=>wY,MarkerTag:()=>kY,Position:()=>_Y,Range:()=>vY,Selection:()=>yY,SelectionDirection:()=>SY,Token:()=>xY,Uri:()=>CY,editor:()=>EY,languages:()=>LY});var s,r=n(43);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[e.length-(1+t)]}function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t)return!1;if(e.length!==t.length)return!1;for(let i=0,s=e.length;i<s;i++)if(!n(e[i],t[i]))return!1;return!0}function*l(e,t){let n,i;for(const s of e)void 0!==i&&t(i,s)?n.push(s):(n&&(yield n),n=[s]),i=s;n&&(yield n)}function c(e,t){for(let n=0;n<=e.length;n++)t(0===n?void 0:e[n-1],n===e.length?void 0:e[n])}function u(e){return e.filter((e=>!!e))}function h(e){let t=0;for(let n=0;n<e.length;n++)e[n]&&(e[t]=e[n],t+=1);e.length=t}function d(e){return Array.isArray(e)&&e.length>0}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;const n=new Set;return e.filter((e=>{const i=t(e);return!n.has(i)&&(n.add(i),!0)}))}function g(e,t){return e.length>0?e[0]:t}function p(e,t){let n="number"===typeof t?e:0;"number"===typeof t?n=e:(n=0,t=e);const i=[];if(n<=t)for(let s=n;s<t;s++)i.push(s);else for(let s=n;s>t;s--)i.push(s);return i}function m(e,t,n){const i=e.slice(0,t),s=e.slice(t);return i.concat(n,s)}function b(e,t){const n=e.indexOf(t);n>-1&&(e.splice(n,1),e.unshift(t))}function _(e,t){const n=e.indexOf(t);n>-1&&(e.splice(n,1),e.push(t))}function v(e,t){for(const n of t)e.push(n)}function y(e,t,n,i){const s=S(e,t);let r=e.splice(s,n);return void 0===r&&(r=[]),function(e,t,n){const i=S(e,t),s=e.length,r=n.length;e.length=s+r;for(let o=s-1;o>=i;o--)e[o+r]=e[o];for(let o=0;o<r;o++)e[o+i]=n[o]}(e,s,i),r}function S(e,t){return t<0?Math.max(t+e.length,0):Math.min(t,e.length)}function w(e,t){return(n,i)=>t(e(n),e(i))}!function(e){e.isLessThan=function(e){return e<0},e.isLessThanOrEqual=function(e){return e<=0},e.isGreaterThan=function(e){return e>0},e.isNeitherLessOrGreaterThan=function(e){return 0===e},e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0}(s||(s={}));const k=(e,t)=>e-t,C=(e,t)=>k(e?1:0,t?1:0);class x{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(0!==this.length)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}class E{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate((t=>(e.push(t),!0))),e}filter(e){return new E((t=>this.iterate((n=>!e(n)||t(n)))))}map(e){return new E((t=>this.iterate((n=>t(e(n))))))}findLast(e){let t;return this.iterate((n=>(e(n)&&(t=n),!0))),t}findLastMaxBy(e){let t,n=!0;return this.iterate((i=>((n||s.isGreaterThan(e(i,t)))&&(n=!1,t=i),!0))),t}}function L(e){return"string"===typeof e}function D(e){return"object"===typeof e&&null!==e&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function A(e){const t=Object.getPrototypeOf(Uint8Array);return"object"===typeof e&&e instanceof t}function T(e){return"number"===typeof e&&!isNaN(e)}function N(e){return!!e&&"function"===typeof e[Symbol.iterator]}function I(e){return!0===e||!1===e}function $(e){return"undefined"===typeof e}function M(e){return!R(e)}function R(e){return $(e)||null===e}function O(e,t){if(!e)throw new Error(t?"Unexpected type, expected '".concat(t,"'"):"Unexpected type")}function P(e){if(R(e))throw new Error("Assertion Failed: argument is undefined or null");return e}function F(e){return"function"===typeof e}function B(e,t){if(L(t)){if(typeof e!==t)throw new Error("argument does not match constraint: typeof ".concat(t))}else if(F(t)){try{if(e instanceof t)return}catch(Y){}if(!R(e)&&e.constructor===t)return;if(1===t.length&&!0===t.call(void 0,e))return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function z(e){if(!e||"object"!==typeof e)return e;if(e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach((e=>{let[n,i]=e;t[n]=i&&"object"===typeof i?z(i):i})),t}E.empty=new E((e=>{}));const W=Object.prototype.hasOwnProperty;function H(e,t){return V(e,t,new Set)}function V(e,t,n){if(R(e))return e;const i=t(e);if("undefined"!==typeof i)return i;if(Array.isArray(e)){const i=[];for(const s of e)i.push(V(s,t,n));return i}if(D(e)){if(n.has(e))throw new Error("Cannot clone recursive data-structure");n.add(e);const i={};for(const s in e)W.call(e,s)&&(i[s]=V(e[s],t,n));return n.delete(e),i}return e}function j(e,t){if(e===t)return!0;if(null===e||void 0===e||null===t||void 0===t)return!1;if(typeof e!==typeof t)return!1;if("object"!==typeof e)return!1;if(Array.isArray(e)!==Array.isArray(t))return!1;let n,i;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(!j(e[n],t[n]))return!1}else{const s=[];for(i in e)s.push(i);s.sort();const r=[];for(i in t)r.push(i);if(r.sort(),!j(s,r))return!1;for(n=0;n<s.length;n++)if(!j(e[s[n]],t[s[n]]))return!1}return!0}function U(e){const t=[];for(const n of function(e){let t=[];for(;Object.prototype!==e;)t=t.concat(Object.getOwnPropertyNames(e)),e=Object.getPrototypeOf(e);return t}(e))"function"===typeof e[n]&&t.push(n);return t}let q="undefined"!==typeof document&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function K(e,t){let n;return n=0===t.length?e:e.replace(/\{(\d+)\}/g,((e,n)=>{const i=n[0],s=t[i];let r=e;return"string"===typeof s?r=s:"number"!==typeof s&&"boolean"!==typeof s&&void 0!==s&&null!==s||(r=String(s)),r})),q&&(n="\uff3b"+n.replace(/[aouei]/g,"$&$&")+"\uff3d"),n}function G(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];return K(t,i)}var Y;const Q="en";let X,Z,J=!1,ee=!1,te=!1,ne=!1,ie=!1,se=!1,re=!1,oe=!1,ae=!1,le=!1,ce=null,ue=null,he=null;const de=globalThis;let fe;"undefined"!==typeof de.vscode&&"undefined"!==typeof de.vscode.process?fe=de.vscode.process:"undefined"!==typeof process&&(fe=process);const ge="string"===typeof(null===(Y=null===fe||void 0===fe?void 0:fe.versions)||void 0===Y?void 0:Y.electron),pe=ge&&"renderer"===(null===fe||void 0===fe?void 0:fe.type);if("object"===typeof fe){J="win32"===fe.platform,ee="darwin"===fe.platform,te="linux"===fe.platform,ne=te&&!!fe.env.SNAP&&!!fe.env.SNAP_REVISION,re=ge,ae=!!fe.env.CI||!!fe.env.BUILD_ARTIFACTSTAGINGDIRECTORY,X=Q,ce=Q;const e=fe.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e),n=t.availableLanguages["*"];X=t.locale,ue=t.osLocale,ce=n||Q,he=t._translationsConfigFile}catch(zY){}ie=!0}else if("object"!==typeof navigator||pe)console.error("Unable to resolve platform.");else{Z=navigator.userAgent,J=Z.indexOf("Windows")>=0,ee=Z.indexOf("Macintosh")>=0,oe=(Z.indexOf("Macintosh")>=0||Z.indexOf("iPad")>=0||Z.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,te=Z.indexOf("Linux")>=0,le=(null===Z||void 0===Z?void 0:Z.indexOf("Mobi"))>=0,se=!0;X=void G({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_")||Q,ce=X,ue=navigator.language}let me=0;ee?me=1:J?me=3:te&&(me=2);const be=J,_e=ee,ve=te,ye=ie,Se=se,we=se&&"function"===typeof de.importScripts?de.origin:void 0,ke=oe,Ce=le,xe=Z,Ee="function"===typeof de.postMessage&&!de.importScripts,Le=(()=>{if(Ee){const e=[];de.addEventListener("message",(t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=e.length;n<i;n++){const i=e[n];if(i.id===t.data.vscodeScheduleAsyncWork)return e.splice(n,1),void i.callback()}}));let t=0;return n=>{const i=++t;e.push({id:i,callback:n}),de.postMessage({vscodeScheduleAsyncWork:i},"*")}}return e=>setTimeout(e)})(),De=ee||oe?2:J?1:3;let Ae=!0,Te=!1;const Ne=!!(xe&&xe.indexOf("Chrome")>=0),Ie=!!(xe&&xe.indexOf("Firefox")>=0),$e=!!(!Ne&&xe&&xe.indexOf("Safari")>=0),Me=!!(xe&&xe.indexOf("Edg/")>=0),Re=!!(xe&&xe.indexOf("Android")>=0),Oe={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var Pe;!function(e){function t(e){return e&&"object"===typeof e&&"function"===typeof e[Symbol.iterator]}e.is=t;const n=Object.freeze([]);function*i(e){yield e}e.empty=function(){return n},e.single=i,e.wrap=function(e){return t(e)?e:i(e)},e.from=function(e){return e||n},e.reverse=function*(e){for(let t=e.length-1;t>=0;t--)yield e[t]},e.isEmpty=function(e){return!e||!0===e[Symbol.iterator]().next().done},e.first=function(e){return e[Symbol.iterator]().next().value},e.some=function(e,t){for(const n of e)if(t(n))return!0;return!1},e.find=function(e,t){for(const n of e)if(t(n))return n},e.filter=function*(e,t){for(const n of e)t(n)&&(yield n)},e.map=function*(e,t){let n=0;for(const i of e)yield t(i,n++)},e.concat=function*(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const i of t)yield*i},e.reduce=function(e,t,n){let i=n;for(const s of e)i=t(i,s);return i},e.slice=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return function*(){for(t<0&&(t+=e.length),n<0?n+=e.length:n>e.length&&(n=e.length);t<n;t++)yield e[t]}()},e.consume=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;const i=[];if(0===n)return[i,t];const s=t[Symbol.iterator]();for(let r=0;r<n;r++){const t=s.next();if(t.done)return[i,e.empty()];i.push(t.value)}return[i,{[Symbol.iterator]:()=>s}]},e.asyncToArray=async function(e){const t=[];for await(const n of e)t.push(n);return Promise.resolve(t)}}(Pe||(Pe={}));class Fe{constructor(e){this.element=e,this.next=Fe.Undefined,this.prev=Fe.Undefined}}Fe.Undefined=new Fe(void 0);class Be{constructor(){this._first=Fe.Undefined,this._last=Fe.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Fe.Undefined}clear(){let e=this._first;for(;e!==Fe.Undefined;){const t=e.next;e.prev=Fe.Undefined,e.next=Fe.Undefined,e=t}this._first=Fe.Undefined,this._last=Fe.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new Fe(e);if(this._first===Fe.Undefined)this._first=n,this._last=n;else if(t){const e=this._last;this._last=n,n.prev=e,e.next=n}else{const e=this._first;this._first=n,n.next=e,e.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==Fe.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Fe.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Fe.Undefined&&e.next!==Fe.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Fe.Undefined&&e.next===Fe.Undefined?(this._first=Fe.Undefined,this._last=Fe.Undefined):e.next===Fe.Undefined?(this._last=this._last.prev,this._last.next=Fe.Undefined):e.prev===Fe.Undefined&&(this._first=this._first.next,this._first.prev=Fe.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Fe.Undefined;)yield e.element,e=e.next}}const ze="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";const We=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="(-?\\d*\\.\\d\\w*)|([^";for(const n of ze)e.indexOf(n)>=0||(t+="\\"+n);return t+="\\s]+)",new RegExp(t,"g")}();function He(e){let t=We;if(e&&e instanceof RegExp)if(e.global)t=e;else{let n="g";e.ignoreCase&&(n+="i"),e.multiline&&(n+="m"),e.unicode&&(n+="u"),t=new RegExp(e.source,n)}return t.lastIndex=0,t}const Ve=new Be;function je(e,t,n,i,s){if(t=He(t),s||(s=Pe.first(Ve)),n.length>s.maxLen){let r=e-s.maxLen/2;return r<0?r=0:i+=r,je(e,t,n=n.substring(r,e+s.maxLen/2),i,s)}const r=Date.now(),o=e-1-i;let a=-1,l=null;for(let c=1;!(Date.now()-r>=s.timeBudget);c++){const e=o-s.windowSize*c;t.lastIndex=Math.max(0,e);const i=Ue(t,n,o,a);if(!i&&l)break;if(l=i,e<=0)break;a=e}if(l){const e={word:l[0],startColumn:i+1+l.index,endColumn:i+1+l.index+l[0].length};return t.lastIndex=0,e}return null}function Ue(e,t,n,i){let s;for(;s=e.exec(t);){const t=s.index||0;if(t<=n&&e.lastIndex>=n)return s;if(i>0&&t>i)return null}return null}Ve.unshift({maxLen:1e3,windowSize:15,timeBudget:150});class qe{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Ke{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Ge{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return Qe(e,t)}compute(e,t,n){return n}}class Ye{constructor(e,t){this.newValue=e,this.didChange=t}}function Qe(e,t){if("object"!==typeof e||"object"!==typeof t||!e||!t)return new Ye(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const n=Array.isArray(e)&&Array.isArray(t)&&a(e,t);return new Ye(t,!n)}let n=!1;for(const i in t)if(t.hasOwnProperty(i)){const s=Qe(e[i],t[i]);s.didChange&&(e[i]=s.newValue,n=!0)}return new Ye(e,n)}class Xe{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return Qe(e,t)}validate(e){return this.defaultValue}}class Ze{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return Qe(e,t)}validate(e){return"undefined"===typeof e?this.defaultValue:e}compute(e,t,n){return n}}function Je(e,t){return"undefined"===typeof e?t:"false"!==e&&Boolean(e)}class et extends Ze{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;"undefined"!==typeof i&&(i.type="boolean",i.default=n),super(e,t,n,i)}validate(e){return Je(e,this.defaultValue)}}function tt(e,t,n,i){if("undefined"===typeof e)return t;let s=parseInt(e,10);return isNaN(s)?t:(s=Math.max(n,s),s=Math.min(i,s),0|s)}class nt extends Ze{static clampedInt(e,t,n,i){return tt(e,t,n,i)}constructor(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;"undefined"!==typeof r&&(r.type="integer",r.default=n,r.minimum=i,r.maximum=s),super(e,t,n,r),this.minimum=i,this.maximum=s}validate(e){return nt.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function it(e,t,n,i){if("undefined"===typeof e)return t;const s=st.float(e,t);return st.clamp(s,n,i)}class st extends Ze{static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if("number"===typeof e)return e;if("undefined"===typeof e)return t;const n=parseFloat(e);return isNaN(n)?t:n}constructor(e,t,n,i,s){"undefined"!==typeof s&&(s.type="number",s.default=n),super(e,t,n,s),this.validationFn=i}validate(e){return this.validationFn(st.float(e,this.defaultValue))}}class rt extends Ze{static string(e,t){return"string"!==typeof e?t:e}constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;"undefined"!==typeof i&&(i.type="string",i.default=n),super(e,t,n,i)}validate(e){return rt.string(e,this.defaultValue)}}function ot(e,t,n,i){return"string"!==typeof e?t:i&&e in i?i[e]:-1===n.indexOf(e)?t:e}class at extends Ze{constructor(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;"undefined"!==typeof s&&(s.type="string",s.enum=i,s.default=n),super(e,t,n,s),this._allowedValues=i}validate(e){return ot(e,this.defaultValue,this._allowedValues)}}class lt extends Ge{constructor(e,t,n,i,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;"undefined"!==typeof o&&(o.type="string",o.enum=s,o.default=i),super(e,t,n,o),this._allowedValues=s,this._convert=r}validate(e){return"string"!==typeof e||-1===this._allowedValues.indexOf(e)?this.defaultValue:this._convert(e)}}var ct,ut;!function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"}(ct||(ct={}));class ht extends Ge{constructor(){super(51,"fontLigatures",ht.OFF,{anyOf:[{type:"boolean",description:G("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:G("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:G("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return"undefined"===typeof e?this.defaultValue:"string"===typeof e?"false"===e||0===e.length?ht.OFF:"true"===e?ht.ON:e:Boolean(e)?ht.ON:ht.OFF}}ht.OFF='"liga" off, "calt" off',ht.ON='"liga" on, "calt" on';class dt extends Ge{constructor(){super(54,"fontVariations",dt.OFF,{anyOf:[{type:"boolean",description:G("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:G("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:G("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return"undefined"===typeof e?this.defaultValue:"string"===typeof e?"false"===e?dt.OFF:"true"===e?dt.TRANSLATE:e:Boolean(e)?dt.TRANSLATE:dt.OFF}compute(e,t,n){return e.fontInfo.fontVariationSettings}}dt.OFF="normal",dt.TRANSLATE="translate";class ft extends Ge{constructor(){super(53,"fontWeight",Et.fontWeight,{anyOf:[{type:"number",minimum:ft.MINIMUM_VALUE,maximum:ft.MAXIMUM_VALUE,errorMessage:G("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:ft.SUGGESTION_VALUES}],default:Et.fontWeight,description:G("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return"normal"===e||"bold"===e?e:String(nt.clampedInt(e,Et.fontWeight,ft.MINIMUM_VALUE,ft.MAXIMUM_VALUE))}}ft.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],ft.MINIMUM_VALUE=1,ft.MAXIMUM_VALUE=1e3;class gt extends Xe{constructor(){super(143)}compute(e,t,n){return gt.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight);let i=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(i=Math.max(i,t-1));const s=(n+e.viewLineCount+i)/(e.pixelRatio*e.height);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:i,desiredRatio:s,minimapLineCount:Math.floor(e.viewLineCount/s)}}static _computeMinimapLayout(e,t){const n=e.outerWidth,i=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};const r=t.stableMinimapLayoutInput,o=r&&e.outerHeight===r.outerHeight&&e.lineHeight===r.lineHeight&&e.typicalHalfwidthCharacterWidth===r.typicalHalfwidthCharacterWidth&&e.pixelRatio===r.pixelRatio&&e.scrollBeyondLastLine===r.scrollBeyondLastLine&&e.paddingTop===r.paddingTop&&e.paddingBottom===r.paddingBottom&&e.minimap.enabled===r.minimap.enabled&&e.minimap.side===r.minimap.side&&e.minimap.size===r.minimap.size&&e.minimap.showSlider===r.minimap.showSlider&&e.minimap.renderCharacters===r.minimap.renderCharacters&&e.minimap.maxColumn===r.minimap.maxColumn&&e.minimap.scale===r.minimap.scale&&e.verticalScrollbarWidth===r.verticalScrollbarWidth&&e.isViewportWrapping===r.isViewportWrapping,a=e.lineHeight,l=e.typicalHalfwidthCharacterWidth,c=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let h=s>=2?Math.round(2*e.minimap.scale):e.minimap.scale;const d=e.minimap.maxColumn,f=e.minimap.size,g=e.minimap.side,p=e.verticalScrollbarWidth,m=e.viewLineCount,b=e.remainingWidth,_=e.isViewportWrapping,v=u?2:3;let y=Math.floor(s*i);const S=y/s;let w=!1,k=!1,C=v*h,x=h/s,E=1;if("fill"===f||"fit"===f){const{typicalViewportLineCount:n,extraLinesBeforeFirstLine:r,extraLinesBeyondLastLine:l,desiredRatio:u,minimapLineCount:d}=gt.computeContainedMinimapLineCount({viewLineCount:m,scrollBeyondLastLine:c,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:i,lineHeight:a,pixelRatio:s});if(m/d>1)w=!0,k=!0,h=1,C=1,x=h/s;else{let i=!1,c=h+1;if("fit"===f){const e=Math.ceil((r+m+l)*C);_&&o&&b<=t.stableFitRemainingWidth?(i=!0,c=t.stableFitMaxMinimapScale):i=e>y}if("fill"===f||i){w=!0;const i=h;C=Math.min(a*s,Math.max(1,Math.floor(1/u))),_&&o&&b<=t.stableFitRemainingWidth&&(c=t.stableFitMaxMinimapScale),h=Math.min(c,Math.max(1,Math.floor(C/v))),h>i&&(E=Math.min(2,h/i)),x=h/s/E,y=Math.ceil(Math.max(n,r+m+l)*C),_?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=b,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const L=Math.floor(d*x),D=Math.min(L,Math.max(0,Math.floor((b-p-2)*x/(l+x)))+8);let A=Math.floor(s*D);const T=A/s;A=Math.floor(A*E);return{renderMinimap:u?1:2,minimapLeft:"left"===g?0:n-D-p,minimapWidth:D,minimapHeightIsEditorHeight:w,minimapIsSampling:k,minimapScale:h,minimapLineHeight:C,minimapCanvasInnerWidth:A,minimapCanvasInnerHeight:y,minimapCanvasOuterWidth:T,minimapCanvasOuterHeight:S}}static computeLayout(e,t){const n=0|t.outerWidth,i=0|t.outerHeight,s=0|t.lineHeight,r=0|t.lineNumbersDigitCount,o=t.typicalHalfwidthCharacterWidth,a=t.maxDigitWidth,l=t.pixelRatio,c=t.viewLineCount,u=e.get(135),h="inherit"===u?e.get(134):u,d="inherit"===h?e.get(130):h,f=e.get(133),g=t.isDominatedByLongLines,p=e.get(57),m=0!==e.get(67).renderType,b=e.get(68),_=e.get(104),v=e.get(83),y=e.get(72),S=e.get(102),w=S.verticalScrollbarSize,k=S.verticalHasArrows,C=S.arrowSize,x=S.horizontalScrollbarSize,E=e.get(43),L="never"!==e.get(109);let D=e.get(65);E&&L&&(D+=16);let A=0;if(m){const e=Math.max(r,b);A=Math.round(e*a)}let T=0;p&&(T=s*t.glyphMarginDecorationLaneCount);let N=0,I=N+T,$=I+A,M=$+D;const R=n-T-A-D;let O=!1,P=!1,F=-1;"inherit"===h&&g?(O=!0,P=!0):"on"===d||"bounded"===d?P=!0:"wordWrapColumn"===d&&(F=f);const B=gt._computeMinimapLayout({outerWidth:n,outerHeight:i,lineHeight:s,typicalHalfwidthCharacterWidth:o,pixelRatio:l,scrollBeyondLastLine:_,paddingTop:v.top,paddingBottom:v.bottom,minimap:y,verticalScrollbarWidth:w,viewLineCount:c,remainingWidth:R,isViewportWrapping:P},t.memory||new Ke);0!==B.renderMinimap&&0===B.minimapLeft&&(N+=B.minimapWidth,I+=B.minimapWidth,$+=B.minimapWidth,M+=B.minimapWidth);const z=R-B.minimapWidth,W=Math.max(1,Math.floor((z-w-2)/o)),H=k?C:0;return P&&(F=Math.max(1,W),"bounded"===d&&(F=Math.min(F,f))),{width:n,height:i,glyphMarginLeft:N,glyphMarginWidth:T,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:I,lineNumbersWidth:A,decorationsLeft:$,decorationsWidth:D,contentLeft:M,contentWidth:z,minimap:B,viewportColumn:W,isWordWrapMinified:O,isViewportWrapping:P,wrappingColumn:F,verticalScrollbarWidth:w,horizontalScrollbarHeight:x,overviewRuler:{top:H,width:w,height:i-2*H,right:0}}}}!function(e){e.Off="off",e.OnCode="onCode",e.On="on"}(ut||(ut={}));function pt(e){const t=e.get(97);return"editable"===t?e.get(90):"on"!==t}function mt(e,t){if("string"!==typeof e)return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}const bt="inUntrustedWorkspace",_t="editor.unicodeHighlight.allowedCharacters",vt="editor.unicodeHighlight.invisibleCharacters",yt="editor.unicodeHighlight.nonBasicASCII",St="editor.unicodeHighlight.ambiguousCharacters",wt="editor.unicodeHighlight.includeComments",kt="editor.unicodeHighlight.includeStrings",Ct="editor.unicodeHighlight.allowedLocales";function xt(e,t,n){const i=n.indexOf(e);return-1===i?t:n[i]}const Et={fontFamily:_e?"Menlo, Monaco, 'Courier New', monospace":ve?"'Droid Sans Mono', 'monospace', monospace":"Consolas, 'Courier New', monospace",fontWeight:"normal",fontSize:_e?12:14,lineHeight:0,letterSpacing:0},Lt=[];function Dt(e){return Lt[e.id]=e,e}const At={acceptSuggestionOnCommitCharacter:Dt(new et(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:G("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:Dt(new at(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",G("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:G("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:Dt(new class extends Ge{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[G("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),G("accessibilitySupport.on","Optimize for usage with a Screen Reader."),G("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:G("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return 0===n?e.accessibilitySupport:n}}),accessibilityPageSize:Dt(new nt(3,"accessibilityPageSize",10,1,1073741824,{description:G("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:Dt(new rt(4,"ariaLabel",G("editorViewAccessibleLabel","Editor content"))),ariaRequired:Dt(new et(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:Dt(new et(8,"screenReaderAnnounceInlineSuggestion",!0,{description:G("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:Dt(new at(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",G("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),G("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:G("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:Dt(new at(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",G("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),G("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:G("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:Dt(new at(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",G("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:G("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:Dt(new at(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",G("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:G("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:Dt(new at(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",G("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),G("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:G("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:Dt(new lt(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],(function(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}),{enumDescriptions:[G("editor.autoIndent.none","The editor will not insert indentation automatically."),G("editor.autoIndent.keep","The editor will keep the current line's indentation."),G("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),G("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),G("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:G("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:Dt(new et(13,"automaticLayout",!1)),autoSurround:Dt(new at(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[G("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),G("editor.autoSurround.quotes","Surround with quotes but not brackets."),G("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:G("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:Dt(new class extends Ge{constructor(){const e={enabled:Oe.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Oe.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:G("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:G("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:Je(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Je(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}),bracketPairGuides:Dt(new class extends Ge{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[G("editor.guides.bracketPairs.true","Enables bracket pair guides."),G("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),G("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:G("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[G("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),G("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),G("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:G("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:G("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:G("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[G("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),G("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),G("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:G("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{bracketPairs:xt(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:xt(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Je(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Je(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:xt(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}),stickyTabStops:Dt(new et(115,"stickyTabStops",!1,{description:G("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:Dt(new et(17,"codeLens",!0,{description:G("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:Dt(new rt(18,"codeLensFontFamily","",{description:G("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:Dt(new nt(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:G("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:Dt(new et(20,"colorDecorators",!0,{description:G("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:Dt(new at(146,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[G("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),G("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),G("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:G("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:Dt(new nt(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:G("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:Dt(new et(22,"columnSelection",!1,{description:G("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:Dt(new class extends Ge{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:G("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:G("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{insertSpace:Je(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Je(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}),contextmenu:Dt(new et(24,"contextmenu",!0)),copyWithSyntaxHighlighting:Dt(new et(25,"copyWithSyntaxHighlighting",!0,{description:G("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:Dt(new lt(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],(function(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}),{description:G("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:Dt(new at(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[G("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),G("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),G("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:G("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:Dt(new lt(28,"cursorStyle",ct.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],(function(e){switch(e){case"line":return ct.Line;case"block":return ct.Block;case"underline":return ct.Underline;case"line-thin":return ct.LineThin;case"block-outline":return ct.BlockOutline;case"underline-thin":return ct.UnderlineThin}}),{description:G("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:Dt(new nt(29,"cursorSurroundingLines",0,0,1073741824,{description:G("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:Dt(new at(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[G("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),G("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:G("cursorSurroundingLinesStyle","Controls when `#cursorSurroundingLines#` should be enforced.")})),cursorWidth:Dt(new nt(31,"cursorWidth",0,0,1073741824,{markdownDescription:G("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:Dt(new et(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:Dt(new et(33,"disableMonospaceOptimizations",!1)),domReadOnly:Dt(new et(34,"domReadOnly",!1)),dragAndDrop:Dt(new et(35,"dragAndDrop",!0,{description:G("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:Dt(new class extends et{constructor(){super(37,"emptySelectionClipboard",!0,{description:G("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}),dropIntoEditor:Dt(new class extends Ge{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:G("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:G("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[G("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),G("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:Je(t.enabled,this.defaultValue.enabled),showDropSelector:ot(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}),stickyScroll:Dt(new class extends Ge{constructor(){const e={enabled:!1,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(114,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:G("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:10,description:G("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:G("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:G("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:Je(t.enabled,this.defaultValue.enabled),maxLineCount:nt.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,10),defaultModel:ot(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Je(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}),experimentalWhitespaceRendering:Dt(new at(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[G("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),G("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),G("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:G("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:Dt(new rt(39,"extraEditorClassName","")),fastScrollSensitivity:Dt(new st(40,"fastScrollSensitivity",5,(e=>e<=0?5:e),{markdownDescription:G("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:Dt(new class extends Ge{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:G("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[G("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),G("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),G("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:G("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[G("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),G("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),G("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:G("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:G("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:_e},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:G("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:G("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{cursorMoveOnType:Je(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:"boolean"===typeof e.seedSearchStringFromSelection?e.seedSearchStringFromSelection?"always":"never":ot(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:"boolean"===typeof e.autoFindInSelection?e.autoFindInSelection?"always":"never":ot(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Je(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Je(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Je(t.loop,this.defaultValue.loop)}}}),fixedOverflowWidgets:Dt(new et(42,"fixedOverflowWidgets",!1)),folding:Dt(new et(43,"folding",!0,{description:G("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:Dt(new at(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[G("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),G("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:G("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:Dt(new et(45,"foldingHighlight",!0,{description:G("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:Dt(new et(46,"foldingImportsByDefault",!1,{description:G("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:Dt(new nt(47,"foldingMaximumRegions",5e3,10,65e3,{description:G("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:Dt(new et(48,"unfoldOnClickAfterEndOfLine",!1,{description:G("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:Dt(new rt(49,"fontFamily",Et.fontFamily,{description:G("fontFamily","Controls the font family.")})),fontInfo:Dt(new class extends Xe{constructor(){super(50)}compute(e,t,n){return e.fontInfo}}),fontLigatures2:Dt(new ht),fontSize:Dt(new class extends Ze{constructor(){super(52,"fontSize",Et.fontSize,{type:"number",minimum:6,maximum:100,default:Et.fontSize,description:G("fontSize","Controls the font size in pixels.")})}validate(e){const t=st.float(e,this.defaultValue);return 0===t?Et.fontSize:st.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}),fontWeight:Dt(new ft),fontVariations:Dt(new dt),formatOnPaste:Dt(new et(55,"formatOnPaste",!1,{description:G("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:Dt(new et(56,"formatOnType",!1,{description:G("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:Dt(new et(57,"glyphMargin",!0,{description:G("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:Dt(new class extends Ge{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[G("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),G("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),G("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:G("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:G("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:G("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:G("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:G("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:G("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:G("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:G("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:G("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:G("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:G("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){var t,n,i,s,r;if(!e||"object"!==typeof e)return this.defaultValue;const o=e;return{multiple:ot(o.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:null!==(t=o.multipleDefinitions)&&void 0!==t?t:ot(o.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:null!==(n=o.multipleTypeDefinitions)&&void 0!==n?n:ot(o.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:null!==(i=o.multipleDeclarations)&&void 0!==i?i:ot(o.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:null!==(s=o.multipleImplementations)&&void 0!==s?s:ot(o.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:null!==(r=o.multipleReferences)&&void 0!==r?r:ot(o.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:rt.string(o.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:rt.string(o.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:rt.string(o.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:rt.string(o.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:rt.string(o.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}),hideCursorInOverviewRuler:Dt(new et(59,"hideCursorInOverviewRuler",!1,{description:G("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:Dt(new class extends Ge{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:G("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:G("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:G("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:G("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:G("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:Je(t.enabled,this.defaultValue.enabled),delay:nt.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Je(t.sticky,this.defaultValue.sticky),hidingDelay:nt.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:Je(t.above,this.defaultValue.above)}}}),inDiffEditor:Dt(new et(61,"inDiffEditor",!1)),letterSpacing:Dt(new st(63,"letterSpacing",Et.letterSpacing,(e=>st.clamp(e,-5,20)),{description:G("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:Dt(new class extends Ge{constructor(){const e={enabled:ut.OnCode};super(64,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[ut.Off,ut.OnCode,ut.On],default:e.enabled,enumDescriptions:[G("editor.lightbulb.enabled.off","Disable the code action menu."),G("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),G("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:G("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;return{enabled:ot(e.enabled,this.defaultValue.enabled,[ut.Off,ut.OnCode,ut.On])}}}),lineDecorationsWidth:Dt(new class extends Ge{constructor(){super(65,"lineDecorationsWidth",10)}validate(e){if("string"===typeof e&&/^\d+(\.\d+)?ch$/.test(e)){return-parseFloat(e.substring(0,e.length-2))}return nt.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,n){return n<0?nt.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}}),lineHeight:Dt(new class extends st{constructor(){super(66,"lineHeight",Et.lineHeight,(e=>st.clamp(e,0,150)),{markdownDescription:G("lineHeight","Controls the line height. \n - Use 0 to automatically compute the line height from the font size.\n - Values between 0 and 8 will be used as a multiplier with the font size.\n - Values greater than or equal to 8 will be used as effective values.")})}compute(e,t,n){return e.fontInfo.lineHeight}}),lineNumbers:Dt(new class extends Ge{constructor(){super(67,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[G("lineNumbers.off","Line numbers are not rendered."),G("lineNumbers.on","Line numbers are rendered as absolute number."),G("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),G("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:G("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return"undefined"!==typeof e&&("function"===typeof e?(t=4,n=e):t="interval"===e?3:"relative"===e?2:"on"===e?1:0),{renderType:t,renderFn:n}}}),lineNumbersMinChars:Dt(new nt(68,"lineNumbersMinChars",5,1,300)),linkedEditing:Dt(new et(69,"linkedEditing",!1,{description:G("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:Dt(new et(70,"links",!0,{description:G("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:Dt(new at(71,"matchBrackets","always",["always","near","never"],{description:G("matchBrackets","Highlight matching brackets.")})),minimap:Dt(new class extends Ge{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1};super(72,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:G("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:G("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[G("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),G("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),G("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:G("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:G("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:G("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:G("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:G("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:G("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:Je(t.enabled,this.defaultValue.enabled),autohide:Je(t.autohide,this.defaultValue.autohide),size:ot(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:ot(t.side,this.defaultValue.side,["right","left"]),showSlider:ot(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Je(t.renderCharacters,this.defaultValue.renderCharacters),scale:nt.clampedInt(t.scale,1,1,3),maxColumn:nt.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4)}}}),mouseStyle:Dt(new at(73,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:Dt(new st(74,"mouseWheelScrollSensitivity",1,(e=>0===e?1:e),{markdownDescription:G("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:Dt(new et(75,"mouseWheelZoom",!1,{markdownDescription:_e?G("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):G("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:Dt(new et(76,"multiCursorMergeOverlapping",!0,{description:G("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:Dt(new lt(77,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],(function(e){return"ctrlCmd"===e?_e?"metaKey":"ctrlKey":"altKey"}),{markdownEnumDescriptions:[G("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),G("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:G({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:Dt(new at(78,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[G("multiCursorPaste.spread","Each cursor pastes a single line of the text."),G("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:G("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:Dt(new nt(79,"multiCursorLimit",1e4,1,1e5,{markdownDescription:G("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:Dt(new at(80,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[G("occurrencesHighlight.off","Does not highlight occurrences."),G("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),G("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:G("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:Dt(new et(81,"overviewRulerBorder",!0,{description:G("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:Dt(new nt(82,"overviewRulerLanes",3,0,3)),padding:Dt(new class extends Ge{constructor(){super(83,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:G("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:G("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{top:nt.clampedInt(t.top,0,0,1e3),bottom:nt.clampedInt(t.bottom,0,0,1e3)}}}),pasteAs:Dt(new class extends Ge{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(84,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:G("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:G("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[G("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),G("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:Je(t.enabled,this.defaultValue.enabled),showPasteSelector:ot(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}),parameterHints:Dt(new class extends Ge{constructor(){const e={enabled:!0,cycle:!0};super(85,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:G("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:G("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:Je(t.enabled,this.defaultValue.enabled),cycle:Je(t.cycle,this.defaultValue.cycle)}}}),peekWidgetDefaultFocus:Dt(new at(86,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[G("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),G("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:G("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),definitionLinkOpensInPeek:Dt(new et(87,"definitionLinkOpensInPeek",!1,{description:G("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:Dt(new class extends Ge{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[G("on","Quick suggestions show inside the suggest widget"),G("inline","Quick suggestions show as ghost text"),G("off","Quick suggestions are disabled")]}];super(88,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:G("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:G("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:G("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:G("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=e}validate(e){if("boolean"===typeof e){const t=e?"on":"off";return{comments:t,strings:t,other:t}}if(!e||"object"!==typeof e)return this.defaultValue;const{other:t,comments:n,strings:i}=e,s=["on","inline","off"];let r,o,a;return r="boolean"===typeof t?t?"on":"off":ot(t,this.defaultValue.other,s),o="boolean"===typeof n?n?"on":"off":ot(n,this.defaultValue.comments,s),a="boolean"===typeof i?i?"on":"off":ot(i,this.defaultValue.strings,s),{other:r,comments:o,strings:a}}}),quickSuggestionsDelay:Dt(new nt(89,"quickSuggestionsDelay",10,0,1073741824,{description:G("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:Dt(new et(90,"readOnly",!1)),readOnlyMessage:Dt(new class extends Ge{constructor(){super(91,"readOnlyMessage",undefined)}validate(e){return e&&"object"===typeof e?e:this.defaultValue}}),renameOnType:Dt(new et(92,"renameOnType",!1,{description:G("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:G("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:Dt(new et(93,"renderControlCharacters",!0,{description:G("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:Dt(new at(94,"renderFinalNewline",ve?"dimmed":"on",["off","on","dimmed"],{description:G("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:Dt(new at(95,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",G("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:G("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:Dt(new et(96,"renderLineHighlightOnlyWhenFocus",!1,{description:G("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:Dt(new at(97,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:Dt(new at(98,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",G("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),G("renderWhitespace.selection","Render whitespace characters only on selected text."),G("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:G("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:Dt(new nt(99,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:Dt(new et(100,"roundedSelection",!0,{description:G("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:Dt(new class extends Ge{constructor(){const e=[],t={type:"number",description:G("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(101,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:G("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:G("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const n of e)if("number"===typeof n)t.push({column:nt.clampedInt(n,0,0,1e4),color:null});else if(n&&"object"===typeof n){const e=n;t.push({column:nt.clampedInt(e.column,0,0,1e4),color:e.color})}return t.sort(((e,t)=>e.column-t.column)),t}return this.defaultValue}}),scrollbar:Dt(new class extends Ge{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(102,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[G("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),G("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),G("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:G("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[G("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),G("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),G("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:G("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:G("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:G("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:G("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:G("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e,n=nt.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=nt.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:nt.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:mt(t.vertical,this.defaultValue.vertical),horizontal:mt(t.horizontal,this.defaultValue.horizontal),useShadows:Je(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Je(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Je(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Je(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Je(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:nt.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:i,verticalSliderSize:nt.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:Je(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:Je(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}}),scrollBeyondLastColumn:Dt(new nt(103,"scrollBeyondLastColumn",4,0,1073741824,{description:G("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:Dt(new et(104,"scrollBeyondLastLine",!0,{description:G("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:Dt(new et(105,"scrollPredominantAxis",!0,{description:G("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:Dt(new et(106,"selectionClipboard",!0,{description:G("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:ve})),selectionHighlight:Dt(new et(107,"selectionHighlight",!0,{description:G("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:Dt(new et(108,"selectOnLineNumbers",!0)),showFoldingControls:Dt(new at(109,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[G("showFoldingControls.always","Always show the folding controls."),G("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),G("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:G("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:Dt(new et(110,"showUnused",!0,{description:G("showUnused","Controls fading out of unused code.")})),showDeprecated:Dt(new et(138,"showDeprecated",!0,{description:G("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:Dt(new class extends Ge{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(139,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:G("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[G("editor.inlayHints.on","Inlay hints are enabled"),G("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",_e?"Ctrl+Option":"Ctrl+Alt"),G("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",_e?"Ctrl+Option":"Ctrl+Alt"),G("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:G("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:G("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:G("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return"boolean"===typeof t.enabled&&(t.enabled=t.enabled?"on":"off"),{enabled:ot(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:nt.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:rt.string(t.fontFamily,this.defaultValue.fontFamily),padding:Je(t.padding,this.defaultValue.padding)}}}),snippetSuggestions:Dt(new at(111,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[G("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),G("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),G("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),G("snippetSuggestions.none","Do not show snippet suggestions.")],description:G("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:Dt(new class extends Ge{constructor(){super(112,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:G("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:G("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return e&&"object"===typeof e?{selectLeadingAndTrailingWhitespace:Je(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Je(e.selectSubwords,this.defaultValue.selectSubwords)}:this.defaultValue}}),smoothScrolling:Dt(new et(113,"smoothScrolling",!1,{description:G("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:Dt(new nt(116,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:Dt(new class extends Ge{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(117,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[G("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),G("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:G("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:G("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:G("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:G("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[G("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),G("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),G("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),G("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:G("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions (`#editor.quickSuggestions#` and `#editor.suggestOnTriggerCharacters#`) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:G("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:G("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:G("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:G("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:G("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:G("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:G("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:G("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{insertMode:ot(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Je(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Je(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Je(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Je(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:ot(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Je(t.showIcons,this.defaultValue.showIcons),showStatusBar:Je(t.showStatusBar,this.defaultValue.showStatusBar),preview:Je(t.preview,this.defaultValue.preview),previewMode:ot(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Je(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Je(t.showMethods,this.defaultValue.showMethods),showFunctions:Je(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Je(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Je(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Je(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Je(t.showFields,this.defaultValue.showFields),showVariables:Je(t.showVariables,this.defaultValue.showVariables),showClasses:Je(t.showClasses,this.defaultValue.showClasses),showStructs:Je(t.showStructs,this.defaultValue.showStructs),showInterfaces:Je(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Je(t.showModules,this.defaultValue.showModules),showProperties:Je(t.showProperties,this.defaultValue.showProperties),showEvents:Je(t.showEvents,this.defaultValue.showEvents),showOperators:Je(t.showOperators,this.defaultValue.showOperators),showUnits:Je(t.showUnits,this.defaultValue.showUnits),showValues:Je(t.showValues,this.defaultValue.showValues),showConstants:Je(t.showConstants,this.defaultValue.showConstants),showEnums:Je(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Je(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Je(t.showKeywords,this.defaultValue.showKeywords),showWords:Je(t.showWords,this.defaultValue.showWords),showColors:Je(t.showColors,this.defaultValue.showColors),showFiles:Je(t.showFiles,this.defaultValue.showFiles),showReferences:Je(t.showReferences,this.defaultValue.showReferences),showFolders:Je(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Je(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Je(t.showSnippets,this.defaultValue.showSnippets),showUsers:Je(t.showUsers,this.defaultValue.showUsers),showIssues:Je(t.showIssues,this.defaultValue.showIssues)}}}),inlineSuggest:Dt(new class extends Ge{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:G("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[G("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),G("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),G("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:G("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:G("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:G("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{enabled:Je(t.enabled,this.defaultValue.enabled),mode:ot(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:ot(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:Je(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Je(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:rt.string(t.fontFamily,this.defaultValue.fontFamily)}}}),inlineCompletionsAccessibilityVerbose:Dt(new et(147,"inlineCompletionsAccessibilityVerbose",!1,{description:G("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:Dt(new nt(118,"suggestFontSize",0,0,1e3,{markdownDescription:G("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:Dt(new nt(119,"suggestLineHeight",0,0,1e3,{markdownDescription:G("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:Dt(new et(120,"suggestOnTriggerCharacters",!0,{description:G("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:Dt(new at(121,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[G("suggestSelection.first","Always select the first suggestion."),G("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),G("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:G("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:Dt(new at(122,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[G("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),G("tabCompletion.off","Disable tab completions."),G("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:G("tabCompletion","Enables tab completions.")})),tabIndex:Dt(new nt(123,"tabIndex",0,-1,1073741824)),unicodeHighlight:Dt(new class extends Ge{constructor(){const e={nonBasicASCII:bt,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:bt,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(124,"unicodeHighlight",e,{[yt]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,bt],default:e.nonBasicASCII,description:G("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[vt]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:G("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[St]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:G("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[wt]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,bt],default:e.includeComments,description:G("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[kt]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,bt],default:e.includeStrings,description:G("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[_t]:{restricted:!0,type:"object",default:e.allowedCharacters,description:G("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Ct]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:G("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(j(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},n=!0)),t.allowedLocales&&e&&(j(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},n=!0));const i=super.applyUpdate(e,t);return n?new Ye(i.newValue,!0):i}validate(e){if(!e||"object"!==typeof e)return this.defaultValue;const t=e;return{nonBasicASCII:xt(t.nonBasicASCII,bt,[!0,!1,bt]),invisibleCharacters:Je(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Je(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:xt(t.includeComments,bt,[!0,!1,bt]),includeStrings:xt(t.includeStrings,bt,[!0,!1,bt]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if("object"!==typeof e||!e)return t;const n={};for(const[i,s]of Object.entries(e))!0===s&&(n[i]=!0);return n}}),unusualLineTerminators:Dt(new at(125,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[G("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),G("unusualLineTerminators.off","Unusual line terminators are ignored."),G("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:G("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:Dt(new et(126,"useShadowDOM",!0)),useTabStops:Dt(new et(127,"useTabStops",!0,{description:G("useTabStops","Inserting and deleting whitespace follows tab stops.")})),wordBreak:Dt(new at(128,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[G("wordBreak.normal","Use the default line break rule."),G("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:G("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSeparators:Dt(new rt(129,"wordSeparators",ze,{description:G("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:Dt(new at(130,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[G("wordWrap.off","Lines will never wrap."),G("wordWrap.on","Lines will wrap at the viewport width."),G({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),G({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:G({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:Dt(new rt(131,"wordWrapBreakAfterCharacters"," \t})]?|/&.,;\xa2\xb0\u2032\u2033\u2030\u2103\u3001\u3002\uff61\uff64\uffe0\uff0c\uff0e\uff1a\uff1b\uff1f\uff01\uff05\u30fb\uff65\u309d\u309e\u30fd\u30fe\u30fc\u30a1\u30a3\u30a5\u30a7\u30a9\u30c3\u30e3\u30e5\u30e7\u30ee\u30f5\u30f6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308e\u3095\u3096\u31f0\u31f1\u31f2\u31f3\u31f4\u31f5\u31f6\u31f7\u31f8\u31f9\u31fa\u31fb\u31fc\u31fd\u31fe\u31ff\u3005\u303b\uff67\uff68\uff69\uff6a\uff6b\uff6c\uff6d\uff6e\uff6f\uff70\u201d\u3009\u300b\u300d\u300f\u3011\u3015\uff09\uff3d\uff5d\uff63")),wordWrapBreakBeforeCharacters:Dt(new rt(132,"wordWrapBreakBeforeCharacters","([{\u2018\u201c\u3008\u300a\u300c\u300e\u3010\u3014\uff08\uff3b\uff5b\uff62\xa3\xa5\uff04\uffe1\uffe5+\uff0b")),wordWrapColumn:Dt(new nt(133,"wordWrapColumn",80,1,1073741824,{markdownDescription:G({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:Dt(new at(134,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:Dt(new at(135,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:Dt(new class extends Xe{constructor(){super(140)}compute(e,t,n){const i=["monaco-editor"];return t.get(39)&&i.push(t.get(39)),e.extraEditorClassName&&i.push(e.extraEditorClassName),"default"===t.get(73)?i.push("mouse-default"):"copy"===t.get(73)&&i.push("mouse-copy"),t.get(110)&&i.push("showUnused"),t.get(138)&&i.push("showDeprecated"),i.join(" ")}}),defaultColorDecorators:Dt(new et(145,"defaultColorDecorators",!1,{markdownDescription:G("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:Dt(new class extends Xe{constructor(){super(141)}compute(e,t,n){return e.pixelRatio}}),tabFocusMode:Dt(new et(142,"tabFocusMode",!1,{markdownDescription:G("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:Dt(new gt),wrappingInfo:Dt(new class extends Xe{constructor(){super(144)}compute(e,t,n){const i=t.get(143);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}}),wrappingIndent:Dt(new class extends Ge{constructor(){super(136,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[G("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),G("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),G("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),G("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:G("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,n){return 2===t.get(2)?0:n}}),wrappingStrategy:Dt(new class extends Ge{constructor(){super(137,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[G("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),G("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:G("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return ot(e,"simple",["simple","advanced"])}compute(e,t,n){return 2===t.get(2)?"advanced":n}})};const Tt=new class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout((()=>{if(e.stack){if(zt.isErrorNoTelemetry(e))throw new zt(e.message+"\n\n"+e.stack);throw new Error(e.message+"\n\n"+e.stack)}throw e}),0)}}emit(e){this.listeners.forEach((t=>{t(e)}))}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};function Nt(e){Rt(e)||Tt.onUnexpectedError(e)}function It(e){Rt(e)||Tt.onUnexpectedExternalError(e)}function $t(e){if(e instanceof Error){const{name:t,message:n}=e;return{$isError:!0,name:t,message:n,stack:e.stacktrace||e.stack,noTelemetry:zt.isErrorNoTelemetry(e)}}return e}const Mt="Canceled";function Rt(e){return e instanceof Ot||e instanceof Error&&e.name===Mt&&e.message===Mt}class Ot extends Error{constructor(){super(Mt),this.name=this.message}}function Pt(e){return e?new Error("Illegal argument: ".concat(e)):new Error("Illegal argument")}function Ft(e){return e?new Error("Illegal state: ".concat(e)):new Error("Illegal state")}class Bt extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class zt extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof zt)return e;const t=new zt;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return"CodeExpectedError"===e.name}}class Wt extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,Wt.prototype)}}function Ht(e,t){const n=this;let i,s=!1;return function(){if(s)return i;if(s=!0,t)try{i=e.apply(n,arguments)}finally{t()}else i=e.apply(n,arguments);return i}}let Vt=null;function jt(e){return null===Vt||void 0===Vt||Vt.trackDisposable(e),e}function Ut(e){null===Vt||void 0===Vt||Vt.markAsDisposed(e)}function qt(e,t){null===Vt||void 0===Vt||Vt.setParent(e,t)}function Kt(e){return null===Vt||void 0===Vt||Vt.markAsSingleton(e),e}function Gt(e){if(Pe.is(e)){const t=[];for(const n of e)if(n)try{n.dispose()}catch(zY){t.push(zY)}if(1===t.length)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}if(e)return e.dispose(),e}function Yt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=Qt((()=>Gt(t)));return function(e,t){if(Vt)for(const n of e)Vt.setParent(n,t)}(t,i),i}function Qt(e){const t=jt({dispose:Ht((()=>{Ut(t),e()}))});return t}class Xt{constructor(){this._toDispose=new Set,this._isDisposed=!1,jt(this)}dispose(){this._isDisposed||(Ut(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(0!==this._toDispose.size)try{Gt(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return qt(e,this),this._isDisposed?Xt.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),qt(e,null))}}Xt.DISABLE_DISPOSED_WARNING=!1;class Zt{constructor(){this._store=new Xt,jt(this),qt(this._store,this)}dispose(){Ut(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}Zt.None=Object.freeze({dispose(){}});class Jt{constructor(){this._isDisposed=!1,jt(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||(null===(t=this._value)||void 0===t||t.dispose(),e&&qt(e,this),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,Ut(this),null===(e=this._value)||void 0===e||e.dispose(),this._value=void 0}}class en{constructor(e){this.object=e}dispose(){}}class tn{constructor(){this._store=new Map,this._isDisposed=!1,jt(this)}dispose(){Ut(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{Gt(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var i;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||null===(i=this._store.get(e))||void 0===i||i.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;null===(t=this._store.get(e))||void 0===t||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const nn=globalThis.performance&&"function"===typeof globalThis.performance.now;class sn{static create(e){return new sn(e)}constructor(e){this._now=nn&&!1===e?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}elapsed(){return-1!==this._stopTime?this._stopTime-this._startTime:this._now()-this._startTime}}var rn;!function(e){function t(e){false}function n(e){return function(t){let n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=!1;return n=e((e=>{if(!s)return n?n.dispose():s=!0,t.call(i,e)}),null,arguments.length>2?arguments[2]:void 0),s&&n.dispose(),n}}function i(e,t,n){return r((function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e((e=>n.call(i,t(e))),null,arguments.length>2?arguments[2]:void 0)}),n)}function s(e,t,n){return r((function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e((e=>t(e)&&n.call(i,e)),null,arguments.length>2?arguments[2]:void 0)}),n)}function r(e,n){let i;const s={onWillAddFirstListener(){i=e(r.fire,r)},onDidRemoveLastListener(){null===i||void 0===i||i.dispose()}};n||t();const r=new un(s);return null===n||void 0===n||n.add(r),r.event}function o(e,n){let i,s,r,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],u=arguments.length>6?arguments[6]:void 0,h=0;const d={leakWarningThreshold:arguments.length>5?arguments[5]:void 0,onWillAddFirstListener(){i=e((e=>{h++,s=n(s,e),l&&!r&&(f.fire(s),s=void 0),o=()=>{const e=s;s=void 0,r=void 0,(!l||h>1)&&f.fire(e),h=0},"number"===typeof a?(clearTimeout(r),r=setTimeout(o,a)):void 0===r&&(r=0,queueMicrotask(o))}))},onWillRemoveListener(){c&&h>0&&(null===o||void 0===o||o())},onDidRemoveLastListener(){o=void 0,i.dispose()}};u||t();const f=new un(d);return null===u||void 0===u||u.add(f),f.event}e.None=()=>Zt.None,e.defer=function(e,t){return o(e,(()=>{}),0,void 0,!0,void 0,t)},e.once=n,e.map=i,e.forEach=function(e,t,n){return r((function(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e((e=>{t(e),n.call(i,e)}),null,arguments.length>2?arguments[2]:void 0)}),n)},e.filter=s,e.signal=function(e){return e},e.any=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0;return function(e,t){t instanceof Array?t.push(e):t&&t.add(e);return e}(Yt(...t.map((t=>t((t=>e.call(n,t)))))),i)}},e.reduce=function(e,t,n,s){let r=n;return i(e,(e=>(r=t(r,e),r)),s)},e.debounce=o,e.accumulate=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;return e.debounce(t,((e,t)=>e?(e.push(t),e):[t]),n,void 0,!0,void 0,i)},e.latch=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e===t,i=!0;return s(e,(e=>{const s=i||!n(e,t);return i=!1,t=e,s}),arguments.length>2?arguments[2]:void 0)},e.split=function(t,n,i){return[e.filter(t,n,i),e.filter(t,(e=>!n(e)),i)]},e.buffer=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>3?arguments[3]:void 0,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).slice(),s=e((e=>{i?i.push(e):o.fire(e)}));n&&n.add(s);const r=()=>{null===i||void 0===i||i.forEach((e=>o.fire(e))),i=null},o=new un({onWillAddFirstListener(){s||(s=e((e=>o.fire(e))),n&&n.add(s))},onDidAddFirstListener(){i&&(t?setTimeout(r):r())},onDidRemoveLastListener(){s&&s.dispose(),s=null}});return n&&n.add(o),o.event},e.chain=function(e,t){return(n,i,s)=>{const r=t(new l);return e((function(e){const t=r.evaluate(e);t!==a&&n.call(i,t)}),void 0,s)}};const a=Symbol("HaltChainable");class l{constructor(){this.steps=[]}map(e){return this.steps.push(e),this}forEach(e){return this.steps.push((t=>(e(t),t))),this}filter(e){return this.steps.push((t=>e(t)?t:a)),this}reduce(e,t){let n=t;return this.steps.push((t=>(n=e(n,t),n))),this}latch(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(e,t)=>e===t,n=!0;return this.steps.push((i=>{const s=n||!t(i,e);return n=!1,e=i,s?i:a})),this}evaluate(e){for(const t of this.steps)if((e=t(e))===a)break;return e}}e.fromNodeEventEmitter=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;const i=function(){return s.fire(n(...arguments))},s=new un({onWillAddFirstListener:()=>e.on(t,i),onDidRemoveLastListener:()=>e.removeListener(t,i)});return s.event},e.fromDOMEventEmitter=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e;const i=function(){return s.fire(n(...arguments))},s=new un({onWillAddFirstListener:()=>e.addEventListener(t,i),onDidRemoveLastListener:()=>e.removeEventListener(t,i)});return s.event},e.toPromise=function(e){return new Promise((t=>n(e)(t)))},e.fromPromise=function(e){const t=new un;return e.then((e=>{t.fire(e)}),(()=>{t.fire(void 0)})).finally((()=>{t.dispose()})),t.event},e.runAndSubscribe=function(e,t,n){return t(n),e((e=>t(e)))};class c{constructor(e,n){this._observable=e,this._counter=0,this._hasChanged=!1;const i={onWillAddFirstListener:()=>{e.addObserver(this)},onDidRemoveLastListener:()=>{e.removeObserver(this)}};n||t(),this.emitter=new un(i),n&&n.add(this.emitter)}beginUpdate(e){this._counter++}handlePossibleChange(e){}handleChange(e,t){this._hasChanged=!0}endUpdate(e){this._counter--,0===this._counter&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}e.fromObservable=function(e,t){return new c(e,t).emitter.event},e.fromObservableLight=function(e){return(t,n,i)=>{let s=0,r=!1;const o={beginUpdate(){s++},endUpdate(){s--,0===s&&(e.reportChanges(),r&&(r=!1,t.call(n)))},handlePossibleChange(){},handleChange(){r=!0}};e.addObserver(o),e.reportChanges();const a={dispose(){e.removeObserver(o)}};return i instanceof Xt?i.add(a):Array.isArray(i)&&i.push(a),a}}}(rn||(rn={}));class on{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name="".concat(e,"_").concat(on._idPool++),on.all.add(this)}start(e){this._stopWatch=new sn,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}}on.all=new Set,on._idPool=0;class an{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random().toString(18).slice(2,5);this.threshold=e,this.name=t,this._warnCountdown=0}dispose(){var e;null===(e=this._stacks)||void 0===e||e.clear()}check(e,t){const n=this.threshold;if(n<=0||t<n)return;this._stacks||(this._stacks=new Map);const i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){let e;this._warnCountdown=.5*n;let i=0;for(const[t,n]of this._stacks)(!e||i<n)&&(e=t,i=n);console.warn("[".concat(this.name,"] potential listener LEAK detected, having ").concat(t," listeners already. MOST frequent listener (").concat(i,"):")),console.warn(e)}return()=>{const t=this._stacks.get(e.value)||0;this._stacks.set(e.value,t-1)}}}class ln{static create(){var e;return new ln(null!==(e=(new Error).stack)&&void 0!==e?e:"")}constructor(e){this.value=e}print(){console.warn(this.value.split("\n").slice(2).join("\n"))}}class cn{constructor(e){this.value=e}}class un{constructor(e){var t,n,i,s,r;this._size=0,this._options=e,this._leakageMon=(null===(t=this._options)||void 0===t?void 0:t.leakWarningThreshold)?new an(null!==(i=null===(n=this._options)||void 0===n?void 0:n.leakWarningThreshold)&&void 0!==i?i:-1):void 0,this._perfMon=(null===(s=this._options)||void 0===s?void 0:s._profName)?new on(this._options._profName):void 0,this._deliveryQueue=null===(r=this._options)||void 0===r?void 0:r.deliveryQueue}dispose(){var e,t,n,i;this._disposed||(this._disposed=!0,(null===(e=this._deliveryQueue)||void 0===e?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),null===(n=null===(t=this._options)||void 0===t?void 0:t.onDidRemoveLastListener)||void 0===n||n.call(t),null===(i=this._leakageMon)||void 0===i||i.dispose())}get event(){var e;return null!==(e=this._event)&&void 0!==e||(this._event=(e,t,n)=>{var i,s,r,o,a;if(this._leakageMon&&this._size>3*this._leakageMon.threshold)return console.warn("[".concat(this._leakageMon.name,"] REFUSES to accept new listeners because it exceeded its threshold by far")),Zt.None;if(this._disposed)return Zt.None;t&&(e=e.bind(t));const l=new cn(e);let c;this._leakageMon&&this._size>=Math.ceil(.2*this._leakageMon.threshold)&&(l.stack=ln.create(),c=this._leakageMon.check(l.stack,this._size+1)),this._listeners?this._listeners instanceof cn?(null!==(a=this._deliveryQueue)&&void 0!==a||(this._deliveryQueue=new hn),this._listeners=[this._listeners,l]):this._listeners.push(l):(null===(s=null===(i=this._options)||void 0===i?void 0:i.onWillAddFirstListener)||void 0===s||s.call(i,this),this._listeners=l,null===(o=null===(r=this._options)||void 0===r?void 0:r.onDidAddFirstListener)||void 0===o||o.call(r,this)),this._size++;const u=Qt((()=>{null===c||void 0===c||c(),this._removeListener(l)}));return n instanceof Xt?n.add(u):Array.isArray(n)&&n.push(u),u}),this._event}_removeListener(e){var t,n,i,s;if(null===(n=null===(t=this._options)||void 0===t?void 0:t.onWillRemoveListener)||void 0===n||n.call(t,this),!this._listeners)return;if(1===this._size)return this._listeners=void 0,null===(s=null===(i=this._options)||void 0===i?void 0:i.onDidRemoveLastListener)||void 0===s||s.call(i,this),void(this._size=0);const r=this._listeners,o=r.indexOf(e);if(-1===o)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,r[o]=void 0;const a=this._deliveryQueue.current===this;if(2*this._size<=r.length){let e=0;for(let t=0;t<r.length;t++)r[t]?r[e++]=r[t]:a&&(this._deliveryQueue.end--,e<this._deliveryQueue.i&&this._deliveryQueue.i--);r.length=e}}_deliver(e,t){var n;if(!e)return;const i=(null===(n=this._options)||void 0===n?void 0:n.onListenerError)||Nt;if(i)try{e.value(t)}catch(zY){i(zY)}else e.value(t)}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,n,i,s;if((null===(t=this._deliveryQueue)||void 0===t?void 0:t.current)&&(this._deliverQueue(this._deliveryQueue),null===(n=this._perfMon)||void 0===n||n.stop()),null===(i=this._perfMon)||void 0===i||i.start(this._size),this._listeners)if(this._listeners instanceof cn)this._deliver(this._listeners,e);else{const t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}else;null===(s=this._perfMon)||void 0===s||s.stop()}hasListeners(){return this._size>0}}class hn{constructor(){this.i=-1,this.end=0}enqueue(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class dn extends un{constructor(e){super(e),this._isPaused=0,this._eventQueue=new Be,this._mergeFn=null===e||void 0===e?void 0:e.merge}pause(){this._isPaused++}resume(){if(0!==this._isPaused&&0===--this._isPaused)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&0!==this._eventQueue.size;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(0!==this._isPaused?this._eventQueue.push(e):super.fire(e))}}class fn extends dn{constructor(e){var t;super(e),this._delay=null!==(t=e.delay)&&void 0!==t?t:100}fire(e){this._handle||(this.pause(),this._handle=setTimeout((()=>{this._handle=void 0,this.resume()}),this._delay)),super.fire(e)}}class gn extends un{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=null===e||void 0===e?void 0:e.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),1===this._queuedEvents.length&&queueMicrotask((()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach((e=>super.fire(e))),this._queuedEvents=[]})))}}class pn{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new un({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};this.events.push(t),this.hasListeners&&this.hook(t);return Qt(Ht((()=>{this.hasListeners&&this.unhook(t);const e=this.events.indexOf(t);this.events.splice(e,1)})))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach((e=>this.hook(e)))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach((e=>this.unhook(e)))}hook(e){e.listener=e.event((e=>this.emitter.fire(e)))}unhook(e){e.listener&&e.listener.dispose(),e.listener=null}dispose(){this.emitter.dispose()}}class mn{constructor(){this.buffers=[]}wrapEvent(e){return(t,n,i)=>e((e=>{const i=this.buffers[this.buffers.length-1];i?i.push((()=>t.call(n,e))):t.call(n,e)}),void 0,i)}bufferEvents(e){const t=[];this.buffers.push(t);const n=e();return this.buffers.pop(),t.forEach((e=>e())),n}}class bn{constructor(){this.listening=!1,this.inputEvent=rn.None,this.inputEventListener=Zt.None,this.emitter=new un({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const _n=Object.freeze((function(e,t){const n=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(n)}}}));var vn;!function(e){e.isCancellationToken=function(t){return t===e.None||t===e.Cancelled||(t instanceof yn||!(!t||"object"!==typeof t)&&("boolean"===typeof t.isCancellationRequested&&"function"===typeof t.onCancellationRequested))},e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:rn.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:_n})}(vn||(vn={}));class yn{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?_n:(this._emitter||(this._emitter=new un),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class Sn{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new yn),this._token}cancel(){this._token?this._token instanceof yn&&this._token.cancel():this._token=vn.Cancelled}dispose(){var e;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.cancel(),null===(e=this._parentListener)||void 0===e||e.dispose(),this._token?this._token instanceof yn&&this._token.dispose():this._token=vn.None}}class wn{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const kn=new wn,Cn=new wn,xn=new wn,En=new Array(230),Ln={},Dn=[],An=Object.create(null),Tn=Object.create(null),Nn=[],In=[];for(let WY=0;WY<=193;WY++)Nn[WY]=-1;for(let WY=0;WY<=132;WY++)In[WY]=-1;var $n;let Mn;!function(){const e="",t=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",e,e],[1,1,"Hyper",0,e,0,e,e,e],[1,2,"Super",0,e,0,e,e,e],[1,3,"Fn",0,e,0,e,e,e],[1,4,"FnLock",0,e,0,e,e,e],[1,5,"Suspend",0,e,0,e,e,e],[1,6,"Resume",0,e,0,e,e,e],[1,7,"Turbo",0,e,0,e,e,e],[1,8,"Sleep",0,e,0,"VK_SLEEP",e,e],[1,9,"WakeUp",0,e,0,e,e,e],[0,10,"KeyA",31,"A",65,"VK_A",e,e],[0,11,"KeyB",32,"B",66,"VK_B",e,e],[0,12,"KeyC",33,"C",67,"VK_C",e,e],[0,13,"KeyD",34,"D",68,"VK_D",e,e],[0,14,"KeyE",35,"E",69,"VK_E",e,e],[0,15,"KeyF",36,"F",70,"VK_F",e,e],[0,16,"KeyG",37,"G",71,"VK_G",e,e],[0,17,"KeyH",38,"H",72,"VK_H",e,e],[0,18,"KeyI",39,"I",73,"VK_I",e,e],[0,19,"KeyJ",40,"J",74,"VK_J",e,e],[0,20,"KeyK",41,"K",75,"VK_K",e,e],[0,21,"KeyL",42,"L",76,"VK_L",e,e],[0,22,"KeyM",43,"M",77,"VK_M",e,e],[0,23,"KeyN",44,"N",78,"VK_N",e,e],[0,24,"KeyO",45,"O",79,"VK_O",e,e],[0,25,"KeyP",46,"P",80,"VK_P",e,e],[0,26,"KeyQ",47,"Q",81,"VK_Q",e,e],[0,27,"KeyR",48,"R",82,"VK_R",e,e],[0,28,"KeyS",49,"S",83,"VK_S",e,e],[0,29,"KeyT",50,"T",84,"VK_T",e,e],[0,30,"KeyU",51,"U",85,"VK_U",e,e],[0,31,"KeyV",52,"V",86,"VK_V",e,e],[0,32,"KeyW",53,"W",87,"VK_W",e,e],[0,33,"KeyX",54,"X",88,"VK_X",e,e],[0,34,"KeyY",55,"Y",89,"VK_Y",e,e],[0,35,"KeyZ",56,"Z",90,"VK_Z",e,e],[0,36,"Digit1",22,"1",49,"VK_1",e,e],[0,37,"Digit2",23,"2",50,"VK_2",e,e],[0,38,"Digit3",24,"3",51,"VK_3",e,e],[0,39,"Digit4",25,"4",52,"VK_4",e,e],[0,40,"Digit5",26,"5",53,"VK_5",e,e],[0,41,"Digit6",27,"6",54,"VK_6",e,e],[0,42,"Digit7",28,"7",55,"VK_7",e,e],[0,43,"Digit8",29,"8",56,"VK_8",e,e],[0,44,"Digit9",30,"9",57,"VK_9",e,e],[0,45,"Digit0",21,"0",48,"VK_0",e,e],[1,46,"Enter",3,"Enter",13,"VK_RETURN",e,e],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",e,e],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",e,e],[1,49,"Tab",2,"Tab",9,"VK_TAB",e,e],[1,50,"Space",10,"Space",32,"VK_SPACE",e,e],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,e,0,e,e,e],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",e,e],[1,64,"F1",59,"F1",112,"VK_F1",e,e],[1,65,"F2",60,"F2",113,"VK_F2",e,e],[1,66,"F3",61,"F3",114,"VK_F3",e,e],[1,67,"F4",62,"F4",115,"VK_F4",e,e],[1,68,"F5",63,"F5",116,"VK_F5",e,e],[1,69,"F6",64,"F6",117,"VK_F6",e,e],[1,70,"F7",65,"F7",118,"VK_F7",e,e],[1,71,"F8",66,"F8",119,"VK_F8",e,e],[1,72,"F9",67,"F9",120,"VK_F9",e,e],[1,73,"F10",68,"F10",121,"VK_F10",e,e],[1,74,"F11",69,"F11",122,"VK_F11",e,e],[1,75,"F12",70,"F12",123,"VK_F12",e,e],[1,76,"PrintScreen",0,e,0,e,e,e],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",e,e],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",e,e],[1,79,"Insert",19,"Insert",45,"VK_INSERT",e,e],[1,80,"Home",14,"Home",36,"VK_HOME",e,e],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",e,e],[1,82,"Delete",20,"Delete",46,"VK_DELETE",e,e],[1,83,"End",13,"End",35,"VK_END",e,e],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",e,e],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",e],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",e],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",e],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",e],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",e,e],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",e,e],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",e,e],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",e,e],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",e,e],[1,94,"NumpadEnter",3,e,0,e,e,e],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",e,e],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",e,e],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",e,e],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",e,e],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",e,e],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",e,e],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",e,e],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",e,e],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",e,e],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",e,e],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",e,e],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",e,e],[1,107,"ContextMenu",58,"ContextMenu",93,e,e,e],[1,108,"Power",0,e,0,e,e,e],[1,109,"NumpadEqual",0,e,0,e,e,e],[1,110,"F13",71,"F13",124,"VK_F13",e,e],[1,111,"F14",72,"F14",125,"VK_F14",e,e],[1,112,"F15",73,"F15",126,"VK_F15",e,e],[1,113,"F16",74,"F16",127,"VK_F16",e,e],[1,114,"F17",75,"F17",128,"VK_F17",e,e],[1,115,"F18",76,"F18",129,"VK_F18",e,e],[1,116,"F19",77,"F19",130,"VK_F19",e,e],[1,117,"F20",78,"F20",131,"VK_F20",e,e],[1,118,"F21",79,"F21",132,"VK_F21",e,e],[1,119,"F22",80,"F22",133,"VK_F22",e,e],[1,120,"F23",81,"F23",134,"VK_F23",e,e],[1,121,"F24",82,"F24",135,"VK_F24",e,e],[1,122,"Open",0,e,0,e,e,e],[1,123,"Help",0,e,0,e,e,e],[1,124,"Select",0,e,0,e,e,e],[1,125,"Again",0,e,0,e,e,e],[1,126,"Undo",0,e,0,e,e,e],[1,127,"Cut",0,e,0,e,e,e],[1,128,"Copy",0,e,0,e,e,e],[1,129,"Paste",0,e,0,e,e,e],[1,130,"Find",0,e,0,e,e,e],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",e,e],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",e,e],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",e,e],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",e,e],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",e,e],[1,136,"KanaMode",0,e,0,e,e,e],[0,137,"IntlYen",0,e,0,e,e,e],[1,138,"Convert",0,e,0,e,e,e],[1,139,"NonConvert",0,e,0,e,e,e],[1,140,"Lang1",0,e,0,e,e,e],[1,141,"Lang2",0,e,0,e,e,e],[1,142,"Lang3",0,e,0,e,e,e],[1,143,"Lang4",0,e,0,e,e,e],[1,144,"Lang5",0,e,0,e,e,e],[1,145,"Abort",0,e,0,e,e,e],[1,146,"Props",0,e,0,e,e,e],[1,147,"NumpadParenLeft",0,e,0,e,e,e],[1,148,"NumpadParenRight",0,e,0,e,e,e],[1,149,"NumpadBackspace",0,e,0,e,e,e],[1,150,"NumpadMemoryStore",0,e,0,e,e,e],[1,151,"NumpadMemoryRecall",0,e,0,e,e,e],[1,152,"NumpadMemoryClear",0,e,0,e,e,e],[1,153,"NumpadMemoryAdd",0,e,0,e,e,e],[1,154,"NumpadMemorySubtract",0,e,0,e,e,e],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",e,e],[1,156,"NumpadClearEntry",0,e,0,e,e,e],[1,0,e,5,"Ctrl",17,"VK_CONTROL",e,e],[1,0,e,4,"Shift",16,"VK_SHIFT",e,e],[1,0,e,6,"Alt",18,"VK_MENU",e,e],[1,0,e,57,"Meta",91,"VK_COMMAND",e,e],[1,157,"ControlLeft",5,e,0,"VK_LCONTROL",e,e],[1,158,"ShiftLeft",4,e,0,"VK_LSHIFT",e,e],[1,159,"AltLeft",6,e,0,"VK_LMENU",e,e],[1,160,"MetaLeft",57,e,0,"VK_LWIN",e,e],[1,161,"ControlRight",5,e,0,"VK_RCONTROL",e,e],[1,162,"ShiftRight",4,e,0,"VK_RSHIFT",e,e],[1,163,"AltRight",6,e,0,"VK_RMENU",e,e],[1,164,"MetaRight",57,e,0,"VK_RWIN",e,e],[1,165,"BrightnessUp",0,e,0,e,e,e],[1,166,"BrightnessDown",0,e,0,e,e,e],[1,167,"MediaPlay",0,e,0,e,e,e],[1,168,"MediaRecord",0,e,0,e,e,e],[1,169,"MediaFastForward",0,e,0,e,e,e],[1,170,"MediaRewind",0,e,0,e,e,e],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",e,e],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",e,e],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",e,e],[1,174,"Eject",0,e,0,e,e,e],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",e,e],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",e,e],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",e,e],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",e,e],[1,179,"LaunchApp1",0,e,0,"VK_MEDIA_LAUNCH_APP1",e,e],[1,180,"SelectTask",0,e,0,e,e,e],[1,181,"LaunchScreenSaver",0,e,0,e,e,e],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",e,e],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",e,e],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",e,e],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",e,e],[1,186,"BrowserStop",0,e,0,"VK_BROWSER_STOP",e,e],[1,187,"BrowserRefresh",0,e,0,"VK_BROWSER_REFRESH",e,e],[1,188,"BrowserFavorites",0,e,0,"VK_BROWSER_FAVORITES",e,e],[1,189,"ZoomToggle",0,e,0,e,e,e],[1,190,"MailReply",0,e,0,e,e,e],[1,191,"MailForward",0,e,0,e,e,e],[1,192,"MailSend",0,e,0,e,e,e],[1,0,e,114,"KeyInComposition",229,e,e,e],[1,0,e,116,"ABNT_C2",194,"VK_ABNT_C2",e,e],[1,0,e,96,"OEM_8",223,"VK_OEM_8",e,e],[1,0,e,0,e,0,"VK_KANA",e,e],[1,0,e,0,e,0,"VK_HANGUL",e,e],[1,0,e,0,e,0,"VK_JUNJA",e,e],[1,0,e,0,e,0,"VK_FINAL",e,e],[1,0,e,0,e,0,"VK_HANJA",e,e],[1,0,e,0,e,0,"VK_KANJI",e,e],[1,0,e,0,e,0,"VK_CONVERT",e,e],[1,0,e,0,e,0,"VK_NONCONVERT",e,e],[1,0,e,0,e,0,"VK_ACCEPT",e,e],[1,0,e,0,e,0,"VK_MODECHANGE",e,e],[1,0,e,0,e,0,"VK_SELECT",e,e],[1,0,e,0,e,0,"VK_PRINT",e,e],[1,0,e,0,e,0,"VK_EXECUTE",e,e],[1,0,e,0,e,0,"VK_SNAPSHOT",e,e],[1,0,e,0,e,0,"VK_HELP",e,e],[1,0,e,0,e,0,"VK_APPS",e,e],[1,0,e,0,e,0,"VK_PROCESSKEY",e,e],[1,0,e,0,e,0,"VK_PACKET",e,e],[1,0,e,0,e,0,"VK_DBE_SBCSCHAR",e,e],[1,0,e,0,e,0,"VK_DBE_DBCSCHAR",e,e],[1,0,e,0,e,0,"VK_ATTN",e,e],[1,0,e,0,e,0,"VK_CRSEL",e,e],[1,0,e,0,e,0,"VK_EXSEL",e,e],[1,0,e,0,e,0,"VK_EREOF",e,e],[1,0,e,0,e,0,"VK_PLAY",e,e],[1,0,e,0,e,0,"VK_ZOOM",e,e],[1,0,e,0,e,0,"VK_NONAME",e,e],[1,0,e,0,e,0,"VK_PA1",e,e],[1,0,e,0,e,0,"VK_OEM_CLEAR",e,e]],n=[],i=[];for(const s of t){const[e,t,r,o,a,l,c,u,h]=s;if(i[t]||(i[t]=!0,Dn[t]=r,An[r]=t,Tn[r.toLowerCase()]=t,e&&(Nn[t]=o,0!==o&&3!==o&&5!==o&&4!==o&&6!==o&&57!==o&&(In[o]=t))),!n[o]){if(n[o]=!0,!a)throw new Error("String representation missing for key code ".concat(o," around scan code ").concat(r));kn.define(o,a),Cn.define(o,u||a),xn.define(o,h||u||a)}l&&(En[l]=o),c&&(Ln[c]=o)}In[3]=46}(),function(e){e.toString=function(e){return kn.keyCodeToStr(e)},e.fromString=function(e){return kn.strToKeyCode(e)},e.toUserSettingsUS=function(e){return Cn.keyCodeToStr(e)},e.toUserSettingsGeneral=function(e){return xn.keyCodeToStr(e)},e.fromUserSettings=function(e){return Cn.strToKeyCode(e)||xn.strToKeyCode(e)},e.toElectronAccelerator=function(e){if(e>=98&&e<=113)return null;switch(e){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return kn.keyCodeToStr(e)}}($n||($n={}));const Rn=globalThis.vscode;if("undefined"!==typeof Rn&&"undefined"!==typeof Rn.process){const e=Rn.process;Mn={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd:()=>e.cwd()}}else Mn="undefined"!==typeof process?{get platform(){return process.platform},get arch(){return process.arch},get env(){return{NODE_ENV:"production",PUBLIC_URL:"/integrated-development-environment",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}},cwd:()=>({NODE_ENV:"production",PUBLIC_URL:"/integrated-development-environment",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.VSCODE_CWD||process.cwd())}:{get platform(){return be?"win32":_e?"darwin":"linux"},get arch(){},get env(){return{}},cwd:()=>"/"};const On=Mn.cwd,Pn=Mn.env,Fn=Mn.platform,Bn=46,zn=47,Wn=92,Hn=58;class Vn extends Error{constructor(e,t,n){let i;"string"===typeof t&&0===t.indexOf("not ")?(i="must not be",t=t.replace(/^not /,"")):i="must be";const s=-1!==e.indexOf(".")?"property":"argument";let r='The "'.concat(e,'" ').concat(s," ").concat(i," of type ").concat(t);r+=". Received type ".concat(typeof n),super(r),this.code="ERR_INVALID_ARG_TYPE"}}function jn(e,t){if("string"!==typeof e)throw new Vn(t,"string",e)}const Un="win32"===Fn;function qn(e){return e===zn||e===Wn}function Kn(e){return e===zn}function Gn(e){return e>=65&&e<=90||e>=97&&e<=122}function Yn(e,t,n,i){let s="",r=0,o=-1,a=0,l=0;for(let c=0;c<=e.length;++c){if(c<e.length)l=e.charCodeAt(c);else{if(i(l))break;l=zn}if(i(l)){if(o===c-1||1===a);else if(2===a){if(s.length<2||2!==r||s.charCodeAt(s.length-1)!==Bn||s.charCodeAt(s.length-2)!==Bn){if(s.length>2){const e=s.lastIndexOf(n);-1===e?(s="",r=0):(s=s.slice(0,e),r=s.length-1-s.lastIndexOf(n)),o=c,a=0;continue}if(0!==s.length){s="",r=0,o=c,a=0;continue}}t&&(s+=s.length>0?"".concat(n,".."):"..",r=2)}else s.length>0?s+="".concat(n).concat(e.slice(o+1,c)):s=e.slice(o+1,c),r=c-o-1;o=c,a=0}else l===Bn&&-1!==a?++a:a=-1}return s}function Qn(e,t){!function(e,t){if(null===e||"object"!==typeof e)throw new Vn(t,"Object",e)}(t,"pathObject");const n=t.dir||t.root,i=t.base||"".concat(t.name||"").concat(t.ext||"");return n?n===t.root?"".concat(n).concat(i):"".concat(n).concat(e).concat(i):i}const Xn={resolve(){let e="",t="",n=!1;for(let i=arguments.length-1;i>=-1;i--){let s;if(i>=0){if(s=i<0||arguments.length<=i?void 0:arguments[i],jn(s,"path"),0===s.length)continue}else 0===e.length?s=On():(s={NODE_ENV:"production",PUBLIC_URL:"/integrated-development-environment",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}["=".concat(e)]||On(),(void 0===s||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===Wn)&&(s="".concat(e,"\\")));const r=s.length;let o=0,a="",l=!1;const c=s.charCodeAt(0);if(1===r)qn(c)&&(o=1,l=!0);else if(qn(c))if(l=!0,qn(s.charCodeAt(1))){let e=2,t=e;for(;e<r&&!qn(s.charCodeAt(e));)e++;if(e<r&&e!==t){const n=s.slice(t,e);for(t=e;e<r&&qn(s.charCodeAt(e));)e++;if(e<r&&e!==t){for(t=e;e<r&&!qn(s.charCodeAt(e));)e++;e!==r&&e===t||(a="\\\\".concat(n,"\\").concat(s.slice(t,e)),o=e)}}}else o=1;else Gn(c)&&s.charCodeAt(1)===Hn&&(a=s.slice(0,2),o=2,r>2&&qn(s.charCodeAt(2))&&(l=!0,o=3));if(a.length>0)if(e.length>0){if(a.toLowerCase()!==e.toLowerCase())continue}else e=a;if(n){if(e.length>0)break}else if(t="".concat(s.slice(o),"\\").concat(t),n=l,l&&e.length>0)break}return t=Yn(t,!n,"\\",qn),n?"".concat(e,"\\").concat(t):"".concat(e).concat(t)||"."},normalize(e){jn(e,"path");const t=e.length;if(0===t)return".";let n,i=0,s=!1;const r=e.charCodeAt(0);if(1===t)return Kn(r)?"\\":e;if(qn(r))if(s=!0,qn(e.charCodeAt(1))){let s=2,r=s;for(;s<t&&!qn(e.charCodeAt(s));)s++;if(s<t&&s!==r){const o=e.slice(r,s);for(r=s;s<t&&qn(e.charCodeAt(s));)s++;if(s<t&&s!==r){for(r=s;s<t&&!qn(e.charCodeAt(s));)s++;if(s===t)return"\\\\".concat(o,"\\").concat(e.slice(r),"\\");s!==r&&(n="\\\\".concat(o,"\\").concat(e.slice(r,s)),i=s)}}}else i=1;else Gn(r)&&e.charCodeAt(1)===Hn&&(n=e.slice(0,2),i=2,t>2&&qn(e.charCodeAt(2))&&(s=!0,i=3));let o=i<t?Yn(e.slice(i),!s,"\\",qn):"";return 0!==o.length||s||(o="."),o.length>0&&qn(e.charCodeAt(t-1))&&(o+="\\"),void 0===n?s?"\\".concat(o):o:s?"".concat(n,"\\").concat(o):"".concat(n).concat(o)},isAbsolute(e){jn(e,"path");const t=e.length;if(0===t)return!1;const n=e.charCodeAt(0);return qn(n)||t>2&&Gn(n)&&e.charCodeAt(1)===Hn&&qn(e.charCodeAt(2))},join(){if(0===arguments.length)return".";let e,t;for(let s=0;s<arguments.length;++s){const n=s<0||arguments.length<=s?void 0:arguments[s];jn(n,"path"),n.length>0&&(void 0===e?e=t=n:e+="\\".concat(n))}if(void 0===e)return".";let n=!0,i=0;if("string"===typeof t&&qn(t.charCodeAt(0))){++i;const e=t.length;e>1&&qn(t.charCodeAt(1))&&(++i,e>2&&(qn(t.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&qn(e.charCodeAt(i));)i++;i>=2&&(e="\\".concat(e.slice(i)))}return Xn.normalize(e)},relative(e,t){if(jn(e,"from"),jn(t,"to"),e===t)return"";const n=Xn.resolve(e),i=Xn.resolve(t);if(n===i)return"";if((e=n.toLowerCase())===(t=i.toLowerCase()))return"";let s=0;for(;s<e.length&&e.charCodeAt(s)===Wn;)s++;let r=e.length;for(;r-1>s&&e.charCodeAt(r-1)===Wn;)r--;const o=r-s;let a=0;for(;a<t.length&&t.charCodeAt(a)===Wn;)a++;let l=t.length;for(;l-1>a&&t.charCodeAt(l-1)===Wn;)l--;const c=l-a,u=o<c?o:c;let h=-1,d=0;for(;d<u;d++){const n=e.charCodeAt(s+d);if(n!==t.charCodeAt(a+d))break;n===Wn&&(h=d)}if(d!==u){if(-1===h)return i}else{if(c>u){if(t.charCodeAt(a+d)===Wn)return i.slice(a+d+1);if(2===d)return i.slice(a+d)}o>u&&(e.charCodeAt(s+d)===Wn?h=d:2===d&&(h=3)),-1===h&&(h=0)}let f="";for(d=s+h+1;d<=r;++d)d!==r&&e.charCodeAt(d)!==Wn||(f+=0===f.length?"..":"\\..");return a+=h,f.length>0?"".concat(f).concat(i.slice(a,l)):(i.charCodeAt(a)===Wn&&++a,i.slice(a,l))},toNamespacedPath(e){if("string"!==typeof e||0===e.length)return e;const t=Xn.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===Wn){if(t.charCodeAt(1)===Wn){const e=t.charCodeAt(2);if(63!==e&&e!==Bn)return"\\\\?\\UNC\\".concat(t.slice(2))}}else if(Gn(t.charCodeAt(0))&&t.charCodeAt(1)===Hn&&t.charCodeAt(2)===Wn)return"\\\\?\\".concat(t);return e},dirname(e){jn(e,"path");const t=e.length;if(0===t)return".";let n=-1,i=0;const s=e.charCodeAt(0);if(1===t)return qn(s)?e:".";if(qn(s)){if(n=i=1,qn(e.charCodeAt(1))){let s=2,r=s;for(;s<t&&!qn(e.charCodeAt(s));)s++;if(s<t&&s!==r){for(r=s;s<t&&qn(e.charCodeAt(s));)s++;if(s<t&&s!==r){for(r=s;s<t&&!qn(e.charCodeAt(s));)s++;if(s===t)return e;s!==r&&(n=i=s+1)}}}}else Gn(s)&&e.charCodeAt(1)===Hn&&(n=t>2&&qn(e.charCodeAt(2))?3:2,i=n);let r=-1,o=!0;for(let a=t-1;a>=i;--a)if(qn(e.charCodeAt(a))){if(!o){r=a;break}}else o=!1;if(-1===r){if(-1===n)return".";r=n}return e.slice(0,r)},basename(e,t){void 0!==t&&jn(t,"ext"),jn(e,"path");let n,i=0,s=-1,r=!0;if(e.length>=2&&Gn(e.charCodeAt(0))&&e.charCodeAt(1)===Hn&&(i=2),void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=i;--n){const l=e.charCodeAt(n);if(qn(l)){if(!r){i=n+1;break}}else-1===a&&(r=!1,a=n+1),o>=0&&(l===t.charCodeAt(o)?-1===--o&&(s=n):(o=-1,s=a))}return i===s?s=a:-1===s&&(s=e.length),e.slice(i,s)}for(n=e.length-1;n>=i;--n)if(qn(e.charCodeAt(n))){if(!r){i=n+1;break}}else-1===s&&(r=!1,s=n+1);return-1===s?"":e.slice(i,s)},extname(e){jn(e,"path");let t=0,n=-1,i=0,s=-1,r=!0,o=0;e.length>=2&&e.charCodeAt(1)===Hn&&Gn(e.charCodeAt(0))&&(t=i=2);for(let a=e.length-1;a>=t;--a){const t=e.charCodeAt(a);if(qn(t)){if(!r){i=a+1;break}}else-1===s&&(r=!1,s=a+1),t===Bn?-1===n?n=a:1!==o&&(o=1):-1!==n&&(o=-1)}return-1===n||-1===s||0===o||1===o&&n===s-1&&n===i+1?"":e.slice(n,s)},format:Qn.bind(null,"\\"),parse(e){jn(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const n=e.length;let i=0,s=e.charCodeAt(0);if(1===n)return qn(s)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(qn(s)){if(i=1,qn(e.charCodeAt(1))){let t=2,s=t;for(;t<n&&!qn(e.charCodeAt(t));)t++;if(t<n&&t!==s){for(s=t;t<n&&qn(e.charCodeAt(t));)t++;if(t<n&&t!==s){for(s=t;t<n&&!qn(e.charCodeAt(t));)t++;t===n?i=t:t!==s&&(i=t+1)}}}}else if(Gn(s)&&e.charCodeAt(1)===Hn){if(n<=2)return t.root=t.dir=e,t;if(i=2,qn(e.charCodeAt(2))){if(3===n)return t.root=t.dir=e,t;i=3}}i>0&&(t.root=e.slice(0,i));let r=-1,o=i,a=-1,l=!0,c=e.length-1,u=0;for(;c>=i;--c)if(s=e.charCodeAt(c),qn(s)){if(!l){o=c+1;break}}else-1===a&&(l=!1,a=c+1),s===Bn?-1===r?r=c:1!==u&&(u=1):-1!==r&&(u=-1);return-1!==a&&(-1===r||0===u||1===u&&r===a-1&&r===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,r),t.base=e.slice(o,a),t.ext=e.slice(r,a))),t.dir=o>0&&o!==i?e.slice(0,o-1):t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},Zn=(()=>{if(Un){const e=/\\/g;return()=>{const t=On().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>On()})(),Jn={resolve(){let e="",t=!1;for(let n=arguments.length-1;n>=-1&&!t;n--){const i=n>=0?n<0||arguments.length<=n?void 0:arguments[n]:Zn();jn(i,"path"),0!==i.length&&(e="".concat(i,"/").concat(e),t=i.charCodeAt(0)===zn)}return e=Yn(e,!t,"/",Kn),t?"/".concat(e):e.length>0?e:"."},normalize(e){if(jn(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===zn,n=e.charCodeAt(e.length-1)===zn;return 0===(e=Yn(e,!t,"/",Kn)).length?t?"/":n?"./":".":(n&&(e+="/"),t?"/".concat(e):e)},isAbsolute:e=>(jn(e,"path"),e.length>0&&e.charCodeAt(0)===zn),join(){if(0===arguments.length)return".";let e;for(let t=0;t<arguments.length;++t){const n=t<0||arguments.length<=t?void 0:arguments[t];jn(n,"path"),n.length>0&&(void 0===e?e=n:e+="/".concat(n))}return void 0===e?".":Jn.normalize(e)},relative(e,t){if(jn(e,"from"),jn(t,"to"),e===t)return"";if((e=Jn.resolve(e))===(t=Jn.resolve(t)))return"";const n=e.length,i=n-1,s=t.length-1,r=i<s?i:s;let o=-1,a=0;for(;a<r;a++){const n=e.charCodeAt(1+a);if(n!==t.charCodeAt(1+a))break;n===zn&&(o=a)}if(a===r)if(s>r){if(t.charCodeAt(1+a)===zn)return t.slice(1+a+1);if(0===a)return t.slice(1+a)}else i>r&&(e.charCodeAt(1+a)===zn?o=a:0===a&&(o=0));let l="";for(a=1+o+1;a<=n;++a)a!==n&&e.charCodeAt(a)!==zn||(l+=0===l.length?"..":"/..");return"".concat(l).concat(t.slice(1+o))},toNamespacedPath:e=>e,dirname(e){if(jn(e,"path"),0===e.length)return".";const t=e.charCodeAt(0)===zn;let n=-1,i=!0;for(let s=e.length-1;s>=1;--s)if(e.charCodeAt(s)===zn){if(!i){n=s;break}}else i=!1;return-1===n?t?"/":".":t&&1===n?"//":e.slice(0,n)},basename(e,t){void 0!==t&&jn(t,"ext"),jn(e,"path");let n,i=0,s=-1,r=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const l=e.charCodeAt(n);if(l===zn){if(!r){i=n+1;break}}else-1===a&&(r=!1,a=n+1),o>=0&&(l===t.charCodeAt(o)?-1===--o&&(s=n):(o=-1,s=a))}return i===s?s=a:-1===s&&(s=e.length),e.slice(i,s)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===zn){if(!r){i=n+1;break}}else-1===s&&(r=!1,s=n+1);return-1===s?"":e.slice(i,s)},extname(e){jn(e,"path");let t=-1,n=0,i=-1,s=!0,r=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a!==zn)-1===i&&(s=!1,i=o+1),a===Bn?-1===t?t=o:1!==r&&(r=1):-1!==t&&(r=-1);else if(!s){n=o+1;break}}return-1===t||-1===i||0===r||1===r&&t===i-1&&t===n+1?"":e.slice(t,i)},format:Qn.bind(null,"/"),parse(e){jn(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;const n=e.charCodeAt(0)===zn;let i;n?(t.root="/",i=1):i=0;let s=-1,r=0,o=-1,a=!0,l=e.length-1,c=0;for(;l>=i;--l){const t=e.charCodeAt(l);if(t!==zn)-1===o&&(a=!1,o=l+1),t===Bn?-1===s?s=l:1!==c&&(c=1):-1!==s&&(c=-1);else if(!a){r=l+1;break}}if(-1!==o){const i=0===r&&n?1:r;-1===s||0===c||1===c&&s===o-1&&s===r+1?t.base=t.name=e.slice(i,o):(t.name=e.slice(i,s),t.base=e.slice(i,o),t.ext=e.slice(s,o))}return r>0?t.dir=e.slice(0,r-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Jn.win32=Xn.win32=Xn,Jn.posix=Xn.posix=Jn;const ei=Un?Xn.normalize:Jn.normalize,ti=Un?Xn.resolve:Jn.resolve,ni=Un?Xn.relative:Jn.relative,ii=Un?Xn.dirname:Jn.dirname,si=Un?Xn.basename:Jn.basename,ri=Un?Xn.extname:Jn.extname,oi=Un?Xn.sep:Jn.sep,ai=/^\w[\w\d+.-]*$/,li=/^\//,ci=/^\/\//;const ui="",hi="/",di=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class fi{static isUri(e){return e instanceof fi||!!e&&("string"===typeof e.authority&&"string"===typeof e.fragment&&"string"===typeof e.path&&"string"===typeof e.query&&"string"===typeof e.scheme&&"string"===typeof e.fsPath&&"function"===typeof e.with&&"function"===typeof e.toString)}constructor(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];"object"===typeof e?(this.scheme=e.scheme||ui,this.authority=e.authority||ui,this.path=e.path||ui,this.query=e.query||ui,this.fragment=e.fragment||ui):(this.scheme=function(e,t){return e||t?e:"file"}(e,r),this.authority=t||ui,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==hi&&(t=hi+t):t=hi}return t}(this.scheme,n||ui),this.query=i||ui,this.fragment=s||ui,function(e,t){if(!e.scheme&&t)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(e.authority,'", path: "').concat(e.path,'", query: "').concat(e.query,'", fragment: "').concat(e.fragment,'"}'));if(e.scheme&&!ai.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!li.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(ci.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}(this,r))}get fsPath(){return vi(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:i,query:s,fragment:r}=e;return void 0===t?t=this.scheme:null===t&&(t=ui),void 0===n?n=this.authority:null===n&&(n=ui),void 0===i?i=this.path:null===i&&(i=ui),void 0===s?s=this.query:null===s&&(s=ui),void 0===r?r=this.fragment:null===r&&(r=ui),t===this.scheme&&n===this.authority&&i===this.path&&s===this.query&&r===this.fragment?this:new pi(t,n,i,s,r)}static parse(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=di.exec(e);return n?new pi(n[2]||ui,ki(n[4]||ui),ki(n[5]||ui),ki(n[7]||ui),ki(n[9]||ui),t):new pi(ui,ui,ui,ui,ui)}static file(e){let t=ui;if(be&&(e=e.replace(/\\/g,hi)),e[0]===hi&&e[1]===hi){const n=e.indexOf(hi,2);-1===n?(t=e.substring(2),e=hi):(t=e.substring(2,n),e=e.substring(n)||hi)}return new pi("file",t,e,ui,ui)}static from(e,t){return new pi(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let t;for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return t=be&&"file"===e.scheme?fi.file(Xn.join(vi(e,!0),...i)).path:Jn.join(e.path,...i),e.with({path:t})}toString(){return yi(this,arguments.length>0&&void 0!==arguments[0]&&arguments[0])}toJSON(){return this}static revive(e){var t,n;if(e){if(e instanceof fi)return e;{const i=new pi(e);return i._formatted=null!==(t=e.external)&&void 0!==t?t:null,i._fsPath=e._sep===gi&&null!==(n=e.fsPath)&&void 0!==n?n:null,i}}return e}}const gi=be?1:void 0;class pi extends fi{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=vi(this,!1)),this._fsPath}toString(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?yi(this,!0):(this._formatted||(this._formatted=yi(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=gi),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const mi={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function bi(e,t,n){let i,s=-1;for(let r=0;r<e.length;r++){const o=e.charCodeAt(r);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||45===o||46===o||95===o||126===o||t&&47===o||n&&91===o||n&&93===o||n&&58===o)-1!==s&&(i+=encodeURIComponent(e.substring(s,r)),s=-1),void 0!==i&&(i+=e.charAt(r));else{void 0===i&&(i=e.substr(0,r));const t=mi[o];void 0!==t?(-1!==s&&(i+=encodeURIComponent(e.substring(s,r)),s=-1),i+=t):-1===s&&(s=r)}}return-1!==s&&(i+=encodeURIComponent(e.substring(s))),void 0!==i?i:e}function _i(e){let t;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);35===i||63===i?(void 0===t&&(t=e.substr(0,n)),t+=mi[i]):void 0!==t&&(t+=e[n])}return void 0!==t?t:e}function vi(e,t){let n;return n=e.authority&&e.path.length>1&&"file"===e.scheme?"//".concat(e.authority).concat(e.path):47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,be&&(n=n.replace(/\//g,"\\")),n}function yi(e,t){const n=t?_i:bi;let i="",{scheme:s,authority:r,path:o,query:a,fragment:l}=e;if(s&&(i+=s,i+=":"),(r||"file"===s)&&(i+=hi,i+=hi),r){let e=r.indexOf("@");if(-1!==e){const t=r.substr(0,e);r=r.substr(e+1),e=t.lastIndexOf(":"),-1===e?i+=n(t,!1,!1):(i+=n(t.substr(0,e),!1,!1),i+=":",i+=n(t.substr(e+1),!1,!0)),i+="@"}r=r.toLowerCase(),e=r.lastIndexOf(":"),-1===e?i+=n(r,!1,!0):(i+=n(r.substr(0,e),!1,!0),i+=r.substr(e))}if(o){if(o.length>=3&&47===o.charCodeAt(0)&&58===o.charCodeAt(2)){const e=o.charCodeAt(1);e>=65&&e<=90&&(o="/".concat(String.fromCharCode(e+32),":").concat(o.substr(3)))}else if(o.length>=2&&58===o.charCodeAt(1)){const e=o.charCodeAt(0);e>=65&&e<=90&&(o="".concat(String.fromCharCode(e+32),":").concat(o.substr(2)))}i+=n(o,!0,!1)}return a&&(i+="?",i+=n(a,!1,!1)),l&&(i+="#",i+=t?l:bi(l,!1,!1)),i}function Si(e){try{return decodeURIComponent(e)}catch(Y){return e.length>3?e.substr(0,3)+Si(e.substr(3)):e}}const wi=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ki(e){return e.match(wi)?e.replace(wi,(e=>Si(e))):e}class Ci{constructor(e,t){this.lineNumber=e,this.column=t}with(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lineNumber,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.column;return e===this.lineNumber&&t===this.column?this:new Ci(e,t)}delta(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.with(this.lineNumber+e,this.column+t)}equals(e){return Ci.equals(this,e)}static equals(e,t){return!e&&!t||!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return Ci.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<t.column}isBeforeOrEqual(e){return Ci.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber||!(t.lineNumber<e.lineNumber)&&e.column<=t.column}static compare(e,t){const n=0|e.lineNumber,i=0|t.lineNumber;if(n===i){return(0|e.column)-(0|t.column)}return n-i}clone(){return new Ci(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new Ci(e.lineNumber,e.column)}static isIPosition(e){return e&&"number"===typeof e.lineNumber&&"number"===typeof e.column}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}}class xi{constructor(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return xi.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return xi.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber)&&(!(t.lineNumber===e.startLineNumber&&t.column<e.startColumn)&&!(t.lineNumber===e.endLineNumber&&t.column>e.endColumn))}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber)&&(!(t.lineNumber===e.startLineNumber&&t.column<=e.startColumn)&&!(t.lineNumber===e.endLineNumber&&t.column>=e.endColumn))}containsRange(e){return xi.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber)&&(!(t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber)&&(!(t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn)&&!(t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)))}strictContainsRange(e){return xi.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber)&&(!(t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber)&&(!(t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn)&&!(t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)))}plusRange(e){return xi.plusRange(this,e)}static plusRange(e,t){let n,i,s,r;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,r=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,r=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,r=e.endColumn),new xi(n,i,s,r)}intersectRanges(e){return xi.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,r=e.endColumn;const o=t.startLineNumber,a=t.startColumn,l=t.endLineNumber,c=t.endColumn;return n<o?(n=o,i=a):n===o&&(i=Math.max(i,a)),s>l?(s=l,r=c):s===l&&(r=Math.min(r,c)),n>s||n===s&&i>r?null:new xi(n,i,s,r)}equalsRange(e){return xi.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t||!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return xi.getEndPosition(this)}static getEndPosition(e){return new Ci(e.endLineNumber,e.endColumn)}getStartPosition(){return xi.getStartPosition(this)}static getStartPosition(e){return new Ci(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new xi(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new xi(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return xi.collapseToStart(this)}static collapseToStart(e){return new xi(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return xi.collapseToEnd(this)}static collapseToEnd(e){return new xi(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new xi(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new xi(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new xi(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&"number"===typeof e.startLineNumber&&"number"===typeof e.startColumn&&"number"===typeof e.endLineNumber&&"number"===typeof e.endColumn}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn)&&!(t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const n=0|e.startLineNumber,i=0|t.startLineNumber;if(n===i){const n=0|e.startColumn,i=0|t.startColumn;if(n===i){const n=0|e.endLineNumber,i=0|t.endLineNumber;if(n===i){return(0|e.endColumn)-(0|t.endColumn)}return n-i}return n-i}return n-i}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}}class Ei extends xi{constructor(e,t,n,i){super(e,t,n,i),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=i}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Ei.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return 0===this.getDirection()?new Ei(this.startLineNumber,this.startColumn,e,t):new Ei(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new Ci(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Ci(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return 0===this.getDirection()?new Ei(e,t,this.endLineNumber,this.endColumn):new Ei(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new Ei(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return 0===t?new Ei(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Ei(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Ei(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&"number"===typeof e.selectionStartLineNumber&&"number"===typeof e.selectionStartColumn&&"number"===typeof e.positionLineNumber&&"number"===typeof e.positionColumn}static createWithDirection(e,t,n,i,s){return 0===s?new Ei(e,t,n,i):new Ei(n,i,e,t)}}const Li=Object.create(null);function Di(e,t){if(L(t)){const n=Li[t];if(void 0===n)throw new Error("".concat(e," references an unknown codicon: ").concat(t));t=n}return Li[e]=t,{id:e}}function Ai(){return Li}const Ti={add:Di("add",6e4),plus:Di("plus",6e4),gistNew:Di("gist-new",6e4),repoCreate:Di("repo-create",6e4),lightbulb:Di("lightbulb",60001),lightBulb:Di("light-bulb",60001),repo:Di("repo",60002),repoDelete:Di("repo-delete",60002),gistFork:Di("gist-fork",60003),repoForked:Di("repo-forked",60003),gitPullRequest:Di("git-pull-request",60004),gitPullRequestAbandoned:Di("git-pull-request-abandoned",60004),recordKeys:Di("record-keys",60005),keyboard:Di("keyboard",60005),tag:Di("tag",60006),tagAdd:Di("tag-add",60006),tagRemove:Di("tag-remove",60006),gitPullRequestLabel:Di("git-pull-request-label",60006),person:Di("person",60007),personFollow:Di("person-follow",60007),personOutline:Di("person-outline",60007),personFilled:Di("person-filled",60007),gitBranch:Di("git-branch",60008),gitBranchCreate:Di("git-branch-create",60008),gitBranchDelete:Di("git-branch-delete",60008),sourceControl:Di("source-control",60008),mirror:Di("mirror",60009),mirrorPublic:Di("mirror-public",60009),star:Di("star",60010),starAdd:Di("star-add",60010),starDelete:Di("star-delete",60010),starEmpty:Di("star-empty",60010),comment:Di("comment",60011),commentAdd:Di("comment-add",60011),alert:Di("alert",60012),warning:Di("warning",60012),search:Di("search",60013),searchSave:Di("search-save",60013),logOut:Di("log-out",60014),signOut:Di("sign-out",60014),logIn:Di("log-in",60015),signIn:Di("sign-in",60015),eye:Di("eye",60016),eyeUnwatch:Di("eye-unwatch",60016),eyeWatch:Di("eye-watch",60016),circleFilled:Di("circle-filled",60017),primitiveDot:Di("primitive-dot",60017),closeDirty:Di("close-dirty",60017),debugBreakpoint:Di("debug-breakpoint",60017),debugBreakpointDisabled:Di("debug-breakpoint-disabled",60017),debugBreakpointPending:Di("debug-breakpoint-pending",60377),debugHint:Di("debug-hint",60017),primitiveSquare:Di("primitive-square",60018),edit:Di("edit",60019),pencil:Di("pencil",60019),info:Di("info",60020),issueOpened:Di("issue-opened",60020),gistPrivate:Di("gist-private",60021),gitForkPrivate:Di("git-fork-private",60021),lock:Di("lock",60021),mirrorPrivate:Di("mirror-private",60021),close:Di("close",60022),removeClose:Di("remove-close",60022),x:Di("x",60022),repoSync:Di("repo-sync",60023),sync:Di("sync",60023),clone:Di("clone",60024),desktopDownload:Di("desktop-download",60024),beaker:Di("beaker",60025),microscope:Di("microscope",60025),vm:Di("vm",60026),deviceDesktop:Di("device-desktop",60026),file:Di("file",60027),fileText:Di("file-text",60027),more:Di("more",60028),ellipsis:Di("ellipsis",60028),kebabHorizontal:Di("kebab-horizontal",60028),mailReply:Di("mail-reply",60029),reply:Di("reply",60029),organization:Di("organization",60030),organizationFilled:Di("organization-filled",60030),organizationOutline:Di("organization-outline",60030),newFile:Di("new-file",60031),fileAdd:Di("file-add",60031),newFolder:Di("new-folder",60032),fileDirectoryCreate:Di("file-directory-create",60032),trash:Di("trash",60033),trashcan:Di("trashcan",60033),history:Di("history",60034),clock:Di("clock",60034),folder:Di("folder",60035),fileDirectory:Di("file-directory",60035),symbolFolder:Di("symbol-folder",60035),logoGithub:Di("logo-github",60036),markGithub:Di("mark-github",60036),github:Di("github",60036),terminal:Di("terminal",60037),console:Di("console",60037),repl:Di("repl",60037),zap:Di("zap",60038),symbolEvent:Di("symbol-event",60038),error:Di("error",60039),stop:Di("stop",60039),variable:Di("variable",60040),symbolVariable:Di("symbol-variable",60040),array:Di("array",60042),symbolArray:Di("symbol-array",60042),symbolModule:Di("symbol-module",60043),symbolPackage:Di("symbol-package",60043),symbolNamespace:Di("symbol-namespace",60043),symbolObject:Di("symbol-object",60043),symbolMethod:Di("symbol-method",60044),symbolFunction:Di("symbol-function",60044),symbolConstructor:Di("symbol-constructor",60044),symbolBoolean:Di("symbol-boolean",60047),symbolNull:Di("symbol-null",60047),symbolNumeric:Di("symbol-numeric",60048),symbolNumber:Di("symbol-number",60048),symbolStructure:Di("symbol-structure",60049),symbolStruct:Di("symbol-struct",60049),symbolParameter:Di("symbol-parameter",60050),symbolTypeParameter:Di("symbol-type-parameter",60050),symbolKey:Di("symbol-key",60051),symbolText:Di("symbol-text",60051),symbolReference:Di("symbol-reference",60052),goToFile:Di("go-to-file",60052),symbolEnum:Di("symbol-enum",60053),symbolValue:Di("symbol-value",60053),symbolRuler:Di("symbol-ruler",60054),symbolUnit:Di("symbol-unit",60054),activateBreakpoints:Di("activate-breakpoints",60055),archive:Di("archive",60056),arrowBoth:Di("arrow-both",60057),arrowDown:Di("arrow-down",60058),arrowLeft:Di("arrow-left",60059),arrowRight:Di("arrow-right",60060),arrowSmallDown:Di("arrow-small-down",60061),arrowSmallLeft:Di("arrow-small-left",60062),arrowSmallRight:Di("arrow-small-right",60063),arrowSmallUp:Di("arrow-small-up",60064),arrowUp:Di("arrow-up",60065),bell:Di("bell",60066),bold:Di("bold",60067),book:Di("book",60068),bookmark:Di("bookmark",60069),debugBreakpointConditionalUnverified:Di("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:Di("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:Di("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:Di("debug-breakpoint-data-unverified",60072),debugBreakpointData:Di("debug-breakpoint-data",60073),debugBreakpointDataDisabled:Di("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:Di("debug-breakpoint-log-unverified",60074),debugBreakpointLog:Di("debug-breakpoint-log",60075),debugBreakpointLogDisabled:Di("debug-breakpoint-log-disabled",60075),briefcase:Di("briefcase",60076),broadcast:Di("broadcast",60077),browser:Di("browser",60078),bug:Di("bug",60079),calendar:Di("calendar",60080),caseSensitive:Di("case-sensitive",60081),check:Di("check",60082),checklist:Di("checklist",60083),chevronDown:Di("chevron-down",60084),dropDownButton:Di("drop-down-button",60084),chevronLeft:Di("chevron-left",60085),chevronRight:Di("chevron-right",60086),chevronUp:Di("chevron-up",60087),chromeClose:Di("chrome-close",60088),chromeMaximize:Di("chrome-maximize",60089),chromeMinimize:Di("chrome-minimize",60090),chromeRestore:Di("chrome-restore",60091),circle:Di("circle",60092),circleOutline:Di("circle-outline",60092),debugBreakpointUnverified:Di("debug-breakpoint-unverified",60092),circleSlash:Di("circle-slash",60093),circuitBoard:Di("circuit-board",60094),clearAll:Di("clear-all",60095),clippy:Di("clippy",60096),closeAll:Di("close-all",60097),cloudDownload:Di("cloud-download",60098),cloudUpload:Di("cloud-upload",60099),code:Di("code",60100),collapseAll:Di("collapse-all",60101),colorMode:Di("color-mode",60102),commentDiscussion:Di("comment-discussion",60103),compareChanges:Di("compare-changes",60157),creditCard:Di("credit-card",60105),dash:Di("dash",60108),dashboard:Di("dashboard",60109),database:Di("database",60110),debugContinue:Di("debug-continue",60111),debugDisconnect:Di("debug-disconnect",60112),debugPause:Di("debug-pause",60113),debugRestart:Di("debug-restart",60114),debugStart:Di("debug-start",60115),debugStepInto:Di("debug-step-into",60116),debugStepOut:Di("debug-step-out",60117),debugStepOver:Di("debug-step-over",60118),debugStop:Di("debug-stop",60119),debug:Di("debug",60120),deviceCameraVideo:Di("device-camera-video",60121),deviceCamera:Di("device-camera",60122),deviceMobile:Di("device-mobile",60123),diffAdded:Di("diff-added",60124),diffIgnored:Di("diff-ignored",60125),diffModified:Di("diff-modified",60126),diffRemoved:Di("diff-removed",60127),diffRenamed:Di("diff-renamed",60128),diff:Di("diff",60129),discard:Di("discard",60130),editorLayout:Di("editor-layout",60131),emptyWindow:Di("empty-window",60132),exclude:Di("exclude",60133),extensions:Di("extensions",60134),eyeClosed:Di("eye-closed",60135),fileBinary:Di("file-binary",60136),fileCode:Di("file-code",60137),fileMedia:Di("file-media",60138),filePdf:Di("file-pdf",60139),fileSubmodule:Di("file-submodule",60140),fileSymlinkDirectory:Di("file-symlink-directory",60141),fileSymlinkFile:Di("file-symlink-file",60142),fileZip:Di("file-zip",60143),files:Di("files",60144),filter:Di("filter",60145),flame:Di("flame",60146),foldDown:Di("fold-down",60147),foldUp:Di("fold-up",60148),fold:Di("fold",60149),folderActive:Di("folder-active",60150),folderOpened:Di("folder-opened",60151),gear:Di("gear",60152),gift:Di("gift",60153),gistSecret:Di("gist-secret",60154),gist:Di("gist",60155),gitCommit:Di("git-commit",60156),gitCompare:Di("git-compare",60157),gitMerge:Di("git-merge",60158),githubAction:Di("github-action",60159),githubAlt:Di("github-alt",60160),globe:Di("globe",60161),grabber:Di("grabber",60162),graph:Di("graph",60163),gripper:Di("gripper",60164),heart:Di("heart",60165),home:Di("home",60166),horizontalRule:Di("horizontal-rule",60167),hubot:Di("hubot",60168),inbox:Di("inbox",60169),issueClosed:Di("issue-closed",60324),issueReopened:Di("issue-reopened",60171),issues:Di("issues",60172),italic:Di("italic",60173),jersey:Di("jersey",60174),json:Di("json",60175),bracket:Di("bracket",60175),kebabVertical:Di("kebab-vertical",60176),key:Di("key",60177),law:Di("law",60178),lightbulbAutofix:Di("lightbulb-autofix",60179),linkExternal:Di("link-external",60180),link:Di("link",60181),listOrdered:Di("list-ordered",60182),listUnordered:Di("list-unordered",60183),liveShare:Di("live-share",60184),loading:Di("loading",60185),location:Di("location",60186),mailRead:Di("mail-read",60187),mail:Di("mail",60188),markdown:Di("markdown",60189),megaphone:Di("megaphone",60190),mention:Di("mention",60191),milestone:Di("milestone",60192),gitPullRequestMilestone:Di("git-pull-request-milestone",60192),mortarBoard:Di("mortar-board",60193),move:Di("move",60194),multipleWindows:Di("multiple-windows",60195),mute:Di("mute",60196),noNewline:Di("no-newline",60197),note:Di("note",60198),octoface:Di("octoface",60199),openPreview:Di("open-preview",60200),package:Di("package",60201),paintcan:Di("paintcan",60202),pin:Di("pin",60203),play:Di("play",60204),run:Di("run",60204),plug:Di("plug",60205),preserveCase:Di("preserve-case",60206),preview:Di("preview",60207),project:Di("project",60208),pulse:Di("pulse",60209),question:Di("question",60210),quote:Di("quote",60211),radioTower:Di("radio-tower",60212),reactions:Di("reactions",60213),references:Di("references",60214),refresh:Di("refresh",60215),regex:Di("regex",60216),remoteExplorer:Di("remote-explorer",60217),remote:Di("remote",60218),remove:Di("remove",60219),replaceAll:Di("replace-all",60220),replace:Di("replace",60221),repoClone:Di("repo-clone",60222),repoForcePush:Di("repo-force-push",60223),repoPull:Di("repo-pull",60224),repoPush:Di("repo-push",60225),report:Di("report",60226),requestChanges:Di("request-changes",60227),rocket:Di("rocket",60228),rootFolderOpened:Di("root-folder-opened",60229),rootFolder:Di("root-folder",60230),rss:Di("rss",60231),ruby:Di("ruby",60232),saveAll:Di("save-all",60233),saveAs:Di("save-as",60234),save:Di("save",60235),screenFull:Di("screen-full",60236),screenNormal:Di("screen-normal",60237),searchStop:Di("search-stop",60238),server:Di("server",60240),settingsGear:Di("settings-gear",60241),settings:Di("settings",60242),shield:Di("shield",60243),smiley:Di("smiley",60244),sortPrecedence:Di("sort-precedence",60245),splitHorizontal:Di("split-horizontal",60246),splitVertical:Di("split-vertical",60247),squirrel:Di("squirrel",60248),starFull:Di("star-full",60249),starHalf:Di("star-half",60250),symbolClass:Di("symbol-class",60251),symbolColor:Di("symbol-color",60252),symbolCustomColor:Di("symbol-customcolor",60252),symbolConstant:Di("symbol-constant",60253),symbolEnumMember:Di("symbol-enum-member",60254),symbolField:Di("symbol-field",60255),symbolFile:Di("symbol-file",60256),symbolInterface:Di("symbol-interface",60257),symbolKeyword:Di("symbol-keyword",60258),symbolMisc:Di("symbol-misc",60259),symbolOperator:Di("symbol-operator",60260),symbolProperty:Di("symbol-property",60261),wrench:Di("wrench",60261),wrenchSubaction:Di("wrench-subaction",60261),symbolSnippet:Di("symbol-snippet",60262),tasklist:Di("tasklist",60263),telescope:Di("telescope",60264),textSize:Di("text-size",60265),threeBars:Di("three-bars",60266),thumbsdown:Di("thumbsdown",60267),thumbsup:Di("thumbsup",60268),tools:Di("tools",60269),triangleDown:Di("triangle-down",60270),triangleLeft:Di("triangle-left",60271),triangleRight:Di("triangle-right",60272),triangleUp:Di("triangle-up",60273),twitter:Di("twitter",60274),unfold:Di("unfold",60275),unlock:Di("unlock",60276),unmute:Di("unmute",60277),unverified:Di("unverified",60278),verified:Di("verified",60279),versions:Di("versions",60280),vmActive:Di("vm-active",60281),vmOutline:Di("vm-outline",60282),vmRunning:Di("vm-running",60283),watch:Di("watch",60284),whitespace:Di("whitespace",60285),wholeWord:Di("whole-word",60286),window:Di("window",60287),wordWrap:Di("word-wrap",60288),zoomIn:Di("zoom-in",60289),zoomOut:Di("zoom-out",60290),listFilter:Di("list-filter",60291),listFlat:Di("list-flat",60292),listSelection:Di("list-selection",60293),selection:Di("selection",60293),listTree:Di("list-tree",60294),debugBreakpointFunctionUnverified:Di("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:Di("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:Di("debug-breakpoint-function-disabled",60296),debugStackframeActive:Di("debug-stackframe-active",60297),circleSmallFilled:Di("circle-small-filled",60298),debugStackframeDot:Di("debug-stackframe-dot",60298),debugStackframe:Di("debug-stackframe",60299),debugStackframeFocused:Di("debug-stackframe-focused",60299),debugBreakpointUnsupported:Di("debug-breakpoint-unsupported",60300),symbolString:Di("symbol-string",60301),debugReverseContinue:Di("debug-reverse-continue",60302),debugStepBack:Di("debug-step-back",60303),debugRestartFrame:Di("debug-restart-frame",60304),callIncoming:Di("call-incoming",60306),callOutgoing:Di("call-outgoing",60307),menu:Di("menu",60308),expandAll:Di("expand-all",60309),feedback:Di("feedback",60310),gitPullRequestReviewer:Di("git-pull-request-reviewer",60310),groupByRefType:Di("group-by-ref-type",60311),ungroupByRefType:Di("ungroup-by-ref-type",60312),account:Di("account",60313),gitPullRequestAssignee:Di("git-pull-request-assignee",60313),bellDot:Di("bell-dot",60314),debugConsole:Di("debug-console",60315),library:Di("library",60316),output:Di("output",60317),runAll:Di("run-all",60318),syncIgnored:Di("sync-ignored",60319),pinned:Di("pinned",60320),githubInverted:Di("github-inverted",60321),debugAlt:Di("debug-alt",60305),serverProcess:Di("server-process",60322),serverEnvironment:Di("server-environment",60323),pass:Di("pass",60324),stopCircle:Di("stop-circle",60325),playCircle:Di("play-circle",60326),record:Di("record",60327),debugAltSmall:Di("debug-alt-small",60328),vmConnect:Di("vm-connect",60329),cloud:Di("cloud",60330),merge:Di("merge",60331),exportIcon:Di("export",60332),graphLeft:Di("graph-left",60333),magnet:Di("magnet",60334),notebook:Di("notebook",60335),redo:Di("redo",60336),checkAll:Di("check-all",60337),pinnedDirty:Di("pinned-dirty",60338),passFilled:Di("pass-filled",60339),circleLargeFilled:Di("circle-large-filled",60340),circleLarge:Di("circle-large",60341),circleLargeOutline:Di("circle-large-outline",60341),combine:Di("combine",60342),gather:Di("gather",60342),table:Di("table",60343),variableGroup:Di("variable-group",60344),typeHierarchy:Di("type-hierarchy",60345),typeHierarchySub:Di("type-hierarchy-sub",60346),typeHierarchySuper:Di("type-hierarchy-super",60347),gitPullRequestCreate:Di("git-pull-request-create",60348),runAbove:Di("run-above",60349),runBelow:Di("run-below",60350),notebookTemplate:Di("notebook-template",60351),debugRerun:Di("debug-rerun",60352),workspaceTrusted:Di("workspace-trusted",60353),workspaceUntrusted:Di("workspace-untrusted",60354),workspaceUnspecified:Di("workspace-unspecified",60355),terminalCmd:Di("terminal-cmd",60356),terminalDebian:Di("terminal-debian",60357),terminalLinux:Di("terminal-linux",60358),terminalPowershell:Di("terminal-powershell",60359),terminalTmux:Di("terminal-tmux",60360),terminalUbuntu:Di("terminal-ubuntu",60361),terminalBash:Di("terminal-bash",60362),arrowSwap:Di("arrow-swap",60363),copy:Di("copy",60364),personAdd:Di("person-add",60365),filterFilled:Di("filter-filled",60366),wand:Di("wand",60367),debugLineByLine:Di("debug-line-by-line",60368),inspect:Di("inspect",60369),layers:Di("layers",60370),layersDot:Di("layers-dot",60371),layersActive:Di("layers-active",60372),compass:Di("compass",60373),compassDot:Di("compass-dot",60374),compassActive:Di("compass-active",60375),azure:Di("azure",60376),issueDraft:Di("issue-draft",60377),gitPullRequestClosed:Di("git-pull-request-closed",60378),gitPullRequestDraft:Di("git-pull-request-draft",60379),debugAll:Di("debug-all",60380),debugCoverage:Di("debug-coverage",60381),runErrors:Di("run-errors",60382),folderLibrary:Di("folder-library",60383),debugContinueSmall:Di("debug-continue-small",60384),beakerStop:Di("beaker-stop",60385),graphLine:Di("graph-line",60386),graphScatter:Di("graph-scatter",60387),pieChart:Di("pie-chart",60388),bracketDot:Di("bracket-dot",60389),bracketError:Di("bracket-error",60390),lockSmall:Di("lock-small",60391),azureDevops:Di("azure-devops",60392),verifiedFilled:Di("verified-filled",60393),newLine:Di("newline",60394),layout:Di("layout",60395),layoutActivitybarLeft:Di("layout-activitybar-left",60396),layoutActivitybarRight:Di("layout-activitybar-right",60397),layoutPanelLeft:Di("layout-panel-left",60398),layoutPanelCenter:Di("layout-panel-center",60399),layoutPanelJustify:Di("layout-panel-justify",60400),layoutPanelRight:Di("layout-panel-right",60401),layoutPanel:Di("layout-panel",60402),layoutSidebarLeft:Di("layout-sidebar-left",60403),layoutSidebarRight:Di("layout-sidebar-right",60404),layoutStatusbar:Di("layout-statusbar",60405),layoutMenubar:Di("layout-menubar",60406),layoutCentered:Di("layout-centered",60407),layoutSidebarRightOff:Di("layout-sidebar-right-off",60416),layoutPanelOff:Di("layout-panel-off",60417),layoutSidebarLeftOff:Di("layout-sidebar-left-off",60418),target:Di("target",60408),indent:Di("indent",60409),recordSmall:Di("record-small",60410),errorSmall:Di("error-small",60411),arrowCircleDown:Di("arrow-circle-down",60412),arrowCircleLeft:Di("arrow-circle-left",60413),arrowCircleRight:Di("arrow-circle-right",60414),arrowCircleUp:Di("arrow-circle-up",60415),heartFilled:Di("heart-filled",60420),map:Di("map",60421),mapFilled:Di("map-filled",60422),circleSmall:Di("circle-small",60423),bellSlash:Di("bell-slash",60424),bellSlashDot:Di("bell-slash-dot",60425),commentUnresolved:Di("comment-unresolved",60426),gitPullRequestGoToChanges:Di("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:Di("git-pull-request-new-changes",60428),searchFuzzy:Di("search-fuzzy",60429),commentDraft:Di("comment-draft",60430),send:Di("send",60431),sparkle:Di("sparkle",60432),insert:Di("insert",60433),mic:Di("mic",60434),thumbsDownFilled:Di("thumbsdown-filled",60435),thumbsUpFilled:Di("thumbsup-filled",60436),coffee:Di("coffee",60437),snake:Di("snake",60438),game:Di("game",60439),vr:Di("vr",60440),chip:Di("chip",60441),piano:Di("piano",60442),music:Di("music",60443),micFilled:Di("mic-filled",60444),gitFetch:Di("git-fetch",60445),copilot:Di("copilot",60446),lightbulbSparkle:Di("lightbulb-sparkle",60447),lightbulbSparkleAutofix:Di("lightbulb-sparkle-autofix",60447),robot:Di("robot",60448),sparkleFilled:Di("sparkle-filled",60449),diffSingle:Di("diff-single",60450),diffMultiple:Di("diff-multiple",60451),surroundWith:Di("surround-with",60452),gitStash:Di("git-stash",60454),gitStashApply:Di("git-stash-apply",60455),gitStashPop:Di("git-stash-pop",60456),dialogError:Di("dialog-error","error"),dialogWarning:Di("dialog-warning","warning"),dialogInfo:Di("dialog-info","info"),dialogClose:Di("dialog-close","close"),treeItemExpanded:Di("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:Di("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:Di("tree-filter-on-type-off","list-selection"),treeFilterClear:Di("tree-filter-clear","close"),treeItemLoading:Di("tree-item-loading","loading"),menuSelection:Di("menu-selection","check"),menuSubmenu:Di("menu-submenu","chevron-right"),menuBarMore:Di("menubar-more","more"),scrollbarButtonLeft:Di("scrollbar-button-left","triangle-left"),scrollbarButtonRight:Di("scrollbar-button-right","triangle-right"),scrollbarButtonUp:Di("scrollbar-button-up","triangle-up"),scrollbarButtonDown:Di("scrollbar-button-down","triangle-down"),toolBarMore:Di("toolbar-more","more"),quickInputBack:Di("quick-input-back","arrow-left")};class Ni extends Zt{get isResolved(){return this._isResolved}constructor(e,t,n){super(),this._registry=e,this._languageId=t,this._factory=n,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}class Ii{constructor(e,t,n){this.offset=e,this.type=t,this.language=n,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}}class $i{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class Mi{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var Ri,Oi,Pi,Fi;!function(e){const t=new Map;t.set(0,Ti.symbolMethod),t.set(1,Ti.symbolFunction),t.set(2,Ti.symbolConstructor),t.set(3,Ti.symbolField),t.set(4,Ti.symbolVariable),t.set(5,Ti.symbolClass),t.set(6,Ti.symbolStruct),t.set(7,Ti.symbolInterface),t.set(8,Ti.symbolModule),t.set(9,Ti.symbolProperty),t.set(10,Ti.symbolEvent),t.set(11,Ti.symbolOperator),t.set(12,Ti.symbolUnit),t.set(13,Ti.symbolValue),t.set(15,Ti.symbolEnum),t.set(14,Ti.symbolConstant),t.set(15,Ti.symbolEnum),t.set(16,Ti.symbolEnumMember),t.set(17,Ti.symbolKeyword),t.set(27,Ti.symbolSnippet),t.set(18,Ti.symbolText),t.set(19,Ti.symbolColor),t.set(20,Ti.symbolFile),t.set(21,Ti.symbolReference),t.set(22,Ti.symbolCustomColor),t.set(23,Ti.symbolFolder),t.set(24,Ti.symbolTypeParameter),t.set(25,Ti.account),t.set(26,Ti.issues),e.toIcon=function(e){let n=t.get(e);return n||(console.info("No codicon found for CompletionItemKind "+e),n=Ti.symbolProperty),n};const n=new Map;n.set("method",0),n.set("function",1),n.set("constructor",2),n.set("field",3),n.set("variable",4),n.set("class",5),n.set("struct",6),n.set("interface",7),n.set("module",8),n.set("property",9),n.set("event",10),n.set("operator",11),n.set("unit",12),n.set("value",13),n.set("constant",14),n.set("enum",15),n.set("enum-member",16),n.set("enumMember",16),n.set("keyword",17),n.set("snippet",27),n.set("text",18),n.set("color",19),n.set("file",20),n.set("reference",21),n.set("customcolor",22),n.set("folder",23),n.set("type-parameter",24),n.set("typeParameter",24),n.set("account",25),n.set("issue",26),e.fromString=function(e,t){let i=n.get(e);return"undefined"!==typeof i||t||(i=9),i}}(Ri||(Ri={})),function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"}(Oi||(Oi={}));class Bi{constructor(e,t,n,i){this.range=e,this.text=t,this.completionKind=n,this.isSnippetText=i}equals(e){return xi.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}!function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(Pi||(Pi={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(Fi||(Fi={}));G("Array","array"),G("Boolean","boolean"),G("Class","class"),G("Constant","constant"),G("Constructor","constructor"),G("Enum","enumeration"),G("EnumMember","enumeration member"),G("Event","event"),G("Field","field"),G("File","file"),G("Function","function"),G("Interface","interface"),G("Key","key"),G("Method","method"),G("Module","module"),G("Namespace","namespace"),G("Null","null"),G("Number","number"),G("Object","object"),G("Operator","operator"),G("Package","package"),G("Property","property"),G("String","string"),G("Struct","struct"),G("TypeParameter","type parameter"),G("Variable","variable");var zi,Wi,Hi;!function(e){const t=new Map;t.set(0,Ti.symbolFile),t.set(1,Ti.symbolModule),t.set(2,Ti.symbolNamespace),t.set(3,Ti.symbolPackage),t.set(4,Ti.symbolClass),t.set(5,Ti.symbolMethod),t.set(6,Ti.symbolProperty),t.set(7,Ti.symbolField),t.set(8,Ti.symbolConstructor),t.set(9,Ti.symbolEnum),t.set(10,Ti.symbolInterface),t.set(11,Ti.symbolFunction),t.set(12,Ti.symbolVariable),t.set(13,Ti.symbolConstant),t.set(14,Ti.symbolString),t.set(15,Ti.symbolNumber),t.set(16,Ti.symbolBoolean),t.set(17,Ti.symbolArray),t.set(18,Ti.symbolObject),t.set(19,Ti.symbolKey),t.set(20,Ti.symbolNull),t.set(21,Ti.symbolEnumMember),t.set(22,Ti.symbolStruct),t.set(23,Ti.symbolEvent),t.set(24,Ti.symbolOperator),t.set(25,Ti.symbolTypeParameter),e.toIcon=function(e){let n=t.get(e);return n||(console.info("No codicon found for SymbolKind "+e),n=Ti.symbolProperty),n}}(zi||(zi={}));class Vi{static fromValue(e){switch(e){case"comment":return Vi.Comment;case"imports":return Vi.Imports;case"region":return Vi.Region}return new Vi(e)}constructor(e){this.value=e}}Vi.Comment=new Vi("comment"),Vi.Imports=new Vi("imports"),Vi.Region=new Vi("region"),function(e){e.is=function(e){return!(!e||"object"!==typeof e)&&("string"===typeof e.id&&"string"===typeof e.title)}}(Wi||(Wi={})),function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(Hi||(Hi={}));class ji{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then((e=>{e&&e.dispose()}))}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const Ui=new class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new un,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),Qt((()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))}))}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var n;null===(n=this._factories.get(e))||void 0===n||n.dispose();const i=new Ni(this,e,t);return this._factories.set(e,i),Qt((()=>{const t=this._factories.get(e);t&&t===i&&(this._factories.delete(e),t.dispose())}))}async getOrCreate(e){const t=this.get(e);if(t)return t;const n=this._factories.get(e);return!n||n.isResolved?null:(await n.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const t=this._factories.get(e);return!(t&&!t.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};var qi,Ki,Gi,Yi,Qi,Xi,Zi,Ji,es,ts,ns,is,ss,rs,os,as,ls,cs,us,hs,ds,fs,gs,ps,ms,bs,_s,vs,ys,Ss,ws,ks,Cs,xs,Es,Ls,Ds,As,Ts,Ns;!function(e){e[e.Unknown=0]="Unknown",e[e.Disabled=1]="Disabled",e[e.Enabled=2]="Enabled"}(qi||(qi={})),function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"}(Ki||(Ki={})),function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"}(Gi||(Gi={})),function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Snippet=27]="Snippet"}(Yi||(Yi={})),function(e){e[e.Deprecated=1]="Deprecated"}(Qi||(Qi={})),function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"}(Xi||(Xi={})),function(e){e[e.EXACT=0]="EXACT",e[e.ABOVE=1]="ABOVE",e[e.BELOW=2]="BELOW"}(Zi||(Zi={})),function(e){e[e.NotSet=0]="NotSet",e[e.ContentFlush=1]="ContentFlush",e[e.RecoverFromMarkers=2]="RecoverFromMarkers",e[e.Explicit=3]="Explicit",e[e.Paste=4]="Paste",e[e.Undo=5]="Undo",e[e.Redo=6]="Redo"}(Ji||(Ji={})),function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(es||(es={})),function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"}(ts||(ts={})),function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"}(ns||(ns={})),function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.ariaLabel=4]="ariaLabel",e[e.ariaRequired=5]="ariaRequired",e[e.autoClosingBrackets=6]="autoClosingBrackets",e[e.autoClosingComments=7]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=9]="autoClosingDelete",e[e.autoClosingOvertype=10]="autoClosingOvertype",e[e.autoClosingQuotes=11]="autoClosingQuotes",e[e.autoIndent=12]="autoIndent",e[e.automaticLayout=13]="automaticLayout",e[e.autoSurround=14]="autoSurround",e[e.bracketPairColorization=15]="bracketPairColorization",e[e.guides=16]="guides",e[e.codeLens=17]="codeLens",e[e.codeLensFontFamily=18]="codeLensFontFamily",e[e.codeLensFontSize=19]="codeLensFontSize",e[e.colorDecorators=20]="colorDecorators",e[e.colorDecoratorsLimit=21]="colorDecoratorsLimit",e[e.columnSelection=22]="columnSelection",e[e.comments=23]="comments",e[e.contextmenu=24]="contextmenu",e[e.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",e[e.cursorBlinking=26]="cursorBlinking",e[e.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",e[e.cursorStyle=28]="cursorStyle",e[e.cursorSurroundingLines=29]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",e[e.cursorWidth=31]="cursorWidth",e[e.disableLayerHinting=32]="disableLayerHinting",e[e.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",e[e.domReadOnly=34]="domReadOnly",e[e.dragAndDrop=35]="dragAndDrop",e[e.dropIntoEditor=36]="dropIntoEditor",e[e.emptySelectionClipboard=37]="emptySelectionClipboard",e[e.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",e[e.extraEditorClassName=39]="extraEditorClassName",e[e.fastScrollSensitivity=40]="fastScrollSensitivity",e[e.find=41]="find",e[e.fixedOverflowWidgets=42]="fixedOverflowWidgets",e[e.folding=43]="folding",e[e.foldingStrategy=44]="foldingStrategy",e[e.foldingHighlight=45]="foldingHighlight",e[e.foldingImportsByDefault=46]="foldingImportsByDefault",e[e.foldingMaximumRegions=47]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=49]="fontFamily",e[e.fontInfo=50]="fontInfo",e[e.fontLigatures=51]="fontLigatures",e[e.fontSize=52]="fontSize",e[e.fontWeight=53]="fontWeight",e[e.fontVariations=54]="fontVariations",e[e.formatOnPaste=55]="formatOnPaste",e[e.formatOnType=56]="formatOnType",e[e.glyphMargin=57]="glyphMargin",e[e.gotoLocation=58]="gotoLocation",e[e.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",e[e.hover=60]="hover",e[e.inDiffEditor=61]="inDiffEditor",e[e.inlineSuggest=62]="inlineSuggest",e[e.letterSpacing=63]="letterSpacing",e[e.lightbulb=64]="lightbulb",e[e.lineDecorationsWidth=65]="lineDecorationsWidth",e[e.lineHeight=66]="lineHeight",e[e.lineNumbers=67]="lineNumbers",e[e.lineNumbersMinChars=68]="lineNumbersMinChars",e[e.linkedEditing=69]="linkedEditing",e[e.links=70]="links",e[e.matchBrackets=71]="matchBrackets",e[e.minimap=72]="minimap",e[e.mouseStyle=73]="mouseStyle",e[e.mouseWheelScrollSensitivity=74]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=75]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=76]="multiCursorMergeOverlapping",e[e.multiCursorModifier=77]="multiCursorModifier",e[e.multiCursorPaste=78]="multiCursorPaste",e[e.multiCursorLimit=79]="multiCursorLimit",e[e.occurrencesHighlight=80]="occurrencesHighlight",e[e.overviewRulerBorder=81]="overviewRulerBorder",e[e.overviewRulerLanes=82]="overviewRulerLanes",e[e.padding=83]="padding",e[e.pasteAs=84]="pasteAs",e[e.parameterHints=85]="parameterHints",e[e.peekWidgetDefaultFocus=86]="peekWidgetDefaultFocus",e[e.definitionLinkOpensInPeek=87]="definitionLinkOpensInPeek",e[e.quickSuggestions=88]="quickSuggestions",e[e.quickSuggestionsDelay=89]="quickSuggestionsDelay",e[e.readOnly=90]="readOnly",e[e.readOnlyMessage=91]="readOnlyMessage",e[e.renameOnType=92]="renameOnType",e[e.renderControlCharacters=93]="renderControlCharacters",e[e.renderFinalNewline=94]="renderFinalNewline",e[e.renderLineHighlight=95]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=96]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=97]="renderValidationDecorations",e[e.renderWhitespace=98]="renderWhitespace",e[e.revealHorizontalRightPadding=99]="revealHorizontalRightPadding",e[e.roundedSelection=100]="roundedSelection",e[e.rulers=101]="rulers",e[e.scrollbar=102]="scrollbar",e[e.scrollBeyondLastColumn=103]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=104]="scrollBeyondLastLine",e[e.scrollPredominantAxis=105]="scrollPredominantAxis",e[e.selectionClipboard=106]="selectionClipboard",e[e.selectionHighlight=107]="selectionHighlight",e[e.selectOnLineNumbers=108]="selectOnLineNumbers",e[e.showFoldingControls=109]="showFoldingControls",e[e.showUnused=110]="showUnused",e[e.snippetSuggestions=111]="snippetSuggestions",e[e.smartSelect=112]="smartSelect",e[e.smoothScrolling=113]="smoothScrolling",e[e.stickyScroll=114]="stickyScroll",e[e.stickyTabStops=115]="stickyTabStops",e[e.stopRenderingLineAfter=116]="stopRenderingLineAfter",e[e.suggest=117]="suggest",e[e.suggestFontSize=118]="suggestFontSize",e[e.suggestLineHeight=119]="suggestLineHeight",e[e.suggestOnTriggerCharacters=120]="suggestOnTriggerCharacters",e[e.suggestSelection=121]="suggestSelection",e[e.tabCompletion=122]="tabCompletion",e[e.tabIndex=123]="tabIndex",e[e.unicodeHighlighting=124]="unicodeHighlighting",e[e.unusualLineTerminators=125]="unusualLineTerminators",e[e.useShadowDOM=126]="useShadowDOM",e[e.useTabStops=127]="useTabStops",e[e.wordBreak=128]="wordBreak",e[e.wordSeparators=129]="wordSeparators",e[e.wordWrap=130]="wordWrap",e[e.wordWrapBreakAfterCharacters=131]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=132]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=133]="wordWrapColumn",e[e.wordWrapOverride1=134]="wordWrapOverride1",e[e.wordWrapOverride2=135]="wordWrapOverride2",e[e.wrappingIndent=136]="wrappingIndent",e[e.wrappingStrategy=137]="wrappingStrategy",e[e.showDeprecated=138]="showDeprecated",e[e.inlayHints=139]="inlayHints",e[e.editorClassName=140]="editorClassName",e[e.pixelRatio=141]="pixelRatio",e[e.tabFocusMode=142]="tabFocusMode",e[e.layoutInfo=143]="layoutInfo",e[e.wrappingInfo=144]="wrappingInfo",e[e.defaultColorDecorators=145]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=146]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=147]="inlineCompletionsAccessibilityVerbose"}(is||(is={})),function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"}(ss||(ss={})),function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"}(rs||(rs={})),function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"}(os||(os={})),function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"}(as||(as={})),function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"}(ls||(ls={})),function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"}(cs||(cs={})),function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"}(us||(us={})),function(e){e[e.DependsOnKbLayout=-1]="DependsOnKbLayout",e[e.Unknown=0]="Unknown",e[e.Backspace=1]="Backspace",e[e.Tab=2]="Tab",e[e.Enter=3]="Enter",e[e.Shift=4]="Shift",e[e.Ctrl=5]="Ctrl",e[e.Alt=6]="Alt",e[e.PauseBreak=7]="PauseBreak",e[e.CapsLock=8]="CapsLock",e[e.Escape=9]="Escape",e[e.Space=10]="Space",e[e.PageUp=11]="PageUp",e[e.PageDown=12]="PageDown",e[e.End=13]="End",e[e.Home=14]="Home",e[e.LeftArrow=15]="LeftArrow",e[e.UpArrow=16]="UpArrow",e[e.RightArrow=17]="RightArrow",e[e.DownArrow=18]="DownArrow",e[e.Insert=19]="Insert",e[e.Delete=20]="Delete",e[e.Digit0=21]="Digit0",e[e.Digit1=22]="Digit1",e[e.Digit2=23]="Digit2",e[e.Digit3=24]="Digit3",e[e.Digit4=25]="Digit4",e[e.Digit5=26]="Digit5",e[e.Digit6=27]="Digit6",e[e.Digit7=28]="Digit7",e[e.Digit8=29]="Digit8",e[e.Digit9=30]="Digit9",e[e.KeyA=31]="KeyA",e[e.KeyB=32]="KeyB",e[e.KeyC=33]="KeyC",e[e.KeyD=34]="KeyD",e[e.KeyE=35]="KeyE",e[e.KeyF=36]="KeyF",e[e.KeyG=37]="KeyG",e[e.KeyH=38]="KeyH",e[e.KeyI=39]="KeyI",e[e.KeyJ=40]="KeyJ",e[e.KeyK=41]="KeyK",e[e.KeyL=42]="KeyL",e[e.KeyM=43]="KeyM",e[e.KeyN=44]="KeyN",e[e.KeyO=45]="KeyO",e[e.KeyP=46]="KeyP",e[e.KeyQ=47]="KeyQ",e[e.KeyR=48]="KeyR",e[e.KeyS=49]="KeyS",e[e.KeyT=50]="KeyT",e[e.KeyU=51]="KeyU",e[e.KeyV=52]="KeyV",e[e.KeyW=53]="KeyW",e[e.KeyX=54]="KeyX",e[e.KeyY=55]="KeyY",e[e.KeyZ=56]="KeyZ",e[e.Meta=57]="Meta",e[e.ContextMenu=58]="ContextMenu",e[e.F1=59]="F1",e[e.F2=60]="F2",e[e.F3=61]="F3",e[e.F4=62]="F4",e[e.F5=63]="F5",e[e.F6=64]="F6",e[e.F7=65]="F7",e[e.F8=66]="F8",e[e.F9=67]="F9",e[e.F10=68]="F10",e[e.F11=69]="F11",e[e.F12=70]="F12",e[e.F13=71]="F13",e[e.F14=72]="F14",e[e.F15=73]="F15",e[e.F16=74]="F16",e[e.F17=75]="F17",e[e.F18=76]="F18",e[e.F19=77]="F19",e[e.F20=78]="F20",e[e.F21=79]="F21",e[e.F22=80]="F22",e[e.F23=81]="F23",e[e.F24=82]="F24",e[e.NumLock=83]="NumLock",e[e.ScrollLock=84]="ScrollLock",e[e.Semicolon=85]="Semicolon",e[e.Equal=86]="Equal",e[e.Comma=87]="Comma",e[e.Minus=88]="Minus",e[e.Period=89]="Period",e[e.Slash=90]="Slash",e[e.Backquote=91]="Backquote",e[e.BracketLeft=92]="BracketLeft",e[e.Backslash=93]="Backslash",e[e.BracketRight=94]="BracketRight",e[e.Quote=95]="Quote",e[e.OEM_8=96]="OEM_8",e[e.IntlBackslash=97]="IntlBackslash",e[e.Numpad0=98]="Numpad0",e[e.Numpad1=99]="Numpad1",e[e.Numpad2=100]="Numpad2",e[e.Numpad3=101]="Numpad3",e[e.Numpad4=102]="Numpad4",e[e.Numpad5=103]="Numpad5",e[e.Numpad6=104]="Numpad6",e[e.Numpad7=105]="Numpad7",e[e.Numpad8=106]="Numpad8",e[e.Numpad9=107]="Numpad9",e[e.NumpadMultiply=108]="NumpadMultiply",e[e.NumpadAdd=109]="NumpadAdd",e[e.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",e[e.NumpadSubtract=111]="NumpadSubtract",e[e.NumpadDecimal=112]="NumpadDecimal",e[e.NumpadDivide=113]="NumpadDivide",e[e.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",e[e.ABNT_C1=115]="ABNT_C1",e[e.ABNT_C2=116]="ABNT_C2",e[e.AudioVolumeMute=117]="AudioVolumeMute",e[e.AudioVolumeUp=118]="AudioVolumeUp",e[e.AudioVolumeDown=119]="AudioVolumeDown",e[e.BrowserSearch=120]="BrowserSearch",e[e.BrowserHome=121]="BrowserHome",e[e.BrowserBack=122]="BrowserBack",e[e.BrowserForward=123]="BrowserForward",e[e.MediaTrackNext=124]="MediaTrackNext",e[e.MediaTrackPrevious=125]="MediaTrackPrevious",e[e.MediaStop=126]="MediaStop",e[e.MediaPlayPause=127]="MediaPlayPause",e[e.LaunchMediaPlayer=128]="LaunchMediaPlayer",e[e.LaunchMail=129]="LaunchMail",e[e.LaunchApp2=130]="LaunchApp2",e[e.Clear=131]="Clear",e[e.MAX_VALUE=132]="MAX_VALUE"}(hs||(hs={})),function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"}(ds||(ds={})),function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"}(fs||(fs={})),function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"}(gs||(gs={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXTAREA=1]="TEXTAREA",e[e.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",e[e.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",e[e.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",e[e.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",e[e.CONTENT_TEXT=6]="CONTENT_TEXT",e[e.CONTENT_EMPTY=7]="CONTENT_EMPTY",e[e.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",e[e.CONTENT_WIDGET=9]="CONTENT_WIDGET",e[e.OVERVIEW_RULER=10]="OVERVIEW_RULER",e[e.SCROLLBAR=11]="SCROLLBAR",e[e.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",e[e.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"}(ps||(ps={})),function(e){e[e.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",e[e.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",e[e.TOP_CENTER=2]="TOP_CENTER"}(ms||(ms={})),function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"}(bs||(bs={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"}(_s||(_s={})),function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"}(vs||(vs={})),function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"}(ys||(ys={})),function(e){e[e.Smooth=0]="Smooth",e[e.Immediate=1]="Immediate"}(Ss||(Ss={})),function(e){e[e.Auto=1]="Auto",e[e.Hidden=2]="Hidden",e[e.Visible=3]="Visible"}(ws||(ws={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(ks||(ks={})),function(e){e.Off="off",e.OnCode="onCode",e.On="on"}(Cs||(Cs={})),function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"}(xs||(xs={})),function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"}(Es||(Es={})),function(e){e[e.Deprecated=1]="Deprecated"}(Ls||(Ls={})),function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"}(Ds||(Ds={})),function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"}(As||(As={})),function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"}(Ts||(Ts={})),function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"}(Ns||(Ns={}));class Is{static chord(e,t){return function(e,t){return(e|(65535&t)<<16>>>0)>>>0}(e,t)}}function $s(){return{editor:void 0,languages:void 0,CancellationTokenSource:Sn,Emitter:un,KeyCode:hs,KeyMod:Is,Position:Ci,Range:xi,Selection:Ei,SelectionDirection:ks,MarkerSeverity:ds,MarkerTag:fs,Uri:fi,Token:Ii}}Is.CtrlCmd=2048,Is.Shift=1024,Is.Alt=512,Is.WinCtrl=256;const Ms=window,Rs=Ms;class Os{get cachedValues(){return this._map}constructor(e){this.fn=e,this._map=new Map}get(e){if(this._map.has(e))return this._map.get(e);const t=this.fn(e);return this._map.set(e,t),t}}class Ps{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}var Fs;const Bs=/{(\d+)}/g;function zs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return 0===n.length?e:e.replace(Bs,(function(e,t){const i=parseInt(t,10);return isNaN(i)||i<0||i>=n.length?e:n[i]}))}function Ws(e){return e.replace(/[<>&]/g,(function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}}))}function Hs(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function Vs(e,t){if(!e||!t)return e;const n=t.length;if(0===n||0===e.length)return e;let i=0;for(;e.indexOf(t,i)===i;)i+=n;return e.substring(i)}function js(e,t){if(!e||!t)return e;const n=t.length,i=e.length;if(0===n||0===i)return e;let s=i,r=-1;for(;r=e.lastIndexOf(t,s-1),-1!==r&&r+n===s;){if(0===r)return"";s=r}return e.substring(0,s)}function Us(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)throw new Error("Cannot create regex from empty string");t||(e=Hs(e)),n.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e+="\\b"));let i="";return n.global&&(i+="g"),n.matchCase||(i+="i"),n.multiline&&(i+="m"),n.unicode&&(i+="u"),new RegExp(e,i)}function qs(e){return e.split(/\r\n|\r|\n/)}function Ks(e){for(let t=0,n=e.length;t<n;t++){const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}return-1}function Gs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;for(let i=t;i<n;i++){const n=e.charCodeAt(i);if(32!==n&&9!==n)return e.substring(t,i)}return e.substring(t,n)}function Ys(e){for(let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length-1;t>=0;t--){const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}return-1}function Qs(e,t){return e<t?-1:e>t?1:0}function Xs(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.length;for(;n<i&&s<r;n++,s++){const i=e.charCodeAt(n),r=t.charCodeAt(s);if(i<r)return-1;if(i>r)return 1}const o=i-n,a=r-s;return o<a?-1:o>a?1:0}function Zs(e,t){return Js(e,t,0,e.length,0,t.length)}function Js(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t.length;for(;n<i&&s<r;n++,s++){let o=e.charCodeAt(n),a=t.charCodeAt(s);if(o===a)continue;if(o>=128||a>=128)return Xs(e.toLowerCase(),t.toLowerCase(),n,i,s,r);tr(o)&&(o-=32),tr(a)&&(a-=32);const l=o-a;if(0!==l)return l}const o=i-n,a=r-s;return o<a?-1:o>a?1:0}function er(e){return e>=48&&e<=57}function tr(e){return e>=97&&e<=122}function nr(e){return e>=65&&e<=90}function ir(e,t){return e.length===t.length&&0===Js(e,t)}function sr(e,t){const n=t.length;return!(t.length>e.length)&&0===Js(e,t,0,n)}function rr(e,t){const n=Math.min(e.length,t.length);let i;for(i=0;i<n;i++)if(e.charCodeAt(i)!==t.charCodeAt(i))return i;return n}function or(e,t){const n=Math.min(e.length,t.length);let i;const s=e.length-1,r=t.length-1;for(i=0;i<n;i++)if(e.charCodeAt(s-i)!==t.charCodeAt(r-i))return i;return n}function ar(e){return 55296<=e&&e<=56319}function lr(e){return 56320<=e&&e<=57343}function cr(e,t){return t-56320+(e-55296<<10)+65536}function ur(e,t,n){const i=e.charCodeAt(n);if(ar(i)&&n+1<t){const t=e.charCodeAt(n+1);if(lr(t))return cr(i,t)}return i}class hr{get offset(){return this._offset}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=function(e,t){const n=e.charCodeAt(t-1);if(lr(n)&&t>1){const i=e.charCodeAt(t-2);if(ar(i))return cr(i,n)}return n}(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=ur(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class dr{get offset(){return this._iterator.offset}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._iterator=new hr(e,t)}nextGraphemeLength(){const e=Lr.getInstance(),t=this._iterator,n=t.offset;let i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const n=t.offset,s=e.getGraphemeBreakType(t.nextCodePoint());if(Er(i,s)){t.setOffset(n);break}i=s}return t.offset-n}prevGraphemeLength(){const e=Lr.getInstance(),t=this._iterator,n=t.offset;let i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const n=t.offset,s=e.getGraphemeBreakType(t.prevCodePoint());if(Er(s,i)){t.setOffset(n);break}i=s}return n-t.offset}eol(){return this._iterator.eol()}}function fr(e,t){return new dr(e,t).nextGraphemeLength()}function gr(e,t){return new dr(e,t).prevGraphemeLength()}let pr;function mr(e){return pr||(pr=/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/),pr.test(e)}const br=/^[\t\n\r\x20-\x7E]*$/;function _r(e){return br.test(e)}const vr=/[\u2028\u2029]/;function yr(e){return vr.test(e)}function Sr(e){return e>=11904&&e<=55215||e>=63744&&e<=64255||e>=65281&&e<=65374}function wr(e){return e>=127462&&e<=127487||8986===e||8987===e||9200===e||9203===e||e>=9728&&e<=10175||11088===e||11093===e||e>=127744&&e<=128591||e>=128640&&e<=128764||e>=128992&&e<=129008||e>=129280&&e<=129535||e>=129648&&e<=129782}const kr=String.fromCharCode(65279);function Cr(e){return!!(e&&e.length>0&&65279===e.charCodeAt(0))}function xr(e){return(e%=52)<26?String.fromCharCode(97+e):String.fromCharCode(65+e-26)}function Er(e,t){return 0===e?5!==t&&7!==t:(2!==e||3!==t)&&(4===e||2===e||3===e||(4===t||2===t||3===t||(8!==e||8!==t&&9!==t&&11!==t&&12!==t)&&((11!==e&&9!==e||9!==t&&10!==t)&&((12!==e&&10!==e||10!==t)&&(5!==t&&13!==t&&(7!==t&&(1!==e&&((13!==e||14!==t)&&(6!==e||6!==t)))))))))}class Lr{static getInstance(){return Lr._INSTANCE||(Lr._INSTANCE=new Lr),Lr._INSTANCE}constructor(){this._data=JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}getGraphemeBreakType(e){if(e<32)return 10===e?3:13===e?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let i=1;for(;i<=n;)if(e<t[3*i])i*=2;else{if(!(e>t[3*i+1]))return t[3*i+2];i=2*i+1}return 0}}function Dr(e,t){if(0===e)return 0;const n=function(e,t){const n=new hr(t,e);let i=n.prevCodePoint();for(;Ar(i)||65039===i||8419===i;){if(0===n.offset)return;i=n.prevCodePoint()}if(!wr(i))return;let s=n.offset;if(s>0){8205===n.prevCodePoint()&&(s=n.offset)}return s}(e,t);if(void 0!==n)return n;const i=new hr(t,e);return i.prevCodePoint(),i.offset}function Ar(e){return 127995<=e&&e<=127999}Lr._INSTANCE=null;class Tr{static getInstance(e){return Fs.cache.get(Array.from(e))}static getLocales(){return Fs._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}Fs=Tr,Tr.ambiguousCharacterData=new Ps((()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))),Tr.cache=new class{constructor(e){this.fn=e,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const t=JSON.stringify(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.fn(e)),this.lastCache}}((e=>{function t(e){const t=new Map;for(let n=0;n<e.length;n+=2)t.set(e[n],e[n+1]);return t}function n(e,t){if(!e)return t;const n=new Map;for(const[i,s]of e)t.has(i)&&n.set(i,s);return n}const i=Fs.ambiguousCharacterData.value;let s,r=e.filter((e=>!e.startsWith("_")&&e in i));0===r.length&&(r=["_default"]);for(const a of r){s=n(s,t(i[a]))}const o=function(e,t){const n=new Map(e);for(const[i,s]of t)n.set(i,s);return n}(t(i._common),s);return new Fs(o)})),Tr._locales=new Ps((()=>Object.keys(Fs.ambiguousCharacterData.value).filter((e=>!e.startsWith("_")))));class Nr{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(Nr.getRawData())),this._data}static isInvisibleCharacter(e){return Nr.getData().has(e)}static get codePoints(){return Nr.getData()}}Nr._data=void 0;class Ir{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(e){var t;return null!==(t=this.mapWindowIdToZoomFactor.get(this.getWindowId(e)))&&void 0!==t?t:1}getWindowId(e){return e.vscodeWindowId}}Ir.INSTANCE=new Ir;class $r extends Zt{constructor(){super(),this._onDidChange=this._register(new un),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(!0),this._mediaQueryList=null,this._handleChange(!1)}_handleChange(e){var t;null===(t=this._mediaQueryList)||void 0===t||t.removeEventListener("change",this._listener),this._mediaQueryList=Rs.matchMedia("(resolution: ".concat(Rs.devicePixelRatio,"dppx)")),this._mediaQueryList.addEventListener("change",this._listener),e&&this._onDidChange.fire()}}class Mr extends Zt{get value(){return this._value}constructor(){super(),this._onDidChange=this._register(new un),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio();const e=this._register(new $r);this._register(e.onDidChange((()=>{this._value=this._getPixelRatio(),this._onDidChange.fire(this._value)})))}_getPixelRatio(){const e=document.createElement("canvas").getContext("2d");return(Rs.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}}function Rr(e,t,n){"string"===typeof t&&(t=e.matchMedia(t)),t.addEventListener("change",n)}const Or=new class{constructor(){this._pixelRatioMonitor=null}_getOrCreatePixelRatioMonitor(){return this._pixelRatioMonitor||(this._pixelRatioMonitor=Kt(new Mr)),this._pixelRatioMonitor}get value(){return this._getOrCreatePixelRatioMonitor().value}get onDidChange(){return this._getOrCreatePixelRatioMonitor().onDidChange}};const Pr=navigator.userAgent,Fr=Pr.indexOf("Firefox")>=0,Br=Pr.indexOf("AppleWebKit")>=0,zr=Pr.indexOf("Chrome")>=0,Wr=!zr&&Pr.indexOf("Safari")>=0,Hr=!zr&&!Wr&&Br,Vr=(Pr.indexOf("Electron/"),Pr.indexOf("Android")>=0);let jr=!1;if("function"===typeof Ms.matchMedia){const e=Ms.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),t=Ms.matchMedia("(display-mode: fullscreen)");jr=e.matches,Rr(Ms,e,(e=>{let{matches:n}=e;jr&&t.matches||(jr=n)}))}class Ur{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=qr(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=qr(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=qr(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=qr(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=qr(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=qr(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=qr(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=qr(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=qr(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=qr(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=qr(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function qr(e){return"number"===typeof e?"".concat(e,"px"):e}function Kr(e){return new Ur(e)}function Gr(e,t){e instanceof Ur?(e.setFontFamily(t.getMassagedFontFamily()),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setFontVariationSettings(t.fontVariationSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)):(e.style.fontFamily=t.getMassagedFontFamily(),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.fontVariationSettings=t.fontVariationSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px")}class Yr{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class Qr{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),Rs.document.body.appendChild(this._container),this._readFromDomElements(),Rs.document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");Gr(t,this._bareFontInfo),e.appendChild(t);const n=document.createElement("div");Gr(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);const i=document.createElement("div");Gr(i,this._bareFontInfo),i.style.fontStyle="italic",e.appendChild(i);const s=[];for(const r of this._requests){let e;0===r.type&&(e=t),2===r.type&&(e=n),1===r.type&&(e=i),e.appendChild(document.createElement("br"));const o=document.createElement("span");Qr._render(o,r),e.appendChild(o),s.push(o)}this._container=e,this._testElements=s}static _render(e,t){if(" "===t.chr){let t="\xa0";for(let e=0;e<8;e++)t+=t;e.innerText=t}else{let n=t.chr;for(let e=0;e<8;e++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const t=this._requests[e],n=this._testElements[e];t.fulfill(n.offsetWidth/256)}}}const Xr=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new un,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(e){e=Math.min(Math.max(-5,e),20),this._zoomLevel!==e&&(this._zoomLevel=e,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},Zr=_e?1.5:1.35;class Jr{static createFromValidatedSettings(e,t,n){const i=e.get(49),s=e.get(53),r=e.get(52),o=e.get(51),a=e.get(54),l=e.get(66),c=e.get(63);return Jr._create(i,s,r,o,a,l,c,t,n)}static _create(e,t,n,i,s,r,o,a,l){0===r?r=Zr*n:r<8&&(r*=n),(r=Math.round(r))<8&&(r=8);const c=1+(l?0:.1*Xr.getZoomLevel());if(n*=c,r*=c,s===dt.TRANSLATE)if("normal"===t||"bold"===t)s=dt.OFF;else{const e=parseInt(t,10);s="'wght' ".concat(e),t="normal"}return new Jr({pixelRatio:a,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:i,fontVariationSettings:s,lineHeight:r,letterSpacing:o})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=0|e.lineHeight,this.letterSpacing=e.letterSpacing}getId(){return"".concat(this.pixelRatio,"-").concat(this.fontFamily,"-").concat(this.fontWeight,"-").concat(this.fontSize,"-").concat(this.fontFeatureSettings,"-").concat(this.fontVariationSettings,"-").concat(this.lineHeight,"-").concat(this.letterSpacing)}getMassagedFontFamily(){const e=Et.fontFamily,t=Jr._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?"".concat(t,", ").concat(e):t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?'"'.concat(e,'"'):e}}class eo extends Jr{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=2,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class to{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map((e=>this._values[e]))}}const no=new class extends Zt{constructor(){super(),this._onDidChange=this._register(new un),this.onDidChange=this._onDidChange.event,this._cache=new to,this._evictUntrustedReadingsTimeout=-1}dispose(){-1!==this._evictUntrustedReadingsTimeout&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new to,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),t.isTrusted||-1!==this._evictUntrustedReadingsTimeout||(this._evictUntrustedReadingsTimeout=Ms.setTimeout((()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()}),5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const n of e)n.isTrusted||(t=!0,this._cache.remove(n));t&&this._onDidChange.fire()}readFontInfo(e){if(!this._cache.has(e)){let t=this._actualReadFontInfo(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new eo({pixelRatio:Or.value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}_createRequest(e,t,n,i){const s=new Yr(e,t);return n.push(s),null===i||void 0===i||i.push(s),s}_actualReadFontInfo(e){const t=[],n=[],i=this._createRequest("n",0,t,n),s=this._createRequest("\uff4d",0,t,null),r=this._createRequest(" ",0,t,n),o=this._createRequest("0",0,t,n),a=this._createRequest("1",0,t,n),l=this._createRequest("2",0,t,n),c=this._createRequest("3",0,t,n),u=this._createRequest("4",0,t,n),h=this._createRequest("5",0,t,n),d=this._createRequest("6",0,t,n),f=this._createRequest("7",0,t,n),g=this._createRequest("8",0,t,n),p=this._createRequest("9",0,t,n),m=this._createRequest("\u2192",0,t,n),b=this._createRequest("\uffeb",0,t,null),_=this._createRequest("\xb7",0,t,n),v=this._createRequest(String.fromCharCode(11825),0,t,null),y="|/-_ilm%";for(let x=0,E=8;x<E;x++)this._createRequest(y.charAt(x),0,t,n),this._createRequest(y.charAt(x),1,t,n),this._createRequest(y.charAt(x),2,t,n);!function(e,t){new Qr(e,t).read()}(e,t);const S=Math.max(o.width,a.width,l.width,c.width,u.width,h.width,d.width,f.width,g.width,p.width);let w=e.fontFeatureSettings===ht.OFF;const k=n[0].width;for(let x=1,E=n.length;w&&x<E;x++){const e=k-n[x].width;if(e<-.001||e>.001){w=!1;break}}let C=!0;return w&&b.width!==k&&(C=!1),b.width>m.width&&(C=!1),new eo({pixelRatio:Or.value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,fontVariationSettings:e.fontVariationSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:w,typicalHalfwidthCharacterWidth:i.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:C,spaceWidth:r.width,middotWidth:_.width,wsmiddotWidth:v.width,maxDigitWidth:S},!0)}};var io;!function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies",e.getServiceDependencies=function(t){return t[e.DI_DEPENDENCIES]||[]}}(io||(io={}));const so=ro("instantiationService");function ro(e){if(io.serviceIds.has(e))return io.serviceIds.get(e);const t=function(e,n,i){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");!function(e,t,n){t[io.DI_TARGET]===t?t[io.DI_DEPENDENCIES].push({id:e,index:n}):(t[io.DI_DEPENDENCIES]=[{id:e,index:n}],t[io.DI_TARGET]=t)}(t,e,i)};return t.toString=()=>e,io.serviceIds.set(e,t),t}const oo=ro("codeEditorService"),ao=ro("modelService"),lo=ro("textModelService");class co extends Zt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4?arguments[4]:void 0;super(),this._onDidChange=this._register(new un),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=i,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class uo extends Zt{constructor(){super(...arguments),this._onWillRun=this._register(new un),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new un),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;let n;this._onWillRun.fire({action:e});try{await this.runAction(e,t)}catch(zY){n=zY}this._onDidRun.fire({action:e,error:n})}async runAction(e,t){await e.run(t)}}class ho{constructor(){this.id=ho.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(){let e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const s of n)s.length&&(e=e.length?[...e,new ho,...s]:s);return e}async run(){}}ho.ID="vs.actions.separator";class fo{get actions(){return this._actions}constructor(e,t,n,i){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=i,this._actions=n}async run(){}}class go extends co{constructor(){super(go.ID,G("submenu.empty","(empty)"),void 0,!1)}}function po(e){var t,n;return{id:e.id,label:e.label,class:e.class,enabled:null===(t=e.enabled)||void 0===t||t,checked:null!==(n=e.checked)&&void 0!==n&&n,run:async function(){return e.run(...arguments)},tooltip:e.label}}var mo,bo;go.ID="vs.actions.empty",function(e){e.isThemeColor=function(e){return e&&"object"===typeof e&&"string"===typeof e.id}}(mo||(mo={})),function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp("^(".concat(e.iconNameExpression,")(").concat(e.iconModifierExpression,")?$"));function n(e){const i=t.exec(e.id);if(!i)return n(Ti.error);const[,s,r]=i,o=["codicon","codicon-"+s];return r&&o.push("codicon-modifier-"+r.substring(1)),o}e.asClassNameArray=n,e.asClassName=function(e){return n(e).join(" ")},e.asCSSSelector=function(e){return"."+n(e).join(".")},e.isThemeIcon=function(e){return e&&"object"===typeof e&&"string"===typeof e.id&&("undefined"===typeof e.color||mo.isThemeColor(e.color))};const i=new RegExp("^\\$\\((".concat(e.iconNameExpression,"(?:").concat(e.iconModifierExpression,")?)\\)$"));e.fromString=function(e){const t=i.exec(e);if(!t)return;const[,n]=t;return{id:n}},e.fromId=function(e){return{id:e}},e.modify=function(e,t){let n=e.id;const i=n.lastIndexOf("~");return-1!==i&&(n=n.substring(0,i)),t&&(n="".concat(n,"~").concat(t)),{id:n}},e.getModifier=function(e){const t=e.id.lastIndexOf("~");if(-1!==t)return e.id.substring(t+1)},e.isEqual=function(e,t){var n,i;return e.id===t.id&&(null===(n=e.color)||void 0===n?void 0:n.id)===(null===(i=t.color)||void 0===i?void 0:i.id)}}(bo||(bo={}));const _o=ro("commandService"),vo=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new un,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(e,t){if(!e)throw new Error("invalid command");if("string"===typeof e){if(!t)throw new Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.metadata&&Array.isArray(e.metadata.args)){const t=[];for(const i of e.metadata.args)t.push(i.constraint);const n=e.handler;e.handler=function(e){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return function(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++)B(e[i],t[i])}(s,t),n(e,...s)}}const{id:n}=e;let i=this._commands.get(n);i||(i=new Be,this._commands.set(n,i));const s=i.unshift(e),r=Qt((()=>{s();const e=this._commands.get(n);(null===e||void 0===e?void 0:e.isEmpty())&&this._commands.delete(n)}));return this._onDidRegisterCommand.fire(n),r}registerCommandAlias(e,t){return vo.registerCommand(e,(function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return e.get(_o).executeCommand(t,...i)}))}getCommand(e){const t=this._commands.get(e);if(t&&!t.isEmpty())return Pe.first(t)}getCommands(){const e=new Map;for(const t of this._commands.keys()){const n=this.getCommand(t);n&&e.set(t,n)}return e}};function yo(){switch(arguments.length){case 1:return G("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",arguments.length<=0?void 0:arguments[0]);case 2:return G("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]);case 3:return G("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]);default:return}}vo.registerCommand("noop",(()=>{}));const So=G("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),wo=G("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");class ko{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:case 8:return">=";case 9:return"=~";case 10:case 17:case 18:case 19:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 20:return"EOF";default:throw Ft("unhandled token type: ".concat(JSON.stringify(e),"; have you forgotten to add a case?"))}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();){this._start=this._current;switch(this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const e=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:e})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const e=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:e})}else this._match(126)?this._addToken(9):this._error(yo("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(yo("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(yo("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return!this._isAtEnd()&&(this._input.charCodeAt(this._current)===e&&(this._current++,!0))}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,n=this._input.substring(this._start,this._current),i={type:19,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(i)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),n=ko._keywords.get(t);n?this._addToken(n):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;39!==this._peek()&&!this._isAtEnd();)this._advance();this._isAtEnd()?this._error(So):(this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1}))}_regex(){let e=this._current,t=!1,n=!1;for(;;){if(e>=this._input.length)return this._current=e,void this._error(wo);const i=this._input.charCodeAt(e);if(t)t=!1;else{if(47===i&&!n){e++;break}91===i?n=!0:92===i?t=!0:93===i&&(n=!1)}e++}for(;e<this._input.length&&ko._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const i=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:i,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}}ko._regexFlags=new Set(["i","g","s","m","y","u"].map((e=>e.charCodeAt(0)))),ko._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);const Co=new Map;Co.set("false",!1),Co.set("true",!0),Co.set("isMac",_e),Co.set("isLinux",ve),Co.set("isWindows",be),Co.set("isWeb",Se),Co.set("isMacNative",_e&&!Se),Co.set("isEdge",Me),Co.set("isFirefox",Ie),Co.set("isChrome",Ne),Co.set("isSafari",$e);const xo=Object.prototype.hasOwnProperty,Eo={regexParsingWithErrorRecovery:!0},Lo=G("contextkey.parser.error.emptyString","Empty context key expression"),Do=G("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),Ao=G("contextkey.parser.error.noInAfterNot","'in' after 'not'."),To=G("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),No=G("contextkey.parser.error.unexpectedToken","Unexpected token"),Io=G("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),$o=G("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),Mo=G("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");class Ro{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Eo;this._config=e,this._scanner=new ko,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(""!==e){this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const e=this._expr();if(!this._isAtEnd()){const e=this._peek(),t=17===e.type?Io:void 0;throw this._parsingErrors.push({message:No,offset:e.offset,lexeme:ko.getLexeme(e),additionalInfo:t}),Ro._parseError}return e}catch(zY){if(zY!==Ro._parseError)throw zY;return}}else this._parsingErrors.push({message:Lo,offset:0,lexeme:"",additionalInfo:Do})}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return 1===e.length?e[0]:Oo.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return 1===e.length?e[0]:Oo.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),Fo.INSTANCE;case 12:return this._advance(),Bo.INSTANCE;case 0:{this._advance();const e=this._expr();return this._consume(1,To),null===e||void 0===e?void 0:e.negate()}case 17:return this._advance(),Uo.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),Oo.true();case 12:return this._advance(),Oo.false();case 0:{this._advance();const e=this._expr();return this._consume(1,To),e}case 17:{const i=e.lexeme;if(this._advance(),this._matchOne(9)){const e=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),10!==e.type)throw this._errExpectedButGot("REGEX",e);const t=e.lexeme,n=t.lastIndexOf("/"),s=n===t.length-1?void 0:this._removeFlagsGY(t.substring(n+1));let r;try{r=new RegExp(t.substring(1,n),s)}catch(zY){throw this._errExpectedButGot("REGEX",e)}return Xo.create(i,r)}switch(e.type){case 10:case 19:{const t=[e.lexeme];this._advance();let n=this._peek(),s=0;for(let i=0;i<e.lexeme.length;i++)40===e.lexeme.charCodeAt(i)?s++:41===e.lexeme.charCodeAt(i)&&s--;for(;!this._isAtEnd()&&15!==n.type&&16!==n.type;){switch(n.type){case 0:s++;break;case 1:s--;break;case 10:case 18:for(let t=0;t<n.lexeme.length;t++)40===n.lexeme.charCodeAt(t)?s++:41===e.lexeme.charCodeAt(t)&&s--}if(s<0)break;t.push(ko.getLexeme(n)),this._advance(),n=this._peek()}const r=t.join(""),o=r.lastIndexOf("/"),a=o===r.length-1?void 0:this._removeFlagsGY(r.substring(o+1));let l;try{l=new RegExp(r.substring(1,o),a)}catch(zY){throw this._errExpectedButGot("REGEX",e)}return Oo.regex(i,l)}case 18:{const s=e.lexeme;this._advance();let r=null;if((t=s)&&"string"===typeof t&&0!==t.trim().length){const t=s.indexOf("/"),i=s.lastIndexOf("/");if(t!==i&&t>=0){const o=s.slice(t+1,i),a="i"===s[i+1]?"i":"";try{r=new RegExp(o,a)}catch(n){throw this._errExpectedButGot("REGEX",e)}}}if(null===r)throw this._errExpectedButGot("REGEX",e);return Xo.create(i,r)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,Ao);const e=this._value();return Oo.notIn(i,e)}switch(this._peek().type){case 3:{this._advance();const e=this._value();if(18===this._previous().type)return Oo.equals(i,e);switch(e){case"true":return Oo.has(i);case"false":return Oo.not(i);default:return Oo.equals(i,e)}}case 4:{this._advance();const e=this._value();if(18===this._previous().type)return Oo.notEquals(i,e);switch(e){case"true":return Oo.not(i);case"false":return Oo.has(i);default:return Oo.notEquals(i,e)}}case 5:return this._advance(),Yo.create(i,this._value());case 6:return this._advance(),Qo.create(i,this._value());case 7:return this._advance(),Ko.create(i,this._value());case 8:return this._advance(),Go.create(i,this._value());case 13:return this._advance(),Oo.in(i,this._value());default:return Oo.has(i)}}case 20:throw this._parsingErrors.push({message:$o,offset:e.offset,lexeme:"",additionalInfo:Mo}),Ro._parseError;default:throw this._errExpectedButGot("true | false | KEY \n\t| KEY '=~' REGEX \n\t| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value",this._peek())}var t}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return!!this._check(e)&&(this._advance(),!0)}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,n){const i=G("contextkey.parser.error.expectedButGot","Expected: {0}\nReceived: '{1}'.",e,ko.getLexeme(t)),s=t.offset,r=ko.getLexeme(t);return this._parsingErrors.push({message:i,offset:s,lexeme:r,additionalInfo:n}),Ro._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return 20===this._peek().type}}Ro._parseError=new Error;class Oo{static false(){return Fo.INSTANCE}static true(){return Bo.INSTANCE}static has(e){return zo.create(e)}static equals(e,t){return Wo.create(e,t)}static notEquals(e,t){return jo.create(e,t)}static regex(e,t){return Xo.create(e,t)}static in(e,t){return Ho.create(e,t)}static notIn(e,t){return Vo.create(e,t)}static not(e){return Uo.create(e)}static and(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ea.create(t,null,!0)}static or(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ta.create(t,null,!0)}static deserialize(e){if(void 0===e||null===e)return;return this._parser.parse(e)}}function Po(e,t){return e.cmp(t)}Oo._parser=new Ro({regexParsingWithErrorRecovery:!1});class Fo{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Bo.INSTANCE}}Fo.INSTANCE=new Fo;class Bo{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Fo.INSTANCE}}Bo.INSTANCE=new Bo;class zo{static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Co.get(e);return"boolean"===typeof n?n?Bo.INSTANCE:Fo.INSTANCE:new zo(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:sa(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){const e=Co.get(this.key);return"boolean"===typeof e?e?Bo.INSTANCE:Fo.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=Uo.create(this.key,this)),this.negated}}class Wo{static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("boolean"===typeof t)return t?zo.create(e,n):Uo.create(e,n);const i=Co.get(e);if("boolean"===typeof i){return t===(i?"true":"false")?Bo.INSTANCE:Fo.INSTANCE}return new Wo(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:ra(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){const e=Co.get(this.key);if("boolean"===typeof e){const t=e?"true":"false";return this.value===t?Bo.INSTANCE:Fo.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return"".concat(this.key," == '").concat(this.value,"'")}keys(){return[this.key]}negate(){return this.negated||(this.negated=jo.create(this.key,this.value,this)),this.negated}}class Ho{static create(e,t){return new Ho(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:ra(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type&&(this.key===e.key&&this.valueKey===e.valueKey)}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):"string"===typeof n&&"object"===typeof t&&null!==t&&xo.call(t,n)}serialize(){return"".concat(this.key," in '").concat(this.valueKey,"'")}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=Vo.create(this.key,this.valueKey)),this.negated}}class Vo{static create(e,t){return new Vo(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=Ho.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type&&this._negated.equals(e._negated)}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return"".concat(this.key," not in '").concat(this.valueKey,"'")}keys(){return this._negated.keys()}negate(){return this._negated}}class jo{static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("boolean"===typeof t)return t?Uo.create(e,n):zo.create(e,n);const i=Co.get(e);if("boolean"===typeof i){return t===(i?"true":"false")?Fo.INSTANCE:Bo.INSTANCE}return new jo(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:ra(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){const e=Co.get(this.key);if("boolean"===typeof e){const t=e?"true":"false";return this.value===t?Fo.INSTANCE:Bo.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return"".concat(this.key," != '").concat(this.value,"'")}keys(){return[this.key]}negate(){return this.negated||(this.negated=Wo.create(this.key,this.value,this)),this.negated}}class Uo{static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=Co.get(e);return"boolean"===typeof n?n?Fo.INSTANCE:Bo.INSTANCE:new Uo(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:sa(this.key,e.key)}equals(e){return e.type===this.type&&this.key===e.key}substituteConstants(){const e=Co.get(this.key);return"boolean"===typeof e?e?Fo.INSTANCE:Bo.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return"!".concat(this.key)}keys(){return[this.key]}negate(){return this.negated||(this.negated=zo.create(this.key,this)),this.negated}}function qo(e,t){if("string"===typeof e){const t=parseFloat(e);isNaN(t)||(e=t)}return"string"===typeof e||"number"===typeof e?t(e):Fo.INSTANCE}class Ko{static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return qo(t,(t=>new Ko(e,t,n)))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:ra(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!==typeof this.value&&parseFloat(e.getValue(this.key))>this.value}serialize(){return"".concat(this.key," > ").concat(this.value)}keys(){return[this.key]}negate(){return this.negated||(this.negated=Qo.create(this.key,this.value,this)),this.negated}}class Go{static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return qo(t,(t=>new Go(e,t,n)))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:ra(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!==typeof this.value&&parseFloat(e.getValue(this.key))>=this.value}serialize(){return"".concat(this.key," >= ").concat(this.value)}keys(){return[this.key]}negate(){return this.negated||(this.negated=Yo.create(this.key,this.value,this)),this.negated}}class Yo{static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return qo(t,(t=>new Yo(e,t,n)))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:ra(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!==typeof this.value&&parseFloat(e.getValue(this.key))<this.value}serialize(){return"".concat(this.key," < ").concat(this.value)}keys(){return[this.key]}negate(){return this.negated||(this.negated=Go.create(this.key,this.value,this)),this.negated}}class Qo{static create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return qo(t,(t=>new Qo(e,t,n)))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:ra(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type&&(this.key===e.key&&this.value===e.value)}substituteConstants(){return this}evaluate(e){return"string"!==typeof this.value&&parseFloat(e.getValue(this.key))<=this.value}serialize(){return"".concat(this.key," <= ").concat(this.value)}keys(){return[this.key]}negate(){return this.negated||(this.negated=Ko.create(this.key,this.value,this)),this.negated}}class Xo{static create(e,t){return new Xo(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return!!this.regexp&&this.regexp.test(t)}serialize(){const e=this.regexp?"/".concat(this.regexp.source,"/").concat(this.regexp.flags):"/invalid/";return"".concat(this.key," =~ ").concat(e)}keys(){return[this.key]}negate(){return this.negated||(this.negated=Zo.create(this)),this.negated}}class Zo{static create(e){return new Zo(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type&&this._actual.equals(e._actual)}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return"!(".concat(this._actual.serialize(),")")}keys(){return this._actual.keys()}negate(){return this._actual}}function Jo(e){let t=null;for(let n=0,i=e.length;n<i;n++){const i=e[n].substituteConstants();if(e[n]!==i&&null===t){t=[];for(let i=0;i<n;i++)t[i]=e[i]}null!==t&&(t[n]=i)}return null===t?e:t}class ea{static create(e,t,n){return ea._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const n=Po(this.expr[t],e.expr[t]);if(0!==n)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Jo(this.expr);return e===this.expr?this:ea.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,n){const i=[];let s=!1;for(const r of e)if(r)if(1!==r.type){if(0===r.type)return Fo.INSTANCE;6!==r.type?i.push(r):i.push(...r.expr)}else s=!0;if(0===i.length&&s)return Bo.INSTANCE;if(0!==i.length){if(1===i.length)return i[0];i.sort(Po);for(let e=1;e<i.length;e++)i[e-1].equals(i[e])&&(i.splice(e,1),e--);if(1===i.length)return i[0];for(;i.length>1;){const e=i[i.length-1];if(9!==e.type)break;i.pop();const t=i.pop(),s=0===i.length,r=ta.create(e.expr.map((e=>ea.create([e,t],null,n))),null,s);r&&(i.push(r),i.sort(Po))}if(1===i.length)return i[0];if(n){for(let e=0;e<i.length;e++)for(let t=e+1;t<i.length;t++)if(i[e].negate().equals(i[t]))return Fo.INSTANCE;if(1===i.length)return i[0]}return new ea(i,t)}}serialize(){return this.expr.map((e=>e.serialize())).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=ta.create(e,this,!0)}return this.negated}}class ta{static create(e,t,n){return ta._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const n=Po(this.expr[t],e.expr[t]);if(0!==n)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Jo(this.expr);return e===this.expr?this:ta.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let i=[],s=!1;if(e){for(let t=0,n=e.length;t<n;t++){const n=e[t];if(n)if(0!==n.type){if(1===n.type)return Bo.INSTANCE;9!==n.type?i.push(n):i=i.concat(n.expr)}else s=!0}if(0===i.length&&s)return Fo.INSTANCE;i.sort(Po)}if(0!==i.length){if(1===i.length)return i[0];for(let e=1;e<i.length;e++)i[e-1].equals(i[e])&&(i.splice(e,1),e--);if(1===i.length)return i[0];if(n){for(let e=0;e<i.length;e++)for(let t=e+1;t<i.length;t++)if(i[e].negate().equals(i[t]))return Bo.INSTANCE;if(1===i.length)return i[0]}return new ta(i,t)}}serialize(){return this.expr.map((e=>e.serialize())).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),i=[];for(const e of la(t))for(const t of la(n))i.push(ea.create([e,t],null,!1));e.unshift(ta.create(i,null,!1))}this.negated=ta.create(e,this,!0)}return this.negated}}class na extends zo{static all(){return na._info.values()}constructor(e,t,n){super(e,null),this._defaultValue=t,"object"===typeof n?na._info.push({...n,key:e}):!0!==n&&na._info.push({key:e,description:n,type:null!==t&&void 0!==t?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Wo.create(this.key,e)}}na._info=[];const ia=ro("contextKeyService");function sa(e,t){return e<t?-1:e>t?1:0}function ra(e,t,n,i){return e<n?-1:e>n?1:t<i?-1:t>i?1:0}function oa(e,t){if(0===e.type||1===t.type)return!0;if(9===e.type)return 9===t.type&&aa(e.expr,t.expr);if(9===t.type){for(const n of t.expr)if(oa(e,n))return!0;return!1}if(6===e.type){if(6===t.type)return aa(t.expr,e.expr);for(const n of e.expr)if(oa(n,t))return!0;return!1}return e.equals(t)}function aa(e,t){let n=0,i=0;for(;n<e.length&&i<t.length;){const s=e[n].cmp(t[i]);if(s<0)return!1;0===s?(n++,i++):i++}return n===e.length}function la(e){return 9===e.type?e.expr:[e]}function ca(e,t){if("number"===typeof e){if(0===e)return null;const n=(65535&e)>>>0,i=(4294901760&e)>>>16;return new da(0!==i?[ua(n,t),ua(i,t)]:[ua(n,t)])}{const n=[];for(let i=0;i<e.length;i++)n.push(ua(e[i],t));return new da(n)}}function ua(e,t){const n=!!(2048&e),i=!!(256&e);return new ha(2===t?i:n,!!(1024&e),!!(512&e),2===t?n:i,255&e)}class ha{constructor(e,t,n,i,s){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyCode=s}equals(e){return e instanceof ha&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return 0===this.keyCode||5===this.keyCode||57===this.keyCode||6===this.keyCode||4===this.keyCode}isDuplicateModifierCase(){return this.ctrlKey&&5===this.keyCode||this.shiftKey&&4===this.keyCode||this.altKey&&6===this.keyCode||this.metaKey&&57===this.keyCode}}class da{constructor(e){if(0===e.length)throw Pt("chords");this.chords=e}}class fa{constructor(e,t,n,i,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyLabel=s,this.keyAriaLabel=r}}class ga{}function pa(e,t){if(!e)throw new Error(t?"Assertion failed (".concat(t,")"):"Assertion Failed")}function ma(e){throw new Error(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unreachable")}function ba(e){e||Nt(new Wt("Assertion Failed"))}function _a(e){e()||(e(),Nt(new Wt("Assertion Failed")))}function va(e,t){let n=0;for(;n<e.length-1;){if(!t(e[n],e[n+1]))return!1;n++}return!0}const ya=new class{constructor(){this.data=new Map}add(e,t){pa(L(e)),pa(D(t)),pa(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}};class Sa{constructor(){this._coreKeybindings=new Be,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(1===De){if(e&&e.win)return e.win}else if(2===De){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=Sa.bindToCurrentPlatform(e),n=new Xt;if(t&&t.primary){const i=ca(t.primary,De);i&&n.add(this._registerDefaultKeybinding(i,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let i=0,s=t.secondary.length;i<s;i++){const s=ca(t.secondary[i],De);s&&n.add(this._registerDefaultKeybinding(s,e.id,e.args,e.weight,-i-1,e.when))}return n}registerCommandAndKeybindingRule(e){return Yt(this.registerKeybindingRule(e),vo.registerCommand(e))}_registerDefaultKeybinding(e,t,n,i,s,r){const o=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:r,weight1:i,weight2:s,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,Qt((()=>{o(),this._cachedMergedKeybindings=null}))}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(ka)),this._cachedMergedKeybindings.slice(0)}}const wa=new Sa;function ka(e,t){if(e.weight1!==t.weight1)return e.weight1-t.weight1;if(e.command&&t.command){if(e.command<t.command)return-1;if(e.command>t.command)return 1}return e.weight2-t.weight2}ya.add("platform.keybindingsRegistry",wa);var Ca,xa=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},Ea=function(e,t){return function(n,i){t(n,i,e)}};function La(e){return void 0!==e.command}class Da{constructor(e){if(Da._instances.has(e))throw new TypeError("MenuId with identifier '".concat(e,"' already exists. Use MenuId.for(ident) or a unique identifier"));Da._instances.set(e,this),this.id=e}}Da._instances=new Map,Da.CommandPalette=new Da("CommandPalette"),Da.DebugBreakpointsContext=new Da("DebugBreakpointsContext"),Da.DebugCallStackContext=new Da("DebugCallStackContext"),Da.DebugConsoleContext=new Da("DebugConsoleContext"),Da.DebugVariablesContext=new Da("DebugVariablesContext"),Da.DebugHoverContext=new Da("DebugHoverContext"),Da.DebugWatchContext=new Da("DebugWatchContext"),Da.DebugToolBar=new Da("DebugToolBar"),Da.DebugToolBarStop=new Da("DebugToolBarStop"),Da.EditorContext=new Da("EditorContext"),Da.SimpleEditorContext=new Da("SimpleEditorContext"),Da.EditorContent=new Da("EditorContent"),Da.EditorLineNumberContext=new Da("EditorLineNumberContext"),Da.EditorContextCopy=new Da("EditorContextCopy"),Da.EditorContextPeek=new Da("EditorContextPeek"),Da.EditorContextShare=new Da("EditorContextShare"),Da.EditorTitle=new Da("EditorTitle"),Da.EditorTitleRun=new Da("EditorTitleRun"),Da.EditorTitleContext=new Da("EditorTitleContext"),Da.EditorTitleContextShare=new Da("EditorTitleContextShare"),Da.EmptyEditorGroup=new Da("EmptyEditorGroup"),Da.EmptyEditorGroupContext=new Da("EmptyEditorGroupContext"),Da.EditorTabsBarContext=new Da("EditorTabsBarContext"),Da.EditorTabsBarShowTabsSubmenu=new Da("EditorTabsBarShowTabsSubmenu"),Da.EditorTabsBarShowTabsZenModeSubmenu=new Da("EditorTabsBarShowTabsZenModeSubmenu"),Da.EditorActionsPositionSubmenu=new Da("EditorActionsPositionSubmenu"),Da.ExplorerContext=new Da("ExplorerContext"),Da.ExplorerContextShare=new Da("ExplorerContextShare"),Da.ExtensionContext=new Da("ExtensionContext"),Da.GlobalActivity=new Da("GlobalActivity"),Da.CommandCenter=new Da("CommandCenter"),Da.CommandCenterCenter=new Da("CommandCenterCenter"),Da.LayoutControlMenuSubmenu=new Da("LayoutControlMenuSubmenu"),Da.LayoutControlMenu=new Da("LayoutControlMenu"),Da.MenubarMainMenu=new Da("MenubarMainMenu"),Da.MenubarAppearanceMenu=new Da("MenubarAppearanceMenu"),Da.MenubarDebugMenu=new Da("MenubarDebugMenu"),Da.MenubarEditMenu=new Da("MenubarEditMenu"),Da.MenubarCopy=new Da("MenubarCopy"),Da.MenubarFileMenu=new Da("MenubarFileMenu"),Da.MenubarGoMenu=new Da("MenubarGoMenu"),Da.MenubarHelpMenu=new Da("MenubarHelpMenu"),Da.MenubarLayoutMenu=new Da("MenubarLayoutMenu"),Da.MenubarNewBreakpointMenu=new Da("MenubarNewBreakpointMenu"),Da.PanelAlignmentMenu=new Da("PanelAlignmentMenu"),Da.PanelPositionMenu=new Da("PanelPositionMenu"),Da.ActivityBarPositionMenu=new Da("ActivityBarPositionMenu"),Da.MenubarPreferencesMenu=new Da("MenubarPreferencesMenu"),Da.MenubarRecentMenu=new Da("MenubarRecentMenu"),Da.MenubarSelectionMenu=new Da("MenubarSelectionMenu"),Da.MenubarShare=new Da("MenubarShare"),Da.MenubarSwitchEditorMenu=new Da("MenubarSwitchEditorMenu"),Da.MenubarSwitchGroupMenu=new Da("MenubarSwitchGroupMenu"),Da.MenubarTerminalMenu=new Da("MenubarTerminalMenu"),Da.MenubarViewMenu=new Da("MenubarViewMenu"),Da.MenubarHomeMenu=new Da("MenubarHomeMenu"),Da.OpenEditorsContext=new Da("OpenEditorsContext"),Da.OpenEditorsContextShare=new Da("OpenEditorsContextShare"),Da.ProblemsPanelContext=new Da("ProblemsPanelContext"),Da.SCMInputBox=new Da("SCMInputBox"),Da.SCMIncomingChanges=new Da("SCMIncomingChanges"),Da.SCMOutgoingChanges=new Da("SCMOutgoingChanges"),Da.SCMIncomingChangesAllChangesContext=new Da("SCMIncomingChangesAllChangesContext"),Da.SCMIncomingChangesHistoryItemContext=new Da("SCMIncomingChangesHistoryItemContext"),Da.SCMOutgoingChangesAllChangesContext=new Da("SCMOutgoingChangesAllChangesContext"),Da.SCMOutgoingChangesHistoryItemContext=new Da("SCMOutgoingChangesHistoryItemContext"),Da.SCMChangeContext=new Da("SCMChangeContext"),Da.SCMResourceContext=new Da("SCMResourceContext"),Da.SCMResourceContextShare=new Da("SCMResourceContextShare"),Da.SCMResourceFolderContext=new Da("SCMResourceFolderContext"),Da.SCMResourceGroupContext=new Da("SCMResourceGroupContext"),Da.SCMSourceControl=new Da("SCMSourceControl"),Da.SCMSourceControlInline=new Da("SCMSourceControlInline"),Da.SCMTitle=new Da("SCMTitle"),Da.SearchContext=new Da("SearchContext"),Da.SearchActionMenu=new Da("SearchActionContext"),Da.StatusBarWindowIndicatorMenu=new Da("StatusBarWindowIndicatorMenu"),Da.StatusBarRemoteIndicatorMenu=new Da("StatusBarRemoteIndicatorMenu"),Da.StickyScrollContext=new Da("StickyScrollContext"),Da.TestItem=new Da("TestItem"),Da.TestItemGutter=new Da("TestItemGutter"),Da.TestMessageContext=new Da("TestMessageContext"),Da.TestMessageContent=new Da("TestMessageContent"),Da.TestPeekElement=new Da("TestPeekElement"),Da.TestPeekTitle=new Da("TestPeekTitle"),Da.TouchBarContext=new Da("TouchBarContext"),Da.TitleBarContext=new Da("TitleBarContext"),Da.TitleBarTitleContext=new Da("TitleBarTitleContext"),Da.TunnelContext=new Da("TunnelContext"),Da.TunnelPrivacy=new Da("TunnelPrivacy"),Da.TunnelProtocol=new Da("TunnelProtocol"),Da.TunnelPortInline=new Da("TunnelInline"),Da.TunnelTitle=new Da("TunnelTitle"),Da.TunnelLocalAddressInline=new Da("TunnelLocalAddressInline"),Da.TunnelOriginInline=new Da("TunnelOriginInline"),Da.ViewItemContext=new Da("ViewItemContext"),Da.ViewContainerTitle=new Da("ViewContainerTitle"),Da.ViewContainerTitleContext=new Da("ViewContainerTitleContext"),Da.ViewTitle=new Da("ViewTitle"),Da.ViewTitleContext=new Da("ViewTitleContext"),Da.CommentEditorActions=new Da("CommentEditorActions"),Da.CommentThreadTitle=new Da("CommentThreadTitle"),Da.CommentThreadActions=new Da("CommentThreadActions"),Da.CommentThreadAdditionalActions=new Da("CommentThreadAdditionalActions"),Da.CommentThreadTitleContext=new Da("CommentThreadTitleContext"),Da.CommentThreadCommentContext=new Da("CommentThreadCommentContext"),Da.CommentTitle=new Da("CommentTitle"),Da.CommentActions=new Da("CommentActions"),Da.InteractiveToolbar=new Da("InteractiveToolbar"),Da.InteractiveCellTitle=new Da("InteractiveCellTitle"),Da.InteractiveCellDelete=new Da("InteractiveCellDelete"),Da.InteractiveCellExecute=new Da("InteractiveCellExecute"),Da.InteractiveInputExecute=new Da("InteractiveInputExecute"),Da.NotebookToolbar=new Da("NotebookToolbar"),Da.NotebookStickyScrollContext=new Da("NotebookStickyScrollContext"),Da.NotebookCellTitle=new Da("NotebookCellTitle"),Da.NotebookCellDelete=new Da("NotebookCellDelete"),Da.NotebookCellInsert=new Da("NotebookCellInsert"),Da.NotebookCellBetween=new Da("NotebookCellBetween"),Da.NotebookCellListTop=new Da("NotebookCellTop"),Da.NotebookCellExecute=new Da("NotebookCellExecute"),Da.NotebookCellExecutePrimary=new Da("NotebookCellExecutePrimary"),Da.NotebookDiffCellInputTitle=new Da("NotebookDiffCellInputTitle"),Da.NotebookDiffCellMetadataTitle=new Da("NotebookDiffCellMetadataTitle"),Da.NotebookDiffCellOutputsTitle=new Da("NotebookDiffCellOutputsTitle"),Da.NotebookOutputToolbar=new Da("NotebookOutputToolbar"),Da.NotebookEditorLayoutConfigure=new Da("NotebookEditorLayoutConfigure"),Da.NotebookKernelSource=new Da("NotebookKernelSource"),Da.BulkEditTitle=new Da("BulkEditTitle"),Da.BulkEditContext=new Da("BulkEditContext"),Da.TimelineItemContext=new Da("TimelineItemContext"),Da.TimelineTitle=new Da("TimelineTitle"),Da.TimelineTitleContext=new Da("TimelineTitleContext"),Da.TimelineFilterSubMenu=new Da("TimelineFilterSubMenu"),Da.AccountsContext=new Da("AccountsContext"),Da.SidebarTitle=new Da("SidebarTitle"),Da.PanelTitle=new Da("PanelTitle"),Da.AuxiliaryBarTitle=new Da("AuxiliaryBarTitle"),Da.TerminalInstanceContext=new Da("TerminalInstanceContext"),Da.TerminalEditorInstanceContext=new Da("TerminalEditorInstanceContext"),Da.TerminalNewDropdownContext=new Da("TerminalNewDropdownContext"),Da.TerminalTabContext=new Da("TerminalTabContext"),Da.TerminalTabEmptyAreaContext=new Da("TerminalTabEmptyAreaContext"),Da.TerminalStickyScrollContext=new Da("TerminalStickyScrollContext"),Da.WebviewContext=new Da("WebviewContext"),Da.InlineCompletionsActions=new Da("InlineCompletionsActions"),Da.NewFile=new Da("NewFile"),Da.MergeInput1Toolbar=new Da("MergeToolbar1Toolbar"),Da.MergeInput2Toolbar=new Da("MergeToolbar2Toolbar"),Da.MergeBaseToolbar=new Da("MergeBaseToolbar"),Da.MergeInputResultToolbar=new Da("MergeToolbarResultToolbar"),Da.InlineSuggestionToolbar=new Da("InlineSuggestionToolbar"),Da.ChatContext=new Da("ChatContext"),Da.ChatCodeBlock=new Da("ChatCodeblock"),Da.ChatMessageTitle=new Da("ChatMessageTitle"),Da.ChatExecute=new Da("ChatExecute"),Da.ChatInputSide=new Da("ChatInputSide"),Da.AccessibleView=new Da("AccessibleView"),Da.MultiDiffEditorFileToolbar=new Da("MultiDiffEditorFileToolbar");const Aa=ro("menuService");class Ta{static for(e){let t=this._all.get(e);return t||(t=new Ta(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const n of e)n instanceof Ta&&t.add(n.id);return t}constructor(e){this.id=e,this.has=t=>t===e}}Ta._all=new Map;const Na=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new gn({merge:Ta.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(e){return this._commands.set(e.id,e),this._onDidChangeMenu.fire(Ta.for(Da.CommandPalette)),Qt((()=>{this._commands.delete(e.id)&&this._onDidChangeMenu.fire(Ta.for(Da.CommandPalette))}))}getCommand(e){return this._commands.get(e)}getCommands(){const e=new Map;return this._commands.forEach(((t,n)=>e.set(n,t))),e}appendMenuItem(e,t){let n=this._menuItems.get(e);n||(n=new Be,this._menuItems.set(e,n));const i=n.push(t);return this._onDidChangeMenu.fire(Ta.for(e)),Qt((()=>{i(),this._onDidChangeMenu.fire(Ta.for(e))}))}appendMenuItems(e){const t=new Xt;for(const{id:n,item:i}of e)t.add(this.appendMenuItem(n,i));return t}getMenuItems(e){let t;return t=this._menuItems.has(e)?[...this._menuItems.get(e)]:[],e===Da.CommandPalette&&this._appendImplicitItems(t),t}_appendImplicitItems(e){const t=new Set;for(const n of e)La(n)&&(t.add(n.command.id),n.alt&&t.add(n.alt.id));this._commands.forEach(((n,i)=>{t.has(i)||e.push({command:n})}))}};class Ia extends fo{constructor(e,t,n){super("submenuitem.".concat(e.submenu.id),"string"===typeof e.title?e.title:e.title.value,n,"submenu"),this.item=e,this.hideActions=t}}let $a=Ca=class{static label(e,t){return(null===t||void 0===t?void 0:t.renderShortTitle)&&e.shortTitle?"string"===typeof e.shortTitle?e.shortTitle:e.shortTitle.value:"string"===typeof e.title?e.title:e.title.value}constructor(e,t,n,i,s,r){var o,a;let l;if(this.hideActions=i,this._commandService=r,this.id=e.id,this.label=Ca.label(e,n),this.tooltip=null!==(a="string"===typeof e.tooltip?e.tooltip:null===(o=e.tooltip)||void 0===o?void 0:o.value)&&void 0!==a?a:"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0,e.toggled){const t=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(t.condition),this.checked&&t.tooltip&&(this.tooltip="string"===typeof t.tooltip?t.tooltip:t.tooltip.value),this.checked&&bo.isThemeIcon(t.icon)&&(l=t.icon),this.checked&&t.title&&(this.label="string"===typeof t.title?t.title:t.title.value)}l||(l=bo.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new Ca(t,void 0,n,i,s,r):void 0,this._options=n,this.class=l&&bo.asClassName(l)}run(){var e,t;let n=[];if((null===(e=this._options)||void 0===e?void 0:e.arg)&&(n=[...n,this._options.arg]),null===(t=this._options)||void 0===t?void 0:t.shouldForwardArgs){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];n=[...n,...s]}return this._commandService.executeCommand(this.id,...n)}};$a=Ca=xa([Ea(4,ia),Ea(5,_o)],$a);const Ma=ro("telemetryService"),Ra=ro("logService");var Oa;!function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"}(Oa||(Oa={}));const Pa=Oa.Info;class Fa extends Zt{constructor(){super(...arguments),this.level=Pa,this._onDidChangeLogLevel=this._register(new un),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==Oa.Off&&this.level<=e}}class Ba extends Fa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super(),this.useColors=t,this.setLevel(e)}trace(e){if(this.checkLogLevel(Oa.Trace)){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.useColors?console.log("%cTRACE","color: #888",e,...n):console.log(e,...n)}}debug(e){if(this.checkLogLevel(Oa.Debug)){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...n):console.log(e,...n)}}info(e){if(this.checkLogLevel(Oa.Info)){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.useColors?console.log("%c INFO","color: #33f",e,...n):console.log(e,...n)}}warn(e){if(this.checkLogLevel(Oa.Warning)){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.useColors?console.log("%c WARN","color: #993",e,...n):console.log(e,...n)}}error(e){if(this.checkLogLevel(Oa.Error)){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.useColors?console.log("%c  ERR","color: #f33",e,...n):console.error(e,...n)}}}class za extends Fa{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const s of this.loggers)s.trace(e,...n)}debug(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const s of this.loggers)s.debug(e,...n)}info(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const s of this.loggers)s.info(e,...n)}warn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const s of this.loggers)s.warn(e,...n)}error(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const s of this.loggers)s.error(e,...n)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}new na("logLevel",function(e){switch(e){case Oa.Trace:return"trace";case Oa.Debug:return"debug";case Oa.Info:return"info";case Oa.Warning:return"warn";case Oa.Error:return"error";case Oa.Off:return"off"}}(Oa.Info)),ye||document.queryCommandSupported&&document.queryCommandSupported("copy")||navigator&&navigator.clipboard&&navigator.clipboard.writeText,ye||navigator&&navigator.clipboard&&navigator.clipboard.readText,ye||jr||navigator.keyboard,"ontouchstart"in Ms||navigator.maxTouchPoints;const Wa=Ms.PointerEvent&&("ontouchstart"in Ms||navigator.maxTouchPoints>0);const Ha=_e?256:2048,Va=_e?2048:256;class ja{constructor(e){this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState("AltGraph"),this.keyCode=function(e){if(e.charCode){const t=String.fromCharCode(e.charCode).toUpperCase();return $n.fromString(t)}const t=e.keyCode;if(3===t)return 7;if(Fr)switch(t){case 59:return 85;case 60:if(ve)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(_e)return 57}else if(Br){if(_e&&93===t)return 57;if(!_e&&92===t)return 57}return En[t]||0}(t),this.code=t.code,this.ctrlKey=this.ctrlKey||5===this.keyCode,this.altKey=this.altKey||6===this.keyCode,this.shiftKey=this.shiftKey||4===this.keyCode,this.metaKey=this.metaKey||57===this.keyCode,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=Ha),this.altKey&&(t|=512),this.shiftKey&&(t|=1024),this.metaKey&&(t|=Va),t|=e,t}_computeKeyCodeChord(){let e=0;return 5!==this.keyCode&&4!==this.keyCode&&6!==this.keyCode&&57!==this.keyCode&&(e=this.keyCode),new ha(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const Ua=new WeakMap;function qa(e){if(!e.parent||e.parent===e)return null;try{const t=e.location,n=e.parent.location;if("null"!==t.origin&&"null"!==n.origin&&t.origin!==n.origin)return null}catch(zY){return null}return e.parent}class Ka{static getSameOriginWindowChain(e){let t=Ua.get(e);if(!t){t=[],Ua.set(e,t);let n,i=e;do{n=qa(i),n?t.push({window:new WeakRef(i),iframeElement:i.frameElement||null}):t.push({window:new WeakRef(i),iframeElement:null}),i=n}while(i)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){var n,i;if(!t||e===t)return{top:0,left:0};let s=0,r=0;const o=this.getSameOriginWindowChain(e);for(const a of o){const e=a.window.deref();if(s+=null!==(n=null===e||void 0===e?void 0:e.scrollY)&&void 0!==n?n:0,r+=null!==(i=null===e||void 0===e?void 0:e.scrollX)&&void 0!==i?i:0,e===t)break;if(!a.iframeElement)break;const o=a.iframeElement.getBoundingClientRect();s+=o.top,r+=o.left}return{top:s,left:r}}}class Ga{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=0===t.button,this.middleButton=1===t.button,this.rightButton=2===t.button,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,"dblclick"===t.type&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,"number"===typeof t.pageX?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const n=Ka.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Ya{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;var i;if(this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t,e){const t=e,n=e,s=(null===(i=e.view)||void 0===i?void 0:i.devicePixelRatio)||1;if("undefined"!==typeof t.wheelDeltaY)this.deltaY=zr?t.wheelDeltaY/(120*s):t.wheelDeltaY/120;else if("undefined"!==typeof n.VERTICAL_AXIS&&n.axis===n.VERTICAL_AXIS)this.deltaY=-n.detail/3;else if("wheel"===e.type){const t=e;t.deltaMode===t.DOM_DELTA_LINE?this.deltaY=Fr&&!_e?-e.deltaY/3:-e.deltaY:this.deltaY=-e.deltaY/40}if("undefined"!==typeof t.wheelDeltaX)this.deltaX=Wr&&be?-t.wheelDeltaX/120:zr?t.wheelDeltaX/(120*s):t.wheelDeltaX/120;else if("undefined"!==typeof n.HORIZONTAL_AXIS&&n.axis===n.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if("wheel"===e.type){const t=e;t.deltaMode===t.DOM_DELTA_LINE?this.deltaX=Fr&&!_e?-e.deltaX/3:-e.deltaX:this.deltaX=-e.deltaX/40}0===this.deltaY&&0===this.deltaX&&e.wheelDelta&&(this.deltaY=zr?e.wheelDelta/(120*s):e.wheelDelta/120)}}preventDefault(){var e;null===(e=this.browserEvent)||void 0===e||e.preventDefault()}stopPropagation(){var e;null===(e=this.browserEvent)||void 0===e||e.stopPropagation()}}const Qa=Symbol("MicrotaskDelay");function Xa(e){return!!e&&"function"===typeof e.then}function Za(e){const t=new Sn,n=e(t.token),i=new Promise(((e,i)=>{const s=t.token.onCancellationRequested((()=>{s.dispose(),i(new Ot)}));Promise.resolve(n).then((n=>{s.dispose(),t.dispose(),e(n)}),(e=>{s.dispose(),t.dispose(),i(e)}))}));return new class{cancel(){t.cancel(),t.dispose()}then(e,t){return i.then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return i.finally(e)}}}class Ja{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const e=()=>{if(this.queuedPromise=null,this.isDisposed)return;const e=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,e};this.queuedPromise=new Promise((t=>{this.activePromise.then(e,e).then(t)}))}return new Promise(((e,t)=>{this.queuedPromise.then(e,t)}))}return this.activePromise=e(),new Promise(((e,t)=>{this.activePromise.then((t=>{this.activePromise=null,e(t)}),(e=>{this.activePromise=null,t(e)}))}))}dispose(){this.isDisposed=!0}}class el{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultDelay;this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(((e,t)=>{this.doResolve=e,this.doReject=t})).then((()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const e=this.task;return this.task=null,e()}})));const n=()=>{var e;this.deferred=null,null===(e=this.doResolve)||void 0===e||e.call(this,null)};return this.deferred=t===Qa?(e=>{let t=!0;return queueMicrotask((()=>{t&&(t=!1,e())})),{isTriggered:()=>t,dispose:()=>{t=!1}}})(n):((e,t)=>{let n=!0;const i=setTimeout((()=>{n=!1,t()}),e);return{isTriggered:()=>n,dispose:()=>{clearTimeout(i),n=!1}}})(t,n),this.completionPromise}isTriggered(){var e;return!!(null===(e=this.deferred)||void 0===e?void 0:e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&(null===(e=this.doReject)||void 0===e||e.call(this,new Ot),this.completionPromise=null)}cancelTimeout(){var e;null===(e=this.deferred)||void 0===e||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class tl{constructor(e){this.delayer=new el(e),this.throttler=new Ja}trigger(e,t){return this.delayer.trigger((()=>this.throttler.queue(e)),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function nl(e,t){return t?new Promise(((n,i)=>{const s=setTimeout((()=>{r.dispose(),n()}),e),r=t.onCancellationRequested((()=>{clearTimeout(s),r.dispose(),i(new Ot)}))})):Za((t=>nl(e,t)))}function il(e){let t=arguments.length>2?arguments[2]:void 0;const n=setTimeout((()=>{e(),t&&i.dispose()}),arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),i=Qt((()=>{clearTimeout(n),null===t||void 0===t||t.deleteAndLeak(i)}));return null===t||void 0===t||t.add(i),i}class sl{constructor(e,t){this._token=-1,"function"===typeof e&&"number"===typeof t&&this.setIfNotSet(e,t)}dispose(){this.cancel()}cancel(){-1!==this._token&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){this.cancel(),this._token=setTimeout((()=>{this._token=-1,e()}),t)}setIfNotSet(e,t){-1===this._token&&(this._token=setTimeout((()=>{this._token=-1,e()}),t))}}class rl{constructor(){this.disposable=void 0}cancel(){var e;null===(e=this.disposable)||void 0===e||e.dispose(),this.disposable=void 0}cancelAndSet(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:globalThis;this.cancel();const i=n.setInterval((()=>{e()}),t);this.disposable=Qt((()=>{n.clearInterval(i),this.disposable=void 0}))}dispose(){this.cancel()}}class ol{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return-1!==this.timeoutToken}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;null===(e=this.runner)||void 0===e||e.call(this)}}let al,ll;ll="function"!==typeof globalThis.requestIdleCallback||"function"!==typeof globalThis.cancelIdleCallback?(e,t)=>{Le((()=>{if(n)return;const e=Date.now()+15,i={didTimeout:!0,timeRemaining:()=>Math.max(0,e-Date.now())};t(Object.freeze(i))}));let n=!1;return{dispose(){n||(n=!0)}}}:(e,t,n)=>{const i=e.requestIdleCallback(t,"number"===typeof n?{timeout:n}:void 0);let s=!1;return{dispose(){s||(s=!0,e.cancelIdleCallback(i))}}},al=e=>ll(globalThis,e);class cl{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(e){this._error=e}finally{this._didRun=!0}},this._handle=ll(e,(()=>this._executor()))}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class ul extends cl{constructor(e){super(globalThis,e)}}class hl{get isRejected(){var e;return 1===(null===(e=this.outcome)||void 0===e?void 0:e.outcome)}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise(((e,t)=>{this.completeCallback=e,this.errorCallback=t}))}complete(e){return new Promise((t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()}))}error(e){return new Promise((t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()}))}cancel(){return this.error(new Ot)}}var dl;!function(e){e.settled=async function(e){let t;const n=await Promise.all(e.map((e=>e.then((e=>e),(e=>{t||(t=e)})))));if("undefined"!==typeof t)throw t;return n},e.withAsyncBody=function(e){return new Promise((async(t,n)=>{try{await e(t,n)}catch(i){n(i)}}))}}(dl||(dl={}));class fl{static fromArray(e){return new fl((t=>{t.emitMany(e)}))}static fromPromise(e){return new fl((async t=>{t.emitMany(await e)}))}static fromPromises(e){return new fl((async t=>{await Promise.all(e.map((async e=>t.emitOne(await e))))}))}static merge(e){return new fl((async t=>{await Promise.all(e.map((async e=>{for await(const n of e)t.emitOne(n)})))}))}constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new un,queueMicrotask((async()=>{const t={emitOne:e=>this.emitOne(e),emitMany:e=>this.emitMany(e),reject:e=>this.reject(e)};try{await Promise.resolve(e(t)),this.resolve()}catch(n){this.reject(n)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}}))}[Symbol.asyncIterator](){let e=0;return{next:async()=>{for(;;){if(2===this._state)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(1===this._state)return{done:!0,value:void 0};await rn.toPromise(this._onStateChanged.event)}}}}static map(e,t){return new fl((async n=>{for await(const i of e)n.emitOne(t(i))}))}map(e){return fl.map(this,e)}static filter(e,t){return new fl((async n=>{for await(const i of e)t(i)&&n.emitOne(i)}))}filter(e){return fl.filter(this,e)}static coalesce(e){return fl.filter(e,(e=>!!e))}coalesce(){return fl.coalesce(this)}static async toPromise(e){const t=[];for await(const n of e)t.push(n);return t}toPromise(){return fl.toPromise(this)}emitOne(e){0===this._state&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){0===this._state&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){0===this._state&&(this._state=1,this._onStateChanged.fire())}reject(e){0===this._state&&(this._state=2,this._error=e,this._onStateChanged.fire())}}fl.EMPTY=fl.fromArray([]);const{entries:gl,setPrototypeOf:pl,isFrozen:ml,getPrototypeOf:bl,getOwnPropertyDescriptor:_l}=Object;let{freeze:vl,seal:yl,create:Sl}=Object,{apply:wl,construct:kl}="undefined"!==typeof Reflect&&Reflect;wl||(wl=function(e,t,n){return e.apply(t,n)}),vl||(vl=function(e){return e}),yl||(yl=function(e){return e}),kl||(kl=function(e,t){return new e(...t)});const Cl=Ol(Array.prototype.forEach),xl=Ol(Array.prototype.pop),El=Ol(Array.prototype.push),Ll=Ol(String.prototype.toLowerCase),Dl=Ol(String.prototype.toString),Al=Ol(String.prototype.match),Tl=Ol(String.prototype.replace),Nl=Ol(String.prototype.indexOf),Il=Ol(String.prototype.trim),$l=Ol(RegExp.prototype.test),Ml=(Rl=TypeError,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kl(Rl,t)});var Rl;function Ol(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return wl(e,t,i)}}function Pl(e,t,n){var i;n=null!==(i=n)&&void 0!==i?i:Ll,pl&&pl(e,null);let s=t.length;for(;s--;){let i=t[s];if("string"===typeof i){const e=n(i);e!==i&&(ml(t)||(t[s]=e),i=e)}e[i]=!0}return e}function Fl(e){const t=Sl(null);for(const[n,i]of gl(e))t[n]=i;return t}function Bl(e,t){for(;null!==e;){const n=_l(e,t);if(n){if(n.get)return Ol(n.get);if("function"===typeof n.value)return Ol(n.value)}e=bl(e)}return function(e){return console.warn("fallback value for",e),null}}const zl=vl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Wl=vl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Hl=vl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Vl=vl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),jl=vl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Ul=vl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),ql=vl(["#text"]),Kl=vl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Gl=vl(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Yl=vl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ql=vl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Xl=yl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Zl=yl(/<%[\w\W]*|[\w\W]*%>/gm),Jl=yl(/\${[\w\W]*}/gm),ec=yl(/^data-[\-\w.\u00B7-\uFFFF]/),tc=yl(/^aria-[\-\w]+$/),nc=yl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ic=yl(/^(?:\w+script|data):/i),sc=yl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),rc=yl(/^html$/i);var oc=Object.freeze({__proto__:null,MUSTACHE_EXPR:Xl,ERB_EXPR:Zl,TMPLIT_EXPR:Jl,DATA_ATTR:ec,ARIA_ATTR:tc,IS_ALLOWED_URI:nc,IS_SCRIPT_OR_DATA:ic,ATTR_WHITESPACE:sc,DOCTYPE_NAME:rc});const ac=()=>"undefined"===typeof window?null:window;var lc=function e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ac();const n=t=>e(t);if(n.version="3.0.5",n.removed=[],!t||!t.document||9!==t.document.nodeType)return n.isSupported=!1,n;const i=t.document,s=i.currentScript;let{document:r}=t;const{DocumentFragment:o,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:u,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:g}=t,p=c.prototype,m=Bl(p,"cloneNode"),b=Bl(p,"nextSibling"),_=Bl(p,"childNodes"),v=Bl(p,"parentNode");if("function"===typeof a){const e=r.createElement("template");e.content&&e.content.ownerDocument&&(r=e.content.ownerDocument)}let y,S="";const{implementation:w,createNodeIterator:k,createDocumentFragment:C,getElementsByTagName:x}=r,{importNode:E}=i;let L={};n.isSupported="function"===typeof gl&&"function"===typeof v&&w&&void 0!==w.createHTMLDocument;const{MUSTACHE_EXPR:D,ERB_EXPR:A,TMPLIT_EXPR:T,DATA_ATTR:N,ARIA_ATTR:I,IS_SCRIPT_OR_DATA:$,ATTR_WHITESPACE:M}=oc;let{IS_ALLOWED_URI:R}=oc,O=null;const P=Pl({},[...zl,...Wl,...Hl,...jl,...ql]);let F=null;const B=Pl({},[...Kl,...Gl,...Yl,...Ql]);let z=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,H=null,V=!0,j=!0,U=!1,q=!0,K=!1,G=!1,Y=!1,Q=!1,X=!1,Z=!1,J=!1,ee=!0,te=!1,ne=!0,ie=!1,se={},re=null;const oe=Pl({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ae=null;const le=Pl({},["audio","video","img","source","image","track"]);let ce=null;const ue=Pl({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),he="http://www.w3.org/1998/Math/MathML",de="http://www.w3.org/2000/svg",fe="http://www.w3.org/1999/xhtml";let ge=fe,pe=!1,me=null;const be=Pl({},[he,de,fe],Dl);let _e;const ve=["application/xhtml+xml","text/html"];let ye,Se=null;const we=r.createElement("form"),ke=function(e){return e instanceof RegExp||e instanceof Function},Ce=function(e){if(!Se||Se!==e){if(e&&"object"===typeof e||(e={}),e=Fl(e),_e=_e=-1===ve.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,ye="application/xhtml+xml"===_e?Dl:Ll,O="ALLOWED_TAGS"in e?Pl({},e.ALLOWED_TAGS,ye):P,F="ALLOWED_ATTR"in e?Pl({},e.ALLOWED_ATTR,ye):B,me="ALLOWED_NAMESPACES"in e?Pl({},e.ALLOWED_NAMESPACES,Dl):be,ce="ADD_URI_SAFE_ATTR"in e?Pl(Fl(ue),e.ADD_URI_SAFE_ATTR,ye):ue,ae="ADD_DATA_URI_TAGS"in e?Pl(Fl(le),e.ADD_DATA_URI_TAGS,ye):le,re="FORBID_CONTENTS"in e?Pl({},e.FORBID_CONTENTS,ye):oe,W="FORBID_TAGS"in e?Pl({},e.FORBID_TAGS,ye):{},H="FORBID_ATTR"in e?Pl({},e.FORBID_ATTR,ye):{},se="USE_PROFILES"in e&&e.USE_PROFILES,V=!1!==e.ALLOW_ARIA_ATTR,j=!1!==e.ALLOW_DATA_ATTR,U=e.ALLOW_UNKNOWN_PROTOCOLS||!1,q=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,K=e.SAFE_FOR_TEMPLATES||!1,G=e.WHOLE_DOCUMENT||!1,X=e.RETURN_DOM||!1,Z=e.RETURN_DOM_FRAGMENT||!1,J=e.RETURN_TRUSTED_TYPE||!1,Q=e.FORCE_BODY||!1,ee=!1!==e.SANITIZE_DOM,te=e.SANITIZE_NAMED_PROPS||!1,ne=!1!==e.KEEP_CONTENT,ie=e.IN_PLACE||!1,R=e.ALLOWED_URI_REGEXP||nc,ge=e.NAMESPACE||fe,z=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&ke(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(z.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&ke(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(z.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(z.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),K&&(j=!1),Z&&(X=!0),se&&(O=Pl({},[...ql]),F=[],!0===se.html&&(Pl(O,zl),Pl(F,Kl)),!0===se.svg&&(Pl(O,Wl),Pl(F,Gl),Pl(F,Ql)),!0===se.svgFilters&&(Pl(O,Hl),Pl(F,Gl),Pl(F,Ql)),!0===se.mathMl&&(Pl(O,jl),Pl(F,Yl),Pl(F,Ql))),e.ADD_TAGS&&(O===P&&(O=Fl(O)),Pl(O,e.ADD_TAGS,ye)),e.ADD_ATTR&&(F===B&&(F=Fl(F)),Pl(F,e.ADD_ATTR,ye)),e.ADD_URI_SAFE_ATTR&&Pl(ce,e.ADD_URI_SAFE_ATTR,ye),e.FORBID_CONTENTS&&(re===oe&&(re=Fl(re)),Pl(re,e.FORBID_CONTENTS,ye)),ne&&(O["#text"]=!0),G&&Pl(O,["html","head","body"]),O.table&&(Pl(O,["tbody"]),delete W.tbody),e.TRUSTED_TYPES_POLICY){if("function"!==typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Ml('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!==typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Ml('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=e.TRUSTED_TYPES_POLICY,S=y.createHTML("")}else void 0===y&&(y=function(e,t){if("object"!==typeof e||"function"!==typeof e.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const s="dompurify"+(n?"#"+n:"");try{return e.createPolicy(s,{createHTML:e=>e,createScriptURL:e=>e})}catch(r){return console.warn("TrustedTypes policy "+s+" could not be created."),null}}(g,s)),null!==y&&"string"===typeof S&&(S=y.createHTML(""));vl&&vl(e),Se=e}},xe=Pl({},["mi","mo","mn","ms","mtext"]),Ee=Pl({},["foreignobject","desc","title","annotation-xml"]),Le=Pl({},["title","style","font","a","script"]),De=Pl({},Wl);Pl(De,Hl),Pl(De,Vl);const Ae=Pl({},jl);Pl(Ae,Ul);const Te=function(e){El(n.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){e.remove()}},Ne=function(e,t){try{El(n.removed,{attribute:t.getAttributeNode(e),from:t})}catch(i){El(n.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!F[e])if(X||Z)try{Te(t)}catch(i){}else try{t.setAttribute(e,"")}catch(i){}},Ie=function(e){let t,n;if(Q)e="<remove></remove>"+e;else{const t=Al(e,/^[\r\n\t ]+/);n=t&&t[0]}"application/xhtml+xml"===_e&&ge===fe&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=y?y.createHTML(e):e;if(ge===fe)try{t=(new f).parseFromString(i,_e)}catch(o){}if(!t||!t.documentElement){t=w.createDocument(ge,"template",null);try{t.documentElement.innerHTML=pe?S:i}catch(o){}}const s=t.body||t.documentElement;return e&&n&&s.insertBefore(r.createTextNode(n),s.childNodes[0]||null),ge===fe?x.call(t,G?"html":"body")[0]:G?t.documentElement:s},$e=function(e){return k.call(e.ownerDocument||e,e,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},Me=function(e){return"object"===typeof l?e instanceof l:e&&"object"===typeof e&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName},Re=function(e,t,i){L[e]&&Cl(L[e],(e=>{e.call(n,t,i,Se)}))},Oe=function(e){let t;if(Re("beforeSanitizeElements",e,null),(i=e)instanceof d&&("string"!==typeof i.nodeName||"string"!==typeof i.textContent||"function"!==typeof i.removeChild||!(i.attributes instanceof h)||"function"!==typeof i.removeAttribute||"function"!==typeof i.setAttribute||"string"!==typeof i.namespaceURI||"function"!==typeof i.insertBefore||"function"!==typeof i.hasChildNodes))return Te(e),!0;var i;const s=ye(e.nodeName);if(Re("uponSanitizeElement",e,{tagName:s,allowedTags:O}),e.hasChildNodes()&&!Me(e.firstElementChild)&&(!Me(e.content)||!Me(e.content.firstElementChild))&&$l(/<[/\w]/g,e.innerHTML)&&$l(/<[/\w]/g,e.textContent))return Te(e),!0;if(!O[s]||W[s]){if(!W[s]&&Fe(s)){if(z.tagNameCheck instanceof RegExp&&$l(z.tagNameCheck,s))return!1;if(z.tagNameCheck instanceof Function&&z.tagNameCheck(s))return!1}if(ne&&!re[s]){const t=v(e)||e.parentNode,n=_(e)||e.childNodes;if(n&&t){for(let i=n.length-1;i>=0;--i)t.insertBefore(m(n[i],!0),b(e))}}return Te(e),!0}return e instanceof c&&!function(e){let t=v(e);t&&t.tagName||(t={namespaceURI:ge,tagName:"template"});const n=Ll(e.tagName),i=Ll(t.tagName);return!!me[e.namespaceURI]&&(e.namespaceURI===de?t.namespaceURI===fe?"svg"===n:t.namespaceURI===he?"svg"===n&&("annotation-xml"===i||xe[i]):Boolean(De[n]):e.namespaceURI===he?t.namespaceURI===fe?"math"===n:t.namespaceURI===de?"math"===n&&Ee[i]:Boolean(Ae[n]):e.namespaceURI===fe?!(t.namespaceURI===de&&!Ee[i])&&!(t.namespaceURI===he&&!xe[i])&&!Ae[n]&&(Le[n]||!De[n]):!("application/xhtml+xml"!==_e||!me[e.namespaceURI]))}(e)?(Te(e),!0):"noscript"!==s&&"noembed"!==s&&"noframes"!==s||!$l(/<\/no(script|embed|frames)/i,e.innerHTML)?(K&&3===e.nodeType&&(t=e.textContent,t=Tl(t,D," "),t=Tl(t,A," "),t=Tl(t,T," "),e.textContent!==t&&(El(n.removed,{element:e.cloneNode()}),e.textContent=t)),Re("afterSanitizeElements",e,null),!1):(Te(e),!0)},Pe=function(e,t,n){if(ee&&("id"===t||"name"===t)&&(n in r||n in we))return!1;if(j&&!H[t]&&$l(N,t));else if(V&&$l(I,t));else if(!F[t]||H[t]){if(!(Fe(e)&&(z.tagNameCheck instanceof RegExp&&$l(z.tagNameCheck,e)||z.tagNameCheck instanceof Function&&z.tagNameCheck(e))&&(z.attributeNameCheck instanceof RegExp&&$l(z.attributeNameCheck,t)||z.attributeNameCheck instanceof Function&&z.attributeNameCheck(t))||"is"===t&&z.allowCustomizedBuiltInElements&&(z.tagNameCheck instanceof RegExp&&$l(z.tagNameCheck,n)||z.tagNameCheck instanceof Function&&z.tagNameCheck(n))))return!1}else if(ce[t]);else if($l(R,Tl(n,M,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Nl(n,"data:")||!ae[e]){if(U&&!$l($,Tl(n,M,"")));else if(n)return!1}else;return!0},Fe=function(e){return e.indexOf("-")>0},Be=function(e){let t,i,s,r;Re("beforeSanitizeAttributes",e,null);const{attributes:o}=e;if(!o)return;const a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:F};for(r=o.length;r--;){t=o[r];const{name:c,namespaceURI:u}=t;if(i="value"===c?t.value:Il(t.value),s=ye(c),a.attrName=s,a.attrValue=i,a.keepAttr=!0,a.forceKeepAttr=void 0,Re("uponSanitizeAttribute",e,a),i=a.attrValue,a.forceKeepAttr)continue;if(Ne(c,e),!a.keepAttr)continue;if(!q&&$l(/\/>/i,i)){Ne(c,e);continue}K&&(i=Tl(i,D," "),i=Tl(i,A," "),i=Tl(i,T," "));const h=ye(e.nodeName);if(Pe(h,s,i)){if(!te||"id"!==s&&"name"!==s||(Ne(c,e),i="user-content-"+i),y&&"object"===typeof g&&"function"===typeof g.getAttributeType)if(u);else switch(g.getAttributeType(h,s)){case"TrustedHTML":i=y.createHTML(i);break;case"TrustedScriptURL":i=y.createScriptURL(i)}try{u?e.setAttributeNS(u,c,i):e.setAttribute(c,i),xl(n.removed)}catch(l){}}}Re("afterSanitizeAttributes",e,null)},ze=function e(t){let n;const i=$e(t);for(Re("beforeSanitizeShadowDOM",t,null);n=i.nextNode();)Re("uponSanitizeShadowNode",n,null),Oe(n)||(n.content instanceof o&&e(n.content),Be(n));Re("afterSanitizeShadowDOM",t,null)};return n.sanitize=function(e){let t,s,r,a,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(pe=!e,pe&&(e="\x3c!--\x3e"),"string"!==typeof e&&!Me(e)){if("function"!==typeof e.toString)throw Ml("toString is not a function");if("string"!==typeof(e=e.toString()))throw Ml("dirty is not a string, aborting")}if(!n.isSupported)return e;if(Y||Ce(c),n.removed=[],"string"===typeof e&&(ie=!1),ie){if(e.nodeName){const t=ye(e.nodeName);if(!O[t]||W[t])throw Ml("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof l)t=Ie("\x3c!----\x3e"),s=t.ownerDocument.importNode(e,!0),1===s.nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?t=s:t.appendChild(s);else{if(!X&&!K&&!G&&-1===e.indexOf("<"))return y&&J?y.createHTML(e):e;if(t=Ie(e),!t)return X?null:J?S:""}t&&Q&&Te(t.firstChild);const u=$e(ie?e:t);for(;r=u.nextNode();)Oe(r)||(r.content instanceof o&&ze(r.content),Be(r));if(ie)return e;if(X){if(Z)for(a=C.call(t.ownerDocument);t.firstChild;)a.appendChild(t.firstChild);else a=t;return(F.shadowroot||F.shadowrootmode)&&(a=E.call(i,a,!0)),a}let h=G?t.outerHTML:t.innerHTML;return G&&O["!doctype"]&&t.ownerDocument&&t.ownerDocument.doctype&&t.ownerDocument.doctype.name&&$l(rc,t.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+t.ownerDocument.doctype.name+">\n"+h),K&&(h=Tl(h,D," "),h=Tl(h,A," "),h=Tl(h,T," ")),y&&J?y.createHTML(h):h},n.setConfig=function(e){Ce(e),Y=!0},n.clearConfig=function(){Se=null,Y=!1},n.isValidAttribute=function(e,t,n){Se||Ce({});const i=ye(e),s=ye(t);return Pe(i,s,n)},n.addHook=function(e,t){"function"===typeof t&&(L[e]=L[e]||[],El(L[e],t))},n.removeHook=function(e){if(L[e])return xl(L[e])},n.removeHooks=function(e){L[e]&&(L[e]=[])},n.removeAllHooks=function(){L={}},n}();lc.version,lc.isSupported;const cc=lc.sanitize,uc=(lc.setConfig,lc.clearConfig,lc.isValidAttribute,lc.addHook),hc=lc.removeHook;lc.removeHooks,lc.removeAllHooks;var dc;function fc(e,t){return fi.isUri(e)?ir(e.scheme,t):sr(e,t+":")}function gc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.some((t=>fc(e,t)))}!function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatSesssion="vscode-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm"}(dc||(dc={}));const pc=new class{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._remoteResourcesPath="/".concat(dc.vscodeRemoteResource)}setPreferredWebSchema(e){this._preferredWebSchema=e}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(o){return Nt(o),e}const t=e.authority;let n=this._hosts[t];n&&-1!==n.indexOf(":")&&-1===n.indexOf("[")&&(n="[".concat(n,"]"));const i=this._ports[t],s=this._connectionTokens[t];let r="path=".concat(encodeURIComponent(e.path));return"string"===typeof s&&(r+="&".concat("tkn","=").concat(encodeURIComponent(s))),fi.from({scheme:Se?this._preferredWebSchema:dc.vscodeRemoteResource,authority:"".concat(n,":").concat(i),path:this._remoteResourcesPath,query:r})}};class mc{uriToBrowserUri(e){return e.scheme===dc.vscodeRemote?pc.rewrite(e):e.scheme!==dc.file||!ye&&we!=="".concat(dc.vscodeFileResource,"://").concat(mc.FALLBACK_AUTHORITY)?e:e.with({scheme:dc.vscodeFileResource,authority:e.authority||mc.FALLBACK_AUTHORITY,query:null,fragment:null})}}mc.FALLBACK_AUTHORITY="vscode-app";const bc=new mc;var _c;function vc(e){return yc(e,0)}function yc(e,t){switch(typeof e){case"object":return null===e?Sc(349,t):Array.isArray(e)?(n=e,i=Sc(104579,i=t),n.reduce(((e,t)=>yc(t,e)),i)):function(e,t){return t=Sc(181387,t),Object.keys(e).sort().reduce(((t,n)=>(t=wc(n,t),yc(e[n],t))),t)}(e,t);case"string":return wc(e,t);case"boolean":return function(e,t){return Sc(e?433:863,t)}(e,t);case"number":return Sc(e,t);case"undefined":return Sc(937,t);default:return Sc(617,t)}var n,i}function Sc(e,t){return(t<<5)-t+e|0}function wc(e,t){t=Sc(149417,t);for(let n=0,i=e.length;n<i;n++)t=Sc(e.charCodeAt(n),t);return t}function kc(e,t){const n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:32)-t;return(e<<t|(~((1<<n)-1)&e)>>>n)>>>0}function Cc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;for(let s=0;s<n;s++)e[t+s]=i}function xc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32;return e instanceof ArrayBuffer?Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join(""):function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";for(;e.length<t;)e=n+e;return e}((e>>>0).toString(16),t/4)}!function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const n="vscode-coi";e.getHeadersFromQuery=function(e){let i;"string"===typeof e?i=new URL(e).searchParams:e instanceof URL?i=e.searchParams:fi.isUri(e)&&(i=new URL(e.toString(!0)).searchParams);const s=null===i||void 0===i?void 0:i.get(n);if(s)return t.get(s)},e.addSearchParam=function(e,t,i){if(!globalThis.crossOriginIsolated)return;const s=t&&i?"3":i?"2":"1";e instanceof URLSearchParams?e.set(n,s):e[n]=s}}(_c||(_c={}));class Ec{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(0===t)return;const n=this._buff;let i,s,r=this._buffLen,o=this._leftoverHighSurrogate;for(0!==o?(i=o,s=-1,o=0):(i=e.charCodeAt(0),s=0);;){let a=i;if(ar(i)){if(!(s+1<t)){o=i;break}{const t=e.charCodeAt(s+1);lr(t)?(s++,a=cr(i,t)):a=65533}}else lr(i)&&(a=65533);if(r=this._push(n,r,a),s++,!(s<t))break;i=e.charCodeAt(s)}this._buffLen=r,this._leftoverHighSurrogate=o}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(1984&n)>>>6,e[t++]=128|(63&n)>>>0):n<65536?(e[t++]=224|(61440&n)>>>12,e[t++]=128|(4032&n)>>>6,e[t++]=128|(63&n)>>>0):(e[t++]=240|(1835008&n)>>>18,e[t++]=128|(258048&n)>>>12,e[t++]=128|(4032&n)>>>6,e[t++]=128|(63&n)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),xc(this._h0)+xc(this._h1)+xc(this._h2)+xc(this._h3)+xc(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,Cc(this._buff,this._buffLen),this._buffLen>56&&(this._step(),Cc(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=Ec._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,kc(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let n,i,s,r=this._h0,o=this._h1,a=this._h2,l=this._h3,c=this._h4;for(let u=0;u<80;u++)u<20?(n=o&a|~o&l,i=1518500249):u<40?(n=o^a^l,i=1859775393):u<60?(n=o&a|o&l|a&l,i=2400959708):(n=o^a^l,i=3395469782),s=kc(r,5)+n+c+i+e.getUint32(4*u,!1)&4294967295,c=l,l=a,a=kc(o,30),o=r,r=s;this._h0=this._h0+r&4294967295,this._h1=this._h1+o&4294967295,this._h2=this._h2+a&4294967295,this._h3=this._h3+l&4294967295,this._h4=this._h4+c&4294967295}}Ec._bigBlock32=new DataView(new ArrayBuffer(320));const{registerWindow:Lc,getWindow:Dc,getDocument:Ac,getWindows:Tc,getWindowsCount:Nc,getWindowId:Ic,getWindowById:$c,hasWindow:Mc,onDidRegisterWindow:Rc,onWillUnregisterWindow:Oc,onDidUnregisterWindow:Pc}=function(){const e=new Map;!function(e,t){const n=e;"number"!==typeof n.vscodeWindowId&&Object.defineProperty(n,"vscodeWindowId",{get:()=>t})}(Ms,1),e.set(Ms.vscodeWindowId,{window:Ms,disposables:new Xt});const t=new un,n=new un,i=new un;return{onDidRegisterWindow:t.event,onWillUnregisterWindow:i.event,onDidUnregisterWindow:n.event,registerWindow(s){if(e.has(s.vscodeWindowId))return Zt.None;const r=new Xt,o={window:s,disposables:r.add(new Xt)};return e.set(s.vscodeWindowId,o),r.add(Qt((()=>{e.delete(s.vscodeWindowId),n.fire(s)}))),r.add(zc(s,ku.BEFORE_UNLOAD,(()=>{i.fire(s)}))),t.fire(o),r},getWindows:()=>e.values(),getWindowsCount:()=>e.size,getWindowId:e=>e.vscodeWindowId,hasWindow:t=>e.has(t),getWindowById:t=>e.get(t),getWindow(e){var t;const n=e;if(null===(t=null===n||void 0===n?void 0:n.ownerDocument)||void 0===t?void 0:t.defaultView)return n.ownerDocument.defaultView.window;const i=e;return(null===i||void 0===i?void 0:i.view)?i.view.window:Ms},getDocument:e=>Dc(e).document}}();function Fc(e){for(;e.firstChild;)e.firstChild.remove()}class Bc{constructor(e,t,n,i){this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function zc(e,t,n,i){return new Bc(e,t,n,i)}function Wc(e,t){return function(n){return t(new Ga(e,n))}}const Hc=function(e,t,n,i){let s=n;return"click"===t||"mousedown"===t?s=Wc(Dc(e),n):"keydown"!==t&&"keypress"!==t&&"keyup"!==t||(s=function(e){return function(t){return e(new ja(t))}}(n)),zc(e,t,s,i)};function Vc(e,t,n){return ll(e,t,n)}let jc,Uc;class qc extends rl{constructor(e){super(),this.defaultTarget=e&&Dc(e)}cancelAndSet(e,t,n){return super.cancelAndSet(e,t,null!==n&&void 0!==n?n:this.defaultTarget)}}class Kc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(zY){Nt(zY)}}static sort(e,t){return t.priority-e.priority}}function Gc(e){return Dc(e).getComputedStyle(e,null)}function Yc(e,t){const n=Dc(e),i=n.document;if(e!==i.body)return new Xc(e.clientWidth,e.clientHeight);if(ke&&(null===n||void 0===n?void 0:n.visualViewport))return new Xc(n.visualViewport.width,n.visualViewport.height);if((null===n||void 0===n?void 0:n.innerWidth)&&n.innerHeight)return new Xc(n.innerWidth,n.innerHeight);if(i.body&&i.body.clientWidth&&i.body.clientHeight)return new Xc(i.body.clientWidth,i.body.clientHeight);if(i.documentElement&&i.documentElement.clientWidth&&i.documentElement.clientHeight)return new Xc(i.documentElement.clientWidth,i.documentElement.clientHeight);if(t)return Yc(t);throw new Error("Unable to figure out browser width and height")}!function(){const e=new Map,t=new Map,n=new Map,i=new Map;Uc=function(s,r){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=Ic(s),l=new Kc(r,o);let c=e.get(a);return c||(c=[],e.set(a,c)),c.push(l),n.get(a)||(n.set(a,!0),s.requestAnimationFrame((()=>(s=>{var r;n.set(s,!1);const o=null!==(r=e.get(s))&&void 0!==r?r:[];for(t.set(s,o),e.set(s,[]),i.set(s,!0);o.length>0;)o.sort(Kc.sort),o.shift().execute();i.set(s,!1)})(a)))),l},jc=(e,n,s)=>{const r=Ic(e);if(i.get(r)){const e=new Kc(n,s);let i=t.get(r);return i||(i=[],t.set(r,i)),i.push(e),e}return Uc(e,n,s)}}();class Qc{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){const i=Gc(e),s=i?i.getPropertyValue(t):"0";return Qc.convertToPixels(e,s)}static getBorderLeftWidth(e){return Qc.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return Qc.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return Qc.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return Qc.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return Qc.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return Qc.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return Qc.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return Qc.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return Qc.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return Qc.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return Qc.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return Qc.getDimension(e,"margin-bottom","marginBottom")}}class Xc{constructor(e,t){this.width=e,this.height=t}with(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.width,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.height;return e!==this.width||t!==this.height?new Xc(e,t):this}static is(e){return"object"===typeof e&&"number"===typeof e.height&&"number"===typeof e.width}static lift(e){return e instanceof Xc?e:new Xc(e.width,e.height)}static equals(e,t){return e===t||!(!e||!t)&&(e.width===t.width&&e.height===t.height)}}function Zc(e){const t=e.getBoundingClientRect(),n=Dc(e);return{left:t.left+n.scrollX,top:t.top+n.scrollY,width:t.width,height:t.height}}function Jc(e){let t=e,n=1;do{const e=Gc(t).zoom;null!==e&&void 0!==e&&"1"!==e&&(n*=e),t=t.parentElement}while(null!==t&&t!==t.ownerDocument.documentElement);return n}function eu(e){const t=Qc.getMarginLeft(e)+Qc.getMarginRight(e);return e.offsetWidth+t}function tu(e){const t=Qc.getBorderLeftWidth(e)+Qc.getBorderRightWidth(e),n=Qc.getPaddingLeft(e)+Qc.getPaddingRight(e);return e.offsetWidth-t-n}function nu(e){const t=Qc.getBorderTopWidth(e)+Qc.getBorderBottomWidth(e),n=Qc.getPaddingTop(e)+Qc.getPaddingBottom(e);return e.offsetHeight-t-n}function iu(e){const t=Qc.getMarginTop(e)+Qc.getMarginBottom(e);return e.offsetHeight+t}function su(e,t){return Boolean(null===t||void 0===t?void 0:t.contains(e))}function ru(e,t,n){return!!function(e,t,n){for(;e&&e.nodeType===e.ELEMENT_NODE;){if(e.classList.contains(t))return e;if(n)if("string"===typeof n){if(e.classList.contains(n))return null}else if(e===n)return null;e=e.parentNode}return null}(e,t,n)}function ou(e){return e&&!!e.host&&!!e.mode}function au(e){return!!lu(e)}function lu(e){for(var t;e.parentNode;){if(e===(null===(t=e.ownerDocument)||void 0===t?void 0:t.body))return null;e=e.parentNode}return ou(e)?e:null}function cu(){let e=du().activeElement;for(;null===e||void 0===e?void 0:e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function uu(e){return cu()===e}function hu(e){return su(cu(),e)}function du(){var e;if(Nc()<=1)return Ms.document;return null!==(e=Array.from(Tc()).map((e=>{let{window:t}=e;return t.document})).find((e=>e.hasFocus())))&&void 0!==e?e:Ms.document}Xc.None=new Xc(0,0);const fu=new Map;function gu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ms.document.head,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;const i=document.createElement("style");if(i.type="text/css",i.media="screen",null===t||void 0===t||t(i),e.appendChild(i),n&&n.add(Qt((()=>e.removeChild(i)))),e===Ms.document.head){const e=new Set;fu.set(i,e);for(const{window:t,disposables:s}of Tc()){if(t===Ms)continue;const r=s.add(pu(i,e,t));null===n||void 0===n||n.add(r)}}return i}function pu(e,t,n){var i,s;const r=new Xt,o=e.cloneNode(!0);n.document.head.appendChild(o),r.add(Qt((()=>n.document.head.removeChild(o))));for(const a of vu(e))null===(i=o.sheet)||void 0===i||i.insertRule(a.cssText,null===(s=o.sheet)||void 0===s?void 0:s.cssRules.length);return r.add(mu.observe(e,r,{childList:!0})((()=>{o.textContent=e.textContent}))),t.add(o),r.add(Qt((()=>t.delete(o)))),r}const mu=new class{constructor(){this.mutationObservers=new Map}observe(e,t,n){let i=this.mutationObservers.get(e);i||(i=new Map,this.mutationObservers.set(e,i));const s=vc(n);let r=i.get(s);if(r)r.users+=1;else{const o=new un,a=new MutationObserver((e=>o.fire(e)));a.observe(e,n);const l=r={users:1,observer:a,onDidMutate:o.event};t.add(Qt((()=>{l.users-=1,0===l.users&&(o.dispose(),a.disconnect(),null===i||void 0===i||i.delete(s),0===(null===i||void 0===i?void 0:i.size)&&this.mutationObservers.delete(e))}))),i.set(s,r)}return r.onDidMutate}};let bu=null;function _u(){return bu||(bu=gu()),bu}function vu(e){var t,n;return(null===(t=null===e||void 0===e?void 0:e.sheet)||void 0===t?void 0:t.rules)?e.sheet.rules:(null===(n=null===e||void 0===e?void 0:e.sheet)||void 0===n?void 0:n.cssRules)?e.sheet.cssRules:[]}function yu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_u();var i,s;if(n&&t){null===(i=n.sheet)||void 0===i||i.insertRule("".concat(e," {").concat(t,"}"),0);for(const i of null!==(s=fu.get(n))&&void 0!==s?s:[])yu(e,t,i)}}function Su(e){return e instanceof MouseEvent||e instanceof Dc(e).MouseEvent}function wu(e){return e instanceof KeyboardEvent||e instanceof Dc(e).KeyboardEvent}const ku={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Br?"webkitAnimationStart":"animationstart",ANIMATION_END:Br?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Br?"webkitAnimationIteration":"animationiteration"};function Cu(e){const t=e;return!(!t||"function"!==typeof t.preventDefault||"function"!==typeof t.stopPropagation)}const xu=(e,t)=>(e.preventDefault(),t&&e.stopPropagation(),e);class Eu extends Zt{static hasFocusWithin(e){if(e instanceof HTMLElement){const t=lu(e);return su(t?t.activeElement:e.ownerDocument.activeElement,e)}{const t=e;return su(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new un),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new un),this.onDidBlur=this._onDidBlur.event;let t=Eu.hasFocusWithin(e),n=!1;const i=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},s=()=>{t&&(n=!0,(e instanceof HTMLElement?Dc(e):e).setTimeout((()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())}),0))};this._refreshStateHandler=()=>{Eu.hasFocusWithin(e)!==t&&(t?s():i())},this._register(zc(e,ku.FOCUS,i,!0)),this._register(zc(e,ku.BLUR,s,!0)),e instanceof HTMLElement&&(this._register(zc(e,ku.FOCUS_IN,(()=>this._refreshStateHandler()))),this._register(zc(e,ku.FOCUS_OUT,(()=>this._refreshStateHandler()))))}}function Lu(e){return new Eu(e)}function Du(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e.append(...n),1===n.length&&"string"!==typeof n[0])return n[0]}function Au(e,t){return e.insertBefore(t,e.firstChild),t}function Tu(e){e.innerText="";for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Du(e,...n)}const Nu=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Iu;function $u(e,t,n){const i=Nu.exec(t);if(!i)throw new Error("Bad use of emmet");const s=i[1]||"div";let r;r=e!==Iu.HTML?document.createElementNS(e,s):document.createElement(s),i[3]&&(r.id=i[3]),i[4]&&(r.className=i[4].replace(/\./g," ").trim()),n&&Object.entries(n).forEach((e=>{let[t,n]=e;"undefined"!==typeof n&&(/^on\w+$/.test(t)?r[t]=n:"selected"===t?n&&r.setAttribute(t,"true"):r.setAttribute(t,n))}));for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return r.append(...a),r}function Mu(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];return $u(Iu.HTML,e,t,...i)}function Ru(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const i of t)i.style.display="",i.removeAttribute("aria-hidden")}function Ou(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const i of t)i.style.display="none",i.setAttribute("aria-hidden","true")}function Pu(e,t){const n=e.devicePixelRatio*t;return Math.max(1,Math.floor(n))/e.devicePixelRatio}function Fu(e){Ms.open(e,"_blank","noopener")}function Bu(e){return e?"url('".concat(bc.uriToBrowserUri(e).toString(!0).replace(/'/g,"%27"),"')"):"url('')"}function zu(e){return"'".concat(e.replace(/'/g,"%27"),"'")}function Wu(e,t){if(void 0!==e){const n=e.match(/^\s*var\((.+)\)$/);if(n){const e=n[1].split(",",2);return 2===e.length&&(t=Wu(e[1].trim(),t)),"var(".concat(e[0],", ").concat(t,")")}return e}return t}!function(e){e.HTML="http://www.w3.org/1999/xhtml",e.SVG="http://www.w3.org/2000/svg"}(Iu||(Iu={})),Mu.SVG=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];return $u(Iu.SVG,e,t,...i)},pc.setPreferredWebSchema(/^https:/.test(Ms.location.href)?"https":"http");const Hu=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);Object.freeze({ALLOWED_TAGS:["a","button","blockquote","code","div","h1","h2","h3","h4","h5","h6","hr","input","label","li","p","pre","select","small","span","strong","textarea","ul","ol"],ALLOWED_ATTR:["href","data-href","data-command","target","title","name","src","alt","class","id","role","tabindex","style","data-code","width","height","align","x-dispatch","required","checked","placeholder","type","start"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!0});class Vu extends un{constructor(){super(),this._subscriptions=new Xt,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(rn.runAndSubscribe(Rc,(e=>{let{window:t,disposables:n}=e;return this.registerListeners(t,n)}),{window:Ms,disposables:this._subscriptions}))}registerListeners(e,t){t.add(zc(e,"keydown",(e=>{if(e.defaultPrevented)return;const t=new ja(e);if(6!==t.keyCode||!e.repeat){if(e.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(e.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(e.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(e.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else{if(6===t.keyCode)return;this._keyStatus.lastKeyPressed=void 0}this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=e,this.fire(this._keyStatus))}}),!0)),t.add(zc(e,"keyup",(e=>{e.defaultPrevented||(!e.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!e.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!e.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!e.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=e.altKey,this._keyStatus.ctrlKey=e.ctrlKey,this._keyStatus.metaKey=e.metaKey,this._keyStatus.shiftKey=e.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=e,this.fire(this._keyStatus)))}),!0)),t.add(zc(e.document.body,"mousedown",(()=>{this._keyStatus.lastKeyPressed=void 0}),!0)),t.add(zc(e.document.body,"mouseup",(()=>{this._keyStatus.lastKeyPressed=void 0}),!0)),t.add(zc(e.document.body,"mousemove",(e=>{e.buttons&&(this._keyStatus.lastKeyPressed=void 0)}),!0)),t.add(zc(e,"blur",(()=>{this.resetKeyStatus()})))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Vu.instance||(Vu.instance=new Vu),Vu.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class ju extends Zt{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(zc(this.element,ku.DRAG_START,(e=>{var t,n;null===(n=(t=this.callbacks).onDragStart)||void 0===n||n.call(t,e)}))),this.callbacks.onDrag&&this._register(zc(this.element,ku.DRAG,(e=>{var t,n;null===(n=(t=this.callbacks).onDrag)||void 0===n||n.call(t,e)}))),this._register(zc(this.element,ku.DRAG_ENTER,(e=>{var t,n;this.counter++,this.dragStartTime=e.timeStamp,null===(n=(t=this.callbacks).onDragEnter)||void 0===n||n.call(t,e)}))),this._register(zc(this.element,ku.DRAG_OVER,(e=>{var t,n;e.preventDefault(),null===(n=(t=this.callbacks).onDragOver)||void 0===n||n.call(t,e,e.timeStamp-this.dragStartTime)}))),this._register(zc(this.element,ku.DRAG_LEAVE,(e=>{var t,n;this.counter--,0===this.counter&&(this.dragStartTime=0,null===(n=(t=this.callbacks).onDragLeave)||void 0===n||n.call(t,e))}))),this._register(zc(this.element,ku.DRAG_END,(e=>{var t,n;this.counter=0,this.dragStartTime=0,null===(n=(t=this.callbacks).onDragEnd)||void 0===n||n.call(t,e)}))),this._register(zc(this.element,ku.DROP,(e=>{var t,n;this.counter=0,this.dragStartTime=0,null===(n=(t=this.callbacks).onDrop)||void 0===n||n.call(t,e)})))}}const Uu=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function qu(e){let t,n;Array.isArray(arguments.length<=1?void 0:arguments[1])?(t={},n=arguments.length<=1?void 0:arguments[1]):(t=(arguments.length<=1?void 0:arguments[1])||{},n=arguments.length<=2?void 0:arguments[2]);const i=Uu.exec(e);if(!i||!i.groups)throw new Error("Bad use of h");const s=i.groups.tag||"div",r=document.createElement(s);i.groups.id&&(r.id=i.groups.id);const o=[];if(i.groups.class)for(const l of i.groups.class.split("."))""!==l&&o.push(l);if(void 0!==t.className)for(const l of t.className.split("."))""!==l&&o.push(l);o.length>0&&(r.className=o.join(" "));const a={};if(i.groups.name&&(a[i.groups.name]=r),n)for(const l of n)l instanceof HTMLElement?r.appendChild(l):"string"===typeof l?r.append(l):"root"in l&&(Object.assign(a,l),r.appendChild(l.root));for(const[l,c]of Object.entries(t))if("className"!==l)if("style"===l)for(const[e,t]of Object.entries(c))r.style.setProperty(Ku(e),"number"===typeof t?t+"px":""+t);else"tabIndex"===l?r.tabIndex=c:r.setAttribute(Ku(l),c.toString());return a.root=r,a}function Ku(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class Gu{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let e=t.kbExpr;this.precondition&&(e=e?Oo.and(e,this.precondition):this.precondition);const n={id:this.id,weight:t.weight,args:t.args,when:e,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};wa.registerKeybindingRule(n)}}vo.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){Na.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class Yu extends Gu{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n,i){return this._implementations.push({priority:e,name:t,implementation:n,when:i}),this._implementations.sort(((e,t)=>t.priority-e.priority)),{dispose:()=>{for(let e=0;e<this._implementations.length;e++)if(this._implementations[e].implementation===n)return void this._implementations.splice(e,1)}}}runCommand(e,t){const n=e.get(Ra),i=e.get(ia);n.trace("Executing Command '".concat(this.id,"' which has ").concat(this._implementations.length," bound."));for(const s of this._implementations){if(s.when){const e=i.getContext(cu());if(!s.when.evaluate(e))continue}const r=s.implementation(e,t);if(r){if(n.trace("Command '".concat(this.id,"' was handled by '").concat(s.name,"'.")),"boolean"===typeof r)return;return r}}n.trace("The Command '".concat(this.id,"' was not handled by any implementation."))}}class Qu extends Gu{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Xu extends Gu{static bindToContribution(e){return class extends Xu{constructor(e){super(e),this._callback=e.handler}runEditorCommand(t,n,i){const s=e(n);s&&this._callback(s,i)}}}static runEditorCommand(e,t,n,i){const s=e.get(oo),r=s.getFocusedCodeEditor()||s.getActiveCodeEditor();if(r)return r.invokeWithinContext((e=>{if(e.get(ia).contextMatchesRules(null!==n&&void 0!==n?n:void 0))return i(e,r,t)}))}runCommand(e,t){return Xu.runEditorCommand(e,t,this.precondition,((e,t,n)=>this.runEditorCommand(e,t,n)))}}function Zu(e){return th.INSTANCE.registerEditorCommand(e),e}function Ju(e,t,n){th.INSTANCE.registerEditorContribution(e,t,n)}var eh;!function(e){e.getEditorCommand=function(e){return th.INSTANCE.getEditorCommand(e)},e.getEditorActions=function(){return th.INSTANCE.getEditorActions()},e.getEditorContributions=function(){return th.INSTANCE.getEditorContributions()},e.getSomeEditorContributions=function(e){return th.INSTANCE.getEditorContributions().filter((t=>e.indexOf(t.id)>=0))},e.getDiffEditorContributions=function(){return th.INSTANCE.getDiffEditorContributions()}}(eh||(eh={}));class th{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,n){this.editorContributions.push({id:e,ctor:t,instantiation:n})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}function nh(e){return e.register(),e}th.INSTANCE=new th,ya.add("editor.contributions",th.INSTANCE);const ih=nh(new Yu({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:Da.MenubarEditMenu,group:"1_do",title:G({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:Da.CommandPalette,group:"",title:G("undo","Undo"),order:1}]}));nh(new Qu(ih,{id:"default:undo",precondition:void 0}));const sh=nh(new Yu({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:Da.MenubarEditMenu,group:"1_do",title:G({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:Da.CommandPalette,group:"",title:G("redo","Redo"),order:1}]}));nh(new Qu(sh,{id:"default:redo",precondition:void 0}));const rh=nh(new Yu({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:Da.MenubarSelectionMenu,group:"1_basic",title:G({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:Da.CommandPalette,group:"",title:G("selectAll","Select All"),order:1}]})),oh="$initialize";let ah=!1;function lh(e){Se&&(ah||(ah=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(e.message))}class ch{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.method=n,this.args=i,this.type=0}}class uh{constructor(e,t,n,i){this.vsWorker=e,this.seq=t,this.res=n,this.err=i,this.type=1}}class hh{constructor(e,t,n,i){this.vsWorker=e,this.req=t,this.eventName=n,this.arg=i,this.type=2}}class dh{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}class fh{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class gh{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t){const n=String(++this._lastSentReq);return new Promise(((i,s)=>{this._pendingReplies[n]={resolve:i,reject:s},this._send(new ch(this._workerId,n,e,t))}))}listen(e,t){let n=null;const i=new un({onWillAddFirstListener:()=>{n=String(++this._lastSentReq),this._pendingEmitters.set(n,i),this._send(new hh(this._workerId,n,e,t))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(n),this._send(new fh(this._workerId,n)),n=null}});return i.event}handleMessage(e){e&&e.vsWorker&&(-1!==this._workerId&&e.vsWorker!==this._workerId||this._handleMessage(e))}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq])return void console.warn("Got reply to unknown seq");const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;return e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),void t.reject(n)}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.method,e.args).then((e=>{this._send(new uh(this._workerId,t,e,void 0))}),(e=>{e.detail instanceof Error&&(e.detail=$t(e.detail)),this._send(new uh(this._workerId,t,void 0,$t(e)))}))}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.eventName,e.arg)((e=>{this._send(new dh(this._workerId,t,e))}));this._pendingEvents.set(t,n)}_handleEventMessage(e){this._pendingEmitters.has(e.req)?this._pendingEmitters.get(e.req).fire(e.event):console.warn("Got event for unknown req")}_handleUnsubscribeEventMessage(e){this._pendingEvents.has(e.req)?(this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)):console.warn("Got unsubscribe for unknown req")}_send(e){const t=[];if(0===e.type)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else 1===e.type&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class ph extends Zt{constructor(e,t,n){super();let i=null;this._worker=this._register(e.create("vs/base/common/worker/simpleWorker",(e=>{this._protocol.handleMessage(e)}),(e=>{null===i||void 0===i||i(e)}))),this._protocol=new gh({sendMessage:(e,t)=>{this._worker.postMessage(e,t)},handleMessage:(e,t)=>{if("function"!==typeof n[e])return Promise.reject(new Error("Missing method "+e+" on main thread host."));try{return Promise.resolve(n[e].apply(n,t))}catch(zY){return Promise.reject(zY)}},handleEvent:(e,t)=>{if(bh(e)){const i=n[e].call(n,t);if("function"!==typeof i)throw new Error("Missing dynamic event ".concat(e," on main thread host."));return i}if(mh(e)){const t=n[e];if("function"!==typeof t)throw new Error("Missing event ".concat(e," on main thread host."));return t}throw new Error("Malformed event name ".concat(e))}}),this._protocol.setWorkerId(this._worker.getId());let s=null;const r=globalThis.require;"undefined"!==typeof r&&"function"===typeof r.getConfig?s=r.getConfig():"undefined"!==typeof globalThis.requirejs&&(s=globalThis.requirejs.s.contexts._.config);const o=U(n);this._onModuleLoaded=this._protocol.sendMessage(oh,[this._worker.getId(),JSON.parse(JSON.stringify(s)),t,o]);const a=(e,t)=>this._request(e,t),l=(e,t)=>this._protocol.listen(e,t);this._lazyProxy=new Promise(((e,n)=>{i=n,this._onModuleLoaded.then((t=>{e(_h(t,a,l))}),(e=>{n(e),this._onError("Worker failed to load "+t,e)}))}))}getProxyObject(){return this._lazyProxy}_request(e,t){return new Promise(((n,i)=>{this._onModuleLoaded.then((()=>{this._protocol.sendMessage(e,t).then(n,i)}),i)}))}_onError(e,t){console.error(e),console.info(t)}}function mh(e){return"o"===e[0]&&"n"===e[1]&&nr(e.charCodeAt(2))}function bh(e){return/^onDynamic/.test(e)&&nr(e.charCodeAt(9))}function _h(e,t,n){const i=e=>function(){const n=Array.prototype.slice.call(arguments,0);return t(e,n)},s=e=>function(t){return n(e,t)},r={};for(const o of e)bh(o)?r[o]=s(o):mh(o)?r[o]=n(o,void 0):r[o]=i(o);return r}function vh(e,t){var n;const i=globalThis.MonacoEnvironment;if(null===i||void 0===i?void 0:i.createTrustedTypesPolicy)try{return i.createTrustedTypesPolicy(e,t)}catch(s){return void Nt(s)}try{return null===(n=Ms.trustedTypes)||void 0===n?void 0:n.createPolicy(e,t)}catch(s){return void Nt(s)}}const yh=vh("defaultWorkerFactory",{createScriptURL:e=>e});class Sh extends Zt{constructor(e,t,n,i,s){super(),this.id=t,this.label=n;const r=function(e){const t=globalThis.MonacoEnvironment;if(t){if("function"===typeof t.getWorker)return t.getWorker("workerMain.js",e);if("function"===typeof t.getWorkerUrl){const n=t.getWorkerUrl("workerMain.js",e);return new Worker(yh?yh.createScriptURL(n):n,{name:e})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}(n);"function"===typeof r.then?this.worker=r:this.worker=Promise.resolve(r),this.postMessage(e,[]),this.worker.then((e=>{e.onmessage=function(e){i(e.data)},e.onmessageerror=s,"function"===typeof e.addEventListener&&e.addEventListener("error",s)})),this._register(Qt((()=>{var e;null===(e=this.worker)||void 0===e||e.then((e=>{e.onmessage=null,e.onmessageerror=null,e.removeEventListener("error",s),e.terminate()})),this.worker=null})))}getId(){return this.id}postMessage(e,t){var n;null===(n=this.worker)||void 0===n||n.then((n=>{try{n.postMessage(e,t)}catch(i){Nt(i),Nt(new Error("FAILED to post message to '".concat(this.label,"'-worker"),{cause:i}))}}))}}class wh{constructor(e){this._label=e,this._webWorkerFailedBeforeError=!1}create(e,t,n){const i=++wh.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new Sh(e,i,this._label||"anonymous"+i,t,(e=>{lh(e),this._webWorkerFailedBeforeError=e,n(e)}))}}var kh;wh.LAST_WORKER_ID=0,function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"}(kh||(kh={}));class Ch{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++){switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1}}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(0===e.getTokenCount())return!0;const n=e.findTokenIndexAtOffset(t-2),i=e.getStandardTokenType(n);return this.isOK(i)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const e=String.fromCharCode(n);if(!this.open.includes(e)&&!this.close.includes(e))return e}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class xh{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)Eh(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),Eh(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),Eh(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),Eh(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),1===t.close.length&&1===t.open.length&&Eh(this.autoClosingPairsCloseSingleChar,t.close,t)}}function Eh(e,t,n){e.has(t)?e.get(t).push(n):e.set(t,[n])}function Lh(e,t){const n=e.getCount(),i=e.findTokenIndexAtOffset(t),s=e.getLanguageId(i);let r=i;for(;r+1<n&&e.getLanguageId(r+1)===s;)r++;let o=i;for(;o>0&&e.getLanguageId(o-1)===s;)o--;return new Dh(e,s,o,r+1,e.getStartOffset(o),e.getEndOffset(r))}class Dh{constructor(e,t,n,i,s,r){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=i,this.firstCharOffset=s,this._lastCharOffset=r}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}}function Ah(e){return 0!==(3&e)}class Th{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map((e=>new Ch(e))):e.brackets?this._autoClosingPairs=e.brackets.map((e=>new Ch({open:e[0],close:e[1]}))):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Ch({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes="string"===typeof e.autoCloseBefore?e.autoCloseBefore:Th.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets="string"===typeof e.autoCloseBefore?e.autoCloseBefore:Th.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}}Th.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=";:.,=}])> \n\t",Th.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS="'\"`;:.,=}])> \n\t";const Nh="undefined"!==typeof Buffer;new Ps((()=>new Uint8Array(256)));let Ih,$h,Mh,Rh;class Oh{static wrap(e){return Nh&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new Oh(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return Nh?this.buffer.toString():(Ih||(Ih=new TextDecoder),Ih.decode(this.buffer))}}function Ph(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function Fh(e,t,n){e[n+0]=255&t,t>>>=8,e[n+1]=255&t}function Bh(e,t){return e[t]*2**24+65536*e[t+1]+256*e[t+2]+e[t+3]}function zh(e,t,n){e[n+3]=t,t>>>=8,e[n+2]=t,t>>>=8,e[n+1]=t,t>>>=8,e[n]=t}function Wh(e,t){return e[t]}function Hh(e,t,n){e[n]=t}function Vh(){return $h||($h=new TextDecoder("UTF-16LE")),$h}function jh(){return Rh||(Rh=function(){if(!Te){Te=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2;const t=new Uint16Array(e.buffer);Ae=513===t[0]}return Ae}()?Vh():(Mh||(Mh=new TextDecoder("UTF-16BE")),Mh)),Rh}function Uh(e,t,n){const i=new Uint16Array(e.buffer,t,n);return n>0&&(65279===i[0]||65534===i[0])?function(e,t,n){const i=[];let s=0;for(let r=0;r<n;r++){const n=Ph(e,t);t+=2,i[s++]=String.fromCharCode(n)}return i.join("")}(e,t,n):Vh().decode(i)}class qh{constructor(e){this._capacity=0|e,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return null!==this._completedStrings?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(0===this._bufferLength)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return jh().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,null===this._completedStrings?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(0===t||ar(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity)return this._flushBuffer(),void(this._completedStrings[this._completedStrings.length]=e);for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class Kh{constructor(e,t,n,i,s,r){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=i,this.forwardRegex=s,this.reversedRegex=r,this._openSet=Kh._toSet(this.open),this._closeSet=Kh._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}class Gh{constructor(e,t){this._richEditBracketsBrand=void 0;const n=function(e){const t=e.length;e=e.map((e=>[e[0].toLowerCase(),e[1].toLowerCase()]));const n=[];for(let o=0;o<t;o++)n[o]=o;const i=(e,t)=>{const[n,i]=e,[s,r]=t;return n===s||n===r||i===s||i===r},s=(e,i)=>{const s=Math.min(e,i),r=Math.max(e,i);for(let o=0;o<t;o++)n[o]===r&&(n[o]=s)};for(let o=0;o<t;o++){const r=e[o];for(let a=o+1;a<t;a++)i(r,e[a])&&s(n[o],n[a])}const r=[];for(let o=0;o<t;o++){const i=[],s=[];for(let r=0;r<t;r++)if(n[r]===o){const[t,n]=e[r];i.push(t),s.push(n)}i.length>0&&r.push({open:i,close:s})}return r}(t);this.brackets=n.map(((t,i)=>new Kh(e,i,t.open,t.close,function(e,t,n,i){let s=[];s=s.concat(e),s=s.concat(t);for(let r=0,o=s.length;r<o;r++)Yh(s[r],n,i,s);return s=Xh(s),s.sort(Qh),s.reverse(),Jh(s)}(t.open,t.close,n,i),function(e,t,n,i){let s=[];s=s.concat(e),s=s.concat(t);for(let r=0,o=s.length;r<o;r++)Yh(s[r],n,i,s);return s=Xh(s),s.sort(Qh),s.reverse(),Jh(s.map(ed))}(t.open,t.close,n,i)))),this.forwardRegex=function(e){let t=[];for(const n of e){for(const e of n.open)t.push(e);for(const e of n.close)t.push(e)}return t=Xh(t),Jh(t)}(this.brackets),this.reversedRegex=function(e){let t=[];for(const n of e){for(const e of n.open)t.push(e);for(const e of n.close)t.push(e)}return t=Xh(t),Jh(t.map(ed))}(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const i of this.brackets){for(const e of i.open)this.textIsBracket[e]=i,this.textIsOpenBracket[e]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,e.length);for(const e of i.close)this.textIsBracket[e]=i,this.textIsOpenBracket[e]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,e.length)}}}function Yh(e,t,n,i){for(let s=0,r=t.length;s<r;s++){if(s===n)continue;const r=t[s];for(const t of r.open)t.indexOf(e)>=0&&i.push(t);for(const t of r.close)t.indexOf(e)>=0&&i.push(t)}}function Qh(e,t){return e.length-t.length}function Xh(e){if(e.length<=1)return e;const t=[],n=new Set;for(const i of e)n.has(i)||(t.push(i),n.add(i));return t}function Zh(e){const t=/^[\w ]+$/.test(e);return e=Hs(e),t?"\\b".concat(e,"\\b"):e}function Jh(e){return Us("(".concat(e.map(Zh).join(")|("),")"),!0)}const ed=function(){let e=null,t=null;return function(n){return e!==n&&(e=n,t=function(e){const t=new Uint16Array(e.length);let n=0;for(let i=e.length-1;i>=0;i--)t[n++]=e.charCodeAt(i);return jh().decode(t)}(e)),t}}();class td{static _findPrevBracketInText(e,t,n,i){const s=n.match(e);if(!s)return null;const r=n.length-(s.index||0),o=s[0].length,a=i+r;return new xi(t,a-o+1,t,a+1)}static findPrevBracketInRange(e,t,n,i,s){const r=ed(n).substring(n.length-s,n.length-i);return this._findPrevBracketInText(e,t,r,i)}static findNextBracketInText(e,t,n,i){const s=n.match(e);if(!s)return null;const r=s.index||0,o=s[0].length;if(0===o)return null;const a=i+r;return new xi(t,a+1,t,a+1+o)}static findNextBracketInRange(e,t,n,i,s){const r=n.substring(i,s);return this.findNextBracketInText(e,t,r,i)}}class nd{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const t=n.charAt(n.length-1);e.push(t)}return f(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||0===this._richEditBrackets.brackets.length)return null;const i=t.findTokenIndexAtOffset(n-1);if(Ah(t.getStandardTokenType(i)))return null;const s=this._richEditBrackets.reversedRegex,r=t.getLineContent().substring(0,n-1)+e,o=td.findPrevBracketInRange(s,1,r,0,r.length);if(!o)return null;const a=r.substring(o.startColumn-1,o.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[a])return null;const l=t.getActualLineContentBefore(o.startColumn-1);return/^\s*$/.test(l)?{matchOpenBracket:a}:null}}function id(e){return e.global&&(e.lastIndex=0),!0}class sd{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&id(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&id(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&id(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&id(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class rd{constructor(e){(e=e||{}).brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach((e=>{const t=rd._createOpenBracketRegExp(e[0]),n=rd._createCloseBracketRegExp(e[1]);t&&n&&this._brackets.push({open:e[0],openRegExp:t,close:e[1],closeRegExp:n})})),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,i){if(e>=3)for(let s=0,r=this._regExpRules.length;s<r;s++){const e=this._regExpRules[s];if([{reg:e.beforeText,text:n},{reg:e.afterText,text:i},{reg:e.previousLineText,text:t}].every((e=>!e.reg||(e.reg.lastIndex=0,e.reg.test(e.text)))))return e.action}if(e>=2&&n.length>0&&i.length>0)for(let s=0,r=this._brackets.length;s<r;s++){const e=this._brackets[s];if(e.openRegExp.test(n)&&e.closeRegExp.test(i))return{indentAction:kh.IndentOutdent}}if(e>=2&&n.length>0)for(let s=0,r=this._brackets.length;s<r;s++){if(this._brackets[s].openRegExp.test(n))return{indentAction:kh.Indent}}return null}static _createOpenBracketRegExp(e){let t=Hs(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",rd._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Hs(e);return/\B/.test(t.charAt(t.length-1))||(t+="\\b"),t="^\\s*"+t,rd._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Nt(t),null}}}const od=ro("configurationService");function ad(e,t){const n=Object.create(null);for(const i in e)ld(n,i,e[i],t);return n}function ld(e,t,n,i){const s=t.split("."),r=s.pop();let o=e;for(let a=0;a<s.length;a++){const e=s[a];let n=o[e];switch(typeof n){case"undefined":n=o[e]=Object.create(null);break;case"object":break;default:return void i("Ignoring ".concat(t," as ").concat(s.slice(0,a+1).join(".")," is ").concat(JSON.stringify(n)))}o=n}if("object"===typeof o&&null!==o)try{o[r]=n}catch(zY){i("Ignoring ".concat(t," as ").concat(s.join(".")," is ").concat(JSON.stringify(o)))}else i("Ignoring ".concat(t," as ").concat(s.join(".")," is ").concat(JSON.stringify(o)))}function cd(e,t){ud(e,t.split("."))}function ud(e,t){const n=t.shift();if(0!==t.length){if(-1!==Object.keys(e).indexOf(n)){const i=e[n];"object"!==typeof i||Array.isArray(i)||(ud(i,t),0===Object.keys(i).length&&delete e[n])}}else delete e[n]}function hd(e,t,n){const i=function(e,t){let n=e;for(const i of t){if("object"!==typeof n||null===n)return;n=n[i]}return n}(e,t.split("."));return"undefined"===typeof i?n:i}const dd=ro("languageService");class fd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const gd=[];function pd(e,t,n){t instanceof fd||(t=new fd(t,[],Boolean(n))),gd.push([e,t])}function md(){return gd}const bd=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),_d="base.contributions.json";const vd=new class{constructor(){this._onDidChangeSchema=new un,this.schemasById={}}registerSchema(e,t){var n;this.schemasById[(n=e,n.length>0&&"#"===n.charAt(n.length-1)?n.substring(0,n.length-1):n)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}};ya.add(_d,vd);const yd="base.contributions.configuration",Sd={properties:{},patternProperties:{}},wd={properties:{},patternProperties:{}},kd={properties:{},patternProperties:{}},Cd={properties:{},patternProperties:{}},xd={properties:{},patternProperties:{}},Ed={properties:{},patternProperties:{}},Ld="vscode://schemas/settings/resourceLanguage",Dd=ya.as(_d);const Ad="\\[([^\\]]+)\\]",Td=new RegExp(Ad,"g"),Nd="^(".concat(Ad,")+$"),Id=new RegExp(Nd);function $d(e){const t=[];if(Id.test(e)){let n=Td.exec(e);for(;null===n||void 0===n?void 0:n.length;){const i=n[1].trim();i&&t.push(i),n=Td.exec(e)}}return f(t)}const Md=new class{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new un,this._onDidUpdateConfiguration=new un,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:G("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},Dd.registerSchema(Ld,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.registerConfigurations([e],t)}registerConfigurations(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=new Set;this.doRegisterConfigurations(e,t,n),Dd.registerSchema(Ld,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){var n;const i=[];for(const{overrides:s,source:r}of e)for(const e in s)if(t.add(e),Id.test(e)){const t=this.configurationDefaultsOverrides.get(e),o=null!==(n=null===t||void 0===t?void 0:t.valuesSources)&&void 0!==n?n:new Map;if(r)for(const n of Object.keys(s[e]))o.set(n,r);const a={...(null===t||void 0===t?void 0:t.value)||{},...s[e]};this.configurationDefaultsOverrides.set(e,{source:r,value:a,valuesSources:o});const l={type:"object",default:a,description:G("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",e.replace(/[\[\]]/g,"")),$ref:Ld,defaultDefaultValue:a,source:L(r)?void 0:r,defaultValueSource:r};i.push(...$d(e)),this.configurationProperties[e]=l,this.defaultLanguageConfigurationOverridesNode.properties[e]=l}else{this.configurationDefaultsOverrides.set(e,{value:s[e],source:r});const t=this.configurationProperties[e];t&&(this.updatePropertyDefaultValue(e,t),this.updateSchema(e,t))}this.doRegisterOverrideIdentifiers(i)}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach((e=>{this.validateAndRegisterProperties(e,t,e.extensionInfo,e.restrictedProperties,void 0,n),this.configurationContributors.push(e),this.registerJSONConfiguration(e)}))}validateAndRegisterProperties(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,r=arguments.length>5?arguments[5]:void 0;var o;s=R(e.scope)?s:e.scope;const a=e.properties;if(a)for(const c in a){const e=a[c];t&&Rd(c,e)?delete a[c]:(e.source=n,e.defaultDefaultValue=a[c].default,this.updatePropertyDefaultValue(c,e),Id.test(c)?e.scope=void 0:(e.scope=R(e.scope)?s:e.scope,e.restricted=R(e.restricted)?!!(null===i||void 0===i?void 0:i.includes(c)):e.restricted),!a[c].hasOwnProperty("included")||a[c].included?(this.configurationProperties[c]=a[c],(null===(o=a[c].policy)||void 0===o?void 0:o.name)&&this.policyConfigurations.set(a[c].policy.name,c),!a[c].deprecationMessage&&a[c].markdownDeprecationMessage&&(a[c].deprecationMessage=a[c].markdownDeprecationMessage),r.add(c)):(this.excludedConfigurationProperties[c]=a[c],delete a[c]))}const l=e.allOf;if(l)for(const c of l)this.validateAndRegisterProperties(c,t,n,i,s,r)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=e=>{const n=e.properties;if(n)for(const t in n)this.updateSchema(t,n[t]);const i=e.allOf;null===i||void 0===i||i.forEach(t)};t(e)}updateSchema(e,t){switch(Sd.properties[e]=t,t.scope){case 1:wd.properties[e]=t;break;case 2:kd.properties[e]=t;break;case 6:Cd.properties[e]=t;break;case 3:xd.properties[e]=t;break;case 4:Ed.properties[e]=t;break;case 5:Ed.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t="[".concat(e,"]"),n={type:"object",description:G("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:G("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Ld};this.updatePropertyDefaultValue(t,n),Sd.properties[t]=n,wd.properties[t]=n,kd.properties[t]=n,Cd.properties[t]=n,xd.properties[t]=n,Ed.properties[t]=n}}registerOverridePropertyPatternKey(){const e={type:"object",description:G("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:G("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Ld};Sd.patternProperties[Nd]=e,wd.patternProperties[Nd]=e,kd.patternProperties[Nd]=e,Cd.patternProperties[Nd]=e,xd.patternProperties[Nd]=e,Ed.patternProperties[Nd]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e);let i=null===n||void 0===n?void 0:n.value,s=null===n||void 0===n?void 0:n.source;$(i)&&(i=t.defaultDefaultValue,s=void 0),$(i)&&(i=function(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}(t.type)),t.default=i,t.defaultValueSource=s}};function Rd(e,t){var n,i,s,r;return e.trim()?Id.test(e)?G("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",e):void 0!==Md.getConfigurationProperties()[e]?G("config.property.duplicate","Cannot register '{0}'. This property is already registered.",e):(null===(n=t.policy)||void 0===n?void 0:n.name)&&void 0!==Md.getPolicyConfigurations().get(null===(i=t.policy)||void 0===i?void 0:i.name)?G("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",e,null===(s=t.policy)||void 0===s?void 0:s.name,Md.getPolicyConfigurations().get(null===(r=t.policy)||void 0===r?void 0:r.name)):null:G("config.property.empty","Cannot register an empty property")}ya.add(yd,Md);const Od=new class{constructor(){this._onDidChangeLanguages=new un,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e)return void this._languages.splice(t,1)}}}getLanguages(){return this._languages}};ya.add("editor.modesRegistry",Od);const Pd="plaintext";Od.registerLanguage({id:Pd,extensions:[".txt"],aliases:[G("plainText.alias","Plain Text"),"text"],mimetypes:[bd.text]}),ya.as(yd).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class Fd{constructor(e,t){this.languageId=e;const n=t.brackets?Bd(t.brackets):[],i=new Os((e=>{const t=new Set;return{info:new Wd(this,e,t),closing:t}})),s=new Os((e=>{const t=new Set,n=new Set;return{info:new Hd(this,e,t,n),opening:t,openingColorized:n}}));for(const[o,a]of n){const e=i.get(o),t=s.get(a);e.closing.add(t.info),t.opening.add(e.info)}const r=t.colorizedBracketPairs?Bd(t.colorizedBracketPairs):n.filter((e=>!("<"===e[0]&&">"===e[1])));for(const[o,a]of r){const e=i.get(o),t=s.get(a);e.closing.add(t.info),t.openingColorized.add(e.info),t.opening.add(e.info)}this._openingBrackets=new Map([...i.cachedValues].map((e=>{let[t,n]=e;return[t,n.info]}))),this._closingBrackets=new Map([...s.cachedValues].map((e=>{let[t,n]=e;return[t,n.info]})))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}}function Bd(e){return e.filter((e=>{let[t,n]=e;return""!==t&&""!==n}))}class zd{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class Wd extends zd{constructor(e,t,n){super(e,t),this.openedBrackets=n,this.isOpeningBracket=!0}}class Hd extends zd{constructor(e,t,n,i){super(e,t),this.openingBrackets=n,this.openingColorizedBrackets=i,this.isOpeningBracket=!1}closes(e){return e.config===this.config&&this.openingBrackets.has(e)}closesColorized(e){return e.config===this.config&&this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var Vd=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},jd=function(e,t){return function(n,i){t(n,i,e)}};class Ud{constructor(e){this.languageId=e}affects(e){return!this.languageId||this.languageId===e}}const qd=ro("languageConfigurationService");let Kd=class extends Zt{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new nf),this.onDidChangeEmitter=this._register(new un),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(Gd));this._register(this.configurationService.onDidChangeConfiguration((e=>{const t=e.change.keys.some((e=>n.has(e))),i=e.change.overrides.filter((e=>{let[t,i]=e;return i.some((e=>n.has(e)))})).map((e=>{let[t]=e;return t}));if(t)this.configurations.clear(),this.onDidChangeEmitter.fire(new Ud(void 0));else for(const n of i)this.languageService.isRegisteredLanguageId(n)&&(this.configurations.delete(n),this.onDidChangeEmitter.fire(new Ud(n)))}))),this._register(this._registry.onDidChange((e=>{this.configurations.delete(e.languageId),this.onDidChangeEmitter.fire(new Ud(e.languageId))})))}register(e,t,n){return this._registry.register(e,t,n)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=function(e,t,n,i){let s=t.getLanguageConfiguration(e);if(!s){if(!i.isRegisteredLanguageId(e))return new sf(e,{});s=new sf(e,{})}const r=function(e,t){const n=t.getValue(Gd.brackets,{overrideIdentifier:e}),i=t.getValue(Gd.colorizedBracketPairs,{overrideIdentifier:e});return{brackets:Yd(n),colorizedBracketPairs:Yd(i)}}(s.languageId,n),o=Jd([s.underlyingConfig,r]);return new sf(s.languageId,o)}(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};Kd=Vd([jd(0,od),jd(1,dd)],Kd);const Gd={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function Yd(e){if(Array.isArray(e))return e.map((e=>{if(Array.isArray(e)&&2===e.length)return[e[0],e[1]]})).filter((e=>!!e))}function Qd(e,t,n){let i=Gs(e.getLineContent(t));return i.length>n-1&&(i=i.substring(0,n-1)),i}function Xd(e,t,n){e.tokenization.forceTokenization(t);return Lh(e.tokenization.getLineTokens(t),"undefined"===typeof n?e.getLineMaxColumn(t)-1:n-1)}class Zd{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new ef(e,t,++this._order);return this._entries.push(n),this._resolved=null,Qt((()=>{for(let e=0;e<this._entries.length;e++)if(this._entries[e]===n){this._entries.splice(e,1),this._resolved=null;break}}))}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new sf(this.languageId,e))}return this._resolved}_resolve(){return 0===this._entries.length?null:(this._entries.sort(ef.cmp),Jd(this._entries.map((e=>e.configuration))))}}function Jd(e){let t={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const n of e)t={comments:n.comments||t.comments,brackets:n.brackets||t.brackets,wordPattern:n.wordPattern||t.wordPattern,indentationRules:n.indentationRules||t.indentationRules,onEnterRules:n.onEnterRules||t.onEnterRules,autoClosingPairs:n.autoClosingPairs||t.autoClosingPairs,surroundingPairs:n.surroundingPairs||t.surroundingPairs,autoCloseBefore:n.autoCloseBefore||t.autoCloseBefore,folding:n.folding||t.folding,colorizedBracketPairs:n.colorizedBracketPairs||t.colorizedBracketPairs,__electricCharacterSupport:n.__electricCharacterSupport||t.__electricCharacterSupport};return t}class ef{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class tf{constructor(e){this.languageId=e}}class nf extends Zt{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new un),this.onDidChange=this._onDidChange.event,this._register(this.register(Pd,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this._entries.get(e);i||(i=new Zd(e),this._entries.set(e,i));const s=i.register(t,n);return this._onDidChange.fire(new tf(e)),Qt((()=>{s.dispose(),this._onDidChange.fire(new tf(e))}))}getLanguageConfiguration(e){const t=this._entries.get(e);return(null===t||void 0===t?void 0:t.getResolvedConfiguration())||null}}class sf{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new rd(this.underlyingConfig):null,this.comments=sf._handleComments(this.underlyingConfig),this.characterPair=new Th(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||We,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new sd(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new Fd(e,this.underlyingConfig)}getWordDefinition(){return He(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new Gh(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new nd(this.brackets)),this._electricCharacter}onEnter(e,t,n,i){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,i):null}getAutoClosingPairs(){return new xh(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){const[e,i]=t.blockComment;n.blockCommentStartToken=e,n.blockCommentEndToken=i}return n}}pd(qd,Kd,1);class rf{constructor(e,t,n,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class of{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,i=e.length;n<i;n++)t[n]=e.charCodeAt(n);return t}}function af(e,t,n){return new hf(new of(e),new of(t)).ComputeDiff(n).changes}class lf{static Assert(e,t){if(!e)throw new Error(t)}}class cf{static Copy(e,t,n,i,s){for(let r=0;r<s;r++)n[i+r]=e[t+r]}static Copy2(e,t,n,i,s){for(let r=0;r<s;r++)n[i+r]=e[t+r]}}class uf{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new rf(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class hf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[i,s,r]=hf._getElements(e),[o,a,l]=hf._getElements(t);this._hasStrings=r&&l,this._originalStringElements=i,this._originalElementsOrHash=s,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&"string"===typeof e[0]}static _getElements(e){const t=e.getElements();if(hf._isStringArray(t)){const e=new Int32Array(t.length);for(let n=0,i=t.length;n<i;n++)e[n]=wc(t[n],0);return[t,e,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._modifiedElementsOrHash[t]&&(!this._hasStrings||this._originalStringElements[e]===this._modifiedStringElements[t])}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;return hf._getStrictElement(this._originalSequence,e)===hf._getStrictElement(this._modifiedSequence,t)}static _getStrictElement(e,t){return"function"===typeof e.getStrictElement?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]===this._originalElementsOrHash[t]&&(!this._hasStrings||this._originalStringElements[e]===this._originalStringElements[t])}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]===this._modifiedElementsOrHash[t]&&(!this._hasStrings||this._modifiedStringElements[e]===this._modifiedStringElements[t])}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,i,s){const r=[!1];let o=this.ComputeDiffRecursive(e,t,n,i,r);return s&&(o=this.PrettifyChanges(o)),{quitEarly:r[0],changes:o}}ComputeDiffRecursive(e,t,n,i,s){for(s[0]=!1;e<=t&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&i>=n&&this.ElementsAreEqual(t,i);)t--,i--;if(e>t||n>i){let s;return n<=i?(lf.Assert(e===t+1,"originalStart should only be one more than originalEnd"),s=[new rf(e,0,n,i-n+1)]):e<=t?(lf.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),s=[new rf(e,t-e+1,n,0)]):(lf.Assert(e===t+1,"originalStart should only be one more than originalEnd"),lf.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),s=[]),s}const r=[0],o=[0],a=this.ComputeRecursionPoint(e,t,n,i,r,o,s),l=r[0],c=o[0];if(null!==a)return a;if(!s[0]){const r=this.ComputeDiffRecursive(e,l,n,c,s);let o=[];return o=s[0]?[new rf(l+1,t-(l+1)+1,c+1,i-(c+1)+1)]:this.ComputeDiffRecursive(l+1,t,c+1,i,s),this.ConcatenateChanges(r,o)}return[new rf(e,t-e+1,n,i-n+1)]}WALKTRACE(e,t,n,i,s,r,o,a,l,c,u,h,d,f,g,p,m,b){let _=null,v=null,y=new uf,S=t,w=n,k=d[0]-p[0]-i,C=-1073741824,x=this.m_forwardHistory.length-1;do{const t=k+e;t===S||t<w&&l[t-1]<l[t+1]?(f=(u=l[t+1])-k-i,u<C&&y.MarkNextChange(),C=u,y.AddModifiedElement(u+1,f),k=t+1-e):(f=(u=l[t-1]+1)-k-i,u<C&&y.MarkNextChange(),C=u-1,y.AddOriginalElement(u,f+1),k=t-1-e),x>=0&&(e=(l=this.m_forwardHistory[x])[0],S=1,w=l.length-1)}while(--x>=-1);if(_=y.getReverseChanges(),b[0]){let e=d[0]+1,t=p[0]+1;if(null!==_&&_.length>0){const n=_[_.length-1];e=Math.max(e,n.getOriginalEnd()),t=Math.max(t,n.getModifiedEnd())}v=[new rf(e,h-e+1,t,g-t+1)]}else{y=new uf,S=r,w=o,k=d[0]-p[0]-a,C=1073741824,x=m?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const e=k+s;e===S||e<w&&c[e-1]>=c[e+1]?(f=(u=c[e+1]-1)-k-a,u>C&&y.MarkNextChange(),C=u+1,y.AddOriginalElement(u+1,f+1),k=e+1-s):(f=(u=c[e-1])-k-a,u>C&&y.MarkNextChange(),C=u,y.AddModifiedElement(u+1,f+1),k=e-1-s),x>=0&&(s=(c=this.m_reverseHistory[x])[0],S=1,w=c.length-1)}while(--x>=-1);v=y.getChanges()}return this.ConcatenateChanges(_,v)}ComputeRecursionPoint(e,t,n,i,s,r,o){let a=0,l=0,c=0,u=0,h=0,d=0;e--,n--,s[0]=0,r[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const f=t-e+(i-n),g=f+1,p=new Int32Array(g),m=new Int32Array(g),b=i-n,_=t-e,v=e-n,y=t-i,S=(_-b)%2===0;p[b]=e,m[_]=t,o[0]=!1;for(let w=1;w<=f/2+1;w++){let f=0,k=0;c=this.ClipDiagonalBound(b-w,w,b,g),u=this.ClipDiagonalBound(b+w,w,b,g);for(let e=c;e<=u;e+=2){a=e===c||e<u&&p[e-1]<p[e+1]?p[e+1]:p[e-1]+1,l=a-(e-b)-v;const n=a;for(;a<t&&l<i&&this.ElementsAreEqual(a+1,l+1);)a++,l++;if(p[e]=a,a+l>f+k&&(f=a,k=l),!S&&Math.abs(e-_)<=w-1&&a>=m[e])return s[0]=a,r[0]=l,n<=m[e]&&w<=1448?this.WALKTRACE(b,c,u,v,_,h,d,y,p,m,a,t,s,l,i,r,S,o):null}const C=(f-e+(k-n)-w)/2;if(null!==this.ContinueProcessingPredicate&&!this.ContinueProcessingPredicate(f,C))return o[0]=!0,s[0]=f,r[0]=k,C>0&&w<=1448?this.WALKTRACE(b,c,u,v,_,h,d,y,p,m,a,t,s,l,i,r,S,o):(e++,n++,[new rf(e,t-e+1,n,i-n+1)]);h=this.ClipDiagonalBound(_-w,w,_,g),d=this.ClipDiagonalBound(_+w,w,_,g);for(let g=h;g<=d;g+=2){a=g===h||g<d&&m[g-1]>=m[g+1]?m[g+1]-1:m[g-1],l=a-(g-_)-y;const f=a;for(;a>e&&l>n&&this.ElementsAreEqual(a,l);)a--,l--;if(m[g]=a,S&&Math.abs(g-b)<=w&&a<=p[g])return s[0]=a,r[0]=l,f>=p[g]&&w<=1448?this.WALKTRACE(b,c,u,v,_,h,d,y,p,m,a,t,s,l,i,r,S,o):null}if(w<=1447){let e=new Int32Array(u-c+2);e[0]=b-c+1,cf.Copy2(p,c,e,1,u-c+1),this.m_forwardHistory.push(e),e=new Int32Array(d-h+2),e[0]=_-h+1,cf.Copy2(m,h,e,1,d-h+1),this.m_reverseHistory.push(e)}}return this.WALKTRACE(b,c,u,v,_,h,d,y,p,m,a,t,s,l,i,r,S,o)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],i=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,s=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=n.originalLength>0,o=n.modifiedLength>0;for(;n.originalStart+n.originalLength<i&&n.modifiedStart+n.modifiedLength<s&&(!r||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!o||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const e=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!e)break;n.originalStart++,n.modifiedStart++}const a=[null];t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],a)&&(e[t]=a[0],e.splice(t+1,1),t--)}for(let t=e.length-1;t>=0;t--){const n=e[t];let i=0,s=0;if(t>0){const n=e[t-1];i=n.originalStart+n.originalLength,s=n.modifiedStart+n.modifiedLength}const r=n.originalLength>0,o=n.modifiedLength>0;let a=0,l=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let e=1;;e++){const t=n.originalStart-e,c=n.modifiedStart-e;if(t<i||c<s)break;if(r&&!this.OriginalElementsAreEqual(t,t+n.originalLength))break;if(o&&!this.ModifiedElementsAreEqual(c,c+n.modifiedLength))break;const u=(t===i&&c===s?5:0)+this._boundaryScore(t,n.originalLength,c,n.modifiedLength);u>l&&(l=u,a=e)}n.originalStart-=a,n.modifiedStart-=a;const c=[null];t>0&&this.ChangesOverlap(e[t-1],e[t],c)&&(e[t-1]=c[0],e.splice(t,1),t++)}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const n=e[t-1],i=e[t],s=i.originalStart-n.originalStart-n.originalLength,r=n.originalStart,o=i.originalStart+i.originalLength,a=o-r,l=n.modifiedStart,c=i.modifiedStart+i.modifiedLength,u=c-l;if(s<5&&a<20&&u<20){const e=this._findBetterContiguousSequence(r,a,l,u,s);if(e){const[t,r]=e;t===n.originalStart+n.originalLength&&r===n.modifiedStart+n.modifiedLength||(n.originalLength=t-n.originalStart,n.modifiedLength=r-n.modifiedStart,i.originalStart=t+s,i.modifiedStart=r+s,i.originalLength=o-i.originalStart,i.modifiedLength=c-i.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,i,s){if(t<s||i<s)return null;const r=e+t-s+1,o=n+i-s+1;let a=0,l=0,c=0;for(let u=e;u<r;u++)for(let e=n;e<o;e++){const t=this._contiguousSequenceScore(u,e,s);t>0&&t>a&&(a=t,l=u,c=e)}return a>0?[l,c]:null}_contiguousSequenceScore(e,t,n){let i=0;for(let s=0;s<n;s++){if(!this.ElementsAreEqual(e+s,t+s))return 0;i+=this._originalStringElements[e+s].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1||this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,i){return(this._OriginalRegionIsBoundary(e,t)?1:0)+(this._ModifiedRegionIsBoundary(n,i)?1:0)}ConcatenateChanges(e,t){const n=[];if(0===e.length||0===t.length)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const i=new Array(e.length+t.length-1);return cf.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],cf.Copy(t,1,i,e.length,t.length-1),i}{const n=new Array(e.length+t.length);return cf.Copy(e,0,n,0,e.length),cf.Copy(t,0,n,e.length,t.length),n}}ChangesOverlap(e,t,n){if(lf.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),lf.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const i=e.originalStart;let s=e.originalLength;const r=e.modifiedStart;let o=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(s=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(o=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new rf(i,s,r,o),!0}return n[0]=null,!1}ClipDiagonalBound(e,t,n,i){if(e>=0&&e<i)return e;const s=t%2===0;if(e<0){return s===(n%2===0)?0:1}return s===((i-n-1)%2===0)?i-1:i-2}}function df(e){return e<0?0:e>255?255:0|e}function ff(e){return e<0?0:e>4294967295?4294967295:0|e}class gf{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=ff(e);const n=this.values,i=this.prefixSum,s=t.length;return 0!==s&&(this.values=new Uint32Array(n.length+s),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=ff(e),t=ff(t),this.values[e]!==t&&(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=ff(e),t=ff(t);const n=this.values,i=this.prefixSum;if(e>=n.length)return!1;const s=n.length-e;return t>=s&&(t=s),0!==t&&(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return 0===this.values.length?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=ff(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;0===t&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,i=0,s=0,r=0;for(;t<=n;)if(i=t+(n-t)/2|0,s=this.prefixSum[i],r=s-this.values[i],e<r)n=i-1;else{if(!(e>=s))break;t=i+1}return new mf(i,e-r)}}class pf{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),0===e?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new mf(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=m(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const t=this._values[e],n=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=n+t;for(let i=0;i<t;i++)this._indexBySum[n+i]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class mf{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class bf{constructor(e,t,n,i){this._uri=e,this._lines=t,this._eol=n,this._versionId=i,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return null===this._cachedTextValue&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new Ci(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let i=0;i<t;i++)n[i]=this._lines[i].length+e;this._lineStarts=new gf(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber!==e.endLineNumber)this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber);else{if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1))}}_acceptInsertText(e,t){if(0===t.length)return;const n=qs(t);if(1===n.length)return void this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);const i=new Uint32Array(n.length-1);for(let s=1;s<n.length;s++)this._lines.splice(e.lineNumber+s-1,0,n[s]),i[s-1]=n[s].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i)}}class _f{constructor(e){const t=df(e);this._defaultValue=t,this._asciiMap=_f._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const n=df(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class vf{constructor(e,t,n){const i=new Uint8Array(e*t);for(let s=0,r=e*t;s<r;s++)i[s]=n;this._data=i,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class yf{constructor(e){let t=0,n=0;for(let s=0,r=e.length;s<r;s++){const[i,r,o]=e[s];r>t&&(t=r),i>n&&(n=i),o>n&&(n=o)}t++,n++;const i=new vf(n,t,0);for(let s=0,r=e.length;s<r;s++){const[t,n,r]=e[s];i.set(t,n,r)}this._states=i,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let Sf=null;let wf=null;class kf{static _createLink(e,t,n,i,s){let r=s-1;do{const n=t.charCodeAt(r);if(2!==e.get(n))break;r--}while(r>i);if(i>0){const e=t.charCodeAt(i-1),n=t.charCodeAt(r);(40===e&&41===n||91===e&&93===n||123===e&&125===n)&&r--}return{range:{startLineNumber:n,startColumn:i+1,endLineNumber:n,endColumn:r+2},url:t.substring(i,r+1)}}static computeLinks(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(null===Sf&&(Sf=new yf([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Sf);const n=function(){if(null===wf){wf=new _f(0);const e=" \t<>'\"\u3001\u3002\uff61\uff64\uff0c\uff0e\uff1a\uff1b\u2018\u3008\u300c\u300e\u3014\uff08\uff3b\uff5b\uff62\uff63\uff5d\uff3d\uff09\u3015\u300f\u300d\u3009\u2019\uff40\uff5e\u2026";for(let n=0;n<e.length;n++)wf.set(e.charCodeAt(n),1);const t=".,;:";for(let n=0;n<t.length;n++)wf.set(t.charCodeAt(n),2)}return wf}(),i=[];for(let s=1,r=e.getLineCount();s<=r;s++){const r=e.getLineContent(s),o=r.length;let a=0,l=0,c=0,u=1,h=!1,d=!1,f=!1,g=!1;for(;a<o;){let e=!1;const o=r.charCodeAt(a);if(13===u){let t;switch(o){case 40:h=!0,t=0;break;case 41:t=h?0:1;break;case 91:f=!0,d=!0,t=0;break;case 93:f=!1,t=d?0:1;break;case 123:g=!0,t=0;break;case 125:t=g?0:1;break;case 39:case 34:case 96:t=c===o?1:39===c||34===c||96===c?0:1;break;case 42:t=42===c?1:0;break;case 124:t=124===c?1:0;break;case 32:t=f?0:1;break;default:t=n.get(o)}1===t&&(i.push(kf._createLink(n,r,s,l,a)),e=!0)}else if(12===u){let t;91===o?(d=!0,t=0):t=n.get(o),1===t?e=!0:u=13}else u=t.nextState(u,o),0===u&&(e=!0);e&&(u=1,h=!1,d=!1,g=!1,l=a+1,c=o),a++}13===u&&i.push(kf._createLink(n,r,s,l,o))}return i}}class Cf{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,i,s){if(e&&t){const n=this.doNavigateValueSet(t,s);if(n)return{range:e,value:n}}if(n&&i){const e=this.doNavigateValueSet(i,s);if(e)return{range:n,value:e}}return null}doNavigateValueSet(e,t){const n=this.numberReplace(e,t);return null!==n?n:this.textReplace(e,t)}numberReplace(e,t){const n=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let i=Number(e);const s=parseFloat(e);return isNaN(i)||isNaN(s)||i!==s?null:0!==i||t?(i=Math.floor(i*n),i+=t?n:-n,String(i/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let i=null;for(let s=0,r=e.length;null===i&&s<r;s++)i=this.valueSetReplace(e[s],t,n);return i}valueSetReplace(e,t,n){let i=e.indexOf(t);return i>=0?(i+=n?1:-1,i<0?i=e.length-1:i%=e.length,e[i]):null}}Cf.INSTANCE=new Cf;class xf extends _f{constructor(e){super(0);for(let t=0,n=e.length;t<n;t++)this.set(e.charCodeAt(t),2);this.set(32,1),this.set(9,1)}}const Ef=function(e){const t={};return n=>(t.hasOwnProperty(n)||(t[n]=e(n)),t[n])}((e=>new xf(e)));var Lf,Df,Af,Tf;!function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"}(Lf||(Lf={})),function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"}(Df||(Df={})),function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"}(Af||(Af={})),function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"}(Tf||(Tf={}));class Nf{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,0|e.tabSize),"tabSize"===e.indentSize?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,0|e.indentSize),this._indentSizeIsTabSize=!1),this.insertSpaces=Boolean(e.insertSpaces),this.defaultEOL=0|e.defaultEOL,this.trimAutoWhitespace=Boolean(e.trimAutoWhitespace),this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&j(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class If{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}class $f{constructor(e,t,n,i,s,r){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=i,this.isAutoWhitespaceEdit=s,this._isTracked=r}}class Mf{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}class Rf{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function Of(e){return!e.isTooLargeForSyncing()&&!e.isForSimpleWidget}class Pf{constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(""===this.searchString)return null;let e;e=this.isRegex?function(e){if(!e||0===e.length)return!1;for(let t=0,n=e.length;t<n;t++){const i=e.charCodeAt(t);if(10===i)return!0;if(92===i){if(t++,t>=n)break;const i=e.charCodeAt(t);if(110===i||114===i||87===i)return!0}}return!1}(this.searchString):this.searchString.indexOf("\n")>=0;let t=null;try{t=Us(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch(i){return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new Mf(t,this.wordSeparators?Ef(this.wordSeparators):null,n?this.searchString:null)}}function Ff(e,t,n){if(!n)return new If(e,null);const i=[];for(let s=0,r=t.length;s<r;s++)i[s]=t[s];return new If(e,i)}class Bf{constructor(e){const t=[];let n=0;for(let i=0,s=e.length;i<s;i++)10===e.charCodeAt(i)&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,i=t.length-1;if(-1===i)return 0;if(e<=t[0])return 0;for(;n<i;){const s=n+((i-n)/2>>0);t[s]>=e?i=s-1:t[s+1]>=e?(n=s,i=s):n=s+1}return n+1}}class zf{static findMatches(e,t,n,i,s){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,n,new Hf(r.wordSeparators,r.regex),i,s):this._doFindMatchesLineByLine(e,n,r,i,s):[]}static _getMultilineMatchRange(e,t,n,i,s,r){let o,a,l=0;if(i?(l=i.findLineFeedCountBeforeOffset(s),o=t+s+l):o=t+s,i){const e=i.findLineFeedCountBeforeOffset(s+r.length)-l;a=o+r.length+e}else a=o+r.length;const c=e.getPositionAt(o),u=e.getPositionAt(a);return new xi(c.lineNumber,c.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,n,i,s){const r=e.getOffsetAt(t.getStartPosition()),o=e.getValueInRange(t,1),a="\r\n"===e.getEOL()?new Bf(o):null,l=[];let c,u=0;for(n.reset(0);c=n.next(o);)if(l[u++]=Ff(this._getMultilineMatchRange(e,r,o,a,c.index,c[0]),c,i),u>=s)return l;return l}static _doFindMatchesLineByLine(e,t,n,i,s){const r=[];let o=0;if(t.startLineNumber===t.endLineNumber){const a=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return o=this._findMatchesInLine(n,a,t.startLineNumber,t.startColumn-1,o,r,i,s),r}const a=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);o=this._findMatchesInLine(n,a,t.startLineNumber,t.startColumn-1,o,r,i,s);for(let l=t.startLineNumber+1;l<t.endLineNumber&&o<s;l++)o=this._findMatchesInLine(n,e.getLineContent(l),l,0,o,r,i,s);if(o<s){const a=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);o=this._findMatchesInLine(n,a,t.endLineNumber,0,o,r,i,s)}return r}static _findMatchesInLine(e,t,n,i,s,r,o,a){const l=e.wordSeparators;if(!o&&e.simpleSearch){const o=e.simpleSearch,c=o.length,u=t.length;let h=-c;for(;-1!==(h=t.indexOf(o,h+c));)if((!l||Wf(l,t,u,h,c))&&(r[s++]=new If(new xi(n,h+1+i,n,h+1+c+i),null),s>=a))return s;return s}const c=new Hf(e.wordSeparators,e.regex);let u;c.reset(0);do{if(u=c.next(t),u&&(r[s++]=Ff(new xi(n,u.index+1+i,n,u.index+1+u[0].length+i),u,o),s>=a))return s}while(u);return s}static findNextMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const r=new Hf(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindNextMatchMultiline(e,n,r,i):this._doFindNextMatchLineByLine(e,n,r,i)}static _doFindNextMatchMultiline(e,t,n,i){const s=new Ci(t.lineNumber,1),r=e.getOffsetAt(s),o=e.getLineCount(),a=e.getValueInRange(new xi(s.lineNumber,s.column,o,e.getLineMaxColumn(o)),1),l="\r\n"===e.getEOL()?new Bf(a):null;n.reset(t.column-1);const c=n.next(a);return c?Ff(this._getMultilineMatchRange(e,r,a,l,c.index,c[0]),c,i):1!==t.lineNumber||1!==t.column?this._doFindNextMatchMultiline(e,new Ci(1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){const s=e.getLineCount(),r=t.lineNumber,o=e.getLineContent(r),a=this._findFirstMatchInLine(n,o,r,t.column,i);if(a)return a;for(let l=1;l<=s;l++){const t=(r+l-1)%s,o=e.getLineContent(t+1),a=this._findFirstMatchInLine(n,o,t+1,1,i);if(a)return a}return null}static _findFirstMatchInLine(e,t,n,i,s){e.reset(i-1);const r=e.next(t);return r?Ff(new xi(n,r.index+1,n,r.index+1+r[0].length),r,s):null}static findPreviousMatch(e,t,n,i){const s=t.parseSearchRequest();if(!s)return null;const r=new Hf(s.wordSeparators,s.regex);return s.regex.multiline?this._doFindPreviousMatchMultiline(e,n,r,i):this._doFindPreviousMatchLineByLine(e,n,r,i)}static _doFindPreviousMatchMultiline(e,t,n,i){const s=this._doFindMatchesMultiline(e,new xi(1,1,t.lineNumber,t.column),n,i,9990);if(s.length>0)return s[s.length-1];const r=e.getLineCount();return t.lineNumber!==r||t.column!==e.getLineMaxColumn(r)?this._doFindPreviousMatchMultiline(e,new Ci(r,e.getLineMaxColumn(r)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){const s=e.getLineCount(),r=t.lineNumber,o=e.getLineContent(r).substring(0,t.column-1),a=this._findLastMatchInLine(n,o,r,i);if(a)return a;for(let l=1;l<=s;l++){const t=(s+r-l-1)%s,o=e.getLineContent(t+1),a=this._findLastMatchInLine(n,o,t+1,i);if(a)return a}return null}static _findLastMatchInLine(e,t,n,i){let s,r=null;for(e.reset(0);s=e.next(t);)r=Ff(new xi(n,s.index+1,n,s.index+1+s[0].length),s,i);return r}}function Wf(e,t,n,i,s){return function(e,t,n,i,s){if(0===i)return!0;const r=t.charCodeAt(i-1);if(0!==e.get(r))return!0;if(13===r||10===r)return!0;if(s>0){const n=t.charCodeAt(i);if(0!==e.get(n))return!0}return!1}(e,t,0,i,s)&&function(e,t,n,i,s){if(i+s===n)return!0;const r=t.charCodeAt(i+s);if(0!==e.get(r))return!0;if(13===r||10===r)return!0;if(s>0){const n=t.charCodeAt(i+s-1);if(0!==e.get(n))return!0}return!1}(e,t,n,i,s)}class Hf{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t)return null;if(n=this._searchRegex.exec(e),!n)return null;const i=n.index,s=n[0].length;if(i===this._prevMatchStartIndex&&s===this._prevMatchLength){if(0===s){ur(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=s,!this._wordSeparators||Wf(this._wordSeparators,e,t,i,s))return n}while(n);return null}}class Vf{static computeUnicodeHighlights(e,t,n){const i=n?n.startLineNumber:1,s=n?n.endLineNumber:e.getLineCount(),r=new jf(t),o=r.getCandidateCodePoints();let a;var l;a="allNonBasicAscii"===o?new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):new RegExp("".concat((l=Array.from(o),"[".concat(Hs(l.map((e=>String.fromCodePoint(e))).join("")),"]"))),"g");const c=new Hf(null,a),u=[];let h,d=!1,f=0,g=0,p=0;e:for(let m=i,b=s;m<=b;m++){const t=e.getLineContent(m),n=t.length;c.reset(0);do{if(h=c.next(t),h){let e=h.index,i=h.index+h[0].length;if(e>0){ar(t.charCodeAt(e-1))&&e--}if(i+1<n){ar(t.charCodeAt(i-1))&&i++}const s=t.substring(e,i);let o=je(e+1,We,t,0);o&&o.endColumn<=e+1&&(o=null);const a=r.shouldHighlightNonBasicASCII(s,o?o.word:null);if(0!==a){3===a?f++:2===a?g++:1===a?p++:ma(a);const t=1e3;if(u.length>=t){d=!0;break e}u.push(new xi(m,e+1,m,i+1))}}}while(h)}return{ranges:u,hasMore:d,ambiguousCharacterCount:f,invisibleCharacterCount:g,nonBasicAsciiCharacterCount:p}}static computeUnicodeHighlightReason(e,t){const n=new jf(t);switch(n.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const i=e.codePointAt(0),s=n.ambiguousCharacters.getPrimaryConfusable(i),r=Tr.getLocales().filter((e=>!Tr.getInstance(new Set([...t.allowedLocales,e])).isAmbiguous(i)));return{kind:0,confusableWith:String.fromCodePoint(s),notAmbiguousInLocales:r}}case 1:return{kind:2}}}}class jf{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=Tr.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of Nr.codePoints)Uf(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const n=e.codePointAt(0);if(this.allowedCodePoints.has(n))return 0;if(this.options.nonBasicASCII)return 1;let i=!1,s=!1;if(t)for(const r of t){const e=r.codePointAt(0),t=_r(r);i=i||t,t||this.ambiguousCharacters.isAmbiguous(e)||Nr.isInvisibleCharacter(e)||(s=!0)}return!i&&s?0:this.options.invisibleCharacters&&!Uf(e)&&Nr.isInvisibleCharacter(n)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(n)?3:0}}function Uf(e){return" "===e||"\n"===e||"\t"===e}class qf{constructor(e,t,n){this.changes=e,this.moves=t,this.hitTimeout=n}}class Kf{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}class Gf{static addRange(e,t){let n=0;for(;n<t.length&&t[n].endExclusive<e.start;)n++;let i=n;for(;i<t.length&&t[i].start<=e.endExclusive;)i++;if(n===i)t.splice(n,0,e);else{const s=Math.min(e.start,t[n].start),r=Math.max(e.endExclusive,t[i-1].endExclusive);t.splice(n,i-n,new Gf(s,r))}}static ofLength(e){return new Gf(0,e)}static ofStartAndLength(e,t){return new Gf(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new Wt("Invalid range: ".concat(this.toString()))}get isEmpty(){return this.start===this.endExclusive}delta(e){return new Gf(this.start+e,this.endExclusive+e)}deltaStart(e){return new Gf(this.start+e,this.endExclusive)}deltaEnd(e){return new Gf(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return"[".concat(this.start,", ").concat(this.endExclusive,")")}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new Gf(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(t<=n)return new Gf(t,n)}intersects(e){return Math.max(this.start,e.start)<Math.min(this.endExclusive,e.endExclusive)}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Wt("Invalid clipping range: ".concat(this.toString()));return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Wt("Invalid clipping range: ".concat(this.toString()));return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class Yf{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let n=t;for(;n<this._sortedRanges.length&&this._sortedRanges[n].start<=e.endExclusive;)n++;if(t===n)this._sortedRanges.splice(t,0,e);else{const i=Math.min(e.start,this._sortedRanges[t].start),s=Math.max(e.endExclusive,this._sortedRanges[n-1].endExclusive);this._sortedRanges.splice(t,n-t,new Gf(i,s))}}toString(){return this._sortedRanges.map((e=>e.toString())).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new Yf;for(const n of this._sortedRanges){const i=n.intersect(e);i&&t.addRange(i)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce(((e,t)=>e+t.length),0)}}function Qf(e,t,n){const i=function(e,t){for(let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length-1;n>=0;n--){if(t(e[n]))return n}return-1}(e,t);if(-1!==i)return e[i]}function Xf(e,t){const n=Zf(e,t);return-1===n?void 0:e[n]}function Zf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;for(;n<i;){const s=Math.floor((n+i)/2);t(e[s])?n=s+1:i=s}return n-1}function Jf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;for(;n<i;){const s=Math.floor((n+i)/2);t(e[s])?i=s:n=s+1}return n}class eg{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(eg.assertInvariants){if(this._prevFindLastPredicate)for(const t of this._array)if(this._prevFindLastPredicate(t)&&!e(t))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.");this._prevFindLastPredicate=e}const t=Zf(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,-1===t?void 0:this._array[t]}}function tg(e,t){if(0===e.length)return;let n=e[0];for(let i=1;i<e.length;i++){const s=e[i];t(s,n)>0&&(n=s)}return n}function ng(e,t){if(0===e.length)return-1;let n=0;for(let i=1;i<e.length;i++){t(e[i],e[n])>0&&(n=i)}return n}eg.assertInvariants=!1;class ig{static fromRangeInclusive(e){return new ig(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(0===e.length)return[];let t=new sg(e[0].slice());for(let n=1;n<e.length;n++)t=t.getUnion(new sg(e[n].slice()));return t.ranges}static ofLength(e,t){return new ig(e,e+t)}static deserialize(e){return new ig(e[0],e[1])}constructor(e,t){if(e>t)throw new Wt("startLineNumber ".concat(e," cannot be after endLineNumberExclusive ").concat(t));this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new ig(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new ig(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new ig(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return"[".concat(this.startLineNumber,",").concat(this.endLineNumberExclusive,")")}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=n)return new ig(t,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new xi(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new xi(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Gf(this.startLineNumber-1,this.endLineNumberExclusive-1)}}class sg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(0===e.length)return;const t=Jf(this._normalizedRanges,(t=>t.endLineNumberExclusive>=e.startLineNumber)),n=Zf(this._normalizedRanges,(t=>t.startLineNumber<=e.endLineNumberExclusive))+1;if(t===n)this._normalizedRanges.splice(t,0,e);else if(t===n-1){const n=this._normalizedRanges[t];this._normalizedRanges[t]=n.join(e)}else{const i=this._normalizedRanges[t].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(t,n-t,i)}}contains(e){const t=Xf(this._normalizedRanges,(t=>t.startLineNumber<=e));return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=Xf(this._normalizedRanges,(t=>t.startLineNumber<e.endLineNumberExclusive));return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(0===this._normalizedRanges.length)return e;if(0===e._normalizedRanges.length)return this;const t=[];let n=0,i=0,s=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let r=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){const t=this._normalizedRanges[n],s=e._normalizedRanges[i];t.startLineNumber<s.startLineNumber?(r=t,n++):(r=s,i++)}else n<this._normalizedRanges.length?(r=this._normalizedRanges[n],n++):(r=e._normalizedRanges[i],i++);null===s?s=r:s.endLineNumberExclusive>=r.startLineNumber?s=new ig(s.startLineNumber,Math.max(s.endLineNumberExclusive,r.endLineNumberExclusive)):(t.push(s),s=r)}return null!==s&&t.push(s),new sg(t)}subtractFrom(e){const t=Jf(this._normalizedRanges,(t=>t.endLineNumberExclusive>=e.startLineNumber)),n=Zf(this._normalizedRanges,(t=>t.startLineNumber<=e.endLineNumberExclusive))+1;if(t===n)return new sg([e]);const i=[];let s=e.startLineNumber;for(let r=t;r<n;r++){const e=this._normalizedRanges[r];e.startLineNumber>s&&i.push(new ig(s,e.startLineNumber)),s=e.endLineNumberExclusive}return s<e.endLineNumberExclusive&&i.push(new ig(s,e.endLineNumberExclusive)),new sg(i)}toString(){return this._normalizedRanges.map((e=>e.toString())).join(", ")}getIntersection(e){const t=[];let n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){const s=this._normalizedRanges[n],r=e._normalizedRanges[i],o=s.intersect(r);o&&!o.isEmpty&&t.push(o),s.endLineNumberExclusive<r.endLineNumberExclusive?n++:i++}return new sg(t)}getWithDelta(e){return new sg(this._normalizedRanges.map((t=>t.delta(e))))}}class rg{static inverse(e,t,n){const i=[];let s=1,r=1;for(const a of e){const e=new rg(new ig(s,a.original.startLineNumber),new ig(r,a.modified.startLineNumber));e.modified.isEmpty||i.push(e),s=a.original.endLineNumberExclusive,r=a.modified.endLineNumberExclusive}const o=new rg(new ig(s,t+1),new ig(r,n+1));return o.modified.isEmpty||i.push(o),i}static clip(e,t,n){const i=[];for(const s of e){const e=s.original.intersect(t),r=s.modified.intersect(n);e&&!e.isEmpty&&r&&!r.isEmpty&&i.push(new rg(e,r))}return i}constructor(e,t){this.original=e,this.modified=t}toString(){return"{".concat(this.original.toString(),"->").concat(this.modified.toString(),"}")}flip(){return new rg(this.modified,this.original)}join(e){return new rg(this.original.join(e.original),this.modified.join(e.modified))}}class og extends rg{constructor(e,t,n){super(e,t),this.innerChanges=n}flip(){var e;return new og(this.modified,this.original,null===(e=this.innerChanges)||void 0===e?void 0:e.map((e=>e.flip())))}}class ag{constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return"{".concat(this.originalRange.toString(),"->").concat(this.modifiedRange.toString(),"}")}flip(){return new ag(this.modifiedRange,this.originalRange)}}class lg{computeDiff(e,t,n){var i;const s=new gg(e,t,{maxComputationTime:n.maxComputationTimeMs,shouldIgnoreTrimWhitespace:n.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),r=[];let o=null;for(const a of s.changes){let e,t;e=0===a.originalEndLineNumber?new ig(a.originalStartLineNumber+1,a.originalStartLineNumber+1):new ig(a.originalStartLineNumber,a.originalEndLineNumber+1),t=0===a.modifiedEndLineNumber?new ig(a.modifiedStartLineNumber+1,a.modifiedStartLineNumber+1):new ig(a.modifiedStartLineNumber,a.modifiedEndLineNumber+1);let n=new og(e,t,null===(i=a.charChanges)||void 0===i?void 0:i.map((e=>new ag(new xi(e.originalStartLineNumber,e.originalStartColumn,e.originalEndLineNumber,e.originalEndColumn),new xi(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)))));o&&(o.modified.endLineNumberExclusive!==n.modified.startLineNumber&&o.original.endLineNumberExclusive!==n.original.startLineNumber||(n=new og(o.original.join(n.original),o.modified.join(n.modified),o.innerChanges&&n.innerChanges?o.innerChanges.concat(n.innerChanges):void 0),r.pop())),r.push(n),o=n}return _a((()=>va(r,((e,t)=>t.original.startLineNumber-e.original.endLineNumberExclusive===t.modified.startLineNumber-e.modified.endLineNumberExclusive&&e.original.endLineNumberExclusive<t.original.startLineNumber&&e.modified.endLineNumberExclusive<t.modified.startLineNumber)))),new qf(r,[],s.quitEarly)}}function cg(e,t,n,i){return new hf(e,t,n).ComputeDiff(i)}class ug{constructor(e){const t=[],n=[];for(let i=0,s=e.length;i<s;i++)t[i]=pg(e[i],1),n[i]=mg(e[i],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const i=[],s=[],r=[];let o=0;for(let a=t;a<=n;a++){const t=this.lines[a],l=e?this._startColumns[a]:1,c=e?this._endColumns[a]:t.length+1;for(let e=l;e<c;e++)i[o]=t.charCodeAt(e-1),s[o]=a+1,r[o]=e,o++;!e&&a<n&&(i[o]=10,s[o]=a+1,r[o]=t.length+1,o++)}return new hg(i,s,r)}}class hg{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}toString(){return"["+this._charCodes.map(((e,t)=>(10===e?"\\n":String.fromCharCode(e))+"-(".concat(this._lineNumbers[t],",").concat(this._columns[t],")"))).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return-1===e?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),10===this._charCodes[e]?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return-1===e?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),10===this._charCodes[e]?1:this._columns[e]+1)}}class dg{constructor(e,t,n,i,s,r,o,a){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=i,this.modifiedStartLineNumber=s,this.modifiedStartColumn=r,this.modifiedEndLineNumber=o,this.modifiedEndColumn=a}static createFromDiffChange(e,t,n){const i=t.getStartLineNumber(e.originalStart),s=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),o=t.getEndColumn(e.originalStart+e.originalLength-1),a=n.getStartLineNumber(e.modifiedStart),l=n.getStartColumn(e.modifiedStart),c=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=n.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new dg(i,s,r,o,a,l,c,u)}}class fg{constructor(e,t,n,i,s){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=i,this.charChanges=s}static createFromDiffResult(e,t,n,i,s,r,o){let a,l,c,u,h;if(0===t.originalLength?(a=n.getStartLineNumber(t.originalStart)-1,l=0):(a=n.getStartLineNumber(t.originalStart),l=n.getEndLineNumber(t.originalStart+t.originalLength-1)),0===t.modifiedLength?(c=i.getStartLineNumber(t.modifiedStart)-1,u=0):(c=i.getStartLineNumber(t.modifiedStart),u=i.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&s()){const r=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),a=i.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(r.getElements().length>0&&a.getElements().length>0){let e=cg(r,a,s,!0).changes;o&&(e=function(e){if(e.length<=1)return e;const t=[e[0]];let n=t[0];for(let i=1,s=e.length;i<s;i++){const s=e[i],r=s.originalStart-(n.originalStart+n.originalLength),o=s.modifiedStart-(n.modifiedStart+n.modifiedLength);Math.min(r,o)<3?(n.originalLength=s.originalStart+s.originalLength-n.originalStart,n.modifiedLength=s.modifiedStart+s.modifiedLength-n.modifiedStart):(t.push(s),n=s)}return t}(e)),h=[];for(let t=0,n=e.length;t<n;t++)h.push(dg.createFromDiffChange(e[t],r,a))}}return new fg(a,l,c,u,h)}}class gg{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new ug(e),this.modified=new ug(t),this.continueLineDiff=bg(n.maxComputationTime),this.continueCharDiff=bg(0===n.maxComputationTime?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(1===this.original.lines.length&&0===this.original.lines[0].length)return 1===this.modified.lines.length&&0===this.modified.lines[0].length?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(1===this.modified.lines.length&&0===this.modified.lines[0].length)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=cg(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const e=[];for(let n=0,i=t.length;n<i;n++)e.push(fg.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[n],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:e}}const i=[];let s=0,r=0;for(let o=-1,a=t.length;o<a;o++){const e=o+1<a?t[o+1]:null,n=e?e.originalStart:this.originalLines.length,l=e?e.modifiedStart:this.modifiedLines.length;for(;s<n&&r<l;){const e=this.originalLines[s],t=this.modifiedLines[r];if(e!==t){{let n=pg(e,1),o=pg(t,1);for(;n>1&&o>1;){if(e.charCodeAt(n-2)!==t.charCodeAt(o-2))break;n--,o--}(n>1||o>1)&&this._pushTrimWhitespaceCharChange(i,s+1,1,n,r+1,1,o)}{let n=mg(e,1),o=mg(t,1);const a=e.length+1,l=t.length+1;for(;n<a&&o<l;){if(e.charCodeAt(n-1)!==e.charCodeAt(o-1))break;n++,o++}(n<a||o<l)&&this._pushTrimWhitespaceCharChange(i,s+1,n,a,r+1,o,l)}}s++,r++}e&&(i.push(fg.createFromDiffResult(this.shouldIgnoreTrimWhitespace,e,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),s+=e.originalLength,r+=e.modifiedLength)}return{quitEarly:n,changes:i}}_pushTrimWhitespaceCharChange(e,t,n,i,s,r,o){if(this._mergeTrimWhitespaceCharChange(e,t,n,i,s,r,o))return;let a;this.shouldComputeCharChanges&&(a=[new dg(t,n,t,i,s,r,s,o)]),e.push(new fg(t,t,s,s,a))}_mergeTrimWhitespaceCharChange(e,t,n,i,s,r,o){const a=e.length;if(0===a)return!1;const l=e[a-1];return 0!==l.originalEndLineNumber&&0!==l.modifiedEndLineNumber&&(l.originalEndLineNumber===t&&l.modifiedEndLineNumber===s?(this.shouldComputeCharChanges&&l.charChanges&&l.charChanges.push(new dg(t,n,t,i,s,r,s,o)),!0):l.originalEndLineNumber+1===t&&l.modifiedEndLineNumber+1===s&&(l.originalEndLineNumber=t,l.modifiedEndLineNumber=s,this.shouldComputeCharChanges&&l.charChanges&&l.charChanges.push(new dg(t,n,t,i,s,r,s,o)),!0))}}function pg(e,t){const n=Ks(e);return-1===n?t:n+1}function mg(e,t){const n=Ys(e);return-1===n?t:n+2}function bg(e){if(0===e)return()=>!0;const t=Date.now();return()=>Date.now()-t<e}class _g{static trivial(e,t){return new _g([new vg(Gf.ofLength(e.length),Gf.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new _g([new vg(Gf.ofLength(e.length),Gf.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class vg{static invert(e,t){const n=[];return c(e,((e,i)=>{n.push(vg.fromOffsetPairs(e?e.getEndExclusives():yg.zero,i?i.getStarts():new yg(t,(e?e.seq2Range.endExclusive-e.seq1Range.endExclusive:0)+t)))})),n}static fromOffsetPairs(e,t){return new vg(new Gf(e.offset1,t.offset1),new Gf(e.offset2,t.offset2))}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new vg(this.seq2Range,this.seq1Range)}toString(){return"".concat(this.seq1Range," <-> ").concat(this.seq2Range)}join(e){return new vg(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return 0===e?this:new vg(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return 0===e?this:new vg(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return 0===e?this:new vg(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),n=this.seq2Range.intersect(e.seq2Range);if(t&&n)return new vg(t,n)}getStarts(){return new yg(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new yg(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}class yg{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return"".concat(this.offset1," <-> ").concat(this.offset2)}delta(e){return 0===e?this:new yg(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}}yg.zero=new yg(0,0),yg.max=new yg(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);class Sg{isValid(){return!0}}Sg.instance=new Sg;class wg{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new Wt("timeout must be positive")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}}class kg{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,n){this.array[e+t*this.width]=n}}function Cg(e){return 32===e||9===e}class xg{static getKey(e){let t=this.chrKeys.get(e);return void 0===t&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,n){this.range=e,this.lines=t,this.source=n,this.histogram=[];let i=0;for(let s=e.startLineNumber-1;s<e.endLineNumberExclusive-1;s++){const e=t[s];for(let t=0;t<e.length;t++){i++;const n=e[t],s=xg.getKey(n);this.histogram[s]=(this.histogram[s]||0)+1}i++;const n=xg.getKey("\n");this.histogram[n]=(this.histogram[n]||0)+1}this.totalCount=i}computeSimilarity(e){var t,n;let i=0;const s=Math.max(this.histogram.length,e.histogram.length);for(let r=0;r<s;r++)i+=Math.abs((null!==(t=this.histogram[r])&&void 0!==t?t:0)-(null!==(n=e.histogram[r])&&void 0!==n?n:0));return 1-i/(this.totalCount+e.totalCount)}}xg.chrKeys=new Map;class Eg{compute(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sg.instance,i=arguments.length>3?arguments[3]:void 0;if(0===e.length||0===t.length)return _g.trivial(e,t);const s=new kg(e.length,t.length),r=new kg(e.length,t.length),o=new kg(e.length,t.length);for(let f=0;f<e.length;f++)for(let a=0;a<t.length;a++){if(!n.isValid())return _g.trivialTimedOut(e,t);const l=0===f?0:s.get(f-1,a),c=0===a?0:s.get(f,a-1);let u;e.getElement(f)===t.getElement(a)?(u=0===f||0===a?0:s.get(f-1,a-1),f>0&&a>0&&3===r.get(f-1,a-1)&&(u+=o.get(f-1,a-1)),u+=i?i(f,a):1):u=-1;const h=Math.max(l,c,u);if(h===u){const e=f>0&&a>0?o.get(f-1,a-1):0;o.set(f,a,e+1),r.set(f,a,3)}else h===l?(o.set(f,a,0),r.set(f,a,1)):h===c&&(o.set(f,a,0),r.set(f,a,2));s.set(f,a,h)}const a=[];let l=e.length,c=t.length;function u(e,t){e+1===l&&t+1===c||a.push(new vg(new Gf(e+1,l),new Gf(t+1,c))),l=e,c=t}let h=e.length-1,d=t.length-1;for(;h>=0&&d>=0;)3===r.get(h,d)?(u(h,d),h--,d--):1===r.get(h,d)?h--:d--;return u(-1,-1),a.reverse(),new _g(a,!1)}}class Lg{compute(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sg.instance;if(0===e.length||0===t.length)return _g.trivial(e,t);const i=e,s=t;function r(e,t){for(;e<i.length&&t<s.length&&i.getElement(e)===s.getElement(t);)e++,t++;return e}let o=0;const a=new Ag;a.set(0,r(0,0));const l=new Tg;l.set(0,0===a.get(0)?null:new Dg(null,0,0,a.get(0)));let c=0;e:for(;;){if(o++,!n.isValid())return _g.trivialTimedOut(i,s);const e=-Math.min(o,s.length+o%2),t=Math.min(o,i.length+o%2);for(c=e;c<=t;c+=2){let n=0;const o=c===t?-1:a.get(c+1),u=c===e?-1:a.get(c-1)+1;n++;const h=Math.min(Math.max(o,u),i.length),d=h-c;if(n++,h>i.length||d>s.length)continue;const f=r(h,d);a.set(c,f);const g=h===o?l.get(c+1):l.get(c-1);if(l.set(c,f!==h?new Dg(g,h,d,f-h):g),a.get(c)===i.length&&a.get(c)-c===s.length)break e}}let u=l.get(c);const h=[];let d=i.length,f=s.length;for(;;){const e=u?u.x+u.length:0,t=u?u.y+u.length:0;if(e===d&&t===f||h.push(new vg(new Gf(e,d),new Gf(t,f))),!u)break;d=u.x,f=u.y,u=u.prev}return h.reverse(),new _g(h,!1)}}class Dg{constructor(e,t,n,i){this.prev=e,this.x=t,this.y=n,this.length=i}}class Ag{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if((e=-e-1)>=this.negativeArr.length){const e=this.negativeArr;this.negativeArr=new Int32Array(2*e.length),this.negativeArr.set(e)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const e=this.positiveArr;this.positiveArr=new Int32Array(2*e.length),this.positiveArr.set(e)}this.positiveArr[e]=t}}}class Tg{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}var Ng,Ig;class $g{constructor(e,t){this.uri=e,this.value=t}}class Mg{constructor(e,t){if(this[Ng]="ResourceMap",e instanceof Mg)this.map=new Map(e.map),this.toKey=null!==t&&void 0!==t?t:Mg.defaultToKey;else if(function(e){return Array.isArray(e)}(e)){this.map=new Map,this.toKey=null!==t&&void 0!==t?t:Mg.defaultToKey;for(const[t,n]of e)this.set(t,n)}else this.map=new Map,this.toKey=null!==e&&void 0!==e?e:Mg.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new $g(e,t)),this}get(e){var t;return null===(t=this.map.get(this.toKey(e)))||void 0===t?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){"undefined"!==typeof t&&(e=e.bind(t));for(const[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(Ng=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}}Mg.defaultToKey=e=>e.toString();class Rg{constructor(){this[Ig]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return null===(e=this._head)||void 0===e?void 0:e.value}get last(){var e;return null===(e=this._tail)||void 0===e?void 0:e.value}has(e){return this._map.has(e)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this._map.get(e);if(n)return 0!==t&&this.touch(n,t),n.value}set(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this._map.get(e);if(i)i.value=t,0!==n&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:case 2:default:this.addItemLast(i);break;case 1:this.addItemFirst(i)}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator]:()=>i,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.key,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return i}values(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator]:()=>i,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:n.value,done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator]:()=>i,next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const e={value:[n.key,n.value],done:!1};return n=n.next,e}return{value:void 0,done:!0}}};return i}[(Ig=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(0===e)return void this.clear();let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(this._head||this._tail){if(!this._head)throw new Error("Invalid list");e.next=this._head,this._head.previous=e}else this._tail=e;this._head=e,this._state++}addItemLast(e){if(this._head||this._tail){if(!this._tail)throw new Error("Invalid list");e.previous=this._tail,this._tail.next=e}else this._head=e;this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(1===t||2===t)if(1===t){if(e===this._head)return;const t=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(t.previous=n,n.next=t),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(2===t){if(e===this._tail)return;const t=e.next,n=e.previous;e===this._head?(t.previous=void 0,this._head=t):(t.previous=n,n.next=t),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}toJSON(){const e=[];return this.forEach(((t,n)=>{e.push([n,t])})),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}class Og extends Rg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}class Pg{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,n]of e)this.set(t,n)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return void 0!==t&&(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class Fg{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),0===n.size&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}class Bg{constructor(e,t,n){this.lines=e,this.considerWhitespaceChanges=n,this.elements=[],this.firstCharOffsetByLine=[],this.additionalOffsetByLine=[];let i=!1;t.start>0&&t.endExclusive>=e.length&&(t=new Gf(t.start-1,t.endExclusive),i=!0),this.lineRange=t,this.firstCharOffsetByLine[0]=0;for(let s=this.lineRange.start;s<this.lineRange.endExclusive;s++){let t=e[s],r=0;if(i)r=t.length,t="",i=!1;else if(!n){const e=t.trimStart();r=t.length-e.length,t=e.trimEnd()}this.additionalOffsetByLine.push(r);for(let e=0;e<t.length;e++)this.elements.push(t.charCodeAt(e));s<e.length-1&&(this.elements.push("\n".charCodeAt(0)),this.firstCharOffsetByLine[s-this.lineRange.start+1]=this.elements.length)}this.additionalOffsetByLine.push(0)}toString(){return'Slice: "'.concat(this.text,'"')}get text(){return this.getText(new Gf(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map((e=>String.fromCharCode(e))).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=Vg(e>0?this.elements[e-1]:-1),n=Vg(e<this.elements.length?this.elements[e]:-1);if(7===t&&8===n)return 0;if(8===t)return 150;let i=0;return t!==n&&(i+=10,0===t&&1===n&&(i+=1)),i+=Hg(t),i+=Hg(n),i}translateOffset(e){if(this.lineRange.isEmpty)return new Ci(this.lineRange.start+1,1);const t=Zf(this.firstCharOffsetByLine,(t=>t<=e));return new Ci(this.lineRange.start+t+1,e-this.firstCharOffsetByLine[t]+this.additionalOffsetByLine[t]+1)}translateRange(e){return xi.fromPositions(this.translateOffset(e.start),this.translateOffset(e.endExclusive))}findWordContaining(e){if(e<0||e>=this.elements.length)return;if(!zg(this.elements[e]))return;let t=e;for(;t>0&&zg(this.elements[t-1]);)t--;let n=e;for(;n<this.elements.length&&zg(this.elements[n]);)n++;return new Gf(t,n)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){var t,n;const i=null!==(t=Xf(this.firstCharOffsetByLine,(t=>t<=e.start)))&&void 0!==t?t:0,s=null!==(n=function(e,t){const n=Jf(e,t);return n===e.length?void 0:e[n]}(this.firstCharOffsetByLine,(t=>e.endExclusive<=t)))&&void 0!==n?n:this.elements.length;return new Gf(i,s)}}function zg(e){return e>=97&&e<=122||e>=65&&e<=90||e>=48&&e<=57}const Wg={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function Hg(e){return Wg[e]}function Vg(e){return 10===e?8:13===e?7:Cg(e)?6:e>=97&&e<=122?0:e>=65&&e<=90?1:e>=48&&e<=57?2:-1===e?3:44===e||59===e?5:4}function jg(e,t,n,i,s,r){let{moves:o,excludedChanges:a}=function(e,t,n,i){const s=[],r=e.filter((e=>e.modified.isEmpty&&e.original.length>=3)).map((e=>new xg(e.original,t,e))),o=new Set(e.filter((e=>e.original.isEmpty&&e.modified.length>=3)).map((e=>new xg(e.modified,n,e)))),a=new Set;for(const l of r){let e,t=-1;for(const n of o){const i=l.computeSimilarity(n);i>t&&(t=i,e=n)}if(t>.9&&e&&(o.delete(e),s.push(new rg(l.range,e.range)),a.add(l.source),a.add(e.source)),!i.isValid())return{moves:s,excludedChanges:a}}return{moves:s,excludedChanges:a}}(e,t,n,r);if(!r.isValid())return[];const l=function(e,t,n,i,s,r){const o=[],a=new Fg;for(const f of e)for(let e=f.original.startLineNumber;e<f.original.endLineNumberExclusive-2;e++){const n="".concat(t[e-1],":").concat(t[e+1-1],":").concat(t[e+2-1]);a.add(n,{range:new ig(e,e+3)})}const l=[];e.sort(w((e=>e.modified.startLineNumber),k));for(const f of e){let e=[];for(let t=f.modified.startLineNumber;t<f.modified.endLineNumberExclusive-2;t++){const i="".concat(n[t-1],":").concat(n[t+1-1],":").concat(n[t+2-1]),s=new ig(t,t+3),r=[];a.forEach(i,(t=>{let{range:n}=t;for(const o of e)if(o.originalLineRange.endLineNumberExclusive+1===n.endLineNumberExclusive&&o.modifiedLineRange.endLineNumberExclusive+1===s.endLineNumberExclusive)return o.originalLineRange=new ig(o.originalLineRange.startLineNumber,n.endLineNumberExclusive),o.modifiedLineRange=new ig(o.modifiedLineRange.startLineNumber,s.endLineNumberExclusive),void r.push(o);const i={modifiedLineRange:s,originalLineRange:n};l.push(i),r.push(i)})),e=r}if(!r.isValid())return[]}l.sort((c=w((e=>e.modifiedLineRange.length),k),(e,t)=>-c(e,t)));var c;const u=new sg,h=new sg;for(const f of l){const e=f.modifiedLineRange.startLineNumber-f.originalLineRange.startLineNumber,t=u.subtractFrom(f.modifiedLineRange),n=h.subtractFrom(f.originalLineRange).getWithDelta(e),i=t.getIntersection(n);for(const s of i.ranges){if(s.length<3)continue;const t=s,n=s.delta(-e);o.push(new rg(n,t)),u.addRange(t),h.addRange(n)}}o.sort(w((e=>e.original.startLineNumber),k));const d=new eg(e);for(let f=0;f<o.length;f++){const t=o[f],n=d.findLastMonotonous((e=>e.original.startLineNumber<=t.original.startLineNumber)),a=Xf(e,(e=>e.modified.startLineNumber<=t.modified.startLineNumber)),l=Math.max(t.original.startLineNumber-n.original.startLineNumber,t.modified.startLineNumber-a.modified.startLineNumber),c=d.findLastMonotonous((e=>e.original.startLineNumber<t.original.endLineNumberExclusive)),g=Xf(e,(e=>e.modified.startLineNumber<t.modified.endLineNumberExclusive)),p=Math.max(c.original.endLineNumberExclusive-t.original.endLineNumberExclusive,g.modified.endLineNumberExclusive-t.modified.endLineNumberExclusive);let m,b;for(m=0;m<l;m++){const e=t.original.startLineNumber-m-1,n=t.modified.startLineNumber-m-1;if(e>i.length||n>s.length)break;if(u.contains(n)||h.contains(e))break;if(!Ug(i[e-1],s[n-1],r))break}for(m>0&&(h.addRange(new ig(t.original.startLineNumber-m,t.original.startLineNumber)),u.addRange(new ig(t.modified.startLineNumber-m,t.modified.startLineNumber))),b=0;b<p;b++){const e=t.original.endLineNumberExclusive+b,n=t.modified.endLineNumberExclusive+b;if(e>i.length||n>s.length)break;if(u.contains(n)||h.contains(e))break;if(!Ug(i[e-1],s[n-1],r))break}b>0&&(h.addRange(new ig(t.original.endLineNumberExclusive,t.original.endLineNumberExclusive+b)),u.addRange(new ig(t.modified.endLineNumberExclusive,t.modified.endLineNumberExclusive+b))),(m>0||b>0)&&(o[f]=new rg(new ig(t.original.startLineNumber-m,t.original.endLineNumberExclusive+b),new ig(t.modified.startLineNumber-m,t.modified.endLineNumberExclusive+b)))}return o}(e.filter((e=>!a.has(e))),i,s,t,n,r);return v(o,l),o=function(e){if(0===e.length)return e;e.sort(w((e=>e.original.startLineNumber),k));const t=[e[0]];for(let n=1;n<e.length;n++){const i=t[t.length-1],s=e[n],r=s.original.startLineNumber-i.original.endLineNumberExclusive,o=s.modified.startLineNumber-i.modified.endLineNumberExclusive;r>=0&&o>=0&&r+o<=2?t[t.length-1]=i.join(s):t.push(s)}return t}(o),o=o.filter((e=>{const n=e.original.toOffsetRange().slice(t).map((e=>e.trim()));return n.join("\n").length>=15&&function(e,t){let n=0;for(const i of e)t(i)&&n++;return n}(n,(e=>e.length>=2))>=2})),o=function(e,t){const n=new eg(e);return t=t.filter((t=>(n.findLastMonotonous((e=>e.original.startLineNumber<t.original.endLineNumberExclusive))||new rg(new ig(1,1),new ig(1,1)))!==Xf(e,(e=>e.modified.startLineNumber<t.modified.endLineNumberExclusive)))),t}(e,o),o}function Ug(e,t,n){if(e.trim()===t.trim())return!0;if(e.length>300&&t.length>300)return!1;const i=(new Lg).compute(new Bg([e],new Gf(0,1),!1),new Bg([t],new Gf(0,1),!1),n);let s=0;const r=vg.invert(i.diffs,e.length);for(const a of r)a.seq1Range.forEach((t=>{Cg(e.charCodeAt(t))||s++}));const o=function(t){let n=0;for(let i=0;i<e.length;i++)Cg(t.charCodeAt(i))||n++;return n}(e.length>t.length?e:t);return s/o>.6&&o>10}function qg(e,t,n){let i=n;return i=Kg(e,t,i),i=Kg(e,t,i),i=function(e,t,n){if(!e.getBoundaryScore||!t.getBoundaryScore)return n;for(let i=0;i<n.length;i++){const s=i>0?n[i-1]:void 0,r=n[i],o=i+1<n.length?n[i+1]:void 0,a=new Gf(s?s.seq1Range.endExclusive+1:0,o?o.seq1Range.start-1:e.length),l=new Gf(s?s.seq2Range.endExclusive+1:0,o?o.seq2Range.start-1:t.length);r.seq1Range.isEmpty?n[i]=Gg(r,e,t,a,l):r.seq2Range.isEmpty&&(n[i]=Gg(r.swap(),t,e,l,a).swap())}return n}(e,t,i),i}function Kg(e,t,n){if(0===n.length)return n;const i=[];i.push(n[0]);for(let r=1;r<n.length;r++){const s=i[i.length-1];let o=n[r];if(o.seq1Range.isEmpty||o.seq2Range.isEmpty){const n=o.seq1Range.start-s.seq1Range.endExclusive;let r;for(r=1;r<=n&&(e.getElement(o.seq1Range.start-r)===e.getElement(o.seq1Range.endExclusive-r)&&t.getElement(o.seq2Range.start-r)===t.getElement(o.seq2Range.endExclusive-r));r++);if(r--,r===n){i[i.length-1]=new vg(new Gf(s.seq1Range.start,o.seq1Range.endExclusive-n),new Gf(s.seq2Range.start,o.seq2Range.endExclusive-n));continue}o=o.delta(-r)}i.push(o)}const s=[];for(let r=0;r<i.length-1;r++){const n=i[r+1];let o=i[r];if(o.seq1Range.isEmpty||o.seq2Range.isEmpty){const s=n.seq1Range.start-o.seq1Range.endExclusive;let a;for(a=0;a<s&&(e.isStronglyEqual(o.seq1Range.start+a,o.seq1Range.endExclusive+a)&&t.isStronglyEqual(o.seq2Range.start+a,o.seq2Range.endExclusive+a));a++);if(a===s){i[r+1]=new vg(new Gf(o.seq1Range.start+s,n.seq1Range.endExclusive),new Gf(o.seq2Range.start+s,n.seq2Range.endExclusive));continue}a>0&&(o=o.delta(a))}s.push(o)}return i.length>0&&s.push(i[i.length-1]),s}function Gg(e,t,n,i,s){let r=1;for(;e.seq1Range.start-r>=i.start&&e.seq2Range.start-r>=s.start&&n.isStronglyEqual(e.seq2Range.start-r,e.seq2Range.endExclusive-r)&&r<100;)r++;r--;let o=0;for(;e.seq1Range.start+o<i.endExclusive&&e.seq2Range.endExclusive+o<s.endExclusive&&n.isStronglyEqual(e.seq2Range.start+o,e.seq2Range.endExclusive+o)&&o<100;)o++;if(0===r&&0===o)return e;let a=0,l=-1;for(let c=-r;c<=o;c++){const i=e.seq2Range.start+c,s=e.seq2Range.endExclusive+c,r=e.seq1Range.start+c,o=t.getBoundaryScore(r)+n.getBoundaryScore(i)+n.getBoundaryScore(s);o>l&&(l=o,a=c)}return e.delta(a)}class Yg{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){return 1e3-((0===e?0:Qg(this.lines[e-1]))+(e===this.lines.length?0:Qg(this.lines[e])))}getText(e){return this.lines.slice(e.start,e.endExclusive).join("\n")}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function Qg(e){let t=0;for(;t<e.length&&(32===e.charCodeAt(t)||9===e.charCodeAt(t));)t++;return t}class Xg{constructor(){this.dynamicProgrammingDiffing=new Eg,this.myersDiffingAlgorithm=new Lg}computeDiff(e,t,n){if(e.length<=1&&a(e,t,((e,t)=>e===t)))return new qf([],[],!1);if(1===e.length&&0===e[0].length||1===t.length&&0===t[0].length)return new qf([new og(new ig(1,e.length+1),new ig(1,t.length+1),[new ag(new xi(1,1,e.length,e[0].length+1),new xi(1,1,t.length,t[0].length+1))])],[],!1);const i=0===n.maxComputationTimeMs?Sg.instance:new wg(n.maxComputationTimeMs),s=!n.ignoreTrimWhitespace,r=new Map;function o(e){let t=r.get(e);return void 0===t&&(t=r.size,r.set(e,t)),t}const l=e.map((e=>o(e.trim()))),c=t.map((e=>o(e.trim()))),u=new Yg(l,e),h=new Yg(c,t),d=(()=>u.length+h.length<1700?this.dynamicProgrammingDiffing.compute(u,h,i,((n,i)=>e[n]===t[i]?0===t[i].length?.1:1+Math.log(1+t[i].length):.99)):this.myersDiffingAlgorithm.compute(u,h))();let f=d.diffs,g=d.hitTimeout;f=qg(u,h,f),f=function(e,t,n){let i=n;if(0===i.length)return i;let s,r=0;do{s=!1;const o=[i[0]];for(let a=1;a<i.length;a++){const l=i[a],c=o[o.length-1];function u(t,n){const i=new Gf(c.seq1Range.endExclusive,l.seq1Range.start);return e.getText(i).replace(/\s/g,"").length<=4&&(t.seq1Range.length+t.seq2Range.length>5||n.seq1Range.length+n.seq2Range.length>5)}u(c,l)?(s=!0,o[o.length-1]=o[o.length-1].join(l)):o.push(l)}i=o}while(r++<10&&s);return i}(u,0,f);const p=[],m=n=>{if(s)for(let r=0;r<n;r++){const n=b+r,o=_+r;if(e[n]!==t[o]){const r=this.refineDiff(e,t,new vg(new Gf(n,n+1),new Gf(o,o+1)),i,s);for(const e of r.mappings)p.push(e);r.hitTimeout&&(g=!0)}}};let b=0,_=0;for(const a of f){_a((()=>a.seq1Range.start-b===a.seq2Range.start-_));m(a.seq1Range.start-b),b=a.seq1Range.endExclusive,_=a.seq2Range.endExclusive;const n=this.refineDiff(e,t,a,i,s);n.hitTimeout&&(g=!0);for(const e of n.mappings)p.push(e)}m(e.length-b);const v=Zg(p,e,t);let y=[];return n.computeMoves&&(y=this.computeMoves(v,e,t,l,c,i,s)),_a((()=>{function n(e,t){if(e.lineNumber<1||e.lineNumber>t.length)return!1;const n=t[e.lineNumber-1];return!(e.column<1||e.column>n.length+1)}function i(e,t){return!(e.startLineNumber<1||e.startLineNumber>t.length+1)&&!(e.endLineNumberExclusive<1||e.endLineNumberExclusive>t.length+1)}for(const s of v){if(!s.innerChanges)return!1;for(const i of s.innerChanges){if(!(n(i.modifiedRange.getStartPosition(),t)&&n(i.modifiedRange.getEndPosition(),t)&&n(i.originalRange.getStartPosition(),e)&&n(i.originalRange.getEndPosition(),e)))return!1}if(!i(s.modified,t)||!i(s.original,e))return!1}return!0})),new qf(v,y,g)}computeMoves(e,t,n,i,s,r,o){return jg(e,t,n,i,s,r).map((e=>{const i=Zg(this.refineDiff(t,n,new vg(e.original.toOffsetRange(),e.modified.toOffsetRange()),r,o).mappings,t,n,!0);return new Kf(e,i)}))}refineDiff(e,t,n,i,s){const r=new Bg(e,n.seq1Range,s),o=new Bg(t,n.seq2Range,s),a=r.length+o.length<500?this.dynamicProgrammingDiffing.compute(r,o,i):this.myersDiffingAlgorithm.compute(r,o,i);let l=a.diffs;l=qg(r,o,l),l=function(e,t,n){const i=vg.invert(n,e.length),s=[];let r=new yg(0,0);function o(n,o){if(n.offset1<r.offset1||n.offset2<r.offset2)return;const a=e.findWordContaining(n.offset1),l=t.findWordContaining(n.offset2);if(!a||!l)return;let c=new vg(a,l);const u=c.intersect(o);let h=u.seq1Range.length,d=u.seq2Range.length;for(;i.length>0;){const n=i[0];if(!n.seq1Range.intersects(a)&&!n.seq2Range.intersects(l))break;const s=e.findWordContaining(n.seq1Range.start),r=t.findWordContaining(n.seq2Range.start),o=new vg(s,r),u=o.intersect(n);if(h+=u.seq1Range.length,d+=u.seq2Range.length,c=c.join(o),!(c.seq1Range.endExclusive>=n.seq1Range.endExclusive))break;i.shift()}h+d<2*(c.seq1Range.length+c.seq2Range.length)/3&&s.push(c),r=c.getEndExclusives()}for(;i.length>0;){const e=i.shift();e.seq1Range.isEmpty||(o(e.getStarts(),e),o(e.getEndExclusives().delta(-1),e))}return function(e,t){const n=[];for(;e.length>0||t.length>0;){const i=e[0],s=t[0];let r;r=i&&(!s||i.seq1Range.start<s.seq1Range.start)?e.shift():t.shift(),n.length>0&&n[n.length-1].seq1Range.endExclusive>=r.seq1Range.start?n[n.length-1]=n[n.length-1].join(r):n.push(r)}return n}(n,s)}(r,o,l),l=function(e,t,n){const i=[];for(const s of n){const e=i[i.length-1];e&&(s.seq1Range.start-e.seq1Range.endExclusive<=2||s.seq2Range.start-e.seq2Range.endExclusive<=2)?i[i.length-1]=new vg(e.seq1Range.join(s.seq1Range),e.seq2Range.join(s.seq2Range)):i.push(s)}return i}(0,0,l),l=function(e,t,n){let i=n;if(0===i.length)return i;let s,r=0;do{s=!1;const a=[i[0]];for(let l=1;l<i.length;l++){const c=i[l],u=a[a.length-1];function h(n,i){const s=new Gf(u.seq1Range.endExclusive,c.seq1Range.start);if(e.countLinesIn(s)>5||s.length>500)return!1;const r=e.getText(s).trim();if(r.length>20||r.split(/\r\n|\r|\n/).length>1)return!1;const o=e.countLinesIn(n.seq1Range),a=n.seq1Range.length,l=t.countLinesIn(n.seq2Range),h=n.seq2Range.length,d=e.countLinesIn(i.seq1Range),f=i.seq1Range.length,g=t.countLinesIn(i.seq2Range),p=i.seq2Range.length;function m(e){return Math.min(e,130)}return Math.pow(Math.pow(m(40*o+a),1.5)+Math.pow(m(40*l+h),1.5),1.5)+Math.pow(Math.pow(m(40*d+f),1.5)+Math.pow(m(40*g+p),1.5),1.5)>74184.96480721243}h(u,c)?(s=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}i=a}while(r++<10&&s);const o=[];return function(e,t){for(let n=0;n<e.length;n++)t(0===n?void 0:e[n-1],e[n],n+1===e.length?void 0:e[n+1])}(i,((t,n,i)=>{let s=n;function r(e){return e.length>0&&e.trim().length<=3&&n.seq1Range.length+n.seq2Range.length>100}const a=e.extendToFullLines(n.seq1Range),l=e.getText(new Gf(a.start,n.seq1Range.start));r(l)&&(s=s.deltaStart(-l.length));const c=e.getText(new Gf(n.seq1Range.endExclusive,a.endExclusive));r(c)&&(s=s.deltaEnd(c.length));const u=vg.fromOffsetPairs(t?t.getEndExclusives():yg.zero,i?i.getStarts():yg.max),h=s.intersect(u);o.length>0&&h.getStarts().equals(o[o.length-1].getEndExclusives())?o[o.length-1]=o[o.length-1].join(h):o.push(h)})),o}(r,o,l);return{mappings:l.map((e=>new ag(r.translateRange(e.seq1Range),o.translateRange(e.seq2Range)))),hitTimeout:a.hitTimeout}}}function Zg(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=[];for(const r of l(e.map((e=>function(e,t,n){let i=0,s=0;1===e.modifiedRange.endColumn&&1===e.originalRange.endColumn&&e.originalRange.startLineNumber+i<=e.originalRange.endLineNumber&&e.modifiedRange.startLineNumber+i<=e.modifiedRange.endLineNumber&&(s=-1);e.modifiedRange.startColumn-1>=n[e.modifiedRange.startLineNumber-1].length&&e.originalRange.startColumn-1>=t[e.originalRange.startLineNumber-1].length&&e.originalRange.startLineNumber<=e.originalRange.endLineNumber+s&&e.modifiedRange.startLineNumber<=e.modifiedRange.endLineNumber+s&&(i=1);const r=new ig(e.originalRange.startLineNumber+i,e.originalRange.endLineNumber+1+s),o=new ig(e.modifiedRange.startLineNumber+i,e.modifiedRange.endLineNumber+1+s);return new og(r,o,[e])}(e,t,n))),((e,t)=>e.original.overlapOrTouch(t.original)||e.modified.overlapOrTouch(t.modified)))){const e=r[0],t=r[r.length-1];s.push(new og(e.original.join(t.original),e.modified.join(t.modified),r.map((e=>e.innerChanges[0]))))}return _a((()=>!(!i&&s.length>0&&s[0].original.startLineNumber!==s[0].modified.startLineNumber)&&va(s,((e,t)=>t.original.startLineNumber-e.original.endLineNumberExclusive===t.modified.startLineNumber-e.modified.endLineNumberExclusive&&e.original.endLineNumberExclusive<t.original.startLineNumber&&e.modified.endLineNumberExclusive<t.modified.startLineNumber)))),s}const Jg=()=>new lg,ep=()=>new Xg;function tp(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}class np{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this._rgbaBrand=void 0,this.r=0|Math.min(255,Math.max(0,e)),this.g=0|Math.min(255,Math.max(0,t)),this.b=0|Math.min(255,Math.max(0,n)),this.a=tp(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class ip{constructor(e,t,n,i){this._hslaBrand=void 0,this.h=0|Math.max(Math.min(360,e),0),this.s=tp(Math.max(Math.min(1,t),0),3),this.l=tp(Math.max(Math.min(1,n),0),3),this.a=tp(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=e.a,r=Math.max(t,n,i),o=Math.min(t,n,i);let a=0,l=0;const c=(o+r)/2,u=r-o;if(u>0){switch(l=Math.min(c<=.5?u/(2*c):u/(2-2*c),1),r){case t:a=(n-i)/u+(n<i?6:0);break;case n:a=(i-t)/u+2;break;case i:a=(t-n)/u+4}a*=60,a=Math.round(a)}return new ip(a,l,c,s)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:i,a:s}=e;let r,o,a;if(0===n)r=o=a=i;else{const e=i<.5?i*(1+n):i+n-i*n,s=2*i-e;r=ip._hue2rgb(s,e,t+1/3),o=ip._hue2rgb(s,e,t),a=ip._hue2rgb(s,e,t-1/3)}return new np(Math.round(255*r),Math.round(255*o),Math.round(255*a),s)}}class sp{constructor(e,t,n,i){this._hsvaBrand=void 0,this.h=0|Math.max(Math.min(360,e),0),this.s=tp(Math.max(Math.min(1,t),0),3),this.v=tp(Math.max(Math.min(1,n),0),3),this.a=tp(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,s=Math.max(t,n,i),r=s-Math.min(t,n,i),o=0===s?0:r/s;let a;return a=0===r?0:s===t?((n-i)/r%6+6)%6:s===n?(i-t)/r+2:(t-n)/r+4,new sp(Math.round(60*a),o,s,e.a)}static toRGBA(e){const{h:t,s:n,v:i,a:s}=e,r=i*n,o=r*(1-Math.abs(t/60%2-1)),a=i-r;let[l,c,u]=[0,0,0];return t<60?(l=r,c=o):t<120?(l=o,c=r):t<180?(c=r,u=o):t<240?(c=o,u=r):t<300?(l=o,u=r):t<=360&&(l=r,u=o),l=Math.round(255*(l+a)),c=Math.round(255*(c+a)),u=Math.round(255*(u+a)),new np(l,c,u,s)}}class rp{static fromHex(e){return rp.Format.CSS.parseHex(e)||rp.red}static equals(e,t){return!e&&!t||!(!e||!t)&&e.equals(t)}get hsla(){return this._hsla?this._hsla:ip.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:sp.fromRGBA(this.rgba)}constructor(e){if(!e)throw new Error("Color needs a value");if(e instanceof np)this.rgba=e;else if(e instanceof ip)this._hsla=e,this.rgba=ip.toRGBA(e);else{if(!(e instanceof sp))throw new Error("Invalid color ctor argument");this._hsva=e,this.rgba=sp.toRGBA(e)}}equals(e){return!!e&&np.equals(this.rgba,e.rgba)&&ip.equals(this.hsla,e.hsla)&&sp.equals(this.hsva,e.hsva)}getRelativeLuminance(){return tp(.2126*rp._relativeLuminanceForComponent(this.rgba.r)+.7152*rp._relativeLuminanceForComponent(this.rgba.g)+.0722*rp._relativeLuminanceForComponent(this.rgba.b),4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(299*this.rgba.r+587*this.rgba.g+114*this.rgba.b)/1e3>=128}isLighterThan(e){return this.getRelativeLuminance()>e.getRelativeLuminance()}isDarkerThan(e){return this.getRelativeLuminance()<e.getRelativeLuminance()}lighten(e){return new rp(new ip(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new rp(new ip(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:i,a:s}=this.rgba;return new rp(new np(t,n,i,s*e))}isTransparent(){return 0===this.rgba.a}isOpaque(){return 1===this.rgba.a}opposite(){return new rp(new np(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||1!==e.rgba.a)return this;const{r:t,g:n,b:i,a:s}=this.rgba;return new rp(new np(e.rgba.r-s*(e.rgba.r-t),e.rgba.g-s*(e.rgba.g-n),e.rgba.b-s*(e.rgba.b-i),1))}toString(){return this._toString||(this._toString=rp.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),s=t.getRelativeLuminance();return n=n*(s-i)/s,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const i=e.getRelativeLuminance();return n=n*(i-t.getRelativeLuminance())/i,e.darken(n)}}function op(e){const t=[];for(const n of e){const e=Number(n);(e||0===e&&""!==n.replace(/\s/g,""))&&t.push(e)}return t}function ap(e,t,n,i){return{red:e/255,blue:n/255,green:t/255,alpha:i}}function lp(e,t){const n=t.index,i=t[0].length;if(!n)return;const s=e.positionAt(n);return{startLineNumber:s.lineNumber,startColumn:s.column,endLineNumber:s.lineNumber,endColumn:s.column+i}}function cp(e,t){if(!e)return;const n=rp.Format.CSS.parseHex(t);return n?{range:e,color:ap(n.rgba.r,n.rgba.g,n.rgba.b,n.rgba.a)}:void 0}function up(e,t,n){if(!e||1!==t.length)return;const i=op(t[0].values());return{range:e,color:ap(i[0],i[1],i[2],n?i[3]:1)}}function hp(e,t,n){if(!e||1!==t.length)return;const i=op(t[0].values()),s=new rp(new ip(i[0],i[1]/100,i[2]/100,n?i[3]:1));return{range:e,color:ap(s.rgba.r,s.rgba.g,s.rgba.b,s.rgba.a)}}function dp(e,t){return"string"===typeof e?[...e.matchAll(t)]:e.findMatches(t)}function fp(e){return e&&"function"===typeof e.getValue&&"function"===typeof e.positionAt?function(e){const t=[],n=dp(e,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(n.length>0)for(const i of n){const n=i.filter((e=>void 0!==e)),s=n[1],r=n[2];if(!r)continue;let o;if("rgb"===s){const t=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;o=up(lp(e,i),dp(r,t),!1)}else if("rgba"===s){const t=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;o=up(lp(e,i),dp(r,t),!0)}else if("hsl"===s){const t=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;o=hp(lp(e,i),dp(r,t),!1)}else if("hsla"===s){const t=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;o=hp(lp(e,i),dp(r,t),!0)}else"#"===s&&(o=cp(lp(e,i),s+r));o&&t.push(o)}return t}(e):[]}rp.white=new rp(new np(255,255,255,1)),rp.black=new rp(new np(0,0,0,1)),rp.red=new rp(new np(255,0,0,1)),rp.blue=new rp(new np(0,0,255,1)),rp.green=new rp(new np(0,255,0,1)),rp.cyan=new rp(new np(0,255,255,1)),rp.lightgrey=new rp(new np(211,211,211,1)),rp.transparent=new rp(new np(0,0,0,0)),function(e){let t;!function(t){let n;!function(t){function n(e){const t=e.toString(16);return 2!==t.length?"0"+t:t}function i(e){switch(e){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:case 65:return 10;case 98:case 66:return 11;case 99:case 67:return 12;case 100:case 68:return 13;case 101:case 69:return 14;case 102:case 70:return 15}return 0}t.formatRGB=function(t){return 1===t.rgba.a?"rgb(".concat(t.rgba.r,", ").concat(t.rgba.g,", ").concat(t.rgba.b,")"):e.Format.CSS.formatRGBA(t)},t.formatRGBA=function(e){return"rgba(".concat(e.rgba.r,", ").concat(e.rgba.g,", ").concat(e.rgba.b,", ").concat(+e.rgba.a.toFixed(2),")")},t.formatHSL=function(t){return 1===t.hsla.a?"hsl(".concat(t.hsla.h,", ").concat((100*t.hsla.s).toFixed(2),"%, ").concat((100*t.hsla.l).toFixed(2),"%)"):e.Format.CSS.formatHSLA(t)},t.formatHSLA=function(e){return"hsla(".concat(e.hsla.h,", ").concat((100*e.hsla.s).toFixed(2),"%, ").concat((100*e.hsla.l).toFixed(2),"%, ").concat(e.hsla.a.toFixed(2),")")},t.formatHex=function(e){return"#".concat(n(e.rgba.r)).concat(n(e.rgba.g)).concat(n(e.rgba.b))},t.formatHexA=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&1===t.rgba.a?e.Format.CSS.formatHex(t):"#".concat(n(t.rgba.r)).concat(n(t.rgba.g)).concat(n(t.rgba.b)).concat(n(Math.round(255*t.rgba.a)))},t.format=function(t){return t.isOpaque()?e.Format.CSS.formatHex(t):e.Format.CSS.formatRGBA(t)},t.parseHex=function(t){const n=t.length;if(0===n)return null;if(35!==t.charCodeAt(0))return null;if(7===n){const n=16*i(t.charCodeAt(1))+i(t.charCodeAt(2)),s=16*i(t.charCodeAt(3))+i(t.charCodeAt(4)),r=16*i(t.charCodeAt(5))+i(t.charCodeAt(6));return new e(new np(n,s,r,1))}if(9===n){const n=16*i(t.charCodeAt(1))+i(t.charCodeAt(2)),s=16*i(t.charCodeAt(3))+i(t.charCodeAt(4)),r=16*i(t.charCodeAt(5))+i(t.charCodeAt(6)),o=16*i(t.charCodeAt(7))+i(t.charCodeAt(8));return new e(new np(n,s,r,o/255))}if(4===n){const n=i(t.charCodeAt(1)),s=i(t.charCodeAt(2)),r=i(t.charCodeAt(3));return new e(new np(16*n+n,16*s+s,16*r+r))}if(5===n){const n=i(t.charCodeAt(1)),s=i(t.charCodeAt(2)),r=i(t.charCodeAt(3)),o=i(t.charCodeAt(4));return new e(new np(16*n+n,16*s+s,16*r+r,(16*o+o)/255))}return null}}(n=t.CSS||(t.CSS={}))}(t=e.Format||(e.Format={}))}(rp||(rp={}));class gp extends bf{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let n=0;n<this._lines.length;n++){const i=this._lines[n],s=this.offsetAt(new Ci(n+1,1)),r=i.matchAll(e);for(const e of r)(e.index||0===e.index)&&(e.index=e.index+s),t.push(e)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const n=je(e.column,He(t),this._lines[e.lineNumber-1],0);return n?new xi(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let i=0,s="",r=0,o=[];return{*[Symbol.iterator](){for(;;)if(r<o.length){const e=s.substring(o[r].start,o[r].end);r+=1,yield e}else{if(!(i<t.length))break;s=t[i],o=n(s,e),r=0,i+=1}}}}getLineWords(e,t){const n=this._lines[e-1],i=this._wordenize(n,t),s=[];for(const r of i)s.push({word:n.substring(r.start,r.end),startColumn:r.start+1,endColumn:r.end+1});return s}_wordenize(e,t){const n=[];let i;for(t.lastIndex=0;(i=t.exec(e))&&0!==i[0].length;)n.push({start:i.index,end:i.index+i[0].length});return n}getValueInRange(e){if((e=this._validateRange(e)).startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,n=e.startLineNumber-1,i=e.endLineNumber-1,s=[];s.push(this._lines[n].substring(e.startColumn-1));for(let r=n+1;r<i;r++)s.push(this._lines[r]);return s.push(this._lines[i].substring(0,e.endColumn-1)),s.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!Ci.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,i=!1;if(t<1)t=1,n=1,i=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,i=!0;else{const e=this._lines[t-1].length+1;n<1?(n=1,i=!0):n>e&&(n=e,i=!0)}return i?{lineNumber:t,column:n}:e}}class pp{constructor(e,t){this._host=e,this._models=Object.create(null),this._foreignModuleFactory=t,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(e){return this._models[e]}_getModels(){const e=[];return Object.keys(this._models).forEach((t=>e.push(this._models[t]))),e}acceptNewModel(e){this._models[e.url]=new gp(fi.parse(e.url),e.lines,e.EOL,e.versionId)}acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}acceptRemovedModel(e){this._models[e]&&delete this._models[e]}async computeUnicodeHighlights(e,t,n){const i=this._getModel(e);return i?Vf.computeUnicodeHighlights(i,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async computeDiff(e,t,n,i){const s=this._getModel(e),r=this._getModel(t);if(!s||!r)return null;return pp.computeDiff(s,r,n,i)}static computeDiff(e,t,n,i){const s="advanced"===i?ep():Jg(),r=e.getLinesContent(),o=t.getLinesContent(),a=s.computeDiff(r,o,n);function l(e){return e.map((e=>{var t;return[e.original.startLineNumber,e.original.endLineNumberExclusive,e.modified.startLineNumber,e.modified.endLineNumberExclusive,null===(t=e.innerChanges)||void 0===t?void 0:t.map((e=>[e.originalRange.startLineNumber,e.originalRange.startColumn,e.originalRange.endLineNumber,e.originalRange.endColumn,e.modifiedRange.startLineNumber,e.modifiedRange.startColumn,e.modifiedRange.endLineNumber,e.modifiedRange.endColumn]))]}))}return{identical:!(a.changes.length>0)&&this._modelsAreIdentical(e,t),quitEarly:a.hitTimeout,changes:l(a.changes),moves:a.moves.map((e=>[e.lineRangeMapping.original.startLineNumber,e.lineRangeMapping.original.endLineNumberExclusive,e.lineRangeMapping.modified.startLineNumber,e.lineRangeMapping.modified.endLineNumberExclusive,l(e.changes)]))}}static _modelsAreIdentical(e,t){const n=e.getLineCount();if(n!==t.getLineCount())return!1;for(let i=1;i<=n;i++){if(e.getLineContent(i)!==t.getLineContent(i))return!1}return!0}async computeMoreMinimalEdits(e,t,n){const i=this._getModel(e);if(!i)return t;const s=[];let r;t=t.slice(0).sort(((e,t)=>{if(e.range&&t.range)return xi.compareRangesUsingStarts(e.range,t.range);return(e.range?0:1)-(t.range?0:1)}));let o=0;for(let a=1;a<t.length;a++)xi.getEndPosition(t[o].range).equals(xi.getStartPosition(t[a].range))?(t[o].range=xi.fromPositions(xi.getStartPosition(t[o].range),xi.getEndPosition(t[a].range)),t[o].text+=t[a].text):(o++,t[o]=t[a]);t.length=o+1;for(let{range:a,text:l,eol:c}of t){if("number"===typeof c&&(r=c),xi.isEmpty(a)&&!l)continue;const e=i.getValueInRange(a);if(l=l.replace(/\r\n|\n|\r/g,i.eol),e===l)continue;if(Math.max(l.length,e.length)>pp._diffLimit){s.push({range:a,text:l});continue}const t=af(e,l,n),o=i.offsetAt(xi.lift(a).getStartPosition());for(const n of t){const e=i.positionAt(o+n.originalStart),t=i.positionAt(o+n.originalStart+n.originalLength),r={text:l.substr(n.modifiedStart,n.modifiedLength),range:{startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:t.lineNumber,endColumn:t.column}};i.getValueInRange(r.range)!==r.text&&s.push(r)}}return"number"===typeof r&&s.push({eol:r,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),s}async computeLinks(e){const t=this._getModel(e);return t?function(e){return e&&"function"===typeof e.getLineCount&&"function"===typeof e.getLineContent?kf.computeLinks(e):[]}(t):null}async computeDefaultDocumentColors(e){const t=this._getModel(e);return t?fp(t):null}async textualSuggest(e,t,n,i){const s=new sn,r=new RegExp(n,i),o=new Set;e:for(const a of e){const e=this._getModel(a);if(e)for(const n of e.words(r))if(n!==t&&isNaN(Number(n))&&(o.add(n),o.size>pp._suggestionsLimit))break e}return{words:Array.from(o),duration:s.elapsed()}}async computeWordRanges(e,t,n,i){const s=this._getModel(e);if(!s)return Object.create(null);const r=new RegExp(n,i),o=Object.create(null);for(let a=t.startLineNumber;a<t.endLineNumber;a++){const e=s.getLineWords(a,r);for(const t of e){if(!isNaN(Number(t.word)))continue;let e=o[t.word];e||(e=[],o[t.word]=e),e.push({startLineNumber:a,startColumn:t.startColumn,endLineNumber:a,endColumn:t.endColumn})}}return o}async navigateValueSet(e,t,n,i,s){const r=this._getModel(e);if(!r)return null;const o=new RegExp(i,s);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const a=r.getValueInRange(t),l=r.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},o);if(!l)return null;const c=r.getValueInRange(l);return Cf.INSTANCE.navigateValueSet(t,a,l,c,n)}loadForeignModule(e,t,n){const i=function(e,t){const n=e=>function(){const n=Array.prototype.slice.call(arguments,0);return t(e,n)},i={};for(const s of e)i[s]=n(s);return i}(n,((e,t)=>this._host.fhr(e,t))),s={host:i,getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(s,t),Promise.resolve(U(this._foreignModule))):Promise.reject(new Error("Unexpected usage"))}fmr(e,t){if(!this._foreignModule||"function"!==typeof this._foreignModule[e])return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(zY){return Promise.reject(zY)}}}pp._diffLimit=1e5,pp._suggestionsLimit=1e4,"function"===typeof importScripts&&(globalThis.monaco=$s());const mp=ro("textResourceConfigurationService"),bp=ro("textResourcePropertiesService"),_p=ro("ILanguageFeaturesService");var vp=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},yp=function(e,t){return function(n,i){t(n,i,e)}};const Sp=3e5;function wp(e,t){const n=e.getModel(t);return!!n&&!n.isTooLargeForSyncing()}let kp=class extends Zt{constructor(e,t,n,i,s){super(),this._modelService=e,this._workerManager=this._register(new xp(this._modelService,i)),this._logService=n,this._register(s.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(e,t)=>wp(this._modelService,e.uri)?this._workerManager.withWorker().then((t=>t.computeLinks(e.uri))).then((e=>e&&{links:e})):Promise.resolve({links:[]})})),this._register(s.completionProvider.register("*",new Cp(this._workerManager,t,this._modelService,i)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return wp(this._modelService,e)}computedUnicodeHighlights(e,t,n){return this._workerManager.withWorker().then((i=>i.computedUnicodeHighlights(e,t,n)))}async computeDiff(e,t,n,i){const s=await this._workerManager.withWorker().then((s=>s.computeDiff(e,t,n,i)));if(!s)return null;return{identical:s.identical,quitEarly:s.quitEarly,changes:r(s.changes),moves:s.moves.map((e=>new Kf(new rg(new ig(e[0],e[1]),new ig(e[2],e[3])),r(e[4]))))};function r(e){return e.map((e=>{var t;return new og(new ig(e[0],e[1]),new ig(e[2],e[3]),null===(t=e[4])||void 0===t?void 0:t.map((e=>new ag(new xi(e[0],e[1],e[2],e[3]),new xi(e[4],e[5],e[6],e[7])))))}))}}computeMoreMinimalEdits(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(d(t)){if(!wp(this._modelService,e))return Promise.resolve(t);const i=sn.create(),s=this._workerManager.withWorker().then((i=>i.computeMoreMinimalEdits(e,t,n)));return s.finally((()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),i.elapsed()))),Promise.race([s,nl(1e3).then((()=>t))])}return Promise.resolve(void 0)}canNavigateValueSet(e){return wp(this._modelService,e)}navigateValueSet(e,t,n){return this._workerManager.withWorker().then((i=>i.navigateValueSet(e,t,n)))}canComputeWordRanges(e){return wp(this._modelService,e)}computeWordRanges(e,t){return this._workerManager.withWorker().then((n=>n.computeWordRanges(e,t)))}};kp=vp([yp(0,ao),yp(1,mp),yp(2,Ra),yp(3,qd),yp(4,_p)],kp);class Cp{constructor(e,t,n,i){this.languageConfigurationService=i,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}async provideCompletionItems(e,t){const n=this._configurationService.getValue(e.uri,t,"editor");if("off"===n.wordBasedSuggestions)return;const i=[];if("currentDocument"===n.wordBasedSuggestions)wp(this._modelService,e.uri)&&i.push(e.uri);else for(const u of this._modelService.getModels())wp(this._modelService,u.uri)&&(u===e?i.unshift(u.uri):"allDocuments"!==n.wordBasedSuggestions&&u.getLanguageId()!==e.getLanguageId()||i.push(u.uri));if(0===i.length)return;const s=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),r=e.getWordAtPosition(t),o=r?new xi(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn):xi.fromPositions(t),a=o.setEndPosition(t.lineNumber,t.column),l=await this._workerManager.withWorker(),c=await l.textualSuggest(i,null===r||void 0===r?void 0:r.word,s);return c?{duration:c.duration,suggestions:c.words.map((e=>({kind:18,label:e,insertText:e,range:{insert:a,replace:o}})))}:void 0}}class xp extends Zt{constructor(e,t){super(),this.languageConfigurationService=t,this._modelService=e,this._editorWorkerClient=null,this._lastWorkerUsedTime=(new Date).getTime();this._register(new qc).cancelAndSet((()=>this._checkStopIdleWorker()),Math.round(15e4),Rs),this._register(this._modelService.onModelRemoved((e=>this._checkStopEmptyWorker())))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;0===this._modelService.getModels().length&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;(new Date).getTime()-this._lastWorkerUsedTime>Sp&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=(new Date).getTime(),this._editorWorkerClient||(this._editorWorkerClient=new Ap(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}class Ep extends Zt{constructor(e,t,n){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){const e=new rl;e.cancelAndSet((()=>this._checkStopModelSync()),Math.round(3e4)),this._register(e)}}dispose(){for(const e in this._syncedModels)Gt(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t){for(const n of e){const e=n.toString();this._syncedModels[e]||this._beginModelSync(n,t),this._syncedModels[e]&&(this._syncedModelsLastUsedTime[e]=(new Date).getTime())}}_checkStopModelSync(){const e=(new Date).getTime(),t=[];for(const n in this._syncedModelsLastUsedTime){e-this._syncedModelsLastUsedTime[n]>6e4&&t.push(n)}for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){const n=this._modelService.getModel(e);if(!n)return;if(!t&&n.isTooLargeForSyncing())return;const i=e.toString();this._proxy.acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const s=new Xt;s.add(n.onDidChangeContent((e=>{this._proxy.acceptModelChanged(i.toString(),e)}))),s.add(n.onWillDispose((()=>{this._stopModelSync(i)}))),s.add(Qt((()=>{this._proxy.acceptRemovedModel(i)}))),this._syncedModels[i]=s}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],Gt(t)}}class Lp{constructor(e){this._instance=e,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class Dp{constructor(e){this._workerClient=e}fhr(e,t){return this._workerClient.fhr(e,t)}}class Ap extends Zt{constructor(e,t,n,i){super(),this.languageConfigurationService=i,this._disposed=!1,this._modelService=e,this._keepIdleModels=t,this._workerFactory=new wh(n),this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new ph(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new Dp(this)))}catch(e){lh(e),this._worker=new Lp(new pp(new Dp(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,(e=>(lh(e),this._worker=new Lp(new pp(new Dp(this),null)),this._getOrCreateWorker().getProxyObject())))}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new Ep(e,this._modelService,this._keepIdleModels))),this._modelManager}async _withSyncedResources(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._disposed?Promise.reject(function(){const e=new Error(Mt);return e.name=e.message,e}()):this._getProxy().then((n=>(this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n)))}computedUnicodeHighlights(e,t,n){return this._withSyncedResources([e]).then((i=>i.computeUnicodeHighlights(e.toString(),t,n)))}computeDiff(e,t,n,i){return this._withSyncedResources([e,t],!0).then((s=>s.computeDiff(e.toString(),t.toString(),n,i)))}computeMoreMinimalEdits(e,t,n){return this._withSyncedResources([e]).then((i=>i.computeMoreMinimalEdits(e.toString(),t,n)))}computeLinks(e){return this._withSyncedResources([e]).then((t=>t.computeLinks(e.toString())))}computeDefaultDocumentColors(e){return this._withSyncedResources([e]).then((t=>t.computeDefaultDocumentColors(e.toString())))}async textualSuggest(e,t,n){const i=await this._withSyncedResources(e),s=n.source,r=n.flags;return i.textualSuggest(e.map((e=>e.toString())),t,s,r)}computeWordRanges(e,t){return this._withSyncedResources([e]).then((n=>{const i=this._modelService.getModel(e);if(!i)return Promise.resolve(null);const s=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),r=s.source,o=s.flags;return n.computeWordRanges(e.toString(),t,r,o)}))}navigateValueSet(e,t,n){return this._withSyncedResources([e]).then((i=>{const s=this._modelService.getModel(e);if(!s)return null;const r=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),o=r.source,a=r.flags;return i.navigateValueSet(e.toString(),t,n,o,a)}))}dispose(){super.dispose(),this._disposed=!0}}class Tp extends Ap{constructor(e,t,n){super(e,n.keepIdleModels||!1,n.label,t),this._foreignModuleId=n.moduleId,this._foreignModuleCreateData=n.createData||null,this._foreignModuleHost=n.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||"function"!==typeof this._foreignModuleHost[e])return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(zY){return Promise.reject(zY)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then((e=>{const t=this._foreignModuleHost?U(this._foreignModuleHost):[];return e.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then((t=>{this._foreignModuleCreateData=null;const n=(t,n)=>e.fmr(t,n),i=(e,t)=>function(){const n=Array.prototype.slice.call(arguments,0);return t(e,n)},s={};for(const e of t)s[e]=i(e,n);return s}))}))),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this._withSyncedResources(e).then((e=>this.getProxy()))}}const Np={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"},Ip=new class{clone(){return this}equals(e){return this===e}};function $p(e,t){return new $i([new Ii(0,"",e)],t)}function Mp(e,t){const n=new Uint32Array(2);return n[0]=0,n[1]=(32768|e<<0|2<<24)>>>0,new Mi(n,null===t?Ip:t)}class Rp{static getLanguageId(e){return(255&e)>>>0}static getTokenType(e){return(768&e)>>>8}static containsBalancedBrackets(e){return 0!==(1024&e)}static getFontStyle(e){return(30720&e)>>>11}static getForeground(e){return(16744448&e)>>>15}static getBackground(e){return(4278190080&e)>>>24}static getClassNameFromMetadata(e){let t="mtk"+this.getForeground(e);const n=this.getFontStyle(e);return 1&n&&(t+=" mtki"),2&n&&(t+=" mtkb"),4&n&&(t+=" mtku"),8&n&&(t+=" mtks"),t}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),i=this.getFontStyle(e);let s="color: ".concat(t[n],";");1&i&&(s+="font-style: italic;"),2&i&&(s+="font-weight: bold;");let r="";return 4&i&&(r+=" underline"),8&i&&(r+=" line-through"),r&&(s+="text-decoration:".concat(r,";")),s}static getPresentationFromMetadata(e){const t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:Boolean(1&n),bold:Boolean(2&n),underline:Boolean(4&n),strikethrough:Boolean(8&n)}}}class Op{static createEmpty(e,t){const n=Op.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=e.length,i[1]=n,new Op(i,e,t)}constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}equals(e){return e instanceof Op&&this.slicedEquals(e,0,this._tokensCount)}slicedEquals(e,t,n){if(this._text!==e._text)return!1;if(this._tokensCount!==e._tokensCount)return!1;const i=t<<1,s=i+(n<<1);for(let r=i;r<s;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[1+(e<<1)]}getLanguageId(e){const t=this._tokens[1+(e<<1)],n=Rp.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[1+(e<<1)];return Rp.getTokenType(t)}getForeground(e){const t=this._tokens[1+(e<<1)];return Rp.getForeground(t)}getClassName(e){const t=this._tokens[1+(e<<1)];return Rp.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[1+(e<<1)];return Rp.getInlineStyleFromMetadata(n,t)}getPresentation(e){const t=this._tokens[1+(e<<1)];return Rp.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Op.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new Pp(this,e,t,n)}static convertToEndOffset(e,t){const n=(e.length>>>1)-1;for(let i=0;i<n;i++)e[i<<1]=e[i+1<<1];e[n<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,i=(e.length>>>1)-1;for(;n<i;){const s=n+Math.floor((i-n)/2),r=e[s<<1];if(r===t)return s+1;r<t?n=s+1:r>t&&(i=s)}return n}withInserted(e){if(0===e.length)return this;let t=0,n=0,i="";const s=new Array;let r=0;for(;;){const o=t<this._tokensCount?this._tokens[t<<1]:-1,a=n<e.length?e[n]:null;if(-1!==o&&(null===a||o<=a.offset)){i+=this._text.substring(r,o);const e=this._tokens[1+(t<<1)];s.push(i.length,e),t++,r=o}else{if(!a)break;if(a.offset>r){i+=this._text.substring(r,a.offset);const e=this._tokens[1+(t<<1)];s.push(i.length,e),r=a.offset}i+=a.text,s.push(i.length,a.tokenMetadata),n++}}return new Op(new Uint32Array(s),i,this._languageIdCodec)}}Op.defaultTokenMetadata=33587200;class Pp{constructor(e,t,n,i){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let s=this._firstTokenIndex,r=e.getCount();s<r;s++){if(e.getStartOffset(s)>=n)break;this._tokensCount++}}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof Pp&&(this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount))}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}class Fp{constructor(e,t,n,i){this.startColumn=e,this.endColumn=t,this.className=n,this.type=i,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(!Fp._equals(e[i],t[i]))return!1;return!0}static extractWrapped(e,t,n){if(0===e.length)return e;const i=t+1,s=n+1,r=n-t,o=[];let a=0;for(const l of e)l.endColumn<=i||l.startColumn>=s||(o[a++]=new Fp(Math.max(1,l.startColumn-i+1),Math.min(r+1,l.endColumn-i+1),l.className,l.type));return o}static filter(e,t,n,i){if(0===e.length)return[];const s=[];let r=0;for(let o=0,a=e.length;o<a;o++){const a=e[o],l=a.range;if(l.endLineNumber<t||l.startLineNumber>t)continue;if(l.isEmpty()&&(0===a.type||3===a.type))continue;const c=l.startLineNumber===t?l.startColumn:n,u=l.endLineNumber===t?l.endColumn:i;s[r++]=new Fp(c,u,a.inlineClassName,a.type)}return s}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=Fp._typeCompare(e.type,t.type);return 0!==n?n:e.className!==t.className?e.className<t.className?-1:1:0}}class Bp{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=i}}class zp{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,i=e.length;n<i;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let e=0;for(;e+1<this.count&&this.stopOffsets[e]===this.stopOffsets[e+1];)e++;n.push(new Bp(t,this.stopOffsets[e],this.classNames.join(" "),zp._metadata(this.metadata))),t=this.stopOffsets[e]+1,this.stopOffsets.splice(0,e+1),this.classNames.splice(0,e+1),this.metadata.splice(0,e+1),this.count-=e+1}return this.count>0&&t<e&&(n.push(new Bp(t,e-1,this.classNames.join(" "),zp._metadata(this.metadata))),t=e),t}insert(e,t,n){if(0===this.count||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let i=0;i<this.count;i++)if(this.stopOffsets[i]>=e){this.stopOffsets.splice(i,0,e),this.classNames.splice(i,0,t),this.metadata.splice(i,0,n);break}this.count++}}class Wp{static normalize(e,t){if(0===t.length)return[];const n=[],i=new zp;let s=0;for(let r=0,o=t.length;r<o;r++){const o=t[r];let a=o.startColumn,l=o.endColumn;const c=o.className,u=1===o.type?2:2===o.type?4:0;if(a>1){ar(e.charCodeAt(a-2))&&a--}if(l>1){ar(e.charCodeAt(l-2))&&l--}const h=a-1,d=l-2;s=i.consumeLowerThan(h,s,n),0===i.count&&(s=h),i.insert(d,c,u)}return i.consumeLowerThan(1073741824,s,n),n}}class Hp{constructor(e,t,n,i){this.endIndex=e,this.type=t,this.metadata=n,this.containsRTL=i,this._linePartBrand=void 0}isWhitespace(){return!!(1&this.metadata)}isPseudoAfter(){return!!(4&this.metadata)}}class Vp{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class jp{constructor(e,t,n,i,s,r,o,a,l,c,u,h,d,f,g,p,m,b,_){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=i,this.isBasicASCII=s,this.containsRTL=r,this.fauxIndentLength=o,this.lineTokens=a,this.lineDecorations=l.sort(Fp.compare),this.tabSize=c,this.startVisibleColumn=u,this.spaceWidth=h,this.stopRenderingLineAfter=g,this.renderWhitespace="all"===p?4:"boundary"===p?1:"selection"===p?2:"trailing"===p?3:0,this.renderControlCharacters=m,this.fontLigatures=b,this.selectionsOnLine=_&&_.sort(((e,t)=>e.startOffset<t.startOffset?-1:1));Math.abs(f-h)<Math.abs(d-h)?(this.renderSpaceWidth=f,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=d,this.renderSpaceCharCode=183)}sameSelection(e){if(null===this.selectionsOnLine)return null===e;if(null===e)return!1;if(e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Fp.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class Up{constructor(e,t){this.partIndex=e,this.charIndex=t}}class qp{static getPartIndex(e){return(4294901760&e)>>>16}static getCharIndex(e){return(65535&e)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,n,i){const s=(t<<16|n<<0)>>>0;this._data[e-1]=s,this._horizontalOffset[e-1]=i}getHorizontalOffset(e){return 0===this._horizontalOffset.length?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return 0===this.length?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=qp.getPartIndex(t),i=qp.getCharIndex(t);return new Up(n,i)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(0===this.length)return 0;const i=(e<<16|n<<0)>>>0;let s=0,r=this.length-1;for(;s+1<r;){const e=s+r>>>1,t=this._data[e];if(t===i)return e;t>i?r=e:s=e}if(s===r)return s;const o=this._data[s],a=this._data[r];if(o===i)return s;if(a===i)return r;const l=qp.getPartIndex(o),c=qp.getCharIndex(o);let u;u=l!==qp.getPartIndex(a)?t:qp.getCharIndex(a);return n-c<=u-n?s:r}}class Kp{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function Gp(e,t){if(0===e.lineContent.length){if(e.lineDecorations.length>0){t.appendString("<span>");let n=0,i=0,s=0;for(const o of e.lineDecorations)1!==o.type&&2!==o.type||(t.appendString('<span class="'),t.appendString(o.className),t.appendString('"></span>'),1===o.type&&(s|=1,n++),2===o.type&&(s|=2,i++));t.appendString("</span>");const r=new qp(1,n+i);return r.setColumnInfo(1,n,0,0),new Kp(r,!1,s)}return t.appendString("<span><span></span></span>"),new Kp(new qp(0,0),!1,0)}return function(e,t){const n=e.fontIsMonospace,i=e.canUseHalfwidthRightwardsArrow,s=e.containsForeignElements,r=e.lineContent,o=e.len,a=e.isOverflowing,l=e.overflowingCharCount,c=e.parts,u=e.fauxIndentLength,h=e.tabSize,d=e.startVisibleColumn,f=e.containsRTL,g=e.spaceWidth,p=e.renderSpaceCharCode,m=e.renderWhitespace,b=e.renderControlCharacters,_=new qp(o+1,c.length);let v=!1,y=0,S=d,w=0,k=0,C=0;f?t.appendString('<span dir="ltr">'):t.appendString("<span>");for(let x=0,E=c.length;x<E;x++){const e=c[x],a=e.endIndex,l=e.type,d=e.containsRTL,f=0!==m&&e.isWhitespace(),E=f&&!n&&("mtkw"===l||!s),L=y===a&&e.isPseudoAfter();if(w=0,t.appendString("<span "),d&&t.appendString('style="unicode-bidi:isolate" '),t.appendString('class="'),t.appendString(E?"mtkz":l),t.appendASCIICharCode(34),f){let e=0;{let t=y,n=S;for(;t<a;t++){const i=0|(9===r.charCodeAt(t)?h-n%h:1);e+=i,t>=u&&(n+=i)}}for(E&&(t.appendString(' style="width:'),t.appendString(String(g*e)),t.appendString('px"')),t.appendASCIICharCode(62);y<a;y++){_.setColumnInfo(y+1,x-C,w,k),C=0;let e,n;if(9===r.charCodeAt(y)){e=h-S%h|0,n=e,!i||n>1?t.appendCharCode(8594):t.appendCharCode(65515);for(let e=2;e<=n;e++)t.appendCharCode(160)}else e=2,n=1,t.appendCharCode(p),t.appendCharCode(8204);w+=e,k+=n,y>=u&&(S+=n)}}else for(t.appendASCIICharCode(62);y<a;y++){_.setColumnInfo(y+1,x-C,w,k),C=0;const e=r.charCodeAt(y);let n=1,i=1;switch(e){case 9:n=h-S%h,i=n;for(let e=1;e<=n;e++)t.appendCharCode(160);break;case 32:t.appendCharCode(160);break;case 60:t.appendString("&lt;");break;case 62:t.appendString("&gt;");break;case 38:t.appendString("&amp;");break;case 0:b?t.appendCharCode(9216):t.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:t.appendCharCode(65533);break;default:Sr(e)&&i++,b&&e<32?t.appendCharCode(9216+e):b&&127===e?t.appendCharCode(9249):b&&Zp(e)?(t.appendString("[U+"),t.appendString(Jp(e)),t.appendString("]"),n=8,i=n):t.appendCharCode(e)}w+=n,k+=i,y>=u&&(S+=i)}L?C++:C=0,y>=o&&!v&&e.isPseudoAfter()&&(v=!0,_.setColumnInfo(y+1,x,w,k)),t.appendString("</span>")}v||_.setColumnInfo(o+1,c.length-1,w,k);a&&(t.appendString('<span class="mtkoverflow">'),t.appendString(G("showMore","Show more ({0})",function(e){if(e<1024)return G("overflow.chars","{0} chars",e);if(e<1048576)return"".concat((e/1024).toFixed(1)," KB");return"".concat((e/1024/1024).toFixed(1)," MB")}(l))),t.appendString("</span>"));return t.appendString("</span>"),new Kp(_,f,s)}(function(e){const t=e.lineContent;let n,i,s;-1!==e.stopRenderingLineAfter&&e.stopRenderingLineAfter<t.length?(n=!0,i=t.length-e.stopRenderingLineAfter,s=e.stopRenderingLineAfter):(n=!1,i=0,s=t.length);let r=function(e,t,n,i,s){const r=[];let o=0;i>0&&(r[o++]=new Hp(i,"",0,!1));let a=i;for(let l=0,c=n.getCount();l<c;l++){const c=n.getEndOffset(l);if(c<=i)continue;const u=n.getClassName(l);if(c>=s){const n=!!t&&mr(e.substring(a,s));r[o++]=new Hp(s,u,0,n);break}const h=!!t&&mr(e.substring(a,c));r[o++]=new Hp(c,u,0,h),a=c}return r}(t,e.containsRTL,e.lineTokens,e.fauxIndentLength,s);e.renderControlCharacters&&!e.isBasicASCII&&(r=function(e,t){const n=[];let i=new Hp(0,"",0,!1),s=0;for(const r of t){const t=r.endIndex;for(;s<t;s++){Zp(e.charCodeAt(s))&&(s>i.endIndex&&(i=new Hp(s,r.type,r.metadata,r.containsRTL),n.push(i)),i=new Hp(s+1,"mtkcontrol",r.metadata,!1),n.push(i))}s>i.endIndex&&(i=new Hp(t,r.type,r.metadata,r.containsRTL),n.push(i))}return n}(t,r));(4===e.renderWhitespace||1===e.renderWhitespace||2===e.renderWhitespace&&e.selectionsOnLine||3===e.renderWhitespace&&!e.continuesWithWrappedLine)&&(r=function(e,t,n,i){const s=e.continuesWithWrappedLine,r=e.fauxIndentLength,o=e.tabSize,a=e.startVisibleColumn,l=e.useMonospaceOptimizations,c=e.selectionsOnLine,u=1===e.renderWhitespace,h=3===e.renderWhitespace,d=e.renderSpaceWidth!==e.spaceWidth,f=[];let g=0,p=0,m=i[p].type,b=i[p].containsRTL,_=i[p].endIndex;const v=i.length;let y,S=!1,w=Ks(t);-1===w?(S=!0,w=n,y=n):y=Ys(t);let k=!1,C=0,x=c&&c[C],E=a%o;for(let D=r;D<n;D++){const e=t.charCodeAt(D);let s;if(x&&D>=x.endOffset&&(C++,x=c&&c[C]),D<w||D>y)s=!0;else if(9===e)s=!0;else if(32===e)if(u)if(k)s=!0;else{const e=D+1<n?t.charCodeAt(D+1):0;s=32===e||9===e}else s=!0;else s=!1;if(s&&c&&(s=!!x&&x.startOffset<=D&&x.endOffset>D),s&&h&&(s=S||D>y),s&&b&&D>=w&&D<=y&&(s=!1),k){if(!s||!l&&E>=o){if(d){for(let e=(g>0?f[g-1].endIndex:r)+1;e<=D;e++)f[g++]=new Hp(e,"mtkw",1,!1)}else f[g++]=new Hp(D,"mtkw",1,!1);E%=o}}else(D===_||s&&D>r)&&(f[g++]=new Hp(D,m,0,b),E%=o);for(9===e?E=o:Sr(e)?E+=2:E++,k=s;D===_&&(p++,p<v);)m=i[p].type,b=i[p].containsRTL,_=i[p].endIndex}let L=!1;if(k)if(s&&u){const e=n>0?t.charCodeAt(n-1):0,i=n>1?t.charCodeAt(n-2):0;32===e&&32!==i&&9!==i||(L=!0)}else L=!0;if(L)if(d){for(let e=(g>0?f[g-1].endIndex:r)+1;e<=n;e++)f[g++]=new Hp(e,"mtkw",1,!1)}else f[g++]=new Hp(n,"mtkw",1,!1);else f[g++]=new Hp(n,m,0,b);return f}(e,t,s,r));let o=0;if(e.lineDecorations.length>0){for(let t=0,n=e.lineDecorations.length;t<n;t++){const n=e.lineDecorations[t];3===n.type||1===n.type?o|=1:2===n.type&&(o|=2)}r=function(e,t,n,i){i.sort(Fp.compare);const s=Wp.normalize(e,i),r=s.length;let o=0;const a=[];let l=0,c=0;for(let h=0,d=n.length;h<d;h++){const e=n[h],t=e.endIndex,i=e.type,u=e.metadata,d=e.containsRTL;for(;o<r&&s[o].startOffset<t;){const e=s[o];if(e.startOffset>c&&(c=e.startOffset,a[l++]=new Hp(c,i,u,d)),!(e.endOffset+1<=t)){c=t,a[l++]=new Hp(c,i+" "+e.className,u|e.metadata,d);break}c=e.endOffset+1,a[l++]=new Hp(c,i+" "+e.className,u|e.metadata,d),o++}t>c&&(c=t,a[l++]=new Hp(c,i,u,d))}const u=n[n.length-1].endIndex;if(o<r&&s[o].startOffset===u)for(;o<r&&s[o].startOffset===u;){const e=s[o];a[l++]=new Hp(c,e.className,e.metadata,!1),o++}return a}(t,0,r,e.lineDecorations)}e.containsRTL||(r=function(e,t,n){let i=0;const s=[];let r=0;if(n)for(let o=0,a=t.length;o<a;o++){const n=t[o],a=n.endIndex;if(i+50<a){const t=n.type,o=n.metadata,l=n.containsRTL;let c=-1,u=i;for(let n=i;n<a;n++)32===e.charCodeAt(n)&&(c=n),-1!==c&&n-u>=50&&(s[r++]=new Hp(c+1,t,o,l),u=c+1,c=-1);u!==a&&(s[r++]=new Hp(a,t,o,l))}else s[r++]=n;i=a}else for(let o=0,a=t.length;o<a;o++){const e=t[o],n=e.endIndex,a=n-i;if(a>50){const t=e.type,o=e.metadata,l=e.containsRTL,c=Math.ceil(a/50);for(let e=1;e<c;e++){const n=i+50*e;s[r++]=new Hp(n,t,o,l)}s[r++]=new Hp(n,t,o,l)}else s[r++]=e;i=n}return s}(t,r,!e.isBasicASCII||e.fontLigatures));return new Xp(e.useMonospaceOptimizations,e.canUseHalfwidthRightwardsArrow,t,s,n,i,r,o,e.fauxIndentLength,e.tabSize,e.startVisibleColumn,e.containsRTL,e.spaceWidth,e.renderSpaceCharCode,e.renderWhitespace,e.renderControlCharacters)}(e),t)}class Yp{constructor(e,t,n,i){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=i}}function Qp(e){const t=new qh(1e4),n=Gp(e,t);return new Yp(n.characterMapping,t.build(),n.containsRTL,n.containsForeignElements)}class Xp{constructor(e,t,n,i,s,r,o,a,l,c,u,h,d,f,g,p){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=i,this.isOverflowing=s,this.overflowingCharCount=r,this.parts=o,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=c,this.startVisibleColumn=u,this.containsRTL=h,this.spaceWidth=d,this.renderSpaceCharCode=f,this.renderWhitespace=g,this.renderControlCharacters=p}}function Zp(e){return e<32?9!==e:127===e||(e>=8234&&e<=8238||e>=8294&&e<=8297||e>=8206&&e<=8207||1564===e)}function Jp(e){return e.toString(16).toUpperCase().padStart(4,"0")}class em{constructor(e,t,n,i){this._viewportBrand=void 0,this.top=0|e,this.left=0|t,this.width=0|n,this.height=0|i}}class tm{constructor(e,t){this.tabSize=e,this.data=t}}class nm{constructor(e,t,n,i,s,r,o){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=i,this.startVisibleColumn=s,this.tokens=r,this.inlineDecorations=o}}class im{constructor(e,t,n,i,s,r,o,a,l,c){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=i,this.isBasicASCII=im.isBasicASCII(n,r),this.containsRTL=im.containsRTL(n,this.isBasicASCII,s),this.tokens=o,this.inlineDecorations=a,this.tabSize=l,this.startVisibleColumn=c}static isBasicASCII(e,t){return!t||_r(e)}static containsRTL(e,t,n){return!(t||!n)&&mr(e)}}class sm{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class rm{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=i}toInlineDecoration(e){return new sm(new xi(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class om{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class am{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&a(e.data,t.data)}static equalsArr(e,t){return a(e,t,am.equals)}}function lm(e){return!function(e){return Array.isArray(e)}(e)}function cm(e){return"string"===typeof e}function um(e){return!cm(e)}function hm(e){return!e}function dm(e,t){return e.ignoreCase&&t?t.toLowerCase():t}function fm(e){return e.replace(/[&<>'"_]/g,"-")}function gm(e,t){console.log("".concat(e.languageId,": ").concat(t))}function pm(e,t){return new Error("".concat(e.languageId,": ").concat(t))}function mm(e,t,n,i,s){let r=null;return t.replace(/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g,(function(t,o,a,l,c,u,h,d,f){return hm(a)?hm(l)?!hm(c)&&c<i.length?dm(e,i[c]):!hm(h)&&e&&"string"===typeof e[h]?e[h]:(null===r&&(r=s.split("."),r.unshift(s)),!hm(u)&&u<r.length?dm(e,r[u]):""):dm(e,n):"$"}))}function bm(e,t){let n=t;for(;n&&n.length>0;){const t=e.tokenizer[n];if(t)return t;const i=n.lastIndexOf(".");n=i<0?null:n.substr(0,i)}return null}var _m,vm=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},ym=function(e,t){return function(n,i){t(n,i,e)}};class Sm{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(null!==e&&e.depth>=this._maxCacheDepth)return new wm(e,t);let n=wm.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let i=this._entries[n];return i||(i=new wm(e,t),this._entries[n]=i,i)}}Sm._INSTANCE=new Sm(5);class wm{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;null!==e;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;null!==e&&null!==t;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return null===e&&null===t}equals(e){return wm._equals(this,e)}push(e){return Sm.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return Sm.create(this.parent,e)}}class km{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new km(this.languageId,this.state)}}class Cm{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(null!==t)return new xm(e,t);if(null!==e&&e.depth>=this._maxCacheDepth)return new xm(e,t);const n=wm.getStackElementId(e);let i=this._entries[n];return i||(i=new xm(e,null),this._entries[n]=i,i)}}Cm._INSTANCE=new Cm(5);class xm{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:Cm.create(this.stack,this.embeddedLanguageData)}equals(e){return e instanceof xm&&(!!this.stack.equals(e.stack)&&(null===this.embeddedLanguageData&&null===e.embeddedLanguageData||null!==this.embeddedLanguageData&&null!==e.embeddedLanguageData&&this.embeddedLanguageData.equals(e.embeddedLanguageData)))}}class Em{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new Ii(e,t,this._languageId)))}nestedLanguageTokenize(e,t,n,i){const s=n.languageId,r=n.state,o=Ui.get(s);if(!o)return this.enterLanguage(s),this.emit(i,""),r;const a=o.tokenize(e,t,r);if(0!==i)for(const l of a.tokens)this._tokens.push(new Ii(l.offset+i,l.type,l.language));else this._tokens=this._tokens.concat(a.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,a.endState}finalize(e){return new $i(this._tokens,e)}}class Lm{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const n=1024|this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){const i=null!==e?e.length:0,s=t.length,r=null!==n?n.length:0;if(0===i&&0===s&&0===r)return new Uint32Array(0);if(0===i&&0===s)return n;if(0===s&&0===r)return e;const o=new Uint32Array(i+s+r);null!==e&&o.set(e);for(let a=0;a<s;a++)o[i+a]=t[a];return null!==n&&o.set(n,i+s),o}nestedLanguageTokenize(e,t,n,i){const s=n.languageId,r=n.state,o=Ui.get(s);if(!o)return this.enterLanguage(s),this.emit(i,""),r;const a=o.tokenizeEncoded(e,t,r);if(0!==i)for(let l=0,c=a.tokens.length;l<c;l+=2)a.tokens[l]+=i;return this._prependTokens=Lm._merge(this._prependTokens,this._tokens,a.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,a.endState}finalize(e){return new Mi(Lm._merge(this._prependTokens,this._tokens,null),e)}}let Dm=_m=class extends Zt{constructor(e,t,n,i,s){super(),this._configurationService=s,this._languageService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=i,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._register(Ui.onDidChange((e=>{if(r)return;let t=!1;for(let n=0,i=e.changedLanguages.length;n<i;n++){const i=e.changedLanguages[n];if(this._embeddedLanguages[i]){t=!0;break}}t&&(r=!0,Ui.handleChange([this._languageId]),r=!1)}))),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))})))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const n=Ui.get(t);if(n){if(n instanceof _m){const t=n.getLoadStatus();!1===t.loaded&&e.push(t.promise)}}else Ui.isResolved(t)||e.push(Ui.getOrCreate(t))}return 0===e.length?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then((e=>{}))}}getInitialState(){const e=Sm.create(null,this._lexer.start);return Cm.create(e,null)}tokenize(e,t,n){if(e.length>=this._maxTokenizationLineLength)return $p(this._languageId,n);const i=new Em,s=this._tokenize(e,t,n,i);return i.finalize(s)}tokenizeEncoded(e,t,n){if(e.length>=this._maxTokenizationLineLength)return Mp(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),n);const i=new Lm(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),s=this._tokenize(e,t,n,i);return i.finalize(s)}_tokenize(e,t,n,i){return n.embeddedLanguageData?this._nestedTokenize(e,t,n,0,i):this._myTokenize(e,t,n,0,i)}_findLeavingNestedLanguageOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=bm(this._lexer,t.stack.state),!n))throw pm(this._lexer,"tokenizer state is not defined: "+t.stack.state);let i=-1,s=!1;for(const r of n){if(!um(r.action)||"@pop"!==r.action.nextEmbedded)continue;s=!0;let t=r.regex;const n=r.regex.source;if("^(?:"===n.substr(0,4)&&")"===n.substr(n.length-1,1)){const e=(t.ignoreCase?"i":"")+(t.unicode?"u":"");t=new RegExp(n.substr(4,n.length-5),e)}const o=e.search(t);-1===o||0!==o&&r.matchOnlyAtLineStart||(-1===i||o<i)&&(i=o)}if(!s)throw pm(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return i}_nestedTokenize(e,t,n,i,s){const r=this._findLeavingNestedLanguageOffset(e,n);if(-1===r){const r=s.nestedLanguageTokenize(e,t,n.embeddedLanguageData,i);return Cm.create(n.stack,new km(n.embeddedLanguageData.languageId,r))}const o=e.substring(0,r);o.length>0&&s.nestedLanguageTokenize(o,!1,n.embeddedLanguageData,i);const a=e.substring(r);return this._myTokenize(a,t,n,i+r,s)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,i,s){s.enterLanguage(this._languageId);const r=e.length,o=t&&this._lexer.includeLF?e+"\n":e,a=o.length;let l=n.embeddedLanguageData,c=n.stack,u=0,h=null,d=!0;for(;d||u<a;){const n=u,f=c.depth,g=h?h.groups.length:0,p=c.state;let m=null,b=null,_=null,v=null,y=null;if(h){m=h.matches;const e=h.groups.shift();b=e.matched,_=e.action,v=h.rule,0===h.groups.length&&(h=null)}else{if(!d&&u>=a)break;d=!1;let e=this._lexer.tokenizer[p];if(!e&&(e=bm(this._lexer,p),!e))throw pm(this._lexer,"tokenizer state is not defined: "+p);const t=o.substr(u);for(const n of e)if((0===u||!n.matchOnlyAtLineStart)&&(m=t.match(n.regex),m)){b=m[0],_=n.action;break}}if(m||(m=[""],b=""),_||(u<a&&(m=[o.charAt(u)],b=m[0]),_=this._lexer.defaultToken),null===b)break;for(u+=b.length;lm(_)&&um(_)&&_.test;)_=_.test(b,m,p,u===a);let S=null;if("string"===typeof _||Array.isArray(_))S=_;else if(_.group)S=_.group;else if(null!==_.token&&void 0!==_.token){if(S=_.tokenSubst?mm(this._lexer,_.token,b,m,p):_.token,_.nextEmbedded)if("@pop"===_.nextEmbedded){if(!l)throw pm(this._lexer,"cannot pop embedded language if not inside one");l=null}else{if(l)throw pm(this._lexer,"cannot enter embedded language from within an embedded language");y=mm(this._lexer,_.nextEmbedded,b,m,p)}if(_.goBack&&(u=Math.max(0,u-_.goBack)),_.switchTo&&"string"===typeof _.switchTo){let e=mm(this._lexer,_.switchTo,b,m,p);if("@"===e[0]&&(e=e.substr(1)),!bm(this._lexer,e))throw pm(this._lexer,"trying to switch to a state '"+e+"' that is undefined in rule: "+this._safeRuleName(v));c=c.switchTo(e)}else{if(_.transform&&"function"===typeof _.transform)throw pm(this._lexer,"action.transform not supported");if(_.next)if("@push"===_.next){if(c.depth>=this._lexer.maxStack)throw pm(this._lexer,"maximum tokenizer stack size reached: ["+c.state+","+c.parent.state+",...]");c=c.push(p)}else if("@pop"===_.next){if(c.depth<=1)throw pm(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(v));c=c.pop()}else if("@popall"===_.next)c=c.popall();else{let e=mm(this._lexer,_.next,b,m,p);if("@"===e[0]&&(e=e.substr(1)),!bm(this._lexer,e))throw pm(this._lexer,"trying to set a next state '"+e+"' that is undefined in rule: "+this._safeRuleName(v));c=c.push(e)}}_.log&&"string"===typeof _.log&&gm(this._lexer,this._lexer.languageId+": "+mm(this._lexer,_.log,b,m,p))}if(null===S)throw pm(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(v));const w=n=>{const r=this._languageService.getLanguageIdByLanguageName(n)||this._languageService.getLanguageIdByMimeType(n)||n,o=this._getNestedEmbeddedLanguageData(r);if(u<a){const n=e.substr(u);return this._nestedTokenize(n,t,Cm.create(c,o),i+u,s)}return Cm.create(c,o)};if(Array.isArray(S)){if(h&&h.groups.length>0)throw pm(this._lexer,"groups cannot be nested: "+this._safeRuleName(v));if(m.length!==S.length+1)throw pm(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(v));let e=0;for(let t=1;t<m.length;t++)e+=m[t].length;if(e!==b.length)throw pm(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(v));h={rule:v,matches:m,groups:[]};for(let t=0;t<S.length;t++)h.groups[t]={action:S[t],matched:m[t+1]};u-=b.length}else{{if("@rematch"===S&&(u-=b.length,b="",m=null,S="",null!==y))return w(y);if(0===b.length){if(0===a||f!==c.depth||p!==c.state||(h?h.groups.length:0)!==g)continue;throw pm(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(v))}let e=null;if(cm(S)&&0===S.indexOf("@brackets")){const t=S.substr(9),n=Am(this._lexer,b);if(!n)throw pm(this._lexer,"@brackets token returned but no bracket defined as: "+b);e=fm(n.token+t)}else{e=fm(""===S?"":S+this._lexer.tokenPostfix)}n<r&&s.emit(n+i,e)}if(null!==y)return w(y)}}return Cm.create(c,l)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new km(e,Ip);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),Ui.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=Ui.get(e);return new km(e,t?t.getInitialState():Ip)}};function Am(e,t){if(!t)return null;t=dm(e,t);const n=e.brackets;for(const i of n){if(i.open===t)return{token:i.token,bracketType:1};if(i.close===t)return{token:i.token,bracketType:-1}}return null}Dm=_m=vm([ym(4,od)],Dm);const Tm=vh("standaloneColorizer",{createHTML:e=>e});class Nm{static colorizeElement(e,t,n,i){const s=(i=i||{}).theme||"vs",r=i.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!r)return console.error("Mode not detected"),Promise.resolve();const o=t.getLanguageIdByMimeType(r)||r;e.setTheme(s);const a=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+s;return this.colorize(t,a||"",o,i).then((e=>{var t;const i=null!==(t=null===Tm||void 0===Tm?void 0:Tm.createHTML(e))&&void 0!==t?t:e;n.innerHTML=i}),(e=>console.error(e)))}static async colorize(e,t,n,i){const s=e.languageIdCodec;let r=4;i&&"number"===typeof i.tabSize&&(r=i.tabSize),Cr(t)&&(t=t.substr(1));const o=qs(t);if(!e.isRegisteredLanguageId(n))return Im(o,r,s);const a=await Ui.getOrCreate(n);return a?function(e,t,n,i){return new Promise(((s,r)=>{const o=()=>{const a=function(e,t,n,i){let s=[],r=n.getInitialState();for(let o=0,a=e.length;o<a;o++){const a=e[o],l=n.tokenizeEncoded(a,!0,r);Op.convertToEndOffset(l.tokens,a.length);const c=new Op(l.tokens,a,i),u=im.isBasicASCII(a,!0),h=im.containsRTL(a,u,!0),d=Qp(new jp(!1,!0,a,!1,u,h,0,c.inflate(),[],t,0,0,0,0,-1,"none",!1,!1,null));s=s.concat(d.html),s.push("<br/>"),r=l.endState}return s.join("")}(e,t,n,i);if(n instanceof Dm){const e=n.getLoadStatus();if(!1===e.loaded)return void e.promise.then(o,r)}s(a)};o()}))}(o,r,a,s):Im(o,r,s)}static colorizeLine(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;const r=im.isBasicASCII(e,t),o=im.containsRTL(e,r,n);return Qp(new jp(!1,!0,e,!1,r,o,0,i,[],s,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;const i=e.getLineContent(t);e.tokenization.forceTokenization(t);const s=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(i,e.mightContainNonBasicASCII(),e.mightContainRTL(),s,n)}}function Im(e,t,n){let i=[];const s=new Uint32Array(2);s[0]=0,s[1]=33587200;for(let r=0,o=e.length;r<o;r++){const o=e[r];s[0]=o.length;const a=new Op(s,o,n),l=im.isBasicASCII(o,!0),c=im.containsRTL(o,l,!0),u=Qp(new jp(!1,!0,o,!1,l,c,0,a,[],t,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(u.html),i.push("<br/>")}return i.join("")}const $m=2e4;let Mm,Rm,Om,Pm,Fm;function Bm(e){Mm&&(Rm.textContent!==e?(Fc(Om),Wm(Rm,e)):(Fc(Rm),Wm(Om,e)))}function zm(e){Mm&&(Pm.textContent!==e?(Fc(Fm),Wm(Pm,e)):(Fc(Pm),Wm(Fm,e)))}function Wm(e,t){Fc(e),t.length>$m&&(t=t.substr(0,$m)),e.textContent=t,e.style.visibility="hidden",e.style.visibility="visible"}const Hm=ro("markerDecorationsService");var Vm=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},jm=function(e,t){return function(n,i){t(n,i,e)}};let Um=class{constructor(e,t){}dispose(){}};Um.ID="editor.contrib.markerDecorations",Um=Vm([jm(1,Hm)],Um),Ju(Um.ID,Um,0);class qm extends Zt{constructor(e,t){super(),this._onDidChange=this._register(new un),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let n=!1,i=!1;const s=()=>{if(n&&!i)try{n=!1,i=!0,t()}finally{Uc(Dc(this._referenceDomElement),(()=>{i=!1,s()}))}};this._resizeObserver=new ResizeObserver((t=>{e=t&&t[0]&&t[0].contentRect?{width:t[0].contentRect.width,height:t[0].contentRect.height}:null,n=!0,s()})),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,i=0;t?(n=t.width,i=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,i=this._referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),this._width===n&&this._height===i||(this._width=n,this._height=i,e&&this._onDidChange.fire())}}class Km{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=Km._read(e,this.key);this.migrate(t,(t=>Km._read(e,t)),((t,n)=>Km._write(e,t,n)))}static _read(e,t){if("undefined"===typeof e)return;const n=t.indexOf(".");if(n>=0){const i=t.substring(0,n);return this._read(e[i],t.substring(n+1))}return e[t]}static _write(e,t,n){const i=t.indexOf(".");if(i>=0){const s=t.substring(0,i);return e[s]=e[s]||{},void this._write(e[s],t.substring(i+1),n)}e[t]=n}}function Gm(e,t){Km.items.push(new Km(e,t))}function Ym(e,t){Gm(e,((n,i,s)=>{if("undefined"!==typeof n)for(const[r,o]of t)if(n===r)return void s(e,o)}))}Km.items=[],Ym("wordWrap",[[!0,"on"],[!1,"off"]]),Ym("lineNumbers",[[!0,"on"],[!1,"off"]]),Ym("cursorBlinking",[["visible","solid"]]),Ym("renderWhitespace",[[!0,"boundary"],[!1,"none"]]),Ym("renderLineHighlight",[[!0,"line"],[!1,"none"]]),Ym("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]),Ym("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]),Ym("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),Ym("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),Ym("autoIndent",[[!1,"advanced"],[!0,"full"]]),Ym("matchBrackets",[[!0,"always"],[!1,"never"]]),Ym("renderFinalNewline",[[!0,"on"],[!1,"off"]]),Ym("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]),Ym("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]),Ym("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]),Gm("autoClosingBrackets",((e,t,n)=>{!1===e&&(n("autoClosingBrackets","never"),"undefined"===typeof t("autoClosingQuotes")&&n("autoClosingQuotes","never"),"undefined"===typeof t("autoSurround")&&n("autoSurround","never"))})),Gm("renderIndentGuides",((e,t,n)=>{"undefined"!==typeof e&&(n("renderIndentGuides",void 0),"undefined"===typeof t("guides.indentation")&&n("guides.indentation",!!e))})),Gm("highlightActiveIndentGuide",((e,t,n)=>{"undefined"!==typeof e&&(n("highlightActiveIndentGuide",void 0),"undefined"===typeof t("guides.highlightActiveIndentation")&&n("guides.highlightActiveIndentation",!!e))}));const Qm={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};Gm("suggest.filteredTypes",((e,t,n)=>{if(e&&"object"===typeof e){for(const i of Object.entries(Qm)){!1===e[i[0]]&&"undefined"===typeof t("suggest.".concat(i[1]))&&n("suggest.".concat(i[1]),!1)}n("suggest.filteredTypes",void 0)}})),Gm("quickSuggestions",((e,t,n)=>{if("boolean"===typeof e){const t=e?"on":"off";n("quickSuggestions",{comments:t,strings:t,other:t})}})),Gm("experimental.stickyScroll.enabled",((e,t,n)=>{"boolean"===typeof e&&(n("experimental.stickyScroll.enabled",void 0),"undefined"===typeof t("stickyScroll.enabled")&&n("stickyScroll.enabled",e))})),Gm("experimental.stickyScroll.maxLineCount",((e,t,n)=>{"number"===typeof e&&(n("experimental.stickyScroll.maxLineCount",void 0),"undefined"===typeof t("stickyScroll.maxLineCount")&&n("stickyScroll.maxLineCount",e))})),Gm("codeActionsOnSave",((e,t,n)=>{if(e&&"object"===typeof e){let t=!1;const i={};for(const n of Object.entries(e))"boolean"===typeof n[1]?(t=!0,i[n[0]]=n[1]?"explicit":"never"):i[n[0]]=n[1];t&&n("codeActionsOnSave",i)}})),Gm("codeActionWidget.includeNearbyQuickfixes",((e,t,n)=>{"boolean"===typeof e&&(n("codeActionWidget.includeNearbyQuickfixes",void 0),"undefined"===typeof t("codeActionWidget.includeNearbyQuickFixes")&&n("codeActionWidget.includeNearbyQuickFixes",e))})),Gm("lightbulb.enabled",((e,t,n)=>{"boolean"===typeof e&&n("lightbulb.enabled",e?void 0:"off")}));const Xm=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new un,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}},Zm=ro("accessibilityService"),Jm=new na("accessibilityModeEnabled",!1);var eb=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},tb=function(e,t){return function(n,i){t(n,i,e)}};let nb=class extends Zt{constructor(e,t,n,i){super(),this._accessibilityService=i,this._onDidChange=this._register(new un),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new un),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new Ke,this.isSimpleWidget=e,this._containerObserver=this._register(new qm(n,t.dimension)),this._rawOptions=ab(t),this._validatedOptions=ob.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(Xr.onDidChangeZoomLevel((()=>this._recomputeOptions()))),this._register(Xm.onDidChangeTabFocus((()=>this._recomputeOptions()))),this._register(this._containerObserver.onDidChange((()=>this._recomputeOptions()))),this._register(no.onDidChange((()=>this._recomputeOptions()))),this._register(Or.onDidChange((()=>this._recomputeOptions()))),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized((()=>this._recomputeOptions())))}_recomputeOptions(){const e=this._computeOptions(),t=ob.checkEquals(this.options,e);null!==t&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=Jr.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),n=this._readFontInfo(t),i={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:n,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:Xm.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return ob.computeOptions(this._validatedOptions,i)}_readEnvConfiguration(){return{extraEditorClassName:ib(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:Br||Fr,pixelRatio:Or.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return no.readFontInfo(e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=ab(e);ob.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=ob.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=function(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};function ib(){let e="";return Wr||Hr||(e+="no-user-select "),Wr&&(e+="no-minimap-shadow ",e+="enable-user-select "),_e&&(e+="mac "),e}nb=eb([tb(3,Zm)],nb);class sb{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class rb{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class ob{static validateOptions(e){const t=new sb;for(const n of Lt){const i="_never_"===n.name?void 0:e[n.name];t._write(n.id,n.validate(i))}return t}static computeOptions(e,t){const n=new rb;for(const i of Lt)n._write(i.id,i.compute(t,n,e._read(i.id)));return n}static _deepEquals(e,t){if("object"!==typeof e||"object"!==typeof t||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return!(!Array.isArray(e)||!Array.isArray(t))&&a(e,t);if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!ob._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let i=!1;for(const s of Lt){const r=!ob._deepEquals(e._read(s.id),t._read(s.id));n[s.id]=r,r&&(i=!0)}return i?new qe(n):null}static applyUpdate(e,t){let n=!1;for(const i of Lt)if(t.hasOwnProperty(i.name)){const s=i.applyUpdate(e[i.name],t[i.name]);e[i.name]=s.newValue,n=n||s.didChange}return n}}function ab(e){const t=z(e);return function(e){Km.items.forEach((t=>t.apply(e)))}(t),t}var lb;!function(e){const t={total:0,min:Number.MAX_VALUE,max:0},n={...t},i={...t},s={...t};let r=0;const o={keydown:0,input:0,render:0};function a(){1===o.keydown&&(performance.mark("keydown/end"),o.keydown=2)}function l(){performance.mark("input/start"),o.input=1,h()}function c(){1===o.input&&(performance.mark("input/end"),o.input=2)}function u(){1===o.render&&(performance.mark("render/end"),o.render=2)}function h(){setTimeout(d)}function d(){2===o.keydown&&2===o.input&&2===o.render&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),f("keydown",t),f("input",n),f("render",i),f("inputlatency",s),r++,performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),o.keydown=0,o.input=0,o.render=0)}function f(e,t){const n=performance.getEntriesByName(e)[0].duration;t.total+=n,t.min=Math.min(t.min,n),t.max=Math.max(t.max,n)}function g(e){return{average:e.total/r,max:e.max,min:e.min}}function p(e){e.total=0,e.min=Number.MAX_VALUE,e.max=0}e.onKeyDown=function(){d(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),o.keydown=1,queueMicrotask(a)},e.onBeforeInput=l,e.onInput=function(){0===o.input&&l(),queueMicrotask(c)},e.onKeyUp=function(){d()},e.onSelectionChange=function(){d()},e.onRenderStart=function(){2===o.keydown&&2===o.input&&0===o.render&&(performance.mark("render/start"),o.render=1,queueMicrotask(u),h())},e.getAndClearMeasurements=function(){if(0===r)return;const e={keydown:g(t),input:g(n),render:g(i),total:g(s),sampleCount:r};return p(t),p(n),p(i),p(s),r=0,e}}(lb||(lb={}));class cb{constructor(){this._hooks=new Xt,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,i,s){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=i,this._onStopCallback=s;let r=e;try{e.setPointerCapture(t),this._hooks.add(Qt((()=>{try{e.releasePointerCapture(t)}catch(n){}})))}catch(o){r=Dc(e)}this._hooks.add(zc(r,ku.POINTER_MOVE,(e=>{e.buttons===n?(e.preventDefault(),this._pointerMoveCallback(e)):this.stopMonitoring(!0)}))),this._hooks.add(zc(r,ku.POINTER_UP,(e=>this.stopMonitoring(!0))))}}function ub(e){return"--vscode-".concat(e.replace(/\./g,"-"))}function hb(e){return"var(".concat(ub(e),")")}const db="base.contributions.colors";const fb=new class{constructor(){this._onDidChangeSchema=new un,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0;const r={id:e,description:n,defaults:t,needsTransparency:i,deprecationMessage:s};this.colorsById[e]=r;const o={type:"string",description:n,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return s&&(o.deprecationMessage=s),i&&(o.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",o.patternErrorMessage="This color must be transparent or it will obscure content"),this.colorSchema.properties[e]=o,this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map((e=>this.colorsById[e]))}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n&&n.defaults){return iy(n.defaults[t.type],t)}}getColorSchema(){return this.colorSchema}toString(){return Object.keys(this.colorsById).sort(((e,t)=>{const n=-1===e.indexOf(".")?0:1,i=-1===t.indexOf(".")?0:1;return n!==i?n-i:e.localeCompare(t)})).map((e=>"- `".concat(e,"`: ").concat(this.colorsById[e].description))).join("\n")}};function gb(e,t,n,i,s){return fb.registerColor(e,t,n,i,s)}ya.add(db,fb);const pb=gb("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},G("foreground","Overall foreground color. This color is only used if not overridden by a component.")),mb=(gb("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},G("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component.")),gb("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},G("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),gb("descriptionForeground",{light:"#717171",dark:ey(pb,.7),hcDark:ey(pb,.7),hcLight:ey(pb,.7)},G("descriptionForeground","Foreground color for description text providing additional information, for example for a label.")),gb("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},G("iconForeground","The default color for icons in the workbench."))),bb=gb("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},G("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),_b=gb("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},G("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),vb=gb("contrastActiveBorder",{light:null,dark:null,hcDark:bb,hcLight:bb},G("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),yb=(gb("selection.background",{light:null,dark:null,hcDark:null,hcLight:null},G("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),gb("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:rp.black,hcLight:"#292929"},G("textSeparatorForeground","Color for text separators.")),gb("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},G("textLinkForeground","Foreground color for links in text."))),Sb=(gb("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#3794FF",hcLight:"#0F4A85"},G("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),gb("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},G("textPreformatForeground","Foreground color for preformatted text segments.")),gb("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},G("textPreformatBackground","Background color for preformatted text segments.")),gb("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},G("textBlockQuoteBackground","Background color for block quotes in text.")),gb("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:rp.white,hcLight:"#292929"},G("textBlockQuoteBorder","Border color for block quotes in text.")),gb("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:rp.black,hcLight:"#F2F2F2"},G("textCodeBlockBackground","Background color for code blocks in text.")),gb("widget.shadow",{dark:ey(rp.black,.36),light:ey(rp.black,.16),hcDark:null,hcLight:null},G("widgetShadow","Shadow color of widgets such as find/replace inside the editor."))),wb=gb("widget.border",{dark:null,light:null,hcDark:_b,hcLight:_b},G("widgetBorder","Border color of widgets such as find/replace inside the editor.")),kb=gb("input.background",{dark:"#3C3C3C",light:rp.white,hcDark:rp.black,hcLight:rp.white},G("inputBoxBackground","Input box background.")),Cb=gb("input.foreground",{dark:pb,light:pb,hcDark:pb,hcLight:pb},G("inputBoxForeground","Input box foreground.")),xb=gb("input.border",{dark:null,light:null,hcDark:_b,hcLight:_b},G("inputBoxBorder","Input box border.")),Eb=gb("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:_b,hcLight:_b},G("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),Lb=(gb("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},G("inputOption.hoverBackground","Background color of activated options in input fields.")),gb("inputOption.activeBackground",{dark:ey(bb,.4),light:ey(bb,.2),hcDark:rp.transparent,hcLight:rp.transparent},G("inputOption.activeBackground","Background hover color of options in input fields."))),Db=gb("inputOption.activeForeground",{dark:rp.white,light:rp.black,hcDark:pb,hcLight:pb},G("inputOption.activeForeground","Foreground color of activated options in input fields.")),Ab=(gb("input.placeholderForeground",{light:ey(pb,.5),dark:ey(pb,.5),hcDark:ey(pb,.7),hcLight:ey(pb,.7)},G("inputPlaceholderForeground","Input box foreground color for placeholder text.")),gb("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:rp.black,hcLight:rp.white},G("inputValidationInfoBackground","Input validation background color for information severity."))),Tb=gb("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:pb},G("inputValidationInfoForeground","Input validation foreground color for information severity.")),Nb=gb("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:_b,hcLight:_b},G("inputValidationInfoBorder","Input validation border color for information severity.")),Ib=gb("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:rp.black,hcLight:rp.white},G("inputValidationWarningBackground","Input validation background color for warning severity.")),$b=gb("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:pb},G("inputValidationWarningForeground","Input validation foreground color for warning severity.")),Mb=gb("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:_b,hcLight:_b},G("inputValidationWarningBorder","Input validation border color for warning severity.")),Rb=gb("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:rp.black,hcLight:rp.white},G("inputValidationErrorBackground","Input validation background color for error severity.")),Ob=gb("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:pb},G("inputValidationErrorForeground","Input validation foreground color for error severity.")),Pb=gb("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:_b,hcLight:_b},G("inputValidationErrorBorder","Input validation border color for error severity.")),Fb=gb("dropdown.background",{dark:"#3C3C3C",light:rp.white,hcDark:rp.black,hcLight:rp.white},G("dropdownBackground","Dropdown background.")),Bb=gb("dropdown.listBackground",{dark:null,light:null,hcDark:rp.black,hcLight:rp.white},G("dropdownListBackground","Dropdown list background.")),zb=gb("dropdown.foreground",{dark:"#F0F0F0",light:pb,hcDark:rp.white,hcLight:pb},G("dropdownForeground","Dropdown foreground.")),Wb=gb("dropdown.border",{dark:Fb,light:"#CECECE",hcDark:_b,hcLight:_b},G("dropdownBorder","Dropdown border.")),Hb=gb("button.foreground",{dark:rp.white,light:rp.white,hcDark:rp.white,hcLight:rp.white},G("buttonForeground","Button foreground color.")),Vb=gb("button.separator",{dark:ey(Hb,.4),light:ey(Hb,.4),hcDark:ey(Hb,.4),hcLight:ey(Hb,.4)},G("buttonSeparator","Button separator color.")),jb=gb("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},G("buttonBackground","Button background color.")),Ub=gb("button.hoverBackground",{dark:Jv(jb,.2),light:Zv(jb,.2),hcDark:jb,hcLight:jb},G("buttonHoverBackground","Button background color when hovering.")),qb=gb("button.border",{dark:_b,light:_b,hcDark:_b,hcLight:_b},G("buttonBorder","Button border color.")),Kb=gb("button.secondaryForeground",{dark:rp.white,light:rp.white,hcDark:rp.white,hcLight:pb},G("buttonSecondaryForeground","Secondary button foreground color.")),Gb=gb("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:rp.white},G("buttonSecondaryBackground","Secondary button background color.")),Yb=gb("button.secondaryHoverBackground",{dark:Jv(Gb,.2),light:Zv(Gb,.2),hcDark:null,hcLight:null},G("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),Qb=gb("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:rp.black,hcLight:"#0F4A85"},G("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),Xb=gb("badge.foreground",{dark:rp.white,light:"#333",hcDark:rp.white,hcLight:rp.white},G("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),Zb=gb("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},G("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),Jb=gb("scrollbarSlider.background",{dark:rp.fromHex("#797979").transparent(.4),light:rp.fromHex("#646464").transparent(.4),hcDark:ey(_b,.6),hcLight:ey(_b,.4)},G("scrollbarSliderBackground","Scrollbar slider background color.")),e_=gb("scrollbarSlider.hoverBackground",{dark:rp.fromHex("#646464").transparent(.7),light:rp.fromHex("#646464").transparent(.7),hcDark:ey(_b,.8),hcLight:ey(_b,.8)},G("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),t_=gb("scrollbarSlider.activeBackground",{dark:rp.fromHex("#BFBFBF").transparent(.4),light:rp.fromHex("#000000").transparent(.6),hcDark:_b,hcLight:_b},G("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),n_=gb("progressBar.background",{dark:rp.fromHex("#0E70C0"),light:rp.fromHex("#0E70C0"),hcDark:_b,hcLight:_b},G("progressBarBackground","Background color of the progress bar that can show for long running operations.")),i_=(gb("editorError.background",{dark:null,light:null,hcDark:null,hcLight:null},G("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),gb("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},G("editorError.foreground","Foreground color of error squigglies in the editor."))),s_=(gb("editorError.border",{dark:null,light:null,hcDark:rp.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},G("errorBorder","If set, color of double underlines for errors in the editor.")),gb("editorWarning.background",{dark:null,light:null,hcDark:null,hcLight:null},G("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0)),r_=gb("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},G("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),o_=gb("editorWarning.border",{dark:null,light:null,hcDark:rp.fromHex("#FFCC00").transparent(.8),hcLight:rp.fromHex("#FFCC00").transparent(.8)},G("warningBorder","If set, color of double underlines for warnings in the editor.")),a_=(gb("editorInfo.background",{dark:null,light:null,hcDark:null,hcLight:null},G("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),gb("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},G("editorInfo.foreground","Foreground color of info squigglies in the editor."))),l_=gb("editorInfo.border",{dark:null,light:null,hcDark:rp.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},G("infoBorder","If set, color of double underlines for infos in the editor.")),c_=gb("editorHint.foreground",{dark:rp.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},G("editorHint.foreground","Foreground color of hint squigglies in the editor.")),u_=(gb("editorHint.border",{dark:null,light:null,hcDark:rp.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},G("hintBorder","If set, color of double underlines for hints in the editor.")),gb("sash.hoverBorder",{dark:bb,light:bb,hcDark:bb,hcLight:bb},G("sashActiveBorder","Border color of active sashes.")),gb("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:rp.black,hcLight:rp.white},G("editorBackground","Editor background color."))),h_=gb("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:rp.white,hcLight:pb},G("editorForeground","Editor default foreground color.")),d_=(gb("editorStickyScroll.background",{light:u_,dark:u_,hcDark:u_,hcLight:u_},G("editorStickyScrollBackground","Background color of sticky scroll in the editor")),gb("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:rp.fromHex("#0F4A85").transparent(.1)},G("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor")),gb("editorStickyScroll.border",{dark:null,light:null,hcDark:_b,hcLight:_b},G("editorStickyScrollBorder","Border color of sticky scroll in the editor")),gb("editorStickyScroll.shadow",{dark:Zb,light:Zb,hcDark:Zb,hcLight:Zb},G("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor")),gb("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:rp.white},G("editorWidgetBackground","Background color of editor widgets, such as find/replace."))),f_=gb("editorWidget.foreground",{dark:pb,light:pb,hcDark:pb,hcLight:pb},G("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),g_=gb("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:_b,hcLight:_b},G("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),p_=(gb("editorWidget.resizeBorder",{light:null,dark:null,hcDark:null,hcLight:null},G("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),gb("quickInput.background",{dark:d_,light:d_,hcDark:d_,hcLight:d_},G("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette."))),m_=gb("quickInput.foreground",{dark:f_,light:f_,hcDark:f_,hcLight:f_},G("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),b_=gb("quickInputTitle.background",{dark:new rp(new np(255,255,255,.105)),light:new rp(new np(0,0,0,.06)),hcDark:"#000000",hcLight:rp.white},G("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),__=gb("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:rp.white,hcLight:"#0F4A85"},G("pickerGroupForeground","Quick picker color for grouping labels.")),v_=gb("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:rp.white,hcLight:"#0F4A85"},G("pickerGroupBorder","Quick picker color for grouping borders.")),y_=gb("keybindingLabel.background",{dark:new rp(new np(128,128,128,.17)),light:new rp(new np(221,221,221,.4)),hcDark:rp.transparent,hcLight:rp.transparent},G("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),S_=gb("keybindingLabel.foreground",{dark:rp.fromHex("#CCCCCC"),light:rp.fromHex("#555555"),hcDark:rp.white,hcLight:pb},G("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),w_=gb("keybindingLabel.border",{dark:new rp(new np(51,51,51,.6)),light:new rp(new np(204,204,204,.4)),hcDark:new rp(new np(111,195,223)),hcLight:_b},G("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),k_=gb("keybindingLabel.bottomBorder",{dark:new rp(new np(68,68,68,.6)),light:new rp(new np(187,187,187,.4)),hcDark:new rp(new np(111,195,223)),hcLight:pb},G("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),C_=gb("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},G("editorSelectionBackground","Color of the editor selection.")),x_=gb("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:rp.white},G("editorSelectionForeground","Color of the selected text for high contrast.")),E_=gb("editor.inactiveSelectionBackground",{light:ey(C_,.5),dark:ey(C_,.5),hcDark:ey(C_,.7),hcLight:ey(C_,.5)},G("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),L_=gb("editor.selectionHighlightBackground",{light:ny(C_,u_,.3,.6),dark:ny(C_,u_,.3,.6),hcDark:null,hcLight:null},G("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),D_=(gb("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:vb,hcLight:vb},G("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),gb("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},G("editorFindMatch","Color of the current search match.")),gb("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},G("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0)),A_=(gb("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},G("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),gb("editor.findMatchBorder",{light:null,dark:null,hcDark:vb,hcLight:vb},G("editorFindMatchBorder","Border color of the current search match.")),gb("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:vb,hcLight:vb},G("findMatchHighlightBorder","Border color of the other search matches."))),T_=(gb("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:ey(vb,.4),hcLight:ey(vb,.4)},G("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),gb("searchEditor.findMatchBackground",{light:ey(D_,.66),dark:ey(D_,.66),hcDark:D_,hcLight:D_},G("searchEditor.queryMatch","Color of the Search Editor query matches.")),gb("searchEditor.findMatchBorder",{light:ey(A_,.66),dark:ey(A_,.66),hcDark:A_,hcLight:A_},G("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches.")),gb("search.resultsInfoForeground",{light:pb,dark:ey(pb,.65),hcDark:pb,hcLight:pb},G("search.resultsInfoForeground","Color of the text in the search viewlet's completion message.")),gb("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},G("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),gb("editorHoverWidget.background",{light:d_,dark:d_,hcDark:d_,hcLight:d_},G("hoverBackground","Background color of the editor hover."))),N_=(gb("editorHoverWidget.foreground",{light:f_,dark:f_,hcDark:f_,hcLight:f_},G("hoverForeground","Foreground color of the editor hover.")),gb("editorHoverWidget.border",{light:g_,dark:g_,hcDark:g_,hcLight:g_},G("hoverBorder","Border color of the editor hover."))),I_=(gb("editorHoverWidget.statusBarBackground",{dark:Jv(T_,.2),light:Zv(T_,.05),hcDark:d_,hcLight:d_},G("statusBarBackground","Background color of the editor hover status bar.")),gb("editorLink.activeForeground",{dark:"#4E94CE",light:rp.blue,hcDark:rp.cyan,hcLight:"#292929"},G("activeLinkForeground","Color of active links.")),gb("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:rp.white,hcLight:rp.black},G("editorInlayHintForeground","Foreground color of inline hints"))),$_=gb("editorInlayHint.background",{dark:ey(Qb,.1),light:ey(Qb,.1),hcDark:ey(rp.white,.1),hcLight:ey(Qb,.1)},G("editorInlayHintBackground","Background color of inline hints")),M_=(gb("editorInlayHint.typeForeground",{dark:I_,light:I_,hcDark:I_,hcLight:I_},G("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),gb("editorInlayHint.typeBackground",{dark:$_,light:$_,hcDark:$_,hcLight:$_},G("editorInlayHintBackgroundTypes","Background color of inline hints for types")),gb("editorInlayHint.parameterForeground",{dark:I_,light:I_,hcDark:I_,hcLight:I_},G("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),gb("editorInlayHint.parameterBackground",{dark:$_,light:$_,hcDark:$_,hcLight:$_},G("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),gb("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},G("editorLightBulbForeground","The color used for the lightbulb actions icon."))),R_=(gb("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},G("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),gb("editorLightBulbAi.foreground",{dark:M_,light:M_,hcDark:M_,hcLight:M_},G("editorLightBulbAiForeground","The color used for the lightbulb AI icon.")),new rp(new np(155,185,85,.2))),O_=new rp(new np(255,0,0,.2)),P_=gb("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},G("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),F_=gb("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},G("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),B_=(gb("diffEditor.insertedLineBackground",{dark:R_,light:R_,hcDark:null,hcLight:null},G("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),gb("diffEditor.removedLineBackground",{dark:O_,light:O_,hcDark:null,hcLight:null},G("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),gb("diffEditorGutter.insertedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},G("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),gb("diffEditorGutter.removedLineBackground",{dark:null,light:null,hcDark:null,hcLight:null},G("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),gb("diffEditorOverview.insertedForeground",{dark:null,light:null,hcDark:null,hcLight:null},G("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content."))),z_=gb("diffEditorOverview.removedForeground",{dark:null,light:null,hcDark:null,hcLight:null},G("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),W_=(gb("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},G("diffEditorInsertedOutline","Outline color for the text that got inserted.")),gb("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},G("diffEditorRemovedOutline","Outline color for text that got removed.")),gb("diffEditor.border",{dark:null,light:null,hcDark:_b,hcLight:_b},G("diffEditorBorder","Border color between the two text editors.")),gb("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},G("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),gb("diffEditor.unchangedRegionBackground",{dark:"sideBar.background",light:"sideBar.background",hcDark:"sideBar.background",hcLight:"sideBar.background"},G("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor.")),gb("diffEditor.unchangedRegionForeground",{dark:"foreground",light:"foreground",hcDark:"foreground",hcLight:"foreground"},G("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor.")),gb("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},G("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor.")),gb("list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},G("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not."))),H_=gb("list.focusForeground",{dark:null,light:null,hcDark:null,hcLight:null},G("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),V_=gb("list.focusOutline",{dark:bb,light:bb,hcDark:vb,hcLight:vb},G("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),j_=gb("list.focusAndSelectionOutline",{dark:null,light:null,hcDark:null,hcLight:null},G("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),U_=gb("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:rp.fromHex("#0F4A85").transparent(.1)},G("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),q_=gb("list.activeSelectionForeground",{dark:rp.white,light:rp.white,hcDark:null,hcLight:null},G("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),K_=gb("list.activeSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},G("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),G_=gb("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:rp.fromHex("#0F4A85").transparent(.1)},G("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Y_=gb("list.inactiveSelectionForeground",{dark:null,light:null,hcDark:null,hcLight:null},G("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Q_=gb("list.inactiveSelectionIconForeground",{dark:null,light:null,hcDark:null,hcLight:null},G("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),X_=gb("list.inactiveFocusBackground",{dark:null,light:null,hcDark:null,hcLight:null},G("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Z_=gb("list.inactiveFocusOutline",{dark:null,light:null,hcDark:null,hcLight:null},G("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),J_=gb("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:rp.white.transparent(.1),hcLight:rp.fromHex("#0F4A85").transparent(.1)},G("listHoverBackground","List/Tree background when hovering over items using the mouse.")),ev=gb("list.hoverForeground",{dark:null,light:null,hcDark:null,hcLight:null},G("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),tv=gb("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},G("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),nv=gb("list.dropBetweenBackground",{dark:mb,light:mb,hcDark:null,hcLight:null},G("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),iv=gb("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:bb,hcLight:bb},G("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree."));gb("list.focusHighlightForeground",{dark:iv,light:(sv=U_,rv=iv,ov="#BBE7FF",{op:6,if:sv,then:rv,else:ov}),hcDark:iv,hcLight:iv},G("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));var sv,rv,ov;gb("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},G("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),gb("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},G("listErrorForeground","Foreground color of list items containing errors.")),gb("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},G("listWarningForeground","Foreground color of list items containing warnings."));const av=gb("listFilterWidget.background",{light:Zv(d_,0),dark:Jv(d_,0),hcDark:d_,hcLight:d_},G("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),lv=gb("listFilterWidget.outline",{dark:rp.transparent,light:rp.transparent,hcDark:"#f38518",hcLight:"#007ACC"},G("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),cv=gb("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:_b,hcLight:_b},G("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),uv=gb("listFilterWidget.shadow",{dark:Sb,light:Sb,hcDark:Sb,hcLight:Sb},G("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees.")),hv=(gb("list.filterMatchBackground",{dark:D_,light:D_,hcDark:null,hcLight:null},G("listFilterMatchHighlight","Background color of the filtered match.")),gb("list.filterMatchBorder",{dark:A_,light:A_,hcDark:_b,hcLight:vb},G("listFilterMatchHighlightBorder","Border color of the filtered match.")),gb("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},G("treeIndentGuidesStroke","Tree stroke color for the indentation guides."))),dv=gb("tree.inactiveIndentGuidesStroke",{dark:ey(hv,.4),light:ey(hv,.4),hcDark:ey(hv,.4),hcLight:ey(hv,.4)},G("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),fv=gb("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},G("tableColumnsBorder","Table border color between columns.")),gv=gb("tree.tableOddRowsBackground",{dark:ey(pb,.04),light:ey(pb,.04),hcDark:null,hcLight:null},G("tableOddRowsBackgroundColor","Background color for odd table rows.")),pv=(gb("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},G("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized. ")),gb("checkbox.background",{dark:Fb,light:Fb,hcDark:Fb,hcLight:Fb},G("checkbox.background","Background color of checkbox widget."))),mv=(gb("checkbox.selectBackground",{dark:d_,light:d_,hcDark:d_,hcLight:d_},G("checkbox.select.background","Background color of checkbox widget when the element it's in is selected.")),gb("checkbox.foreground",{dark:zb,light:zb,hcDark:zb,hcLight:zb},G("checkbox.foreground","Foreground color of checkbox widget."))),bv=gb("checkbox.border",{dark:Wb,light:Wb,hcDark:Wb,hcLight:Wb},G("checkbox.border","Border color of checkbox widget.")),_v=(gb("checkbox.selectBorder",{dark:mb,light:mb,hcDark:mb,hcLight:mb},G("checkbox.select.border","Border color of checkbox widget when the element it's in is selected.")),gb("quickInput.list.focusBackground",{dark:null,light:null,hcDark:null,hcLight:null},"",void 0,G("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead"))),vv=gb("quickInputList.focusForeground",{dark:q_,light:q_,hcDark:q_,hcLight:q_},G("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),yv=gb("quickInputList.focusIconForeground",{dark:K_,light:K_,hcDark:K_,hcLight:K_},G("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),Sv=gb("quickInputList.focusBackground",{dark:ty(_v,U_),light:ty(_v,U_),hcDark:null,hcLight:null},G("quickInput.listFocusBackground","Quick picker background color for the focused item.")),wv=gb("menu.border",{dark:null,light:null,hcDark:_b,hcLight:_b},G("menuBorder","Border color of menus.")),kv=gb("menu.foreground",{dark:zb,light:zb,hcDark:zb,hcLight:zb},G("menuForeground","Foreground color of menu items.")),Cv=gb("menu.background",{dark:Fb,light:Fb,hcDark:Fb,hcLight:Fb},G("menuBackground","Background color of menu items.")),xv=gb("menu.selectionForeground",{dark:q_,light:q_,hcDark:q_,hcLight:q_},G("menuSelectionForeground","Foreground color of the selected menu item in menus.")),Ev=gb("menu.selectionBackground",{dark:U_,light:U_,hcDark:U_,hcLight:U_},G("menuSelectionBackground","Background color of the selected menu item in menus.")),Lv=gb("menu.selectionBorder",{dark:null,light:null,hcDark:vb,hcLight:vb},G("menuSelectionBorder","Border color of the selected menu item in menus.")),Dv=gb("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:_b,hcLight:_b},G("menuSeparatorBackground","Color of a separator menu item in menus.")),Av=gb("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},G("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),Tv=(gb("toolbar.hoverOutline",{dark:null,light:null,hcDark:vb,hcLight:vb},G("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse")),gb("toolbar.activeBackground",{dark:Jv(Av,.1),light:Zv(Av,.1),hcDark:null,hcLight:null},G("toolbarActiveBackground","Toolbar background when holding the mouse over actions")),gb("editor.snippetTabstopHighlightBackground",{dark:new rp(new np(124,124,124,.3)),light:new rp(new np(10,50,100,.2)),hcDark:new rp(new np(124,124,124,.3)),hcLight:new rp(new np(10,50,100,.2))},G("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),gb("editor.snippetTabstopHighlightBorder",{dark:null,light:null,hcDark:null,hcLight:null},G("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),gb("editor.snippetFinalTabstopHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},G("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),gb("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new rp(new np(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},G("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),gb("breadcrumb.foreground",{light:ey(pb,.8),dark:ey(pb,.8),hcDark:ey(pb,.8),hcLight:ey(pb,.8)},G("breadcrumbsFocusForeground","Color of focused breadcrumb items."))),Nv=gb("breadcrumb.background",{light:u_,dark:u_,hcDark:u_,hcLight:u_},G("breadcrumbsBackground","Background color of breadcrumb items.")),Iv=gb("breadcrumb.focusForeground",{light:Zv(pb,.2),dark:Jv(pb,.1),hcDark:Jv(pb,.1),hcLight:Jv(pb,.1)},G("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),$v=gb("breadcrumb.activeSelectionForeground",{light:Zv(pb,.2),dark:Jv(pb,.1),hcDark:Jv(pb,.1),hcLight:Jv(pb,.1)},G("breadcrumbsSelectedForeground","Color of selected breadcrumb items.")),Mv=(gb("breadcrumbPicker.background",{light:d_,dark:d_,hcDark:d_,hcLight:d_},G("breadcrumbsSelectedBackground","Background color of breadcrumb item picker.")),rp.fromHex("#40C8AE").transparent(.5)),Rv=rp.fromHex("#40A6FF").transparent(.5),Ov=rp.fromHex("#606060").transparent(.4),Pv=.4,Fv=gb("merge.currentHeaderBackground",{dark:Mv,light:Mv,hcDark:null,hcLight:null},G("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),Bv=(gb("merge.currentContentBackground",{dark:ey(Fv,Pv),light:ey(Fv,Pv),hcDark:ey(Fv,Pv),hcLight:ey(Fv,Pv)},G("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),gb("merge.incomingHeaderBackground",{dark:Rv,light:Rv,hcDark:null,hcLight:null},G("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0)),zv=(gb("merge.incomingContentBackground",{dark:ey(Bv,Pv),light:ey(Bv,Pv),hcDark:ey(Bv,Pv),hcLight:ey(Bv,Pv)},G("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),gb("merge.commonHeaderBackground",{dark:Ov,light:Ov,hcDark:null,hcLight:null},G("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0)),Wv=(gb("merge.commonContentBackground",{dark:ey(zv,Pv),light:ey(zv,Pv),hcDark:ey(zv,Pv),hcLight:ey(zv,Pv)},G("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),gb("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},G("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."))),Hv=(gb("editorOverviewRuler.currentContentForeground",{dark:ey(Fv,1),light:ey(Fv,1),hcDark:Wv,hcLight:Wv},G("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts.")),gb("editorOverviewRuler.incomingContentForeground",{dark:ey(Bv,1),light:ey(Bv,1),hcDark:Wv,hcLight:Wv},G("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts.")),gb("editorOverviewRuler.commonContentForeground",{dark:ey(zv,1),light:ey(zv,1),hcDark:Wv,hcLight:Wv},G("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts.")),gb("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},G("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),gb("editorOverviewRuler.selectionHighlightForeground",{dark:"#A0A0A0CC",light:"#A0A0A0CC",hcDark:"#A0A0A0CC",hcLight:"#A0A0A0CC"},G("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),gb("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},G("minimapFindMatchHighlight","Minimap marker color for find matches."),!0)),Vv=(gb("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},G("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),gb("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},G("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0)),jv=gb("minimap.infoHighlight",{dark:a_,light:a_,hcDark:l_,hcLight:l_},G("minimapInfo","Minimap marker color for infos.")),Uv=gb("minimap.warningHighlight",{dark:r_,light:r_,hcDark:o_,hcLight:o_},G("overviewRuleWarning","Minimap marker color for warnings.")),qv=gb("minimap.errorHighlight",{dark:new rp(new np(255,18,18,.7)),light:new rp(new np(255,18,18,.7)),hcDark:new rp(new np(255,50,50,1)),hcLight:"#B5200D"},G("minimapError","Minimap marker color for errors.")),Kv=gb("minimap.background",{dark:null,light:null,hcDark:null,hcLight:null},G("minimapBackground","Minimap background color.")),Gv=gb("minimap.foregroundOpacity",{dark:rp.fromHex("#000f"),light:rp.fromHex("#000f"),hcDark:rp.fromHex("#000f"),hcLight:rp.fromHex("#000f")},G("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),Yv=(gb("minimapSlider.background",{light:ey(Jb,.5),dark:ey(Jb,.5),hcDark:ey(Jb,.5),hcLight:ey(Jb,.5)},G("minimapSliderBackground","Minimap slider background color.")),gb("minimapSlider.hoverBackground",{light:ey(e_,.5),dark:ey(e_,.5),hcDark:ey(e_,.5),hcLight:ey(e_,.5)},G("minimapSliderHoverBackground","Minimap slider background color when hovering.")),gb("minimapSlider.activeBackground",{light:ey(t_,.5),dark:ey(t_,.5),hcDark:ey(t_,.5),hcLight:ey(t_,.5)},G("minimapSliderActiveBackground","Minimap slider background color when clicked on.")),gb("problemsErrorIcon.foreground",{dark:i_,light:i_,hcDark:i_,hcLight:i_},G("problemsErrorIconForeground","The color used for the problems error icon."))),Qv=gb("problemsWarningIcon.foreground",{dark:r_,light:r_,hcDark:r_,hcLight:r_},G("problemsWarningIconForeground","The color used for the problems warning icon.")),Xv=gb("problemsInfoIcon.foreground",{dark:a_,light:a_,hcDark:a_,hcLight:a_},G("problemsInfoIconForeground","The color used for the problems info icon."));gb("charts.foreground",{dark:pb,light:pb,hcDark:pb,hcLight:pb},G("chartsForeground","The foreground color used in charts.")),gb("charts.lines",{dark:ey(pb,.5),light:ey(pb,.5),hcDark:ey(pb,.5),hcLight:ey(pb,.5)},G("chartsLines","The color used for horizontal lines in charts.")),gb("charts.red",{dark:i_,light:i_,hcDark:i_,hcLight:i_},G("chartsRed","The red color used in chart visualizations.")),gb("charts.blue",{dark:a_,light:a_,hcDark:a_,hcLight:a_},G("chartsBlue","The blue color used in chart visualizations.")),gb("charts.yellow",{dark:r_,light:r_,hcDark:r_,hcLight:r_},G("chartsYellow","The yellow color used in chart visualizations.")),gb("charts.orange",{dark:Hv,light:Hv,hcDark:Hv,hcLight:Hv},G("chartsOrange","The orange color used in chart visualizations.")),gb("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},G("chartsGreen","The green color used in chart visualizations.")),gb("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},G("chartsPurple","The purple color used in chart visualizations."));function Zv(e,t){return{op:0,value:e,factor:t}}function Jv(e,t){return{op:1,value:e,factor:t}}function ey(e,t){return{op:2,value:e,factor:t}}function ty(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{op:4,values:t}}function ny(e,t,n,i){return{op:5,value:e,background:t,factor:n,transparency:i}}function iy(e,t){if(null!==e)return"string"===typeof e?"#"===e[0]?rp.fromHex(e):t.getColor(e):e instanceof rp?e:"object"===typeof e?function(e,t){var n,i,s,r;switch(e.op){case 0:return null===(n=iy(e.value,t))||void 0===n?void 0:n.darken(e.factor);case 1:return null===(i=iy(e.value,t))||void 0===i?void 0:i.lighten(e.factor);case 2:return null===(s=iy(e.value,t))||void 0===s?void 0:s.transparent(e.factor);case 3:{const n=iy(e.background,t);return n?null===(r=iy(e.value,t))||void 0===r?void 0:r.makeOpaque(n):iy(e.value,t)}case 4:for(const n of e.values){const e=iy(n,t);if(e)return e}return;case 6:return iy(t.defines(e.if)?e.then:e.else,t);case 5:{const n=iy(e.value,t);if(!n)return;const i=iy(e.background,t);return i?n.isDarkerThan(i)?rp.getLighterColor(n,i,e.factor).transparent(e.transparency):rp.getDarkerColor(n,i,e.factor).transparent(e.transparency):n.transparent(e.factor*e.transparency)}default:throw ma(e)}}(e,t):void 0}const sy="vscode://schemas/workbench-colors",ry=ya.as(_d);ry.registerSchema(sy,fb.getColorSchema());const oy=new ol((()=>ry.notifySchemaChanged(sy)),200);fb.onDidChangeSchema((()=>{oy.isScheduled()||oy.schedule()}));class ay{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new ly(this.x-e.scrollX,this.y-e.scrollY)}}class ly{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new ay(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class cy{constructor(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i,this._editorPagePositionBrand=void 0}}class uy{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function hy(e){const t=Zc(e);return new cy(t.left,t.top,t.width,t.height)}function dy(e,t,n){const i=t.width/e.offsetWidth,s=t.height/e.offsetHeight,r=(n.x-t.x)/i,o=(n.y-t.y)/s;return new uy(r,o)}class fy extends Ga{constructor(e,t,n){super(Dc(n),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new ay(this.posx,this.posy),this.editorPos=hy(n),this.relativePos=dy(n,this.editorPos,this.pos)}}class gy{constructor(e){this._editorViewDomNode=e}_create(e){return new fy(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return zc(e,"contextmenu",(e=>{t(this._create(e))}))}onMouseUp(e,t){return zc(e,"mouseup",(e=>{t(this._create(e))}))}onMouseDown(e,t){return zc(e,ku.MOUSE_DOWN,(e=>{t(this._create(e))}))}onPointerDown(e,t){return zc(e,ku.POINTER_DOWN,(e=>{t(this._create(e),e.pointerId)}))}onMouseLeave(e,t){return zc(e,ku.MOUSE_LEAVE,(e=>{t(this._create(e))}))}onMouseMove(e,t){return zc(e,"mousemove",(e=>t(this._create(e))))}}class py{constructor(e){this._editorViewDomNode=e}_create(e){return new fy(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return zc(e,"pointerup",(e=>{t(this._create(e))}))}onPointerDown(e,t){return zc(e,ku.POINTER_DOWN,(e=>{t(this._create(e),e.pointerId)}))}onPointerLeave(e,t){return zc(e,ku.POINTER_LEAVE,(e=>{t(this._create(e))}))}onPointerMove(e,t){return zc(e,"pointermove",(e=>t(this._create(e))))}}class my extends Zt{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new cb),this._keydownListener=null}startMonitoring(e,t,n,i,s){this._keydownListener=Hc(e.ownerDocument,"keydown",(e=>{e.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,e.browserEvent)}),!0),this._globalPointerMoveMonitor.startMonitoring(e,t,n,(e=>{i(new fy(e,!0,this._editorViewDomNode))}),(e=>{this._keydownListener.dispose(),s(e)}))}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}class by{constructor(e){this._editor=e,this._instanceId=++by._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new ol((()=>this.garbageCollect()),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const i=this._counter++;n=new _y(t,"dyn-rule-".concat(this._instanceId,"-").concat(i),au(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}}by._idPool=0;class _y{constructor(e,t,n,i){this.key=e,this.className=t,this.properties=i,this._referenceCount=0,this._styleElementDisposables=new Xt,this._styleElement=gu(n,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=".".concat(e," {");for(const i in t){const e=t[i];let s;s="object"===typeof e?hb(e.id):e;const r=vy(i);n+="\n\t".concat(r,": ").concat(s,";")}return n+="\n}",n}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function vy(e){return e.replace(/(^[A-Z])/,(e=>{let[t]=e;return t.toLowerCase()})).replace(/([A-Z])/g,(e=>{let[t]=e;return"-".concat(t.toLowerCase())}))}class yy extends Zt{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,i=e.length;n<i;n++){const i=e[n];switch(i.type){case 0:this.onCompositionStart(i)&&(t=!0);break;case 1:this.onCompositionEnd(i)&&(t=!0);break;case 2:this.onConfigurationChanged(i)&&(t=!0);break;case 3:this.onCursorStateChanged(i)&&(t=!0);break;case 4:this.onDecorationsChanged(i)&&(t=!0);break;case 5:this.onFlushed(i)&&(t=!0);break;case 6:this.onFocusChanged(i)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(i)&&(t=!0);break;case 8:this.onLineMappingChanged(i)&&(t=!0);break;case 9:this.onLinesChanged(i)&&(t=!0);break;case 10:this.onLinesDeleted(i)&&(t=!0);break;case 11:this.onLinesInserted(i)&&(t=!0);break;case 12:this.onRevealRangeRequest(i)&&(t=!0);break;case 13:this.onScrollChanged(i)&&(t=!0);break;case 15:this.onTokensChanged(i)&&(t=!0);break;case 14:this.onThemeChanged(i)&&(t=!0);break;case 16:this.onTokensColorsChanged(i)&&(t=!0);break;case 17:this.onZonesChanged(i)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(i)}}t&&(this._shouldRender=!0)}}class Sy extends yy{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class wy{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return null===t?0:parseInt(t,10)}static collect(e,t){const n=[];let i=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[i++]=this.read(e)),e=e.parentElement;const s=new Uint8Array(i);for(let r=0;r<i;r++)s[r]=n[i-r-1];return s}}class ky{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class Cy extends ky{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class xy{constructor(e,t,n,i){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n,this.continuesOnNextLine=i}}class Ey{static from(e){const t=new Array(e.length);for(let n=0,i=e.length;n<i;n++){const i=e[n];t[n]=new Ey(i.left,i.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return"[".concat(this.left,",").concat(this.width,"]")}}class Ly{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return"[".concat(this.left,",").concat(this.width,"]")}static compare(e,t){return e.left-t.left}}class Dy{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class Ay{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class Ty{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,i,s){const r=this._createRange();try{return r.setStart(e,t),r.setEnd(n,i),r.getClientRects()}catch(zY){return null}finally{this._detachRange(r,s)}}static _mergeAdjacentRanges(e){if(1===e.length)return e;e.sort(Ly.compare);const t=[];let n=0,i=e[0];for(let s=1,r=e.length;s<r;s++){const r=e[s];i.left+i.width+.9>=r.left?i.width=Math.max(i.width,r.left+r.width-i.left):(t[n++]=i,i=r)}return t[n++]=i,t}static _createHorizontalRangesFromClientRects(e,t,n){if(!e||0===e.length)return null;const i=[];for(let s=0,r=e.length;s<r;s++){const r=e[s];i[s]=new Ly(Math.max(0,(r.left-t)/n),r.width/n)}return this._mergeAdjacentRanges(i)}static readHorizontalRanges(e,t,n,i,s,r){const o=e.children.length-1;if(0>o)return null;if((t=Math.min(o,Math.max(0,t)))===(i=Math.min(o,Math.max(0,i)))&&n===s&&0===n&&!e.children[t].firstChild){const n=e.children[t].getClientRects();return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(n,r.clientRectDeltaLeft,r.clientRectScale)}t!==i&&i>0&&0===s&&(i--,s=1073741824);let a=e.children[t].firstChild,l=e.children[i].firstChild;if(a&&l||(!a&&0===n&&t>0&&(a=e.children[t-1].firstChild,n=1073741824),!l&&0===s&&i>0&&(l=e.children[i-1].firstChild,s=1073741824)),!a||!l)return null;n=Math.min(a.textContent.length,Math.max(0,n)),s=Math.min(l.textContent.length,Math.max(0,s));const c=this._readClientRects(a,n,l,s,r.endNode);return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(c,r.clientRectDeltaLeft,r.clientRectScale)}}var Ny;function Iy(e){return e===Ny.HIGH_CONTRAST_DARK||e===Ny.HIGH_CONTRAST_LIGHT}function $y(e){return e===Ny.DARK||e===Ny.HIGH_CONTRAST_DARK}!function(e){e.DARK="dark",e.LIGHT="light",e.HIGH_CONTRAST_DARK="hcDark",e.HIGH_CONTRAST_LIGHT="hcLight"}(Ny||(Ny={}));const My=!!ye||!(ve||Fr||Wr);let Ry=!0;class Oy{constructor(e,t){this.themeType=t;const n=e.options,i=n.get(50),s=n.get(38);this.renderWhitespace="off"===s?n.get(98):"none",this.renderControlCharacters=n.get(93),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.useMonospaceOptimizations=i.isMonospace&&!n.get(33),this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(66),this.stopRenderingLineAfter=n.get(116),this.fontLigatures=n.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}class Py{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(!this._renderedViewLine)throw new Error("I have no rendered view line to set the dom node to...");this._renderedViewLine.domNode=Kr(e)}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return!(!Iy(this._options.themeType)&&"selection"!==this._options.renderWhitespace)&&(this._isMaybeInvalid=!0,!0)}renderLine(e,t,n,i){if(!1===this._isMaybeInvalid)return!1;this._isMaybeInvalid=!1;const s=n.getViewLineRenderingData(e),r=this._options,o=Fp.filter(s.inlineDecorations,e,s.minColumn,s.maxColumn);let a=null;if(Iy(r.themeType)||"selection"===this._options.renderWhitespace){const t=n.selections;for(const n of t){if(n.endLineNumber<e||n.startLineNumber>e)continue;const t=n.startLineNumber===e?n.startColumn:s.minColumn,i=n.endLineNumber===e?n.endColumn:s.maxColumn;t<i&&(Iy(r.themeType)&&o.push(new Fp(t,i,"inline-selected-text",0)),"selection"===this._options.renderWhitespace&&(a||(a=[]),a.push(new Vp(t-1,i-1))))}}const l=new jp(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,s.content,s.continuesWithWrappedLine,s.isBasicASCII,s.containsRTL,s.minColumn-1,s.tokens,o,s.tabSize,s.startVisibleColumn,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==ht.OFF,a);if(this._renderedViewLine&&this._renderedViewLine.input.equals(l))return!1;i.appendString('<div style="top:'),i.appendString(String(t)),i.appendString("px;height:"),i.appendString(String(this._options.lineHeight)),i.appendString('px;" class="'),i.appendString(Py.CLASS_NAME),i.appendString('">');const c=Gp(l,i);i.appendString("</div>");let u=null;return Ry&&My&&s.isBasicASCII&&r.useMonospaceOptimizations&&0===c.containsForeignElements&&(u=new Fy(this._renderedViewLine?this._renderedViewLine.domNode:null,l,c.characterMapping)),u||(u=Wy(this._renderedViewLine?this._renderedViewLine.domNode:null,l,c.characterMapping,c.containsRTL,c.containsForeignElements)),this._renderedViewLine=u,!0}layoutLine(e,t){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(this._options.lineHeight))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return!this._renderedViewLine||this._renderedViewLine.getWidthIsFast()}needsMonospaceFontCheck(){return!!this._renderedViewLine&&this._renderedViewLine instanceof Fy}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof Fy?this._renderedViewLine.monospaceAssumptionsAreValid():Ry}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof Fy&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,i){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const s=this._renderedViewLine.input.stopRenderingLineAfter;if(-1!==s&&t>s+1&&n>s+1)return new Ay(!0,[new Ly(this.getWidth(i),0)]);-1!==s&&t>s+1&&(t=s+1),-1!==s&&n>s+1&&(n=s+1);const r=this._renderedViewLine.getVisibleRangesForRange(e,t,n,i);return r&&r.length>0?new Ay(!1,r):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}}Py.CLASS_NAME="view-line";class Fy{constructor(e,t,n){this._cachedWidth=-1,this.domNode=e,this.input=t;const i=Math.floor(t.lineContent.length/300);if(i>0){this._keyColumnPixelOffsetCache=new Float32Array(i);for(let e=0;e<i;e++)this._keyColumnPixelOffsetCache[e]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const e=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*e)}return-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,null===e||void 0===e||e.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||-1!==this._cachedWidth}monospaceAssumptionsAreValid(){if(!this.domNode)return Ry;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),Ry=!1)}return Ry}toSlowRenderedLine(){return Wy(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,i){const s=this._getColumnPixelOffset(e,t,i),r=this._getColumnPixelOffset(e,n,i);return[new Ly(s,r-s)]}_getColumnPixelOffset(e,t,n){if(t<=300){const e=this._characterMapping.getHorizontalOffset(t);return this._charWidth*e}const i=Math.floor((t-1)/300)-1,s=300*(i+1)+1;let r=-1;if(this._keyColumnPixelOffsetCache&&(r=this._keyColumnPixelOffsetCache[i],-1===r&&(r=this._actualReadPixelOffset(e,s,n),this._keyColumnPixelOffsetCache[i]=r)),-1===r){const e=this._characterMapping.getHorizontalOffset(t);return this._charWidth*e}const o=this._characterMapping.getHorizontalOffset(s),a=this._characterMapping.getHorizontalOffset(t);return r+this._charWidth*(a-o)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,n){if(!this.domNode)return-1;const i=this._characterMapping.getDomPosition(t),s=Ty.readHorizontalRanges(this._getReadingTarget(this.domNode),i.partIndex,i.charIndex,i.partIndex,i.charIndex,n);return s&&0!==s.length?s[0].left:-1}getColumnOfNodeOffset(e,t){return jy(this._characterMapping,e,t)}}class By{constructor(e,t,n,i,s){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=s,this._cachedWidth=-1,this._pixelOffsetCache=null,!i||0===this._characterMapping.length){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let e=0,t=this._characterMapping.length;e<=t;e++)this._pixelOffsetCache[e]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(-1===this._cachedWidth&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,null===e||void 0===e||e.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return-1!==this._cachedWidth}getVisibleRangesForRange(e,t,n,i){if(!this.domNode)return null;if(null!==this._pixelOffsetCache){const s=this._readPixelOffset(this.domNode,e,t,i);if(-1===s)return null;const r=this._readPixelOffset(this.domNode,e,n,i);return-1===r?null:[new Ly(s,r-s)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,i)}_readVisibleRangesForRange(e,t,n,i,s){if(n===i){const i=this._readPixelOffset(e,t,n,s);return-1===i?null:[new Ly(i,0)]}return this._readRawVisibleRangesForRange(e,n,i,s)}_readPixelOffset(e,t,n,i){if(0===this._characterMapping.length){if(0===this._containsForeignElements)return 0;if(2===this._containsForeignElements)return 0;if(1===this._containsForeignElements)return this.getWidth(i);const t=this._getReadingTarget(e);return t.firstChild?(i.markDidDomLayout(),t.firstChild.offsetWidth):0}if(null!==this._pixelOffsetCache){const s=this._pixelOffsetCache[n];if(-1!==s)return s;const r=this._actualReadPixelOffset(e,t,n,i);return this._pixelOffsetCache[n]=r,r}return this._actualReadPixelOffset(e,t,n,i)}_actualReadPixelOffset(e,t,n,i){if(0===this._characterMapping.length){const t=Ty.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,i);return t&&0!==t.length?t[0].left:-1}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&0===this._containsForeignElements)return this.getWidth(i);const s=this._characterMapping.getDomPosition(n),r=Ty.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,s.partIndex,s.charIndex,i);if(!r||0===r.length)return-1;const o=r[0].left;if(this.input.isBasicASCII){const e=this._characterMapping.getHorizontalOffset(n),t=Math.round(this.input.spaceWidth*e);if(Math.abs(t-o)<=1)return t}return o}_readRawVisibleRangesForRange(e,t,n,i){if(1===t&&n===this._characterMapping.length)return[new Ly(0,this.getWidth(i))];const s=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(n);return Ty.readHorizontalRanges(this._getReadingTarget(e),s.partIndex,s.charIndex,r.partIndex,r.charIndex,i)}getColumnOfNodeOffset(e,t){return jy(this._characterMapping,e,t)}}class zy extends By{_readVisibleRangesForRange(e,t,n,i,s){const r=super._readVisibleRangesForRange(e,t,n,i,s);if(!r||0===r.length||n===i||1===n&&i===this._characterMapping.length)return r;if(!this.input.containsRTL){const n=this._readPixelOffset(e,t,i,s);if(-1!==n){const e=r[r.length-1];e.left<n&&(e.width=n-e.left)}}return r}}const Wy=Br?Hy:Vy;function Hy(e,t,n,i,s){return new zy(e,t,n,i,s)}function Vy(e,t,n,i,s){return new By(e,t,n,i,s)}function jy(e,t,n){const i=t.textContent.length;let s=-1;for(;t;)t=t.previousSibling,s++;return e.getColumn(new Up(s,n),i)}class Uy{static _nextVisibleColumn(e,t,n){return 9===e?Uy.nextRenderTabStop(t,n):Sr(e)||wr(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){const i=Math.min(t-1,e.length),s=e.substring(0,i),r=new dr(s);let o=0;for(;!r.eol();){const e=ur(s,i,r.offset);r.nextGraphemeLength(),o=this._nextVisibleColumn(e,o,n)}return o}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const i=e.length,s=new dr(e);let r=0,o=1;for(;!s.eol();){const a=ur(e,i,s.offset);s.nextGraphemeLength();const l=this._nextVisibleColumn(a,r,n),c=s.offset+1;if(l>=t){return l-t<t-r?c:o}r=l,o=c}return i+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}class qy{static whitespaceVisibleColumn(e,t,n){const i=e.length;let s=0,r=-1,o=-1;for(let a=0;a<i;a++){if(a===t)return[r,o,s];s%n===0&&(r=a,o=s);switch(e.charCodeAt(a)){case 32:s+=1;break;case 9:s=Uy.nextRenderTabStop(s,n);break;default:return[-1,-1,-1]}}return t===i?[r,o,s]:[-1,-1,-1]}static atomicPosition(e,t,n,i){const s=e.length,[r,o,a]=qy.whitespaceVisibleColumn(e,t,n);if(-1===a)return-1;let l;switch(i){case 0:l=!0;break;case 1:l=!1;break;case 2:if(a%n===0)return t;l=a%n<=n/2}if(l){if(-1===r)return-1;let t=o;for(let i=r;i<s;++i){if(t===o+n)return r;switch(e.charCodeAt(i)){case 32:t+=1;break;case 9:t=Uy.nextRenderTabStop(t,n);break;default:return-1}}return t===o+n?r:-1}const c=Uy.nextRenderTabStop(a,n);let u=a;for(let h=t;h<s;h++){if(u===c)return h;switch(e.charCodeAt(h)){case 32:u+=1;break;case 9:u=Uy.nextRenderTabStop(u,n);break;default:return-1}}return u===c?s:-1}}class Ky{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.hitTarget=e,this.type=0}}class Gy{constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}var Yy;!function(e){e.createFromDOMInfo=function(e,t,n){const i=e.getPositionFromDOMInfo(t,n);return i?new Gy(i,t,null):new Ky(t)}}(Yy||(Yy={}));class Qy{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class Xy{static _deduceRage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return!t&&e?new xi(e.lineNumber,e.column,e.lineNumber,e.column):null!==t&&void 0!==t?t:null}static createUnknown(e,t,n){return{type:0,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,n,i,s,r){return{type:e,element:t,mouseColumn:n,position:i,range:s,detail:r}}static createViewZone(e,t,n,i,s){return{type:e,element:t,mouseColumn:n,position:i,range:this._deduceRage(i),detail:s}}static createContentText(e,t,n,i,s){return{type:6,element:e,mouseColumn:t,position:n,range:this._deduceRage(n,i),detail:s}}static createContentEmpty(e,t,n,i){return{type:7,element:e,mouseColumn:t,position:n,range:this._deduceRage(n),detail:i}}static createContentWidget(e,t,n){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createScrollbar(e,t,n){return{type:11,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createOverlayWidget(e,t,n){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createOutsideEditor(e,t,n,i){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:n,outsideDistance:i}}static _typeToString(e){return 1===e?"TEXTAREA":2===e?"GUTTER_GLYPH_MARGIN":3===e?"GUTTER_LINE_NUMBERS":4===e?"GUTTER_LINE_DECORATIONS":5===e?"GUTTER_VIEW_ZONE":6===e?"CONTENT_TEXT":7===e?"CONTENT_EMPTY":8===e?"CONTENT_VIEW_ZONE":9===e?"CONTENT_WIDGET":10===e?"OVERVIEW_RULER":11===e?"SCROLLBAR":12===e?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class Zy{static isTextArea(e){return 2===e.length&&3===e[0]&&7===e[1]}static isChildOfViewLines(e){return e.length>=4&&3===e[0]&&8===e[3]}static isStrictChildOfViewLines(e){return e.length>4&&3===e[0]&&8===e[3]}static isChildOfScrollableElement(e){return e.length>=2&&3===e[0]&&6===e[1]}static isChildOfMinimap(e){return e.length>=2&&3===e[0]&&9===e[1]}static isChildOfContentWidgets(e){return e.length>=4&&3===e[0]&&1===e[3]}static isChildOfOverflowGuard(e){return e.length>=1&&3===e[0]}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&2===e[0]}static isChildOfOverlayWidgets(e){return e.length>=2&&3===e[0]&&4===e[1]}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&5===e[0]}}class Jy{constructor(e,t,n){this.viewModel=e.viewModel;const i=e.configuration.options;this.layoutInfo=i.get(143),this.viewDomNode=t.viewDomNode,this.lineHeight=i.get(66),this.stickyTabStops=i.get(115),this.typicalHalfwidthCharacterWidth=i.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return Jy.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const i=n.verticalOffset+n.height/2,s=e.viewModel.getLineCount();let r,o=null,a=null;return n.afterLineNumber!==s&&(a=new Ci(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(o=new Ci(n.afterLineNumber,e.viewModel.getLineMaxColumn(n.afterLineNumber))),r=null===a?o:null===o?a:t<i?o:a,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:o,positionAfter:a,position:r}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const e=this._context.viewModel.getLineCount(),t=this._context.viewModel.getLineMaxColumn(e);return{range:new xi(e,t,e,t),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.viewModel.getLineMaxColumn(t);return{range:new xi(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return Jy._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class eS{constructor(e,t,n,i){this.editorPos=t,this.pos=n,this.relativePos=i,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,sS._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class tS extends eS{constructor(e,t,n,i,s){super(e,t,n,i),this._ctx=e,s?(this.target=s,this.targetPath=wy.collect(s,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return"pos(".concat(this.pos.x,",").concat(this.pos.y,"), editorPos(").concat(this.editorPos.x,",").concat(this.editorPos.y,"), relativePos(").concat(this.relativePos.x,",").concat(this.relativePos.y,"), mouseVerticalOffset: ").concat(this.mouseVerticalOffset,", mouseContentHorizontalOffset: ").concat(this.mouseContentHorizontalOffset,"\n\ttarget: ").concat(this.target?this.target.outerHTML:null)}_getMouseColumn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?Uy.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Xy.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return Xy.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,n,i){return Xy.createMargin(e,this.target,this._getMouseColumn(t),t,n,i)}fulfillViewZone(e,t,n){return Xy.createViewZone(e,this.target,this._getMouseColumn(t),t,n)}fulfillContentText(e,t,n){return Xy.createContentText(this.target,this._getMouseColumn(e),e,t,n)}fulfillContentEmpty(e,t){return Xy.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return Xy.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return Xy.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return Xy.createOverlayWidget(this.target,this._getMouseColumn(),e)}withTarget(e){return new tS(this._ctx,this.editorPos,this.pos,this.relativePos,e)}}const nS={isAfterLines:!0};function iS(e){return{isAfterLines:!1,horizontalDistanceToText:e}}class sS{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=wy.collect(t,this._viewHelper.viewDomNode);return!(!Zy.isChildOfContentWidgets(n)&&!Zy.isChildOfOverflowingContentWidgets(n))||!(!Zy.isChildOfOverlayWidgets(n)&&!Zy.isChildOfOverflowingOverlayWidgets(n))}createMouseTarget(e,t,n,i,s){const r=new Jy(this._context,this._viewHelper,e),o=new tS(r,t,n,i,s);try{const e=sS._createMouseTarget(r,o,!1);if(6===e.type&&r.stickyTabStops&&null!==e.position){const t=sS._snapToSoftTabBoundary(e.position,r.viewModel),n=xi.fromPositions(t,t).plusRange(e.range);return o.fulfillContentText(t,n,e.detail)}return e}catch(a){return o.fulfillUnknown()}}static _createMouseTarget(e,t,n){if(null===t.target){if(n)return t.fulfillUnknown();const i=sS._doHitTest(e,t);return 1===i.type?sS.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):this._createMouseTarget(e,t.withTarget(i.hitTarget),!0)}const i=t;let s=null;return Zy.isChildOfOverflowGuard(t.targetPath)||Zy.isChildOfOverflowingContentWidgets(t.targetPath)||Zy.isChildOfOverflowingOverlayWidgets(t.targetPath)||(s=s||t.fulfillUnknown()),s=s||sS._hitTestContentWidget(e,i),s=s||sS._hitTestOverlayWidget(e,i),s=s||sS._hitTestMinimap(e,i),s=s||sS._hitTestScrollbarSlider(e,i),s=s||sS._hitTestViewZone(e,i),s=s||sS._hitTestMargin(e,i),s=s||sS._hitTestViewCursor(e,i),s=s||sS._hitTestTextArea(e,i),s=s||sS._hitTestViewLines(e,i,n),s=s||sS._hitTestScrollbar(e,i),s||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(Zy.isChildOfContentWidgets(t.targetPath)||Zy.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillContentWidget(n):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(Zy.isChildOfOverlayWidgets(t.targetPath)||Zy.isChildOfOverflowingOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillOverlayWidget(n):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const e of n)if(t.target===e.domNode)return t.fulfillContentText(e.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,i=t.mouseContentHorizontalOffset,s=t.mouseVerticalOffset;for(const r of n){if(i<r.contentLeft)continue;if(i>r.contentLeft+r.width)continue;const n=e.getVerticalOffsetForLineNumber(r.position.lineNumber);if(n<=s&&s<=n+r.height)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const e=t.isInContentArea?8:5;return t.fulfillViewZone(e,n.position,n)}return null}static _hitTestTextArea(e,t){return Zy.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),i=n.range.getStartPosition();let s=Math.abs(t.relativePos.x);const r={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:s};if(s-=e.layoutInfo.glyphMarginLeft,s<=e.layoutInfo.glyphMarginWidth){const o=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(n.range.getStartPosition()),a=e.viewModel.glyphLanes.getLanesAtLine(o.lineNumber);return r.glyphMarginLane=a[Math.floor(s/e.lineHeight)],t.fulfillMargin(2,i,n.range,r)}return s-=e.layoutInfo.glyphMarginWidth,s<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,i,n.range,r):(s-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,i,n.range,r))}return null}static _hitTestViewLines(e,t,n){if(!Zy.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new Ci(1,1),nS);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const n=e.viewModel.getLineCount(),i=e.viewModel.getLineMaxColumn(n);return t.fulfillContentEmpty(new Ci(n,i),nS)}if(n){if(Zy.isStrictChildOfViewLines(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(0===e.viewModel.getLineLength(n)){const i=e.getLineWidth(n),s=iS(t.mouseContentHorizontalOffset-i);return t.fulfillContentEmpty(new Ci(n,1),s)}const i=e.getLineWidth(n);if(t.mouseContentHorizontalOffset>=i){const s=iS(t.mouseContentHorizontalOffset-i),r=new Ci(n,e.viewModel.getLineMaxColumn(n));return t.fulfillContentEmpty(r,s)}}return t.fulfillUnknown()}const i=sS._doHitTest(e,t);return 1===i.type?sS.createMouseTargetFromHitTestPosition(e,t,i.spanNode,i.position,i.injectedText):this._createMouseTarget(e,t.withTarget(i.hitTarget),!0)}static _hitTestMinimap(e,t){if(Zy.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new Ci(n,i))}return null}static _hitTestScrollbarSlider(e,t){if(Zy.isChildOfScrollableElement(t.targetPath)&&t.target&&1===t.target.nodeType){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new Ci(n,i))}}return null}static _hitTestScrollbar(e,t){if(Zy.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new Ci(n,i))}return null}getMouseColumn(e){const t=this._context.configuration.options,n=t.get(143),i=this._context.viewLayout.getCurrentScrollLeft()+e.x-n.contentLeft;return sS._getMouseColumn(i,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){if(e<0)return 1;return Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,i,s){const r=i.lineNumber,o=i.column,a=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>a){const e=iS(t.mouseContentHorizontalOffset-a);return t.fulfillContentEmpty(i,e)}const l=e.visibleRangeForPosition(r,o);if(!l)return t.fulfillUnknown(i);const c=l.left;if(Math.abs(t.mouseContentHorizontalOffset-c)<1)return t.fulfillContentText(i,null,{mightBeForeignElement:!!s,injectedText:s});const u=[];if(u.push({offset:l.left,column:o}),o>1){const t=e.visibleRangeForPosition(r,o-1);t&&u.push({offset:t.left,column:o-1})}if(o<e.viewModel.getLineMaxColumn(r)){const t=e.visibleRangeForPosition(r,o+1);t&&u.push({offset:t.left,column:o+1})}u.sort(((e,t)=>e.offset-t.offset));const h=t.pos.toClientCoordinates(Dc(e.viewDomNode)),d=n.getBoundingClientRect(),f=d.left<=h.clientX&&h.clientX<=d.right;let g=null;for(let p=1;p<u.length;p++){const e=u[p-1],n=u[p];if(e.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=n.offset){g=new xi(r,e.column,r,n.column);const s=Math.abs(e.offset-t.mouseContentHorizontalOffset),o=Math.abs(n.offset-t.mouseContentHorizontalOffset);i=new Ci(r,s<o?e.column:n.column);break}}return t.fulfillContentText(i,g,{mightBeForeignElement:!f||!!s,injectedText:s})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.getVerticalOffsetForLineNumber(n),s=i+e.lineHeight;if(!(n===e.viewModel.getLineCount()&&t.mouseVerticalOffset>s)){const n=Math.floor((i+s)/2);let r=t.pos.y+(n-t.mouseVerticalOffset);r<=t.editorPos.y&&(r=t.editorPos.y+1),r>=t.editorPos.y+t.editorPos.height&&(r=t.editorPos.y+t.editorPos.height-1);const o=new ay(t.pos.x,r),a=this._actualDoHitTestWithCaretRangeFromPoint(e,o.toClientCoordinates(Dc(e.viewDomNode)));if(1===a.type)return a}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(Dc(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=lu(e.viewDomNode);let i;if(i=n?"undefined"===typeof n.caretRangeFromPoint?function(e,t,n){const i=document.createRange();let s=e.elementFromPoint(t,n);if(null!==s){for(;s&&s.firstChild&&s.firstChild.nodeType!==s.firstChild.TEXT_NODE&&s.lastChild&&s.lastChild.firstChild;)s=s.lastChild;const e=s.getBoundingClientRect(),n=Dc(s),r=n.getComputedStyle(s,null).getPropertyValue("font-style"),o=n.getComputedStyle(s,null).getPropertyValue("font-variant"),a=n.getComputedStyle(s,null).getPropertyValue("font-weight"),l=n.getComputedStyle(s,null).getPropertyValue("font-size"),c=n.getComputedStyle(s,null).getPropertyValue("line-height"),u=n.getComputedStyle(s,null).getPropertyValue("font-family"),h="".concat(r," ").concat(o," ").concat(a," ").concat(l,"/").concat(c," ").concat(u),d=s.innerText;let f,g=e.left,p=0;if(t>e.left+e.width)p=d.length;else{const e=rS.getInstance();for(let n=0;n<d.length+1;n++){if(f=e.getCharWidth(d.charAt(n),h)/2,g+=f,t<g){p=n;break}g+=f}}i.setStart(s.firstChild,p),i.setEnd(s.firstChild,p)}return i}(n,t.clientX,t.clientY):n.caretRangeFromPoint(t.clientX,t.clientY):e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!i||!i.startContainer)return new Ky;const s=i.startContainer;if(s.nodeType===s.TEXT_NODE){const t=s.parentNode,n=t?t.parentNode:null,r=n?n.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===Py.CLASS_NAME?Yy.createFromDOMInfo(e,t,i.startOffset):new Ky(s.parentNode)}if(s.nodeType===s.ELEMENT_NODE){const t=s.parentNode,n=t?t.parentNode:null;return(n&&n.nodeType===n.ELEMENT_NODE?n.className:null)===Py.CLASS_NAME?Yy.createFromDOMInfo(e,s,s.textContent.length):new Ky(s)}return new Ky}static _doHitTestWithCaretPositionFromPoint(e,t){const n=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const t=n.offsetNode.parentNode,i=t?t.parentNode:null,s=i?i.parentNode:null;return(s&&s.nodeType===s.ELEMENT_NODE?s.className:null)===Py.CLASS_NAME?Yy.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new Ky(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const t=n.offsetNode.parentNode,i=t&&t.nodeType===t.ELEMENT_NODE?t.className:null,s=t?t.parentNode:null,r=s&&s.nodeType===s.ELEMENT_NODE?s.className:null;if(i===Py.CLASS_NAME){const t=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(t)return Yy.createFromDOMInfo(e,t,0)}else if(r===Py.CLASS_NAME)return Yy.createFromDOMInfo(e,n.offsetNode,0)}return new Ky(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:i}=t.model.getOptions(),s=qy.atomicPosition(n,e.column-1,i,2);return-1!==s?new Ci(e.lineNumber,s+1):e}static _doHitTest(e,t){let n=new Ky;if("function"===typeof e.viewDomNode.ownerDocument.caretRangeFromPoint?n=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(Dc(e.viewDomNode)))),1===n.type){const t=e.viewModel.getInjectedTextAt(n.position),i=e.viewModel.normalizePosition(n.position,2);!t&&i.equals(n.position)||(n=new Gy(i,n.spanNode,t))}return n}}class rS{static getInstance(){return rS._INSTANCE||(rS._INSTANCE=new rS),rS._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const i=this._canvas.getContext("2d");i.font=t;const s=i.measureText(e).width;return this._cache[n]=s,s}}function oS(e,t,n){let i=null,s=null;if("function"===typeof n.value?(i="value",s=n.value,0!==s.length&&console.warn("Memoize should only be used in functions with zero parameters")):"function"===typeof n.get&&(i="get",s=n.get),!s)throw new Error("not supported");const r="$memoize$".concat(t);n[i]=function(){if(!this.hasOwnProperty(r)){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,t)})}return this[r]}}rS._INSTANCE=null;var aS,lS=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};!function(e){e.Tap="-monaco-gesturetap",e.Change="-monaco-gesturechange",e.Start="-monaco-gesturestart",e.End="-monaco-gesturesend",e.Contextmenu="-monaco-gesturecontextmenu"}(aS||(aS={}));class cS extends Zt{constructor(){super(),this.dispatched=!1,this.targets=new Be,this.ignoreTargets=new Be,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(rn.runAndSubscribe(Rc,(e=>{let{window:t,disposables:n}=e;n.add(zc(t.document,"touchstart",(e=>this.onTouchStart(e)),{passive:!1})),n.add(zc(t.document,"touchend",(e=>this.onTouchEnd(t,e)))),n.add(zc(t.document,"touchmove",(e=>this.onTouchMove(e)),{passive:!1}))}),{window:Ms,disposables:this._store}))}static addTarget(e){if(!cS.isTouchDevice())return Zt.None;cS.INSTANCE||(cS.INSTANCE=Kt(new cS));return Qt(cS.INSTANCE.targets.push(e))}static ignoreTarget(e){if(!cS.isTouchDevice())return Zt.None;cS.INSTANCE||(cS.INSTANCE=Kt(new cS));return Qt(cS.INSTANCE.ignoreTargets.push(e))}static isTouchDevice(){return"ontouchstart"in Ms||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,i=e.targetTouches.length;n<i;n++){const i=e.targetTouches.item(n);this.activeTouches[i.identifier]={id:i.identifier,initialTarget:i.target,initialTimeStamp:t,initialPageX:i.pageX,initialPageY:i.pageY,rollingTimestamps:[t],rollingPageX:[i.pageX],rollingPageY:[i.pageY]};const s=this.newGestureEvent(aS.Start,i.target);s.pageX=i.pageX,s.pageY=i.pageY,this.dispatchEvent(s)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const n=Date.now(),i=Object.keys(this.activeTouches).length;for(let s=0,r=t.changedTouches.length;s<r;s++){const r=t.changedTouches.item(s);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("move of an UNKNOWN touch",r);continue}const a=this.activeTouches[r.identifier],l=Date.now()-a.initialTimeStamp;if(l<cS.HOLD_DELAY&&Math.abs(a.initialPageX-o(a.rollingPageX))<30&&Math.abs(a.initialPageY-o(a.rollingPageY))<30){const e=this.newGestureEvent(aS.Tap,a.initialTarget);e.pageX=o(a.rollingPageX),e.pageY=o(a.rollingPageY),this.dispatchEvent(e)}else if(l>=cS.HOLD_DELAY&&Math.abs(a.initialPageX-o(a.rollingPageX))<30&&Math.abs(a.initialPageY-o(a.rollingPageY))<30){const e=this.newGestureEvent(aS.Contextmenu,a.initialTarget);e.pageX=o(a.rollingPageX),e.pageY=o(a.rollingPageY),this.dispatchEvent(e)}else if(1===i){const t=o(a.rollingPageX),i=o(a.rollingPageY),s=o(a.rollingTimestamps)-a.rollingTimestamps[0],r=t-a.rollingPageX[0],l=i-a.rollingPageY[0],c=[...this.targets].filter((e=>a.initialTarget instanceof Node&&e.contains(a.initialTarget)));this.inertia(e,c,n,Math.abs(r)/s,r>0?1:-1,t,Math.abs(l)/s,l>0?1:-1,i)}this.dispatchEvent(this.newGestureEvent(aS.End,a.initialTarget)),delete this.activeTouches[r.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===aS.Tap){const t=(new Date).getTime();let n=0;n=t-this._lastSetTapCountTime>cS.CLEAR_TAP_COUNT_TIME?1:2,this._lastSetTapCountTime=t,e.tapCount=n}else e.type!==aS.Change&&e.type!==aS.Contextmenu||(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const t of this.ignoreTargets)if(t.contains(e.initialTarget))return;for(const t of this.targets)t.contains(e.initialTarget)&&(t.dispatchEvent(e),this.dispatched=!0)}}inertia(e,t,n,i,s,r,o,a,l){this.handle=Uc(e,(()=>{const c=Date.now(),u=c-n;let h=0,d=0,f=!0;i+=cS.SCROLL_FRICTION*u,o+=cS.SCROLL_FRICTION*u,i>0&&(f=!1,h=s*i*u),o>0&&(f=!1,d=a*o*u);const g=this.newGestureEvent(aS.Change);g.translationX=h,g.translationY=d,t.forEach((e=>e.dispatchEvent(g))),f||this.inertia(e,t,c,i,s,r+h,o,a,l+d)}))}onTouchMove(e){const t=Date.now();for(let n=0,i=e.changedTouches.length;n<i;n++){const i=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(i.identifier))){console.warn("end of an UNKNOWN touch",i);continue}const s=this.activeTouches[i.identifier],r=this.newGestureEvent(aS.Change,s.initialTarget);r.translationX=i.pageX-o(s.rollingPageX),r.translationY=i.pageY-o(s.rollingPageY),r.pageX=i.pageX,r.pageY=i.pageY,this.dispatchEvent(r),s.rollingPageX.length>3&&(s.rollingPageX.shift(),s.rollingPageY.shift(),s.rollingTimestamps.shift()),s.rollingPageX.push(i.pageX),s.rollingPageY.push(i.pageY),s.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}cS.SCROLL_FRICTION=-.005,cS.HOLD_DELAY=700,cS.CLEAR_TAP_COUNT_TIME=400,lS([oS],cS,"isTouchDevice",null);class uS extends Zt{onclick(e,t){this._register(zc(e,ku.CLICK,(n=>t(new Ga(Dc(e),n)))))}onmousedown(e,t){this._register(zc(e,ku.MOUSE_DOWN,(n=>t(new Ga(Dc(e),n)))))}onmouseover(e,t){this._register(zc(e,ku.MOUSE_OVER,(n=>t(new Ga(Dc(e),n)))))}onmouseleave(e,t){this._register(zc(e,ku.MOUSE_LEAVE,(n=>t(new Ga(Dc(e),n)))))}onkeydown(e,t){this._register(zc(e,ku.KEY_DOWN,(e=>t(new ja(e)))))}onkeyup(e,t){this._register(zc(e,ku.KEY_UP,(e=>t(new ja(e)))))}oninput(e,t){this._register(zc(e,ku.INPUT,t))}onblur(e,t){this._register(zc(e,ku.BLUR,t))}onfocus(e,t){this._register(zc(e,ku.FOCUS,t))}ignoreGesture(e){return cS.ignoreTarget(e)}}const hS=11;class dS extends uS{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px","undefined"!==typeof e.top&&(this.bgDomNode.style.top="0px"),"undefined"!==typeof e.left&&(this.bgDomNode.style.left="0px"),"undefined"!==typeof e.bottom&&(this.bgDomNode.style.bottom="0px"),"undefined"!==typeof e.right&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...bo.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width="11px",this.domNode.style.height="11px","undefined"!==typeof e.top&&(this.domNode.style.top=e.top+"px"),"undefined"!==typeof e.left&&(this.domNode.style.left=e.left+"px"),"undefined"!==typeof e.bottom&&(this.domNode.style.bottom=e.bottom+"px"),"undefined"!==typeof e.right&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new cb),this._register(Hc(this.bgDomNode,ku.POINTER_DOWN,(e=>this._arrowPointerDown(e)))),this._register(Hc(this.domNode,ku.POINTER_DOWN,(e=>this._arrowPointerDown(e)))),this._pointerdownRepeatTimer=this._register(new qc),this._pointerdownScheduleRepeatTimer=this._register(new sl)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet((()=>{this._pointerdownRepeatTimer.cancelAndSet((()=>this._onActivate()),1e3/24,Dc(e))}),200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,(e=>{}),(()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()})),e.preventDefault()}}class fS extends Zt{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new sl)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return 2!==this._visibility&&(3===this._visibility||this._rawShouldBeVisible)}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){this._isNeeded?this._shouldBeVisible?this._reveal():this._hide(!0):this._hide(!1)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet((()=>{var e;null===(e=this._domNode)||void 0===e||e.setClassName(this._visibleClassName)}),0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,null===(t=this._domNode)||void 0===t||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}class gS extends uS{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new fS(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new cb),this._shouldRender=!0,this.domNode=Kr(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(zc(this.domNode.domNode,ku.POINTER_DOWN,(e=>this._domNodePointerDown(e))))}_createArrow(e){const t=this._register(new dS(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,i){this.slider=Kr(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),"number"===typeof n&&this.slider.setWidth(n),"number"===typeof i&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(zc(this.slider.domNode,ku.POINTER_DOWN,(e=>{0===e.button&&(e.preventDefault(),this._sliderPointerDown(e))}))),this.onclick(this.slider.domNode,(e=>{e.leftButton&&e.stopPropagation()}))}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),i=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),s=this._sliderPointerPosition(e);n<=s&&s<=i?0===e.button&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&"number"===typeof e.offsetX&&"number"===typeof e.offsetY)t=e.offsetX,n=e.offsetY;else{const i=Zc(this.domNode.domNode);t=e.pageX-i.left,n=e.pageY-i.top}const i=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(i):this._scrollbarState.getDesiredScrollPositionFromOffset(i)),0===e.button&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),i=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,(e=>{const s=this._sliderOrthogonalPointerPosition(e),r=Math.abs(s-n);if(be&&r>140)return void this._setDesiredScrollPositionNow(i.getScrollPosition());const o=this._sliderPointerPosition(e)-t;this._setDesiredScrollPositionNow(i.getDesiredScrollPositionFromDelta(o))}),(()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()})),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}class pS{constructor(e,t,n,i,s,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=i,this._scrollSize=s,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new pS(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t&&(this._visibleSize=t,this._refreshComputedValues(),!0)}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t&&(this._scrollSize=t,this._refreshComputedValues(),!0)}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t&&(this._scrollPosition=t,this._refreshComputedValues(),!0)}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,i,s){const r=Math.max(0,n-e),o=Math.max(0,r-2*t),a=i>0&&i>n;if(!a)return{computedAvailableSize:Math.round(r),computedIsNeeded:a,computedSliderSize:Math.round(o),computedSliderRatio:0,computedSliderPosition:0};const l=Math.round(Math.max(20,Math.floor(n*o/i))),c=(o-l)/(i-n),u=s*c;return{computedAvailableSize:Math.round(r),computedIsNeeded:a,computedSliderSize:Math.round(l),computedSliderRatio:c,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=pS._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class mS extends gS{constructor(e,t,n){const i=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new pS(t.horizontalHasArrows?t.arrowSize:0,2===t.horizontal?0:t.horizontalScrollbarSize,2===t.vertical?0:t.verticalScrollbarSize,i.width,i.scrollWidth,s.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const e=(t.arrowSize-hS)/2,n=(t.horizontalScrollbarSize-hS)/2;this._createArrow({className:"scra",icon:Ti.scrollbarButtonLeft,top:n,left:e,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Ya(null,1,0))}),this._createArrow({className:"scra",icon:Ti.scrollbarButtonRight,top:n,left:void 0,bottom:void 0,right:e,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Ya(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(2===e.horizontal?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(2===e.vertical?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class bS extends gS{constructor(e,t,n){const i=e.getScrollDimensions(),s=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new pS(t.verticalHasArrows?t.arrowSize:0,2===t.vertical?0:t.verticalScrollbarSize,0,i.height,i.scrollHeight,s.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const e=(t.arrowSize-hS)/2,n=(t.verticalScrollbarSize-hS)/2;this._createArrow({className:"scra",icon:Ti.scrollbarButtonUp,top:e,left:n,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Ya(null,0,1))}),this._createArrow({className:"scra",icon:Ti.scrollbarButtonDown,top:void 0,left:n,bottom:e,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Ya(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(2===e.vertical?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class _S{constructor(e,t,n,i,s,r,o){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t|=0,n|=0,i|=0,s|=0,r|=0,o|=0),this.rawScrollLeft=i,this.rawScrollTop=o,t<0&&(t=0),i+t>n&&(i=n-t),i<0&&(i=0),s<0&&(s=0),o+s>r&&(o=r-s),o<0&&(o=0),this.width=t,this.scrollWidth=n,this.scrollLeft=i,this.height=s,this.scrollHeight=r,this.scrollTop=o}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new _S(this._forceIntegerValues,"undefined"!==typeof e.width?e.width:this.width,"undefined"!==typeof e.scrollWidth?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,"undefined"!==typeof e.height?e.height:this.height,"undefined"!==typeof e.scrollHeight?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new _S(this._forceIntegerValues,this.width,this.scrollWidth,"undefined"!==typeof e.scrollLeft?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,"undefined"!==typeof e.scrollTop?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,s=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,o=this.scrollHeight!==e.scrollHeight,a=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:i,scrollLeftChanged:s,heightChanged:r,scrollHeightChanged:o,scrollTopChanged:a}}}class vS extends Zt{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new un),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new _S(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var n;const i=this._state.withScrollDimensions(e,t);this._setState(i,Boolean(this._smoothScrolling)),null===(n=this._smoothScrolling)||void 0===n||n.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(0===this._smoothScrollDuration)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:"undefined"===typeof e.scrollLeft?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:"undefined"===typeof e.scrollTop?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let i;i=t?new wS(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{const t=this._state.withScrollPosition(e);this._smoothScrolling=wS.start(this._state,t,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())}))}hasPendingScrollAnimation(){return Boolean(this._smoothScrolling)}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);return this._setState(t,!0),this._smoothScrolling?e.isDone?(this._smoothScrolling.dispose(),void(this._smoothScrolling=null)):void(this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame((()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())}))):void 0}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class yS{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function SS(e,t){const n=t-e;return function(t){return e+n*(1-function(e){return Math.pow(e,3)}(1-t))}}class wS{constructor(e,t,n,i){this.from=e,this.to=t,this.duration=i,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let o,a;return e<t?(o=e+.75*n,a=t-.75*n):(o=e-.75*n,a=t+.75*n),i=SS(e,o),s=SS(a,t),r=.33,function(e){return e<r?i(e/r):s((e-r)/(1-r))}}var i,s,r;return SS(e,t)}dispose(){null!==this.animationFrameDisposable&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const e=this.scrollLeft(t),n=this.scrollTop(t);return new yS(e,n,!1)}return new yS(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return wS.start(e,t,n)}static start(e,t,n){n+=10;const i=Date.now()-10;return new wS(e,t,i,n)}}class kS{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}class CS{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(-1===this._front&&-1===this._rear)return!1;let e=1,t=0,n=1,i=this._rear;for(;;){const s=i===this._front?e:Math.pow(2,-n);if(e-=s,t+=this._memory[i].score*s,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}return t<=.5}acceptStandardWheelEvent(e){if(zr){const t=function(e){return Ir.INSTANCE.getZoomFactor(e)}(Dc(e.browserEvent));this.accept(Date.now(),e.deltaX*t,e.deltaY*t)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,n){const i=new kS(e,t,n);i.score=this._computeScore(i),-1===this._front&&-1===this._rear?(this._memory[0]=i,this._front=0,this._rear=0):(this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=i)}_computeScore(e){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let t=.5;-1===this._front&&-1===this._rear||this._memory[this._rear];return this._isAlmostInt(e.deltaX)&&this._isAlmostInt(e.deltaY)||(t+=.25),Math.min(Math.max(t,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}CS.INSTANCE=new CS;class xS extends uS{get options(){return this._options}constructor(e,t,n){super(),this._onScroll=this._register(new un),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new un),e.style.overflow="hidden",this._options=function(e){const t={lazyRender:"undefined"!==typeof e.lazyRender&&e.lazyRender,className:"undefined"!==typeof e.className?e.className:"",useShadows:"undefined"===typeof e.useShadows||e.useShadows,handleMouseWheel:"undefined"===typeof e.handleMouseWheel||e.handleMouseWheel,flipAxes:"undefined"!==typeof e.flipAxes&&e.flipAxes,consumeMouseWheelIfScrollbarIsNeeded:"undefined"!==typeof e.consumeMouseWheelIfScrollbarIsNeeded&&e.consumeMouseWheelIfScrollbarIsNeeded,alwaysConsumeMouseWheel:"undefined"!==typeof e.alwaysConsumeMouseWheel&&e.alwaysConsumeMouseWheel,scrollYToX:"undefined"!==typeof e.scrollYToX&&e.scrollYToX,mouseWheelScrollSensitivity:"undefined"!==typeof e.mouseWheelScrollSensitivity?e.mouseWheelScrollSensitivity:1,fastScrollSensitivity:"undefined"!==typeof e.fastScrollSensitivity?e.fastScrollSensitivity:5,scrollPredominantAxis:"undefined"===typeof e.scrollPredominantAxis||e.scrollPredominantAxis,mouseWheelSmoothScroll:"undefined"===typeof e.mouseWheelSmoothScroll||e.mouseWheelSmoothScroll,arrowSize:"undefined"!==typeof e.arrowSize?e.arrowSize:11,listenOnDomNode:"undefined"!==typeof e.listenOnDomNode?e.listenOnDomNode:null,horizontal:"undefined"!==typeof e.horizontal?e.horizontal:1,horizontalScrollbarSize:"undefined"!==typeof e.horizontalScrollbarSize?e.horizontalScrollbarSize:10,horizontalSliderSize:"undefined"!==typeof e.horizontalSliderSize?e.horizontalSliderSize:0,horizontalHasArrows:"undefined"!==typeof e.horizontalHasArrows&&e.horizontalHasArrows,vertical:"undefined"!==typeof e.vertical?e.vertical:1,verticalScrollbarSize:"undefined"!==typeof e.verticalScrollbarSize?e.verticalScrollbarSize:10,verticalHasArrows:"undefined"!==typeof e.verticalHasArrows&&e.verticalHasArrows,verticalSliderSize:"undefined"!==typeof e.verticalSliderSize?e.verticalSliderSize:0,scrollByPage:"undefined"!==typeof e.scrollByPage&&e.scrollByPage};t.horizontalSliderSize="undefined"!==typeof e.horizontalSliderSize?e.horizontalSliderSize:t.horizontalScrollbarSize,t.verticalSliderSize="undefined"!==typeof e.verticalSliderSize?e.verticalSliderSize:t.verticalScrollbarSize,_e&&(t.className+=" mac");return t}(t),this._scrollable=n,this._register(this._scrollable.onScroll((e=>{this._onWillScroll.fire(e),this._onDidScroll(e),this._onScroll.fire(e)})));const i={onMouseWheel:e=>this._onMouseWheel(e),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new bS(this._scrollable,this._options,i)),this._horizontalScrollbar=this._register(new mS(this._scrollable,this._options,i)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Kr(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Kr(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Kr(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,(e=>this._onMouseOver(e))),this.onmouseleave(this._listenOnDomNode,(e=>this._onMouseLeave(e))),this._hideTimeout=this._register(new sl),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=Gt(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,_e&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){"undefined"!==typeof e.handleMouseWheel&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),"undefined"!==typeof e.mouseWheelScrollSensitivity&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),"undefined"!==typeof e.fastScrollSensitivity&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),"undefined"!==typeof e.scrollPredominantAxis&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),"undefined"!==typeof e.horizontal&&(this._options.horizontal=e.horizontal),"undefined"!==typeof e.vertical&&(this._options.vertical=e.vertical),"undefined"!==typeof e.horizontalScrollbarSize&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),"undefined"!==typeof e.verticalScrollbarSize&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),"undefined"!==typeof e.scrollByPage&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Ya(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Gt(this._mouseWheelToDispose),e)){const e=e=>{this._onMouseWheel(new Ya(e))};this._mouseWheelToDispose.push(zc(this._listenOnDomNode,ku.MOUSE_WHEEL,e,{passive:!1}))}}_onMouseWheel(e){var t;if(null===(t=e.browserEvent)||void 0===t?void 0:t.defaultPrevented)return;const n=CS.INSTANCE;n.acceptStandardWheelEvent(e);let i=!1;if(e.deltaY||e.deltaX){let t=e.deltaY*this._options.mouseWheelScrollSensitivity,s=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&s+t===0?s=t=0:Math.abs(t)>=Math.abs(s)?s=0:t=0),this._options.flipAxes&&([t,s]=[s,t]);const r=!_e&&e.browserEvent&&e.browserEvent.shiftKey;!this._options.scrollYToX&&!r||s||(s=t,t=0),e.browserEvent&&e.browserEvent.altKey&&(s*=this._options.fastScrollSensitivity,t*=this._options.fastScrollSensitivity);const o=this._scrollable.getFutureScrollPosition();let a={};if(t){const e=50*t,n=o.scrollTop-(e<0?Math.floor(e):Math.ceil(e));this._verticalScrollbar.writeScrollPosition(a,n)}if(s){const e=50*s,t=o.scrollLeft-(e<0?Math.floor(e):Math.ceil(e));this._horizontalScrollbar.writeScrollPosition(a,t)}if(a=this._scrollable.validateScrollPosition(a),o.scrollLeft!==a.scrollLeft||o.scrollTop!==a.scrollTop){this._options.mouseWheelSmoothScroll&&n.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(a):this._scrollable.setScrollPositionNow(a),i=!0}}let s=i;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,i=n?" left":"",s=t?" top":"",r=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName("shadow".concat(i)),this._topShadowDomNode.setClassName("shadow".concat(s)),this._topLeftShadowDomNode.setClassName("shadow".concat(r).concat(s).concat(i))}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){this._mouseIsOver||this._isDragging||(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){this._mouseIsOver||this._isDragging||this._hideTimeout.cancelAndSet((()=>this._hide()),500)}}class ES extends xS{constructor(e,t){(t=t||{}).mouseWheelSmoothScroll=!1;const n=new vS({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:t=>Uc(Dc(e),t)});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class LS extends xS{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class DS extends xS{constructor(e,t){(t=t||{}).mouseWheelSmoothScroll=!1;const n=new vS({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:t=>Uc(Dc(e),t)});super(e,t,n),this._register(n),this._element=e,this._register(this.onScroll((e=>{e.scrollTopChanged&&(this._element.scrollTop=e.scrollTop),e.scrollLeftChanged&&(this._element.scrollLeft=e.scrollLeft)}))),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}class AS extends yy{constructor(e,t,n){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new sS(this._context,n),this._mouseDownOperation=this._register(new TS(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,((e,t)=>this._createMouseTarget(e,t)),(e=>this._getMouseColumn(e)))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(143).height;const i=new gy(this.viewHelper.viewDomNode);this._register(i.onContextMenu(this.viewHelper.viewDomNode,(e=>this._onContextMenu(e,!0)))),this._register(i.onMouseMove(this.viewHelper.viewDomNode,(e=>{this._onMouseMove(e),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=zc(this.viewHelper.viewDomNode.ownerDocument,"mousemove",(e=>{this.viewHelper.viewDomNode.contains(e.target)||this._onMouseLeave(new fy(e,!1,this.viewHelper.viewDomNode))})))}))),this._register(i.onMouseUp(this.viewHelper.viewDomNode,(e=>this._onMouseUp(e)))),this._register(i.onMouseLeave(this.viewHelper.viewDomNode,(e=>this._onMouseLeave(e))));let s=0;this._register(i.onPointerDown(this.viewHelper.viewDomNode,((e,t)=>{s=t}))),this._register(zc(this.viewHelper.viewDomNode,ku.POINTER_UP,(e=>{this._mouseDownOperation.onPointerUp()}))),this._register(i.onMouseDown(this.viewHelper.viewDomNode,(e=>this._onMouseDown(e,s)))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=CS.INSTANCE;let t=0,n=Xr.getZoomLevel(),i=!1,s=0;function r(e){return _e?(e.metaKey||e.ctrlKey)&&!e.shiftKey&&!e.altKey:e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey}this._register(zc(this.viewHelper.viewDomNode,ku.MOUSE_WHEEL,(o=>{if(this.viewController.emitMouseWheel(o),!this._context.configuration.options.get(75))return;const a=new Ya(o);if(e.acceptStandardWheelEvent(a),e.isPhysicalMouseWheel()){if(r(o)){const e=Xr.getZoomLevel(),t=a.deltaY>0?1:-1;Xr.setZoomLevel(e+t),a.preventDefault(),a.stopPropagation()}}else Date.now()-t>50&&(n=Xr.getZoomLevel(),i=r(o),s=0),t=Date.now(),s+=a.deltaY,i&&(Xr.setZoomLevel(n+s/5),a.preventDefault(),a.stopPropagation())}),{capture:!0,passive:!1}))}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(143)){const e=this._context.configuration.options.get(143).height;this._height!==e&&(this._height=e,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const n=new ly(e,t).toPageCoordinates(Dc(this.viewHelper.viewDomNode)),i=hy(this.viewHelper.viewDomNode);if(n.y<i.y||n.y>i.y+i.height||n.x<i.x||n.x>i.x+i.width)return null;const s=dy(this.viewHelper.viewDomNode,i,n);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),i,n,s,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const t=lu(this.viewHelper.viewDomNode);t&&(n=t.elementsFromPoint(e.posx,e.posy).find((e=>this.viewHelper.viewDomNode.contains(e))))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){if(this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),this._mouseDownOperation.isActive())return;e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=(new Date).getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const n=this._createMouseTarget(e,!0),i=6===n.type||7===n.type,s=2===n.type||3===n.type||4===n.type,r=3===n.type,o=this._context.configuration.options.get(108),a=8===n.type||5===n.type,l=9===n.type;let c=e.leftButton||e.middleButton;_e&&e.leftButton&&e.ctrlKey&&(c=!1);const u=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(c&&(i||r&&o))u(),this._mouseDownOperation.start(n.type,e,t);else if(s)e.preventDefault();else if(a){const i=n.detail;c&&this.viewHelper.shouldSuppressMouseDownOnViewZone(i.viewZoneId)&&(u(),this._mouseDownOperation.start(n.type,e,t),e.preventDefault())}else l&&this.viewHelper.shouldSuppressMouseDownOnWidget(n.detail)&&(u(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:n})}}class TS extends Zt{constructor(e,t,n,i,s,r){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._mouseTargetFactory=i,this._createMouseTarget=s,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new my(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new NS(this._context,this._viewHelper,this._mouseTargetFactory,((e,t,n)=>this._dispatchMouse(e,t,n)))),this._mouseState=new $S,this._currentSelection=new Ei(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):13!==t.type||"above"!==t.outsidePosition&&"below"!==t.outsidePosition?(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)):this._topBottomDragScrolling.start(t,e))}start(e,t,n){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(3===e),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const i=this._findMousePosition(t,!0);if(!i||!i.position)return;this._mouseState.trySetCount(t.detail,i.position),t.detail=this._mouseState.count;const s=this._context.configuration.options;if(!s.get(90)&&s.get(35)&&!s.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&6===i.type&&i.position&&this._currentSelection.containsPosition(i.position))return this._mouseState.isDragAndDrop=!0,this._isActive=!0,void this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,(e=>this._onMouseDownThenMove(e)),(e=>{const t=this._findMousePosition(this._lastMouseEvent,!1);wu(e)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:t?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()}));this._mouseState.isDragAndDrop=!1,this._dispatchMouse(i,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,(e=>this._onMouseDownThenMove(e)),(()=>this._stop())))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.viewModel,i=this._context.viewLayout,s=this._getMouseColumn(e);if(e.posy<t.y){const n=t.y-e.posy,r=Math.max(i.getCurrentScrollTop()-n,0),o=Jy.getZoneAtCoord(this._context,r);if(o){const e=this._helpPositionJumpOverViewZone(o);if(e)return Xy.createOutsideEditor(s,e,"above",n)}const a=i.getLineNumberAtVerticalOffset(r);return Xy.createOutsideEditor(s,new Ci(a,1),"above",n)}if(e.posy>t.y+t.height){const r=e.posy-t.y-t.height,o=i.getCurrentScrollTop()+e.relativePos.y,a=Jy.getZoneAtCoord(this._context,o);if(a){const e=this._helpPositionJumpOverViewZone(a);if(e)return Xy.createOutsideEditor(s,e,"below",r)}const l=i.getLineNumberAtVerticalOffset(o);return Xy.createOutsideEditor(s,new Ci(l,n.getLineMaxColumn(l)),"below",r)}const r=i.getLineNumberAtVerticalOffset(i.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const n=t.x-e.posx;return Xy.createOutsideEditor(s,new Ci(r,1),"left",n)}if(e.posx>t.x+t.width){const i=e.posx-t.x-t.width;return Xy.createOutsideEditor(s,new Ci(r,n.getLineMaxColumn(r)),"right",i)}return null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const i=this._createMouseTarget(e,t);if(!i.position)return null;if(8===i.type||5===i.type){const e=this._helpPositionJumpOverViewZone(i.detail);if(e)return Xy.createViewZone(i.type,i.element,i.mouseColumn,e,i.detail)}return i}_helpPositionJumpOverViewZone(e){const t=new Ci(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,i=e.positionAfter;return n&&i?n.isBefore(t)?n:i:null}_dispatchMouse(e,t,n){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:n,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:6===e.type&&null!==e.detail.injectedText})}}class NS extends Zt{constructor(e,t,n,i){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=i,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new IS(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class IS extends Zt{constructor(e,t,n,i,s,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=i,this._position=s,this._mouseEvent=r,this._lastTime=Date.now(),this._animationFrameDisposable=Uc(Dc(r.browserEvent),(()=>this._execute()))}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(66),t=this._context.configuration.options.get(143).height/e,n=this._position.outsideDistance/e;return n<=1.5?Math.max(30,t*(1+n)):n<=3?Math.max(60,t*(2+n)):Math.max(200,t*(7+n))}_execute(){const e=this._context.configuration.options.get(66),t=this._getScrollSpeed()*(this._tick()/1e3)*e,n="above"===this._position.outsidePosition?-t:t;this._context.viewModel.viewLayout.deltaScrollNow(0,n),this._viewHelper.renderNow();const i=this._context.viewLayout.getLinesViewportData(),s="above"===this._position.outsidePosition?i.startLineNumber:i.endLineNumber;let r;{const e=hy(this._viewHelper.viewDomNode),t=this._context.configuration.options.get(143).horizontalScrollbarHeight,n=new ay(this._mouseEvent.pos.x,e.y+e.height-t-.1),i=dy(this._viewHelper.viewDomNode,e,n);r=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),e,n,i,null)}r.position&&r.position.lineNumber===s||(r="above"===this._position.outsidePosition?Xy.createOutsideEditor(this._position.mouseColumn,new Ci(s,1),"above",this._position.outsideDistance):Xy.createOutsideEditor(this._position.mouseColumn,new Ci(s,this._context.viewModel.getLineMaxColumn(s)),"below",this._position.outsideDistance)),this._dispatchMouse(r,!0,2),this._animationFrameDisposable=Uc(Dc(r.element),(()=>this._execute()))}}class $S{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=(new Date).getTime();n-this._lastSetMouseDownCountTime>$S.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}$S.CLEAR_MOUSE_DOWN_COUNT_TIME=400;class MS{get event(){return this.emitter.event}constructor(e,t,n){const i=e=>this.emitter.fire(e);this.emitter=new un({onWillAddFirstListener:()=>e.addEventListener(t,i,n),onDidRemoveLastListener:()=>e.removeEventListener(t,i,n)})}dispose(){this.emitter.dispose()}}class RS{constructor(e,t,n,i,s){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selection=i,this.newlineCountBeforeSelection=s}toString(){return"[ <".concat(this.value,">, selectionStart: ").concat(this.selectionStart,", selectionEnd: ").concat(this.selectionEnd,"]")}static readFromTextArea(e,t){const n=e.getValue(),i=e.getSelectionStart(),s=e.getSelectionEnd();let r;if(t){n.substring(0,i)===t.value.substring(0,t.selectionStart)&&(r=t.newlineCountBeforeSelection)}return new RS(n,i,s,null,r)}collapseSelection(){return this.selectionStart===this.value.length?this:new RS(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var t,n,i,s,r,o,a,l;if(e<=this.selectionStart){const i=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(null!==(n=null===(t=this.selection)||void 0===t?void 0:t.getStartPosition())&&void 0!==n?n:null,i,-1)}if(e>=this.selectionEnd){const t=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(null!==(s=null===(i=this.selection)||void 0===i?void 0:i.getEndPosition())&&void 0!==s?s:null,t,1)}const c=this.value.substring(this.selectionStart,e);if(-1===c.indexOf(String.fromCharCode(8230)))return this._finishDeduceEditorPosition(null!==(o=null===(r=this.selection)||void 0===r?void 0:r.getStartPosition())&&void 0!==o?o:null,c,1);const u=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(null!==(l=null===(a=this.selection)||void 0===a?void 0:a.getEndPosition())&&void 0!==l?l:null,u,-1)}_finishDeduceEditorPosition(e,t,n){let i=0,s=-1;for(;-1!==(s=t.indexOf("\n",s+1));)i++;return[e,n*t.length,i]}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const i=Math.min(rr(e.value,t.value),e.selectionStart,t.selectionStart),s=Math.min(or(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd),r=(e.value.substring(i,e.value.length-s),t.value.substring(i,t.value.length-s)),o=e.selectionStart-i,a=e.selectionEnd-i,l=t.selectionStart-i,c=t.selectionEnd-i;if(l===c){const t=e.selectionStart-i;return{text:r,replacePrevCharCnt:t,replaceNextCharCnt:0,positionDelta:0}}return{text:r,replacePrevCharCnt:a-o,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(rr(e.value,t.value),e.selectionEnd),i=Math.min(or(e.value,t.value),e.value.length-e.selectionEnd),s=e.value.substring(n,e.value.length-i),r=t.value.substring(n,t.value.length-i),o=(e.selectionStart,e.selectionEnd-n),a=(t.selectionStart,t.selectionEnd-n);return{text:r,replacePrevCharCnt:o,replaceNextCharCnt:s.length-o,positionDelta:a-r.length}}}RS.EMPTY=new RS("",0,0,null,void 0);class OS{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t;return new xi(n+1,1,n+t+1,1)}static fromEditorSelection(e,t,n,i){const s=500,r=OS._getPageOfLine(t.startLineNumber,n),o=OS._getRangeForPage(r,n),a=OS._getPageOfLine(t.endLineNumber,n),l=OS._getRangeForPage(a,n);let c=o.intersectRanges(new xi(1,1,t.startLineNumber,t.startColumn));if(i&&e.getValueLengthInRange(c,1)>s){const t=e.modifyPosition(c.getEndPosition(),-500);c=xi.fromPositions(t,c.getEndPosition())}const u=e.getValueInRange(c,1),h=e.getLineCount(),d=e.getLineMaxColumn(h);let f=l.intersectRanges(new xi(t.endLineNumber,t.endColumn,h,d));if(i&&e.getValueLengthInRange(f,1)>s){const t=e.modifyPosition(f.getStartPosition(),s);f=xi.fromPositions(f.getStartPosition(),t)}const g=e.getValueInRange(f,1);let p;if(r===a||r+1===a)p=e.getValueInRange(t,1);else{const n=o.intersectRanges(t),i=l.intersectRanges(t);p=e.getValueInRange(n,1)+String.fromCharCode(8230)+e.getValueInRange(i,1)}return i&&p.length>1e3&&(p=p.substring(0,s)+String.fromCharCode(8230)+p.substring(p.length-s,p.length)),new RS(u+p+g,u.length,u.length+p.length,t,c.endLineNumber-c.startLineNumber)}}var PS,FS=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},BS=function(e,t){return function(n,i){t(n,i,e)}};!function(e){e.Tap="-monaco-textarea-synthetic-tap"}(PS||(PS={}));const zS=!1;class WS{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}WS.INSTANCE=new WS;class HS{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){const t={text:e=e||"",replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let VS=class extends Zt{get textAreaState(){return this._textAreaState}constructor(e,t,n,i,s,r){super(),this._host=e,this._textArea=t,this._OS=n,this._browser=i,this._accessibilityService=s,this._logService=r,this._onFocus=this._register(new un),this.onFocus=this._onFocus.event,this._onBlur=this._register(new un),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new un),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new un),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new un),this.onCut=this._onCut.event,this._onPaste=this._register(new un),this.onPaste=this._onPaste.event,this._onType=this._register(new un),this.onType=this._onType.event,this._onCompositionStart=this._register(new un),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new un),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new un),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new un),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new Jt),this._asyncTriggerCut=this._register(new ol((()=>this._onCut.fire()),0)),this._textAreaState=RS.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(rn.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,(()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new ol((()=>this.writeNativeTextAreaContent("asyncFocusGain")),0)):this._asyncFocusGainWriteScreenReaderContent.clear()}))),this._hasFocus=!1,this._currentComposition=null;let o=null;this._register(this._textArea.onKeyDown((e=>{const t=new ja(e);(114===t.keyCode||this._currentComposition&&1===t.keyCode)&&t.stopPropagation(),t.equals(9)&&t.preventDefault(),o=t,this._onKeyDown.fire(t)}))),this._register(this._textArea.onKeyUp((e=>{const t=new ja(e);this._onKeyUp.fire(t)}))),this._register(this._textArea.onCompositionStart((e=>{const t=new HS;if(this._currentComposition)this._currentComposition=t;else{if(this._currentComposition=t,2===this._OS&&o&&o.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===e.data&&("ArrowRight"===o.code||"ArrowLeft"===o.code))return t.handleCompositionUpdate("x"),void this._onCompositionStart.fire({data:e.data});this._browser.isAndroid,this._onCompositionStart.fire({data:e.data})}}))),this._register(this._textArea.onCompositionUpdate((e=>{const t=this._currentComposition;if(!t)return;if(this._browser.isAndroid){const t=RS.readFromTextArea(this._textArea,this._textAreaState),n=RS.deduceAndroidCompositionInput(this._textAreaState,t);return this._textAreaState=t,this._onType.fire(n),void this._onCompositionUpdate.fire(e)}const n=t.handleCompositionUpdate(e.data);this._textAreaState=RS.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(n),this._onCompositionUpdate.fire(e)}))),this._register(this._textArea.onCompositionEnd((e=>{const t=this._currentComposition;if(!t)return;if(this._currentComposition=null,this._browser.isAndroid){const e=RS.readFromTextArea(this._textArea,this._textAreaState),t=RS.deduceAndroidCompositionInput(this._textAreaState,e);return this._textAreaState=e,this._onType.fire(t),void this._onCompositionEnd.fire()}const n=t.handleCompositionUpdate(e.data);this._textAreaState=RS.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(n),this._onCompositionEnd.fire()}))),this._register(this._textArea.onInput((e=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const t=RS.readFromTextArea(this._textArea,this._textAreaState),n=RS.deduceInput(this._textAreaState,t,2===this._OS);(0!==n.replacePrevCharCnt||1!==n.text.length||!ar(n.text.charCodeAt(0))&&127!==n.text.charCodeAt(0))&&(this._textAreaState=t,""===n.text&&0===n.replacePrevCharCnt&&0===n.replaceNextCharCnt&&0===n.positionDelta||this._onType.fire(n))}))),this._register(this._textArea.onCut((e=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(e),this._asyncTriggerCut.schedule()}))),this._register(this._textArea.onCopy((e=>{this._ensureClipboardGetsEditorSelection(e)}))),this._register(this._textArea.onPaste((e=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),e.preventDefault(),!e.clipboardData)return;let[t,n]=jS.getTextData(e.clipboardData);t&&(n=n||WS.INSTANCE.get(t),this._onPaste.fire({text:t,metadata:n}))}))),this._register(this._textArea.onFocus((()=>{const e=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!e&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new ol((()=>this.writeNativeTextAreaContent("asyncFocusGain")),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())}))),this._register(this._textArea.onBlur((()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)}))),this._register(this._textArea.onSyntheticTap((()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())})))}_installSelectionChangeListener(){let e=0;return zc(this._textArea.ownerDocument,"selectionchange",(t=>{if(lb.onSelectionChange(),!this._hasFocus)return;if(this._currentComposition)return;if(!this._browser.isChrome)return;const n=Date.now(),i=n-e;if(e=n,i<5)return;const s=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100)return;if(!this._textAreaState.selection)return;const r=this._textArea.getValue();if(this._textAreaState.value!==r)return;const o=this._textArea.getSelectionStart(),a=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===o&&this._textAreaState.selectionEnd===a)return;const l=this._textAreaState.deduceEditorPosition(o),c=this._host.deduceModelPosition(l[0],l[1],l[2]),u=this._textAreaState.deduceEditorPosition(a),h=this._host.deduceModelPosition(u[0],u[1],u[2]),d=new Ei(c.lineNumber,c.column,h.lineNumber,h.column);this._onSelectionChangeRequest.fire(d)}))}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&"render"===e||this._currentComposition||(this._logService.trace("writeTextAreaState(reason: ".concat(e,")")),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};WS.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,"\n"):t.text,n),e.preventDefault(),e.clipboardData&&jS.setTextData(e.clipboardData,t.text,t.html,n)}};VS=FS([BS(4,Zm),BS(5,Ra)],VS);const jS={getTextData(e){const t=e.getData(bd.text);let n=null;const i=e.getData("vscode-editor-data");if("string"===typeof i)try{n=JSON.parse(i),1!==n.version&&(n=null)}catch(s){}if(0===t.length&&null===n&&e.files.length>0){return[Array.prototype.slice.call(e.files,0).map((e=>e.name)).join("\n"),null]}return[t,n]},setTextData(e,t,n,i){e.setData(bd.text,t),"string"===typeof n&&e.setData("text/html",n),e.setData("vscode-editor-data",JSON.stringify(i))}};class US extends Zt{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new MS(this._actual,"keydown")).event,this.onKeyUp=this._register(new MS(this._actual,"keyup")).event,this.onCompositionStart=this._register(new MS(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new MS(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new MS(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new MS(this._actual,"beforeinput")).event,this.onInput=this._register(new MS(this._actual,"input")).event,this.onCut=this._register(new MS(this._actual,"cut")).event,this.onCopy=this._register(new MS(this._actual,"copy")).event,this.onPaste=this._register(new MS(this._actual,"paste")).event,this.onFocus=this._register(new MS(this._actual,"focus")).event,this.onBlur=this._register(new MS(this._actual,"blur")).event,this._onSyntheticTap=this._register(new un),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown((()=>lb.onKeyDown()))),this._register(this.onBeforeInput((()=>lb.onBeforeInput()))),this._register(this.onInput((()=>lb.onInput()))),this._register(this.onKeyUp((()=>lb.onKeyUp()))),this._register(zc(this._actual,PS.Tap,(()=>this._onSyntheticTap.fire())))}hasFocus(){const e=lu(this._actual);return e?e.activeElement===this._actual:!!this._actual.isConnected&&cu()===this._actual}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return"backward"===this._actual.selectionDirection?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return"backward"===this._actual.selectionDirection?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const i=this._actual;let s=null;const r=lu(i);s=r?r.activeElement:cu();const o=Dc(s),a=s===i,l=i.selectionStart,c=i.selectionEnd;if(a&&l===t&&c===n)Fr&&o.parent!==o&&i.focus();else{if(a)return this.setIgnoreSelectionChangeTime("setSelectionRange"),i.setSelectionRange(t,n),void(Fr&&o.parent!==o&&i.focus());try{const e=function(e){const t=[];for(let n=0;e&&e.nodeType===e.ELEMENT_NODE;n++)t[n]=e.scrollTop,e=e.parentNode;return t}(i);this.setIgnoreSelectionChangeTime("setSelectionRange"),i.focus(),i.setSelectionRange(t,n),function(e,t){for(let n=0;e&&e.nodeType===e.ELEMENT_NODE;n++)e.scrollTop!==t[n]&&(e.scrollTop=t[n]),e=e.parentNode}(i,e)}catch(zY){}}}}class qS extends AS{constructor(e,t,n){super(e,t,n),this._register(cS.addTarget(this.viewHelper.linesContentDomNode)),this._register(zc(this.viewHelper.linesContentDomNode,aS.Tap,(e=>this.onTap(e)))),this._register(zc(this.viewHelper.linesContentDomNode,aS.Change,(e=>this.onChange(e)))),this._register(zc(this.viewHelper.linesContentDomNode,aS.Contextmenu,(e=>this._onContextMenu(new fy(e,!1,this.viewHelper.viewDomNode),!1)))),this._lastPointerType="mouse",this._register(zc(this.viewHelper.linesContentDomNode,"pointerdown",(e=>{const t=e.pointerType;this._lastPointerType="mouse"!==t?"touch"===t?"touch":"pen":"mouse"})));const i=new py(this.viewHelper.viewDomNode);this._register(i.onPointerMove(this.viewHelper.viewDomNode,(e=>this._onMouseMove(e)))),this._register(i.onPointerUp(this.viewHelper.viewDomNode,(e=>this._onMouseUp(e)))),this._register(i.onPointerLeave(this.viewHelper.viewDomNode,(e=>this._onMouseLeave(e)))),this._register(i.onPointerDown(this.viewHelper.viewDomNode,((e,t)=>this._onMouseDown(e,t))))}onTap(e){e.initialTarget&&this.viewHelper.linesContentDomNode.contains(e.initialTarget)&&(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){"touch"===this._lastPointerType&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),"pen"===this._lastPointerType&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const n=this._createMouseTarget(new fy(e,!1,this.viewHelper.viewDomNode),!1);n.position&&this.viewController.dispatchMouse({position:n.position,mouseColumn:n.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:6===n.type&&null!==n.detail.injectedText})}_onMouseDown(e,t){"touch"!==e.browserEvent.pointerType&&super._onMouseDown(e,t)}}class KS extends AS{constructor(e,t,n){super(e,t,n),this._register(cS.addTarget(this.viewHelper.linesContentDomNode)),this._register(zc(this.viewHelper.linesContentDomNode,aS.Tap,(e=>this.onTap(e)))),this._register(zc(this.viewHelper.linesContentDomNode,aS.Change,(e=>this.onChange(e)))),this._register(zc(this.viewHelper.linesContentDomNode,aS.Contextmenu,(e=>this._onContextMenu(new fy(e,!1,this.viewHelper.viewDomNode),!1))))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new fy(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const e=document.createEvent("CustomEvent");e.initEvent(PS.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(e),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class GS extends Zt{constructor(e,t,n){super();(ke||Re&&Ce)&&Wa?this.handler=this._register(new qS(e,t,n)):Ms.TouchEvent?this.handler=this._register(new KS(e,t,n)):this.handler=this._register(new AS(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class YS extends yy{}const QS=ro("themeService");function XS(e){return{id:e}}function ZS(e){switch(e){case Ny.DARK:return"vs-dark";case Ny.HIGH_CONTRAST_DARK:return"hc-black";case Ny.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const JS="base.contributions.theming";const ew=new class{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new un}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),Qt((()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)}))}getThemingParticipants(){return this.themingParticipants}};function tw(e){return ew.onColorThemeChange(e)}ya.add(JS,ew);class nw extends Zt{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange((e=>this.onThemeChange(e))))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}const iw=gb("editor.lineHighlightBackground",{dark:null,light:null,hcDark:null,hcLight:null},G("lineHighlight","Background color for the highlight of line at the cursor position.")),sw=gb("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:_b},G("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),rw=(gb("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},G("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),gb("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:vb,hcLight:vb},G("rangeHighlightBorder","Background color of the border around highlighted ranges."),!0),gb("editor.symbolHighlightBackground",{dark:D_,light:D_,hcDark:null,hcLight:null},G("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),gb("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:vb,hcLight:vb},G("symbolHighlightBorder","Background color of the border around highlighted symbols."),!0),gb("editorCursor.foreground",{dark:"#AEAFAD",light:rp.black,hcDark:rp.white,hcLight:"#0F4A85"},G("caret","Color of the editor cursor."))),ow=gb("editorCursor.background",null,G("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),aw=gb("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},G("editorWhitespaces","Color of whitespace characters in the editor.")),lw=gb("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:rp.white,hcLight:"#292929"},G("editorLineNumbers","Color of editor line numbers.")),cw=gb("editorIndentGuide.background",{dark:aw,light:aw,hcDark:aw,hcLight:aw},G("editorIndentGuides","Color of the editor indentation guides."),!1,G("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),uw=gb("editorIndentGuide.activeBackground",{dark:aw,light:aw,hcDark:aw,hcLight:aw},G("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,G("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),hw=gb("editorIndentGuide.background1",{dark:cw,light:cw,hcDark:cw,hcLight:cw},G("editorIndentGuides1","Color of the editor indentation guides (1).")),dw=gb("editorIndentGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorIndentGuides2","Color of the editor indentation guides (2).")),fw=gb("editorIndentGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorIndentGuides3","Color of the editor indentation guides (3).")),gw=gb("editorIndentGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorIndentGuides4","Color of the editor indentation guides (4).")),pw=gb("editorIndentGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorIndentGuides5","Color of the editor indentation guides (5).")),mw=gb("editorIndentGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorIndentGuides6","Color of the editor indentation guides (6).")),bw=gb("editorIndentGuide.activeBackground1",{dark:uw,light:uw,hcDark:uw,hcLight:uw},G("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),_w=gb("editorIndentGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),vw=gb("editorIndentGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),yw=gb("editorIndentGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),Sw=gb("editorIndentGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),ww=gb("editorIndentGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),kw=gb("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:vb,hcLight:vb},G("editorActiveLineNumber","Color of editor active line number"),!1,G("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),Cw=(gb("editorLineNumber.activeForeground",{dark:kw,light:kw,hcDark:kw,hcLight:kw},G("editorActiveLineNumber","Color of editor active line number")),gb("editorLineNumber.dimmedForeground",{dark:null,light:null,hcDark:null,hcLight:null},G("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."))),xw=(gb("editorRuler.foreground",{dark:"#5A5A5A",light:rp.lightgrey,hcDark:rp.white,hcLight:"#292929"},G("editorRuler","Color of the editor rulers.")),gb("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},G("editorCodeLensForeground","Foreground color of editor CodeLens")),gb("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},G("editorBracketMatchBackground","Background color behind matching brackets")),gb("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:_b,hcLight:_b},G("editorBracketMatchBorder","Color for matching brackets boxes")),gb("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},G("editorOverviewRulerBorder","Color of the overview ruler border."))),Ew=gb("editorOverviewRuler.background",null,G("editorOverviewRulerBackground","Background color of the editor overview ruler.")),Lw=(gb("editorGutter.background",{dark:u_,light:u_,hcDark:u_,hcLight:u_},G("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),gb("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:rp.fromHex("#fff").transparent(.8),hcLight:_b},G("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),gb("editorUnnecessaryCode.opacity",{dark:rp.fromHex("#000a"),light:rp.fromHex("#0007"),hcDark:null,hcLight:null},G("unnecessaryCodeOpacity","Opacity of unnecessary (unused) source code in the editor. For example, \"#000000c0\" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out."))),Dw=(gb("editorGhostText.border",{dark:null,light:null,hcDark:rp.fromHex("#fff").transparent(.8),hcLight:rp.fromHex("#292929").transparent(.8)},G("editorGhostTextBorder","Border color of ghost text in the editor.")),gb("editorGhostText.foreground",{dark:rp.fromHex("#ffffff56"),light:rp.fromHex("#0007"),hcDark:null,hcLight:null},G("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),gb("editorGhostText.background",{dark:null,light:null,hcDark:null,hcLight:null},G("editorGhostTextBackground","Background color of the ghost text in the editor.")),new rp(new np(0,122,204,.6))),Aw=(gb("editorOverviewRuler.rangeHighlightForeground",{dark:Dw,light:Dw,hcDark:Dw,hcLight:Dw},G("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),gb("editorOverviewRuler.errorForeground",{dark:new rp(new np(255,18,18,.7)),light:new rp(new np(255,18,18,.7)),hcDark:new rp(new np(255,50,50,1)),hcLight:"#B5200D"},G("overviewRuleError","Overview ruler marker color for errors."))),Tw=gb("editorOverviewRuler.warningForeground",{dark:r_,light:r_,hcDark:o_,hcLight:o_},G("overviewRuleWarning","Overview ruler marker color for warnings.")),Nw=gb("editorOverviewRuler.infoForeground",{dark:a_,light:a_,hcDark:l_,hcLight:l_},G("overviewRuleInfo","Overview ruler marker color for infos.")),Iw=gb("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},G("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),$w=gb("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},G("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),Mw=gb("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},G("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),Rw=gb("editorBracketHighlight.foreground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),Ow=gb("editorBracketHighlight.foreground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),Pw=gb("editorBracketHighlight.foreground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),Fw=gb("editorBracketHighlight.unexpectedBracket.foreground",{dark:new rp(new np(255,18,18,.8)),light:new rp(new np(255,18,18,.8)),hcDark:new rp(new np(255,50,50,1)),hcLight:""},G("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),Bw=gb("editorBracketPairGuide.background1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),zw=gb("editorBracketPairGuide.background2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),Ww=gb("editorBracketPairGuide.background3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),Hw=gb("editorBracketPairGuide.background4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),Vw=gb("editorBracketPairGuide.background5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),jw=gb("editorBracketPairGuide.background6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),Uw=gb("editorBracketPairGuide.activeBackground1",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),qw=gb("editorBracketPairGuide.activeBackground2",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),Kw=gb("editorBracketPairGuide.activeBackground3",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),Gw=gb("editorBracketPairGuide.activeBackground4",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),Yw=gb("editorBracketPairGuide.activeBackground5",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),Qw=gb("editorBracketPairGuide.activeBackground6",{dark:"#00000000",light:"#00000000",hcDark:"#00000000",hcLight:"#00000000"},G("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));gb("editorUnicodeHighlight.border",{dark:r_,light:r_,hcDark:r_,hcLight:r_},G("editorUnicodeHighlight.border","Border color used to highlight unicode characters.")),gb("editorUnicodeHighlight.background",{dark:s_,light:s_,hcDark:s_,hcLight:s_},G("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));tw(((e,t)=>{const n=e.getColor(u_),i=e.getColor(iw),s=i&&!i.isTransparent()?i:n;s&&t.addRule(".monaco-editor .inputarea.ime-input { background-color: ".concat(s,"; }"))}));class Xw extends YS{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new Ci(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(66);const t=e.get(67);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(94);const n=e.get(143);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),2!==this._renderLineNumbers&&3!==this._renderLineNumbers||(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Ci(e,1));if(1!==t.column)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(2===this._renderLineNumbers){const e=Math.abs(this._lastCursorModelPosition.lineNumber-n);return 0===e?'<span class="relative-current-line-number">'+n+"</span>":String(e)}return 3===this._renderLineNumbers?this._lastCursorModelPosition.lineNumber===n||n%10===0?String(n):"":String(n)}prepareRender(e){if(0===this._renderLineNumbers)return void(this._renderResult=null);const t=ve?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,s=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter((e=>!!e.options.lineNumberClassName));s.sort(((e,t)=>xi.compareRangesUsingEnds(e.range,t.range)));let r=0;const o=this._context.viewModel.getLineCount(),a=[];for(let l=n;l<=i;l++){const e=l-n;let i=this._getLineRenderLineNumber(l),c="";for(;r<s.length&&s[r].range.endLineNumber<l;)r++;for(let t=r;t<s.length;t++){const{range:e,options:n}=s[t];e.startLineNumber<=l&&(c+=" "+n.lineNumberClassName)}i||c?(l===o&&0===this._context.viewModel.getLineLength(l)&&("off"===this._renderFinalNewline&&(i=""),"dimmed"===this._renderFinalNewline&&(c+=" dimmed-line-number")),l===this._activeLineNumber&&(c+=" active-line-number"),a[e]='<div class="'.concat(Xw.CLASS_NAME).concat(t).concat(c,'" style="left:').concat(this._lineNumbersLeft,"px;width:").concat(this._lineNumbersWidth,'px;">').concat(i,"</div>")):a[e]=""}this._renderResult=a}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}Xw.CLASS_NAME="line-numbers",tw(((e,t)=>{const n=e.getColor(lw),i=e.getColor(Cw);i?t.addRule(".monaco-editor .line-numbers.dimmed-line-number { color: ".concat(i,"; }")):n&&t.addRule(".monaco-editor .line-numbers.dimmed-line-number { color: ".concat(n.transparent(.4),"; }"))}));class Zw extends Sy{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(143);this._canUseLayerHinting=!t.get(32),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=Kr(document.createElement("div")),this._domNode.setClassName(Zw.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Kr(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(Zw.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(143);return this._canUseLayerHinting=!t.get(32),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}}Zw.CLASS_NAME="glyph-margin",Zw.OUTER_CLASS_NAME="margin";const Jw="monaco-mouse-cursor-text";const ek=new class{constructor(){this._onDidChange=new un,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}},tk=ro("keybindingService");var nk=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},ik=function(e,t){return function(n,i){t(n,i,e)}};class sk{constructor(e,t,n,i,s){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=n,this.widthOfHiddenLineTextBefore=i,this.distanceToModelLineEnd=s,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new Ci(this.modelLineNumber,this.distanceToModelLineStart+1),n=new Ci(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(this._previousPresentation=e||{foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const rk=Fr;let ok=class extends Sy{constructor(e,t,n,i,s){super(e),this._keybindingService=i,this._instantiationService=s,this._primaryCursorPosition=new Ci(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=n,this._scrollLeft=0,this._scrollTop=0;const r=this._context.configuration.options,o=r.get(143);this._setAccessibilityOptions(r),this._contentLeft=o.contentLeft,this._contentWidth=o.contentWidth,this._contentHeight=o.height,this._fontInfo=r.get(50),this._lineHeight=r.get(66),this._emptySelectionClipboard=r.get(37),this._copyWithSyntaxHighlighting=r.get(25),this._visibleTextArea=null,this._selections=[new Ei(1,1,1,1)],this._modelSelections=[new Ei(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Kr(document.createElement("textarea")),wy.write(this.textArea,7),this.textArea.setClassName("inputarea ".concat(Jw)),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:a}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize="".concat(a*this._fontInfo.spaceWidth,"px"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(r)),this.textArea.setAttribute("aria-required",r.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(r.get(123))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",G("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",r.get(90)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=Kr(document.createElement("div")),this.textAreaCover.setPosition("absolute");const l={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:e=>this._context.viewModel.getLineMaxColumn(e),getValueInRange:(e,t)=>this._context.viewModel.getValueInRange(e,t),getValueLengthInRange:(e,t)=>this._context.viewModel.getValueLengthInRange(e,t),modifyPosition:(e,t)=>this._context.viewModel.modifyPosition(e,t)},c={getDataToCopy:()=>{const e=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,be),t=this._context.viewModel.model.getEOL(),n=this._emptySelectionClipboard&&1===this._modelSelections.length&&this._modelSelections[0].isEmpty(),i=Array.isArray(e)?e:null,s=Array.isArray(e)?e.join(t):e;let r,o=null;if(zS||this._copyWithSyntaxHighlighting&&s.length<65536){const e=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);e&&(r=e.html,o=e.mode)}return{isFromEmptySelection:n,multicursorText:i,text:s,html:r,mode:o}},getScreenReaderContent:()=>{if(1===this._accessibilitySupport){const e=this._selections[0];if(_e&&e.isEmpty()){const t=e.getStartPosition();let n=this._getWordBeforePosition(t);if(0===n.length&&(n=this._getCharacterBeforePosition(t)),n.length>0)return new RS(n,n.length,n.length,xi.fromPositions(t),0)}const t=500;if(_e&&!e.isEmpty()&&l.getValueLengthInRange(e,0)<t){const t=l.getValueInRange(e,0);return new RS(t,0,t.length,e,0)}if(Wr&&!e.isEmpty()){const e="vscode-placeholder";return new RS(e,0,e.length,null,void 0)}return RS.EMPTY}if(Vr){const e=this._selections[0];if(e.isEmpty()){const t=e.getStartPosition(),[n,i]=this._getAndroidWordAtPosition(t);if(n.length>0)return new RS(n,i,i,xi.fromPositions(t),0)}return RS.EMPTY}return OS.fromEditorSelection(l,this._selections[0],this._accessibilityPageSize,0===this._accessibilitySupport)},deduceModelPosition:(e,t,n)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(e,t,n)},u=this._register(new US(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(VS,c,u,De,{isAndroid:Vr,isChrome:zr,isFirefox:Fr,isSafari:Wr})),this._register(this._textAreaInput.onKeyDown((e=>{this._viewController.emitKeyDown(e)}))),this._register(this._textAreaInput.onKeyUp((e=>{this._viewController.emitKeyUp(e)}))),this._register(this._textAreaInput.onPaste((e=>{let t=!1,n=null,i=null;e.metadata&&(t=this._emptySelectionClipboard&&!!e.metadata.isFromEmptySelection,n="undefined"!==typeof e.metadata.multicursorText?e.metadata.multicursorText:null,i=e.metadata.mode),this._viewController.paste(e.text,t,n,i)}))),this._register(this._textAreaInput.onCut((()=>{this._viewController.cut()}))),this._register(this._textAreaInput.onType((e=>{e.replacePrevCharCnt||e.replaceNextCharCnt||e.positionDelta?this._viewController.compositionType(e.text,e.replacePrevCharCnt,e.replaceNextCharCnt,e.positionDelta):this._viewController.type(e.text)}))),this._register(this._textAreaInput.onSelectionChangeRequest((e=>{this._viewController.setSelection(e)}))),this._register(this._textAreaInput.onCompositionStart((e=>{const t=this.textArea.domNode,n=this._modelSelections[0],{distanceToModelLineStart:i,widthOfHiddenTextBefore:s}=(()=>{const e=t.value.substring(0,Math.min(t.selectionStart,t.selectionEnd)),i=e.lastIndexOf("\n"),s=e.substring(i+1),r=s.lastIndexOf("\t"),o=s.length-r-1,a=n.getStartPosition(),l=Math.min(a.column-1,o),c=a.column-1-l,u=s.substring(0,s.length-l),{tabSize:h}=this._context.viewModel.model.getOptions(),d=function(e,t,n,i){if(0===t.length)return 0;const s=e.createElement("div");s.style.position="absolute",s.style.top="-50000px",s.style.width="50000px";const r=e.createElement("span");Gr(r,n),r.style.whiteSpace="pre",r.style.tabSize="".concat(i*n.spaceWidth,"px"),r.append(t),s.appendChild(r),e.body.appendChild(s);const o=r.offsetWidth;return e.body.removeChild(s),o}(this.textArea.domNode.ownerDocument,u,this._fontInfo,h);return{distanceToModelLineStart:c,widthOfHiddenTextBefore:d}})(),{distanceToModelLineEnd:r}=(()=>{const e=t.value.substring(Math.max(t.selectionStart,t.selectionEnd)),i=e.indexOf("\n"),s=-1===i?e:e.substring(0,i),r=s.indexOf("\t"),o=-1===r?s.length:s.length-r-1,a=n.getEndPosition(),l=Math.min(this._context.viewModel.model.getLineMaxColumn(a.lineNumber)-a.column,o);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(a.lineNumber)-a.column-l}})();this._context.viewModel.revealRange("keyboard",!0,xi.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new sk(this._context,n.startLineNumber,i,s,r),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName("inputarea ".concat(Jw," ime-input")),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()}))),this._register(this._textAreaInput.onCompositionUpdate((e=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())}))),this._register(this._textAreaInput.onCompositionEnd((()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName("inputarea ".concat(Jw)),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()}))),this._register(this._textAreaInput.onFocus((()=>{this._context.viewModel.setHasFocus(!0)}))),this._register(this._textAreaInput.onBlur((()=>{this._context.viewModel.setHasFocus(!1)}))),this._register(ek.onDidChange((()=>{this._ensureReadOnlyAttribute()})))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),n=Ef('`~!@#$%^&*()-=+[{]}\\|;:",.<>/?');let i=!0,s=e.column,r=!0,o=e.column,a=0;for(;a<50&&(i||r);){if(i&&s<=1&&(i=!1),i){const e=t.charCodeAt(s-2);0!==n.get(e)?i=!1:s--}if(r&&o>t.length&&(r=!1),r){const e=t.charCodeAt(o-1);0!==n.get(e)?r=!1:o++}a++}return[t.substring(s-1,o-1),e.column-s]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),n=Ef(this._context.configuration.options.get(129));let i=e.column,s=0;for(;i>1;){const r=t.charCodeAt(i-2);if(0!==n.get(r)||s>50)return t.substring(i-1,e.column-1);s++,i--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const t=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!ar(t.charCodeAt(0)))return t}return""}_getAriaLabel(e){var t,n,i;if(1===e.get(2)){const e=null===(t=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))||void 0===t?void 0:t.getAriaLabel(),s=null===(n=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))||void 0===n?void 0:n.getAriaLabel(),r=null===(i=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))||void 0===i?void 0:i.getAriaLabel(),o=G("accessibilityModeOff","The editor is not accessible at this time.");return e?G("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",o,e):s?G("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",o,s):r?G("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",o,r):o}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);2===this._accessibilitySupport&&t===At.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const n=e.get(143).wrappingColumn;if(-1!==n&&1!==this._accessibilitySupport){const t=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(n*t.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=rk?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(143);this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(50),this._lineHeight=t.get(66),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:i}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize="".concat(i*this._fontInfo.spaceWidth,"px"),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(123))),(e.hasChanged(34)||e.hasChanged(90))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!ek.enabled||e.get(34)&&e.get(90)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new Ci(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),null===(t=this._visibleTextArea)||void 0===t||t.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){var e;if(this._visibleTextArea){const e=this._visibleTextArea.visibleTextareaStart,t=this._visibleTextArea.visibleTextareaEnd,n=this._visibleTextArea.startPosition,i=this._visibleTextArea.endPosition;if(n&&i&&e&&t&&t.left>=this._scrollLeft&&e.left<=this._scrollLeft+this._contentWidth){const s=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,r=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let o=this._visibleTextArea.widthOfHiddenLineTextBefore,a=this._contentLeft+e.left-this._scrollLeft,l=t.left-e.left+1;if(a<this._contentLeft){const e=this._contentLeft-a;a+=e,o+=e,l-=e}l>this._contentWidth&&(l=this._contentWidth);const c=this._context.viewModel.getViewLineData(n.lineNumber),u=c.tokens.findTokenIndexAtOffset(n.column-1),h=u===c.tokens.findTokenIndexAtOffset(i.column-1),d=this._visibleTextArea.definePresentation(h?c.tokens.getPresentation(u):null);this.textArea.domNode.scrollTop=r*this._lineHeight,this.textArea.domNode.scrollLeft=o,this._doRender({lastRenderPosition:null,top:s,left:a,width:l,height:this._lineHeight,useCover:!1,color:(Ui.getColorMap()||[])[d.foreground],italic:d.italic,bold:d.bold,underline:d.underline,strikethrough:d.strikethrough})}return}if(!this._primaryCursorVisibleRange)return void this._renderAtTopLeft();const t=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(t<this._contentLeft||t>this._contentLeft+this._contentWidth)return void this._renderAtTopLeft();const n=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(n<0||n>this._contentHeight)this._renderAtTopLeft();else if(_e||2===this._accessibilitySupport){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:n,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const i=null!==(e=this._textAreaInput.textAreaState.newlineCountBeforeSelection)&&void 0!==e?e:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=i*this._lineHeight}else this._doRender({lastRenderPosition:this._primaryCursorPosition,top:n,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:rk?0:1,useCover:!1})}_newlinecount(e){let t=0,n=-1;for(;;){if(n=e.indexOf("\n",n+1),-1===n)break;t++}return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:rk?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,n=this.textAreaCover;Gr(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?rp.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration("".concat(e.underline?" underline":"").concat(e.strikethrough?" line-through":"")),n.setTop(e.useCover?e.top:0),n.setLeft(e.useCover?e.left:0),n.setWidth(e.useCover?e.width:0),n.setHeight(e.useCover?e.height:0);const i=this._context.configuration.options;i.get(57)?n.setClassName("monaco-editor-background textAreaCover "+Zw.OUTER_CLASS_NAME):0!==i.get(67).renderType?n.setClassName("monaco-editor-background textAreaCover "+Xw.CLASS_NAME):n.setClassName("monaco-editor-background textAreaCover")}};function ak(e,t,n){let i=Ks(e);return-1===i&&(i=e.length),function(e,t,n){let i=0;for(let r=0;r<e.length;r++)"\t"===e.charAt(r)?i=Uy.nextIndentTabStop(i,t):i++;let s="";if(!n){const e=Math.floor(i/t);i%=t;for(let t=0;t<e;t++)s+="\t"}for(let r=0;r<i;r++)s+=" ";return s}(e.substring(0,i),t,n)+e.substring(i)}ok=nk([ik(3,tk),ik(4,so)],ok);const lk=()=>!0,ck=()=>!1,uk=e=>" "===e||"\t"===e;class hk{static shouldRecreate(e){return e.hasChanged(143)||e.hasChanged(129)||e.hasChanged(37)||e.hasChanged(76)||e.hasChanged(78)||e.hasChanged(79)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(127)||e.hasChanged(50)||e.hasChanged(90)}constructor(e,t,n,i){var s;this.languageConfigurationService=i,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const r=n.options,o=r.get(143),a=r.get(50);this.readOnly=r.get(90),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=r.get(115),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(o.height/this.lineHeight)-2),this.useTabStops=r.get(127),this.wordSeparators=r.get(129),this.emptySelectionClipboard=r.get(37),this.copyWithSyntaxHighlighting=r.get(25),this.multiCursorMergeOverlapping=r.get(76),this.multiCursorPaste=r.get(78),this.multiCursorLimit=r.get(79),this.autoClosingBrackets=r.get(6),this.autoClosingComments=r.get(7),this.autoClosingQuotes=r.get(11),this.autoClosingDelete=r.get(9),this.autoClosingOvertype=r.get(10),this.autoSurround=r.get(14),this.autoIndent=r.get(12),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const u of l)this.surroundingPairs[u.open]=u.close;const c=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=null!==(s=null===c||void 0===c?void 0:c.blockCommentStartToken)&&void 0!==s?s:null}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=null===(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)||void 0===e?void 0:e.getElectricCharacters();if(t)for(const e of t)this._electricChars[e]=!0}return this._electricChars}onElectricCharacter(e,t,n){const i=Lh(t,n-1),s=this.languageConfigurationService.getLanguageConfiguration(i.languageId).electricCharacter;return s?s.onElectricCharacter(e,i,n-i.firstCharOffset):null}normalizeIndentation(e){return ak(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,n){switch(t){case"beforeWhitespace":return uk;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,n);case"always":return lk;case"never":return ck}}_getLanguageDefinedShouldAutoClose(e,t){const n=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return e=>-1!==n.indexOf(e)}visibleColumnFromColumn(e,t){return Uy.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){const i=Uy.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),s=e.getLineMinColumn(t);if(i<s)return s;const r=e.getLineMaxColumn(t);return i>r?r:i}}class dk{static fromModelState(e){return new fk(e)}static fromViewState(e){return new gk(e)}static fromModelSelection(e){const t=Ei.liftSelection(e),n=new pk(xi.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return dk.fromModelState(n)}static fromModelSelections(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this.fromModelSelection(e[n]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}}class fk{constructor(e){this.modelState=e,this.viewState=null}}class gk{constructor(e){this.modelState=null,this.viewState=e}}class pk{constructor(e,t,n,i,s){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=n,this.position=i,this.leftoverVisibleColumns=s,this._singleCursorStateBrand=void 0,this.selection=pk._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,i){return e?new pk(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new Ci(t,n),i):new pk(new xi(t,n,t,n),0,i,new Ci(t,n),i)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?Ei.fromPositions(e.getStartPosition(),t):Ei.fromPositions(e.getEndPosition(),t)}}class mk{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function bk(e){return"'"===e||'"'===e||"`"===e}class _k{static columnSelect(e,t,n,i,s,r){const o=Math.abs(s-n)+1,a=n>s,l=i>r,c=i<r,u=[];for(let h=0;h<o;h++){const s=n+(a?-h:h),o=e.columnFromVisibleColumn(t,s,i),d=e.columnFromVisibleColumn(t,s,r),f=e.visibleColumnFromColumn(t,new Ci(s,o)),g=e.visibleColumnFromColumn(t,new Ci(s,d));if(c){if(f>r)continue;if(g<i)continue}if(l){if(g>i)continue;if(f<r)continue}u.push(new pk(new xi(s,o,s,o),0,0,new Ci(s,d),0))}if(0===u.length)for(let h=0;h<o;h++){const e=n+(a?-h:h),i=t.getLineMaxColumn(e);u.push(new pk(new xi(e,i,e,i),0,0,new Ci(e,i),0))}return{viewStates:u,reversed:a,fromLineNumber:n,fromVisualColumn:i,toLineNumber:s,toVisualColumn:r}}static columnSelectLeft(e,t,n){let i=n.toViewVisualColumn;return i>0&&i--,_k.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,i)}static columnSelectRight(e,t,n){let i=0;const s=Math.min(n.fromViewLineNumber,n.toViewLineNumber),r=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let a=s;a<=r;a++){const n=t.getLineMaxColumn(a),s=e.visibleColumnFromColumn(t,new Ci(a,n));i=Math.max(i,s)}let o=n.toViewVisualColumn;return o<i&&o++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,o)}static columnSelectUp(e,t,n,i){const s=i?e.pageSize:1,r=Math.max(1,n.toViewLineNumber-s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}static columnSelectDown(e,t,n,i){const s=i?e.pageSize:1,r=Math.min(t.getLineCount(),n.toViewLineNumber+s);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}}class vk{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Ei.fromPositions(n.getEndPosition())}}class yk{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Ei.fromPositions(n.getStartPosition())}}class Sk{constructor(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this._range=e,this._text=t,this._columnDeltaOffset=i,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=s}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return Ei.fromPositions(n.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class wk{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=i,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class kk{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class Ck{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-gr(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new Ci(n,e.getLineMaxColumn(n))}return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const i=e.getLineMinColumn(t.lineNumber),s=e.getLineContent(t.lineNumber),r=qy.atomicPosition(s,t.column-1,n,0);if(-1!==r&&r+1>=i)return new Ci(t.lineNumber,r+1)}return this.leftPosition(e,t)}static left(e,t,n){const i=e.stickyTabStops?Ck.leftPositionAtomicSoftTabs(t,n,e.tabSize):Ck.leftPosition(t,n);return new kk(i.lineNumber,i.column,0)}static moveLeft(e,t,n,i,s){let r,o;if(n.hasSelection()&&!i)r=n.selection.startLineNumber,o=n.selection.startColumn;else{const i=n.position.delta(void 0,-(s-1)),a=t.normalizePosition(Ck.clipPositionColumn(i,t),0),l=Ck.left(e,t,a);r=l.lineNumber,o=l.column}return n.move(i,r,o,0)}static clipPositionColumn(e,t){return new Ci(e.lineNumber,Ck.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n+=fr(e.getLineContent(t),n-1):t<e.getLineCount()&&(t+=1,n=e.getLineMinColumn(t)),new Ci(t,n)}static rightPositionAtomicSoftTabs(e,t,n,i,s){if(n<e.getLineIndentColumn(t)){const s=e.getLineContent(t),r=qy.atomicPosition(s,n-1,i,1);if(-1!==r)return new Ci(t,r+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const i=e.stickyTabStops?Ck.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):Ck.rightPosition(t,n.lineNumber,n.column);return new kk(i.lineNumber,i.column,0)}static moveRight(e,t,n,i,s){let r,o;if(n.hasSelection()&&!i)r=n.selection.endLineNumber,o=n.selection.endColumn;else{const i=n.position.delta(void 0,s-1),a=t.normalizePosition(Ck.clipPositionColumn(i,t),1),l=Ck.right(e,t,a);r=l.lineNumber,o=l.column}return n.move(i,r,o,0)}static vertical(e,t,n,i,s,r,o,a){const l=Uy.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+s,c=t.getLineCount(),u=1===n&&1===i,h=n===c&&i===t.getLineMaxColumn(n),d=r<n?u:h;if((n=r)<1?(n=1,i=o?t.getLineMinColumn(n):Math.min(t.getLineMaxColumn(n),i)):n>c?(n=c,i=o?t.getLineMaxColumn(n):Math.min(t.getLineMaxColumn(n),i)):i=e.columnFromVisibleColumn(t,n,l),s=d?0:l-Uy.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),void 0!==a){const e=new Ci(n,i),r=t.normalizePosition(e,a);s+=i-r.column,n=r.lineNumber,i=r.column}return new kk(n,i,s)}static down(e,t,n,i,s,r,o){return this.vertical(e,t,n,i,s,n+r,o,4)}static moveDown(e,t,n,i,s){let r,o;n.hasSelection()&&!i?(r=n.selection.endLineNumber,o=n.selection.endColumn):(r=n.position.lineNumber,o=n.position.column);let a,l=0;do{a=Ck.down(e,t,r+l,o,n.leftoverVisibleColumns,s,!0);if(t.normalizePosition(new Ci(a.lineNumber,a.column),2).lineNumber>r)break}while(l++<10&&r+l<t.getLineCount());return n.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns)}static translateDown(e,t,n){const i=n.selection,s=Ck.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),r=Ck.down(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new pk(new xi(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new Ci(r.lineNumber,r.column),r.leftoverVisibleColumns)}static up(e,t,n,i,s,r,o){return this.vertical(e,t,n,i,s,n-r,o,3)}static moveUp(e,t,n,i,s){let r,o;n.hasSelection()&&!i?(r=n.selection.startLineNumber,o=n.selection.startColumn):(r=n.position.lineNumber,o=n.position.column);const a=Ck.up(e,t,r,o,n.leftoverVisibleColumns,s,!0);return n.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns)}static translateUp(e,t,n){const i=n.selection,s=Ck.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),r=Ck.up(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new pk(new xi(s.lineNumber,s.column,s.lineNumber,s.column),0,s.leftoverVisibleColumns,new Ci(r.lineNumber,r.column),r.leftoverVisibleColumns)}static _isBlankLine(e,t){return 0===e.getLineFirstNonWhitespaceColumn(t)}static moveToPrevBlankLine(e,t,n,i){let s=n.position.lineNumber;for(;s>1&&this._isBlankLine(t,s);)s--;for(;s>1&&!this._isBlankLine(t,s);)s--;return n.move(i,s,t.getLineMinColumn(s),0)}static moveToNextBlankLine(e,t,n,i){const s=t.getLineCount();let r=n.position.lineNumber;for(;r<s&&this._isBlankLine(t,r);)r++;for(;r<s&&!this._isBlankLine(t,r);)r++;return n.move(i,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,n,i){const s=n.position.lineNumber,r=t.getLineMinColumn(s),o=t.getLineFirstNonWhitespaceColumn(s)||r;let a;return a=n.position.column===o?r:o,n.move(i,s,a,0)}static moveToEndOfLine(e,t,n,i,s){const r=n.position.lineNumber,o=t.getLineMaxColumn(r);return n.move(i,r,o,s?1073741824-o:0)}static moveToBeginningOfBuffer(e,t,n,i){return n.move(i,1,1,0)}static moveToEndOfBuffer(e,t,n,i){const s=t.getLineCount(),r=t.getLineMaxColumn(s);return n.move(i,s,r,0)}}class xk{static deleteRight(e,t,n,i){const s=[];let r=3!==e;for(let o=0,a=i.length;o<a;o++){const e=i[o];let a=e;if(a.isEmpty()){const i=e.getPosition(),s=Ck.right(t,n,i);a=new xi(s.lineNumber,s.column,i.lineNumber,i.column)}a.isEmpty()?s[o]=null:(a.startLineNumber!==a.endLineNumber&&(r=!0),s[o]=new vk(a,""))}return[r,s]}static isAutoClosingPairDelete(e,t,n,i,s,r,o){if("never"===t&&"never"===n)return!1;if("never"===e)return!1;for(let a=0,l=r.length;a<l;a++){const l=r[a],c=l.getPosition();if(!l.isEmpty())return!1;const u=s.getLineContent(c.lineNumber);if(c.column<2||c.column>=u.length+1)return!1;const h=u.charAt(c.column-2),d=i.get(h);if(!d)return!1;if(bk(h)){if("never"===n)return!1}else if("never"===t)return!1;const f=u.charAt(c.column-1);let g=!1;for(const e of d)e.open===h&&e.close===f&&(g=!0);if(!g)return!1;if("auto"===e){let e=!1;for(let t=0,n=o.length;t<n;t++){const n=o[t];if(c.lineNumber===n.startLineNumber&&c.column===n.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++){const e=n[s].getPosition(),t=new xi(e.lineNumber,e.column-1,e.lineNumber,e.column+1);i[s]=new vk(t,"")}return[!0,i]}static deleteLeft(e,t,n,i,s){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,i,s))return this._runAutoClosingPairDelete(t,n,i);const r=[];let o=2!==e;for(let a=0,l=i.length;a<l;a++){const e=xk.getDeleteRange(i[a],n,t);e.isEmpty()?r[a]=null:(e.startLineNumber!==e.endLineNumber&&(o=!0),r[a]=new vk(e,""))}return[o,r]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const i=e.getPosition();if(n.useTabStops&&i.column>1){const e=t.getLineContent(i.lineNumber),s=Ks(e),r=-1===s?e.length+1:s+1;if(i.column<=r){const e=n.visibleColumnFromColumn(t,i),s=Uy.prevIndentTabStop(e,n.indentSize),r=n.columnFromVisibleColumn(t,i.lineNumber,s);return new xi(i.lineNumber,r,i.lineNumber,i.column)}}return xi.fromPositions(xk.getPositionAfterDeleteLeft(i,t),i)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=Dr(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}if(e.lineNumber>1){const n=e.lineNumber-1;return new Ci(n,t.getLineMaxColumn(n))}return e}static cut(e,t,n){const i=[];let s=null;n.sort(((e,t)=>Ci.compare(e.getStartPosition(),t.getEndPosition())));for(let r=0,o=n.length;r<o;r++){const o=n[r];if(o.isEmpty())if(e.emptySelectionClipboard){const e=o.getPosition();let n,a,l,c;e.lineNumber<t.getLineCount()?(n=e.lineNumber,a=1,l=e.lineNumber+1,c=1):e.lineNumber>1&&(null===s||void 0===s?void 0:s.endLineNumber)!==e.lineNumber?(n=e.lineNumber-1,a=t.getLineMaxColumn(e.lineNumber-1),l=e.lineNumber,c=t.getLineMaxColumn(e.lineNumber)):(n=e.lineNumber,a=1,l=e.lineNumber,c=t.getLineMaxColumn(e.lineNumber));const u=new xi(n,a,l,c);s=u,u.isEmpty()?i[r]=null:i[r]=new vk(u,"")}else i[r]=null;else i[r]=new vk(o,"")}return new mk(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class Ek{static _createWord(e,t,n,i,s){return{start:i,end:s,wordType:t,nextCharClass:n}}static _findPreviousWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(i,e,n)}static _doFindPreviousWordOnLine(e,t,n){let i=0;for(let s=n.column-2;s>=0;s--){const n=e.charCodeAt(s),r=t.get(n);if(0===r){if(2===i)return this._createWord(e,i,r,s+1,this._findEndOfWord(e,t,i,s+1));i=1}else if(2===r){if(1===i)return this._createWord(e,i,r,s+1,this._findEndOfWord(e,t,i,s+1));i=2}else if(1===r&&0!==i)return this._createWord(e,i,r,s+1,this._findEndOfWord(e,t,i,s+1))}return 0!==i?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null}static _findEndOfWord(e,t,n,i){const s=e.length;for(let r=i;r<s;r++){const i=e.charCodeAt(r),s=t.get(i);if(1===s)return r;if(1===n&&2===s)return r;if(2===n&&0===s)return r}return s}static _findNextWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(i,e,n)}static _doFindNextWordOnLine(e,t,n){let i=0;const s=e.length;for(let r=n.column-1;r<s;r++){const n=e.charCodeAt(r),s=t.get(n);if(0===s){if(2===i)return this._createWord(e,i,s,this._findStartOfWord(e,t,i,r-1),r);i=1}else if(2===s){if(1===i)return this._createWord(e,i,s,this._findStartOfWord(e,t,i,r-1),r);i=2}else if(1===s&&0!==i)return this._createWord(e,i,s,this._findStartOfWord(e,t,i,r-1),r)}return 0!==i?this._createWord(e,i,1,this._findStartOfWord(e,t,i,s-1),s):null}static _findStartOfWord(e,t,n,i){for(let s=i;s>=0;s--){const i=e.charCodeAt(s),r=t.get(i);if(1===r)return s+1;if(1===n&&2===r)return s+1;if(2===n&&0===r)return s+1}return 0}static moveWordLeft(e,t,n,i){let s=n.lineNumber,r=n.column;1===r&&s>1&&(s-=1,r=t.getLineMaxColumn(s));let o=Ek._findPreviousWordOnLine(e,t,new Ci(s,r));if(0===i)return new Ci(s,o?o.start+1:1);if(1===i)return o&&2===o.wordType&&o.end-o.start===1&&0===o.nextCharClass&&(o=Ek._findPreviousWordOnLine(e,t,new Ci(s,o.start+1))),new Ci(s,o?o.start+1:1);if(3===i){for(;o&&2===o.wordType;)o=Ek._findPreviousWordOnLine(e,t,new Ci(s,o.start+1));return new Ci(s,o?o.start+1:1)}return o&&r<=o.end+1&&(o=Ek._findPreviousWordOnLine(e,t,new Ci(s,o.start+1))),new Ci(s,o?o.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(1===t.column)return n>1?new Ci(n-1,e.getLineMaxColumn(n-1)):t;const s=e.getLineContent(n);for(let r=t.column-1;r>1;r--){const e=s.charCodeAt(r-2),t=s.charCodeAt(r-1);if(95===e&&95!==t)return new Ci(n,r);if(45===e&&45!==t)return new Ci(n,r);if((tr(e)||er(e))&&nr(t))return new Ci(n,r);if(nr(e)&&nr(t)&&r+1<i){const e=s.charCodeAt(r);if(tr(e)||er(e))return new Ci(n,r)}}return new Ci(n,1)}static moveWordRight(e,t,n,i){let s=n.lineNumber,r=n.column,o=!1;r===t.getLineMaxColumn(s)&&s<t.getLineCount()&&(o=!0,s+=1,r=1);let a=Ek._findNextWordOnLine(e,t,new Ci(s,r));if(2===i)a&&2===a.wordType&&a.end-a.start===1&&0===a.nextCharClass&&(a=Ek._findNextWordOnLine(e,t,new Ci(s,a.end+1))),r=a?a.end+1:t.getLineMaxColumn(s);else if(3===i){for(o&&(r=0);a&&(2===a.wordType||a.start+1<=r);)a=Ek._findNextWordOnLine(e,t,new Ci(s,a.end+1));r=a?a.start+1:t.getLineMaxColumn(s)}else a&&!o&&r>=a.start+1&&(a=Ek._findNextWordOnLine(e,t,new Ci(s,a.end+1))),r=a?a.start+1:t.getLineMaxColumn(s);return new Ci(s,r)}static _moveWordPartRight(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===i)return n<e.getLineCount()?new Ci(n+1,1):t;const s=e.getLineContent(n);for(let r=t.column+1;r<i;r++){const e=s.charCodeAt(r-2),t=s.charCodeAt(r-1);if(95!==e&&95===t)return new Ci(n,r);if(45!==e&&45===t)return new Ci(n,r);if((tr(e)||er(e))&&nr(t))return new Ci(n,r);if(nr(e)&&nr(t)&&r+1<i){const e=s.charCodeAt(r);if(tr(e)||er(e))return new Ci(n,r)}}return new Ci(n,i)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-2,s=Ys(n,i);return s+1<i?new xi(t.lineNumber,s+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,i=e.model,s=e.selection,r=e.whitespaceHeuristics;if(!s.isEmpty())return s;if(xk.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const t=e.selection.getPosition();return new xi(t.lineNumber,t.column-1,t.lineNumber,t.column+1)}const o=new Ci(s.positionLineNumber,s.positionColumn);let a=o.lineNumber,l=o.column;if(1===a&&1===l)return null;if(r){const e=this._deleteWordLeftWhitespace(i,o);if(e)return e}let c=Ek._findPreviousWordOnLine(n,i,o);return 0===t?c?l=c.start+1:l>1?l=1:(a--,l=i.getLineMaxColumn(a)):(c&&l<=c.end+1&&(c=Ek._findPreviousWordOnLine(n,i,new Ci(a,c.start+1))),c?l=c.end+1:l>1?l=1:(a--,l=i.getLineMaxColumn(a))),new xi(a,l,o.lineNumber,o.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const i=new Ci(n.positionLineNumber,n.positionColumn),s=this._deleteInsideWordWhitespace(t,i);return s||this._deleteInsideWordDetermineDeleteRange(e,t,i)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return 32===n||9===n}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=n.length;if(0===i)return null;let s=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,s))return null;let r=Math.min(t.column-1,i-1);if(!this._charAtIsWhitespace(n,r))return null;for(;s>0&&this._charAtIsWhitespace(n,s-1);)s--;for(;r+1<i&&this._charAtIsWhitespace(n,r+1);)r++;return new xi(t.lineNumber,s+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const i=t.getLineContent(n.lineNumber),s=i.length;if(0===s)return n.lineNumber>1?new xi(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new xi(n.lineNumber,1,n.lineNumber+1,1):new xi(n.lineNumber,1,n.lineNumber,1);const r=e=>e.start+1<=n.column&&n.column<=e.end+1,o=(e,t)=>(e=Math.min(e,n.column),t=Math.max(t,n.column),new xi(n.lineNumber,e,n.lineNumber,t)),a=e=>{let t=e.start+1,n=e.end+1,r=!1;for(;n-1<s&&this._charAtIsWhitespace(i,n-1);)r=!0,n++;if(!r)for(;t>1&&this._charAtIsWhitespace(i,t-2);)t--;return o(t,n)},l=Ek._findPreviousWordOnLine(e,t,n);if(l&&r(l))return a(l);const c=Ek._findNextWordOnLine(e,t,n);return c&&r(c)?a(c):l&&c?o(l.end+1,c.start+1):l?o(l.start+1,l.end+1):c?o(c.start+1,c.end+1):o(1,s+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=Ek._moveWordPartLeft(e,n);return new xi(n.lineNumber,n.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(e,t){const n=e.length;for(let i=t;i<n;i++){const t=e.charAt(i);if(" "!==t&&"\t"!==t)return i}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-1,s=this._findFirstNonWhitespaceChar(n,i);return i+1<s?new xi(t.lineNumber,t.column,t.lineNumber,s+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,i=e.model,s=e.selection,r=e.whitespaceHeuristics;if(!s.isEmpty())return s;const o=new Ci(s.positionLineNumber,s.positionColumn);let a=o.lineNumber,l=o.column;const c=i.getLineCount(),u=i.getLineMaxColumn(a);if(a===c&&l===u)return null;if(r){const e=this._deleteWordRightWhitespace(i,o);if(e)return e}let h=Ek._findNextWordOnLine(n,i,o);return 2===t?h?l=h.end+1:l<u||a===c?l=u:(a++,h=Ek._findNextWordOnLine(n,i,new Ci(a,1)),l=h?h.start+1:i.getLineMaxColumn(a)):(h&&l>=h.start+1&&(h=Ek._findNextWordOnLine(n,i,new Ci(a,h.end+1))),h?l=h.start+1:l<u||a===c?l=u:(a++,h=Ek._findNextWordOnLine(n,i,new Ci(a,1)),l=h?h.start+1:i.getLineMaxColumn(a))),new xi(a,l,o.lineNumber,o.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=Ek._moveWordPartRight(e,n);return new xi(n.lineNumber,n.column,i.lineNumber,i.column)}static _createWordAtPosition(e,t,n){const i=new xi(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}static getWordAtPosition(e,t,n){const i=Ef(t),s=Ek._findPreviousWordOnLine(i,e,n);if(s&&1===s.wordType&&s.start<=n.column-1&&n.column-1<=s.end)return Ek._createWordAtPosition(e,n.lineNumber,s);const r=Ek._findNextWordOnLine(i,e,n);return r&&1===r.wordType&&r.start<=n.column-1&&n.column-1<=r.end?Ek._createWordAtPosition(e,n.lineNumber,r):null}static word(e,t,n,i,s){const r=Ef(e.wordSeparators),o=Ek._findPreviousWordOnLine(r,t,s),a=Ek._findNextWordOnLine(r,t,s);if(!i){let e,n;return o&&1===o.wordType&&o.start<=s.column-1&&s.column-1<=o.end?(e=o.start+1,n=o.end+1):a&&1===a.wordType&&a.start<=s.column-1&&s.column-1<=a.end?(e=a.start+1,n=a.end+1):(e=o?o.end+1:1,n=a?a.start+1:t.getLineMaxColumn(s.lineNumber)),new pk(new xi(s.lineNumber,e,s.lineNumber,n),1,0,new Ci(s.lineNumber,n),0)}let l,c;o&&1===o.wordType&&o.start<s.column-1&&s.column-1<o.end?(l=o.start+1,c=o.end+1):a&&1===a.wordType&&a.start<s.column-1&&s.column-1<a.end?(l=a.start+1,c=a.end+1):(l=s.column,c=s.column);const u=s.lineNumber;let h;if(n.selectionStart.containsPosition(s))h=n.selectionStart.endColumn;else if(s.isBeforeOrEqual(n.selectionStart.getStartPosition())){h=l;const e=new Ci(u,h);n.selectionStart.containsPosition(e)&&(h=n.selectionStart.endColumn)}else{h=c;const e=new Ci(u,h);n.selectionStart.containsPosition(e)&&(h=n.selectionStart.startColumn)}return n.move(!0,u,h,0)}}class Lk{static addCursorDown(e,t,n){const i=[];let s=0;for(let r=0,o=t.length;r<o;r++){const o=t[r];i[s++]=new dk(o.modelState,o.viewState),i[s++]=n?dk.fromModelState(Ck.translateDown(e.cursorConfig,e.model,o.modelState)):dk.fromViewState(Ck.translateDown(e.cursorConfig,e,o.viewState))}return i}static addCursorUp(e,t,n){const i=[];let s=0;for(let r=0,o=t.length;r<o;r++){const o=t[r];i[s++]=new dk(o.modelState,o.viewState),i[s++]=n?dk.fromModelState(Ck.translateUp(e.cursorConfig,e.model,o.modelState)):dk.fromViewState(Ck.translateUp(e.cursorConfig,e,o.viewState))}return i}static moveToBeginningOfLine(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const r=t[s];i[s]=this._moveToLineStart(e,r,n)}return i}static _moveToLineStart(e,t,n){const i=t.viewState.position.column,s=i===t.modelState.position.column,r=t.viewState.position.lineNumber,o=e.getLineFirstNonWhitespaceColumn(r);return s||i===o?this._moveToLineStartByModel(e,t,n):this._moveToLineStartByView(e,t,n)}static _moveToLineStartByView(e,t,n){return dk.fromViewState(Ck.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return dk.fromModelState(Ck.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,i){const s=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];s[r]=this._moveToLineEnd(e,o,n,i)}return s}static _moveToLineEnd(e,t,n,i){const s=t.viewState.position,r=e.getLineMaxColumn(s.lineNumber),o=s.column===r,a=t.modelState.position,l=e.model.getLineMaxColumn(a.lineNumber),c=r-s.column===l-a.column;return o||c?this._moveToLineEndByModel(e,t,n,i):this._moveToLineEndByView(e,t,n,i)}static _moveToLineEndByView(e,t,n,i){return dk.fromViewState(Ck.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,i))}static _moveToLineEndByModel(e,t,n,i){return dk.fromModelState(Ck.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,i))}static expandLineSelection(e,t){const n=[];for(let i=0,s=t.length;i<s;i++){const s=t[i],r=s.modelState.selection.startLineNumber,o=e.model.getLineCount();let a,l=s.modelState.selection.endLineNumber;l===o?a=e.model.getLineMaxColumn(o):(l++,a=1),n[i]=dk.fromModelState(new pk(new xi(r,1,r,1),0,0,new Ci(l,a),0))}return n}static moveToBeginningOfBuffer(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const r=t[s];i[s]=dk.fromModelState(Ck.moveToBeginningOfBuffer(e.cursorConfig,e.model,r.modelState,n))}return i}static moveToEndOfBuffer(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const r=t[s];i[s]=dk.fromModelState(Ck.moveToEndOfBuffer(e.cursorConfig,e.model,r.modelState,n))}return i}static selectAll(e,t){const n=e.model.getLineCount(),i=e.model.getLineMaxColumn(n);return dk.fromModelState(new pk(new xi(1,1,1,1),0,0,new Ci(n,i),0))}static line(e,t,n,i,s){const r=e.model.validatePosition(i),o=s?e.coordinatesConverter.validateViewPosition(new Ci(s.lineNumber,s.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);if(!n){const t=e.model.getLineCount();let n=r.lineNumber+1,i=1;return n>t&&(n=t,i=e.model.getLineMaxColumn(n)),dk.fromModelState(new pk(new xi(r.lineNumber,1,n,i),2,0,new Ci(n,i),0))}const a=t.modelState.selectionStart.getStartPosition().lineNumber;if(r.lineNumber<a)return dk.fromViewState(t.viewState.move(!0,o.lineNumber,1,0));if(r.lineNumber>a){const n=e.getLineCount();let i=o.lineNumber+1,s=1;return i>n&&(i=n,s=e.getLineMaxColumn(i)),dk.fromViewState(t.viewState.move(!0,i,s,0))}{const e=t.modelState.selectionStart.getEndPosition();return dk.fromModelState(t.modelState.move(!0,e.lineNumber,e.column,0))}}static word(e,t,n,i){const s=e.model.validatePosition(i);return dk.fromModelState(Ek.word(e.cursorConfig,e.model,t.modelState,n,s))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new dk(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,i=t.viewState.position.column;return dk.fromViewState(new pk(new xi(n,i,n,i),0,0,new Ci(n,i),0))}static moveTo(e,t,n,i,s){if(n){if(1===t.modelState.selectionStartKind)return this.word(e,t,n,i);if(2===t.modelState.selectionStartKind)return this.line(e,t,n,i,s)}const r=e.model.validatePosition(i),o=s?e.coordinatesConverter.validateViewPosition(new Ci(s.lineNumber,s.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);return dk.fromViewState(t.viewState.move(n,o.lineNumber,o.column,0))}static simpleMove(e,t,n,i,s,r){switch(n){case 0:return 4===r?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,s);case 1:return 4===r?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,s);case 2:return 2===r?this._moveUpByViewLines(e,t,i,s):this._moveUpByModelLines(e,t,i,s);case 3:return 2===r?this._moveDownByViewLines(e,t,i,s):this._moveDownByModelLines(e,t,i,s);case 4:return 2===r?t.map((t=>dk.fromViewState(Ck.moveToPrevBlankLine(e.cursorConfig,e,t.viewState,i)))):t.map((t=>dk.fromModelState(Ck.moveToPrevBlankLine(e.cursorConfig,e.model,t.modelState,i))));case 5:return 2===r?t.map((t=>dk.fromViewState(Ck.moveToNextBlankLine(e.cursorConfig,e,t.viewState,i)))):t.map((t=>dk.fromModelState(Ck.moveToNextBlankLine(e.cursorConfig,e.model,t.modelState,i))));case 6:return this._moveToViewMinColumn(e,t,i);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case 8:return this._moveToViewCenterColumn(e,t,i);case 9:return this._moveToViewMaxColumn(e,t,i);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,i);default:return null}}static viewportMove(e,t,n,i,s){const r=e.getCompletelyVisibleViewRange(),o=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(n){case 11:{const n=this._firstLineNumberInRange(e.model,o,s),r=e.model.getLineFirstNonWhitespaceColumn(n);return[this._moveToModelPosition(e,t[0],i,n,r)]}case 13:{const n=this._lastLineNumberInRange(e.model,o,s),r=e.model.getLineFirstNonWhitespaceColumn(n);return[this._moveToModelPosition(e,t[0],i,n,r)]}case 12:{const n=Math.round((o.startLineNumber+o.endLineNumber)/2),s=e.model.getLineFirstNonWhitespaceColumn(n);return[this._moveToModelPosition(e,t[0],i,n,s)]}case 14:{const n=[];for(let s=0,o=t.length;s<o;s++){const o=t[s];n[s]=this.findPositionInViewportIfOutside(e,o,r,i)}return n}default:return null}}static findPositionInViewportIfOutside(e,t,n,i){const s=t.viewState.position.lineNumber;if(n.startLineNumber<=s&&s<=n.endLineNumber-1)return new dk(t.modelState,t.viewState);{let r;r=s>n.endLineNumber-1?n.endLineNumber-1:s<n.startLineNumber?n.startLineNumber:s;const o=Ck.vertical(e.cursorConfig,e,s,t.viewState.position.column,t.viewState.leftoverVisibleColumns,r,!1);return dk.fromViewState(t.viewState.move(i,o.lineNumber,o.column,o.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+n-1)}static _lastLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-n+1)}static _moveLeft(e,t,n,i){return t.map((t=>dk.fromViewState(Ck.moveLeft(e.cursorConfig,e,t.viewState,n,i))))}static _moveHalfLineLeft(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.viewState.position.lineNumber,a=Math.round(e.getLineLength(o)/2);i[s]=dk.fromViewState(Ck.moveLeft(e.cursorConfig,e,r.viewState,n,a))}return i}static _moveRight(e,t,n,i){return t.map((t=>dk.fromViewState(Ck.moveRight(e.cursorConfig,e,t.viewState,n,i))))}static _moveHalfLineRight(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.viewState.position.lineNumber,a=Math.round(e.getLineLength(o)/2);i[s]=dk.fromViewState(Ck.moveRight(e.cursorConfig,e,r.viewState,n,a))}return i}static _moveDownByViewLines(e,t,n,i){const s=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];s[r]=dk.fromViewState(Ck.moveDown(e.cursorConfig,e,o.viewState,n,i))}return s}static _moveDownByModelLines(e,t,n,i){const s=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];s[r]=dk.fromModelState(Ck.moveDown(e.cursorConfig,e.model,o.modelState,n,i))}return s}static _moveUpByViewLines(e,t,n,i){const s=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];s[r]=dk.fromViewState(Ck.moveUp(e.cursorConfig,e,o.viewState,n,i))}return s}static _moveUpByModelLines(e,t,n,i){const s=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];s[r]=dk.fromModelState(Ck.moveUp(e.cursorConfig,e.model,o.modelState,n,i))}return s}static _moveToViewPosition(e,t,n,i,s){return dk.fromViewState(t.viewState.move(n,i,s,0))}static _moveToModelPosition(e,t,n,i,s){return dk.fromModelState(t.modelState.move(n,i,s,0))}static _moveToViewMinColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.viewState.position.lineNumber,a=e.getLineMinColumn(o);i[s]=this._moveToViewPosition(e,r,n,o,a)}return i}static _moveToViewFirstNonWhitespaceColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.viewState.position.lineNumber,a=e.getLineFirstNonWhitespaceColumn(o);i[s]=this._moveToViewPosition(e,r,n,o,a)}return i}static _moveToViewCenterColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.viewState.position.lineNumber,a=Math.round((e.getLineMaxColumn(o)+e.getLineMinColumn(o))/2);i[s]=this._moveToViewPosition(e,r,n,o,a)}return i}static _moveToViewMaxColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.viewState.position.lineNumber,a=e.getLineMaxColumn(o);i[s]=this._moveToViewPosition(e,r,n,o,a)}return i}static _moveToViewLastNonWhitespaceColumn(e,t,n){const i=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=r.viewState.position.lineNumber,a=e.getLineLastNonWhitespaceColumn(o);i[s]=this._moveToViewPosition(e,r,n,o,a)}return i}}var Dk;function Ak(e,t,n,i){const s=Xd(t,n.startLineNumber,n.startColumn),r=i.getLanguageConfiguration(s.languageId);if(!r)return null;const o=s.getLineContent(),a=o.substr(0,n.startColumn-1-s.firstCharOffset);let l;if(n.isEmpty())l=o.substr(n.startColumn-1-s.firstCharOffset);else{l=Xd(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-s.firstCharOffset)}let c="";if(n.startLineNumber>1&&0===s.firstCharOffset){const e=Xd(t,n.startLineNumber-1);e.languageId===s.languageId&&(c=e.getLineContent())}const u=r.onEnter(e,c,a,l);if(!u)return null;const h=u.indentAction;let d=u.appendText;const f=u.removeText||0;d?h===kh.Indent&&(d="\t"+d):d=h===kh.Indent||h===kh.IndentOutdent?"\t":"";let g=Qd(t,n.startLineNumber,n.startColumn);return f&&(g=g.substring(0,g.length-f)),{indentAction:h,appendText:d,removeText:f,indentation:g}}!function(e){e.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory logical position value providing where to move the cursor.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',\n\t\t\t\t\t\t'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'\n\t\t\t\t\t\t'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'\n\t\t\t\t\t\t'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'character', 'halfLine'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'select': If 'true' makes the selection. Default is 'false'.\n\t\t\t\t",constraint:function(e){if(!D(e))return!1;const t=e;return!!L(t.to)&&(!(!$(t.select)&&!I(t.select))&&(!(!$(t.by)&&!L(t.by))&&!(!$(t.value)&&!T(t.value))))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},e.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"},e.parse=function(t){if(!t.to)return null;let n;switch(t.to){case e.RawDirection.Left:n=0;break;case e.RawDirection.Right:n=1;break;case e.RawDirection.Up:n=2;break;case e.RawDirection.Down:n=3;break;case e.RawDirection.PrevBlankLine:n=4;break;case e.RawDirection.NextBlankLine:n=5;break;case e.RawDirection.WrappedLineStart:n=6;break;case e.RawDirection.WrappedLineFirstNonWhitespaceCharacter:n=7;break;case e.RawDirection.WrappedLineColumnCenter:n=8;break;case e.RawDirection.WrappedLineEnd:n=9;break;case e.RawDirection.WrappedLineLastNonWhitespaceCharacter:n=10;break;case e.RawDirection.ViewPortTop:n=11;break;case e.RawDirection.ViewPortBottom:n=13;break;case e.RawDirection.ViewPortCenter:n=12;break;case e.RawDirection.ViewPortIfOutside:n=14;break;default:return null}let i=0;switch(t.by){case e.RawUnit.Line:i=1;break;case e.RawUnit.WrappedLine:i=2;break;case e.RawUnit.Character:i=3;break;case e.RawUnit.HalfLine:i=4}return{direction:n,unit:i,select:!!t.select,value:t.value||1}}}(Dk||(Dk={}));var Tk,Nk=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},Ik=function(e,t){return function(n,i){t(n,i,e)}};const $k=Object.create(null);function Mk(e,t){if(t<=0)return"";$k[e]||($k[e]=["",e]);const n=$k[e];for(let i=n.length;i<=t;i++)n[i]=n[i-1]+e;return n[t]}let Rk=Tk=class{static unshiftIndent(e,t,n,i,s){const r=Uy.visibleColumnFromColumn(e,t,n);if(s){const e=Mk(" ",i);return Mk(e,Uy.prevIndentTabStop(r,i)/i)}return Mk("\t",Uy.prevRenderTabStop(r,n)/n)}static shiftIndent(e,t,n,i,s){const r=Uy.visibleColumnFromColumn(e,t,n);if(s){const e=Mk(" ",i);return Mk(e,Uy.nextIndentTabStop(r,i)/i)}return Mk("\t",Uy.nextRenderTabStop(r,n)/n)}constructor(e,t,n){this._languageConfigurationService=n,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let i=this._selection.endLineNumber;1===this._selection.endColumn&&n!==i&&(i-=1);const{tabSize:s,indentSize:r,insertSpaces:o}=this._opts,a=n===i;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let l=0,c=0;for(let u=n;u<=i;u++,l=c){c=0;const i=e.getLineContent(u);let h,d=Ks(i);if((!this._opts.isUnshift||0!==i.length&&0!==d)&&(a||this._opts.isUnshift||0!==i.length)){if(-1===d&&(d=i.length),u>1){if(Uy.visibleColumnFromColumn(i,d+1,s)%r!==0&&e.tokenization.isCheapToTokenize(u-1)){const t=Ak(this._opts.autoIndent,e,new xi(u-1,e.getLineMaxColumn(u-1),u-1,e.getLineMaxColumn(u-1)),this._languageConfigurationService);if(t){if(c=l,t.appendText)for(let e=0,n=t.appendText.length;e<n&&c<r&&32===t.appendText.charCodeAt(e);e++)c++;t.removeText&&(c=Math.max(0,c-t.removeText));for(let e=0;e<c&&(0!==d&&32===i.charCodeAt(d-1));e++)d--}}}this._opts.isUnshift&&0===d||(h=this._opts.isUnshift?Tk.unshiftIndent(i,d+1,s,r,o):Tk.shiftIndent(i,d+1,s,r,o),this._addEditOperation(t,new xi(u,1,u,d+1),h),u!==n||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=this._selection.startColumn<=d+1))}}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&0===e.getLineLength(n)&&(this._useLastEditRangeForCursorEndPosition=!0);const s=o?Mk(" ",r):"\t";for(let o=n;o<=i;o++){const i=e.getLineContent(o);let l=Ks(i);if((!this._opts.isUnshift||0!==i.length&&0!==l)&&((a||this._opts.isUnshift||0!==i.length)&&(-1===l&&(l=i.length),!this._opts.isUnshift||0!==l)))if(this._opts.isUnshift){l=Math.min(l,r);for(let e=0;e<l;e++){if(9===i.charCodeAt(e)){l=e+1;break}}this._addEditOperation(t,new xi(o,1,o,l+1),"")}else this._addEditOperation(t,new xi(o,1,o,1),s),o!==n||this._selection.isEmpty()||(this._selectionStartColumnStaysPut=1===this._selection.startColumn)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const e=t.getInverseEditOperations()[0];return new Ei(e.range.endLineNumber,e.range.endColumn,e.range.endLineNumber,e.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const e=this._selection.startColumn;return n.startColumn<=e?n:0===n.getDirection()?new Ei(n.startLineNumber,e,n.endLineNumber,n.endColumn):new Ei(n.endLineNumber,n.endColumn,n.startLineNumber,e)}return n}};Rk=Tk=Nk([Ik(2,qd)],Rk);class Ok{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new xi(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new xi(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const n=t.getInverseEditOperations(),i=n[0].range,s=n[1].range;return new Ei(i.endLineNumber,i.endColumn,s.endLineNumber,s.endColumn-this._charAfterSelection.length)}}class Pk{constructor(e,t,n){this._position=e,this._text=t,this._charAfter=n}getEditOperations(e,t){t.addTrackedEditOperation(new xi(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return new Ei(n.endLineNumber,n.startColumn,n.endLineNumber,n.endColumn-this._charAfter.length)}}function Fk(e,t,n){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e<4)return null;const s=(arguments.length>4?arguments[4]:void 0).getLanguageConfiguration(t.tokenization.getLanguageId()).indentRulesSupport;if(!s)return null;if(n<=1)return{indentation:"",action:null};for(let a=n-1;a>0&&""===t.getLineContent(a);a--)if(1===a)return{indentation:"",action:null};const r=function(e,t,n){const i=e.tokenization.getLanguageIdAtPosition(t,0);if(t>1){let s,r=-1;for(s=t-1;s>=1;s--){if(e.tokenization.getLanguageIdAtPosition(s,0)!==i)return r;const t=e.getLineContent(s);if(!n.shouldIgnore(t)&&!/^\s+$/.test(t)&&""!==t)return s;r=s}}return-1}(t,n,s);if(r<0)return null;if(r<1)return{indentation:"",action:null};const o=t.getLineContent(r);if(s.shouldIncrease(o)||s.shouldIndentNextLine(o))return{indentation:Gs(o),action:kh.Indent,line:r};if(s.shouldDecrease(o))return{indentation:Gs(o),action:null,line:r};{if(1===r)return{indentation:Gs(t.getLineContent(r)),action:null,line:r};const e=r-1,n=s.getIndentMetadata(t.getLineContent(e));if(!(3&n)&&4&n){let n=0;for(let i=e-1;i>0;i--)if(!s.shouldIndentNextLine(t.getLineContent(i))){n=i;break}return{indentation:Gs(t.getLineContent(n+1)),action:null,line:n+1}}if(i)return{indentation:Gs(t.getLineContent(r)),action:null,line:r};for(let i=r;i>0;i--){const e=t.getLineContent(i);if(s.shouldIncrease(e))return{indentation:Gs(e),action:kh.Indent,line:i};if(s.shouldIndentNextLine(e)){let e=0;for(let n=i-1;n>0;n--)if(!s.shouldIndentNextLine(t.getLineContent(i))){e=n;break}return{indentation:Gs(t.getLineContent(e+1)),action:null,line:e+1}}if(s.shouldDecrease(e))return{indentation:Gs(e),action:null,line:i}}return{indentation:Gs(t.getLineContent(1)),action:null,line:1}}}class Bk{static indent(e,t,n){if(null===t||null===n)return[];const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=new Rk(n[s],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static outdent(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=new Rk(n[s],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static shiftIndent(e,t,n){return n=n||1,Rk.shiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static unshiftIndent(e,t,n){return n=n||1,Rk.unshiftIndent(t,t.length+n,e.tabSize,e.indentSize,e.insertSpaces)}static _distributedPaste(e,t,n,i){const s=[];for(let r=0,o=n.length;r<o;r++)s[r]=new vk(n[r],i[r]);return new mk(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,i,s){const r=[];for(let o=0,a=n.length;o<a;o++){const e=n[o],t=e.getPosition();if(s&&!e.isEmpty()&&(s=!1),s&&i.indexOf("\n")!==i.length-1&&(s=!1),s){const n=new xi(t.lineNumber,1,t.lineNumber,1);r[o]=new wk(n,i,e,!0)}else r[o]=new vk(e,i)}return new mk(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _distributePasteToCursors(e,t,n,i,s){if(i)return null;if(1===t.length)return null;if(s&&s.length===t.length)return s;if("spread"===e.multiCursorPaste){10===n.charCodeAt(n.length-1)&&(n=n.substr(0,n.length-1)),13===n.charCodeAt(n.length-1)&&(n=n.substr(0,n.length-1));const e=qs(n);if(e.length===t.length)return e}return null}static paste(e,t,n,i,s,r){const o=this._distributePasteToCursors(e,n,i,s,r);return o?(n=n.sort(xi.compareRangesUsingStarts),this._distributedPaste(e,t,n,o)):this._simplePaste(e,t,n,i,s)}static _goodIndentForLine(e,t,n){let i=null,s="";const r=Fk(e.autoIndent,t,n,!1,e.languageConfigurationService);if(r)i=r.action,s=r.indentation;else if(n>1){let i;for(i=n-1;i>=1;i--){if(Ys(t.getLineContent(i))>=0)break}if(i<1)return null;const r=t.getLineMaxColumn(i),o=Ak(e.autoIndent,t,new xi(i,r,i,r),e.languageConfigurationService);o&&(s=o.indentation+o.appendText)}return i&&(i===kh.Indent&&(s=Bk.shiftIndent(e,s)),i===kh.Outdent&&(s=Bk.unshiftIndent(e,s)),s=e.normalizeIndentation(s)),s||null}static _replaceJumpToNextIndent(e,t,n,i){let s="";const r=n.getStartPosition();if(e.insertSpaces){const n=e.visibleColumnFromColumn(t,r),i=e.indentSize,o=i-n%i;for(let e=0;e<o;e++)s+=" "}else s="\t";return new vk(n,s,i)}static tab(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++){const r=n[s];if(r.isEmpty()){const n=t.getLineContent(r.startLineNumber);if(/^\s*$/.test(n)&&t.tokenization.isCheapToTokenize(r.startLineNumber)){let o=this._goodIndentForLine(e,t,r.startLineNumber);o=o||"\t";const a=e.normalizeIndentation(o);if(!n.startsWith(a)){i[s]=new vk(new xi(r.startLineNumber,1,r.startLineNumber,n.length+1),a,!0);continue}}i[s]=this._replaceJumpToNextIndent(e,t,r,!0)}else{if(r.startLineNumber===r.endLineNumber){const n=t.getLineMaxColumn(r.startLineNumber);if(1!==r.startColumn||r.endColumn!==n){i[s]=this._replaceJumpToNextIndent(e,t,r,!1);continue}}i[s]=new Rk(r,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return i}static compositionType(e,t,n,i,s,r,o,a){const l=i.map((e=>this._compositionType(n,e,s,r,o,a)));return new mk(4,l,{shouldPushStackElementBefore:Vk(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,i,s,r){if(!t.isEmpty())return null;const o=t.getPosition(),a=Math.max(1,o.column-i),l=Math.min(e.getLineMaxColumn(o.lineNumber),o.column+s),c=new xi(o.lineNumber,a,o.lineNumber,l);return e.getValueInRange(c)===n&&0===r?null:new Sk(c,n,0,r)}static _typeCommand(e,t,n){return n?new yk(e,t,!0):new vk(e,t,!0)}static _enter(e,t,n,i){if(0===e.autoIndent)return Bk._typeCommand(i,"\n",n);if(!t.tokenization.isCheapToTokenize(i.getStartPosition().lineNumber)||1===e.autoIndent){const s=Gs(t.getLineContent(i.startLineNumber)).substring(0,i.startColumn-1);return Bk._typeCommand(i,"\n"+e.normalizeIndentation(s),n)}const s=Ak(e.autoIndent,t,i,e.languageConfigurationService);if(s){if(s.indentAction===kh.None)return Bk._typeCommand(i,"\n"+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===kh.Indent)return Bk._typeCommand(i,"\n"+e.normalizeIndentation(s.indentation+s.appendText),n);if(s.indentAction===kh.IndentOutdent){const t=e.normalizeIndentation(s.indentation),r=e.normalizeIndentation(s.indentation+s.appendText),o="\n"+r+"\n"+t;return n?new yk(i,o,!0):new Sk(i,o,-1,r.length-t.length,!0)}if(s.indentAction===kh.Outdent){const t=Bk.unshiftIndent(e,s.indentation);return Bk._typeCommand(i,"\n"+e.normalizeIndentation(t+s.appendText),n)}}const r=Gs(t.getLineContent(i.startLineNumber)).substring(0,i.startColumn-1);if(e.autoIndent>=4){const s=function(e,t,n,i,s){if(e<4)return null;t.tokenization.forceTokenization(n.startLineNumber);const r=t.tokenization.getLineTokens(n.startLineNumber),o=Lh(r,n.startColumn-1),a=o.getLineContent();let l,c,u=!1;o.firstCharOffset>0&&r.getLanguageId(0)!==o.languageId?(u=!0,l=a.substr(0,n.startColumn-1-o.firstCharOffset)):l=r.getLineContent().substring(0,n.startColumn-1),c=n.isEmpty()?a.substr(n.startColumn-1-o.firstCharOffset):Xd(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-o.firstCharOffset);const h=s.getLanguageConfiguration(o.languageId).indentRulesSupport;if(!h)return null;const d=l,f=Gs(l),g={tokenization:{getLineTokens:e=>t.tokenization.getLineTokens(e),getLanguageId:()=>t.getLanguageId(),getLanguageIdAtPosition:(e,n)=>t.getLanguageIdAtPosition(e,n)},getLineContent:e=>e===n.startLineNumber?d:t.getLineContent(e)},p=Gs(r.getLineContent()),m=Fk(e,g,n.startLineNumber+1,void 0,s);if(!m){const e=u?p:f;return{beforeEnter:e,afterEnter:e}}let b=u?p:m.indentation;return m.action===kh.Indent&&(b=i.shiftIndent(b)),h.shouldDecrease(c)&&(b=i.unshiftIndent(b)),{beforeEnter:u?p:f,afterEnter:b}}(e.autoIndent,t,i,{unshiftIndent:t=>Bk.unshiftIndent(e,t),shiftIndent:t=>Bk.shiftIndent(e,t),normalizeIndentation:t=>e.normalizeIndentation(t)},e.languageConfigurationService);if(s){let r=e.visibleColumnFromColumn(t,i.getEndPosition());const o=i.endColumn,a=Ks(t.getLineContent(i.endLineNumber));if(i=a>=0?i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,a+1)):i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),n)return new yk(i,"\n"+e.normalizeIndentation(s.afterEnter),!0);{let t=0;return o<=a+1&&(e.insertSpaces||(r=Math.ceil(r/e.indentSize)),t=Math.min(r+1-e.normalizeIndentation(s.afterEnter).length-1,0)),new Sk(i,"\n"+e.normalizeIndentation(s.afterEnter),0,t,!0)}}}return Bk._typeCommand(i,"\n"+e.normalizeIndentation(r),n)}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let i=0,s=n.length;i<s;i++)if(!t.tokenization.isCheapToTokenize(n[i].getEndPosition().lineNumber))return!1;return!0}static _runAutoIndentType(e,t,n,i){const s=Qd(t,n.startLineNumber,n.startColumn),r=function(e,t,n,i,s,r){if(e<4)return null;const o=Xd(t,n.startLineNumber,n.startColumn);if(o.firstCharOffset)return null;const a=r.getLanguageConfiguration(o.languageId).indentRulesSupport;if(!a)return null;const l=o.getLineContent(),c=l.substr(0,n.startColumn-1-o.firstCharOffset);let u;u=n.isEmpty()?l.substr(n.startColumn-1-o.firstCharOffset):Xd(t,n.endLineNumber,n.endColumn).getLineContent().substr(n.endColumn-1-o.firstCharOffset);if(!a.shouldDecrease(c+u)&&a.shouldDecrease(c+i+u)){const i=Fk(e,t,n.startLineNumber,!1,r);if(!i)return null;let o=i.indentation;return i.action!==kh.Indent&&(o=s.unshiftIndent(o)),o}return null}(e.autoIndent,t,n,i,{shiftIndent:t=>Bk.shiftIndent(e,t),unshiftIndent:t=>Bk.unshiftIndent(e,t)},e.languageConfigurationService);if(null===r)return null;if(r!==e.normalizeIndentation(s)){const s=t.getLineFirstNonWhitespaceColumn(n.startLineNumber);return 0===s?Bk._typeCommand(new xi(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(r)+i,!1):Bk._typeCommand(new xi(n.startLineNumber,1,n.endLineNumber,n.endColumn),e.normalizeIndentation(r)+t.getLineContent(n.startLineNumber).substring(s-1,n.startColumn-1)+i,!1)}return null}static _isAutoClosingOvertype(e,t,n,i,s){if("never"===e.autoClosingOvertype)return!1;if(!e.autoClosingPairs.autoClosingPairsCloseSingleChar.has(s))return!1;for(let r=0,o=n.length;r<o;r++){const o=n[r];if(!o.isEmpty())return!1;const a=o.getPosition(),l=t.getLineContent(a.lineNumber);if(l.charAt(a.column-1)!==s)return!1;const c=bk(s);if(92===(a.column>2?l.charCodeAt(a.column-2):0)&&c)return!1;if("auto"===e.autoClosingOvertype){let e=!1;for(let t=0,n=i.length;t<n;t++){const n=i[t];if(a.lineNumber===n.startLineNumber&&a.column===n.startColumn){e=!0;break}}if(!e)return!1}}return!0}static _runAutoClosingOvertype(e,t,n,i,s){const r=[];for(let o=0,a=i.length;o<a;o++){const e=i[o].getPosition(),t=new xi(e.lineNumber,e.column,e.lineNumber,e.column+1);r[o]=new vk(t,s)}return new mk(4,r,{shouldPushStackElementBefore:Vk(e,4),shouldPushStackElementAfter:!1})}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),i=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],s=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],r=i.some((e=>t.startsWith(e.open))),o=s.some((e=>t.startsWith(e.close)));return!r&&o}static _findAutoClosingPairOpen(e,t,n,i){const s=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i);if(!s)return null;let r=null;for(const o of s)if(null===r||o.open.length>r.open.length){let e=!0;for(const s of n){if(t.getValueInRange(new xi(s.lineNumber,s.column-o.open.length+1,s.lineNumber,s.column))+i!==o.open){e=!1;break}}e&&(r=o)}return r}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),i=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let s=null;for(const r of i)r.open!==t.open&&t.open.includes(r.open)&&t.close.endsWith(r.close)&&(!s||r.open.length>s.open.length)&&(s=r);return s}static _getAutoClosingPairClose(e,t,n,i,s){for(const d of n)if(!d.isEmpty())return null;const r=n.map((e=>{const t=e.getPosition();return s?{lineNumber:t.lineNumber,beforeColumn:t.column-i.length,afterColumn:t.column}:{lineNumber:t.lineNumber,beforeColumn:t.column,afterColumn:t.column}})),o=this._findAutoClosingPairOpen(e,t,r.map((e=>new Ci(e.lineNumber,e.beforeColumn))),i);if(!o)return null;let a,l;if(bk(i))a=e.autoClosingQuotes,l=e.shouldAutoCloseBefore.quote;else{!!e.blockCommentStartToken&&o.open.includes(e.blockCommentStartToken)?(a=e.autoClosingComments,l=e.shouldAutoCloseBefore.comment):(a=e.autoClosingBrackets,l=e.shouldAutoCloseBefore.bracket)}if("never"===a)return null;const c=this._findContainedAutoClosingPair(e,o),u=c?c.close:"";let h=!0;for(const d of r){const{lineNumber:n,beforeColumn:s,afterColumn:r}=d,c=t.getLineContent(n),f=c.substring(0,s-1),g=c.substring(r-1);if(g.startsWith(u)||(h=!1),g.length>0){const t=g.charAt(0);if(!Bk._isBeforeClosingBrace(e,g)&&!l(t))return null}if(1===o.open.length&&("'"===i||'"'===i)&&"always"!==a){const t=Ef(e.wordSeparators);if(f.length>0){const e=f.charCodeAt(f.length-1);if(0===t.get(e))return null}}if(!t.tokenization.isCheapToTokenize(n))return null;t.tokenization.forceTokenization(n);const p=Lh(t.tokenization.getLineTokens(n),s-1);if(!o.shouldAutoClose(p,s-p.firstCharOffset))return null;const m=o.findNeutralCharacter();if(m){const e=t.tokenization.getTokenTypeIfInsertingCharacter(n,s,m);if(!o.isOK(e))return null}}return h?o.close.substring(0,o.close.length-u.length):o.close}static _runAutoClosingOpenCharType(e,t,n,i,s,r,o){const a=[];for(let l=0,c=i.length;l<c;l++){const e=i[l];a[l]=new zk(e,s,!r,o)}return new mk(4,a,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static _shouldSurroundChar(e,t){return bk(t)?"quotes"===e.autoSurround||"languageDefined"===e.autoSurround:"brackets"===e.autoSurround||"languageDefined"===e.autoSurround}static _isSurroundSelectionType(e,t,n,i){if(!Bk._shouldSurroundChar(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;const s=bk(i);for(const r of n){if(r.isEmpty())return!1;let e=!0;for(let n=r.startLineNumber;n<=r.endLineNumber;n++){const i=t.getLineContent(n),s=n===r.startLineNumber?r.startColumn-1:0,o=n===r.endLineNumber?r.endColumn-1:i.length,a=i.substring(s,o);if(/[^ \t]/.test(a)){e=!1;break}}if(e)return!1;if(s&&r.startLineNumber===r.endLineNumber&&r.startColumn+1===r.endColumn){if(bk(t.getValueInRange(r)))return!1}}return!0}static _runSurroundSelectionType(e,t,n,i,s){const r=[];for(let o=0,a=i.length;o<a;o++){const e=i[o],n=t.surroundingPairs[s];r[o]=new Ok(e,s,n)}return new mk(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isTypeInterceptorElectricChar(e,t,n){return!(1!==n.length||!t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,i,s){if(!t.electricChars.hasOwnProperty(s)||!i.isEmpty())return null;const r=i.getPosition();n.tokenization.forceTokenization(r.lineNumber);const o=n.tokenization.getLineTokens(r.lineNumber);let a;try{a=t.onElectricCharacter(s,o,r.column)}catch(zY){return Nt(zY),null}if(!a)return null;if(a.matchOpenBracket){const i=(o.getLineContent()+s).lastIndexOf(a.matchOpenBracket)+1,l=n.bracketPairs.findMatchingBracketUp(a.matchOpenBracket,{lineNumber:r.lineNumber,column:i},500);if(l){if(l.startLineNumber===r.lineNumber)return null;const i=Gs(n.getLineContent(l.startLineNumber)),o=t.normalizeIndentation(i),a=n.getLineContent(r.lineNumber),c=n.getLineFirstNonWhitespaceColumn(r.lineNumber)||r.column,u=o+a.substring(c-1,r.column-1)+s,h=new xi(r.lineNumber,1,r.lineNumber,r.column),d=new vk(h,u);return new mk(Hk(u,e),[d],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}static compositionEndWithInterceptors(e,t,n,i,s,r){if(!i)return null;let o=null;for(const u of i)if(null===o)o=u.insertedText;else if(o!==u.insertedText)return null;if(!o||1!==o.length)return null;const a=o;let l=!1;for(const u of i)if(0!==u.deletedText.length){l=!0;break}if(l){if(!Bk._shouldSurroundChar(t,a)||!t.surroundingPairs.hasOwnProperty(a))return null;const e=bk(a);for(const t of i){if(0!==t.deletedSelectionStart||t.deletedSelectionEnd!==t.deletedText.length)return null;if(/^[ \t]+$/.test(t.deletedText))return null;if(e&&bk(t.deletedText))return null}const n=[];for(const t of s){if(!t.isEmpty())return null;n.push(t.getPosition())}if(n.length!==i.length)return null;const r=[];for(let s=0,o=n.length;s<o;s++)r.push(new Pk(n[s],i[s].deletedText,t.surroundingPairs[a]));return new mk(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(t,n,s,r,a)){const e=s.map((e=>new vk(new xi(e.positionLineNumber,e.positionColumn,e.positionLineNumber,e.positionColumn+1),"",!1)));return new mk(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const c=this._getAutoClosingPairClose(t,n,s,a,!0);return null!==c?this._runAutoClosingOpenCharType(e,t,n,s,a,!0,c):null}static typeWithInterceptors(e,t,n,i,s,r,o){if(!e&&"\n"===o){const e=[];for(let t=0,r=s.length;t<r;t++)e[t]=Bk._enter(n,i,!1,s[t]);return new mk(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(!e&&this._isAutoIndentType(n,i,s)){const e=[];let t=!1;for(let r=0,a=s.length;r<a;r++)if(e[r]=this._runAutoIndentType(n,i,s[r],o),!e[r]){t=!0;break}if(!t)return new mk(4,e,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}if(this._isAutoClosingOvertype(n,i,s,r,o))return this._runAutoClosingOvertype(t,n,i,s,o);if(!e){const e=this._getAutoClosingPairClose(n,i,s,o,!1);if(e)return this._runAutoClosingOpenCharType(t,n,i,s,o,!1,e)}if(!e&&this._isSurroundSelectionType(n,i,s,o))return this._runSurroundSelectionType(t,n,i,s,o);if(!e&&this._isTypeInterceptorElectricChar(n,i,s)){const e=this._typeInterceptorElectricChar(t,n,i,s[0],o);if(e)return e}const a=[];for(let c=0,u=s.length;c<u;c++)a[c]=new vk(s[c],o);const l=Hk(o,t);return new mk(l,a,{shouldPushStackElementBefore:Vk(t,l),shouldPushStackElementAfter:!1})}static typeWithoutInterceptors(e,t,n,i,s){const r=[];for(let a=0,l=i.length;a<l;a++)r[a]=new vk(i[a],s);const o=Hk(s,e);return new mk(o,r,{shouldPushStackElementBefore:Vk(e,o),shouldPushStackElementAfter:!1})}static lineInsertBefore(e,t,n){if(null===t||null===n)return[];const i=[];for(let s=0,r=n.length;s<r;s++){let r=n[s].positionLineNumber;if(1===r)i[s]=new yk(new xi(1,1,1,1),"\n");else{r--;const n=t.getLineMaxColumn(r);i[s]=this._enter(e,t,!1,new xi(r,n,r,n))}}return i}static lineInsertAfter(e,t,n){if(null===t||null===n)return[];const i=[];for(let s=0,r=n.length;s<r;s++){const r=n[s].positionLineNumber,o=t.getLineMaxColumn(r);i[s]=this._enter(e,t,!1,new xi(r,o,r,o))}return i}static lineBreakInsert(e,t,n){const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=this._enter(e,t,!0,n[s]);return i}}class zk extends Sk{constructor(e,t,n,i){super(e,(n?t:"")+i,0,-i.length),this._openCharacter=t,this._closeCharacter=i,this.closeCharacterRange=null,this.enclosingRange=null}computeCursorState(e,t){const n=t.getInverseEditOperations()[0].range;return this.closeCharacterRange=new xi(n.startLineNumber,n.endColumn-this._closeCharacter.length,n.endLineNumber,n.endColumn),this.enclosingRange=new xi(n.startLineNumber,n.endColumn-this._openCharacter.length-this._closeCharacter.length,n.endLineNumber,n.endColumn),super.computeCursorState(e,t)}}class Wk{constructor(e,t,n,i,s,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=n,this.insertedText=i,this.insertedSelectionStart=s,this.insertedSelectionEnd=r}}function Hk(e,t){return" "===e?5===t||6===t?6:5:4}function Vk(e,t){return!(!Uk(e)||Uk(t))||5!==e&&jk(e)!==jk(t)}function jk(e){return 6===e||5===e?"space":e}function Uk(e){return 4===e||5===e||6===e}var qk;!function(e){e.editorSimpleInput=new na("editorSimpleInput",!1,!0),e.editorTextFocus=new na("editorTextFocus",!1,G("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),e.focus=new na("editorFocus",!1,G("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),e.textInputFocus=new na("textInputFocus",!1,G("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),e.readOnly=new na("editorReadonly",!1,G("editorReadonly","Whether the editor is read-only")),e.inDiffEditor=new na("inDiffEditor",!1,G("inDiffEditor","Whether the context is a diff editor")),e.isEmbeddedDiffEditor=new na("isEmbeddedDiffEditor",!1,G("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),e.inMultiDiffEditor=new na("inMultiDiffEditor",!1,G("inMultiDiffEditor","Whether the context is a multi diff editor")),e.multiDiffEditorAllCollapsed=new na("multiDiffEditorAllCollapsed",void 0,G("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),e.hasChanges=new na("diffEditorHasChanges",!1,G("diffEditorHasChanges","Whether the diff editor has changes")),e.comparingMovedCode=new na("comparingMovedCode",!1,G("comparingMovedCode","Whether a moved code block is selected for comparison")),e.accessibleDiffViewerVisible=new na("accessibleDiffViewerVisible",!1,G("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),e.diffEditorRenderSideBySideInlineBreakpointReached=new na("diffEditorRenderSideBySideInlineBreakpointReached",!1,G("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),e.columnSelection=new na("editorColumnSelection",!1,G("editorColumnSelection","Whether `editor.columnSelection` is enabled")),e.writable=e.readOnly.toNegated(),e.hasNonEmptySelection=new na("editorHasSelection",!1,G("editorHasSelection","Whether the editor has text selected")),e.hasOnlyEmptySelection=e.hasNonEmptySelection.toNegated(),e.hasMultipleSelections=new na("editorHasMultipleSelections",!1,G("editorHasMultipleSelections","Whether the editor has multiple selections")),e.hasSingleSelection=e.hasMultipleSelections.toNegated(),e.tabMovesFocus=new na("editorTabMovesFocus",!1,G("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),e.tabDoesNotMoveFocus=e.tabMovesFocus.toNegated(),e.isInWalkThroughSnippet=new na("isInEmbeddedEditor",!1,!0),e.canUndo=new na("canUndo",!1,!0),e.canRedo=new na("canRedo",!1,!0),e.hoverVisible=new na("editorHoverVisible",!1,G("editorHoverVisible","Whether the editor hover is visible")),e.hoverFocused=new na("editorHoverFocused",!1,G("editorHoverFocused","Whether the editor hover is focused")),e.stickyScrollFocused=new na("stickyScrollFocused",!1,G("stickyScrollFocused","Whether the sticky scroll is focused")),e.stickyScrollVisible=new na("stickyScrollVisible",!1,G("stickyScrollVisible","Whether the sticky scroll is visible")),e.standaloneColorPickerVisible=new na("standaloneColorPickerVisible",!1,G("standaloneColorPickerVisible","Whether the standalone color picker is visible")),e.standaloneColorPickerFocused=new na("standaloneColorPickerFocused",!1,G("standaloneColorPickerFocused","Whether the standalone color picker is focused")),e.inCompositeEditor=new na("inCompositeEditor",void 0,G("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),e.notInCompositeEditor=e.inCompositeEditor.toNegated(),e.languageId=new na("editorLangId","",G("editorLangId","The language identifier of the editor")),e.hasCompletionItemProvider=new na("editorHasCompletionItemProvider",!1,G("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),e.hasCodeActionsProvider=new na("editorHasCodeActionsProvider",!1,G("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),e.hasCodeLensProvider=new na("editorHasCodeLensProvider",!1,G("editorHasCodeLensProvider","Whether the editor has a code lens provider")),e.hasDefinitionProvider=new na("editorHasDefinitionProvider",!1,G("editorHasDefinitionProvider","Whether the editor has a definition provider")),e.hasDeclarationProvider=new na("editorHasDeclarationProvider",!1,G("editorHasDeclarationProvider","Whether the editor has a declaration provider")),e.hasImplementationProvider=new na("editorHasImplementationProvider",!1,G("editorHasImplementationProvider","Whether the editor has an implementation provider")),e.hasTypeDefinitionProvider=new na("editorHasTypeDefinitionProvider",!1,G("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),e.hasHoverProvider=new na("editorHasHoverProvider",!1,G("editorHasHoverProvider","Whether the editor has a hover provider")),e.hasDocumentHighlightProvider=new na("editorHasDocumentHighlightProvider",!1,G("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),e.hasDocumentSymbolProvider=new na("editorHasDocumentSymbolProvider",!1,G("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),e.hasReferenceProvider=new na("editorHasReferenceProvider",!1,G("editorHasReferenceProvider","Whether the editor has a reference provider")),e.hasRenameProvider=new na("editorHasRenameProvider",!1,G("editorHasRenameProvider","Whether the editor has a rename provider")),e.hasSignatureHelpProvider=new na("editorHasSignatureHelpProvider",!1,G("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),e.hasInlayHintsProvider=new na("editorHasInlayHintsProvider",!1,G("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),e.hasDocumentFormattingProvider=new na("editorHasDocumentFormattingProvider",!1,G("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),e.hasDocumentSelectionFormattingProvider=new na("editorHasDocumentSelectionFormattingProvider",!1,G("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),e.hasMultipleDocumentFormattingProvider=new na("editorHasMultipleDocumentFormattingProvider",!1,G("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),e.hasMultipleDocumentSelectionFormattingProvider=new na("editorHasMultipleDocumentSelectionFormattingProvider",!1,G("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))}(qk||(qk={}));class Kk extends Xu{runEditorCommand(e,t,n){const i=t._getViewModel();i&&this.runCoreEditorCommand(i,n||{})}}var Gk,Yk,Qk;!function(e){e.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t",constraint:function(e){if(!D(e))return!1;const t=e;return!!L(t.to)&&(!(!$(t.by)&&!L(t.by))&&(!(!$(t.value)&&!T(t.value))&&!(!$(t.revealCursor)&&!I(t.revealCursor))))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},e.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"},e.parse=function(t){let n,i;switch(t.to){case e.RawDirection.Up:n=1;break;case e.RawDirection.Right:n=2;break;case e.RawDirection.Down:n=3;break;case e.RawDirection.Left:n=4;break;default:return null}switch(t.by){case e.RawUnit.Line:i=1;break;case e.RawUnit.WrappedLine:i=2;break;case e.RawUnit.Page:i=3;break;case e.RawUnit.HalfPage:i=4;break;case e.RawUnit.Editor:i=5;break;case e.RawUnit.Column:i=6;break;default:i=2}return{direction:n,unit:i,value:Math.floor(t.value||1),revealCursor:!!t.revealCursor,select:!!t.select}}}(Gk||(Gk={})),function(e){e.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t```\n\t\t\t\t",constraint:function(e){if(!D(e))return!1;const t=e;return!(!T(t.lineNumber)&&!L(t.lineNumber))&&!(!$(t.at)&&!L(t.at))},schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},e.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}}(Yk||(Yk={}));class Xk{constructor(e){e.addImplementation(1e4,"code-editor",((e,t)=>{const n=e.get(oo).getFocusedCodeEditor();return!(!n||!n.hasTextFocus())&&this._runEditorCommand(e,n,t)})),e.addImplementation(1e3,"generic-dom-input-textarea",((e,t)=>{const n=cu();return!!(n&&["input","textarea"].indexOf(n.tagName.toLowerCase())>=0)&&(this.runDOMCommand(n),!0)})),e.addImplementation(0,"generic-dom",((e,t)=>{const n=e.get(oo).getActiveCodeEditor();return!!n&&(n.focus(),this._runEditorCommand(e,n,t))}))}_runEditorCommand(e,t,n){const i=this.runEditorCommand(e,t,n);return i||!0}}!function(e){class t extends Kk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){if(!t.position)return;e.model.pushStackElement();e.setCursorStates(t.source,3,[Lk.moveTo(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)])&&2!==t.revealType&&e.revealPrimaryCursor(t.source,!0,!0)}}e.MoveTo=Zu(new t({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),e.MoveToSelect=Zu(new t({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class n extends Kk{runCoreEditorCommand(e,t){e.model.pushStackElement();const n=this._getColumnSelectResult(e,e.getPrimaryCursorState(),e.getCursorColumnSelectData(),t);null!==n&&(e.setCursorStates(t.source,3,n.viewStates.map((e=>dk.fromViewState(e)))),e.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:n.fromLineNumber,fromViewVisualColumn:n.fromVisualColumn,toViewLineNumber:n.toLineNumber,toViewVisualColumn:n.toVisualColumn}),n.reversed?e.revealTopMostCursor(t.source):e.revealBottomMostCursor(t.source))}}e.ColumnSelect=Zu(new class extends n{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(e,t,n,i){if("undefined"===typeof i.position||"undefined"===typeof i.viewPosition||"undefined"===typeof i.mouseColumn)return null;const s=e.model.validatePosition(i.position),r=e.coordinatesConverter.validateViewPosition(new Ci(i.viewPosition.lineNumber,i.viewPosition.column),s),o=i.doColumnSelect?n.fromViewLineNumber:r.lineNumber,a=i.doColumnSelect?n.fromViewVisualColumn:i.mouseColumn-1;return _k.columnSelect(e.cursorConfig,e,o,a,r.lineNumber,i.mouseColumn-1)}}),e.CursorColumnSelectLeft=Zu(new class extends n{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(e,t,n,i){return _k.columnSelectLeft(e.cursorConfig,e,n)}}),e.CursorColumnSelectRight=Zu(new class extends n{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(e,t,n,i){return _k.columnSelectRight(e.cursorConfig,e,n)}});class i extends n{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,n,i){return _k.columnSelectUp(e.cursorConfig,e,n,this._isPaged)}}e.CursorColumnSelectUp=Zu(new i({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:3600,linux:{primary:0}}})),e.CursorColumnSelectPageUp=Zu(new i({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:3595,linux:{primary:0}}}));class s extends n{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,n,i){return _k.columnSelectDown(e.cursorConfig,e,n,this._isPaged)}}e.CursorColumnSelectDown=Zu(new s({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:3602,linux:{primary:0}}})),e.CursorColumnSelectPageDown=Zu(new s({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:3596,linux:{primary:0}}}));class r extends Kk{constructor(){super({id:"cursorMove",precondition:void 0,metadata:Dk.metadata})}runCoreEditorCommand(e,t){const n=Dk.parse(t);n&&this._runCursorMove(e,t.source,n)}_runCursorMove(e,t,n){e.model.pushStackElement(),e.setCursorStates(t,3,r._move(e,e.getCursorStates(),n)),e.revealPrimaryCursor(t,!0)}static _move(e,t,n){const i=n.select,s=n.value;switch(n.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return Lk.simpleMove(e,t,n.direction,i,s,n.unit);case 11:case 13:case 12:case 14:return Lk.viewportMove(e,t,n.direction,i,s);default:return null}}}e.CursorMoveImpl=r,e.CursorMove=Zu(new r);class o extends Kk{constructor(e){super(e),this._staticArgs=e.args}runCoreEditorCommand(e,t){let n=this._staticArgs;-1===this._staticArgs.value&&(n={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:t.pageSize||e.cursorConfig.pageSize}),e.model.pushStackElement(),e.setCursorStates(t.source,3,Lk.simpleMove(e,e.getCursorStates(),n.direction,n.select,n.value,n.unit)),e.revealPrimaryCursor(t.source,!0)}}e.CursorLeft=Zu(new o({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),e.CursorLeftSelect=Zu(new o({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:1039}})),e.CursorRight=Zu(new o({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),e.CursorRightSelect=Zu(new o({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:1041}})),e.CursorUp=Zu(new o({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),e.CursorUpSelect=Zu(new o({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),e.CursorPageUp=Zu(new o({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:11}})),e.CursorPageUpSelect=Zu(new o({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:1035}})),e.CursorDown=Zu(new o({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),e.CursorDownSelect=Zu(new o({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),e.CursorPageDown=Zu(new o({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:12}})),e.CursorPageDownSelect=Zu(new o({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:1036}})),e.CreateCursor=Zu(new class extends Kk{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(e,t){if(!t.position)return;let n;n=t.wholeLine?Lk.line(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition):Lk.moveTo(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition);const i=e.getCursorStates();if(i.length>1){const s=n.modelState?n.modelState.position:null,r=n.viewState?n.viewState.position:null;for(let n=0,o=i.length;n<o;n++){const o=i[n];if((!s||o.modelState.selection.containsPosition(s))&&(!r||o.viewState.selection.containsPosition(r)))return i.splice(n,1),e.model.pushStackElement(),void e.setCursorStates(t.source,3,i)}}i.push(n),e.model.pushStackElement(),e.setCursorStates(t.source,3,i)}}),e.LastCursorMoveToSelect=Zu(new class extends Kk{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(e,t){if(!t.position)return;const n=e.getLastAddedCursorIndex(),i=e.getCursorStates(),s=i.slice(0);s[n]=Lk.moveTo(e,i[n],!0,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,s)}});class a extends Kk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,Lk.moveToBeginningOfLine(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorHome=Zu(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),e.CursorHomeSelect=Zu(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends Kk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}_exec(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],s=i.modelState.position.lineNumber;t[n]=dk.fromModelState(i.modelState.move(this._inSelectionMode,s,1,0))}return t}}e.CursorLineStart=Zu(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:0,mac:{primary:287}}})),e.CursorLineStartSelect=Zu(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends Kk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,Lk.moveToEndOfLine(e,e.getCursorStates(),this._inSelectionMode,t.sticky||!1)),e.revealPrimaryCursor(t.source,!0)}}e.CursorEnd=Zu(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:qk.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:G("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),e.CursorEndSelect=Zu(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:qk.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:G("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class u extends Kk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e,e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}_exec(e,t){const n=[];for(let i=0,s=t.length;i<s;i++){const s=t[i],r=s.modelState.position.lineNumber,o=e.model.getLineMaxColumn(r);n[i]=dk.fromModelState(s.modelState.move(this._inSelectionMode,r,o,0))}return n}}e.CursorLineEnd=Zu(new u({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:0,mac:{primary:291}}})),e.CursorLineEndSelect=Zu(new u({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:0,mac:{primary:1315}}}));class h extends Kk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,Lk.moveToBeginningOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorTop=Zu(new h({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:2062,mac:{primary:2064}}})),e.CursorTopSelect=Zu(new h({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:3086,mac:{primary:3088}}}));class d extends Kk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,Lk.moveToEndOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorBottom=Zu(new d({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:2061,mac:{primary:2066}}})),e.CursorBottomSelect=Zu(new d({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends Kk{constructor(){super({id:"editorScroll",precondition:void 0,metadata:Gk.metadata})}determineScrollMethod(e){return[6].includes(e.unit)&&[4,2].includes(e.direction)?this._runHorizontalEditorScroll.bind(this):[1,2,3,4,5,6].includes(e.unit)&&[1,3].includes(e.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(e,t){const n=Gk.parse(t);if(!n)return;const i=this.determineScrollMethod(n);i&&i(e,t.source,n)}_runVerticalEditorScroll(e,t,n){const i=this._computeDesiredScrollTop(e,n);if(n.revealCursor){const s=e.getCompletelyVisibleViewRangeAtScrollTop(i);e.setCursorStates(t,3,[Lk.findPositionInViewportIfOutside(e,e.getPrimaryCursorState(),s,n.select)])}e.viewLayout.setScrollPosition({scrollTop:i},0)}_computeDesiredScrollTop(e,t){if(1===t.unit){const n=e.viewLayout.getFutureViewport(),i=e.getCompletelyVisibleViewRangeAtScrollTop(n.top),s=e.coordinatesConverter.convertViewRangeToModelRange(i);let r;r=1===t.direction?Math.max(1,s.startLineNumber-t.value):Math.min(e.model.getLineCount(),s.startLineNumber+t.value);const o=e.coordinatesConverter.convertModelPositionToViewPosition(new Ci(r,1));return e.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber)}if(5===t.unit){let n=0;return 3===t.direction&&(n=e.model.getLineCount()-e.cursorConfig.pageSize),e.viewLayout.getVerticalOffsetForLineNumber(n)}let n;n=3===t.unit?e.cursorConfig.pageSize*t.value:4===t.unit?Math.round(e.cursorConfig.pageSize/2)*t.value:t.value;const i=(1===t.direction?-1:1)*n;return e.viewLayout.getCurrentScrollTop()+i*e.cursorConfig.lineHeight}_runHorizontalEditorScroll(e,t,n){const i=this._computeDesiredScrollLeft(e,n);e.viewLayout.setScrollPosition({scrollLeft:i},0)}_computeDesiredScrollLeft(e,t){const n=(4===t.direction?-1:1)*t.value;return e.viewLayout.getCurrentScrollLeft()+n*e.cursorConfig.typicalHalfwidthCharacterWidth}}e.EditorScrollImpl=f,e.EditorScroll=Zu(new f),e.ScrollLineUp=Zu(new class extends Kk{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:Gk.RawDirection.Up,by:Gk.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:n.source})}}),e.ScrollPageUp=Zu(new class extends Kk{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:Gk.RawDirection.Up,by:Gk.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:n.source})}}),e.ScrollEditorTop=Zu(new class extends Kk{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus}})}runCoreEditorCommand(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:Gk.RawDirection.Up,by:Gk.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:n.source})}}),e.ScrollLineDown=Zu(new class extends Kk{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:Gk.RawDirection.Down,by:Gk.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:n.source})}}),e.ScrollPageDown=Zu(new class extends Kk{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:Gk.RawDirection.Down,by:Gk.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:n.source})}}),e.ScrollEditorBottom=Zu(new class extends Kk{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus}})}runCoreEditorCommand(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:Gk.RawDirection.Down,by:Gk.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:n.source})}}),e.ScrollLeft=Zu(new class extends Kk{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus}})}runCoreEditorCommand(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:Gk.RawDirection.Left,by:Gk.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:n.source})}}),e.ScrollRight=Zu(new class extends Kk{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus}})}runCoreEditorCommand(t,n){e.EditorScroll.runCoreEditorCommand(t,{to:Gk.RawDirection.Right,by:Gk.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:n.source})}});class g extends Kk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[Lk.word(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position)]),2!==t.revealType&&e.revealPrimaryCursor(t.source,!0,!0))}}e.WordSelect=Zu(new g({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),e.WordSelectDrag=Zu(new g({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),e.LastCursorWordSelect=Zu(new class extends Kk{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(e,t){if(!t.position)return;const n=e.getLastAddedCursorIndex(),i=e.getCursorStates(),s=i.slice(0),r=i[n];s[n]=Lk.word(e,r,r.modelState.hasSelection(),t.position),e.model.pushStackElement(),e.setCursorStates(t.source,3,s)}});class p extends Kk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[Lk.line(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)]),2!==t.revealType&&e.revealPrimaryCursor(t.source,!1,!0))}}e.LineSelect=Zu(new p({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),e.LineSelectDrag=Zu(new p({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class m extends Kk{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){if(!t.position)return;const n=e.getLastAddedCursorIndex(),i=e.getCursorStates(),s=i.slice(0);s[n]=Lk.line(e,i[n],this._inSelectionMode,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,s)}}e.LastCursorLineSelect=Zu(new m({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),e.LastCursorLineSelectDrag=Zu(new m({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),e.CancelSelection=Zu(new class extends Kk{constructor(){super({id:"cancelSelection",precondition:qk.hasNonEmptySelection,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[Lk.cancelSelection(e,e.getPrimaryCursorState())]),e.revealPrimaryCursor(t.source,!0)}}),e.RemoveSecondaryCursors=Zu(new class extends Kk{constructor(){super({id:"removeSecondaryCursors",precondition:qk.hasMultipleSelections,kbOpts:{weight:1,kbExpr:qk.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[e.getPrimaryCursorState()]),e.revealPrimaryCursor(t.source,!0),zm(G("removedCursor","Removed secondary cursors"))}}),e.RevealLine=Zu(new class extends Kk{constructor(){super({id:"revealLine",precondition:void 0,metadata:Yk.metadata})}runCoreEditorCommand(e,t){const n=t,i=n.lineNumber||0;let s="number"===typeof i?i+1:parseInt(i)+1;s<1&&(s=1);const r=e.model.getLineCount();s>r&&(s=r);const o=new xi(s,1,s,e.model.getLineMaxColumn(s));let a=0;if(n.at)switch(n.at){case Yk.RawAtArgument.Top:a=3;break;case Yk.RawAtArgument.Center:a=1;break;case Yk.RawAtArgument.Bottom:a=4}const l=e.coordinatesConverter.convertModelRangeToViewRange(o);e.revealRange(t.source,!1,l,a,0)}}),e.SelectAll=new class extends Xk{constructor(){super(rh)}runDOMCommand(e){Fr&&(e.focus(),e.select()),e.ownerDocument.execCommand("selectAll")}runEditorCommand(e,t,n){const i=t._getViewModel();i&&this.runCoreEditorCommand(i,n)}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates("keyboard",3,[Lk.selectAll(e,e.getPrimaryCursorState())])}},e.SetSelection=Zu(new class extends Kk{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(e,t){t.selection&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[dk.fromModelSelection(t.selection)]))}})}(Qk||(Qk={}));const Zk=Oo.and(qk.textInputFocus,qk.columnSelection);function Jk(e,t){wa.registerKeybindingRule({id:e,primary:t,when:Zk,weight:1})}function eC(e){return e.register(),e}var tC,nC;Jk(Qk.CursorColumnSelectLeft.id,1039),Jk(Qk.CursorColumnSelectRight.id,1041),Jk(Qk.CursorColumnSelectUp.id,1040),Jk(Qk.CursorColumnSelectPageUp.id,1035),Jk(Qk.CursorColumnSelectDown.id,1042),Jk(Qk.CursorColumnSelectPageDown.id,1036),function(e){class t extends Xu{runEditorCommand(e,t,n){const i=t._getViewModel();i&&this.runCoreEditingCommand(t,i,n||{})}}e.CoreEditingCommand=t,e.LineBreakInsert=Zu(new class extends t{constructor(){super({id:"lineBreakInsert",precondition:qk.writable,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(e,t,n){e.pushUndoStop(),e.executeCommands(this.id,Bk.lineBreakInsert(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection))))}}),e.Outdent=Zu(new class extends t{constructor(){super({id:"outdent",precondition:qk.writable,kbOpts:{weight:0,kbExpr:Oo.and(qk.editorTextFocus,qk.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(e,t,n){e.pushUndoStop(),e.executeCommands(this.id,Bk.outdent(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)))),e.pushUndoStop()}}),e.Tab=Zu(new class extends t{constructor(){super({id:"tab",precondition:qk.writable,kbOpts:{weight:0,kbExpr:Oo.and(qk.editorTextFocus,qk.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(e,t,n){e.pushUndoStop(),e.executeCommands(this.id,Bk.tab(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)))),e.pushUndoStop()}}),e.DeleteLeft=Zu(new class extends t{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(e,t,n){const[i,s]=xk.deleteLeft(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)),t.getCursorAutoClosedCharacters());i&&e.pushUndoStop(),e.executeCommands(this.id,s),t.setPrevEditOperationType(2)}}),e.DeleteRight=Zu(new class extends t{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:0,kbExpr:qk.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(e,t,n){const[i,s]=xk.deleteRight(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)));i&&e.pushUndoStop(),e.executeCommands(this.id,s),t.setPrevEditOperationType(3)}}),e.Undo=new class extends Xk{constructor(){super(ih)}runDOMCommand(e){e.ownerDocument.execCommand("undo")}runEditorCommand(e,t,n){if(t.hasModel()&&!0!==t.getOption(90))return t.getModel().undo()}},e.Redo=new class extends Xk{constructor(){super(sh)}runDOMCommand(e){e.ownerDocument.execCommand("redo")}runEditorCommand(e,t,n){if(t.hasModel()&&!0!==t.getOption(90))return t.getModel().redo()}}}(tC||(tC={}));class iC extends Gu{constructor(e,t,n){super({id:e,precondition:void 0,metadata:n}),this._handlerId=t}runCommand(e,t){const n=e.get(oo).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function sC(e,t){eC(new iC("default:"+e,e)),eC(new iC(e,e,t))}sC("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),sC("replacePreviousChar"),sC("compositionType"),sC("compositionStart"),sC("compositionEnd"),sC("paste"),sC("cut");class rC{constructor(e,t,n,i){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=i}paste(e,t,n,i){this.commandDelegate.paste(e,t,n,i)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,i){this.commandDelegate.compositionType(e,t,n,i)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Qk.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new Ci(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(77)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(77)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=ve&&t.get(106),i=t.get(22);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():3===e.mouseDownCount?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):2===e.mouseDownCount?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||i?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){Qk.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){Qk.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,n){e=this._validateViewColumn(e),Qk.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),Qk.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){Qk.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){Qk.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){Qk.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){Qk.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){Qk.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){Qk.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){Qk.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){Qk.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){Qk.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class oC{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new Wt("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(0===this.getCount())return null;const n=this.getStartLineNumber(),i=this.getEndLineNumber();if(t<n){const n=t-e+1;return this._rendLineNumberStart-=n,null}if(e>i)return null;let s=0,r=0;for(let o=n;o<=i;o++){const n=o-this._rendLineNumberStart;e<=o&&o<=t&&(0===r?(s=n,r=1):r++)}if(e<n){let i=0;i=t<n?t-e+1:n-e,this._rendLineNumberStart-=i}return this._lines.splice(s,r)}onLinesChanged(e,t){const n=e+t-1;if(0===this.getCount())return!1;const i=this.getStartLineNumber(),s=this.getEndLineNumber();let r=!1;for(let o=e;o<=n;o++)o>=i&&o<=s&&(this._lines[o-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(0===this.getCount())return null;const n=t-e+1,i=this.getStartLineNumber(),s=this.getEndLineNumber();if(e<=i)return this._rendLineNumberStart+=n,null;if(e>s)return null;if(n+e>s){return this._lines.splice(e-this._rendLineNumberStart,s-e+1)}const r=[];for(let u=0;u<n;u++)r[u]=this._createLine();const o=e-this._rendLineNumberStart,a=this._lines.slice(0,o),l=this._lines.slice(o,this._lines.length-n),c=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=a.concat(r).concat(l),c}onTokensChanged(e){if(0===this.getCount())return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let i=!1;for(let s=0,r=e.length;s<r;s++){const r=e[s];if(r.toLineNumber<t||r.fromLineNumber>n)continue;const o=Math.max(t,r.fromLineNumber),a=Math.min(n,r.toLineNumber);for(let e=o;e<=a;e++){const t=e-this._rendLineNumberStart;this._lines[t].onTokensChanged(),i=!0}}return i}}class aC{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new oC((()=>this._host.createVisibleLine()))}_createDomNode(){const e=Kr(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(143)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const e=t[n].getDomNode();e&&this.domNode.domNode.removeChild(e)}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const e=t[n].getDomNode();e&&this.domNode.domNode.removeChild(e)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new lC(this.domNode.domNode,this._host,e),i={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},s=n.render(i,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(s.rendLineNumberStart,s.lines)}}class lC{constructor(e,t,n){this.domNode=e,this.host=t,this.viewportData=n}render(e,t,n,i){const s={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(s.rendLineNumberStart+s.linesLength-1<t||n<s.rendLineNumberStart){s.rendLineNumberStart=t,s.linesLength=n-t+1,s.lines=[];for(let e=t;e<=n;e++)s.lines[e-t]=this.host.createVisibleLine();return this._finishRendering(s,!0,i),s}if(this._renderUntouchedLines(s,Math.max(t-s.rendLineNumberStart,0),Math.min(n-s.rendLineNumberStart,s.linesLength-1),i,t),s.rendLineNumberStart>t){const e=t,r=Math.min(n,s.rendLineNumberStart-1);e<=r&&(this._insertLinesBefore(s,e,r,i,t),s.linesLength+=r-e+1)}else if(s.rendLineNumberStart<t){const e=Math.min(s.linesLength,t-s.rendLineNumberStart);e>0&&(this._removeLinesBefore(s,e),s.linesLength-=e)}if(s.rendLineNumberStart=t,s.rendLineNumberStart+s.linesLength-1<n){const e=s.rendLineNumberStart+s.linesLength,r=n;e<=r&&(this._insertLinesAfter(s,e,r,i,t),s.linesLength+=r-e+1)}else if(s.rendLineNumberStart+s.linesLength-1>n){const e=Math.max(0,n-s.rendLineNumberStart+1),t=s.linesLength-1-e+1;t>0&&(this._removeLinesAfter(s,t),s.linesLength-=t)}return this._finishRendering(s,!1,i),s}_renderUntouchedLines(e,t,n,i,s){const r=e.rendLineNumberStart,o=e.lines;for(let a=t;a<=n;a++){const e=r+a;o[a].layoutLine(e,i[e-s])}}_insertLinesBefore(e,t,n,i,s){const r=[];let o=0;for(let a=t;a<=n;a++)r[o++]=this.host.createVisibleLine();e.lines=r.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const t=e.lines[n].getDomNode();t&&this.domNode.removeChild(t)}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,i,s){const r=[];let o=0;for(let a=t;a<=n;a++)r[o++]=this.host.createVisibleLine();e.lines=e.lines.concat(r)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let i=0;i<t;i++){const t=e.lines[n+i].getDomNode();t&&this.domNode.removeChild(t)}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,i){lC._ttPolicy&&(n=lC._ttPolicy.createHTML(n));const s=this.domNode.lastChild;t||!s?this.domNode.innerHTML=n:s.insertAdjacentHTML("afterend",n);let r=this.domNode.lastChild;for(let o=e.linesLength-1;o>=0;o--){const t=e.lines[o];i[o]&&(t.setDomNode(r),r=r.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const i=document.createElement("div");lC._ttPolicy&&(t=lC._ttPolicy.createHTML(t)),i.innerHTML=t;for(let s=0;s<e.linesLength;s++){const t=e.lines[s];if(n[s]){const e=i.firstChild,n=t.getDomNode();n.parentNode.replaceChild(e,n),t.setDomNode(e)}}}_finishRendering(e,t,n){const i=lC._sb,s=e.linesLength,r=e.lines,o=e.rendLineNumberStart,a=[];{i.reset();let l=!1;for(let e=0;e<s;e++){const t=r[e];a[e]=!1;if(t.getDomNode())continue;t.renderLine(e+o,n[e],this.viewportData,i)&&(a[e]=!0,l=!0)}l&&this._finishRenderingNewLines(e,t,i.build(),a)}{i.reset();let t=!1;const l=[];for(let e=0;e<s;e++){const s=r[e];if(l[e]=!1,a[e])continue;s.renderLine(e+o,n[e],this.viewportData,i)&&(l[e]=!0,t=!0)}t&&this._finishRenderingInvalidLines(e,i.build(),l)}}}lC._ttPolicy=vh("editorViewLayer",{createHTML:e=>e}),lC._sb=new qh(1e5);class cC extends Sy{constructor(e){super(e),this._visibleLines=new aC(this),this.domNode=this._visibleLines.domNode;const t=this._context.configuration.options.get(50);Gr(this.domNode,t),this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++){if(this._dynamicOverlays[e].shouldRender())return!0}return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++){this._dynamicOverlays[e].dispose()}this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new uC(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let s=t;s<=n;s++){this._visibleLines.getVisibleLine(s).onConfigurationChanged(e)}const i=this._context.configuration.options.get(50);return Gr(this.domNode,i),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter((e=>e.shouldRender()));for(let n=0,i=t.length;n<i;n++){const i=t[n];i.prepareRender(e),i.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class uC{constructor(e,t){this._configuration=e,this._lineHeight=this._configuration.options.get(66),this._dynamicOverlays=t,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=Kr(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(66)}renderLine(e,t,n,i){let s="";for(let r=0,o=this._dynamicOverlays.length;r<o;r++){s+=this._dynamicOverlays[r].render(n.startLineNumber,e)}return this._renderedContent!==s&&(this._renderedContent=s,i.appendString('<div style="position:absolute;top:'),i.appendString(String(t)),i.appendString("px;width:100%;height:"),i.appendString(String(this._lineHeight)),i.appendString('px;">'),i.appendString(s),i.appendString("</div>"),!0)}layoutLine(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}class hC extends cC{constructor(e){super(e);const t=this._context.configuration.options.get(143);this._contentWidth=t.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const t=this._context.configuration.options.get(143);return this._contentWidth=t.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class dC extends cC{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(143);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Gr(this.domNode,t.get(50))}onConfigurationChanged(e){const t=this._context.configuration.options;Gr(this.domNode,t.get(50));const n=t.get(143);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class fC{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;null===(t=this.onKeyDown)||void 0===t||t.call(this,e)}emitKeyUp(e){var t;null===(t=this.onKeyUp)||void 0===t||t.call(this,e)}emitContextMenu(e){var t;null===(t=this.onContextMenu)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;null===(t=this.onMouseMove)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;null===(t=this.onMouseLeave)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;null===(t=this.onMouseDown)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;null===(t=this.onMouseUp)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;null===(t=this.onMouseDrag)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;null===(t=this.onMouseDrop)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;null===(e=this.onMouseDropCanceled)||void 0===e||e.call(this)}emitMouseWheel(e){var t;null===(t=this.onMouseWheel)||void 0===t||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return fC.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const n={...e};return n.position&&(n.position=t.convertViewPositionToModelPosition(n.position)),n.range&&(n.range=t.convertViewRangeToModelRange(n.range)),5!==n.type&&8!==n.type||(n.detail=this.convertViewToModelViewZoneData(n.detail,t)),n}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new Ci(e.afterLineNumber,1)).lineNumber}}}class gC extends Sy{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=Kr(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const t=this._context.configuration.options.get(143),n=t.contentWidth-t.verticalScrollbarWidth;this.contentWidth!==n&&(this.contentWidth=n,e=!0);const i=t.contentLeft;return this.contentLeft!==i&&(this.contentLeft=i,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){var t;let n=0;const i=e.getDecorationsInViewport();for(const s of i){if(!s.options.blockClassName)continue;let i,r,o=this.blocks[n];o||(o=this.blocks[n]=Kr(document.createElement("div")),this.domNode.appendChild(o)),s.options.blockIsAfterEnd?(i=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!1),r=e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0)):(i=e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!0),r=s.range.isEmpty()&&!s.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(s.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(s.range.endLineNumber,!0));const[a,l,c,u]=null!==(t=s.options.blockPadding)&&void 0!==t?t:[0,0,0,0];o.setClassName("blockDecorations-block "+s.options.blockClassName),o.setLeft(this.contentLeft-u),o.setWidth(this.contentWidth+u+l),o.setTop(i-e.scrollTop-a),o.setHeight(r-i+a+c),n++}for(let s=n;s<this.blocks.length;s++)this.blocks[s].domNode.remove();this.blocks.length=n}}class pC extends Sy{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=Kr(document.createElement("div")),wy.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Kr(document.createElement("div")),wy.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new mC(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n,i,s){this._widgets[e.getId()].setPosition(t,n,i,s),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const e=this._widgets[t];delete this._widgets[t];const n=e.domNode.domNode;n.parentNode.removeChild(n),n.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return!!this._widgets.hasOwnProperty(e)&&this._widgets[e].suppressMouseDown}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}class mC{constructor(e,t,n){this._primaryAnchor=new bC(null,null),this._secondaryAnchor=new bC(null,null),this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=Kr(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const i=this._context.configuration.options,s=i.get(143);this._fixedOverflowWidgets=i.get(42),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this._lineHeight=i.get(66),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(66),e.hasChanged(143)){const e=t.get(143);this._contentLeft=e.contentLeft,this._contentWidth=e.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,n){function i(e,t,n){if(!e)return new bC(null,null);const i=t.model.validatePosition(e);if(t.coordinatesConverter.modelPositionIsVisible(i)){const s=t.coordinatesConverter.convertModelPositionToViewPosition(i,null!==n&&void 0!==n?n:void 0);return new bC(e,s)}return new bC(e,null)}this._affinity=e,this._primaryAnchor=i(t,this._context.viewModel,this._affinity),this._secondaryAnchor=i(n,this._context.viewModel,this._affinity)}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?(null===t||void 0===t?void 0:t.innerWidth)||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,n,i){this._setPosition(i,e,t),this._preference=n,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,n,i){const s=e.top,r=s,o=e.top+e.height,a=s-n,l=r>=n,c=o,u=i.viewportHeight-o>=n;let h=e.left;return h+t>i.scrollLeft+i.viewportWidth&&(h=i.scrollLeft+i.viewportWidth-t),h<i.scrollLeft&&(h=i.scrollLeft),{fitsAbove:l,aboveTop:a,fitsBelow:u,belowTop:c,left:h}}_layoutHorizontalSegmentInPage(e,t,n,i){var s;const r=Math.max(15,t.left-i),o=Math.min(t.left+t.width+i,e.width-15),a=this._viewDomNode.domNode.ownerDocument.defaultView;let l=t.left+n-(null!==(s=null===a||void 0===a?void 0:a.scrollX)&&void 0!==s?s:0);if(l+i>o){const e=l-(o-i);l-=e,n-=e}if(l<r){const e=l-r;l-=e,n-=e}return[n,l]}_layoutBoxInPage(e,t,n,i){var s,r;const o=e.top-n,a=e.top+e.height,l=Zc(this._viewDomNode.domNode),c=this._viewDomNode.domNode.ownerDocument,u=c.defaultView,h=l.top+o-(null!==(s=null===u||void 0===u?void 0:u.scrollY)&&void 0!==s?s:0),d=l.top+a-(null!==(r=null===u||void 0===u?void 0:u.scrollY)&&void 0!==r?r:0),f=Yc(c.body),[g,p]=this._layoutHorizontalSegmentInPage(f,l,e.left-i.scrollLeft+this._contentLeft,t),m=h>=22,b=d+n<=f.height-22;return this._fixedOverflowWidgets?{fitsAbove:m,aboveTop:Math.max(h,22),fitsBelow:b,belowTop:d,left:p}:{fitsAbove:m,aboveTop:o,fitsBelow:b,belowTop:a,left:g}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new _C(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var t,n;return{primary:i(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),secondary:i((null===(t=this._secondaryAnchor.viewPosition)||void 0===t?void 0:t.lineNumber)===(null===(n=this._primaryAnchor.viewPosition)||void 0===n?void 0:n.lineNumber)?this._secondaryAnchor.viewPosition:null,this._affinity,this._lineHeight)};function i(t,n,i){if(!t)return null;const s=e.visibleRangeForPosition(t);if(!s)return null;const r=1===t.column&&3===n?0:s.left,o=e.getVerticalOffsetForLineNumber(t.lineNumber)-e.scrollTop;return new vC(o,r,i)}}_reduceAnchorCoordinates(e,t,n){if(!t)return e;const i=this._context.configuration.options.get(50);let s=t.left;return s=s<e.left?Math.max(s,e.left-n+i.typicalFullwidthCharacterWidth):Math.min(s,e.left+n-i.typicalFullwidthCharacterWidth),new vC(e.top,s,e.height)}_prepareRenderWidget(e){if(!this._preference||0===this._preference.length)return null;const{primary:t,secondary:n}=this._getAnchorsCoordinates(e);if(!t)return null;if(-1===this._cachedDomNodeOffsetWidth||-1===this._cachedDomNodeOffsetHeight){let e=null;if("function"===typeof this._actual.beforeRender&&(e=yC(this._actual.beforeRender,this._actual)),e)this._cachedDomNodeOffsetWidth=e.width,this._cachedDomNodeOffsetHeight=e.height;else{const e=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(e.width),this._cachedDomNodeOffsetHeight=Math.round(e.height)}}const i=this._reduceAnchorCoordinates(t,n,this._cachedDomNodeOffsetWidth);let s;s=this.allowEditorOverflow?this._layoutBoxInPage(i,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):this._layoutBoxInViewport(i,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let r=1;r<=2;r++)for(const e of this._preference)if(1===e){if(!s)return null;if(2===r||s.fitsAbove)return{coordinate:new _C(s.aboveTop,s.left),position:1}}else{if(2!==e)return this.allowEditorOverflow?{coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new _C(i.top,i.left)),position:0}:{coordinate:new _C(i.top,i.left),position:0};if(!s)return null;if(2===r||s.fitsBelow)return{coordinate:new _C(s.belowTop,s.left),position:2}}return null}onBeforeRender(e){this._primaryAnchor.viewPosition&&this._preference&&(this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth))}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData)return this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this.domNode.setVisibility("hidden")),void("function"===typeof this._actual.afterRender&&yC(this._actual.afterRender,this._actual,null));this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),"function"===typeof this._actual.afterRender&&yC(this._actual.afterRender,this._actual,this._renderData.position)}}class bC{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class _C{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class vC{constructor(e,t,n){this.top=e,this.left=t,this.height=n,this._anchorCoordinateBrand=void 0}}function yC(e,t){try{for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];return e.call(t,...i)}catch(Y){return null}}class SC extends YS{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(143);this._lineHeight=t.get(66),this._renderLineHighlight=t.get(95),this._renderLineHighlightOnlyWhenFocus=t.get(96),this._wordWrap=n.isViewportWrapping,this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new Ei(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const s of this._selections)t.add(s.positionLineNumber);const n=Array.from(t);n.sort(((e,t)=>e-t)),a(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);const i=this._selections.every((e=>e.isEmpty()));return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(143);return this._lineHeight=t.get(66),this._renderLineHighlight=t.get(95),this._renderLineHighlightOnlyWhenFocus=t.get(96),this._wordWrap=n.isViewportWrapping,this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return!!this._renderLineHighlightOnlyWhenFocus&&(this._focused=e.isFocused,!0)}prepareRender(e){if(!this._shouldRenderThis())return void(this._renderData=null);const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=[];for(let r=t;r<=n;r++){i[r-t]=""}if(this._wordWrap){const s=this._renderOne(e,!1);for(const e of this._cursorLineNumbers){const r=this._context.viewModel.coordinatesConverter,o=r.convertViewPositionToModelPosition(new Ci(e,1)).lineNumber,a=r.convertModelPositionToViewPosition(new Ci(o,1)).lineNumber,l=r.convertModelPositionToViewPosition(new Ci(o,this._context.viewModel.model.getLineMaxColumn(o))).lineNumber,c=Math.max(a,t),u=Math.min(l,n);for(let e=c;e<=u;e++){i[e-t]=s}}}const s=this._renderOne(e,!0);for(const r of this._cursorLineNumbers){if(r<t||r>n)continue;i[r-t]=s}this._renderData=i}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}_shouldRenderInMargin(){return("gutter"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return("line"===this._renderLineHighlight||"all"===this._renderLineHighlight)&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class wC extends SC{_renderOne(e,t){const n="current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"");return'<div class="'.concat(n,'" style="width:').concat(Math.max(e.scrollWidth,this._contentWidth),"px; height:").concat(this._lineHeight,'px;"></div>')}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class kC extends SC{_renderOne(e,t){const n="current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"");return'<div class="'.concat(n,'" style="width:').concat(this._contentLeft,"px; height:").concat(this._lineHeight,'px;"></div>')}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}tw(((e,t)=>{const n=e.getColor(iw);if(n&&(t.addRule(".monaco-editor .view-overlays .current-line { background-color: ".concat(n,"; }")),t.addRule(".monaco-editor .margin-view-overlays .current-line-margin { background-color: ".concat(n,"; border: none; }"))),!n||n.isTransparent()||e.defines(sw)){const n=e.getColor(sw);n&&(t.addRule(".monaco-editor .view-overlays .current-line-exact { border: 2px solid ".concat(n,"; }")),t.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ".concat(n,"; }")),Iy(e.type)&&(t.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),t.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}}));class CC extends YS{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(66),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(66),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let a=0,l=t.length;a<l;a++){const e=t[a];e.options.className&&(n[i++]=e)}n=n.sort(((e,t)=>{if(e.options.zIndex<t.options.zIndex)return-1;if(e.options.zIndex>t.options.zIndex)return 1;const n=e.options.className,i=t.options.className;return n<i?-1:n>i?1:xi.compareRangesUsingStarts(e.range,t.range)}));const s=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,o=[];for(let a=s;a<=r;a++){o[a-s]=""}this._renderWholeLineDecorations(e,n,o),this._renderNormalDecorations(e,n,o),this._renderResult=o}_renderWholeLineDecorations(e,t,n){const i=String(this._lineHeight),s=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber;for(let o=0,a=t.length;o<a;o++){const e=t[o];if(!e.options.isWholeLine)continue;const a='<div class="cdr '+e.options.className+'" style="left:0;width:100%;height:'+i+'px;"></div>',l=Math.max(e.range.startLineNumber,s),c=Math.min(e.range.endLineNumber,r);for(let t=l;t<=c;t++){n[t-s]+=a}}}_renderNormalDecorations(e,t,n){var i;const s=String(this._lineHeight),r=e.visibleRange.startLineNumber;let o=null,a=!1,l=null,c=!1;for(let u=0,h=t.length;u<h;u++){const h=t[u];if(h.options.isWholeLine)continue;const d=h.options.className,f=Boolean(h.options.showIfCollapsed);let g=h.range;f&&1===g.endColumn&&g.endLineNumber!==g.startLineNumber&&(g=new xi(g.startLineNumber,g.startColumn,g.endLineNumber-1,this._context.viewModel.getLineMaxColumn(g.endLineNumber-1))),o===d&&a===f&&xi.areIntersectingOrTouching(l,g)?l=xi.plusRange(l,g):(null!==o&&this._renderNormalDecoration(e,l,o,c,a,s,r,n),o=d,a=f,l=g,c=null!==(i=h.options.shouldFillLineOnLineBreak)&&void 0!==i&&i)}null!==o&&this._renderNormalDecoration(e,l,o,c,a,s,r,n)}_renderNormalDecoration(e,t,n,i,s,r,o,a){const l=e.linesVisibleRangesForRange(t,"findMatch"===n);if(l)for(let c=0,u=l.length;c<u;c++){const e=l[c];if(e.outsideRenderedLine)continue;const t=e.lineNumber-o;if(s&&1===e.ranges.length){const t=e.ranges[0];if(t.width<this._typicalHalfwidthCharacterWidth){const n=Math.round(t.left+t.width/2),i=Math.max(0,Math.round(n-this._typicalHalfwidthCharacterWidth/2));e.ranges[0]=new Ey(i,this._typicalHalfwidthCharacterWidth)}}for(let s=0,o=e.ranges.length;s<o;s++){const l=i&&e.continuesOnNextLine&&1===o,c=e.ranges[s],u='<div class="cdr '+n+'" style="left:'+String(c.left)+(l?"px;width:100%;height:":"px;width:"+String(c.width)+"px;height:")+r+'px;"></div>';a[t]+=u}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class xC extends Sy{constructor(e,t,n,i){super(e);const s=this._context.configuration.options,r=s.get(102),o=s.get(74),a=s.get(40),l=s.get(105),c={listenOnDomNode:n.domNode,className:"editor-scrollable "+ZS(e.theme.type),useShadows:!1,lazyRender:!0,vertical:r.vertical,horizontal:r.horizontal,verticalHasArrows:r.verticalHasArrows,horizontalHasArrows:r.horizontalHasArrows,verticalScrollbarSize:r.verticalScrollbarSize,verticalSliderSize:r.verticalSliderSize,horizontalScrollbarSize:r.horizontalScrollbarSize,horizontalSliderSize:r.horizontalSliderSize,handleMouseWheel:r.handleMouseWheel,alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel,arrowSize:r.arrowSize,mouseWheelScrollSensitivity:o,fastScrollSensitivity:a,scrollPredominantAxis:l,scrollByPage:r.scrollByPage};this.scrollbar=this._register(new LS(t.domNode,c,this._context.viewLayout.getScrollable())),wy.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=Kr(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const u=(e,t,n)=>{const i={};if(t){const t=e.scrollTop;t&&(i.scrollTop=this._context.viewLayout.getCurrentScrollTop()+t,e.scrollTop=0)}if(n){const t=e.scrollLeft;t&&(i.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+t,e.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(i,1)};this._register(zc(n.domNode,"scroll",(e=>u(n.domNode,!0,!0)))),this._register(zc(t.domNode,"scroll",(e=>u(t.domNode,!0,!1)))),this._register(zc(i.domNode,"scroll",(e=>u(i.domNode,!0,!1)))),this._register(zc(this.scrollbarDomNode.domNode,"scroll",(e=>u(this.scrollbarDomNode.domNode,!0,!1))))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(143);this.scrollbarDomNode.setLeft(t.contentLeft);"right"===e.get(72).side?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(102)||e.hasChanged(74)||e.hasChanged(40)){const e=this._context.configuration.options,t=e.get(102),n=e.get(74),i=e.get(40),s=e.get(105),r={vertical:t.vertical,horizontal:t.horizontal,verticalScrollbarSize:t.verticalScrollbarSize,horizontalScrollbarSize:t.horizontalScrollbarSize,scrollByPage:t.scrollByPage,handleMouseWheel:t.handleMouseWheel,mouseWheelScrollSensitivity:n,fastScrollSensitivity:i,scrollPredominantAxis:s};this.scrollbar.updateOptions(r)}return e.hasChanged(143)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+ZS(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class EC{constructor(e,t,n,i,s){this.startLineNumber=e,this.endLineNumber=t,this.className=n,this.tooltip=i,this._decorationToRenderBrand=void 0,this.zIndex=null!==s&&void 0!==s?s:0}}class LC{constructor(e,t,n){this.className=e,this.zIndex=t,this.tooltip=n}}class DC{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class AC extends YS{_render(e,t,n){const i=[];for(let o=e;o<=t;o++){i[o-e]=new DC}if(0===n.length)return i;n.sort(((e,t)=>e.className===t.className?e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber:e.className<t.className?-1:1));let s=null,r=0;for(let o=0,a=n.length;o<a;o++){const a=n[o],l=a.className,c=a.zIndex;let u=Math.max(a.startLineNumber,e)-e;const h=Math.min(a.endLineNumber,t)-e;s===l?(u=Math.max(r+1,u),r=Math.max(r,h)):(s=l,r=h);for(let e=u;e<=r;e++)i[e].add(new LC(l,c,a.tooltip))}return i}}class TC extends Sy{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,n=t.get(143);this.domNode=Kr(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(66),this._glyphMargin=t.get(57),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(143);return this._lineHeight=t.get(66),this._glyphMargin=t.get(57),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=Kr(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return(n.preference.lane!==t.lane||n.preference.zIndex!==t.zIndex||!xi.equalsRange(n.preference.range,t.range))&&(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){var t;const n=e.getId();if(this._widgets[n]){const e=this._widgets[n].domNode.domNode;delete this._widgets[n],null===(t=e.parentNode)||void 0===t||t.removeChild(e),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){var n,i,s;const r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=e.getDecorationsInViewport();for(const l of a){const e=l.options.glyphMarginClassName;if(!e)continue;const a=Math.max(l.range.startLineNumber,r),c=Math.min(l.range.endLineNumber,o),u=null!==(i=null===(n=l.options.glyphMargin)||void 0===n?void 0:n.position)&&void 0!==i?i:Df.Center,h=null!==(s=l.options.zIndex)&&void 0!==s?s:0;for(let n=a;n<=c;n++){const i=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Ci(n,0)),s=this._context.viewModel.glyphLanes.getLanesAtLine(i.lineNumber).indexOf(u);t.push(new NC(n,s,h,e))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;for(const s of Object.values(this._widgets)){const e=s.preference.range,{startLineNumber:r,endLineNumber:o}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(xi.lift(e));if(!r||!o||o<n||r>i)continue;const a=Math.max(r,n),l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Ci(a,0)),c=this._context.viewModel.glyphLanes.getLanesAtLine(l.lineNumber).indexOf(s.preference.lane);t.push(new IC(a,c,s.preference.zIndex,s))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort(((e,t)=>e.lineNumber===t.lineNumber?e.laneIndex===t.laneIndex?e.zIndex===t.zIndex?t.type===e.type?0===e.type&&0===t.type?e.className<t.className?-1:1:0:t.type-e.type:t.zIndex-e.zIndex:e.laneIndex-t.laneIndex:e.lineNumber-t.lineNumber)),t}prepareRender(e){if(!this._glyphMargin)return void(this._decorationGlyphsToRender=[]);for(const i of Object.values(this._widgets))i.renderInfo=null;const t=new x(this._collectSortedGlyphRenderRequests(e)),n=[];for(;t.length>0;){const e=t.peek();if(!e)break;const i=t.takeWhile((t=>t.lineNumber===e.lineNumber&&t.laneIndex===e.laneIndex));if(!i||0===i.length)break;const s=i[0];if(0===s.type){const e=[];for(const t of i){if(t.zIndex!==s.zIndex||t.type!==s.type)break;0!==e.length&&e[e.length-1]===t.className||e.push(t.className)}n.push(s.accept(e.join(" ")))}else s.widget.renderInfo={lineNumber:s.lineNumber,laneIndex:s.laneIndex}}this._decorationGlyphsToRender=n}render(e){if(!this._glyphMargin){for(const e of Object.values(this._widgets))e.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const e=this._managedDomNodes.pop();null===e||void 0===e||e.domNode.remove()}return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const n of Object.values(this._widgets))if(n.renderInfo){const i=e.viewportData.relativeVerticalOffset[n.renderInfo.lineNumber-e.viewportData.startLineNumber],s=this._glyphMarginLeft+n.renderInfo.laneIndex*this._lineHeight;n.domNode.setDisplay("block"),n.domNode.setTop(i),n.domNode.setLeft(s),n.domNode.setWidth(t),n.domNode.setHeight(this._lineHeight)}else n.domNode.setDisplay("none");for(let n=0;n<this._decorationGlyphsToRender.length;n++){const i=this._decorationGlyphsToRender[n],s=e.viewportData.relativeVerticalOffset[i.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+i.laneIndex*this._lineHeight;let o;n<this._managedDomNodes.length?o=this._managedDomNodes[n]:(o=Kr(document.createElement("div")),this._managedDomNodes.push(o),this.domNode.appendChild(o)),o.setClassName("cgmr codicon "+i.combinedClassName),o.setPosition("absolute"),o.setTop(s),o.setLeft(r),o.setWidth(t),o.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const e=this._managedDomNodes.pop();null===e||void 0===e||e.domNode.remove()}}}class NC{constructor(e,t,n,i){this.lineNumber=e,this.laneIndex=t,this.zIndex=n,this.className=i,this.type=0}accept(e){return new $C(this.lineNumber,this.laneIndex,e)}}class IC{constructor(e,t,n,i){this.lineNumber=e,this.laneIndex=t,this.zIndex=n,this.widget=i,this.type=1}}class $C{constructor(e,t,n){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=n}}class MC extends Zt{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}!function(e){e[e.Disabled=0]="Disabled",e[e.EnabledForActive=1]="EnabledForActive",e[e.Enabled=2]="Enabled"}(nC||(nC={}));class RC{constructor(e,t,n,i,s,r){if(this.visibleColumn=e,this.column=t,this.className=n,this.horizontalLine=i,this.forWrappedLinesAfterColumn=s,this.forWrappedLinesBeforeOrAtColumn=r,-1!==e===(-1!==t))throw new Error}}class OC{constructor(e,t){this.top=e,this.endColumn=t}}class PC extends MC{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return function(e,t){let n=0,i=0;const s=e.length;for(;i<s;){const s=e.charCodeAt(i);if(32===s)n++;else{if(9!==s)break;n=n-n%t+t}i++}return i===s?-1:n}(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Wt("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=Boolean(s&&s.offSide);let o=-2,a=-1,l=-2,c=-1;const u=e=>{if(-1!==o&&(-2===o||o>e-1)){o=-1,a=-1;for(let t=e-2;t>=0;t--){const e=this._computeIndentLevel(t);if(e>=0){o=t,a=e;break}}}if(-2===l){l=-1,c=-1;for(let t=e;t<i;t++){const e=this._computeIndentLevel(t);if(e>=0){l=t,c=e;break}}}};let h=-2,d=-1,f=-2,g=-1;const p=e=>{if(-2===h){h=-1,d=-1;for(let t=e-2;t>=0;t--){const e=this._computeIndentLevel(t);if(e>=0){h=t,d=e;break}}}if(-1!==f&&(-2===f||f<e-1)){f=-1,g=-1;for(let t=e;t<i;t++){const e=this._computeIndentLevel(t);if(e>=0){f=t,g=e;break}}}};let m=0,b=!0,_=0,v=!0,y=0,S=0;for(let w=0;b||v;w++){const s=e-w,o=e+w;w>1&&(s<1||s<t)&&(b=!1),w>1&&(o>i||o>n)&&(v=!1),w>5e4&&(b=!1,v=!1);let f=-1;if(b&&s>=1){const e=this._computeIndentLevel(s-1);e>=0?(l=s-1,c=e,f=Math.ceil(e/this.textModel.getOptions().indentSize)):(u(s),f=this._getIndentLevelForWhitespaceLine(r,a,c))}let k=-1;if(v&&o<=i){const e=this._computeIndentLevel(o-1);e>=0?(h=o-1,d=e,k=Math.ceil(e/this.textModel.getOptions().indentSize)):(p(o),k=this._getIndentLevelForWhitespaceLine(r,d,g))}if(0!==w){if(1===w){if(o<=i&&k>=0&&S+1===k){b=!1,m=o,_=o,y=k;continue}if(s>=1&&f>=0&&f-1===S){v=!1,m=s,_=s,y=f;continue}if(m=e,_=e,y=S,0===y)return{startLineNumber:m,endLineNumber:_,indent:y}}b&&(f>=y?m=s:b=!1),v&&(k>=y?_=o:v=!1)}else S=f}return{startLineNumber:m,endLineNumber:_,indent:y}}getLinesBracketGuides(e,t,n,i){var s;const r=[];for(let u=e;u<=t;u++)r.push([]);const o=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new xi(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let a;if(n&&o.length>0){a=null===(s=Qf((e<=n.lineNumber&&n.lineNumber<=t?o:this.textModel.bracketPairs.getBracketPairsInRange(xi.fromPositions(n)).toArray()).filter((e=>xi.strictContainsPosition(e.range,n))),(e=>true)))||void 0===s?void 0:s.range}const l=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,c=new FC;for(const u of o){if(!u.closingBracketRange)continue;const n=a&&u.range.equalsRange(a);if(!n&&!i.includeInactive)continue;const s=c.getInlineClassName(u.nestingLevel,u.nestingLevelOfEqualBracketType,l)+(i.highlightActive&&n?" "+c.activeClassName:""),o=u.openingBracketRange.getStartPosition(),h=u.closingBracketRange.getStartPosition(),d=i.horizontalGuides===nC.Enabled||i.horizontalGuides===nC.EnabledForActive&&n;if(u.range.startLineNumber===u.range.endLineNumber){d&&r[u.range.startLineNumber-e].push(new RC(-1,u.openingBracketRange.getEndPosition().column,s,new OC(!1,h.column),-1,-1));continue}const f=this.getVisibleColumnFromPosition(h),g=this.getVisibleColumnFromPosition(u.openingBracketRange.getStartPosition()),p=Math.min(g,f,u.minVisibleColumnIndentation+1);let m=!1;Ks(this.textModel.getLineContent(u.closingBracketRange.startLineNumber))<u.closingBracketRange.startColumn-1&&(m=!0);const b=Math.max(o.lineNumber,e),_=Math.min(h.lineNumber,t),v=m?1:0;for(let t=b;t<_+v;t++)r[t-e].push(new RC(p,-1,s,null,t===o.lineNumber?o.column:-1,t===h.lineNumber?h.column:-1));d&&(o.lineNumber>=e&&g>p&&r[o.lineNumber-e].push(new RC(p,-1,s,new OC(!1,o.column),-1,-1)),h.lineNumber<=t&&f>p&&r[h.lineNumber-e].push(new RC(p,-1,s,new OC(!m,h.column),-1,-1)))}for(const u of r)u.sort(((e,t)=>e.visibleColumn-t.visibleColumn));return r}getVisibleColumnFromPosition(e){return Uy.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const i=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=Boolean(s&&s.offSide),o=new Array(t-e+1);let a=-2,l=-1,c=-2,u=-1;for(let h=e;h<=t;h++){const t=h-e,s=this._computeIndentLevel(h-1);if(s>=0)a=h-1,l=s,o[t]=Math.ceil(s/i.indentSize);else{if(-2===a){a=-1,l=-1;for(let e=h-2;e>=0;e--){const t=this._computeIndentLevel(e);if(t>=0){a=e,l=t;break}}}if(-1!==c&&(-2===c||c<h-1)){c=-1,u=-1;for(let e=h;e<n;e++){const t=this._computeIndentLevel(e);if(t>=0){c=e,u=t;break}}}o[t]=this._getIndentLevelForWhitespaceLine(r,l,u)}}return o}_getIndentLevelForWhitespaceLine(e,t,n){const i=this.textModel.getOptions();return-1===t||-1===n?0:t<n?1+Math.floor(t/i.indentSize):t===n||e?Math.ceil(n/i.indentSize):1+Math.floor(n/i.indentSize)}}class FC{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return"bracket-indent-guide lvl-".concat(e%30)}}class BC extends YS{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(144),i=t.get(50);this._lineHeight=t.get(66),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=-1===n.wrappingColumn?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(144),i=t.get(50);return this._lineHeight=t.get(66),this._spaceWidth=i.spaceWidth,this._maxIndentLeft=-1===n.wrappingColumn?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){var t;const n=e.selections[0].getPosition();return!(null===(t=this._primaryPosition)||void 0===t?void 0:t.equals(n))&&(this._primaryPosition=n,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var t,n,i,s;if(!this._bracketPairGuideOptions.indentation&&!1===this._bracketPairGuideOptions.bracketPairs)return void(this._renderResult=null);const r=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber,a=e.scrollWidth,l=this._lineHeight,c=this._primaryPosition,u=this.getGuidesByLine(r,Math.min(o+1,this._context.viewModel.getLineCount()),c),h=[];for(let d=r;d<=o;d++){const o=d-r,c=u[o];let f="";const g=null!==(n=null===(t=e.visibleRangeForPosition(new Ci(d,1)))||void 0===t?void 0:t.left)&&void 0!==n?n:0;for(const t of c){const n=-1===t.column?g+(t.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new Ci(d,t.column)).left;if(n>a||this._maxIndentLeft>0&&n>this._maxIndentLeft)break;const r=t.horizontalLine?t.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",o=t.horizontalLine?(null!==(s=null===(i=e.visibleRangeForPosition(new Ci(d,t.horizontalLine.endColumn)))||void 0===i?void 0:i.left)&&void 0!==s?s:n+this._spaceWidth)-n:this._spaceWidth;f+='<div class="core-guide '.concat(t.className," ").concat(r,'" style="left:').concat(n,"px;height:").concat(l,"px;width:").concat(o,'px"></div>')}h[o]=f}this._renderResult=h}getGuidesByLine(e,t,n){const i=!1!==this._bracketPairGuideOptions.bracketPairs?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:!0===this._bracketPairGuideOptions.bracketPairsHorizontal?nC.Enabled:"active"===this._bracketPairGuideOptions.bracketPairsHorizontal?nC.EnabledForActive:nC.Disabled,includeInactive:!0===this._bracketPairGuideOptions.bracketPairs}):null,s=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let r=0,o=0,a=0;if(!1!==this._bracketPairGuideOptions.highlightActiveIndentation&&n){const i=this._context.viewModel.getActiveIndentGuide(n.lineNumber,e,t);r=i.startLineNumber,o=i.endLineNumber,a=i.indent}const{indentSize:l}=this._context.viewModel.model.getOptions(),c=[];for(let u=e;u<=t;u++){const t=new Array;c.push(t);const n=i?i[u-e]:[],h=new x(n),d=s?s[u-e]:0;for(let e=1;e<=d;e++){const i=(e-1)*l+1,s=("always"===this._bracketPairGuideOptions.highlightActiveIndentation||0===n.length)&&r<=u&&u<=o&&e===a;t.push(...h.takeWhile((e=>e.visibleColumn<i))||[]);const c=h.peek();c&&c.visibleColumn===i&&!c.horizontalLine||t.push(new RC(i,-1,"core-guide-indent lvl-".concat((e-1)%30)+(s?" indent-active":""),null,-1,-1))}t.push(...h.takeWhile((e=>!0))||[])}return c}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function zC(e){if(!e||!e.isTransparent())return e}tw(((e,t)=>{const n=[{bracketColor:Iw,guideColor:Bw,guideColorActive:Uw},{bracketColor:$w,guideColor:zw,guideColorActive:qw},{bracketColor:Mw,guideColor:Ww,guideColorActive:Kw},{bracketColor:Rw,guideColor:Hw,guideColorActive:Gw},{bracketColor:Ow,guideColor:Vw,guideColorActive:Yw},{bracketColor:Pw,guideColor:jw,guideColorActive:Qw}],i=new FC,s=[{indentColor:hw,indentColorActive:bw},{indentColor:dw,indentColorActive:_w},{indentColor:fw,indentColorActive:vw},{indentColor:gw,indentColorActive:yw},{indentColor:pw,indentColorActive:Sw},{indentColor:mw,indentColorActive:ww}],r=n.map((t=>{var n,i;const s=e.getColor(t.bracketColor),r=e.getColor(t.guideColor),o=e.getColor(t.guideColorActive),a=zC(null!==(n=zC(r))&&void 0!==n?n:null===s||void 0===s?void 0:s.transparent(.3)),l=zC(null!==(i=zC(o))&&void 0!==i?i:s);if(a&&l)return{guideColor:a,guideColorActive:l}})).filter(M),o=s.map((t=>{const n=e.getColor(t.indentColor),i=e.getColor(t.indentColorActive),s=zC(n),r=zC(i);if(s&&r)return{indentColor:s,indentColorActive:r}})).filter(M);if(r.length>0){for(let e=0;e<30;e++){const n=r[e%r.length];t.addRule(".monaco-editor .".concat(i.getInlineClassNameOfLevel(e).replace(/ /g,".")," { --guide-color: ").concat(n.guideColor,"; --guide-color-active: ").concat(n.guideColorActive,"; }"))}t.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),t.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),t.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),t.addRule(".monaco-editor .vertical.".concat(i.activeClassName," { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }")),t.addRule(".monaco-editor .horizontal-top.".concat(i.activeClassName," { border-top: 1px solid var(--guide-color-active); }")),t.addRule(".monaco-editor .horizontal-bottom.".concat(i.activeClassName," { border-bottom: 1px solid var(--guide-color-active); }"))}if(o.length>0){for(let e=0;e<30;e++){const n=o[e%o.length];t.addRule(".monaco-editor .lines-content .core-guide-indent.lvl-".concat(e," { --indent-color: ").concat(n.indentColor,"; --indent-color-active: ").concat(n.indentColorActive,"; }"))}t.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),t.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}}));class WC{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class HC{constructor(){this._currentVisibleRange=new xi(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class VC{constructor(e,t,n,i,s,r,o){this.minimalReveal=e,this.lineNumber=t,this.startColumn=n,this.endColumn=i,this.startScrollTop=s,this.stopScrollTop=r,this.scrollType=o,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class jC{constructor(e,t,n,i,s){this.minimalReveal=e,this.selections=t,this.startScrollTop=n,this.stopScrollTop=i,this.scrollType=s,this.type="selections";let r=t[0].startLineNumber,o=t[0].endLineNumber;for(let a=1,l=t.length;a<l;a++){const e=t[a];r=Math.min(r,e.startLineNumber),o=Math.max(o,e.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=o}}class UC extends Sy{constructor(e,t){super(e),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new aC(this),this.domNode=this._visibleLines.domNode;const n=this._context.configuration,i=this._context.configuration.options,s=i.get(50),r=i.get(144);this._lineHeight=i.get(66),this._typicalHalfwidthCharacterWidth=s.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=i.get(99),this._cursorSurroundingLines=i.get(29),this._cursorSurroundingLinesStyle=i.get(30),this._canUseLayerHinting=!i.get(32),this._viewLineOptions=new Oy(n,this._context.theme.type),wy.write(this.domNode,8),this.domNode.setClassName("view-lines ".concat(Jw)),Gr(this.domNode,s),this._maxLineWidth=0,this._asyncUpdateLineWidths=new ol((()=>{this._updateLineWidthsSlow()}),200),this._asyncCheckMonospaceFontAssumptions=new ol((()=>{this._checkMonospaceFontAssumptions()}),2e3),this._lastRenderedData=new HC,this._horizontalRevealRequest=null,this._stickyScrollEnabled=i.get(114).enabled,this._maxNumberStickyLines=i.get(114).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new Py(this._viewLineOptions)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(144)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(50),i=t.get(144);return this._lineHeight=t.get(66),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=i.isViewportWrapping,this._revealHorizontalRightPadding=t.get(99),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(114).enabled,this._maxNumberStickyLines=t.get(114).maxLineCount,Gr(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(143)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new Oy(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const e=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let t=e;t<=n;t++){this._visibleLines.getVisibleLine(t).onOptionsChanged(this._viewLineOptions)}return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=!1;for(let s=t;s<=n;s++)i=this._visibleLines.getVisibleLine(s).onSelectionChanged()||i;return i}onDecorationsChanged(e){{const e=this._visibleLines.getStartLineNumber(),t=this._visibleLines.getEndLineNumber();for(let n=e;n<=t;n++)this._visibleLines.getVisibleLine(n).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(-1===t)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new VC(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new jC(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const i=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(n,i),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(null===n)return null;const i=this._getLineNumberFor(n);if(-1===i)return null;if(i<1||i>this._context.viewModel.getLineCount())return null;if(1===this._context.viewModel.getLineMaxColumn(i))return new Ci(i,1);const s=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(i<s||i>r)return null;let o=this._visibleLines.getVisibleLine(i).getColumnOfNodeOffset(e,t);const a=this._context.viewModel.getLineMinColumn(i);return o<a&&(o=a),new Ci(i,o)}_getViewLineDomNode(e){for(;e&&1===e.nodeType;){if(e.className===Py.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++){if(e===this._visibleLines.getVisibleLine(i).getDomNode())return i}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();if(e<t||e>n)return-1;const i=new WC(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getWidth(i);return this._updateLineWidthsSlowIfDomDidLayout(i),s}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,i=xi.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!i)return null;const s=[];let r=0;const o=new WC(this.domNode.domNode,this._textRangeRestingSpot);let a=0;t&&(a=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Ci(i.startLineNumber,1)).lineNumber);const l=this._visibleLines.getStartLineNumber(),c=this._visibleLines.getEndLineNumber();for(let u=i.startLineNumber;u<=i.endLineNumber;u++){if(u<l||u>c)continue;const e=u===i.startLineNumber?i.startColumn:1,h=u!==i.endLineNumber,d=h?this._context.viewModel.getLineMaxColumn(u):i.endColumn,f=this._visibleLines.getVisibleLine(u).getVisibleRangesForRange(u,e,d,o);if(f){if(t&&u<n){const e=a;a=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new Ci(u+1,1)).lineNumber,e!==a&&(f.ranges[f.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}s[r++]=new xy(f.outsideRenderedLine,u,Ey.from(f.ranges),h)}}return this._updateLineWidthsSlowIfDomDidLayout(o),0===r?null:s}_visibleRangesForLineRange(e,t,n){if(this.shouldRender())return null;if(e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const i=new WC(this.domNode.domNode,this._textRangeRestingSpot),s=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,i);return this._updateLineWidthsSlowIfDomDidLayout(i),s}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new Dy(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=1,s=!0;for(let r=t;r<=n;r++){const t=this._visibleLines.getVisibleLine(r);!e||t.getWidthIsFast()?i=Math.max(i,t.getWidth(null)):s=!1}return s&&1===t&&n===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(i),s}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let s=n;s<=i;s++){const n=this._visibleLines.getVisibleLine(s);if(n.needsMonospaceFontCheck()){const i=n.getWidth(null);i>t&&(t=i,e=s)}}if(-1!==e&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let s=n;s<=i;s++){this._visibleLines.getVisibleLine(s).onMonospaceAssumptionsInvalidated()}}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const t=this._horizontalRevealRequest;if(e.startLineNumber<=t.minLineNumber&&t.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const e=this._computeScrollLeftToReveal(t);e&&(this._isViewportWrapping||this._ensureMaxLineWidth(e.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:e.scrollLeft},t.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),ve&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const e=this._visibleLines.getStartLineNumber(),t=this._visibleLines.getEndLineNumber();for(let n=e;n<=t;n++){if(this._visibleLines.getVisibleLine(n).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,i,s,r){const o=e.top,a=e.height,l=o+a;let c,u,h;if(s&&s.length>0){let e=s[0].startLineNumber,t=s[0].endLineNumber;for(let n=1,i=s.length;n<i;n++){const i=s[n];e=Math.min(e,i.startLineNumber),t=Math.max(t,i.endLineNumber)}c=!1,u=this._context.viewLayout.getVerticalOffsetForLineNumber(e),h=this._context.viewLayout.getVerticalOffsetForLineNumber(t)+this._lineHeight}else{if(!i)return-1;c=!0,u=this._context.viewLayout.getVerticalOffsetForLineNumber(i.startLineNumber),h=this._context.viewLayout.getVerticalOffsetForLineNumber(i.endLineNumber)+this._lineHeight}let d,f=0,g=0;if(("mouse"===t||n)&&"default"===this._cursorSurroundingLinesStyle)n||(f=this._lineHeight);else{const e=Math.min(a/this._lineHeight/2,this._cursorSurroundingLines);f=this._stickyScrollEnabled?Math.max(e,this._maxNumberStickyLines)*this._lineHeight:e*this._lineHeight,g=Math.max(0,e-1)*this._lineHeight}if(n||0!==r&&4!==r||(g+=this._lineHeight),u-=f,h+=g,h-u>a){if(!c)return-1;d=u}else if(5===r||6===r)if(6===r&&o<=u&&h<=l)d=o;else{const e=u-Math.max(5*this._lineHeight,.2*a),t=h-a;d=Math.max(t,e)}else if(1===r||2===r)if(2===r&&o<=u&&h<=l)d=o;else{const e=(u+h)/2;d=Math.max(0,e-a/2)}else d=this._computeMinimumScrolling(o,l,u,h,3===r,4===r);return d}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=this._context.configuration.options.get(143),i=t.left,s=i+t.width-n.verticalScrollbarWidth;let r=1073741824,o=0;if("range"===e.type){const t=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!t)return null;for(const e of t.ranges)r=Math.min(r,Math.round(e.left)),o=Math.max(o,Math.round(e.left+e.width))}else for(const a of e.selections){if(a.startLineNumber!==a.endLineNumber)return null;const e=this._visibleRangesForLineRange(a.startLineNumber,a.startColumn,a.endColumn);if(!e)return null;for(const t of e.ranges)r=Math.min(r,Math.round(t.left)),o=Math.max(o,Math.round(t.left+t.width))}if(e.minimalReveal||(r=Math.max(0,r-UC.HORIZONTAL_EXTRA_PX),o+=this._revealHorizontalRightPadding),"selections"===e.type&&o-r>t.width)return null;return{scrollLeft:this._computeMinimumScrolling(i,s,r,o),maxHorizontalOffset:o}}_computeMinimumScrolling(e,t,n,i,s,r){s=!!s,r=!!r;const o=(t|=0)-(e|=0);return(i|=0)-(n|=0)<o?s?n:r?Math.max(0,i-o):n<e?n:i>t?Math.max(0,i-o):e:n}}UC.HORIZONTAL_EXTRA_PX=30;class qC extends AC{constructor(e){super(),this._context=e;const t=this._context.configuration.options.get(143);this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options.get(143);return this._decorationsLeft=t.decorationsLeft,this._decorationsWidth=t.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){var t,n;const i=e.getDecorationsInViewport(),s=[];let r=0;for(let o=0,a=i.length;o<a;o++){const e=i[o],a=e.options.linesDecorationsClassName,l=e.options.zIndex;a&&(s[r++]=new EC(e.range.startLineNumber,e.range.endLineNumber,a,null!==(t=e.options.linesDecorationsTooltip)&&void 0!==t?t:null,l));const c=e.options.firstLineDecorationClassName;c&&(s[r++]=new EC(e.range.startLineNumber,e.range.startLineNumber,c,null!==(n=e.options.linesDecorationsTooltip)&&void 0!==n?n:null,l))}return s}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s='" style="left:'+this._decorationsLeft.toString()+"px;width:"+this._decorationsWidth.toString()+'px;"></div>',r=[];for(let o=t;o<=n;o++){const e=o-t,n=i[e].getDecorations();let a="";for(const t of n){let e='<div class="cldr '+t.className;null!==t.tooltip&&(e+='" title="'+t.tooltip),e+=s,a+=e}r[e]=a}this._renderResult=r}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class KC extends AC{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let s=0,r=t.length;s<r;s++){const e=t[s],r=e.options.marginClassName,o=e.options.zIndex;r&&(n[i++]=new EC(e.range.startLineNumber,e.range.endLineNumber,r,null,o))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),s=[];for(let r=t;r<=n;r++){const e=r-t,n=i[e].getDecorations();let o="";for(const t of n)o+='<div class="cmdr '+t.className+'" style=""></div>';s[e]=o}this._renderResult=s}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class GC{constructor(e,t,n,i){this._rgba8Brand=void 0,this.r=GC._clamp(e),this.g=GC._clamp(t),this.b=GC._clamp(n),this.a=GC._clamp(i)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:0|e}}GC.Empty=new GC(0,0,0,0);class YC extends Zt{static getInstance(){return this._INSTANCE||(this._INSTANCE=Kt(new YC)),this._INSTANCE}constructor(){super(),this._onDidChange=new un,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(Ui.onDidChange((e=>{e.changedColorMap&&this._updateColorMap()})))}_updateColorMap(){const e=Ui.getColorMap();if(!e)return this._colors=[GC.Empty],void(this._backgroundIsLight=!0);this._colors=[GC.Empty];for(let n=1;n<e.length;n++){const t=e[n].rgba;this._colors[n]=new GC(t.r,t.g,t.b,Math.round(255*t.a))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}YC._INSTANCE=null;const QC=(()=>{const e=[];for(let t=32;t<=126;t++)e.push(t);return e.push(65533),e})();class XC{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=XC.soften(e,.8),this.charDataLight=XC.soften(e,50/60)}static soften(e,t){const n=new Uint8ClampedArray(e.length);for(let i=0,s=e.length;i<s;i++)n[i]=df(e[i]*t);return n}renderChar(e,t,n,i,s,r,o,a,l,c,u){const h=1*this.scale,d=2*this.scale,f=u?1:d;if(t+h>e.width||n+f>e.height)return void console.warn("bad render request outside image data");const g=c?this.charDataLight:this.charDataNormal,p=((e,t)=>(e-=32)<0||e>96?t<=2?(e+96)%96:95:e)(i,l),m=4*e.width,b=o.r,_=o.g,v=o.b,y=s.r-b,S=s.g-_,w=s.b-v,k=Math.max(r,a),C=e.data;let x=p*h*d,E=n*m+4*t;for(let L=0;L<f;L++){let e=E;for(let t=0;t<h;t++){const t=g[x++]/255*(r/255);C[e++]=b+y*t,C[e++]=_+S*t,C[e++]=v+w*t,C[e++]=k}E+=m}}blockRenderChar(e,t,n,i,s,r,o,a){const l=1*this.scale,c=2*this.scale,u=a?1:c;if(t+l>e.width||n+u>e.height)return void console.warn("bad render request outside image data");const h=4*e.width,d=s/255*.5,f=r.r,g=r.g,p=r.b,m=f+(i.r-f)*d,b=g+(i.g-g)*d,_=p+(i.b-p)*d,v=Math.max(s,o),y=e.data;let S=n*h+4*t;for(let w=0;w<u;w++){let e=S;for(let t=0;t<l;t++)y[e++]=m,y[e++]=b,y[e++]=_,y[e++]=v;S+=h}}}const ZC={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},JC=e=>{const t=new Uint8ClampedArray(e.length/2);for(let n=0;n<e.length;n+=2)t[n>>1]=ZC[e[n]]<<4|15&ZC[e[n+1]];return t},ex={1:Ht((()=>JC("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792"))),2:Ht((()=>JC("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126")))};class tx{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return n=ex[e]?new XC(ex[e](),e):tx.createFromSampleData(tx.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="".concat(16,"px"),t.height=16,t.width=960,t.style.width="960px",n.fillStyle="#ffffff",n.font="bold ".concat(16,"px ",e),n.textBaseline="middle";let i=0;for(const s of QC)n.fillText(String.fromCharCode(s),i,8),i+=10;return n.getImageData(0,0,960,16)}static createFromSampleData(e,t){if(61440!==e.length)throw new Error("Unexpected source in MinimapCharRenderer");const n=tx._downsample(e,t);return new XC(n,t)}static _downsampleChar(e,t,n,i,s){const r=1*s,o=2*s;let a=i,l=0;for(let c=0;c<o;c++){const i=c/o*16,s=(c+1)/o*16;for(let o=0;o<r;o++){const c=o/r*10,u=(o+1)/r*10;let h=0,d=0;for(let n=i;n<s;n++){const i=t+3840*Math.floor(n),s=1-(n-Math.floor(n));for(let t=c;t<u;t++){const n=1-(t-Math.floor(t)),r=i+4*Math.floor(t),o=n*s;d+=o,h+=e[r]*e[r+3]/255*o}}const f=h/d;l=Math.max(l,f),n[a++]=df(f)}}return l}static _downsample(e,t){const n=2*t*1*t,i=96*n,s=new Uint8ClampedArray(i);let r=0,o=0,a=0;for(let l=0;l<96;l++)a=Math.max(a,this._downsampleChar(e,o,s,r,t)),r+=n,o+=40;if(a>0){const e=255/a;for(let t=0;t<i;t++)s[t]*=e}return s}}class nx{constructor(e,t,n){const i=e.options,s=i.get(141),r=i.get(143),o=r.minimap,a=i.get(50),l=i.get(72);this.renderMinimap=o.renderMinimap,this.size=l.size,this.minimapHeightIsEditorHeight=o.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=i.get(104),this.paddingTop=i.get(83).top,this.paddingBottom=i.get(83).bottom,this.showSlider=l.showSlider,this.autohide=l.autohide,this.pixelRatio=s,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.lineHeight=i.get(66),this.minimapLeft=o.minimapLeft,this.minimapWidth=o.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=o.minimapCanvasInnerWidth,this.canvasInnerHeight=o.minimapCanvasInnerHeight,this.canvasOuterWidth=o.minimapCanvasOuterWidth,this.canvasOuterHeight=o.minimapCanvasOuterHeight,this.isSampling=o.minimapIsSampling,this.editorHeight=r.height,this.fontScale=o.minimapScale,this.minimapLineHeight=o.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.charRenderer=Ht((()=>tx.create(this.fontScale,a.fontFamily))),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=nx._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=nx._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(Kv);return n?new GC(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(Gv);return t?GC._clamp(Math.round(255*t.rgba.a)):255}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class ix{constructor(e,t,n,i,s,r,o,a,l){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=i,this.sliderTop=s,this.sliderHeight=r,this.topPaddingLineCount=o,this.startLineNumber=a,this.endLineNumber=l}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumber,e.endLineNumber);return t>n?null:[t,n]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,n,i,s,r,o,a,l,c,u){const h=e.pixelRatio,d=e.minimapLineHeight,f=Math.floor(e.canvasInnerHeight/d),g=e.lineHeight;if(e.minimapHeightIsEditorHeight){let t=a*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(t+=Math.max(0,s-e.lineHeight-e.paddingBottom));const n=Math.max(1,Math.floor(s*s/t)),i=Math.max(0,e.minimapHeight-n),r=i/(c-s),u=l*r,h=i>0,d=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),f=Math.floor(e.paddingTop/e.lineHeight);return new ix(l,c,h,r,u,n,f,1,Math.min(o,d))}let p;if(r&&n!==o){const e=n-t+1;p=Math.floor(e*d/h)}else{const e=s/g;p=Math.floor(e*d/h)}const m=Math.floor(e.paddingTop/g);let b,_=Math.floor(e.paddingBottom/g);if(e.scrollBeyondLastLine){const e=s/g;_=Math.max(_,e-1)}if(_>0){b=(m+o+_-s/g-1)*d/h}else b=Math.max(0,(m+o)*d/h-p);b=Math.min(e.minimapHeight-p,b);const v=b/(c-s),y=l*v;if(f>=m+o+_){return new ix(l,c,b>0,v,y,p,m,1,o)}{let n,s;n=t>1?t+m:Math.max(1,l/g);let r=Math.max(1,Math.floor(n-y*h/d));r<m?(s=m-r+1,r=1):(s=0,r=Math.max(1,r-m)),u&&u.scrollHeight===c&&(u.scrollTop>l&&(r=Math.min(r,u.startLineNumber),s=Math.max(s,u.topPaddingLineCount)),u.scrollTop<l&&(r=Math.max(r,u.startLineNumber),s=Math.min(s,u.topPaddingLineCount)));const a=Math.min(o,r-s+f-1),b=(l-i)/g;let _;return _=l>=e.paddingTop?(t-r+s+b)*d/h:l/e.paddingTop*(s+b)*d/h,new ix(l,c,!0,v,_,p,s,r,a)}}}class sx{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}sx.INVALID=new sx(-1);class rx{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new oC((()=>sx.INVALID)),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const t=this._renderedLines._get().lines;for(let n=0,i=t.length;n<i;n++)if(-1===t[n].dy)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class ox{constructor(e,t,n,i){this._backgroundFillData=ox._createBackgroundFillData(t,n,i),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const i=n.r,s=n.g,r=n.b,o=n.a,a=new Uint8ClampedArray(e*t*4);let l=0;for(let c=0;c<t;c++)for(let t=0;t<e;t++)a[l]=i,a[l+1]=s,a[l+2]=r,a[l+3]=o,l+=4;return a}}class ax{static compute(e,t,n){if(0===e.renderMinimap||!e.isSampling)return[null,[]];const{minimapLineCount:i}=gt.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),s=t/i,r=s/2;if(!n||0===n.minimapLines.length){const e=[];if(e[0]=1,i>1){for(let t=0,n=i-1;t<n;t++)e[t]=Math.round(t*s+r);e[i-1]=t}return[new ax(s,e),[]]}const o=n.minimapLines,a=o.length,l=[];let c=0,u=0,h=1;let d=[],f=null;for(let g=0;g<i;g++){const e=Math.max(h,Math.round(g*s)),n=Math.max(e,Math.round((g+1)*s));for(;c<a&&o[c]<e;){if(d.length<10){const e=c+1+u;f&&"deleted"===f.type&&f._oldIndex===c-1?f.deleteToLineNumber++:(f={type:"deleted",_oldIndex:c,deleteFromLineNumber:e,deleteToLineNumber:e},d.push(f)),u--}c++}let p;if(c<a&&o[c]<=n)p=o[c],c++;else if(p=0===g?1:g+1===i?t:Math.round(g*s+r),d.length<10){const e=c+1+u;f&&"inserted"===f.type&&f._i===g-1?f.insertToLineNumber++:(f={type:"inserted",_i:g,insertFromLineNumber:e,insertToLineNumber:e},d.push(f)),u++}l[g]=p,h=p}if(d.length<10)for(;c<a;){const e=c+1+u;f&&"deleted"===f.type&&f._oldIndex===c-1?f.deleteToLineNumber++:(f={type:"deleted",_oldIndex:c,deleteFromLineNumber:e,deleteToLineNumber:e},d.push(f)),u--,c++}else d=[{type:"flush"}];return[new ax(s,l),d]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let i=this.modelLineToMinimapLine(t)-1;for(;i+1<this.minimapLines.length&&this.minimapLines[i+1]<=t;)i++;if(n===i){const i=this.minimapLines[n];if(i<e||i>t)return null}return[n+1,i+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),i=this.modelLineToMinimapLine(t);return e!==t&&i===n&&(i===this.minimapLines.length?n>1&&n--:i++),[n,i]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,i=0;for(let s=this.minimapLines.length-1;s>=0&&!(this.minimapLines[s]<e.fromLineNumber);s--)this.minimapLines[s]<=e.toLineNumber?(this.minimapLines[s]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,s),i=Math.max(i,s)):this.minimapLines[s]-=t;return[n,i]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class lx extends Sy{constructor(e){super(e),this.tokensColorTracker=YC.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new nx(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=ax.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new cx(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new nx(this._context.configuration,this._context.theme,this.tokensColorTracker);return!this.options.equals(e)&&(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return!!e.affectsMinimap&&this._actual.onDecorationsChanged()}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return!!t&&this._actual.onLinesChanged(t[0],t[1]-t[0]+1)}return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n-t+1),this._shouldCheckSampling=!0,!0}return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const n of e.ranges){const e=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);e&&t.push({fromLineNumber:e[0],toLineNumber:e[1]})}return!!t.length&&this._actual.onTokensChanged(t)}return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const i={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(i)}_recreateLineSampling(){this._minimapSelections=null;const e=Boolean(this._samplingState),[t,n]=ax.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const i of n)switch(i.type){case"deleted":this._actual.onLinesDeleted(i.deleteFromLineNumber,i.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(i.insertFromLineNumber,i.insertToLineNumber);break;case"flush":this._actual.onFlushed()}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){const i=[];for(let s=0,r=t-e+1;s<r;s++)n[s]?i[s]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+s-1]):i[s]=null;return i}return this._context.viewModel.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(null===this._minimapSelections)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new Ei(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const i=this._samplingState.minimapLines[e-1],s=this._samplingState.minimapLines[t-1];n=new xi(i,1,s,this._context.viewModel.getLineMaxColumn(s))}else n=new xi(e,1,t,this._context.viewModel.getLineMaxColumn(t));const i=this._context.viewModel.getMinimapDecorationsInRange(n);if(this._samplingState){const e=[];for(const t of i){if(!t.options.minimap)continue;const n=t.range,i=this._samplingState.modelLineToMinimapLine(n.startLineNumber),s=this._samplingState.modelLineToMinimapLine(n.endLineNumber);e.push(new om(new xi(i,n.startColumn,s,n.endColumn),t.options))}return e}return i}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new xi(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class cx extends Zt{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(Vv),this._domNode=Kr(document.createElement("div")),wy.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Kr(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Kr(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Kr(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Kr(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Kr(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=Hc(this._domNode.domNode,ku.POINTER_DOWN,(e=>{e.preventDefault();if(0===this._model.options.renderMinimap)return;if(!this._lastRenderData)return;if("proportional"!==this._model.options.size){if(0===e.button&&this._lastRenderData){const t=Zc(this._slider.domNode),n=t.top+t.height/2;this._startSliderDragging(e,n,this._lastRenderData.renderedLayout)}return}const t=this._model.options.minimapLineHeight,n=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*e.offsetY;let i=Math.floor(n/t)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;i=Math.min(i,this._model.getLineCount()),this._model.revealLineNumber(i)})),this._sliderPointerMoveMonitor=new cb,this._sliderPointerDownListener=Hc(this._slider.domNode,ku.POINTER_DOWN,(e=>{e.preventDefault(),e.stopPropagation(),0===e.button&&this._lastRenderData&&this._startSliderDragging(e,e.pageY,this._lastRenderData.renderedLayout)})),this._gestureDisposable=cS.addTarget(this._domNode.domNode),this._sliderTouchStartListener=zc(this._domNode.domNode,aS.Start,(e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(e))}),{passive:!1}),this._sliderTouchMoveListener=zc(this._domNode.domNode,aS.Change,(e=>{e.preventDefault(),e.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(e)}),{passive:!1}),this._sliderTouchEndListener=Hc(this._domNode.domNode,aS.End,(e=>{e.preventDefault(),e.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)}))}_startSliderDragging(e,t,n){if(!e.target||!(e.target instanceof Element))return;const i=e.pageX;this._slider.toggleClassName("active",!0);const s=(e,s)=>{const r=Zc(this._domNode.domNode),o=Math.min(Math.abs(s-i),Math.abs(s-r.left),Math.abs(s-r.left-r.width));if(be&&o>140)return void this._model.setScrollTop(n.scrollTop);const a=e-t;this._model.setScrollTop(n.getDesiredScrollTopFromDelta(a))};e.pageY!==t&&s(e.pageY,i),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,(e=>s(e.pageY,e.pageX)),(()=>{this._slider.toggleClassName("active",!1)}))}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return"always"===this._model.options.showSlider?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new ox(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return!!this._lastRenderData&&this._lastRenderData.onLinesChanged(e,t)}onLinesDeleted(e,t){var n;return null===(n=this._lastRenderData)||void 0===n||n.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var n;return null===(n=this._lastRenderData)||void 0===n||n.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(Vv),this._renderDecorations=!0,!0}onTokensChanged(e){return!!this._lastRenderData&&this._lastRenderData.onTokensChanged(e)}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(0===this._model.options.renderMinimap)return this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),void this._sliderHorizontal.setHeight(0);e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const t=ix.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(t.sliderNeeded?"block":"none"),this._slider.setTop(t.sliderTop),this._slider.setHeight(t.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(t.sliderHeight),this.renderDecorations(t),this._lastRenderData=this.renderLines(t)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(xi.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort(((e,t)=>(e.options.zIndex||0)-(t.options.zIndex||0)));const{canvasInnerWidth:i,canvasInnerHeight:s}=this._model.options,r=this._model.options.minimapLineHeight,o=this._model.options.minimapCharWidth,a=this._model.getOptions().tabSize,l=this._decorationsCanvas.domNode.getContext("2d");l.clearRect(0,0,i,s);const c=new ux(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(l,t,c,e,r),this._renderDecorationsLineHighlights(l,n,c,e,r);const u=new ux(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(l,t,u,e,r,a,o,i),this._renderDecorationsHighlights(l,n,u,e,r,a,o,i)}}_renderSelectionLineHighlights(e,t,n,i,s){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let r=0,o=0;for(const a of t){const t=i.intersectWithViewport(a);if(!t)continue;const[l,c]=t;for(let e=l;e<=c;e++)n.set(e,!0);const u=i.getYForLineNumber(l,s),h=i.getYForLineNumber(c,s);o>=u||(o>r&&e.fillRect(8,r,e.canvas.width,o-r),r=u),o=h}o>r&&e.fillRect(8,r,e.canvas.width,o-r)}_renderDecorationsLineHighlights(e,t,n,i,s){const r=new Map;for(let o=t.length-1;o>=0;o--){const a=t[o],l=a.options.minimap;if(!l||l.position!==Af.Inline)continue;const c=i.intersectWithViewport(a.range);if(!c)continue;const[u,h]=c,d=l.getColor(this._theme.value);if(!d||d.isTransparent())continue;let f=r.get(d.toString());f||(f=d.transparent(.5).toString(),r.set(d.toString(),f)),e.fillStyle=f;for(let t=u;t<=h;t++){if(n.has(t))continue;n.set(t,!0);const r=i.getYForLineNumber(u,s);e.fillRect(8,r,e.canvas.width,s)}}}_renderSelectionsHighlights(e,t,n,i,s,r,o,a){if(this._selectionColor&&!this._selectionColor.isTransparent())for(const l of t){const t=i.intersectWithViewport(l);if(!t)continue;const[c,u]=t;for(let h=c;h<=u;h++)this.renderDecorationOnLine(e,n,l,this._selectionColor,i,h,s,s,r,o,a)}}_renderDecorationsHighlights(e,t,n,i,s,r,o,a){for(const l of t){const t=l.options.minimap;if(!t)continue;const c=i.intersectWithViewport(l.range);if(!c)continue;const[u,h]=c,d=t.getColor(this._theme.value);if(d&&!d.isTransparent())for(let f=u;f<=h;f++)switch(t.position){case Af.Inline:this.renderDecorationOnLine(e,n,l.range,d,i,f,s,s,r,o,a);continue;case Af.Gutter:{const t=i.getYForLineNumber(f,s),n=2;this.renderDecoration(e,d,n,t,2,s);continue}}}}renderDecorationOnLine(e,t,n,i,s,r,o,a,l,c,u){const h=s.getYForLineNumber(r,a);if(h+o<0||h>this._model.options.canvasInnerHeight)return;const{startLineNumber:d,endLineNumber:f}=n,g=d===r?n.startColumn:1,p=f===r?n.endColumn:this._model.getLineMaxColumn(r),m=this.getXOffsetForPosition(t,r,g,l,c,u),b=this.getXOffsetForPosition(t,r,p,l,c,u);this.renderDecoration(e,i,m,h,b-m,o)}getXOffsetForPosition(e,t,n,i,s,r){if(1===n)return 8;if((n-1)*s>=r)return r;let o=e.get(t);if(!o){const n=this._model.getLineContent(t);o=[8];let a=8;for(let e=1;e<n.length+1;e++){const t=n.charCodeAt(e-1),l=a+(9===t?i*s:Sr(t)?2*s:s);if(l>=r){o[e]=r;break}o[e]=l,a=l}e.set(t,o)}return n-1<o.length?o[n-1]:r}renderDecoration(e,t,n,i,s,r){e.fillStyle=t&&t.toString()||"",e.fillRect(n,i,s,r)}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,i=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const t=this._lastRenderData._get();return new rx(e,t.imageData,t.lines)}const s=this._getBuffer();if(!s)return null;const[r,o,a]=cx._renderUntouchedLines(s,e.topPaddingLineCount,t,n,i,this._lastRenderData),l=this._model.getMinimapLinesRenderingData(t,n,a),c=this._model.getOptions().tabSize,u=this._model.options.defaultBackgroundColor,h=this._model.options.backgroundColor,d=this._model.options.foregroundAlpha,f=this._model.tokensColorTracker,g=f.backgroundIsLight(),p=this._model.options.renderMinimap,m=this._model.options.charRenderer(),b=this._model.options.fontScale,_=this._model.options.minimapCharWidth,v=(1===p?2:3)*b,y=i>v?Math.floor((i-v)/2):0,S=h.a/255,w=new GC(Math.round((h.r-u.r)*S+u.r),Math.round((h.g-u.g)*S+u.g),Math.round((h.b-u.b)*S+u.b),255);let k=e.topPaddingLineCount*i;const C=[];for(let L=0,D=n-t+1;L<D;L++)a[L]&&cx._renderLine(s,w,h.a,g,p,_,f,d,m,k,y,c,l[L],b,i),C[L]=new sx(k),k+=i;const x=-1===r?0:r,E=(-1===o?s.height:o)-x;return this._canvas.domNode.getContext("2d").putImageData(s,0,0,0,x,s.width,E),new rx(e,s,C)}static _renderUntouchedLines(e,t,n,i,s,r){const o=[];if(!r){for(let e=0,t=i-n+1;e<t;e++)o[e]=!0;return[-1,-1,o]}const a=r._get(),l=a.imageData.data,c=a.rendLineNumberStart,u=a.lines,h=u.length,d=e.width,f=e.data,g=(i-n+1)*s*d*4;let p=-1,m=-1,b=-1,_=-1,v=-1,y=-1,S=t*s;for(let w=n;w<=i;w++){const e=w-n,t=w-c,i=t>=0&&t<h?u[t].dy:-1;if(-1===i){o[e]=!0,S+=s;continue}const r=i*d*4,a=(i+s)*d*4,k=S*d*4,C=(S+s)*d*4;_===r&&y===k?(_=a,y=C):(-1!==b&&(f.set(l.subarray(b,_),v),-1===p&&0===b&&b===v&&(p=_),-1===m&&_===g&&b===v&&(m=b)),b=r,_=a,v=k,y=C),o[e]=!1,S+=s}-1!==b&&(f.set(l.subarray(b,_),v),-1===p&&0===b&&b===v&&(p=_),-1===m&&_===g&&b===v&&(m=b));return[-1===p?-1:p/(4*d),-1===m?-1:m/(4*d),o]}static _renderLine(e,t,n,i,s,r,o,a,l,c,u,h,d,f,g){const p=d.content,m=d.tokens,b=e.width-r,_=1===g;let v=8,y=0,S=0;for(let w=0,k=m.getCount();w<k;w++){const d=m.getEndOffset(w),g=m.getForeground(w),k=o.getColor(g);for(;y<d;y++){if(v>b)return;const o=p.charCodeAt(y);if(9===o){const e=h-(y+S)%h;S+=e-1,v+=e*r}else if(32===o)v+=r;else{const h=Sr(o)?2:1;for(let d=0;d<h;d++)if(2===s?l.blockRenderChar(e,v,c+u,k,a,t,n,_):l.renderChar(e,v,c+u,o,k,a,t,n,f,i,_),v+=r,v>b)return}}}}}class ux{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let i=0,s=this._endLineNumber-this._startLineNumber+1;i<s;i++)this._values[i]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class hx extends Sy{constructor(e,t){super(e),this._viewDomNode=t;const n=this._context.configuration.options.get(143);this._widgets={},this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=Kr(document.createElement("div")),wy.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=Kr(document.createElement("div")),wy.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options.get(143);return this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,!0}addWidget(e){const t=Kr(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference===t?(this._updateMaxMinWidth(),!1):(n.preference=t,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const e=this._widgets[t].domNode.domNode;delete this._widgets[t],e.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var e,t;let n=0;const i=Object.keys(this._widgets);for(let s=0,r=i.length;s<r;s++){const r=i[s],o=null===(t=(e=this._widgets[r].widget).getMinContentWidthInPx)||void 0===t?void 0:t.call(e);"undefined"!==typeof o&&(n=Math.max(n,o))}this._context.viewLayout.setOverlayWidgetsMinWidth(n)}_renderWidget(e){const t=e.domNode;if(null!==e.preference)if(0===e.preference)t.setTop(0),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth);else if(1===e.preference){const e=t.domNode.clientHeight;t.setTop(this._editorHeight-e-2*this._horizontalScrollbarHeight),t.setRight(2*this._verticalScrollbarWidth+this._minimapWidth)}else if(2===e.preference)t.setTop(0),t.domNode.style.right="50%";else{const{top:n,left:i}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){const e=this._viewDomNodeRect;t.setTop(n+e.top),t.setLeft(i+e.left),t.setPosition("fixed")}else t.setTop(n),t.setLeft(i),t.setPosition("absolute")}else t.setTop("")}prepareRender(e){this._viewDomNodeRect=Zc(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets);for(let n=0,i=t.length;n<i;n++){const e=t[n];this._renderWidget(this._widgets[e])}}}class dx{constructor(e,t){const n=e.options;this.lineHeight=n.get(66),this.pixelRatio=n.get(141),this.overviewRulerLanes=n.get(82),this.renderBorder=n.get(81);const i=t.getColor(xw);this.borderColor=i?i.toString():null,this.hideCursor=n.get(59);const s=t.getColor(rw);this.cursorColor=s?s.transparent(.7).toString():null,this.themeType=t.type;const r=n.get(72),o=r.enabled,a=r.side,l=t.getColor(Ew),c=Ui.getDefaultBackground();this.backgroundColor=l||(o&&"right"===a?c:null);const u=n.get(143).overviewRuler;this.top=u.top,this.right=u.right,this.domWidth=u.width,this.domHeight=u.height,0===this.overviewRulerLanes?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[h,d]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=h,this.w=d}_initLanes(e,t,n){const i=t-e;if(n>=3){const t=Math.floor(i/3),n=Math.floor(i/3),s=i-t-n,r=e+t;return[[0,e,r,e,e+t+s,e,r,e],[0,t,s,t+s,n,t+s+n,s+n,t+s+n]]}if(2===n){const t=Math.floor(i/2),n=i-t;return[[0,e,e,e,e+t,e,e,e],[0,t,t,t,n,t+n,t+n,t+n]]}return[[0,e,e,e,e,e,e,e],[0,i,i,i,i,i,i,i]]}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColor===e.cursorColor&&this.themeType===e.themeType&&rp.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class fx extends Sy{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=Kr(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Ui.onDidChange((e=>{e.changedColorMap&&this._updateSettings(!0)})),this._cursorPositions=[]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new dx(this._context.configuration,this._context.theme);return(!this._settings||!this._settings.equals(t))&&(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++)this._cursorPositions[t]=e.selections[t].getPosition();return this._cursorPositions.sort(Ci.compare),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return!!e.affectsOverviewRuler&&this._markRenderingIsMaybeNeeded()}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return!!e.scrollHeightChanged&&this._markRenderingIsNeeded()}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(0===this._settings.overviewRulerLanes)return this._domNode.setBackgroundColor(e?rp.Format.CSS.formatHexA(e):""),void this._domNode.setDisplay("none");const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(am.compareByRenderingProps),1!==this._actualShouldRender||am.equalsArr(this._renderedDecorations,t)||(this._actualShouldRender=2),1!==this._actualShouldRender||a(this._renderedCursorPositions,this._cursorPositions,((e,t)=>e.lineNumber===t.lineNumber))||(this._actualShouldRender=2),1===this._actualShouldRender)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const n=this._settings.canvasWidth,i=this._settings.canvasHeight,s=this._settings.lineHeight,r=this._context.viewLayout,o=i/this._context.viewLayout.getScrollHeight(),l=6*this._settings.pixelRatio|0,c=l/2|0,u=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(u.fillStyle=rp.Format.CSS.formatHexA(e),u.fillRect(0,0,n,i)):(u.clearRect(0,0,n,i),u.fillStyle=rp.Format.CSS.formatHexA(e),u.fillRect(0,0,n,i)):u.clearRect(0,0,n,i);const h=this._settings.x,d=this._settings.w;for(const a of t){const e=a.color,t=a.data;u.fillStyle=e;let n=0,f=0,g=0;for(let a=0,p=t.length/3;a<p;a++){const e=t[3*a],p=t[3*a+1],m=t[3*a+2];let b=r.getVerticalOffsetForLineNumber(p)*o|0,_=(r.getVerticalOffsetForLineNumber(m)+s)*o|0;if(_-b<l){let e=(b+_)/2|0;e<c?e=c:e+c>i&&(e=i-c),b=e-c,_=e+c}b>g+1||e!==n?(0!==a&&u.fillRect(h[n],f,d[n],g-f),n=e,f=b,g=_):_>g&&(g=_)}u.fillRect(h[n],f,d[n],g-f)}if(!this._settings.hideCursor&&this._settings.cursorColor){const e=2*this._settings.pixelRatio|0,t=e/2|0,n=this._settings.x[7],s=this._settings.w[7];u.fillStyle=this._settings.cursorColor;let a=-100,l=-100;for(let c=0,h=this._cursorPositions.length;c<h;c++){const h=this._cursorPositions[c];let d=r.getVerticalOffsetForLineNumber(h.lineNumber)*o|0;d<t?d=t:d+t>i&&(d=i-t);const f=d-t,g=f+e;f>l+1?(0!==c&&u.fillRect(n,a,s,l-a),a=f,l=g):g>l&&(l=g)}u.fillRect(n,a,s,l-a)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(u.beginPath(),u.lineWidth=1,u.strokeStyle=this._settings.borderColor,u.moveTo(0,0),u.lineTo(0,i),u.stroke(),u.moveTo(0,0),u.lineTo(n,0),u.stroke())}}class gx{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=0|e,this.to=0|t,this.colorId=0|n}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class px{constructor(e,t,n,i){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=n,this.color=i,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class mx{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(px.compare)}setLineHeight(e){return this._lineHeight!==e&&(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth!==e&&(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight!==e&&(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight!==e&&(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),i=n/Math.floor(this._outerHeight),s=Math.floor(4*this._pixelRatio/2),r=[];for(let o=0,a=this._zones.length;o<a;o++){const a=this._zones[o];if(!e){const e=a.getColorZones();if(e){r.push(e);continue}}const l=this._getVerticalOffsetForLine(a.startLineNumber),c=0===a.heightInLines?this._getVerticalOffsetForLine(a.endLineNumber)+t:l+a.heightInLines*t,u=Math.floor(i*l),h=Math.floor(i*c);let d=Math.floor((u+h)/2),f=h-d;f<s&&(f=s),d-f<0&&(d=f),d+f>n&&(d=n-f);const g=a.color;let p=this._color2Id[g];p||(p=++this._lastAssignedId,this._color2Id[g]=p,this._id2Color[p]=g);const m=new gx(d-f,d+f,p);a.setColorZone(m),r.push(m)}return this._colorZonesInvalid=!1,r.sort(gx.compare),r}}class bx extends yy{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=Kr(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new mx((e=>this._context.viewLayout.getVerticalOffsetForLineNumber(e))),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(66)),this._zoneManager.setPixelRatio(n.get(141)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(66)&&(this._zoneManager.setLineHeight(t.get(66)),this._render()),e.hasChanged(141)&&(this._zoneManager.setPixelRatio(t.get(141)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(0===this._zoneManager.getOuterHeight())return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),i=this._zoneManager.getId2Color(),s=this._domNode.domNode.getContext("2d");return s.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(s,n,i,e),!0}_renderOneLane(e,t,n,i){let s=0,r=0,o=0;for(const a of t){const t=a.colorId,l=a.from,c=a.to;t!==s?(e.fillRect(0,r,i,o-r),s=t,e.fillStyle=n[s],r=l,o=c):o>=l?o=Math.max(o,c):(e.fillRect(0,r,i,o-r),r=l,o=c)}e.fillRect(0,r,i,o-r)}}class _x extends Sy{constructor(e){super(e),this.domNode=Kr(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(101),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(101),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:n}=this._context.viewModel.model.getOptions(),i=n;let s=t-e;for(;s>0;){const e=Kr(document.createElement("div"));e.setClassName("view-ruler"),e.setWidth(i),this.domNode.appendChild(e),this._renderedRulers.push(e),s--}return}let n=e-t;for(;n>0;){const e=this._renderedRulers.pop();this.domNode.removeChild(e),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const n=this._renderedRulers[t],i=this._rulers[t];n.setBoxShadow(i.color?"1px 0 0 0 ".concat(i.color," inset"):""),n.setHeight(Math.min(e.scrollHeight,1e6)),n.setLeft(i.column*this._typicalHalfwidthCharacterWidth)}}}class vx extends Sy{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const t=this._context.configuration.options.get(102);this._useShadows=t.useShadows,this._domNode=Kr(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e&&(this._shouldShow=e,!0)}getDomNode(){return this._domNode}_updateWidth(){const e=this._context.configuration.options.get(143);0===e.minimap.renderMinimap||e.minimap.minimapWidth>0&&0===e.minimap.minimapLeft?this._width=e.width:this._width=e.width-e.verticalScrollbarWidth}onConfigurationChanged(e){const t=this._context.configuration.options.get(102);return this._useShadows=t.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class yx{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class Sx{constructor(e,t){this.lineNumber=e,this.ranges=t}}function wx(e){return new yx(e)}function kx(e){return new Sx(e.lineNumber,e.ranges.map(wx))}class Cx extends YS{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._lineHeight=t.get(66),this._roundedSelection=t.get(100),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._lineHeight=t.get(66),this._roundedSelection=t.get(100),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++){if(e[t].ranges.length>1)return!0}return!1}_enrichVisibleRangesWithStyle(e,t,n){const i=this._typicalHalfwidthCharacterWidth/4;let s=null,r=null;if(n&&n.length>0&&t.length>0){const i=t[0].lineNumber;if(i===e.startLineNumber)for(let e=0;!s&&e<n.length;e++)n[e].lineNumber===i&&(s=n[e].ranges[0]);const o=t[t.length-1].lineNumber;if(o===e.endLineNumber)for(let e=n.length-1;!r&&e>=0;e--)n[e].lineNumber===o&&(r=n[e].ranges[0]);s&&!s.startStyle&&(s=null),r&&!r.startStyle&&(r=null)}for(let o=0,a=t.length;o<a;o++){const e=t[o].ranges[0],n=e.left,l=e.left+e.width,c={top:0,bottom:0},u={top:0,bottom:0};if(o>0){const e=t[o-1].ranges[0].left,s=t[o-1].ranges[0].left+t[o-1].ranges[0].width;xx(n-e)<i?c.top=2:n>e&&(c.top=1),xx(l-s)<i?u.top=2:e<l&&l<s&&(u.top=1)}else s&&(c.top=s.startStyle.top,u.top=s.endStyle.top);if(o+1<a){const e=t[o+1].ranges[0].left,s=t[o+1].ranges[0].left+t[o+1].ranges[0].width;xx(n-e)<i?c.bottom=2:e<n&&n<s&&(c.bottom=1),xx(l-s)<i?u.bottom=2:l<s&&(u.bottom=1)}else r&&(c.bottom=r.startStyle.bottom,u.bottom=r.endStyle.bottom);e.startStyle=c,e.endStyle=u}}_getVisibleRangesWithStyle(e,t,n){const i=(t.linesVisibleRangesForRange(e,!0)||[]).map(kx);return!this._visibleRangesHaveGaps(i)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,i,n),i}_createSelectionPiece(e,t,n,i,s){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;left:"+i.toString()+"px;width:"+s.toString()+"px;height:"+t+'px;"></div>'}_actualRenderOneSelection(e,t,n,i){if(0===i.length)return;const s=!!i[0].ranges[0].startStyle,r=this._lineHeight.toString(),o=(this._lineHeight-1).toString(),a=i[0].lineNumber,l=i[i.length-1].lineNumber;for(let c=0,u=i.length;c<u;c++){const u=i[c],h=u.lineNumber,d=h-t,f=n&&(h===l||h===a)?o:r,g=n&&h===a?1:0;let p="",m="";for(let e=0,t=u.ranges.length;e<t;e++){const t=u.ranges[e];if(s){const e=t.startStyle,n=t.endStyle;if(1===e.top||1===e.bottom){p+=this._createSelectionPiece(g,f,Cx.SELECTION_CLASS_NAME,t.left-Cx.ROUNDED_PIECE_WIDTH,Cx.ROUNDED_PIECE_WIDTH);let n=Cx.EDITOR_BACKGROUND_CLASS_NAME;1===e.top&&(n+=" "+Cx.SELECTION_TOP_RIGHT),1===e.bottom&&(n+=" "+Cx.SELECTION_BOTTOM_RIGHT),p+=this._createSelectionPiece(g,f,n,t.left-Cx.ROUNDED_PIECE_WIDTH,Cx.ROUNDED_PIECE_WIDTH)}if(1===n.top||1===n.bottom){p+=this._createSelectionPiece(g,f,Cx.SELECTION_CLASS_NAME,t.left+t.width,Cx.ROUNDED_PIECE_WIDTH);let e=Cx.EDITOR_BACKGROUND_CLASS_NAME;1===n.top&&(e+=" "+Cx.SELECTION_TOP_LEFT),1===n.bottom&&(e+=" "+Cx.SELECTION_BOTTOM_LEFT),p+=this._createSelectionPiece(g,f,e,t.left+t.width,Cx.ROUNDED_PIECE_WIDTH)}}let n=Cx.SELECTION_CLASS_NAME;if(s){const e=t.startStyle,i=t.endStyle;0===e.top&&(n+=" "+Cx.SELECTION_TOP_LEFT),0===e.bottom&&(n+=" "+Cx.SELECTION_BOTTOM_LEFT),0===i.top&&(n+=" "+Cx.SELECTION_TOP_RIGHT),0===i.bottom&&(n+=" "+Cx.SELECTION_BOTTOM_RIGHT)}m+=this._createSelectionPiece(g,f,n,t.left,t.width)}e[d][0]+=p,e[d][1]+=m}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;for(let r=n;r<=i;r++){t[r-n]=["",""]}const s=[];for(let r=0,o=this._selections.length;r<o;r++){const i=this._selections[r];if(i.isEmpty()){s[r]=null;continue}const o=this._getVisibleRangesWithStyle(i,e,this._previousFrameVisibleRangesWithStyle[r]);s[r]=o,this._actualRenderOneSelection(t,n,this._selections.length>1,o)}this._previousFrameVisibleRangesWithStyle=s,this._renderResult=t.map((e=>{let[t,n]=e;return t+n}))}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function xx(e){return e<0?-e:e}Cx.SELECTION_CLASS_NAME="selected-text",Cx.SELECTION_TOP_LEFT="top-left-radius",Cx.SELECTION_BOTTOM_LEFT="bottom-left-radius",Cx.SELECTION_TOP_RIGHT="top-right-radius",Cx.SELECTION_BOTTOM_RIGHT="bottom-right-radius",Cx.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",Cx.ROUNDED_PIECE_WIDTH=10,tw(((e,t)=>{const n=e.getColor(x_);n&&!n.isTransparent()&&t.addRule(".monaco-editor .view-line span.inline-selected-text { color: ".concat(n,"; }"))}));class Ex{constructor(e,t,n,i,s,r,o){this.top=e,this.left=t,this.paddingLeft=n,this.width=i,this.height=s,this.textContent=r,this.textContentClassName=o}}class Lx{constructor(e){this._context=e;const t=this._context.configuration.options,n=t.get(50);this._cursorStyle=t.get(28),this._lineHeight=t.get(66),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Kr(document.createElement("div")),this._domNode.setClassName("cursor ".concat(Jw)),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Gr(this._domNode,n),this._domNode.setDisplay("none"),this._position=new Ci(1,1),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(66),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),Gr(this._domNode,n),!0}onCursorPositionChanged(e,t){return this._domNode.domNode.style.transitionProperty=t?"none":"",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,n=this._context.viewModel.getLineContent(e),[i,s]=function(e,t){t>0&&lr(e.charCodeAt(t))&&t--;const n=t+fr(e,t);return[n-gr(e,n),n]}(n,t-1);return[new Ci(e,i+1),n.substring(i,s)]}_prepareRender(e){let t="",n="";const[i,s]=this._getGraphemeAwarePosition();if(this._cursorStyle===ct.Line||this._cursorStyle===ct.LineThin){const r=e.visibleRangeForPosition(i);if(!r||r.outsideRenderedLine)return null;const o=Dc(this._domNode.domNode);let a;this._cursorStyle===ct.Line?(a=Pu(o,this._lineCursorWidth>0?this._lineCursorWidth:2),a>2&&(t=s,n=this._getTokenClassName(i))):a=Pu(o,1);let l=r.left,c=0;a>=2&&l>=1&&(c=1,l-=c);const u=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.bigNumbersDelta;return new Ex(u,l,c,a,this._lineHeight,t,n)}const r=e.linesVisibleRangesForRange(new xi(i.lineNumber,i.column,i.lineNumber,i.column+s.length),!1);if(!r||0===r.length)return null;const o=r[0];if(o.outsideRenderedLine||0===o.ranges.length)return null;const a=o.ranges[0],l="\t"===s||a.width<1?this._typicalHalfwidthCharacterWidth:a.width;this._cursorStyle===ct.Block&&(t=s,n=this._getTokenClassName(i));let c=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.bigNumbersDelta,u=this._lineHeight;return this._cursorStyle!==ct.Underline&&this._cursorStyle!==ct.UnderlineThin||(c+=this._lineHeight-2,u=2),new Ex(c,a.left,0,l,u,t,n)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),n=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(n)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName("cursor ".concat(Jw," ").concat(this._renderData.textContentClassName)),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}class Dx extends Sy{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(90),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new Lx(this._context),this._secondaryCursors=[],this._renderData=[],this._domNode=Kr(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new sl,this._cursorFlatBlinkInterval=new qc,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(90),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,i=this._secondaryCursors.length;n<i;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,n){const i=this._secondaryCursors.length!==t.length||"explicit"===this._cursorSmoothCaretAnimation&&3!==n;if(this._primaryCursor.onCursorPositionChanged(e,i),this._updateBlinking(),this._secondaryCursors.length<t.length){const e=t.length-this._secondaryCursors.length;for(let t=0;t<e;t++){const e=new Lx(this._context);this._domNode.domNode.insertBefore(e.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(e)}}else if(this._secondaryCursors.length>t.length){const e=this._secondaryCursors.length-t.length;for(let t=0;t<e;t++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let s=0;s<t.length;s++)this._secondaryCursors[s].onCursorPositionChanged(t[s],i)}onCursorStateChanged(e){const t=[];for(let i=0,s=e.selections.length;i<s;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=t=>{for(let n=0,i=e.ranges.length;n<i;n++)if(e.ranges[n].fromLineNumber<=t.lineNumber&&t.lineNumber<=e.ranges[n].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput?0:this._editorHasFocus?this._readOnly?5:this._cursorBlinking:0}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=0===e,n=5===e;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),t||n||(1===e?this._cursorFlatBlinkInterval.cancelAndSet((()=>{this._isVisible?this._hide():this._show()}),Dx.BLINK_INTERVAL,Dc(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet((()=>{this._blinkingEnabled=!0,this._updateDomClassName()}),Dx.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case ct.Line:e+=" cursor-line-style";break;case ct.Block:e+=" cursor-block-style";break;case ct.Underline:e+=" cursor-underline-style";break;case ct.LineThin:e+=" cursor-line-thin-style";break;case ct.BlockOutline:e+=" cursor-block-outline-style";break;case ct.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return"on"!==this._cursorSmoothCaretAnimation&&"explicit"!==this._cursorSmoothCaretAnimation||(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let n=0;const i=this._primaryCursor.render(e);i&&(t[n++]=i);for(let s=0,r=this._secondaryCursors.length;s<r;s++){const i=this._secondaryCursors[s].render(e);i&&(t[n++]=i)}this._renderData=t}getLastRenderData(){return this._renderData}}Dx.BLINK_INTERVAL=500,tw(((e,t)=>{const n=e.getColor(rw);if(n){let i=e.getColor(ow);i||(i=n.opposite()),t.addRule(".monaco-editor .cursors-layer .cursor { background-color: ".concat(n,"; border-color: ").concat(n,"; color: ").concat(i,"; }")),Iy(e.type)&&t.addRule(".monaco-editor .cursors-layer.has-selection .cursor { border-left: 1px solid ".concat(i,"; border-right: 1px solid ").concat(i,"; }"))}}));const Ax=()=>{throw new Error("Invalid change accessor")};class Tx extends Sy{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(143);this._lineHeight=t.get(66),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=Kr(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Kr(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const i of e)t.set(i.id,i);let n=!1;return this._context.viewModel.changeWhitespace((e=>{const i=Object.keys(this._zones);for(let s=0,r=i.length;s<r;s++){const r=i[s],o=this._zones[r],a=this._computeWhitespaceProps(o.delegate);o.isInHiddenArea=a.isInHiddenArea;const l=t.get(r);!l||l.afterLineNumber===a.afterViewLineNumber&&l.height===a.heightInPx||(e.changeOneWhitespace(r,a.afterViewLineNumber,a.heightInPx),this._safeCallOnComputedHeight(o.delegate,a.heightInPx),n=!0)}})),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(143);return this._lineHeight=t.get(66),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(66)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){var t,n;return null!==(n=null!==(t=e.ordinal)&&void 0!==t?t:e.afterColumn)&&void 0!==n?n:1e4}_computeWhitespaceProps(e){if(0===e.afterLineNumber)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t,n;if("undefined"!==typeof e.afterColumn)t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const n=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new Ci(n,this._context.viewModel.model.getLineMaxColumn(n))}n=t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),s=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!s,afterViewLineNumber:i.lineNumber,heightInPx:s?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace((n=>{const i={addZone:e=>(t=!0,this._addZone(n,e)),removeZone:e=>{e&&(t=this._removeZone(n,e)||t)},layoutZone:e=>{e&&(t=this._layoutZone(n,e)||t)}};!function(e,t){try{return e(t)}catch(zY){Nt(zY)}}(e,i),i.addZone=Ax,i.removeZone=Ax,i.layoutZone=Ax})),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),i={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:Kr(t.domNode),marginDomNode:t.marginDomNode?Kr(t.marginDomNode):null};return this._safeCallOnComputedHeight(i.delegate,n.heightInPx),i.domNode.setPosition("absolute"),i.domNode.domNode.style.width="100%",i.domNode.setDisplay("none"),i.domNode.setAttribute("monaco-view-zone",i.whitespaceId),this.domNode.appendChild(i.domNode),i.marginDomNode&&(i.marginDomNode.setPosition("absolute"),i.marginDomNode.domNode.style.width="100%",i.marginDomNode.setDisplay("none"),i.marginDomNode.setAttribute("monaco-view-zone",i.whitespaceId),this.marginDomNode.appendChild(i.marginDomNode)),this._zones[i.whitespaceId]=i,this.setShouldRender(),i.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.parentNode.removeChild(n.domNode.domNode),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.parentNode.removeChild(n.marginDomNode.domNode)),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],i=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=i.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,i.afterViewLineNumber,i.heightInPx),this._safeCallOnComputedHeight(n.delegate,i.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){if(this._zones.hasOwnProperty(e)){const t=this._zones[e];return Boolean(t.delegate.suppressMouseDown)}return!1}_heightInPixels(e){return"number"===typeof e.heightInPx?e.heightInPx:"number"===typeof e.heightInLines?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return"number"===typeof e.minWidthInPx?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if("function"===typeof e.onComputedHeight)try{e.onComputedHeight(t)}catch(zY){Nt(zY)}}_safeCallOnDomNodeTop(e,t){if("function"===typeof e.onDomNodeTop)try{e.onDomNodeTop(t)}catch(zY){Nt(zY)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let i=!1;for(const r of t)this._zones[r.id].isInHiddenArea||(n[r.id]=r,i=!0);const s=Object.keys(this._zones);for(let r=0,o=s.length;r<o;r++){const t=s[r],i=this._zones[t];let o=0,a=0,l="none";n.hasOwnProperty(t)?(o=n[t].verticalOffset-e.bigNumbersDelta,a=n[t].height,l="block",i.isVisible||(i.domNode.setAttribute("monaco-visible-view-zone","true"),i.isVisible=!0),this._safeCallOnDomNodeTop(i.delegate,e.getScrolledTopFromAbsoluteTop(n[t].verticalOffset))):(i.isVisible&&(i.domNode.removeAttribute("monaco-visible-view-zone"),i.isVisible=!1),this._safeCallOnDomNodeTop(i.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),i.domNode.setTop(o),i.domNode.setHeight(a),i.domNode.setDisplay(l),i.marginDomNode&&(i.marginDomNode.setTop(o),i.marginDomNode.setHeight(a),i.marginDomNode.setDisplay(l))}i&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}class Nx extends YS{constructor(e){super(),this._context=e,this._options=new Ix(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new Ix(this._context.configuration);return this._options.equals(t)?e.hasChanged(143):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,"selection"===this._options.renderWhitespace}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if("none"===this._options.renderWhitespace)return void(this._renderResult=null);const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber-t+1,i=new Array(n);for(let r=0;r<n;r++)i[r]=!0;const s=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,i);this._renderResult=[];for(let r=e.viewportData.startLineNumber;r<=e.viewportData.endLineNumber;r++){const t=r-e.viewportData.startLineNumber,n=s.data[t];let i=null;if("selection"===this._options.renderWhitespace){const e=this._selection;for(const t of e){if(t.endLineNumber<r||t.startLineNumber>r)continue;const e=t.startLineNumber===r?t.startColumn:n.minColumn,s=t.endLineNumber===r?t.endColumn:n.maxColumn;e<s&&(i||(i=[]),i.push(new Vp(e-1,s-1)))}}this._renderResult[t]=this._applyRenderWhitespace(e,r,i,n)}}_applyRenderWhitespace(e,t,n,i){if("selection"===this._options.renderWhitespace&&!n)return"";if("trailing"===this._options.renderWhitespace&&i.continuesWithWrappedLine)return"";const s=this._context.theme.getColor(aw),r=this._options.renderWithSVG,o=i.content,a=-1===this._options.stopRenderingLineAfter?o.length:Math.min(this._options.stopRenderingLineAfter,o.length),l=i.continuesWithWrappedLine,c=i.minColumn-1,u="boundary"===this._options.renderWhitespace,h="trailing"===this._options.renderWhitespace,d=this._options.lineHeight,f=this._options.middotWidth,g=this._options.wsmiddotWidth,p=this._options.spaceWidth,m=Math.abs(g-p)<Math.abs(f-p)?11825:183,b=this._options.canUseHalfwidthRightwardsArrow;let _,v="",y=!1,S=Ks(o);-1===S?(y=!0,S=a,_=a):_=Ys(o);let w=0,k=n&&n[w],C=0;for(let x=c;x<a;x++){const i=o.charCodeAt(x);if(k&&x>=k.endOffset&&(w++,k=n&&n[w]),9!==i&&32!==i)continue;if(h&&!y&&x<=_)continue;if(u&&x>=S&&x<=_&&32===i){const e=x-1>=0?o.charCodeAt(x-1):0,t=x+1<a?o.charCodeAt(x+1):0;if(32!==e&&32!==t)continue}if(u&&l&&x===a-1){const e=x-1>=0?o.charCodeAt(x-1):0;if(32===i&&32!==e&&9!==e)continue}if(n&&(!k||k.startOffset>x||k.endOffset<=x))continue;const s=e.visibleRangeForPosition(new Ci(t,x+1));s&&(r?(C=Math.max(C,s.left),v+=9===i?this._renderArrow(d,p,s.left):'<circle cx="'.concat((s.left+p/2).toFixed(2),'" cy="').concat((d/2).toFixed(2),'" r="').concat((p/7).toFixed(2),'" />')):v+=9===i?'<div class="mwh" style="left:'.concat(s.left,"px;height:").concat(d,'px;">').concat(b?String.fromCharCode(65515):String.fromCharCode(8594),"</div>"):'<div class="mwh" style="left:'.concat(s.left,"px;height:").concat(d,'px;">').concat(String.fromCharCode(m),"</div>"))}return r?(C=Math.round(C+p),'<svg style="position:absolute;width:'.concat(C,"px;height:").concat(d,'px" viewBox="0 0 ').concat(C," ").concat(d,'" xmlns="http://www.w3.org/2000/svg" fill="').concat(s,'">')+v+"</svg>"):v}_renderArrow(e,t,n){const i=e/2,s=n,r={x:0,y:t/7/2},o={x:.8*t,y:r.y},a={x:o.x-.2*o.x,y:o.y+.2*o.x},l={x:a.x+.1*o.x,y:a.y+.1*o.x},c={x:l.x+.35*o.x,y:l.y-.35*o.x},u=[r,o,a,l,c,{x:c.x,y:-c.y},{x:l.x,y:-l.y},{x:a.x,y:-a.y},{x:o.x,y:-o.y},{x:r.x,y:-r.y}].map((e=>"".concat((s+e.x).toFixed(2)," ").concat((i+e.y).toFixed(2)))).join(" L ");return'<path d="M '.concat(u,'" />')}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class Ix{constructor(e){const t=e.options,n=t.get(50),i=t.get(38);"off"===i?(this.renderWhitespace="none",this.renderWithSVG=!1):"svg"===i?(this.renderWhitespace=t.get(98),this.renderWithSVG=!0):(this.renderWhitespace=t.get(98),this.renderWithSVG=!1),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(66),this.stopRenderingLineAfter=t.get(116)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class $x{constructor(e,t,n,i){this.selections=e,this.startLineNumber=0|t.startLineNumber,this.endLineNumber=0|t.endLineNumber,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=0|t.bigNumbersDelta,this.whitespaceViewportData=n,this._model=i,this.visibleRange=new xi(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class Mx{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class Rx{constructor(e,t,n){this.configuration=e,this.theme=new Mx(t),this.viewModel=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}var Ox=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},Px=function(e,t){return function(n,i){t(n,i,e)}};let Fx=class extends yy{constructor(e,t,n,i,s,r,o){super(),this._instantiationService=o,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new Ei(1,1,1,1)],this._renderAnimationFrame=null;const a=new rC(t,i,s,e);this._context=new Rx(t,n,i),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(ok,this._context,a,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=Kr(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Kr(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Kr(document.createElement("div")),wy.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new xC(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new UC(this._context,this._linesContent),this._viewZones=new Tx(this._context),this._viewParts.push(this._viewZones);const l=new fx(this._context);this._viewParts.push(l);const c=new vx(this._context);this._viewParts.push(c);const u=new hC(this._context);this._viewParts.push(u),u.addDynamicOverlay(new wC(this._context)),u.addDynamicOverlay(new Cx(this._context)),u.addDynamicOverlay(new BC(this._context)),u.addDynamicOverlay(new CC(this._context)),u.addDynamicOverlay(new Nx(this._context));const h=new dC(this._context);this._viewParts.push(h),h.addDynamicOverlay(new kC(this._context)),h.addDynamicOverlay(new KC(this._context)),h.addDynamicOverlay(new qC(this._context)),h.addDynamicOverlay(new Xw(this._context)),this._glyphMarginWidgets=new TC(this._context),this._viewParts.push(this._glyphMarginWidgets);const d=new Zw(this._context);d.getDomNode().appendChild(this._viewZones.marginDomNode),d.getDomNode().appendChild(h.getDomNode()),d.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(d),this._contentWidgets=new pC(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new Dx(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new hx(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const f=new _x(this._context);this._viewParts.push(f);const g=new gC(this._context);this._viewParts.push(g);const p=new lx(this._context);if(this._viewParts.push(p),l){const e=this._scrollbar.getOverviewRulerLayoutInfo();e.parent.insertBefore(l.getDomNode(),e.insertBefore)}this._linesContent.appendChild(u.getDomNode()),this._linesContent.appendChild(f.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(c.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(p.getDomNode()),this._overflowGuardContainer.appendChild(g.domNode),this.domNode.appendChild(this._overflowGuardContainer),r?(r.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),r.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new GS(this._context,a,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let n=[],i=0;n=n.concat(e.getAllMarginDecorations().map((e=>{var t,n,s;const r=null!==(n=null===(t=e.options.glyphMargin)||void 0===t?void 0:t.position)&&void 0!==n?n:Df.Center;return i=Math.max(i,e.range.endLineNumber),{range:e.range,lane:r,persist:null===(s=e.options.glyphMargin)||void 0===s?void 0:s.persistLane}}))),n=n.concat(this._glyphMarginWidgets.getWidgets().map((t=>{const n=e.validateRange(t.preference.range);return i=Math.max(i,n.endLineNumber),{range:n,lane:t.preference.lane}}))),n.sort(((e,t)=>xi.compareRangesUsingStarts(e.range,t.range))),t.reset(i);for(const s of n)t.push(s.lane,s.range,s.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new Qy(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new Ci(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const e=this._context.configuration.options.get(143);this.domNode.setWidth(e.width),this.domNode.setHeight(e.height),this._overflowGuardContainer.setWidth(e.width),this._overflowGuardContainer.setHeight(e.height),this._linesContent.setWidth(1e6),this._linesContent.setHeight(1e6)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(140)+" "+ZS(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){null!==this._renderAnimationFrame&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){if(this._store.isDisposed)throw new Wt;if(null===this._renderAnimationFrame){const e=this._createCoordinatedRendering();this._renderAnimationFrame=zx.INSTANCE.scheduleCoordinatedRendering({window:Dc(this.domNode.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new Wt;try{return e.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new Wt;return e.renderText()},prepareRender:(t,n)=>{if(this._store.isDisposed)throw new Wt;return e.prepareRender(t,n)},render:(t,n)=>{if(this._store.isDisposed)throw new Wt;return e.render(t,n)}})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();Bx((()=>e.prepareRenderText()));const t=Bx((()=>e.renderText()));if(t){const[n,i]=t;Bx((()=>e.prepareRender(n,i))),Bx((()=>e.render(n,i)))}}_getViewPartsToRender(){const e=[];let t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}lb.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&0===e.length)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new $x(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new Cy(this._context.viewLayout,n,this._viewLines)]},prepareRender:(e,t)=>{for(const n of e)n.prepareRender(t)},render:(e,t)=>{for(const n of e)n.render(t),n.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const n=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const s=this._viewLines.visibleRangeForPosition(new Ci(i.lineNumber,i.column));return s?s.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?fC.convertViewToModelMouseTarget(n,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new bx(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const e of this._viewParts)e.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,n,i,s,r,o,a,l;this._contentWidgets.setWidgetPosition(e.widget,null!==(n=null===(t=e.position)||void 0===t?void 0:t.position)&&void 0!==n?n:null,null!==(s=null===(i=e.position)||void 0===i?void 0:i.secondaryPosition)&&void 0!==s?s:null,null!==(o=null===(r=e.position)||void 0===r?void 0:r.preference)&&void 0!==o?o:null,null!==(l=null===(a=e.position)||void 0===a?void 0:a.positionAffinity)&&void 0!==l?l:null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){const t=e.position?e.position.preference:null;this._overlayWidgets.setWidgetPosition(e.widget,t)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};function Bx(e){try{return e()}catch(zY){return Nt(zY),null}}Fx=Ox([Px(6,so)],Fx);class zx{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{const t=this._coordinatedRenderings.indexOf(e);if(-1!==t&&(this._coordinatedRenderings.splice(t,1),0===this._coordinatedRenderings.length)){for(const[e,t]of this._animationFrameRunners)t.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,jc(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const n of e)Bx((()=>n.prepareRenderText()));const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t[n]=Bx((()=>i.renderText()))}for(let n=0,i=e.length;n<i;n++){const i=e[n],s=t[n];if(!s)continue;const[r,o]=s;Bx((()=>i.prepareRender(r,o)))}for(let n=0,i=e.length;n<i;n++){const i=e[n],s=t[n];if(!s)continue;const[r,o]=s;Bx((()=>i.render(r,o)))}}}zx.INSTANCE=new zx;class Wx{constructor(e,t,n,i,s,r,o){this.id=e,this.label=t,this.alias=n,this.metadata=i,this._precondition=s,this._run=r,this._contextKeyService=o}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}function Hx(e){let t=0,n=0,i=0,s=0;for(let r=0,o=e.length;r<o;r++){const a=e.charCodeAt(r);13===a?(0===t&&(n=r),t++,r+1<o&&10===e.charCodeAt(r+1)?(s|=2,r++):s|=3,i=r+1):10===a&&(s|=1,0===t&&(n=r),t++,i=r+1)}return 0===t&&(n=e.length),[t,n,e.length-i,s]}class Vx{constructor(e,t,n,i){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=n,this.isInvalid=i}}class jx{constructor(e,t,n,i,s,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=i,this.nestingLevelOfEqualBracketType=s,this.bracketPairNode=r}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class Ux extends jx{constructor(e,t,n,i,s,r,o){super(e,t,n,i,s,r),this.minVisibleColumnIndentation=o}}class qx{constructor(e,t){this.lineCount=e,this.columnCount=t}toString(){return"".concat(this.lineCount,",").concat(this.columnCount)}}qx.zero=new qx(0,0);const Kx=0;function Gx(e){return 0===e}const Yx=2**26;function Qx(e,t){return e*Yx+t}function Xx(e){const t=e,n=Math.floor(t/Yx);return new qx(n,t-n*Yx)}function Zx(e,t){let n=e+t;return t>=Yx&&(n-=e%Yx),n}function Jx(e,t){return e.reduce(((e,n)=>Zx(e,t(n))),Kx)}function eE(e,t){return e===t}function tE(e,t){const n=e,i=t;if(i-n<=0)return Kx;const s=Math.floor(n/Yx),r=Math.floor(i/Yx),o=i-r*Yx;if(s===r){return Qx(0,o-(n-s*Yx))}return Qx(r-s,o)}function nE(e,t){return e<t}function iE(e,t){return e<=t}function sE(e,t){return e>=t}function rE(e){return Qx(e.lineNumber-1,e.column-1)}function oE(e,t){const n=e,i=Math.floor(n/Yx),s=n-i*Yx,r=t,o=Math.floor(r/Yx);return new xi(i+1,s+1,o+1,r-o*Yx+1)}class aE{static fromModelContentChanges(e){const t=e.map((e=>{const t=xi.lift(e.range);return new aE(rE(t.getStartPosition()),rE(t.getEndPosition()),function(e){const t=qs(e);return Qx(t.length-1,t[t.length-1].length)}(e.text))})).reverse();return t}constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}toString(){return"[".concat(Xx(this.startOffset),"...").concat(Xx(this.endOffset),") -> ").concat(Xx(this.newLength))}}class lE{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map((e=>cE.from(e)))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return null===n?null:tE(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Qx(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Qx(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=Xx(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Qx(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Qx(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(!iE(n,e))break;{this.nextEditIdx++;const e=Xx(n),i=Xx(this.translateOldToCur(t.endOffsetBeforeObj)),s=e.lineCount-i.lineCount;this.deltaOldToNewLineCount+=s;const r=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,o=e.columnCount-i.columnCount;this.deltaOldToNewColumnCount=r+o,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}}}}class cE{static from(e){return new cE(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,n){this.endOffsetBeforeObj=Xx(t),this.endOffsetAfterObj=Xx(Zx(e,n)),this.offsetObj=Xx(e)}}const uE=[];class hE{static create(e,t){if(e<=128&&0===t.length){let n=hE.cache[e];return n||(n=new hE(e,t),hE.cache[e]=n),n}return new hE(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const n=t.getKey(e);let i=n>>5;if(0===i){const e=1<<n|this.items;return e===this.items?this:hE.create(e,this.additionalItems)}i--;const s=this.additionalItems.slice(0);for(;s.length<i;)s.push(0);return s[i]|=1<<(31&n),hE.create(this.items,s)}merge(e){const t=this.items|e.items;if(this.additionalItems===uE&&e.additionalItems===uE)return t===this.items?this:t===e.items?e:hE.create(t,uE);const n=[];for(let i=0;i<Math.max(this.additionalItems.length,e.additionalItems.length);i++){const t=this.additionalItems[i]||0,s=e.additionalItems[i]||0;n.push(t|s)}return hE.create(t,n)}intersects(e){if(0!==(this.items&e.items))return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(0!==(this.additionalItems[t]&e.additionalItems[t]))return!0;return!1}}hE.cache=new Array(129),hE.empty=hE.create(0,uE);const dE={getKey:e=>e};class fE{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return void 0===t&&(t=this.items.size,this.items.set(e,t)),t}}class gE{get length(){return this._length}constructor(e){this._length=e}}class pE extends gE{static create(e,t,n){let i=e.length;return t&&(i=Zx(i,t.length)),n&&(i=Zx(i,n.length)),new pE(i,e,t,n,t?t.missingOpeningBracketIds:hE.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,n,i,s){super(e),this.openingBracket=t,this.child=n,this.closingBracket=i,this.missingOpeningBracketIds=s}canBeReused(e){return null!==this.closingBracket&&!e.intersects(this.missingOpeningBracketIds)}deepClone(){return new pE(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Zx(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class mE extends gE{static create23(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=e.length,r=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(s=Zx(s,t.length),r=r.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");s=Zx(s,n.length),r=r.merge(n.missingOpeningBracketIds)}return i?new _E(s,e.listHeight+1,e,t,n,r):new bE(s,e.listHeight+1,e,t,n,r)}static getEmpty(){return new yE(Kx,0,[],hE.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(0===e)return;const t=this.getChild(e-1),n=4===t.kind?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){this.throwIfImmutable();if(0===this.childrenLength)return;const e=this.getChild(0),t=4===e.kind?e.toMutable():e;return e!==t&&this.setChild(0,t),t}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds))return!1;if(0===this.childrenLength)return!1;let t=this;for(;4===t.kind;){const e=t.childrenLength;if(0===e)throw new Wt;t=t.getChild(e-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let i=1;i<e;i++){const e=this.getChild(i);t=Zx(t,e.length),n=n.merge(e.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(-1!==this.cachedMinIndentation)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,i=e;for(let s=0;s<this.childrenLength;s++){const e=this.getChild(s);e&&(n=Math.min(n,e.computeMinIndentation(i,t)),i=Zx(i,e.length))}return this.cachedMinIndentation=n,n}}class bE extends mE{get childrenLength(){return null!==this._item3?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:return void(this._item1=t);case 1:return void(this._item2=t);case 2:return void(this._item3=t)}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,n,i,s,r){super(e,t,r),this._item1=n,this._item2=i,this._item3=s}deepClone(){return new bE(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class _E extends bE{toMutable(){return new bE(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class vE extends mE{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,n,i){super(e,t,i),this._children=n}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new vE(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class yE extends vE{toMutable(){return new vE(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const SE=[];class wE extends gE{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return SE}deepClone(){return this}}class kE extends wE{get kind(){return 0}get missingOpeningBracketIds(){return hE.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=Xx(e),i=(0===n.columnCount?n.lineCount:n.lineCount+1)+1,s=(r=Zx(e,this.length),Math.floor(r/Yx)+1);var r;let o=Number.MAX_SAFE_INTEGER;for(let a=i;a<=s;a++){const e=t.getLineFirstNonWhitespaceColumn(a),n=t.getLineContent(a);if(0===e)continue;const i=Uy.visibleColumnFromColumn(n,e,t.getOptions().tabSize);o=Math.min(o,i)}return o}}class CE extends wE{static create(e,t,n){return new CE(e,t,n)}get kind(){return 1}get missingOpeningBracketIds(){return hE.getEmpty()}constructor(e,t,n){super(e),this.bracketInfo=t,this.bracketIds=n}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class xE extends wE{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class EE{constructor(e,t,n,i,s){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=i,this.astNode=s}}class LE{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new DE(this.textModel,this.bracketTokens),this._offset=Kx,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return Qx(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=Zx(this._offset,e);const t=Xx(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Zx(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class DE{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,null!==this.line&&(this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const e=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=e.length,e}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;null===this.line&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=0===this.lineCharOffset?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const i=this.lineTokens,s=i.getCount();let r=null;if(this.lineTokenOffset<s){const o=i.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<s&&o===i.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const a=0===Rp.getTokenType(o),l=Rp.containsBalancedBrackets(o),c=i.getEndOffset(this.lineTokenOffset);if(l&&a&&this.lineCharOffset<c){const e=i.getLanguageId(this.lineTokenOffset),t=this.line.substring(this.lineCharOffset,c),n=this.bracketTokens.getSingleLanguageBracketTokens(e),s=n.regExpGlobal;if(s){s.lastIndex=0;const e=s.exec(t);e&&(r=n.getToken(e[0]),r&&(this.lineCharOffset+=e.index))}}if(n+=c-this.lineCharOffset,r){if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=r;break}return this.lineCharOffset+=r.length,r}this.lineTokenOffset++,this.lineCharOffset=c}else{if(this.lineIdx===this.textBufferLineCount-1)break;if(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3)break}if(n>1500)break}const i=(s=e,r=t,o=this.lineIdx,a=this.lineCharOffset,s!==o?Qx(o-s,a):Qx(0,a-r));var s,r,o,a;return new EE(i,0,-1,hE.getEmpty(),new kE(i))}}class AE{constructor(e,t){this.text=e,this._offset=Kx,this.idx=0;const n=t.getRegExpStr(),i=n?new RegExp(n+"|\n","gi"):null,s=[];let r,o=0,a=0,l=0,c=0;const u=[];for(let f=0;f<60;f++)u.push(new EE(Qx(0,f),0,-1,hE.getEmpty(),new kE(Qx(0,f))));const h=[];for(let f=0;f<60;f++)h.push(new EE(Qx(1,f),0,-1,hE.getEmpty(),new kE(Qx(1,f))));if(i)for(i.lastIndex=0;null!==(r=i.exec(e));){const e=r.index,n=r[0];if("\n"===n)o++,a=e+1;else{if(l!==e){let t;if(c===o){const n=e-l;if(n<u.length)t=u[n];else{const e=Qx(0,n);t=new EE(e,0,-1,hE.getEmpty(),new kE(e))}}else{const n=o-c,i=e-a;if(1===n&&i<h.length)t=h[i];else{const e=Qx(n,i);t=new EE(e,0,-1,hE.getEmpty(),new kE(e))}}s.push(t)}s.push(t.getToken(n)),l=e+n.length,c=o}}const d=e.length;if(l!==d){const e=c===o?Qx(0,d-l):Qx(o-c,d-a);s.push(new EE(e,0,-1,hE.getEmpty(),new kE(e)))}this.length=Qx(o,d-a),this.tokens=s}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new Bt}}class TE{static createFromLanguage(e,t){function n(e){return t.getKey("".concat(e.languageId,":::").concat(e.bracketText))}const i=new Map;for(const s of e.bracketsNew.openingBrackets){const e=Qx(0,s.bracketText.length),t=n(s),r=hE.getEmpty().add(t,dE);i.set(s.bracketText,new EE(e,1,t,r,CE.create(e,s,r)))}for(const s of e.bracketsNew.closingBrackets){const e=Qx(0,s.bracketText.length);let t=hE.getEmpty();const r=s.getOpeningBrackets();for(const i of r)t=t.add(n(i),dE);i.set(s.bracketText,new EE(e,2,n(r[0]),t,CE.create(e,s,t)))}return new TE(i)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map((e=>function(e){let t=Hs(e);/^[\w ]+/.test(e)&&(t="\\b".concat(t));/[\w ]+$/.test(e)&&(t="".concat(t,"\\b"));return t}(e))).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,n]of this.map)if(2===n.kind&&n.bracketIds.intersects(e))return t}get isEmpty(){return 0===this.map.size}}class NE{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=TE.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function IE(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(0===e.length)return null;if(1===e.length)return e[0];let n=e.length;for(;n>3;){const i=n>>1;for(let s=0;s<i;s++){const i=s<<1;e[s]=mE.create23(e[i],e[i+1],i+3===n?e[i+2]:null,t)}n=i}return mE.create23(e[0],e[1],n>=3?e[2]:null,t)}function $E(e,t){return Math.abs(e.listHeight-t.listHeight)}function ME(e,t){return e.listHeight===t.listHeight?mE.create23(e,t,null,!1):e.listHeight>t.listHeight?function(e,t){e=e.toMutable();let n=e;const i=[];let s;for(;;){if(t.listHeight===n.listHeight){s=t;break}if(4!==n.kind)throw new Error("unexpected");i.push(n),n=n.makeLastElementMutable()}for(let r=i.length-1;r>=0;r--){const e=i[r];s?e.childrenLength>=3?s=mE.create23(e.unappendChild(),s,null,!1):(e.appendChildOfSameHeight(s),s=void 0):e.handleChildrenChanged()}return s?mE.create23(e,s,null,!1):e}(e,t):function(e,t){e=e.toMutable();let n=e;const i=[];for(;t.listHeight!==n.listHeight;){if(4!==n.kind)throw new Error("unexpected");i.push(n),n=n.makeFirstElementMutable()}let s=t;for(let r=i.length-1;r>=0;r--){const e=i[r];s?e.childrenLength>=3?s=mE.create23(s,e.unprependChild(),null,!1):(e.prependChildOfSameHeight(s),s=void 0):e.handleChildrenChanged()}return s?mE.create23(s,e,null,!1):e}(t,e)}class RE{constructor(e){this.lastOffset=Kx,this.nextNodes=[e],this.offsets=[Kx],this.idxs=[]}readLongestNodeAt(e,t){if(nE(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=PE(this.nextNodes);if(!n)return;const i=PE(this.offsets);if(nE(e,i))return;if(nE(i,e))if(Zx(i,n.length)<=e)this.nextNodeAfterCurrent();else{const e=OE(n);-1!==e?(this.nextNodes.push(n.getChild(e)),this.offsets.push(i),this.idxs.push(e)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const e=OE(n);if(-1===e)return void this.nextNodeAfterCurrent();this.nextNodes.push(n.getChild(e)),this.offsets.push(i),this.idxs.push(e)}}}}nextNodeAfterCurrent(){for(;;){const e=PE(this.offsets),t=PE(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),0===this.idxs.length)break;const n=PE(this.nextNodes),i=OE(n,this.idxs[this.idxs.length-1]);if(-1!==i){this.nextNodes.push(n.getChild(i)),this.offsets.push(Zx(e,t.length)),this.idxs[this.idxs.length-1]=i;break}this.idxs.pop()}}}function OE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;for(;;){if(t++,t>=e.childrenLength)return-1;if(e.getChild(t))return t}}function PE(e){return e.length>0?e[e.length-1]:void 0}function FE(e,t,n,i){return new BE(e,t,n,i).parseDocument()}class BE{constructor(e,t,n,i){if(this.tokenizer=e,this.createImmutableLists=i,this._itemsConstructed=0,this._itemsFromCache=0,n&&i)throw new Error("Not supported");this.oldNodeReader=n?new RE(n):void 0,this.positionMapper=new lE(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(hE.getEmpty(),0);return e||(e=mE.getEmpty()),e}parseList(e,t){const n=[];for(;;){let i=this.tryReadChildFromCache(e);if(!i){const n=this.tokenizer.peek();if(!n||2===n.kind&&n.bracketIds.intersects(e))break;i=this.parseChild(e,t+1)}4===i.kind&&0===i.childrenLength||n.push(i)}const i=this.oldNodeReader?function(e){if(0===e.length)return null;if(1===e.length)return e[0];let t=0;function n(){if(t>=e.length)return null;const n=t,i=e[n].listHeight;for(t++;t<e.length&&e[t].listHeight===i;)t++;return t-n>=2?IE(0===n&&t===e.length?e:e.slice(n,t),!1):e[n]}let i=n(),s=n();if(!s)return i;for(let r=n();r;r=n())$E(i,s)<=$E(s,r)?(i=ME(i,s),s=r):s=ME(s,r);return ME(i,s)}(n):IE(n,this.createImmutableLists);return i}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(null===t||!Gx(t)){const n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),(n=>{if(null!==t&&!nE(n.length,t))return!1;return n.canBeReused(e)}));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e,t){this._itemsConstructed++;const n=this.tokenizer.read();switch(n.kind){case 2:return new xE(n.bracketIds,n.length);case 0:return n.astNode;case 1:{if(t>300)return new kE(n.length);const i=e.merge(n.bracketIds),s=this.parseList(i,t+1),r=this.tokenizer.peek();return r&&2===r.kind&&(r.bracketId===n.bracketId||r.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),pE.create(n.astNode,s,r.astNode)):pE.create(n.astNode,s,null)}default:throw new Error("unexpected")}}}function zE(e,t){if(0===e.length)return t;if(0===t.length)return e;const n=new x(HE(e)),i=HE(t);i.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let s=n.dequeue();function r(e){if(void 0===e){const e=n.takeWhile((e=>!0))||[];return s&&e.unshift(s),e}const t=[];for(;s&&!Gx(e);){const[i,r]=s.splitAt(e);t.push(i),e=tE(i.lengthAfter,e),s=null!==r&&void 0!==r?r:n.dequeue()}return Gx(e)||t.push(new WE(!1,e,e)),t}const o=[];function a(e,t,n){if(o.length>0&&eE(o[o.length-1].endOffset,e)){const e=o[o.length-1];o[o.length-1]=new aE(e.startOffset,t,Zx(e.newLength,n))}else o.push({startOffset:e,endOffset:t,newLength:n})}let l=Kx;for(const c of i){const e=r(c.lengthBefore);if(c.modified){const t=Zx(l,Jx(e,(e=>e.lengthBefore)));a(l,t,c.lengthAfter),l=t}else for(const t of e){const e=l;l=Zx(l,t.lengthBefore),t.modified&&a(e,l,t.lengthAfter)}}return o}class WE{constructor(e,t,n){this.modified=e,this.lengthBefore=t,this.lengthAfter=n}splitAt(e){const t=tE(e,this.lengthAfter);return eE(t,Kx)?[this,void 0]:this.modified?[new WE(this.modified,this.lengthBefore,e),new WE(this.modified,Kx,t)]:[new WE(this.modified,e,e),new WE(this.modified,t,t)]}toString(){return"".concat(this.modified?"M":"U",":").concat(Xx(this.lengthBefore)," -> ").concat(Xx(this.lengthAfter))}}function HE(e){const t=[];let n=Kx;for(const i of e){const e=tE(n,i.startOffset);Gx(e)||t.push(new WE(!1,e,e));const s=tE(i.startOffset,i.endOffset);t.push(new WE(!0,s,i.newLength)),n=i.endOffset}return t}class VE extends Zt{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new un,this.denseKeyProvider=new fE,this.brackets=new NE(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)2===e.tokenization.backgroundTokenizationState?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const e=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),t=new AE(this.textModel.getValue(),e);this.initialAstWithoutTokens=FE(t,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(2===this.textModel.tokenization.backgroundTokenizationState){const e=void 0===this.initialAstWithoutTokens;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens(e){let{ranges:t}=e;const n=t.map((e=>new aE(Qx(e.fromLineNumber-1,0),Qx(e.toLineNumber,0),Qx(e.toLineNumber-e.fromLineNumber+1,0))));this.handleEdits(n,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=aE.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const n=zE(this.queuedTextEdits,e);this.queuedTextEdits=n,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=zE(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,n){const i=t;return FE(new LE(this.textModel,this.brackets),e,i,n)}getBracketsInRange(e,t){this.flushQueue();const n=Qx(e.startLineNumber-1,e.startColumn-1),i=Qx(e.endLineNumber-1,e.endColumn-1);return new E((e=>{const s=this.initialAstWithoutTokens||this.astWithTokens;qE(s,Kx,s.length,n,i,e,0,0,new Map,t)}))}getBracketPairsInRange(e,t){this.flushQueue();const n=rE(e.getStartPosition()),i=rE(e.getEndPosition());return new E((e=>{const s=this.initialAstWithoutTokens||this.astWithTokens,r=new KE(e,t,this.textModel);GE(s,Kx,s.length,n,i,r,0,new Map)}))}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return UE(t,Kx,t.length,rE(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return jE(t,Kx,t.length,rE(e))}}function jE(e,t,n,i){if(4===e.kind||2===e.kind){const s=[];for(const i of e.children)n=Zx(t,i.length),s.push({nodeOffsetStart:t,nodeOffsetEnd:n}),t=n;for(let t=s.length-1;t>=0;t--){const{nodeOffsetStart:n,nodeOffsetEnd:r}=s[t];if(nE(n,i)){const s=jE(e.children[t],n,r,i);if(s)return s}}return null}if(3===e.kind)return null;if(1===e.kind){const i=oE(t,n);return{bracketInfo:e.bracketInfo,range:i}}return null}function UE(e,t,n,i){if(4===e.kind||2===e.kind){for(const s of e.children){if(nE(i,n=Zx(t,s.length))){const e=UE(s,t,n,i);if(e)return e}t=n}return null}if(3===e.kind)return null;if(1===e.kind){const i=oE(t,n);return{bracketInfo:e.bracketInfo,range:i}}return null}function qE(e,t,n,i,s,r,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]&&arguments[10];if(o>200)return!0;e:for(;;)switch(e.kind){case 4:{const a=e.childrenLength;for(let u=0;u<a;u++){const a=e.getChild(u);if(a){if(n=Zx(t,a.length),iE(t,s)&&sE(n,i)){if(sE(n,s)){e=a;continue e}if(!qE(a,t,n,i,s,r,o,0,l,c))return!1}t=n}}return!0}case 2:{const u=!c||!e.closingBracket||e.closingBracket.bracketInfo.closesColorized(e.openingBracket.bracketInfo);let h=0;if(l){let t=l.get(e.openingBracket.text);void 0===t&&(t=0),h=t,u&&(t++,l.set(e.openingBracket.text,t))}const d=e.childrenLength;for(let f=0;f<d;f++){const d=e.getChild(f);if(d){if(n=Zx(t,d.length),iE(t,s)&&sE(n,i)){if(sE(n,s)&&1!==d.kind){e=d,u?(o++,a=h+1):a=h;continue e}if(u||1!==d.kind||!e.closingBracket){if(!qE(d,t,n,i,s,r,u?o+1:o,u?h+1:h,l,c,!e.closingBracket))return!1}}t=n}}return null===l||void 0===l||l.set(e.openingBracket.text,h),!0}case 3:{const e=oE(t,n);return r(new Vx(e,o-1,0,!0))}case 1:{const e=oE(t,n);return r(new Vx(e,o-1,a-1,u))}case 0:return!0}}class KE{constructor(e,t,n){this.push=e,this.includeMinIndentation=t,this.textModel=n}}function GE(e,t,n,i,s,r,o,a){var l;if(o>200)return!0;let c=!0;if(2===e.kind){let u=0;if(a){let t=a.get(e.openingBracket.text);void 0===t&&(t=0),u=t,t++,a.set(e.openingBracket.text,t)}const h=Zx(t,e.openingBracket.length);let d=-1;if(r.includeMinIndentation&&(d=e.computeMinIndentation(t,r.textModel)),c=r.push(new Ux(oE(t,n),oE(t,h),e.closingBracket?oE(Zx(h,(null===(l=e.child)||void 0===l?void 0:l.length)||Kx),n):void 0,o,u,e,d)),t=h,c&&e.child){const l=e.child;if(n=Zx(t,l.length),iE(t,s)&&sE(n,i)&&(c=GE(l,t,n,i,s,r,o+1,a),!c))return!1}null===a||void 0===a||a.set(e.openingBracket.text,u)}else{let n=t;for(const t of e.children){const e=n;if(n=Zx(n,t.length),iE(e,s)&&iE(i,n)&&(c=GE(t,e,n,i,s,r,o,a),!c))return!1}}return c}class YE extends Zt{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new Jt),this.onDidChangeEmitter=new un,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1,this._register(this.languageConfigurationService.onDidChange((e=>{var t;e.languageId&&!(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.didLanguageChange(e.languageId))||(this.bracketPairsTree.clear(),this.updateBracketPairsTree())})))}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;null===(t=this.bracketPairsTree.value)||void 0===t||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;null===(e=this.bracketPairsTree.value)||void 0===e||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;null===(t=this.bracketPairsTree.value)||void 0===t||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const n=new Xt;this.bracketPairsTree.value=(e=n.add(new VE(this.textModel,(e=>this.languageConfigurationService.getLanguageConfiguration(e)))),t=n,{object:e,dispose:()=>null===t||void 0===t?void 0:t.dispose()}),n.add(this.bracketPairsTree.value.object.onDidChange((e=>this.onDidChangeEmitter.fire(e)))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire());var e,t}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getBracketPairsInRange(e,!1))||E.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getBracketPairsInRange(e,!0))||E.empty}getBracketsInRange(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(n=this.bracketPairsTree.value)||void 0===n?void 0:n.object.getBracketsInRange(e,t))||E.empty}findMatchingBracketUp(e,t,n){const i=this.textModel.validatePosition(t),s=this.textModel.getLanguageIdAtPosition(i.lineNumber,i.column);if(this.canBuildAST){const n=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(e);if(!n)return null;const i=this.getBracketPairsInRange(xi.fromPositions(t,t)).findLast((e=>n.closes(e.openingBracketInfo)));return i?i.openingBracketRange:null}{const t=e.toLowerCase(),r=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!r)return null;const o=r.textIsBracket[t];return o?ZE(this._findMatchingBracketUp(o,i,QE(n))):null}}matchBracket(e,t){if(this.canBuildAST){const t=this.getBracketPairsInRange(xi.fromPositions(e,e)).filter((t=>void 0!==t.closingBracketRange&&(t.openingBracketRange.containsPosition(e)||t.closingBracketRange.containsPosition(e)))).findLastMaxBy(w((t=>t.openingBracketRange.containsPosition(e)?t.openingBracketRange:t.closingBracketRange),xi.compareRangesUsingStarts));return t?[t.openingBracketRange,t.closingBracketRange]:null}{const n=QE(t);return this._matchBracket(this.textModel.validatePosition(e),n)}}_establishBracketSearchOffsets(e,t,n,i){const s=t.getCount(),r=t.getLanguageId(i);let o=Math.max(0,e.column-1-n.maxBracketLength);for(let l=i-1;l>=0;l--){const e=t.getEndOffset(l);if(e<=o)break;if(Ah(t.getStandardTokenType(l))||t.getLanguageId(l)!==r){o=e;break}}let a=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let l=i+1;l<s;l++){const e=t.getStartOffset(l);if(e>=a)break;if(Ah(t.getStandardTokenType(l))||t.getLanguageId(l)!==r){a=e;break}}return{searchStartOffset:o,searchEndOffset:a}}_matchBracket(e,t){const n=e.lineNumber,i=this.textModel.tokenization.getLineTokens(n),s=this.textModel.getLineContent(n),r=i.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const o=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(r)).brackets;if(o&&!Ah(i.getStandardTokenType(r))){let{searchStartOffset:a,searchEndOffset:l}=this._establishBracketSearchOffsets(e,i,o,r),c=null;for(;;){const i=td.findNextBracketInRange(o.forwardRegex,n,s,a,l);if(!i)break;if(i.startColumn<=e.column&&e.column<=i.endColumn){const e=s.substring(i.startColumn-1,i.endColumn-1).toLowerCase(),n=this._matchFoundBracket(i,o.textIsBracket[e],o.textIsOpenBracket[e],t);if(n){if(n instanceof XE)return null;c=n}}a=i.endColumn-1}if(c)return c}if(r>0&&i.getStartOffset(r)===e.column-1){const o=r-1,a=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(o)).brackets;if(a&&!Ah(i.getStandardTokenType(o))){const{searchStartOffset:r,searchEndOffset:l}=this._establishBracketSearchOffsets(e,i,a,o),c=td.findPrevBracketInRange(a.reversedRegex,n,s,r,l);if(c&&c.startColumn<=e.column&&e.column<=c.endColumn){const e=s.substring(c.startColumn-1,c.endColumn-1).toLowerCase(),n=this._matchFoundBracket(c,a.textIsBracket[e],a.textIsOpenBracket[e],t);if(n)return n instanceof XE?null:n}}}return null}_matchFoundBracket(e,t,n,i){if(!t)return null;const s=n?this._findMatchingBracketDown(t,e.getEndPosition(),i):this._findMatchingBracketUp(t,e.getStartPosition(),i);return s?s instanceof XE?s:[e,s]:null}_findMatchingBracketUp(e,t,n){const i=e.languageId,s=e.reversedRegex;let r=-1,o=0;const a=(t,i,a,l)=>{for(;;){if(n&&++o%100===0&&!n())return XE.INSTANCE;const c=td.findPrevBracketInRange(s,t,i,a,l);if(!c)break;const u=i.substring(c.startColumn-1,c.endColumn-1).toLowerCase();if(e.isOpen(u)?r++:e.isClose(u)&&r--,0===r)return c;l=c.startColumn-1}return null};for(let l=t.lineNumber;l>=1;l--){const e=this.textModel.tokenization.getLineTokens(l),n=e.getCount(),s=this.textModel.getLineContent(l);let r=n-1,o=s.length,c=s.length;l===t.lineNumber&&(r=e.findTokenIndexAtOffset(t.column-1),o=t.column-1,c=t.column-1);let u=!0;for(;r>=0;r--){const t=e.getLanguageId(r)===i&&!Ah(e.getStandardTokenType(r));if(t)u?o=e.getStartOffset(r):(o=e.getStartOffset(r),c=e.getEndOffset(r));else if(u&&o!==c){const e=a(l,s,o,c);if(e)return e}u=t}if(u&&o!==c){const e=a(l,s,o,c);if(e)return e}}return null}_findMatchingBracketDown(e,t,n){const i=e.languageId,s=e.forwardRegex;let r=1,o=0;const a=(t,i,a,l)=>{for(;;){if(n&&++o%100===0&&!n())return XE.INSTANCE;const c=td.findNextBracketInRange(s,t,i,a,l);if(!c)break;const u=i.substring(c.startColumn-1,c.endColumn-1).toLowerCase();if(e.isOpen(u)?r++:e.isClose(u)&&r--,0===r)return c;a=c.endColumn-1}return null},l=this.textModel.getLineCount();for(let c=t.lineNumber;c<=l;c++){const e=this.textModel.tokenization.getLineTokens(c),n=e.getCount(),s=this.textModel.getLineContent(c);let r=0,o=0,l=0;c===t.lineNumber&&(r=e.findTokenIndexAtOffset(t.column-1),o=t.column-1,l=t.column-1);let u=!0;for(;r<n;r++){const t=e.getLanguageId(r)===i&&!Ah(e.getStandardTokenType(r));if(t)u||(o=e.getStartOffset(r)),l=e.getEndOffset(r);else if(u&&o!==l){const e=a(c,s,o,l);if(e)return e}u=t}if(u&&o!==l){const e=a(c,s,o,l);if(e)return e}}return null}findPrevBracket(e){var t;const n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getFirstBracketBefore(n))||null;let i=null,s=null,r=null;for(let o=n.lineNumber;o>=1;o--){const e=this.textModel.tokenization.getLineTokens(o),t=e.getCount(),a=this.textModel.getLineContent(o);let l=t-1,c=a.length,u=a.length;if(o===n.lineNumber){l=e.findTokenIndexAtOffset(n.column-1),c=n.column-1,u=n.column-1;const t=e.getLanguageId(l);i!==t&&(i=t,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let h=!0;for(;l>=0;l--){const t=e.getLanguageId(l);if(i!==t){if(s&&r&&h&&c!==u){const e=td.findPrevBracketInRange(s.reversedRegex,o,a,c,u);if(e)return this._toFoundBracket(r,e);h=!1}i=t,s=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const n=!!s&&!Ah(e.getStandardTokenType(l));if(n)h?c=e.getStartOffset(l):(c=e.getStartOffset(l),u=e.getEndOffset(l));else if(r&&s&&h&&c!==u){const e=td.findPrevBracketInRange(s.reversedRegex,o,a,c,u);if(e)return this._toFoundBracket(r,e)}h=n}if(r&&s&&h&&c!==u){const e=td.findPrevBracketInRange(s.reversedRegex,o,a,c,u);if(e)return this._toFoundBracket(r,e)}}return null}findNextBracket(e){var t;const n=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),(null===(t=this.bracketPairsTree.value)||void 0===t?void 0:t.object.getFirstBracketAfter(n))||null;const i=this.textModel.getLineCount();let s=null,r=null,o=null;for(let a=n.lineNumber;a<=i;a++){const e=this.textModel.tokenization.getLineTokens(a),t=e.getCount(),i=this.textModel.getLineContent(a);let l=0,c=0,u=0;if(a===n.lineNumber){l=e.findTokenIndexAtOffset(n.column-1),c=n.column-1,u=n.column-1;const t=e.getLanguageId(l);s!==t&&(s=t,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let h=!0;for(;l<t;l++){const t=e.getLanguageId(l);if(s!==t){if(o&&r&&h&&c!==u){const e=td.findNextBracketInRange(r.forwardRegex,a,i,c,u);if(e)return this._toFoundBracket(o,e);h=!1}s=t,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const n=!!r&&!Ah(e.getStandardTokenType(l));if(n)h||(c=e.getStartOffset(l)),u=e.getEndOffset(l);else if(o&&r&&h&&c!==u){const e=td.findNextBracketInRange(r.forwardRegex,a,i,c,u);if(e)return this._toFoundBracket(o,e)}h=n}if(o&&r&&h&&c!==u){const e=td.findNextBracketInRange(r.forwardRegex,a,i,c,u);if(e)return this._toFoundBracket(o,e)}}return null}findEnclosingBrackets(e,t){const n=this.textModel.validatePosition(e);if(this.canBuildAST){const e=xi.fromPositions(n),t=this.getBracketPairsInRange(xi.fromPositions(n,n)).findLast((t=>void 0!==t.closingBracketRange&&t.range.strictContainsRange(e)));return t?[t.openingBracketRange,t.closingBracketRange]:null}const i=QE(t),s=this.textModel.getLineCount(),r=new Map;let o=[];const a=(e,t)=>{if(!r.has(e)){const n=[];for(let e=0,i=t?t.brackets.length:0;e<i;e++)n[e]=0;r.set(e,n)}o=r.get(e)};let l=0;const c=(e,t,n,s,r)=>{for(;;){if(i&&++l%100===0&&!i())return XE.INSTANCE;const a=td.findNextBracketInRange(e.forwardRegex,t,n,s,r);if(!a)break;const c=n.substring(a.startColumn-1,a.endColumn-1).toLowerCase(),u=e.textIsBracket[c];if(u&&(u.isOpen(c)?o[u.index]++:u.isClose(c)&&o[u.index]--,-1===o[u.index]))return this._matchFoundBracket(a,u,!1,i);s=a.endColumn-1}return null};let u=null,h=null;for(let d=n.lineNumber;d<=s;d++){const e=this.textModel.tokenization.getLineTokens(d),t=e.getCount(),i=this.textModel.getLineContent(d);let s=0,r=0,o=0;if(d===n.lineNumber){s=e.findTokenIndexAtOffset(n.column-1),r=n.column-1,o=n.column-1;const t=e.getLanguageId(s);u!==t&&(u=t,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,a(u,h))}let l=!0;for(;s<t;s++){const t=e.getLanguageId(s);if(u!==t){if(h&&l&&r!==o){const e=c(h,d,i,r,o);if(e)return ZE(e);l=!1}u=t,h=this.languageConfigurationService.getLanguageConfiguration(u).brackets,a(u,h)}const n=!!h&&!Ah(e.getStandardTokenType(s));if(n)l||(r=e.getStartOffset(s)),o=e.getEndOffset(s);else if(h&&l&&r!==o){const e=c(h,d,i,r,o);if(e)return ZE(e)}l=n}if(h&&l&&r!==o){const e=c(h,d,i,r,o);if(e)return ZE(e)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();const i=e.getBracketInfo(n);return i?{range:t,bracketInfo:i}:null}}function QE(e){if("undefined"===typeof e)return()=>!0;{const t=Date.now();return()=>Date.now()-t<=e}}class XE{constructor(){this._searchCanceledBrand=void 0}}function ZE(e){return e instanceof XE?null:e}XE.INSTANCE=new XE;class JE extends Zt{constructor(e){super(),this.textModel=e,this.colorProvider=new eL,this.onDidChangeEmitter=new un,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange((e=>{this.onDidChangeEmitter.fire()})))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,n,i){if(i)return[];if(void 0===t)return[];if(!this.colorizationOptions.enabled)return[];return this.textModel.bracketPairs.getBracketsInRange(e,!0).map((e=>({id:"bracket".concat(e.range.toString(),"-").concat(e.nestingLevel),options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(e,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:e.range}))).toArray()}getAllDecorations(e,t){return void 0===e?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new xi(1,1,this.textModel.getLineCount(),1),e,t):[]}}class eL{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return"bracket-highlighting-".concat(e%30)}}function tL(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}tw(((e,t)=>{const n=[Iw,$w,Mw,Rw,Ow,Pw],i=new eL;t.addRule(".monaco-editor .".concat(i.unexpectedClosingBracketClassName," { color: ").concat(e.getColor(Fw),"; }"));const s=n.map((t=>e.getColor(t))).filter((e=>!!e)).filter((e=>!e.isTransparent()));for(let r=0;r<30;r++){const e=s[r%s.length];t.addRule(".monaco-editor .".concat(i.getInlineClassNameOfLevel(r)," { color: ").concat(e,"; }"))}}));class nL{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,n,i){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=i}toString(){return 0===this.oldText.length?"(insert@".concat(this.oldPosition,' "').concat(tL(this.newText),'")'):0===this.newText.length?"(delete@".concat(this.oldPosition,' "').concat(tL(this.oldText),'")'):"(replace@".concat(this.oldPosition,' "').concat(tL(this.oldText),'" with "').concat(tL(this.newText),'")')}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const i=t.length;zh(e,i,n),n+=4;for(let s=0;s<i;s++)Fh(e,t.charCodeAt(s),n),n+=2;return n}static _readString(e,t){const n=Bh(e,t);return Uh(e,t+=4,n)}writeSize(){return 8+nL._writeStringSize(this.oldText)+nL._writeStringSize(this.newText)}write(e,t){return zh(e,this.oldPosition,t),t+=4,zh(e,this.newPosition,t),t+=4,t=nL._writeString(e,this.oldText,t),t=nL._writeString(e,this.newText,t)}static read(e,t,n){const i=Bh(e,t),s=Bh(e,t+=4);t+=4;const r=nL._readString(e,t);t+=nL._writeStringSize(r);const o=nL._readString(e,t);return t+=nL._writeStringSize(o),n.push(new nL(i,r,s,o)),t}}class iL{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(null===n){this._acceptCurr(i),i=this._getCurr(++t);continue}if(null===i){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){const[e,t]=iL._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(e),i=t;continue}if(n.newPosition<i.oldPosition){const[e,t]=iL._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(e),n=t;continue}let s,r;if(i.oldEnd===n.newEnd)s=n,r=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){const[e,o]=iL._splitPrev(n,i.oldLength);s=e,r=i,n=o,i=this._getCurr(++t)}else{const[t,o]=iL._splitCurr(i,n.newLength);s=n,r=t,n=this._getPrev(++e),i=o}this._result[this._resultLen++]=new nL(s.oldPosition,s.oldText,r.newPosition,r.newText),this._prevDeltaOffset+=s.newLength-s.oldLength,this._currDeltaOffset+=r.newLength-r.oldLength}const s=iL._merge(this._result);return iL._removeNoOps(s)}_acceptCurr(e){this._result[this._resultLen++]=iL._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=iL._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new nL(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new nL(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),i=e.newText.substr(t);return[new nL(e.oldPosition,e.oldText,e.newPosition,n),new nL(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new nL(e.oldPosition,n,e.newPosition,e.newText),new nL(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(0===e.length)return e;const t=[];let n=0,i=e[0];for(let s=1;s<e.length;s++){const r=e[s];i.oldEnd===r.oldPosition?i=new nL(i.oldPosition,i.oldText+r.oldText,i.newPosition,i.newText+r.newText):(t[n++]=i,i=r)}return t[n++]=i,t}static _removeNoOps(e){if(0===e.length)return e;const t=[];let n=0;for(let i=0;i<e.length;i++){const s=e[i];s.oldText!==s.newText&&(t[n++]=s)}return t}}function sL(e){return 47===e||92===e}function rL(e){return e.replace(/[\\/]/g,Jn.sep)}function oL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jn.sep;if(!e)return"";const n=e.length,i=e.charCodeAt(0);if(sL(i)){if(sL(e.charCodeAt(1))&&!sL(e.charCodeAt(2))){let i=3;const s=i;for(;i<n&&!sL(e.charCodeAt(i));i++);if(s!==i&&!sL(e.charCodeAt(i+1)))for(i+=1;i<n;i++)if(sL(e.charCodeAt(i)))return e.slice(0,i+1).replace(/[\\/]/g,t)}return t}if(lL(i)&&58===e.charCodeAt(1))return sL(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(-1!==s)for(s+=3;s<n;s++)if(sL(e.charCodeAt(s)))return e.slice(0,s+1);return""}function aL(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:oi;if(e===t)return!0;if(!e||!t)return!1;if(t.length>e.length)return!1;if(n){if(!sr(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===i&&n--,e.charAt(n)===i}return t.charAt(t.length-1)!==i&&(t+=i),0===e.indexOf(t)}function lL(e){return e>=65&&e<=90||e>=97&&e<=122}function cL(e){return vi(e,!0)}class uL{constructor(e){this._ignorePathCasing=e}compare(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t?0:Qs(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e===t||!(!e||!t)&&this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e.scheme===t.scheme){if(e.scheme===dc.file)return aL(cL(e),cL(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(bL(e.authority,t.authority))return aL(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return fi.joinPath(e,...n)}basenameOrAuthority(e){return fL(e)||e.authority}basename(e){return Jn.basename(e.path)}extname(e){return Jn.extname(e.path)}dirname(e){if(0===e.path.length)return e;let t;return e.scheme===dc.file?t=fi.file(ii(cL(e))).path:(t=Jn.dirname(e.path),e.authority&&t.length&&47!==t.charCodeAt(0)&&(console.error('dirname("'.concat(e.toString,")) resulted in a relative path")),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return t=e.scheme===dc.file?fi.file(ei(cL(e))).path:Jn.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!bL(e.authority,t.authority))return;if(e.scheme===dc.file){const n=ni(cL(e),cL(t));return be?rL(n):n}let n=e.path||"/";const i=t.path||"/";if(this._ignorePathCasing(e)){let e=0;for(const t=Math.min(n.length,i.length);e<t&&(n.charCodeAt(e)===i.charCodeAt(e)||n.charAt(e).toLowerCase()===i.charAt(e).toLowerCase());e++);n=i.substr(0,e)+n.substr(e)}return Jn.relative(n,i)}resolvePath(e,t){if(e.scheme===dc.file){const n=fi.file(ti(cL(e),t));return e.with({authority:n.authority,path:n.path})}var n;return-1===(n=t).indexOf("/")&&(n=rL(n)),/^[a-zA-Z]:(\/|$)/.test(n)&&(n="/"+n),t=n,e.with({path:Jn.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&"/"===e.path[0]}isEqualAuthority(e,t){return e===t||void 0!==e&&void 0!==t&&ir(e,t)}hasTrailingPathSeparator(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oi;if(e.scheme===dc.file){const n=cL(e);return n.length>oL(n).length&&n[n.length-1]===t}{const t=e.path;return t.length>1&&47===t.charCodeAt(t.length-1)&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e){return _L(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:oi)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oi,n=!1;if(e.scheme===dc.file){const i=cL(e);n=void 0!==i&&i.length===oL(i).length&&i[i.length-1]===t}else{t="/";const i=e.path;n=1===i.length&&47===i.charCodeAt(i.length-1)}return n||_L(e,t)?e:e.with({path:e.path+"/"})}}const hL=new uL((()=>!1)),dL=(new uL((e=>e.scheme!==dc.file||!ve)),new uL((e=>!0)),hL.isEqual.bind(hL)),fL=(hL.isEqualOrParent.bind(hL),hL.getComparisonKey.bind(hL),hL.basenameOrAuthority.bind(hL),hL.basename.bind(hL)),gL=(hL.extname.bind(hL),hL.dirname.bind(hL)),pL=(hL.joinPath.bind(hL),hL.normalizePath.bind(hL)),mL=(hL.relativePath.bind(hL),hL.resolvePath.bind(hL)),bL=(hL.isAbsolutePath.bind(hL),hL.isEqualAuthority.bind(hL)),_L=hL.hasTrailingPathSeparator.bind(hL);hL.removeTrailingPathSeparator.bind(hL),hL.addTrailingPathSeparator.bind(hL);var vL;function yL(e){return e.toString()}!function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime",e.parseMetaData=function(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach((e=>{const[t,i]=e.split(":");t&&i&&n.set(t,i)}));const i=t.path.substring(0,t.path.indexOf(";"));return i&&n.set(e.META_DATA_MIME,i),n}}(vL||(vL={}));class SL{static create(e,t){const n=e.getAlternativeVersionId(),i=CL(e);return new SL(n,n,i,i,t,t,[])}constructor(e,t,n,i,s,r,o){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=i,this.beforeCursorState=s,this.afterCursorState=r,this.changes=o}append(e,t,n,i,s){var r,o;t.length>0&&(this.changes=(r=this.changes,o=t,null===r||0===r.length?o:new iL(r,o).compress())),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+16*(e?e.length:0)}static _writeSelections(e,t,n){if(zh(e,t?t.length:0,n),n+=4,t)for(const i of t)zh(e,i.selectionStartLineNumber,n),n+=4,zh(e,i.selectionStartColumn,n),n+=4,zh(e,i.positionLineNumber,n),n+=4,zh(e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const i=Bh(e,t);t+=4;for(let s=0;s<i;s++){const i=Bh(e,t),s=Bh(e,t+=4),r=Bh(e,t+=4),o=Bh(e,t+=4);t+=4,n.push(new Ei(i,s,r,o))}return t}serialize(){let e=10+SL._writeSelectionsSize(this.beforeCursorState)+SL._writeSelectionsSize(this.afterCursorState)+4;for(const i of this.changes)e+=i.writeSize();const t=new Uint8Array(e);let n=0;zh(t,this.beforeVersionId,n),n+=4,zh(t,this.afterVersionId,n),n+=4,Hh(t,this.beforeEOL,n),n+=1,Hh(t,this.afterEOL,n),n+=1,n=SL._writeSelections(t,this.beforeCursorState,n),n=SL._writeSelections(t,this.afterCursorState,n),zh(t,this.changes.length,n),n+=4;for(const i of this.changes)n=i.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const i=Bh(t,n);n+=4;const s=Bh(t,n);n+=4;const r=Wh(t,n);n+=1;const o=Wh(t,n);n+=1;const a=[];n=SL._readSelections(t,n,a);const l=[];n=SL._readSelections(t,n,l);const c=Bh(t,n);n+=4;const u=[];for(let h=0;h<c;h++)n=nL.read(t,n,u);return new SL(i,s,r,o,a,l,u)}}class wL{get type(){return 0}get resource(){return fi.isUri(this.model)?this.model:this.model.uri}constructor(e,t,n,i){this.label=e,this.code=t,this.model=n,this._data=SL.create(n,i)}toString(){return(this._data instanceof SL?this._data:SL.deserialize(this._data)).changes.map((e=>e.toString())).join(", ")}matchesResource(e){return(fi.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof SL}append(e,t,n,i,s){this._data instanceof SL&&this._data.append(e,t,n,i,s)}close(){this._data instanceof SL&&(this._data=this._data.serialize())}open(){this._data instanceof SL||(this._data=SL.deserialize(this._data))}undo(){if(fi.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof SL&&(this._data=this._data.serialize());const e=SL.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(fi.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof SL&&(this._data=this._data.serialize());const e=SL.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof SL&&(this._data=this._data.serialize()),this._data.byteLength+168}}class kL{get resources(){return this._editStackElementsArr.map((e=>e.resource))}constructor(e,t,n){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(const i of this._editStackElementsArr){const e=yL(i.resource);this._editStackElementsMap.set(e,i)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=yL(e);return this._editStackElementsMap.has(t)}setModel(e){const t=yL(fi.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=yL(e.uri);if(this._editStackElementsMap.has(t)){return this._editStackElementsMap.get(t).canAppend(e)}return!1}append(e,t,n,i,s){const r=yL(e.uri);this._editStackElementsMap.get(r).append(e,t,n,i,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=yL(e);if(this._editStackElementsMap.has(t)){return this._editStackElementsMap.get(t).heapSize()}return 0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push("".concat(fL(t.resource),": ").concat(t));return"{".concat(e.join(", "),"}")}}function CL(e){return"\n"===e.getEOL()?0:1}function xL(e){return!!e&&(e instanceof wL||e instanceof kL)}class EL{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);xL(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);xL(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const n=this._undoRedoService.getLastElement(this._model.uri);if(xL(n)&&n.canAppend(this._model))return n;const i=new wL(G("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(i,t),i}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],CL(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n,i){const s=this._getOrCreateEditStackElement(e,i),r=this._model.applyEdits(t,!0),o=EL._computeCursorState(n,r),a=r.map(((e,t)=>({index:t,textChange:e.textChange})));return a.sort(((e,t)=>e.textChange.oldPosition===t.textChange.oldPosition?e.index-t.index:e.textChange.oldPosition-t.textChange.oldPosition)),s.append(this._model,a.map((e=>e.textChange)),CL(this._model),this._model.getAlternativeVersionId(),o),o}static _computeCursorState(e,t){try{return e?e(t):null}catch(zY){return Nt(zY),null}}}class LL{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function DL(e,t,n,i,s){let r;for(s.spacesDiff=0,s.looksLikeAlignment=!1,r=0;r<t&&r<i;r++){if(e.charCodeAt(r)!==n.charCodeAt(r))break}let o=0,a=0;for(let d=r;d<t;d++){32===e.charCodeAt(d)?o++:a++}let l=0,c=0;for(let d=r;d<i;d++){32===n.charCodeAt(d)?l++:c++}if(o>0&&a>0)return;if(l>0&&c>0)return;const u=Math.abs(a-c),h=Math.abs(o-l);if(0===u)return s.spacesDiff=h,void(h>0&&0<=l-1&&l-1<e.length&&l<n.length&&32!==n.charCodeAt(l)&&32===e.charCodeAt(l-1)&&44===e.charCodeAt(e.length-1)&&(s.looksLikeAlignment=!0));h%u!==0||(s.spacesDiff=h/u)}function AL(e,t,n){const i=Math.min(e.getLineCount(),1e4);let s=0,r=0,o="",a=0;const l=[2,4,6,8,3,5,7],c=[0,0,0,0,0,0,0,0,0],u=new LL;for(let f=1;f<=i;f++){const i=e.getLineLength(f),l=e.getLineContent(f),h=i<=65536;let d=!1,g=0,p=0,m=0;for(let t=0,n=i;t<n;t++){const n=h?l.charCodeAt(t):e.getLineCharCode(f,t);if(9===n)m++;else{if(32!==n){d=!0,g=t;break}p++}}if(!d)continue;if(m>0?s++:p>1&&r++,DL(o,a,l,g,u),u.looksLikeAlignment&&(!n||t!==u.spacesDiff))continue;const b=u.spacesDiff;b<=8&&c[b]++,o=l,a=g}let h=n;s!==r&&(h=s<r);let d=t;if(h){let e=h?0:.1*i;l.forEach((t=>{const n=c[t];n>e&&(e=n,d=t)})),4===d&&c[4]>0&&c[2]>0&&c[2]>=c[4]/2&&(d=2)}return{insertSpaces:h,tabSize:d}}function TL(e){return(1&e.metadata)>>>0}function NL(e,t){e.metadata=254&e.metadata|t<<0}function IL(e){return(2&e.metadata)>>>1===1}function $L(e,t){e.metadata=253&e.metadata|(t?1:0)<<1}function ML(e){return(4&e.metadata)>>>2===1}function RL(e,t){e.metadata=251&e.metadata|(t?1:0)<<2}function OL(e){return(64&e.metadata)>>>6===1}function PL(e,t){e.metadata=191&e.metadata|(t?1:0)<<6}function FL(e,t){e.metadata=231&e.metadata|t<<3}function BL(e,t){e.metadata=223&e.metadata|(t?1:0)<<5}class zL{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,NL(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,RL(this,!1),PL(this,!1),FL(this,1),BL(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,$L(this,!1)}reset(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}setOptions(e){this.options=e;const t=this.options.className;RL(this,"squiggly-error"===t||"squiggly-warning"===t||"squiggly-info"===t),PL(this,null!==this.options.glyphMarginClassName),FL(this,this.options.stickiness),BL(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const WL=new zL(null,0,0);WL.parent=WL,WL.left=WL,WL.right=WL,NL(WL,0);class HL{constructor(){this.root=WL,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,i,s,r){return this.root===WL?[]:function(e,t,n,i,s,r,o){let a=e.root,l=0,c=0,u=0,h=0;const d=[];let f=0;for(;a!==WL;)if(IL(a))$L(a.left,!1),$L(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;else{if(!IL(a.left)){if(c=l+a.maxEnd,c<t){$L(a,!0);continue}if(a.left!==WL){a=a.left;continue}}if(u=l+a.start,u>n)$L(a,!0);else{if(h=l+a.end,h>=t){a.setCachedOffsets(u,h,r);let e=!0;i&&a.ownerId&&a.ownerId!==i&&(e=!1),s&&ML(a)&&(e=!1),o&&!OL(a)&&(e=!1),e&&(d[f++]=a)}$L(a,!0),a.right===WL||IL(a.right)||(l+=a.delta,a=a.right)}}return $L(e.root,!1),d}(this,e,t,n,i,s,r)}search(e,t,n,i){return this.root===WL?[]:function(e,t,n,i,s){let r=e.root,o=0,a=0,l=0;const c=[];let u=0;for(;r!==WL;){if(IL(r)){$L(r.left,!1),$L(r.right,!1),r===r.parent.right&&(o-=r.parent.delta),r=r.parent;continue}if(r.left!==WL&&!IL(r.left)){r=r.left;continue}a=o+r.start,l=o+r.end,r.setCachedOffsets(a,l,i);let e=!0;t&&r.ownerId&&r.ownerId!==t&&(e=!1),n&&ML(r)&&(e=!1),s&&!OL(r)&&(e=!1),e&&(c[u++]=r),$L(r,!0),r.right===WL||IL(r.right)||(o+=r.delta,r=r.right)}return $L(e.root,!1),c}(this,e,t,n,i)}collectNodesFromOwner(e){return function(e,t){let n=e.root;const i=[];let s=0;for(;n!==WL;)IL(n)?($L(n.left,!1),$L(n.right,!1),n=n.parent):n.left===WL||IL(n.left)?(n.ownerId===t&&(i[s++]=n),$L(n,!0),n.right===WL||IL(n.right)||(n=n.right)):n=n.left;return $L(e.root,!1),i}(this,e)}collectNodesPostOrder(){return function(e){let t=e.root;const n=[];let i=0;for(;t!==WL;)IL(t)?($L(t.left,!1),$L(t.right,!1),t=t.parent):t.left===WL||IL(t.left)?t.right===WL||IL(t.right)?(n[i++]=t,$L(t,!0)):t=t.right:t=t.left;return $L(e.root,!1),n}(this)}insert(e){UL(this,e),this._normalizeDeltaIfNecessary()}delete(e){qL(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let i=0;for(;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;const s=n.start+i,r=n.end+i;n.setCachedOffsets(s,r,t)}acceptReplace(e,t,n,i){const s=function(e,t,n){let i=e.root,s=0,r=0,o=0,a=0;const l=[];let c=0;for(;i!==WL;)if(IL(i))$L(i.left,!1),$L(i.right,!1),i===i.parent.right&&(s-=i.parent.delta),i=i.parent;else{if(!IL(i.left)){if(r=s+i.maxEnd,r<t){$L(i,!0);continue}if(i.left!==WL){i=i.left;continue}}o=s+i.start,o>n?$L(i,!0):(a=s+i.end,a>=t&&(i.setCachedOffsets(o,a,0),l[c++]=i),$L(i,!0),i.right===WL||IL(i.right)||(s+=i.delta,i=i.right))}return $L(e.root,!1),l}(this,e,e+t);for(let r=0,o=s.length;r<o;r++){qL(this,s[r])}this._normalizeDeltaIfNecessary(),function(e,t,n,i){let s=e.root,r=0,o=0,a=0;const l=i-(n-t);for(;s!==WL;)if(IL(s))$L(s.left,!1),$L(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),XL(s),s=s.parent;else{if(!IL(s.left)){if(o=r+s.maxEnd,o<t){$L(s,!0);continue}if(s.left!==WL){s=s.left;continue}}a=r+s.start,a>n?(s.start+=l,s.end+=l,s.delta+=l,(s.delta<-1073741824||s.delta>1073741824)&&(e.requestNormalizeDelta=!0),$L(s,!0)):($L(s,!0),s.right===WL||IL(s.right)||(r+=s.delta,s=s.right))}$L(e.root,!1)}(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let r=0,o=s.length;r<o;r++){const o=s[r];o.start=o.cachedAbsoluteStart,o.end=o.cachedAbsoluteEnd,jL(o,e,e+t,n,i),o.maxEnd=o.end,UL(this,o)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,function(e){let t=e.root,n=0;for(;t!==WL;)t.left===WL||IL(t.left)?t.right===WL||IL(t.right)?(t.start=n+t.start,t.end=n+t.end,t.delta=0,XL(t),$L(t,!0),$L(t.left,!1),$L(t.right,!1),t===t.parent.right&&(n-=t.parent.delta),t=t.parent):(n+=t.delta,t=t.right):t=t.left;$L(e.root,!1)}(this))}}function VL(e,t,n,i){return e<n||!(e>n)&&(1!==i&&(2===i||t))}function jL(e,t,n,i,s){const r=function(e){return(24&e.metadata)>>>3}(e),o=0===r||2===r,a=1===r||2===r,l=n-t,c=i,u=Math.min(l,c),h=e.start;let d=!1;const f=e.end;let g=!1;t<=h&&f<=n&&function(e){return(32&e.metadata)>>>5===1}(e)&&(e.start=t,d=!0,e.end=t,g=!0);{const e=s?1:l>0?2:0;!d&&VL(h,o,t,e)&&(d=!0),!g&&VL(f,a,t,e)&&(g=!0)}if(u>0&&!s){const e=l>c?2:0;!d&&VL(h,o,t+u,e)&&(d=!0),!g&&VL(f,a,t+u,e)&&(g=!0)}{const i=s?1:0;!d&&VL(h,o,n,i)&&(e.start=t+c,d=!0),!g&&VL(f,a,n,i)&&(e.end=t+c,g=!0)}const p=c-l;d||(e.start=Math.max(0,h+p)),g||(e.end=Math.max(0,f+p)),e.start>e.end&&(e.end=e.start)}function UL(e,t){if(e.root===WL)return t.parent=WL,t.left=WL,t.right=WL,NL(t,0),e.root=t,e.root;!function(e,t){let n=0,i=e.root;const s=t.start,r=t.end;for(;;){if(JL(s,r,i.start+n,i.end+n)<0){if(i.left===WL){t.start-=n,t.end-=n,t.maxEnd-=n,i.left=t;break}i=i.left}else{if(i.right===WL){t.start-=n+i.delta,t.end-=n+i.delta,t.maxEnd-=n+i.delta,i.right=t;break}n+=i.delta,i=i.right}}t.parent=i,t.left=WL,t.right=WL,NL(t,1)}(e,t),ZL(t.parent);let n=t;for(;n!==e.root&&1===TL(n.parent);)if(n.parent===n.parent.parent.left){const t=n.parent.parent.right;1===TL(t)?(NL(n.parent,0),NL(t,0),NL(n.parent.parent,1),n=n.parent.parent):(n===n.parent.right&&(n=n.parent,GL(e,n)),NL(n.parent,0),NL(n.parent.parent,1),YL(e,n.parent.parent))}else{const t=n.parent.parent.left;1===TL(t)?(NL(n.parent,0),NL(t,0),NL(n.parent.parent,1),n=n.parent.parent):(n===n.parent.left&&(n=n.parent,YL(e,n)),NL(n.parent,0),NL(n.parent.parent,1),GL(e,n.parent.parent))}return NL(e.root,0),t}function qL(e,t){let n,i;if(t.left===WL?(n=t.right,i=t,n.delta+=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta):t.right===WL?(n=t.left,i=t):(i=function(e){for(;e.left!==WL;)e=e.left;return e}(t.right),n=i.right,n.start+=i.delta,n.end+=i.delta,n.delta+=i.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),i.start+=t.delta,i.end+=t.delta,i.delta=t.delta,(i.delta<-1073741824||i.delta>1073741824)&&(e.requestNormalizeDelta=!0)),i===e.root)return e.root=n,NL(n,0),t.detach(),KL(),XL(n),void(e.root.parent=WL);const s=1===TL(i);if(i===i.parent.left?i.parent.left=n:i.parent.right=n,i===t?n.parent=i.parent:(i.parent===t?n.parent=i:n.parent=i.parent,i.left=t.left,i.right=t.right,i.parent=t.parent,NL(i,TL(t)),t===e.root?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left!==WL&&(i.left.parent=i),i.right!==WL&&(i.right.parent=i)),t.detach(),s)return ZL(n.parent),i!==t&&(ZL(i),ZL(i.parent)),void KL();let r;for(ZL(n),ZL(n.parent),i!==t&&(ZL(i),ZL(i.parent));n!==e.root&&0===TL(n);)n===n.parent.left?(r=n.parent.right,1===TL(r)&&(NL(r,0),NL(n.parent,1),GL(e,n.parent),r=n.parent.right),0===TL(r.left)&&0===TL(r.right)?(NL(r,1),n=n.parent):(0===TL(r.right)&&(NL(r.left,0),NL(r,1),YL(e,r),r=n.parent.right),NL(r,TL(n.parent)),NL(n.parent,0),NL(r.right,0),GL(e,n.parent),n=e.root)):(r=n.parent.left,1===TL(r)&&(NL(r,0),NL(n.parent,1),YL(e,n.parent),r=n.parent.left),0===TL(r.left)&&0===TL(r.right)?(NL(r,1),n=n.parent):(0===TL(r.left)&&(NL(r.right,0),NL(r,1),GL(e,r),r=n.parent.left),NL(r,TL(n.parent)),NL(n.parent,0),NL(r.left,0),YL(e,n.parent),n=e.root));NL(n,0),KL()}function KL(){WL.parent=WL,WL.delta=0,WL.start=0,WL.end=0}function GL(e,t){const n=t.right;n.delta+=t.delta,(n.delta<-1073741824||n.delta>1073741824)&&(e.requestNormalizeDelta=!0),n.start+=t.delta,n.end+=t.delta,t.right=n.left,n.left!==WL&&(n.left.parent=t),n.parent=t.parent,t.parent===WL?e.root=n:t===t.parent.left?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n,XL(t),XL(n)}function YL(e,t){const n=t.left;t.delta-=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(e.requestNormalizeDelta=!0),t.start-=n.delta,t.end-=n.delta,t.left=n.right,n.right!==WL&&(n.right.parent=t),n.parent=t.parent,t.parent===WL?e.root=n:t===t.parent.right?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n,XL(t),XL(n)}function QL(e){let t=e.end;if(e.left!==WL){const n=e.left.maxEnd;n>t&&(t=n)}if(e.right!==WL){const n=e.right.maxEnd+e.delta;n>t&&(t=n)}return t}function XL(e){e.maxEnd=QL(e)}function ZL(e){for(;e!==WL;){const t=QL(e);if(e.maxEnd===t)return;e.maxEnd=t,e=e.parent}}function JL(e,t,n,i){return e===n?t-i:e-n}class eD{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==tD)return nD(this.right);let e=this;for(;e.parent!==tD&&e.parent.left!==e;)e=e.parent;return e.parent===tD?tD:e.parent}prev(){if(this.left!==tD)return iD(this.left);let e=this;for(;e.parent!==tD&&e.parent.right!==e;)e=e.parent;return e.parent===tD?tD:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const tD=new eD(null,0);function nD(e){for(;e.left!==tD;)e=e.left;return e}function iD(e){for(;e.right!==tD;)e=e.right;return e}function sD(e){return e===tD?0:e.size_left+e.piece.length+sD(e.right)}function rD(e){return e===tD?0:e.lf_left+e.piece.lineFeedCnt+rD(e.right)}function oD(){tD.parent=tD}function aD(e,t){const n=t.right;n.size_left+=t.size_left+(t.piece?t.piece.length:0),n.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=n.left,n.left!==tD&&(n.left.parent=t),n.parent=t.parent,t.parent===tD?e.root=n:t.parent.left===t?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n}function lD(e,t){const n=t.left;t.left=n.right,n.right!==tD&&(n.right.parent=t),n.parent=t.parent,t.size_left-=n.size_left+(n.piece?n.piece.length:0),t.lf_left-=n.lf_left+(n.piece?n.piece.lineFeedCnt:0),t.parent===tD?e.root=n:t===t.parent.right?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n}function cD(e,t){let n,i;if(t.left===tD?(i=t,n=i.right):t.right===tD?(i=t,n=i.left):(i=nD(t.right),n=i.right),i===e.root)return e.root=n,n.color=0,t.detach(),oD(),void(e.root.parent=tD);const s=1===i.color;if(i===i.parent.left?i.parent.left=n:i.parent.right=n,i===t?(n.parent=i.parent,dD(e,n)):(i.parent===t?n.parent=i:n.parent=i.parent,dD(e,n),i.left=t.left,i.right=t.right,i.parent=t.parent,i.color=t.color,t===e.root?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left!==tD&&(i.left.parent=i),i.right!==tD&&(i.right.parent=i),i.size_left=t.size_left,i.lf_left=t.lf_left,dD(e,i)),t.detach(),n.parent.left===n){const t=sD(n),i=rD(n);if(t!==n.parent.size_left||i!==n.parent.lf_left){const s=t-n.parent.size_left,r=i-n.parent.lf_left;n.parent.size_left=t,n.parent.lf_left=i,hD(e,n.parent,s,r)}}if(dD(e,n.parent),s)return void oD();let r;for(;n!==e.root&&0===n.color;)n===n.parent.left?(r=n.parent.right,1===r.color&&(r.color=0,n.parent.color=1,aD(e,n.parent),r=n.parent.right),0===r.left.color&&0===r.right.color?(r.color=1,n=n.parent):(0===r.right.color&&(r.left.color=0,r.color=1,lD(e,r),r=n.parent.right),r.color=n.parent.color,n.parent.color=0,r.right.color=0,aD(e,n.parent),n=e.root)):(r=n.parent.left,1===r.color&&(r.color=0,n.parent.color=1,lD(e,n.parent),r=n.parent.left),0===r.left.color&&0===r.right.color?(r.color=1,n=n.parent):(0===r.left.color&&(r.right.color=0,r.color=1,aD(e,r),r=n.parent.left),r.color=n.parent.color,n.parent.color=0,r.left.color=0,lD(e,n.parent),n=e.root));n.color=0,oD()}function uD(e,t){for(dD(e,t);t!==e.root&&1===t.parent.color;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;1===n.color?(t.parent.color=0,n.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&aD(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,lD(e,t.parent.parent))}else{const n=t.parent.parent.left;1===n.color?(t.parent.color=0,n.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&lD(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,aD(e,t.parent.parent))}e.root.color=0}function hD(e,t,n,i){for(;t!==e.root&&t!==tD;)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=i),t=t.parent}function dD(e,t){let n=0,i=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(n=sD((t=t.parent).left)-t.size_left,i=rD(t.left)-t.lf_left,t.size_left+=n,t.lf_left+=i;t!==e.root&&(0!==n||0!==i);)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=i),t=t.parent}}tD.parent=tD,tD.left=tD,tD.right=tD,tD.color=0;const fD=65535;function gD(e){let t;return t=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length),t.set(e,0),t}class pD{constructor(e,t,n,i,s){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=i,this.isBasicASCII=s}}function mD(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=[0];let i=1;for(let s=0,r=e.length;s<r;s++){const t=e.charCodeAt(s);13===t?s+1<r&&10===e.charCodeAt(s+1)?(n[i++]=s+2,s++):n[i++]=s+1:10===t&&(n[i++]=s+1)}return t?gD(n):n}class bD{constructor(e,t,n,i,s){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=s}}class _D{constructor(e,t){this.buffer=e,this.lineStarts=t}}class vD{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==tD&&e.iterate(e.root,(e=>(e!==tD&&this._pieces.push(e.piece),!0)))}read(){return 0===this._pieces.length?0===this._index?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:0===this._index?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class yD{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const n=this._cache;for(let i=0;i<n.length;i++){const s=n[i];(null===s.node.parent||s.nodeStartOffset>=e)&&(n[i]=null,t=!0)}if(t){const e=[];for(const t of n)null!==t&&e.push(t);this._cache=e}}}class SD{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new _D("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=tD,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let s=0,r=e.length;s<r;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=mD(e[s].buffer));const t=new bD(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),i=this.rbInsertRight(i,t)}this._searchCache=new yD(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=65535-Math.floor(21845),n=2*t;let i="",s=0;const r=[];if(this.iterate(this.root,(o=>{const a=this.getNodeContent(o),l=a.length;if(s<=t||s+l<n)return i+=a,s+=l,!0;const c=i.replace(/\r\n|\r|\n/g,e);return r.push(new _D(c,mD(c))),i=a,s=l,!0})),s>0){const t=i.replace(/\r\n|\r|\n/g,e);r.push(new _D(t,mD(t)))}this.create(r,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new vD(this,e)}getOffsetAt(e,t){let n=0,i=this.root;for(;i!==tD;)if(i.left!==tD&&i.lf_left+1>=e)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt+1>=e){n+=i.size_left;return n+(this.getAccumulatedValue(i,e-i.lf_left-2)+t-1)}e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0;const i=e;for(;t!==tD;)if(0!==t.size_left&&t.size_left>=e)t=t.left;else{if(t.size_left+t.piece.length>=e){const s=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+s.index,0===s.index){const e=this.getOffsetAt(n+1,1);return new Ci(n+1,i-e+1)}return new Ci(n+1,s.remainder+1)}if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===tD){const t=this.getOffsetAt(n+1,1);return new Ci(n+1,i-e-t+1)}t=t.right}return new Ci(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(n,i);return t?t===this._EOL&&this._EOLNormalized&&t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const n=e.node,i=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i.substring(s+e.remainder,s+t.remainder)}let n=e.node;const i=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);let r=i.substring(s+e.remainder,s+n.piece.length);for(n=n.next();n!==tD;){const e=this._buffers[n.piece.bufferIndex].buffer,i=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){r+=e.substring(i,i+t.remainder);break}r+=e.substr(i,n.piece.length),n=n.next()}return r}getLinesContent(){const e=[];let t=0,n="",i=!1;return this.iterate(this.root,(s=>{if(s===tD)return!0;const r=s.piece;let o=r.length;if(0===o)return!0;const a=this._buffers[r.bufferIndex].buffer,l=this._buffers[r.bufferIndex].lineStarts,c=r.start.line,u=r.end.line;let h=l[c]+r.start.column;if(i&&(10===a.charCodeAt(h)&&(h++,o--),e[t++]=n,n="",i=!1,0===o))return!0;if(c===u)return this._EOLNormalized||13!==a.charCodeAt(h+o-1)?n+=a.substr(h,o):(i=!0,n+=a.substr(h,o-1)),!0;n+=this._EOLNormalized?a.substring(h,Math.max(h,l[c+1]-this._EOLLength)):a.substring(h,l[c+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let i=c+1;i<u;i++)n=this._EOLNormalized?a.substring(l[i],l[i+1]-this._EOLLength):a.substring(l[i],l[i+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return this._EOLNormalized||13!==a.charCodeAt(l[u]+r.end.column-1)?n=a.substr(l[u],r.end.column):(i=!0,0===r.end.column?t--:n=a.substr(l[u],r.end.column-1)),!0})),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e||(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,"")),this._lastVisitedLine.value}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}{const t=this._buffers[e.node.piece.bufferIndex],n=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(n)}}getLineCharCode(e,t){const n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,i,s,r,o,a,l,c,u){const h=this._buffers[e.piece.bufferIndex],d=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),f=this.offsetInBuffer(e.piece.bufferIndex,s),g=this.offsetInBuffer(e.piece.bufferIndex,r);let p;const m={line:0,column:0};let b,_;t._wordSeparators?(b=h.buffer.substring(f,g),_=e=>e+f,t.reset(0)):(b=h.buffer,_=e=>e,t.reset(f));do{if(p=t.next(b),p){if(_(p.index)>=g)return c;this.positionInBuffer(e,_(p.index)-d,m);const t=this.getLineFeedCnt(e.piece.bufferIndex,s,m),r=m.line===s.line?m.column-s.column+i:m.column+1,o=r+p[0].length;if(u[c++]=Ff(new xi(n+t,r,n+t,o),p,a),_(p.index)+p[0].length>=g)return c;if(c>=l)return c}}while(p);return c}findMatchesLineByLine(e,t,n,i){const s=[];let r=0;const o=new Hf(t.wordSeparators,t.regex);let a=this.nodeAt2(e.startLineNumber,e.startColumn);if(null===a)return[];const l=this.nodeAt2(e.endLineNumber,e.endColumn);if(null===l)return[];let c=this.positionInBuffer(a.node,a.remainder);const u=this.positionInBuffer(l.node,l.remainder);if(a.node===l.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,c,u,t,n,i,r,s),s;let h=e.startLineNumber,d=a.node;for(;d!==l.node;){const l=this.getLineFeedCnt(d.piece.bufferIndex,c,d.piece.end);if(l>=1){const a=this._buffers[d.piece.bufferIndex].lineStarts,u=this.offsetInBuffer(d.piece.bufferIndex,d.piece.start),f=a[c.line+l],g=h===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(d,o,h,g,c,this.positionInBuffer(d,f-u),t,n,i,r,s),r>=i)return s;h+=l}const u=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const a=this.getLineContent(h).substring(u,e.endColumn-1);return r=this._findMatchesInLine(t,o,a,e.endLineNumber,u,r,s,n,i),s}if(r=this._findMatchesInLine(t,o,this.getLineContent(h).substr(u),h,u,r,s,n,i),r>=i)return s;h++,a=this.nodeAt2(h,1),d=a.node,c=this.positionInBuffer(a.node,a.remainder)}if(h===e.endLineNumber){const a=h===e.startLineNumber?e.startColumn-1:0,l=this.getLineContent(h).substring(a,e.endColumn-1);return r=this._findMatchesInLine(t,o,l,e.endLineNumber,a,r,s,n,i),s}const f=h===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(l.node,o,h,f,c,u,t,n,i,r,s),s}_findMatchesInLine(e,t,n,i,s,r,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const t=e.simpleSearch,a=t.length,u=n.length;let h=-a;for(;-1!==(h=n.indexOf(t,h+a));)if((!c||Wf(c,n,u,h,a))&&(o[r++]=new If(new xi(i,h+1+s,i,h+1+a+s),null),r>=l))return r;return r}let u;t.reset(0);do{if(u=t.next(n),u&&(o[r++]=Ff(new xi(i,u.index+1+s,i,u.index+1+u[0].length+s),u,a),r>=l))return r}while(u);return r}insert(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==tD){const{node:n,remainder:i,nodeStartOffset:s}=this.nodeAt(e),r=n.piece,o=r.bufferIndex,a=this.positionInBuffer(n,i);if(0===n.piece.bufferIndex&&r.end.line===this._lastChangeBufferPos.line&&r.end.column===this._lastChangeBufferPos.column&&s+r.length===e&&t.length<fD)return this.appendToNode(n,t),void this.computeBufferMetadata();if(s===e)this.insertContentToNodeLeft(t,n),this._searchCache.validate(e);else if(s+n.piece.length>e){const e=[];let s=new bD(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),this.offsetInBuffer(o,r.end)-this.offsetInBuffer(o,a));if(this.shouldCheckCRLF()&&this.endWithCR(t)){if(10===this.nodeCharCodeAt(n,i)){const e={line:s.start.line+1,column:0};s=new bD(s.bufferIndex,e,s.end,this.getLineFeedCnt(s.bufferIndex,e,s.end),s.length-1),t+="\n"}}if(this.shouldCheckCRLF()&&this.startWithLF(t)){if(13===this.nodeCharCodeAt(n,i-1)){const s=this.positionInBuffer(n,i-1);this.deleteNodeTail(n,s),t="\r"+t,0===n.piece.length&&e.push(n)}else this.deleteNodeTail(n,a)}else this.deleteNodeTail(n,a);const l=this.createNewPieces(t);s.length>0&&this.rbInsertRight(n,s);let c=n;for(let t=0;t<l.length;t++)c=this.rbInsertRight(c,l[t]);this.deleteNodes(e)}else this.insertContentToNodeRight(t,n)}else{const e=this.createNewPieces(t);let n=this.rbInsertLeft(null,e[0]);for(let t=1;t<e.length;t++)n=this.rbInsertRight(n,e[t])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===tD)return;const n=this.nodeAt(e),i=this.nodeAt(e+t),s=n.node,r=i.node;if(s===r){const r=this.positionInBuffer(s,n.remainder),o=this.positionInBuffer(s,i.remainder);if(n.nodeStartOffset===e){if(t===s.piece.length){const e=s.next();return cD(this,s),this.validateCRLFWithPrevNode(e),void this.computeBufferMetadata()}return this.deleteNodeHead(s,o),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),void this.computeBufferMetadata()}return n.nodeStartOffset+s.piece.length===e+t?(this.deleteNodeTail(s,r),this.validateCRLFWithNextNode(s),void this.computeBufferMetadata()):(this.shrinkNode(s,r,o),void this.computeBufferMetadata())}const o=[],a=this.positionInBuffer(s,n.remainder);this.deleteNodeTail(s,a),this._searchCache.validate(e),0===s.piece.length&&o.push(s);const l=this.positionInBuffer(r,i.remainder);this.deleteNodeHead(r,l),0===r.piece.length&&o.push(r);for(let u=s.next();u!==tD&&u!==r;u=u.next())o.push(u);const c=0===s.piece.length?s.prev():s;this.deleteNodes(o),this.validateCRLFWithNextNode(c),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const i=t.piece,s={line:i.start.line+1,column:0},r=new bD(i.bufferIndex,s,i.end,this.getLineFeedCnt(i.bufferIndex,s,i.end),i.length-1);t.piece=r,e+="\n",hD(this,t,-1,-1),0===t.piece.length&&n.push(t)}const i=this.createNewPieces(e);let s=this.rbInsertLeft(t,i[i.length-1]);for(let r=i.length-2;r>=0;r--)s=this.rbInsertLeft(s,i[r]);this.validateCRLFWithPrevNode(s),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+="\n");const n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]);let s=i;for(let r=1;r<n.length;r++)s=this.rbInsertRight(s,n[r]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){const i=e.piece,s=e.piece.bufferIndex,r=this._buffers[s].lineStarts,o=r[i.start.line]+i.start.column+t;let a=i.start.line,l=i.end.line,c=0,u=0,h=0;for(;a<=l&&(c=a+(l-a)/2|0,h=r[c],c!==l);)if(u=r[c+1],o<h)l=c-1;else{if(!(o>=u))break;a=c+1}return n?(n.line=c,n.column=o-h,null):{line:c,column:o-h}}getLineFeedCnt(e,t,n){if(0===n.column)return n.line-t.line;const i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;const s=i[n.line+1],r=i[n.line]+n.column;if(s>r+1)return n.line-t.line;const o=r-1;return 13===this._buffers[e].buffer.charCodeAt(o)?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)cD(this,e[t])}createNewPieces(e){if(e.length>fD){const t=[];for(;e.length>fD;){const n=e.charCodeAt(65534);let i;13===n||n>=55296&&n<=56319?(i=e.substring(0,65534),e=e.substring(65534)):(i=e.substring(0,fD),e=e.substring(fD));const s=mD(i);t.push(new bD(this._buffers.length,{line:0,column:0},{line:s.length-1,column:i.length-s[s.length-1]},s.length-1,i.length)),this._buffers.push(new _D(i,s))}const n=mD(e);return t.push(new bD(this._buffers.length,{line:0,column:0},{line:n.length-1,column:e.length-n[n.length-1]},n.length-1,e.length)),this._buffers.push(new _D(e,n)),t}let t=this._buffers[0].buffer.length;const n=mD(e,!1);let i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&0!==t&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let e=0;e<n.length;e++)n[e]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(0!==t)for(let e=0;e<n.length;e++)n[e]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,o={line:r,column:s-this._buffers[0].lineStarts[r]},a=new bD(0,i,o,this.getLineFeedCnt(0,i,o),s-t);return this._lastChangeBufferPos=o,[a]}getLineRawContent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.root,i="";const s=this._searchCache.get2(e);if(s){n=s.node;const r=this.getAccumulatedValue(n,e-s.nodeStartLineNumber-1),o=this._buffers[n.piece.bufferIndex].buffer,a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(s.nodeStartLineNumber+n.piece.lineFeedCnt!==e){const i=this.getAccumulatedValue(n,e-s.nodeStartLineNumber);return o.substring(a+r,a+i-t)}i=o.substring(a+r,a+n.piece.length)}else{let s=0;const r=e;for(;n!==tD;)if(n.left!==tD&&n.lf_left>=e-1)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt>e-1){const i=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:s,nodeStartLineNumber:r-(e-1-n.lf_left)}),a.substring(l+i,l+o-t)}if(n.lf_left+n.piece.lineFeedCnt===e-1){const t=this.getAccumulatedValue(n,e-n.lf_left-2),s=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=s.substring(r+t,r+n.piece.length);break}e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right}}for(n=n.next();n!==tD;){const e=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const s=this.getAccumulatedValue(n,0),r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=e.substring(r,r+s-t),i}{const t=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=e.substr(t,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==tD;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){const n=e.piece,i=this.positionInBuffer(e,t),s=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){const t=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(t!==s)return{index:t,remainder:0}}return{index:s,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;const n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,s=n.start.line+t+1;return s>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[s]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.end),r=t,o=this.offsetInBuffer(n.bufferIndex,r),a=this.getLineFeedCnt(n.bufferIndex,n.start,r),l=a-i,c=o-s,u=n.length+c;e.piece=new bD(n.bufferIndex,n.start,r,a,u),hD(this,e,c,l)}deleteNodeHead(e,t){const n=e.piece,i=n.lineFeedCnt,s=this.offsetInBuffer(n.bufferIndex,n.start),r=t,o=this.getLineFeedCnt(n.bufferIndex,r,n.end),a=o-i,l=s-this.offsetInBuffer(n.bufferIndex,r),c=n.length+l;e.piece=new bD(n.bufferIndex,r,n.end,o,c),hD(this,e,l,a)}shrinkNode(e,t,n){const i=e.piece,s=i.start,r=i.end,o=i.length,a=i.lineFeedCnt,l=t,c=this.getLineFeedCnt(i.bufferIndex,i.start,l),u=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,s);e.piece=new bD(i.bufferIndex,i.start,l,c,u),hD(this,e,u-o,c-a);const h=new bD(i.bufferIndex,n,r,this.getLineFeedCnt(i.bufferIndex,n,r),this.offsetInBuffer(i.bufferIndex,r)-this.offsetInBuffer(i.bufferIndex,n)),d=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(d)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+="\n");const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=mD(t,!1);for(let h=0;h<s.length;h++)s[h]+=i;if(n){const e=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-e}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const r=this._buffers[0].lineStarts.length-1,o={line:r,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[r]},a=e.piece.length+t.length,l=e.piece.lineFeedCnt,c=this.getLineFeedCnt(0,e.piece.start,o),u=c-l;e.piece=new bD(e.piece.bufferIndex,e.piece.start,o,c,a),this._lastChangeBufferPos=o,hD(this,e,t.length,u)}nodeAt(e){let t=this.root;const n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;for(;t!==tD;)if(t.size_left>e)t=t.left;else{if(t.size_left+t.piece.length>=e){i+=t.size_left;const n={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(n),n}e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right}return null}nodeAt2(e,t){let n=this.root,i=0;for(;n!==tD;)if(n.left!==tD&&n.lf_left>=e-1)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt>e-1){const s=this.getAccumulatedValue(n,e-n.lf_left-2),r=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(s+t-1,r),nodeStartOffset:i}}if(n.lf_left+n.piece.lineFeedCnt===e-1){const s=this.getAccumulatedValue(n,e-n.lf_left-2);if(s+t-1<=n.piece.length)return{node:n,remainder:s+t-1,nodeStartOffset:i};t-=n.piece.length-s;break}e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==tD;){if(n.piece.lineFeedCnt>0){const e=this.getAccumulatedValue(n,0),i=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,e),nodeStartOffset:i}}if(n.piece.length>=t-1){return{node:n,remainder:t-1,nodeStartOffset:this.offsetOfNode(n)}}t-=n.piece.length,n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&"\n"===this._EOL)}startWithLF(e){if("string"===typeof e)return 10===e.charCodeAt(0);if(e===tD||0===e.piece.lineFeedCnt)return!1;const t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,s=n[i]+t.start.column;if(i===n.length-1)return!1;return!(n[i+1]>s+1)&&10===this._buffers[t.bufferIndex].buffer.charCodeAt(s)}endWithCR(e){return"string"===typeof e?13===e.charCodeAt(e.length-1):e!==tD&&0!==e.piece.lineFeedCnt&&13===this.nodeCharCodeAt(e,e.piece.length-1)}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const n=[],i=this._buffers[e.piece.bufferIndex].lineStarts;let s;s=0===e.piece.end.column?{line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};const r=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new bD(e.piece.bufferIndex,e.piece.start,s,o,r),hD(this,e,-1,-1),0===e.piece.length&&n.push(e);const a={line:t.piece.start.line+1,column:0},l=t.piece.length-1,c=this.getLineFeedCnt(t.piece.bufferIndex,a,t.piece.end);t.piece=new bD(t.piece.bufferIndex,a,t.piece.end,c,l),hD(this,t,-1,-1),0===t.piece.length&&n.push(t);const u=this.createNewPieces("\r\n");this.rbInsertRight(e,u[0]);for(let h=0;h<n.length;h++)cD(this,n[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const n=t.next();if(this.startWithLF(n)){if(e+="\n",1===n.piece.length)cD(this,n);else{const e=n.piece,t={line:e.start.line+1,column:0},i=e.length-1,s=this.getLineFeedCnt(e.bufferIndex,t,e.end);n.piece=new bD(e.bufferIndex,t,e.end,s,i),hD(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===tD)return t(tD);const n=this.iterate(e.left,t);return n?t(e)&&this.iterate(e.right,t):n}getNodeContent(e){if(e===tD)return"";const t=this._buffers[e.piece.bufferIndex],n=e.piece,i=this.offsetInBuffer(n.bufferIndex,n.start),s=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(i,s)}getPieceContent(e){const t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}rbInsertRight(e,t){const n=new eD(t,1);n.left=tD,n.right=tD,n.parent=tD,n.size_left=0,n.lf_left=0;if(this.root===tD)this.root=n,n.color=0;else if(e.right===tD)e.right=n,n.parent=e;else{const t=nD(e.right);t.left=n,n.parent=t}return uD(this,n),n}rbInsertLeft(e,t){const n=new eD(t,1);if(n.left=tD,n.right=tD,n.parent=tD,n.size_left=0,n.lf_left=0,this.root===tD)this.root=n,n.color=0;else if(e.left===tD)e.left=n,n.parent=e;else{const t=iD(e.left);t.right=n,n.parent=t}return uD(this,n),n}}class wD extends Zt{constructor(e,t,n,i,s,r,o){super(),this._onDidChangeContent=this._register(new un),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._pieceTree=new SD(e,n,o)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const n=e+t,i=this.getPositionAt(e),s=this.getPositionAt(n);return new xi(i.lineNumber,i.column,s.lineNumber,s.column)}getValueInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const n=this.getOffsetAt(e.startLineNumber,e.startColumn),i=this.getOffsetAt(e.endLineNumber,e.endColumn);let s=0;const r=this._getEndOfLine(t),o=this.getEOL();if(r.length!==o.length){s=(r.length-o.length)*(e.endLineNumber-e.startLineNumber)}return i-n+s}getCharacterCountInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._mightContainNonBasicASCII){let n=0;const i=e.startLineNumber,s=e.endLineNumber;for(let t=i;t<=s;t++){const r=this.getLineContent(t),o=t===i?e.startColumn-1:0,a=t===s?e.endColumn-1:r.length;for(let e=o;e<a;e++)ar(r.charCodeAt(e))?(n+=1,e+=1):n+=1}return n+=this._getEndOfLine(t).length*(s-i),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=Ks(this.getLineContent(e));return-1===t?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Ys(this.getLineContent(e));return-1===t?0:t+2}_getEndOfLine(e){switch(e){case 1:return"\n";case 2:return"\r\n";case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,o=!0,a=[];for(let g=0;g<e.length;g++){const t=e[g];o&&t._isTracked&&(o=!1);const n=t.range;if(t.text){let e=!0;r||(e=!_r(t.text),r=e),!i&&e&&(i=mr(t.text)),!s&&e&&(s=yr(t.text))}let l="",c=0,u=0,h=0;if(t.text){let e;[c,u,h,e]=Hx(t.text);const n=this.getEOL();l=0===e||e===("\r\n"===n?2:1)?t.text:t.text.replace(/\r\n|\r|\n/g,n)}a[g]={sortIndex:g,identifier:t.identifier||null,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n),text:l,eolCount:c,firstLineLength:u,lastLineLength:h,forceMoveMarkers:Boolean(t.forceMoveMarkers),isAutoWhitespaceEdit:t.isAutoWhitespaceEdit||!1}}a.sort(wD._sortOpsAscending);let l=!1;for(let g=0,p=a.length-1;g<p;g++){const e=a[g].range.getEndPosition(),t=a[g+1].range.getStartPosition();if(t.isBeforeOrEqual(e)){if(t.isBefore(e))throw new Error("Overlapping ranges are not allowed!");l=!0}}o&&(a=this._reduceOperations(a));const c=n||t?wD._getInverseEditRanges(a):[],u=[];if(t)for(let g=0;g<a.length;g++){const e=a[g],t=c[g];if(e.isAutoWhitespaceEdit&&e.range.isEmpty())for(let n=t.startLineNumber;n<=t.endLineNumber;n++){let i="";n===t.startLineNumber&&(i=this.getLineContent(e.range.startLineNumber),-1!==Ks(i))||u.push({lineNumber:n,oldContent:i})}}let h=null;if(n){let e=0;h=[];for(let t=0;t<a.length;t++){const n=a[t],i=c[t],s=this.getValueInRange(n.range),r=n.rangeOffset+e;e+=n.text.length-s.length,h[t]={sortIndex:n.sortIndex,identifier:n.identifier,range:i,text:s,textChange:new nL(n.rangeOffset,s,r,n.text)}}l||h.sort(((e,t)=>e.sortIndex-t.sortIndex))}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=r;const d=this._doApplyEdits(a);let f=null;if(t&&u.length>0){u.sort(((e,t)=>t.lineNumber-e.lineNumber)),f=[];for(let e=0,t=u.length;e<t;e++){const t=u[e].lineNumber;if(e>0&&u[e-1].lineNumber===t)continue;const n=u[e].oldContent,i=this.getLineContent(t);0!==i.length&&i!==n&&-1===Ks(i)&&f.push(t)}}return this._onDidChangeContent.fire(),new Rf(h,d,f)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,i=e[e.length-1].range,s=new xi(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn);let r=n.startLineNumber,o=n.startColumn;const a=[];for(let d=0,f=e.length;d<f;d++){const n=e[d],i=n.range;t=t||n.forceMoveMarkers,a.push(this.getValueInRange(new xi(r,o,i.startLineNumber,i.startColumn))),n.text.length>0&&a.push(n.text),r=i.endLineNumber,o=i.endColumn}const l=a.join(""),[c,u,h]=Hx(l);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:l,eolCount:c,firstLineLength:u,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(wD._sortOpsDescending);const t=[];for(let n=0;n<e.length;n++){const i=e[n],s=i.range.startLineNumber,r=i.range.startColumn,o=i.range.endLineNumber,a=i.range.endColumn;if(s===o&&r===a&&0===i.text.length)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);const l=new xi(s,r,o,a);t.push({range:l,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}static _getInverseEditRanges(e){const t=[];let n=0,i=0,s=null;for(let r=0,o=e.length;r<o;r++){const o=e[r];let a,l,c;if(s?s.range.endLineNumber===o.range.startLineNumber?(a=n,l=i+(o.range.startColumn-s.range.endColumn)):(a=n+(o.range.startLineNumber-s.range.endLineNumber),l=o.range.startColumn):(a=o.range.startLineNumber,l=o.range.startColumn),o.text.length>0){const e=o.eolCount+1;c=1===e?new xi(a,l,a,l+o.firstLineLength):new xi(a,l,a+e-1,o.lastLineLength+1)}else c=new xi(a,l,a,l);n=c.endLineNumber,i=c.endColumn,t.push(c),s=o}return t}static _sortOpsAscending(e,t){const n=xi.compareRangesUsingEnds(e.range,t.range);return 0===n?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){const n=xi.compareRangesUsingEnds(e.range,t.range);return 0===n?t.sortIndex-e.sortIndex:-n}}class kD{constructor(e,t,n,i,s,r,o,a,l){this._chunks=e,this._bom=t,this._cr=n,this._lf=i,this._crlf=s,this._containsRTL=r,this._containsUnusualLineTerminators=o,this._isBasicASCII=a,this._normalizeEOL=l}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return 0===t?1===e?"\n":"\r\n":n>t/2?"\r\n":"\n"}create(e){const t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&("\r\n"===t&&(this._cr>0||this._lf>0)||"\n"===t&&(this._cr>0||this._crlf>0)))for(let s=0,r=n.length;s<r;s++){const e=n[s].buffer.replace(/\r\n|\r|\n/g,t),i=mD(e);n[s]=new _D(e,i)}const i=new wD(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}}class CD{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(0===e.length)return;0===this.chunks.length&&Cr(e)&&(this.BOM=kr,e=e.substr(1));const t=e.charCodeAt(e.length-1);13===t||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){(t||0!==e.length)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=function(e,t){e.length=0,e[0]=0;let n=1,i=0,s=0,r=0,o=!0;for(let l=0,c=t.length;l<c;l++){const a=t.charCodeAt(l);13===a?l+1<c&&10===t.charCodeAt(l+1)?(r++,e[n++]=l+2,l++):(i++,e[n++]=l+1):10===a?(s++,e[n++]=l+1):o&&9!==a&&(a<32||a>126)&&(o=!1)}const a=new pD(gD(e),i,s,r,o);return e.length=0,a}(this._tmpLineStarts,e);this.chunks.push(new _D(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=mr(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=yr(e)))}finish(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._finish(),new kD(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(0===this.chunks.length&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=mD(e.buffer);e.lineStarts=t,13===this._previousChar&&this.cr++}}}class xD{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(0===t)return void this.insert(e,n);if(0===n)return void this.delete(e,t);const i=this._store.slice(0,e),s=this._store.slice(e+t),r=function(e,t){const n=[];for(let i=0;i<e;i++)n[i]=t;return n}(n,this._default);this._store=i.concat(r,s)}delete(e,t){0===t||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(0===t||e>=this._store.length)return;const n=[];for(let i=0;i<t;i++)n[i]=this._default;this._store=m(this._store,e,n)}}class ED{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class LD{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e)return void n.appendLineTokens(t)}this._tokens.push(new ED(e,[t]))}finalize(){return this._tokens}}class DD{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new TD(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class AD extends DD{constructor(e,t,n,i){super(e,t),this._textModel=n,this._languageIdCodec=i}updateTokensUntilLine(e,t){const n=this._textModel.getLanguageId();for(;;){const i=this.getFirstInvalidLine();if(!i||i.lineNumber>t)break;const s=this._textModel.getLineContent(i.lineNumber),r=$D(this._languageIdCodec,n,this.tokenizationSupport,s,!0,i.startState);e.add(i.lineNumber,r.tokens),this.store.setEndState(i.lineNumber,r.endState)}}getTokenTypeIfInsertingCharacter(e,t){const n=this.getStartState(e.lineNumber);if(!n)return 0;const i=this._textModel.getLanguageId(),s=this._textModel.getLineContent(e.lineNumber),r=s.substring(0,e.column-1)+t+s.substring(e.column-1),o=$D(this._languageIdCodec,i,this.tokenizationSupport,r,!0,n),a=new Op(o.tokens,r,this._languageIdCodec);if(0===a.getCount())return 0;const l=a.findTokenIndexAtOffset(e.column-1);return a.getStandardTokenType(l)}tokenizeLineWithEdit(e,t,n){const i=e.lineNumber,s=e.column,r=this.getStartState(i);if(!r)return null;const o=this._textModel.getLineContent(i),a=o.substring(0,s-1)+n+o.substring(s-1+t),l=this._textModel.getLanguageIdAtPosition(i,0),c=$D(this._languageIdCodec,l,this.tokenizationSupport,a,!0,r);return new Op(c.tokens,a,this._languageIdCodec)}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,n){if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,n),{heuristicTokens:!1};let i=this.guessStartState(t);const s=this._textModel.getLanguageId();for(let r=t;r<=n;r++){const t=this._textModel.getLineContent(r),n=$D(this._languageIdCodec,s,this.tokenizationSupport,t,!0,i);e.add(r,n.tokens),i=n.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const n=[];let i=null;for(let o=e-1;t>1&&o>=1;o--){const e=this._textModel.getLineFirstNonWhitespaceColumn(o);if(0!==e&&(e<t&&(n.push(this._textModel.getLineContent(o)),t=e,i=this.getStartState(o),i)))break}i||(i=this.tokenizationSupport.getInitialState()),n.reverse();const s=this._textModel.getLanguageId();let r=i;for(const o of n){r=$D(this._languageIdCodec,s,this.tokenizationSupport,o,!1,r).endState}return r}}class TD{constructor(e){this.lineCount=e,this._tokenizationStateStore=new ND,this._invalidEndStatesLineNumbers=new ID,this._invalidEndStatesLineNumbers.addRange(new Gf(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new Wt("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new Gf(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new Gf(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[e]=Hx(t.text);this.acceptChange(new ig(t.range.startLineNumber,t.range.endLineNumber+1),e+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new Gf(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return null===this._invalidEndStatesLineNumbers.min}getStartState(e,t){return 1===e?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(null===t)return null;const n=this.getStartState(t,e);if(!n)throw new Wt("Start state must be defined");return{lineNumber:t,startState:n}}}class ND{constructor(){this._lineEndStates=new xD(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const n=this._lineEndStates.get(e);return(!n||!n.equals(t))&&(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}}class ID{constructor(){this._ranges=[]}get min(){return 0===this._ranges.length?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex((t=>t.contains(e)));if(-1!==t){const n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new Gf(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new Gf(n.start,e):this._ranges.splice(t,1,new Gf(n.start,e),new Gf(e+1,n.endExclusive))}}addRange(e){Gf.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let i=n;for(;!(i>=this._ranges.length||e.endExclusive<this._ranges[i].start);)i++;const s=t-e.length;for(let r=i;r<this._ranges.length;r++)this._ranges[r]=this._ranges[r].delta(s);if(n===i){const i=new Gf(e.start,e.start+t);i.isEmpty||this._ranges.splice(n,0,i)}else{const t=Math.min(e.start,this._ranges[n].start),r=Math.max(e.endExclusive,this._ranges[i-1].endExclusive),o=new Gf(t,r+s);o.isEmpty?this._ranges.splice(n,i-n):this._ranges.splice(n,i-n,o)}}toString(){return this._ranges.map((e=>e.toString())).join(" + ")}}function $D(e,t,n,i,s,r){let o=null;if(n)try{o=n.tokenizeEncoded(i,s,r.clone())}catch(zY){Nt(zY)}return o||(o=Mp(e.encodeLanguageId(t),r)),Op.convertToEndOffset(o.tokens,i.length),o}class MD{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){!this._isScheduled&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._isScheduled=!0,al((e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)})))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),n=()=>{!this._isDisposed&&this._tokenizerWithStateStore._textModel.isAttachedToEditor()&&this._hasLinesToTokenize()&&(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?Le(n):this._beginBackgroundTokenization())};n()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new LD,n=sn.create(!1);do{if(n.elapsed()>1)break;if(this._tokenizeOneInvalidLine(t)>=e)break}while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return!!this._tokenizerWithStateStore&&!this._tokenizerWithStateStore.store.allStatesValid()}_tokenizeOneInvalidLine(e){var t;const n=null===(t=this._tokenizerWithStateStore)||void 0===t?void 0:t.getFirstInvalidLine();return n?(this._tokenizerWithStateStore.updateTokensUntilLine(e,n.lineNumber),n.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new ig(e,t))}}const RD=new Uint32Array(0).buffer;class OD{static deleteBeginning(e,t){return null===e||e===RD?e:OD.delete(e,0,t)}static deleteEnding(e,t){if(null===e||e===RD)return e;const n=PD(e),i=n[n.length-2];return OD.delete(e,t,i)}static delete(e,t,n){if(null===e||e===RD||t===n)return e;const i=PD(e),s=i.length>>>1;if(0===t&&i[i.length-2]===n)return RD;const r=Op.findIndexInTokensArray(i,t),o=r>0?i[r-1<<1]:0;if(n<i[r<<1]){const o=n-t;for(let e=r;e<s;e++)i[e<<1]-=o;return e}let a,l;o!==t?(i[r<<1]=t,a=r+1<<1,l=t):(a=r<<1,l=o);const c=n-t;for(let h=r+1;h<s;h++){const e=i[h<<1]-c;e>l&&(i[a++]=e,i[a++]=i[1+(h<<1)],l=e)}if(a===i.length)return e;const u=new Uint32Array(a);return u.set(i.subarray(0,a),0),u.buffer}static append(e,t){if(t===RD)return e;if(e===RD)return t;if(null===e)return e;if(null===t)return null;const n=PD(e),i=PD(t),s=i.length>>>1,r=new Uint32Array(n.length+i.length);r.set(n,0);let o=n.length;const a=n[n.length-2];for(let l=0;l<s;l++)r[o++]=i[l<<1]+a,r[o++]=i[1+(l<<1)];return r.buffer}static insert(e,t,n){if(null===e||e===RD)return e;const i=PD(e),s=i.length>>>1;let r=Op.findIndexInTokensArray(i,t);if(r>0){i[r-1<<1]===t&&r--}for(let o=r;o<s;o++)i[o<<1]+=n;return e}}function PD(e){return e instanceof Uint32Array?e:new Uint32Array(e)}class FD{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),null!==i&&i!==RD)return new Op(PD(i),n,this._languageIdCodec);const s=new Uint32Array(2);return s[0]=n.length,s[1]=BD(this._languageIdCodec.encodeLanguageId(e)),new Op(s,n,this._languageIdCodec)}static _massageTokens(e,t,n){const i=n?PD(n):null;if(0===t){let t=!1;if(i&&i.length>1&&(t=Rp.getLanguageId(i[1])!==e),!t)return RD}if(!i||0===i.length){const n=new Uint32Array(2);return n[0]=t,n[1]=BD(e),n.buffer}return i[i.length-2]=t,0===i.byteOffset&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(0===t)return;const n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=m(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,s){const r=FD._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,i);this._ensureLine(t);const o=this._lineTokens[t];return this._lineTokens[t]=r,!!s&&!FD._equals(o,r)}static _equals(e,t){if(!e||!t)return!e&&!t;const n=PD(e),i=PD(t);if(n.length!==i.length)return!1;for(let s=0,r=n.length;s<r;s++)if(n[s]!==i[s])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new Ci(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;return void(this._lineTokens[t]=OD.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1))}this._lineTokens[t]=OD.deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let i=null;n<this._len&&(i=OD.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=OD.append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(0===t&&0===n)return;const i=e.lineNumber-1;i>=this._len||(0!==t?(this._lineTokens[i]=OD.deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=OD.insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)):this._lineTokens[i]=OD.insert(this._lineTokens[i],e.column-1,n))}setMultilineTokens(e,t){if(0===e.length)return{changes:[]};const n=[];for(let i=0,s=e.length;i<s;i++){const s=e[i];let r=0,o=0,a=!1;for(let e=s.startLineNumber;e<=s.endLineNumber;e++)if(a)this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),s.getLineTokens(e),!1),o=e;else{this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),s.getLineTokens(e),!0)&&(a=!0,r=e,o=e)}a&&n.push({fromLineNumber:r,toLineNumber:o})}return{changes:n}}}function BD(e){return(32768|e<<0|2<<24|1024)>>>0}class zD{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return 0===this._pieces.length}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const i=t[0].getRange(),s=t[t.length-1].getRange();if(!i||!s)return e;n=e.plusRange(i).plusRange(s)}let i=null;for(let s=0,r=this._pieces.length;s<r;s++){const e=this._pieces[s];if(e.endLineNumber<n.startLineNumber)continue;if(e.startLineNumber>n.endLineNumber){i=i||{index:s};break}if(e.removeTokens(n),e.isEmpty()){this._pieces.splice(s,1),s--,r--;continue}if(e.endLineNumber<n.startLineNumber)continue;if(e.startLineNumber>n.endLineNumber){i=i||{index:s};continue}const[t,o]=e.split(n);t.isEmpty()?i=i||{index:s}:o.isEmpty()||(this._pieces.splice(s,1,t,o),s++,r++,i=i||{index:s})}return i=i||{index:this._pieces.length},t.length>0&&(this._pieces=m(this._pieces,i.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(0===t.getLineContent().length)return t;const n=this._pieces;if(0===n.length)return t;const i=n[zD._findFirstPieceWithLine(n,e)].getLineTokens(e);if(!i)return t;const s=t.getCount(),r=i.getCount();let o=0;const a=[];let l=0,c=0;const u=(e,t)=>{e!==c&&(c=e,a[l++]=e,a[l++]=t)};for(let h=0;h<r;h++){const e=i.getStartCharacter(h),n=i.getEndCharacter(h),r=i.getMetadata(h),a=((1&r?2048:0)|(2&r?4096:0)|(4&r?8192:0)|(8&r?16384:0)|(16&r?16744448:0)|(32&r?4278190080:0))>>>0,l=~a>>>0;for(;o<s&&t.getEndOffset(o)<=e;)u(t.getEndOffset(o),t.getMetadata(o)),o++;for(o<s&&t.getStartOffset(o)<e&&u(e,t.getMetadata(o));o<s&&t.getEndOffset(o)<n;)u(t.getEndOffset(o),t.getMetadata(o)&l|r&a),o++;if(o<s)u(n,t.getMetadata(o)&l|r&a),t.getEndOffset(o)===n&&o++;else{const e=Math.min(Math.max(0,o-1),s-1);u(n,t.getMetadata(e)&l|r&a)}}for(;o<s;)u(t.getEndOffset(o),t.getMetadata(o)),o++;return new Op(new Uint32Array(a),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let s=n+Math.floor((i-n)/2);if(e[s].endLineNumber<t)n=s+1;else{if(!(e[s].startLineNumber>t)){for(;s>n&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}i=s-1}}return n}acceptEdit(e,t,n,i,s){for(const r of this._pieces)r.acceptEdit(e,t,n,i,s)}}class WD extends MC{constructor(e,t,n,i,s,r){super(),this._languageService=e,this._languageConfigurationService=t,this._textModel=n,this._bracketPairsTextModelPart=i,this._languageId=s,this._attachedViews=r,this._semanticTokens=new zD(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new un),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new un),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new un),this.onDidChangeTokens=this._onDidChangeTokens.event,this.grammarTokens=this._register(new HD(this._languageService.languageIdCodec,this._textModel,(()=>this._languageId),this._attachedViews)),this._register(this._languageConfigurationService.onDidChange((e=>{e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}))),this._register(this.grammarTokens.onDidChangeTokens((e=>{this._emitModelTokensChangedEvent(e)}))),this._register(this.grammarTokens.onDidChangeBackgroundTokenizationState((e=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})))}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[e,n,i]=Hx(t.text);this._semanticTokens.acceptEdit(t.range,e,n,i,t.text.length>0?t.text.charCodeAt(0):0)}this.grammarTokens.handleDidChangeContent(e)}handleDidChangeAttached(){this.grammarTokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this.grammarTokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new Wt("Illegal value for lineNumber")}get hasTokens(){return this.grammarTokens.hasTokens}resetTokenization(){this.grammarTokens.resetTokenization()}get backgroundTokenizationState(){return this.grammarTokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this.grammarTokens.forceTokenization(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this.grammarTokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this.grammarTokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,n){return this.grammarTokens.getTokenTypeIfInsertingCharacter(e,t,n)}tokenizeLineWithEdit(e,t,n){return this.grammarTokens.tokenizeLineWithEdit(e,t,n)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:null!==e,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),n=this._textModel.getLineContent(t.lineNumber),i=this.getLineTokens(t.lineNumber),s=i.findTokenIndexAtOffset(t.column-1),[r,o]=WD._findLanguageBoundaries(i,s),a=je(t.column,this.getLanguageConfiguration(i.getLanguageId(s)).getWordDefinition(),n.substring(r,o),r);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a;if(s>0&&r===t.column-1){const[r,o]=WD._findLanguageBoundaries(i,s-1),a=je(t.column,this.getLanguageConfiguration(i.getLanguageId(s-1)).getWordDefinition(),n.substring(r,o),r);if(a&&a.startColumn<=e.column&&e.column<=a.endColumn)return a}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let i=0;for(let r=t;r>=0&&e.getLanguageId(r)===n;r--)i=e.getStartOffset(r);let s=e.getLineContent().length;for(let r=t,o=e.getCount();r<o&&e.getLanguageId(r)===n;r++)s=e.getEndOffset(r);return[i,s]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const n=this._textModel.validatePosition(new Ci(e,t)),i=this.getLineTokens(n.lineNumber);return i.getLanguageId(i.findTokenIndexAtOffset(n.column-1))}setLanguageId(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this._languageId===e)return;const n={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(n),this.grammarTokens.resetTokenization(),this._onDidChangeLanguage.fire(n),this._onDidChangeLanguageConfiguration.fire({})}}class HD extends Zt{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,n,i){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=n,this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new Jt),this._tokens=new FD(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new Jt),this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new un),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new un),this.onDidChangeTokens=this._onDidChangeTokens.event,this._attachedViewStates=this._register(new tn),this._register(Ui.onDidChange((e=>{const t=this.getLanguageId();-1!==e.changedLanguages.indexOf(t)&&this.resetTokenization()}))),this.resetTokenization(),this._register(i.onDidChangeVisibleRanges((e=>{let{view:t,state:n}=e;if(n){let e=this._attachedViewStates.get(t);e||(e=new VD((()=>this.refreshRanges(e.lineRanges))),this._attachedViewStates.set(t,e)),e.handleStateChange(n)}else this._attachedViewStates.deleteAndDispose(t)})))}resetTokenization(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t;this._tokens.flush(),null===(t=this._debugBackgroundTokens)||void 0===t||t.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new TD(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const[n,i]=(()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const e=Ui.get(this.getLanguageId());if(!e)return[null,null];let t;try{t=e.getInitialState()}catch(zY){return Nt(zY),[null,null]}return[e,t]})();if(this._tokenizer=n&&i?new AD(this._textModel.getLineCount(),n,this._textModel,this._languageIdCodec):null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const e={setTokens:e=>{this.setTokens(e)},backgroundTokenizationFinished:()=>{if(2===this._backgroundTokenizationState)return;this._backgroundTokenizationState=2,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(e,t)=>{var n;if(!this._tokenizer)return;const i=this._tokenizer.store.getFirstInvalidEndStateLineNumber();null!==i&&e>=i&&(null===(n=this._tokenizer)||void 0===n||n.store.setEndState(e,t))}};n&&n.createBackgroundTokenizer&&!n.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,e)),this._backgroundTokenizer.value||this._textModel.isTooLargeForTokenization()||(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new MD(this._tokenizer,e),this._defaultBackgroundTokenizer.handleChanges()),(null===n||void 0===n?void 0:n.backgroundTokenizerShouldOnlyVerifyTokens)&&n.createBackgroundTokenizer?(this._debugBackgroundTokens=new FD(this._languageIdCodec),this._debugBackgroundStates=new TD(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,{setTokens:e=>{var t;null===(t=this._debugBackgroundTokens)||void 0===t||t.setMultilineTokens(e,this._textModel)},backgroundTokenizationFinished(){},setEndState:(e,t)=>{var n;null===(n=this._debugBackgroundStates)||void 0===n||n.setEndState(e,t)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;null===(e=this._defaultBackgroundTokenizer)||void 0===e||e.handleChanges()}handleDidChangeContent(e){var t,n,i;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const n of e.changes){const[e,i]=Hx(n.text);this._tokens.acceptEdit(n.range,e,i),null===(t=this._debugBackgroundTokens)||void 0===t||t.acceptEdit(n.range,e,i)}null===(n=this._debugBackgroundStates)||void 0===n||n.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),null===(i=this._defaultBackgroundTokenizer)||void 0===i||i.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=ig.joinMany([...this._attachedViewStates].map((e=>{let[t,n]=e;return n.lineRanges})));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var n,i;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const s=new LD,{heuristicTokens:r}=this._tokenizer.tokenizeHeuristically(s,e,t),o=this.setTokens(s.finalize());if(r)for(const a of o.changes)null===(n=this._backgroundTokenizer.value)||void 0===n||n.requestTokens(a.fromLineNumber,a.toLineNumber+1);null===(i=this._defaultBackgroundTokenizer)||void 0===i||i.checkFinished()}forceTokenization(e){var t,n;const i=new LD;null===(t=this._tokenizer)||void 0===t||t.updateTokensUntilLine(i,e),this.setTokens(i.finalize()),null===(n=this._defaultBackgroundTokenizer)||void 0===n||n.checkFinished()}isCheapToTokenize(e){return!this._tokenizer||this._tokenizer.isCheapToTokenize(e)}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}getLineTokens(e){var t;const n=this._textModel.getLineContent(e),i=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,n);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const s=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,n);!i.equals(s)&&(null===(t=this._debugBackgroundTokenizer.value)||void 0===t?void 0:t.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return i}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return 0;const i=this._textModel.validatePosition(new Ci(e,t));return this.forceTokenization(i.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(i,n)}tokenizeLineWithEdit(e,t,n){if(!this._tokenizer)return null;const i=this._textModel.validatePosition(e);return this.forceTokenization(i.lineNumber),this._tokenizer.tokenizeLineWithEdit(i,t,n)}get hasTokens(){return this._tokens.hasTokens}}class VD extends Zt{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new ol((()=>this.update()),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){a(this._computedLineRanges,this._lineRanges,((e,t)=>e.equals(t)))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class jD{constructor(){this.changeType=1}}class UD{static applyInjectedText(e,t){if(!t||0===t.length)return e;let n="",i=0;for(const s of t)n+=e.substring(i,s.column-1),i=s.column-1,n+=s.options.content;return n+=e.substring(i),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new UD(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new UD(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort(((e,t)=>e.lineNumber===t.lineNumber?e.column===t.column?e.order-t.order:e.column-t.column:e.lineNumber-t.lineNumber)),t}constructor(e,t,n,i,s){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=i,this.order=s}}class qD{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class KD{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class GD{constructor(e,t,n,i){this.changeType=4,this.injectedTexts=i,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class YD{constructor(){this.changeType=5}}class QD{constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++){if(this.changes[t].changeType===e)return!0}return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.versionId,s=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new QD(n,i,s,r)}}class XD{constructor(e){this.changes=e}}class ZD{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=QD.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=ZD._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new ZD(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.eol,s=t.versionId,r=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing,a=e.isFlush||t.isFlush;return{changes:n,eol:i,isEolChange:e.isEolChange&&t.isEolChange,versionId:s,isUndoing:r,isRedoing:o,isFlush:a}}}const JD=ro("undoRedoService");class eA{constructor(e,t){this.resource=e,this.elements=t}}class tA{constructor(){this.id=tA._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}}tA._ID=0,tA.None=new tA;class nA{constructor(){this.id=nA._ID++,this.order=1}nextOrder(){return 0===this.id?0:this.order++}}nA._ID=0,nA.None=new nA;var iA,sA=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},rA=function(e,t){return function(n,i){t(n,i,e)}};function oA(e,t){let n;var i;return"string"===typeof e?n=function(e){const t=new CD;return t.acceptChunk(e),t.finish()}(e):n=(i=e)&&"function"===typeof i.read?function(e){const t=new CD;let n;for(;"string"===typeof(n=e.read());)t.acceptChunk(n);return t.finish()}(e):e,n.create(t)}let aA=0;class lA{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,n=0;for(;;){const i=this._source.read();if(null===i)return this._eos=!0,0===t?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=65536)return e.join("")}}}const cA=()=>{throw new Error("Invalid change accessor")};let uA=iA=class extends Zt{static resolveOptions(e,t){if(t.detectIndentation){const n=AL(e,t.tabSize,t.insertSpaces);return new Nf({tabSize:n.tabSize,indentSize:"tabSize",insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new Nf(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent((t=>e(t.contentChangedEvent)))}onDidChangeContentOrInjectedText(e){return Yt(this._eventEmitter.fastEvent((t=>e(t))),this._onDidChangeInjectedText.event((t=>e(t))))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;super(),this._undoRedoService=s,this._languageService=r,this._languageConfigurationService=o,this._onWillDispose=this._register(new un),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new kA((e=>this.handleBeforeFireDecorationsChangedEvent(e)))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new un),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new un),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new un),this._eventEmitter=this._register(new CA),this._languageSelectionListener=this._register(new Jt),this._deltaDecorationCallCnt=0,this._attachedViews=new xA,aA++,this.id="$model"+aA,this.isForSimpleWidget=n.isForSimpleWidget,this._associatedResource="undefined"===typeof i||null===i?fi.parse("inmemory://model/"+aA):i,this._attachedEditorCount=0;const{textBuffer:a,disposable:l}=oA(e,n.defaultEOL);this._buffer=a,this._bufferDisposable=l,this._options=iA.resolveOptions(this._buffer,n);const c="string"===typeof t?t:t.languageId;"string"!==typeof t&&(this._languageSelectionListener.value=t.onDidChange((()=>this._setLanguage(t.languageId)))),this._bracketPairs=this._register(new YE(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new PC(this,this._languageConfigurationService)),this._decorationProvider=this._register(new JE(this)),this._tokenizationTextModelPart=new WD(this._languageService,this._languageConfigurationService,this,this._bracketPairs,c,this._attachedViews);const u=this._buffer.getLineCount(),h=this._buffer.getValueLengthInRange(new xi(1,1,u,this._buffer.getLineLength(u)+1),0);n.largeFileOptimizations?(this._isTooLargeForTokenization=h>iA.LARGE_FILE_SIZE_THRESHOLD||u>iA.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=h>iA.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=h>iA._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=xr(aA),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new fA,this._commandManager=new EL(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange((()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()}))),this._languageService.requestRichLanguageFeatures(c)}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new wD([],"","\n",!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=Zt.None}_assertNotDisposed(){if(this._isDisposed)throw new Error("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new ZD(e,t)))}setValue(e){if(this._assertNotDisposed(),null===e||void 0===e)throw Pt();const{textBuffer:t,disposable:n}=oA(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,i,s,r,o,a){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),isEolChange:a,versionId:this.getVersionId(),isUndoing:s,isRedoing:r,isFlush:o}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new fA,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new QD([new jD],this._versionId,!1,!1),this._createContentChanged2(new xi(1,1,s,r),0,i,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=1===e?"\r\n":"\n";if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),s=this.getLineCount(),r=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new QD([new YD],this._versionId,!1,!1),this._createContentChanged2(new xi(1,1,s,r),0,i,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,i=t.length;n<i;n++){const i=t[n],s=i.range,r=i.cachedAbsoluteStart-i.start,o=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),a=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);i.cachedAbsoluteStart=o,i.cachedAbsoluteEnd=a,i.cachedVersionId=e,i.start=o-r,i.end=a-r,XL(i)}}onBeforeAttached(){return this._attachedEditorCount++,1===this._attachedEditorCount&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,0===this._attachedEditorCount&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let i=1;i<=n;i++){const n=this._buffer.getLineLength(i);n>=1e4?t+=n:e+=n}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t="undefined"!==typeof e.tabSize?e.tabSize:this._options.tabSize,n="undefined"!==typeof e.indentSize?e.indentSize:this._options.originalIndentSize,i="undefined"!==typeof e.insertSpaces?e.insertSpaces:this._options.insertSpaces,s="undefined"!==typeof e.trimAutoWhitespace?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r="undefined"!==typeof e.bracketColorizationOptions?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,o=new Nf({tabSize:t,indentSize:n,insertSpaces:i,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:r});if(this._options.equals(o))return;const a=this._options.createChangeEvent(o);this._options=o,this._bracketPairs.handleDidChangeOptions(a),this._decorationProvider.handleDidChangeOptions(a),this._onDidChangeOptions.fire(a)}detectIndentation(e,t){this._assertNotDisposed();const n=AL(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),ak(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=this.findMatches(vr.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map((e=>({range:e.range,text:null}))),(()=>null))}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Wt("Operation would exceed heap memory limits");const n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._buffer.getBOM()+i:i}createSnapshot(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new lA(this._buffer.createSnapshot(e))}getValueLength(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+i:i}getValueInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Wt("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Wt("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Wt("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),"\n"===this._buffer.getEOL()?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Wt("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Wt("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new Wt("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,i=e.startColumn;let s=Math.floor("number"!==typeof n||isNaN(n)?1:n),r=Math.floor("number"!==typeof i||isNaN(i)?1:i);if(s<1)s=1,r=1;else if(s>t)s=t,r=this.getLineMaxColumn(s);else if(r<=1)r=1;else{const e=this.getLineMaxColumn(s);r>=e&&(r=e)}const o=e.endLineNumber,a=e.endColumn;let l=Math.floor("number"!==typeof o||isNaN(o)?1:o),c=Math.floor("number"!==typeof a||isNaN(a)?1:a);if(l<1)l=1,c=1;else if(l>t)l=t,c=this.getLineMaxColumn(l);else if(c<=1)c=1;else{const e=this.getLineMaxColumn(l);c>=e&&(c=e)}return n===s&&i===r&&o===l&&a===c&&e instanceof xi&&!(e instanceof Ei)?e:new xi(s,r,l,c)}_isValidPosition(e,t,n){if("number"!==typeof e||"number"!==typeof t)return!1;if(isNaN(e)||isNaN(t))return!1;if(e<1||t<1)return!1;if((0|e)!==e||(0|t)!==t)return!1;if(e>this._buffer.getLineCount())return!1;if(1===t)return!0;if(t>this.getLineMaxColumn(e))return!1;if(1===n){if(ar(this._buffer.getLineCharCode(e,t-2)))return!1}return!0}_validatePosition(e,t,n){const i=Math.floor("number"!==typeof e||isNaN(e)?1:e),s=Math.floor("number"!==typeof t||isNaN(t)?1:t),r=this._buffer.getLineCount();if(i<1)return new Ci(1,1);if(i>r)return new Ci(r,this.getLineMaxColumn(r));if(s<=1)return new Ci(i,1);const o=this.getLineMaxColumn(i);if(s>=o)return new Ci(i,o);if(1===n){if(ar(this._buffer.getLineCharCode(i,s-2)))return new Ci(i,s-1)}return new Ci(i,s)}validatePosition(e){return this._assertNotDisposed(),e instanceof Ci&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(n,i,0))return!1;if(!this._isValidPosition(s,r,0))return!1;if(1===t){const e=i>1?this._buffer.getLineCharCode(n,i-2):0,t=r>1&&r<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,r-2):0,o=ar(e),a=ar(t);return!o&&!a}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof xi&&!(e instanceof Ei)&&this._isValidRange(e,1))return e;const t=this._validatePosition(e.startLineNumber,e.startColumn,0),n=this._validatePosition(e.endLineNumber,e.endColumn,0),i=t.lineNumber,s=t.column,r=n.lineNumber,o=n.column;{const e=s>1?this._buffer.getLineCharCode(i,s-2):0,t=o>1&&o<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,o-2):0,n=ar(e),a=ar(t);return n||a?i===r&&s===o?new xi(i,s-1,r,o-1):n&&a?new xi(i,s-1,r,o+1):n?new xi(i,s-1,r,o):new xi(i,s,r,o+1):new xi(i,s,r,o)}}modifyPosition(e,t){this._assertNotDisposed();const n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new xi(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,i){return this._buffer.findMatchesLineByLine(e,t,n,i)}findMatches(e,t,n,i,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:999;this._assertNotDisposed();let a=null;null!==t&&(Array.isArray(t)||(t=[t]),t.every((e=>xi.isIRange(e)))&&(a=t.map((e=>this.validateRange(e))))),null===a&&(a=[this.getFullModelRange()]),a=a.sort(((e,t)=>e.startLineNumber-t.startLineNumber||e.startColumn-t.startColumn));const l=[];let c;if(l.push(a.reduce(((e,t)=>xi.areIntersecting(e,t)?e.plusRange(t):(l.push(e),t)))),!n&&e.indexOf("\n")<0){const t=new Pf(e,n,i,s).parseSearchRequest();if(!t)return[];c=e=>this.findMatchesLineByLine(e,t,r,o)}else c=t=>zf.findMatches(this,new Pf(e,n,i,s),t,r,o);return l.map(c).reduce(((e,t)=>e.concat(t)),[])}findNextMatch(e,t,n,i,s,r){this._assertNotDisposed();const o=this.validatePosition(t);if(!n&&e.indexOf("\n")<0){const t=new Pf(e,n,i,s).parseSearchRequest();if(!t)return null;const a=this.getLineCount();let l=new xi(o.lineNumber,o.column,a,this.getLineMaxColumn(a)),c=this.findMatchesLineByLine(l,t,r,1);return zf.findNextMatch(this,new Pf(e,n,i,s),o,r),c.length>0?c[0]:(l=new xi(1,1,o.lineNumber,this.getLineMaxColumn(o.lineNumber)),c=this.findMatchesLineByLine(l,t,r,1),c.length>0?c[0]:null)}return zf.findNextMatch(this,new Pf(e,n,i,s),o,r)}findPreviousMatch(e,t,n,i,s,r){this._assertNotDisposed();const o=this.validatePosition(t);return zf.findPreviousMatch(this,new Pf(e,n,i,s),o,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if(("\n"===this.getEOL()?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof $f?e:new $f(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n,i){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n,i)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n,i){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const n=t.map((e=>({range:this.validateRange(e.range),text:e.text})));let i=!0;if(e)for(let t=0,s=e.length;t<s;t++){const s=e[t];let r=!1;for(let e=0,t=n.length;e<t;e++){const t=n[e].range,i=t.startLineNumber>s.endLineNumber,o=s.startLineNumber>t.endLineNumber;if(!i&&!o){r=!0;break}}if(!r){i=!1;break}}if(i)for(let e=0,s=this._trimAutoWhitespaceLines.length;e<s;e++){const i=this._trimAutoWhitespaceLines[e],s=this.getLineMaxColumn(i);let r=!0;for(let e=0,t=n.length;e<t;e++){const t=n[e].range,o=n[e].text;if(!(i<t.startLineNumber||i>t.endLineNumber)&&(!(i===t.startLineNumber&&t.startColumn===s&&t.isEmpty()&&o&&o.length>0&&"\n"===o.charAt(0))&&!(i===t.startLineNumber&&1===t.startColumn&&t.isEmpty()&&o&&o.length>0&&"\n"===o.charAt(o.length-1)))){r=!1;break}}if(r){const e=new xi(i,1,i,s);t.push(new $f(null,e,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return null===this._initialUndoRedoSnapshot&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n,i)}_applyUndo(e,t,n,i){const s=e.map((e=>{const t=this.getPositionAt(e.newPosition),n=this.getPositionAt(e.newEnd);return{range:new xi(t.lineNumber,t.column,n.lineNumber,n.column),text:e.oldText}}));this._applyUndoRedoEdits(s,t,!0,!1,n,i)}_applyRedo(e,t,n,i){const s=e.map((e=>{const t=this.getPositionAt(e.oldPosition),n=this.getPositionAt(e.oldEnd);return{range:new xi(t.lineNumber,t.column,n.lineNumber,n.column),text:e.newText}}));this._applyUndoRedoEdits(s,t,!1,!0,n,i)}_applyUndoRedoEdits(e,t,n,i,s,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=i,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),i=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),s=this._buffer.getLineCount(),r=i.changes;if(this._trimAutoWhitespaceLines=i.trimAutoWhitespaceLineNumbers,0!==r.length){for(let n=0,i=r.length;n<i;n++){const e=r[n];this._decorationsTree.acceptReplace(e.rangeOffset,e.rangeLength,e.text.length,e.forceMoveMarkers)}const e=[];this._increaseVersionId();let t=n;for(let n=0,i=r.length;n<i;n++){const i=r[n],[o]=Hx(i.text);this._onDidChangeDecorations.fire();const a=i.range.startLineNumber,l=i.range.endLineNumber,c=l-a,u=o,h=Math.min(c,u),d=u-c,f=s-t-d+a,g=f,p=f+u,m=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new Ci(g,1)),this.getOffsetAt(new Ci(p,this.getLineMaxColumn(p))),0),b=UD.fromDecorations(m),_=new x(b);for(let t=h;t>=0;t--){const n=a+t,i=f+t;_.takeFromEndWhile((e=>e.lineNumber>i));const s=_.takeFromEndWhile((e=>e.lineNumber===i));e.push(new qD(n,this.getLineContent(i),s))}if(h<c){const t=a+h;e.push(new KD(t+1,l))}if(h<u){const n=new x(b),i=a+h,r=u-h,o=s-t-r+i+1,l=[],c=[];for(let e=0;e<r;e++){const t=o+e;c[e]=this.getLineContent(t),n.takeWhile((e=>e.lineNumber<t)),l[e]=n.takeWhile((e=>e.lineNumber===t))}e.push(new GD(i+1,a+u,c,l))}t+=d}this._emitContentChangedEvent(new QD(e,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:r,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return null===i.reverseEdits?void 0:i.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(null===e||0===e.size)return;const t=Array.from(e).map((e=>new qD(e,this.getLineContent(e),this._getInjectedTextInLine(e))));this._onDidChangeInjectedText.fire(new XD(t))}changeDecorations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const n={addDecoration:(t,n)=>this._deltaDecorationsImpl(e,[],[{range:t,options:n}])[0],changeDecoration:(e,t)=>{this._changeDecorationImpl(e,t)},changeDecorationOptions:(e,t)=>{this._changeDecorationOptionsImpl(e,wA(t))},removeDecoration:t=>{this._deltaDecorationsImpl(e,[t],[])},deltaDecorations:(t,n)=>0===t.length&&0===n.length?[]:this._deltaDecorationsImpl(e,t,n)};let i=null;try{i=t(n)}catch(zY){Nt(zY)}return n.addDecoration=cA,n.changeDecoration=cA,n.changeDecorationOptions=cA,n.removeDecoration=cA,n.deltaDecorations=cA,i}deltaDecorations(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._assertNotDisposed(),e||(e=[]),0===e.length&&0===t.length)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Nt(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const i=e?this._decorations[e]:null;if(!i)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:SA[n]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(i),delete this._decorations[i.id],null;const s=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),o=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(i),i.reset(this.getVersionId(),r,o,s),i.setOptions(SA[n]),this._decorationsTree.insert(i),i.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,i=t.length;n<i;n++){const e=t[n];this._decorationsTree.delete(e),delete this._decorations[e.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=this.getLineCount(),o=Math.min(r,Math.max(1,e)),a=Math.min(r,Math.max(1,t)),l=this.getLineMaxColumn(a),c=new xi(o,1,a,l),u=this._getDecorationsInRange(c,n,i,s);return v(u,this._decorationProvider.getDecorationsInRange(c,n,i)),u}getDecorationsInRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=this.validateRange(e),o=this._getDecorationsInRange(r,t,n,s);return v(o,this._decorationProvider.getDecorationsInRange(r,t,n,i)),o}getOverviewRulerDecorations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),i=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return UD.fromDecorations(i).filter((t=>t.lineNumber===e))}getAllDecorations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._decorationsTree.getAll(this,e,t,!1,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}getAllMarginDecorations(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,n,i){const s=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,s,r,t,n,i)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const t=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.endLineNumber)}if(n.options.before){const t=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(t.startLineNumber)}const i=this._validateRangeRelaxedNoAllocations(t),s=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),r=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),s,r,i),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const i=!(!n.options.overviewRuler||!n.options.overviewRuler.color),s=!(!t.overviewRuler||!t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const e=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(n.options.before||t.before){const e=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}const r=i!==s,o=function(e){return!!e.after||!!e.before}(t)!==dA(n);r||o?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=this.getVersionId(),r=t.length;let o=0;const a=n.length;let l=0;this._onDidChangeDecorations.beginDeferredEmit();try{const c=new Array(a);for(;o<r||l<a;){let u=null;if(o<r){do{u=this._decorations[t[o++]]}while(!u&&o<r);if(u){if(u.options.after){const e=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.endLineNumber)}if(u.options.before){const e=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(e.startLineNumber)}this._decorationsTree.delete(u),i||this._onDidChangeDecorations.checkAffectedAndFire(u.options)}}if(l<a){if(!u){const e=++this._lastDecorationId,t="".concat(this._instanceId,";").concat(e);u=new zL(t,0,0),this._decorations[t]=u}const t=n[l],r=this._validateRangeRelaxedNoAllocations(t.range),o=wA(t.options),a=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),h=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);u.ownerId=e,u.reset(s,a,h,r),u.setOptions(o),u.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),u.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber),i||this._onDidChangeDecorations.checkAffectedAndFire(o),this._decorationsTree.insert(u),c[l]=u.id,l++}else u&&delete this._decorations[u.id]}return c}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){"string"===typeof e?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange((()=>this._setLanguage(e.languageId,t))),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return function(e){let t=0;for(const n of e){if(" "!==n&&"\t"!==n)break;t++}return t}(this.getLineContent(e))+1}};function hA(e){return!(!e.options.overviewRuler||!e.options.overviewRuler.color)}function dA(e){return!!e.options.after||!!e.options.before}uA._MODEL_SYNC_LIMIT=52428800,uA.LARGE_FILE_SIZE_THRESHOLD=20971520,uA.LARGE_FILE_LINE_COUNT_THRESHOLD=3e5,uA.LARGE_FILE_HEAP_OPERATION_THRESHOLD=268435456,uA.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Oe.tabSize,indentSize:Oe.indentSize,insertSpaces:Oe.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Oe.trimAutoWhitespace,largeFileOptimizations:Oe.largeFileOptimizations,bracketPairColorizationOptions:Oe.bracketPairColorizationOptions},uA=iA=sA([rA(4,JD),rA(5,dd),rA(6,qd)],uA);class fA{constructor(){this._decorationsTree0=new HL,this._decorationsTree1=new HL,this._injectedTextDecorationsTree=new HL}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)null===n.range&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,i,s,r){const o=e.getVersionId(),a=this._intervalSearch(t,n,i,s,o,r);return this._ensureNodesHaveRanges(e,a)}_intervalSearch(e,t,n,i,s,r){const o=this._decorationsTree0.intervalSearch(e,t,n,i,s,r),a=this._decorationsTree1.intervalSearch(e,t,n,i,s,r),l=this._injectedTextDecorationsTree.intervalSearch(e,t,n,i,s,r);return o.concat(a).concat(l)}getInjectedTextInInterval(e,t,n,i){const s=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,n,i,!1,s,!1);return this._ensureNodesHaveRanges(e,r).filter((e=>e.options.showIfCollapsed||!e.range.isEmpty()))}getAllInjectedText(e,t){const n=e.getVersionId(),i=this._injectedTextDecorationsTree.search(t,!1,n,!1);return this._ensureNodesHaveRanges(e,i).filter((e=>e.options.showIfCollapsed||!e.range.isEmpty()))}getAll(e,t,n,i,s){const r=e.getVersionId(),o=this._search(t,n,i,r,s);return this._ensureNodesHaveRanges(e,o)}_search(e,t,n,i,s){if(n)return this._decorationsTree1.search(e,t,i,s);{const n=this._decorationsTree0.search(e,t,i,s),r=this._decorationsTree1.search(e,t,i,s),o=this._injectedTextDecorationsTree.search(e,t,i,s);return n.concat(r).concat(o)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),i=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(i)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){dA(e)?this._injectedTextDecorationsTree.insert(e):hA(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){dA(e)?this._injectedTextDecorationsTree.delete(e):hA(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),null===t.range&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){dA(e)?this._injectedTextDecorationsTree.resolveNode(e,t):hA(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i),this._injectedTextDecorationsTree.acceptReplace(e,t,n,i)}}function gA(e){return e.replace(/[^a-z0-9\-_]/gi," ")}class pA{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class mA extends pA{constructor(e){super(e),this._resolvedColor=null,this.position="number"===typeof e.position?e.position:Lf.Center}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if("string"===typeof e)return e;const n=e?t.getColor(e.id):null;return n?n.toString():""}}class bA{constructor(e){var t;this.position=null!==(t=null===e||void 0===e?void 0:e.position)&&void 0!==t?t:Df.Center,this.persistLane=null===e||void 0===e?void 0:e.persistLane}}class _A extends pA{constructor(e){super(e),this.position=e.position}getColor(e){return this._resolvedColor||("light"!==e.type&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return"string"===typeof e?rp.fromHex(e):t.getColor(e.id)}}class vA{static from(e){return e instanceof vA?e:new vA(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class yA{static register(e){return new yA(e)}static createDynamic(e){return new yA(e)}constructor(e){var t,n,i,s,r,o;this.description=e.description,this.blockClassName=e.blockClassName?gA(e.blockClassName):null,this.blockDoesNotCollapse=null!==(t=e.blockDoesNotCollapse)&&void 0!==t?t:null,this.blockIsAfterEnd=null!==(n=e.blockIsAfterEnd)&&void 0!==n?n:null,this.blockPadding=null!==(i=e.blockPadding)&&void 0!==i?i:null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?gA(e.className):null,this.shouldFillLineOnLineBreak=null!==(s=e.shouldFillLineOnLineBreak)&&void 0!==s?s:null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new mA(e.overviewRuler):null,this.minimap=e.minimap?new _A(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new bA(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?gA(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?gA(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?gA(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?e.linesDecorationsTooltip.replace(/[<>"'&]/g,(e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?gA(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?gA(e.marginClassName):null,this.inlineClassName=e.inlineClassName?gA(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?gA(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?gA(e.afterContentClassName):null,this.after=e.after?vA.from(e.after):null,this.before=e.before?vA.from(e.before):null,this.hideInCommentTokens=null!==(r=e.hideInCommentTokens)&&void 0!==r&&r,this.hideInStringTokens=null!==(o=e.hideInStringTokens)&&void 0!==o&&o}}yA.EMPTY=yA.register({description:"empty"});const SA=[yA.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),yA.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),yA.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),yA.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function wA(e){return e instanceof yA?e:yA.createDynamic(e)}class kA extends Zt{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new un),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,0===this._deferredCnt&&(this._shouldFireDeferred&&this.doFire(),null===(e=this._affectedInjectedTextLines)||void 0===e||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){var t,n;this._affectsMinimap||(this._affectsMinimap=!!(null===(t=e.minimap)||void 0===t?void 0:t.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!(null===(n=e.overviewRuler)||void 0===n?void 0:n.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!e.lineNumberClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){0===this._deferredCnt?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class CA extends Zt{constructor(){super(),this._fastEmitter=this._register(new un),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new un),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._deferredCnt--,0===this._deferredCnt&&null!==this._deferredEvent){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){this._deferredCnt>0?this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e:(this._fastEmitter.fire(e),this._slowEmitter.fire(e))}}class xA{constructor(){this._onDidChangeVisibleRanges=new un,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new EA((t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})}));return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class EA{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const n=e.map((e=>new ig(e.startLineNumber,e.endLineNumber+1)));this.handleStateChange({visibleLineRanges:n,stabilized:t})}}class LA{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new pk(new xi(1,1,1,1),0,0,new Ci(1,1),0),new pk(new xi(1,1,1,1),0,0,new Ci(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new dk(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?Ei.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):Ei.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,i){return t.equals(n)?i:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,i=t.selectionStart.getStartPosition(),s=t.selectionStart.getEndPosition(),r=e.normalizePosition(n,2),o=this._validatePositionWithCache(e,i,n,r),a=this._validatePositionWithCache(e,s,i,o);return n.equals(r)&&i.equals(o)&&s.equals(a)?t:new pk(xi.fromPositions(o,a),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+i.column-o.column,r,t.leftoverVisibleColumns+n.column-r.column)}_setState(e,t,n){if(n&&(n=LA._validateViewState(e.viewModel,n)),t){const n=e.model.validateRange(t.selectionStart),i=t.selectionStart.equalsRange(n)?t.selectionStartLeftoverVisibleColumns:0,s=e.model.validatePosition(t.position),r=t.position.equals(s)?t.leftoverVisibleColumns:0;t=new pk(n,t.selectionStartKind,i,s,r)}else{if(!n)return;const i=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),s=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new pk(i,n.selectionStartKind,n.selectionStartLeftoverVisibleColumns,s,n.leftoverVisibleColumns)}if(n){const i=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),s=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new pk(i,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,s,t.leftoverVisibleColumns)}else{const i=e.coordinatesConverter.convertModelPositionToViewPosition(new Ci(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),s=e.coordinatesConverter.convertModelPositionToViewPosition(new Ci(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new xi(i.lineNumber,i.column,s.lineNumber,s.column),o=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new pk(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class DA{constructor(e){this.context=e,this.cursors=[new LA(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map((e=>e.readSelectionFromMarkers(this.context)))}getAll(){return this.cursors.map((e=>e.asCursorState()))}getViewPositions(){return this.cursors.map((e=>e.viewState.position))}getTopMostViewPosition(){return(e=this.cursors,t=w((e=>e.viewState.position),Ci.compare),tg(e,((e,n)=>-t(e,n)))).viewState.position;var e,t}getBottomMostViewPosition(){return function(e,t){if(0===e.length)return;let n=e[0];for(let i=1;i<e.length;i++){const s=e[i];t(s,n)>=0&&(n=s)}return n}(this.cursors,w((e=>e.viewState.position),Ci.compare)).viewState.position}getSelections(){return this.cursors.map((e=>e.modelState.selection))}getViewSelections(){return this.cursors.map((e=>e.viewState.selection))}setSelections(e){this.setStates(dk.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){null!==e&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,n=e.length;if(t<n){const e=n-t;for(let t=0;t<e;t++)this._addSecondaryCursor()}else if(t>n){const e=t-n;for(let t=0;t<e;t++)this._removeSecondaryCursor(this.cursors.length-2)}for(let i=0;i<n;i++)this.cursors[i+1].setState(this.context,e[i].modelState,e[i].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new LA(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return 1===this.cursors.length||0===this.lastAddedCursorIndex?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(1===this.cursors.length)return;const e=this.cursors.slice(0),t=[];for(let n=0,i=e.length;n<i;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort(w((e=>e.selection),xi.compareRangesUsingStarts));for(let n=0;n<t.length-1;n++){const i=t[n],s=t[n+1],r=i.selection,o=s.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let a;if(a=o.isEmpty()||r.isEmpty()?o.getStartPosition().isBeforeOrEqual(r.getEndPosition()):o.getStartPosition().isBefore(r.getEndPosition()),a){const r=i.index<s.index?n:n+1,o=i.index<s.index?n+1:n,a=t[o].index,l=t[r].index,c=t[o].selection,u=t[r].selection;if(!c.equalsSelection(u)){const n=c.plusRange(u),i=c.selectionStartLineNumber===c.startLineNumber&&c.selectionStartColumn===c.startColumn,s=u.selectionStartLineNumber===u.startLineNumber&&u.selectionStartColumn===u.startColumn;let o,h;a===this.lastAddedCursorIndex?(o=i,this.lastAddedCursorIndex=l):o=s,h=o?new Ei(n.startLineNumber,n.startColumn,n.endLineNumber,n.endColumn):new Ei(n.endLineNumber,n.endColumn,n.startLineNumber,n.startColumn),t[r].selection=h;const d=dk.fromModelSelection(h);e[l].setState(this.context,d.modelState,d.viewState)}for(const e of t)e.index>a&&e.index--;e.splice(a,1),t.splice(o,1),this._removeSecondaryCursor(a-1),n--}}}}class AA{constructor(e,t,n,i){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=i}}class TA{constructor(){this.type=0}}class NA{constructor(){this.type=1}}class IA{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class $A{constructor(e,t,n){this.selections=e,this.modelSelections=t,this.reason=n,this.type=3}}class MA{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class RA{constructor(){this.type=5}}class OA{constructor(e){this.type=6,this.isFocused=e}}class PA{constructor(){this.type=7}}class FA{constructor(){this.type=8}}class BA{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class zA{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class WA{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class HA{constructor(e,t,n,i,s,r,o){this.source=e,this.minimalReveal=t,this.range=n,this.selections=i,this.verticalType=s,this.revealHorizontal=r,this.scrollType=o,this.type=12}}class VA{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class jA{constructor(e){this.theme=e,this.type=14}}class UA{constructor(e){this.type=15,this.ranges=e}}class qA{constructor(){this.type=16}}class KA{constructor(){this.type=17}}class GA extends Zt{constructor(){super(),this._onEvent=this._register(new un),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++){const n=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(n)return void(this._outgoingEvents[t]=n)}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,1===this._collectorCnt&&(this._collector=new YA),this._collector}endEmitViewEvents(){if(this._collectorCnt--,0===this._collectorCnt){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class YA{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class QA{constructor(e,t,n,i){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=i,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new QA(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class XA{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new XA(this.oldHasFocus,e.hasFocus)}}class ZA{constructor(e,t,n,i,s,r,o,a){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=i,this.scrollWidth=s,this.scrollLeft=r,this.scrollHeight=o,this.scrollTop=a,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new ZA(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class JA{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class eT{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class tT{constructor(e,t,n,i,s,r,o){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=i,this.source=s,this.reason=r,this.reachedMaxCursorCount=o}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(!e[i].equalsSelection(t[i]))return!1;return!0}isNoOp(){return tT._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new tT(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class nT{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class iT{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class sT{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class rT{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class oT{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class aT{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class lT{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class cT extends Zt{constructor(e,t,n,i){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new AA(this._model,this._viewModel,this._coordinatesConverter,i),this._cursors=new DA(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=Gt(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new AA(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,i){let s=!1;const r=this.context.cursorConfig.multiCursorLimit;null!==i&&i.length>r&&(i=i.slice(0,r),s=!0);const o=uT.from(this._model,this);return this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,o,s)}setCursorColumnSelectData(e){this._columnSelectData=e}revealPrimary(e,t,n,i,s,r){const o=this._cursors.getViewPositions();let a=null,l=null;o.length>1?l=this._cursors.getViewSelections():a=xi.fromPositions(o[0],o[0]),e.emitViewEvent(new HA(t,n,a,l,i,s,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push({inSelectionMode:!i.isEmpty(),selectionStart:{lineNumber:i.selectionStartLineNumber,column:i.selectionStartColumn},position:{lineNumber:i.positionLineNumber,column:i.positionColumn}})}return e}restoreState(e,t){const n=[];for(let i=0,s=t.length;i<s;i++){const e=t[i];let s=1,r=1;e.position&&e.position.lineNumber&&(s=e.position.lineNumber),e.position&&e.position.column&&(r=e.position.column);let o=s,a=r;e.selectionStart&&e.selectionStart.lineNumber&&(o=e.selectionStart.lineNumber),e.selectionStart&&e.selectionStart.column&&(a=e.selectionStart.column),n.push({selectionStartLineNumber:o,selectionStartColumn:a,positionLineNumber:s,positionColumn:r})}this.setStates(e,"restoreState",0,dk.fromModelSelections(n)),this.revealPrimary(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof XD){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const n=t.rawContentChangedEvent;if(this._knownModelVersionId=n.versionId,this._isHandling)return;const i=n.containsEvent(1);if(this._prevEditOperationType=0,i)this._cursors.dispose(),this._cursors=new DA(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&n.resultingSelection&&n.resultingSelection.length>0){const t=dk.fromModelSelections(n.resultingSelection);this.setStates(e,"modelChange",n.isUndoing?5:n.isRedoing?6:2,t)&&this.revealPrimary(e,"modelChange",!1,0,!0,0)}else{const t=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,dk.fromModelSelections(t))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,i){this.setStates(e,t,i,dk.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const n=[],i=[];for(let o=0,a=e.length;o<a;o++)n.push({range:e[o],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),i.push({range:t[o],options:{description:"auto-closed-enclosing",stickiness:1}});const s=this._model.deltaDecorations([],n),r=this._model.deltaDecorations([],i);this._autoClosedActions.push(new hT(this._model,s,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=dT.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const n=[],i=[];for(let t=0;t<e.commands.length;t++){const s=e.commands[t];s instanceof zk&&s.enclosingRange&&s.closeCharacterRange&&(n.push(s.closeCharacterRange),i.push(s.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,i),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){e&&0!==e.length||(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,i,s){const r=uT.from(this._model,this);if(r.equals(i))return!1;const o=this._cursors.getSelections(),a=this._cursors.getViewSelections();if(e.emitViewEvent(new $A(a,o,n)),!i||i.cursorState.length!==r.cursorState.length||r.cursorState.some(((e,t)=>!e.modelState.equals(i.cursorState[t].modelState)))){const a=i?i.cursorState.map((e=>e.modelState.selection)):null,l=i?i.modelVersionId:0;e.emitOutgoingEvent(new tT(a,o,l,r.modelVersionId,t||"keyboard",n,s))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!i.text||i.text.indexOf("\n")>=0)return null;const s=i.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!s)return null;const r=s[1],o=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(r);if(!o||1!==o.length)return null;const a=o[0].open,l=i.text.length-s[2].length-1,c=i.text.lastIndexOf(a,l-1);if(-1===c)return null;t.push([c,l])}return t}executeEdits(e,t,n,i){let s=null;"snippet"===t&&(s=this._findAutoClosingPairs(n)),s&&(n[0]._isTracked=!0);const r=[],o=[],a=this._model.pushEditOperations(this.getSelections(),n,(e=>{if(s)for(let n=0,i=s.length;n<i;n++){const[t,i]=s[n],a=e[n],l=a.range.startLineNumber,c=a.range.startColumn-1+t,u=a.range.startColumn-1+i;r.push(new xi(l,u+1,l,u+2)),o.push(new xi(l,c+1,l,u+2))}const t=i(e);return t&&(this._isHandling=!0),t}));a&&(this._isHandling=!1,this.setSelections(e,t,a,0)),r.length>0&&this._pushAutoClosedAction(r,o)}_executeEdit(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(this.context.cursorConfig.readOnly)return;const s=uT.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(r){Nt(r)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,i,s,!1)&&this.revealPrimary(t,n,!1,0,!0,0)}getAutoClosedCharacters(){return hT.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new gT(this._model,this.getSelections())}endComposition(e,t){const n=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit((()=>{"keyboard"===t&&this._executeEditOperation(Bk.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,n,this.getSelections(),this.getAutoClosedCharacters()))}),e,t)}type(e,t,n){this._executeEdit((()=>{if("keyboard"===n){const e=t.length;let n=0;for(;n<e;){const e=fr(t,n),i=t.substr(n,e);this._executeEditOperation(Bk.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),i)),n+=e}}else this._executeEditOperation(Bk.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))}),e,n)}compositionType(e,t,n,i,s,r){if(0!==t.length||0!==n||0!==i)this._executeEdit((()=>{this._executeEditOperation(Bk.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,i,s))}),e,r);else if(0!==s){const t=this.getSelections().map((e=>{const t=e.getPosition();return new Ei(t.lineNumber,t.column+s,t.lineNumber,t.column+s)}));this.setSelections(e,r,t,0)}}paste(e,t,n,i,s){this._executeEdit((()=>{this._executeEditOperation(Bk.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,i||[]))}),e,s,4)}cut(e,t){this._executeEdit((()=>{this._executeEditOperation(xk.cut(this.context.cursorConfig,this._model,this.getSelections()))}),e,t)}executeCommand(e,t,n){this._executeEdit((()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new mk(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),e,n)}executeCommands(e,t,n){this._executeEdit((()=>{this._executeEditOperation(new mk(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))}),e,n)}}class uT{static from(e,t){return new uT(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e)return!1;if(this.modelVersionId!==e.modelVersionId)return!1;if(this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class hT{static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){const t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const e=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(e&&(t.push(e),e.startLineNumber!==e.endLineNumber))return!1}t.sort(xi.compareRangesUsingStarts),e.sort(xi.compareRangesUsingStarts);for(let n=0;n<e.length;n++){if(n>=t.length)return!1;if(!t[n].strictContainsRange(e[n]))return!1}return!0}}class dT{static executeCommands(e,t,n){const i={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},s=this._innerExecuteCommands(i,n);for(let r=0,o=i.trackedRanges.length;r<o;r++)i.model._setTrackedRange(i.trackedRanges[r],null,0);return s}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(0===n.operations.length)return null;const i=n.operations,s=this._getLoserCursorMap(i);if(s.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let l=0,c=i.length;l<c;l++)s.hasOwnProperty(i[l].identifier.major.toString())||r.push(i[l]);n.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let o=e.model.pushEditOperations(e.selectionsBefore,r,(n=>{const i=[];for(let t=0;t<e.selectionsBefore.length;t++)i[t]=[];for(const e of n)e.identifier&&i[e.identifier.major].push(e);const s=(e,t)=>e.identifier.minor-t.identifier.minor,r=[];for(let o=0;o<e.selectionsBefore.length;o++)i[o].length>0?(i[o].sort(s),r[o]=t[o].computeCursorState(e.model,{getInverseEditOperations:()=>i[o],getTrackedSelection:t=>{const n=parseInt(t,10),i=e.model._getTrackedRange(e.trackedRanges[n]);return 0===e.trackedRangesDirection[n]?new Ei(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn):new Ei(i.endLineNumber,i.endColumn,i.startLineNumber,i.startColumn)}})):r[o]=e.selectionsBefore[o];return r}));o||(o=e.selectionsBefore);const a=[];for(const l in s)s.hasOwnProperty(l)&&a.push(parseInt(l,10));a.sort(((e,t)=>t-e));for(const l of a)o.splice(l,1);return o}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],i=!1;for(let s=0,r=t.length;s<r;s++){const r=t[s];if(r){const t=this._getEditOperationsFromCommand(e,s,r);n=n.concat(t.operations),i=i||t.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:i}}static _getEditOperationsFromCommand(e,t,n){const i=[];let s=0;const r=function(e,r){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];xi.isEmpty(e)&&""===r||i.push({identifier:{major:t,minor:s++},range:e,text:r,forceMoveMarkers:o,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let o=!1;const a={addEditOperation:r,addTrackedEditOperation:(e,t,n)=>{o=!0,r(e,t,n)},trackSelection:(t,n)=>{const i=Ei.liftSelection(t);let s;if(i.isEmpty())if("boolean"===typeof n)s=n?2:3;else{const t=e.model.getLineMaxColumn(i.startLineNumber);s=i.startColumn===t?2:3}else s=1;const r=e.trackedRanges.length,o=e.model._setTrackedRange(null,i,s);return e.trackedRanges[r]=o,e.trackedRangesDirection[r]=i.getDirection(),r.toString()}};try{n.getEditOperations(e.model,a)}catch(zY){return Nt(zY),{operations:[],hadTrackedEditOperation:!1}}return{operations:i,hadTrackedEditOperation:o}}static _getLoserCursorMap(e){(e=e.slice(0)).sort(((e,t)=>-xi.compareRangesUsingEnds(e.range,t.range)));const t={};for(let n=1;n<e.length;n++){const i=e[n-1],s=e[n];if(xi.getStartPosition(i.range).isBefore(xi.getEndPosition(s.range))){let r;r=i.identifier.major>s.identifier.major?i.identifier.major:s.identifier.major,t[r.toString()]=!0;for(let t=0;t<e.length;t++)e[t].identifier.major===r&&(e.splice(t,1),t<n&&n--,t--);n>0&&n--}}return t}}class fT{constructor(e,t,n){this.text=e,this.startSelection=t,this.endSelection=n}}class gT{static _capture(e,t){const n=[];for(const i of t){if(i.startLineNumber!==i.endLineNumber)return null;n.push(new fT(e.getLineContent(i.startLineNumber),i.startColumn-1,i.endColumn-1))}return n}constructor(e,t){this._original=gT._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const n=gT._capture(e,t);if(!n)return null;if(this._original.length!==n.length)return null;const i=[];for(let s=0,r=this._original.length;s<r;s++)i.push(gT._deduceOutcome(this._original[s],n[s]));return i}static _deduceOutcome(e,t){const n=Math.min(e.startSelection,t.startSelection,rr(e.text,t.text)),i=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,or(e.text,t.text)),s=e.text.substring(n,e.text.length-i),r=t.text.substring(n,t.text.length-i);return new Wk(s,e.startSelection-n,e.endSelection-n,r,t.startSelection-n,t.endSelection-n)}}const pT={getInitialState:()=>Ip,tokenizeEncoded:(e,t,n)=>Mp(0,n)};function mT(e,t,n,i,s,r,o){let a="<div>",l=i,c=0,u=!0;for(let h=0,d=t.getCount();h<d;h++){const d=t.getEndOffset(h);if(d<=i)continue;let f="";for(;l<d&&l<s;l++){const t=e.charCodeAt(l);switch(t){case 9:{let e=r-(l+c)%r;for(c+=e-1;e>0;)o&&u?(f+="&#160;",u=!1):(f+=" ",u=!0),e--;break}case 60:f+="&lt;",u=!1;break;case 62:f+="&gt;",u=!1;break;case 38:f+="&amp;",u=!1;break;case 0:f+="&#00;",u=!1;break;case 65279:case 8232:case 8233:case 133:f+="\ufffd",u=!1;break;case 13:f+="&#8203",u=!1;break;case 32:o&&u?(f+="&#160;",u=!1):(f+=" ",u=!0);break;default:f+=String.fromCharCode(t),u=!1}}if(a+='<span style="'.concat(t.getInlineStyle(h,n),'">').concat(f,"</span>"),d>s||l>=s)break}return a+="</div>",a}function bT(e,t,n){let i='<div class="monaco-tokenized-source">';const s=qs(e);let r=n.getInitialState();for(let o=0,a=s.length;o<a;o++){const e=s[o];o>0&&(i+="<br/>");const a=n.tokenizeEncoded(e,!0,r);Op.convertToEndOffset(a.tokens,e.length);const l=new Op(a.tokens,e,t).inflate();let c=0;for(let t=0,n=l.getCount();t<n;t++){const n=l.getClassName(t),s=l.getEndOffset(t);i+='<span class="'.concat(n,'">').concat(Ws(e.substring(c,s)),"</span>"),c=s}r=a.endState}return i+="</div>",i}class _T{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,i=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,i)}}class vT{constructor(e,t,n,i,s){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=i,this.minWidth=s,this.prefixSum=0}}class yT{constructor(e,t,n,i){this._instanceId=xr(++yT.INSTANCE_COUNT),this._pendingChanges=new _T,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=i}static findInsertionIndex(e,t,n){let i=0,s=e.length;for(;i<s;){const r=i+s>>>1;t===e[r].afterLineNumber?n<e[r].ordinal?s=r:i=r+1:t<e[r].afterLineNumber?s=r:i=r+1}return i}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(e,n,i,s)=>{t=!0,e|=0,n|=0,i|=0,s|=0;const r=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new vT(r,e,n,i,s)),r},changeOneWhitespace:(e,n,i)=>{t=!0,n|=0,i|=0,this._pendingChanges.change({id:e,newAfterLineNumber:n,newHeight:i})},removeWhitespace:e=>{t=!0,this._pendingChanges.remove({id:e})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const t of e)this._insertWhitespace(t);for(const e of t)this._changeOneWhitespace(e.id,e.newAfterLineNumber,e.newHeight);for(const e of n){const t=this._findWhitespaceIndex(e.id);-1!==t&&this._removeWhitespace(t)}return}const i=new Set;for(const a of n)i.add(a.id);const s=new Map;for(const a of t)s.set(a.id,a);const r=e=>{const t=[];for(const n of e)if(!i.has(n.id)){if(s.has(n.id)){const e=s.get(n.id);n.afterLineNumber=e.newAfterLineNumber,n.height=e.newHeight}t.push(n)}return t},o=r(this._arr).concat(r(e));o.sort(((e,t)=>e.afterLineNumber===t.afterLineNumber?e.ordinal-t.ordinal:e.afterLineNumber-t.afterLineNumber)),this._arr=o,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=yT.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,i=t.length;n<i;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const i=this._findWhitespaceIndex(e);if(-1!==i&&(this._arr[i].height!==n&&(this._arr[i].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)),this._arr[i].afterLineNumber!==t)){const e=this._arr[i];this._removeWhitespace(i),e.afterLineNumber=t,this._insertWhitespace(e)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount-=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const i=this._arr[n].afterLineNumber;e<=i&&i<=t?this._arr[n].afterLineNumber=e-1:i>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount+=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){e<=this._arr[n].afterLineNumber&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),0===this._arr.length?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e|=0;let t=Math.max(0,this._prefixSumValidIndex+1);0===t&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();return this._lineHeight*this._lineCount+this.getWhitespacesTotalHeight()+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e|=0;const t=this._findLastWhitespaceBeforeLineNumber(e);return-1===t?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e|=0;const t=this._arr;let n=0,i=t.length-1;for(;n<=i;){const s=n+((i-n|0)/2|0)|0;if(t[s].afterLineNumber<e){if(s+1>=t.length||t[s+1].afterLineNumber>=e)return s;n=s+1|0}else i=s-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e|=0;const t=this._findLastWhitespaceBeforeLineNumber(e)+1;return t<this._arr.length?t:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e|=0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._checkPendingChanges(),t=(e|=0)>1?this._lineHeight*(e-1):0;return t+this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(n?1:0))+this._paddingTop}getVerticalOffsetAfterLineNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._checkPendingChanges(),e|=0;return this._lineHeight*e+this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0))+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),-1===this._minWidth){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();return e>this.getLinesTotalHeight()}isInTopPadding(e){return 0!==this._paddingTop&&(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(0===this._paddingBottom)return!1;this._checkPendingChanges();return e>=this.getLinesTotalHeight()-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),(e|=0)<0)return 1;const t=0|this._lineCount,n=this._lineHeight;let i=1,s=t;for(;i<s;){const t=(i+s)/2|0,r=0|this.getVerticalOffsetForLineNumber(t);if(e>=r+n)i=t+1;else{if(e>=r)return t;s=t}}return i>t?t:i}getLinesViewportData(e,t){this._checkPendingChanges(),e|=0,t|=0;const n=this._lineHeight,i=0|this.getLineNumberAtOrAfterVerticalOffset(e),s=0|this.getVerticalOffsetForLineNumber(i);let r=0|this._lineCount,o=0|this.getFirstWhitespaceIndexAfterLineNumber(i);const a=0|this.getWhitespacesCount();let l,c;-1===o?(o=a,c=r+1,l=0):(c=0|this.getAfterLineNumberForWhitespaceIndex(o),l=0|this.getHeightForWhitespaceIndex(o));let u=s,h=u;const d=5e5;let f=0;s>=d&&(f=Math.floor(s/d)*d,f=Math.floor(f/n)*n,h-=f);const g=[],p=e+(t-e)/2;let m=-1;for(let y=i;y<=r;y++){if(-1===m){(u<=p&&p<u+n||u>p)&&(m=y)}for(u+=n,g[y-i]=h,h+=n;c===y;)h+=l,u+=l,o++,o>=a?c=r+1:(c=0|this.getAfterLineNumberForWhitespaceIndex(o),l=0|this.getHeightForWhitespaceIndex(o));if(u>=t){r=y;break}}-1===m&&(m=r);const b=0|this.getVerticalOffsetForLineNumber(r);let _=i,v=r;return _<v&&s<e&&_++,_<v&&b+n>t&&v--,{bigNumbersDelta:f,startLineNumber:i,endLineNumber:r,relativeVerticalOffset:g,centeredLineNumber:m,completelyVisibleStartLineNumber:_,completelyVisibleEndLineNumber:v}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e|=0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n,i;return n=t>=1?this._lineHeight*t:0,i=e>0?this.getWhitespacesAccumulatedHeight(e-1):0,n+i+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e|=0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;if(e>=this.getVerticalOffsetForWhitespaceIndex(n)+this.getHeightForWhitespaceIndex(n))return-1;for(;t<n;){const i=Math.floor((t+n)/2),s=this.getVerticalOffsetForWhitespaceIndex(i);if(e>=s+this.getHeightForWhitespaceIndex(i))t=i+1;else{if(e>=s)return i;n=i}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e|=0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0)return null;if(t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const i=this.getHeightForWhitespaceIndex(t);return{id:this.getIdForWhitespaceIndex(t),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(t),verticalOffset:n,height:i}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e|=0,t|=0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this.getWhitespacesCount()-1;if(n<0)return[];const s=[];for(let r=n;r<=i;r++){const e=this.getVerticalOffsetForWhitespaceIndex(r),n=this.getHeightForWhitespaceIndex(r);if(e>=t)break;s.push({id:this.getIdForWhitespaceIndex(r),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:e,height:n})}return s}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].height}}yT.INSTANCE_COUNT=0;class ST{constructor(e,t,n,i){(e|=0)<0&&(e=0),(t|=0)<0&&(t=0),(n|=0)<0&&(n=0),(i|=0)<0&&(i=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=i,this.scrollHeight=Math.max(n,i)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class wT extends Zt{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new un),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new ST(0,0,0,0),this._scrollable=this._register(new vS({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,i=t.contentHeight!==e.contentHeight;(n||i)&&this._onDidContentSizeChange.fire(new QA(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class kT extends Zt{constructor(e,t,n){super(),this._configuration=e;const i=this._configuration.options,s=i.get(143),r=i.get(83);this._linesLayout=new yT(t,i.get(66),r.top,r.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new wT(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new ST(s.contentWidth,0,s.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(113)?125:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(66)&&this._linesLayout.setLineHeight(t.get(66)),e.hasChanged(83)){const e=t.get(83);this._linesLayout.setPadding(e.top,e.bottom)}if(e.hasChanged(143)){const e=t.get(143),n=e.contentWidth,i=e.height,s=this._scrollable.getScrollDimensions(),r=s.contentWidth;this._scrollable.setScrollDimensions(new ST(n,s.contentWidth,i,this._getContentHeight(n,i,r)))}else this._updateHeight();e.hasChanged(113)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const n=this._configuration.options.get(102);return 2===n.horizontal||e>=t?0:n.horizontalScrollbarSize}_getContentHeight(e,t,n){const i=this._configuration.options;let s=this._linesLayout.getLinesTotalHeight();return i.get(104)?s+=Math.max(0,t-i.get(66)-i.get(83).bottom):i.get(102).ignoreHorizontalScrollbarInContentHeight||(s+=this._getHorizontalScrollbarHeight(e,n)),s}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,i=e.contentWidth;this._scrollable.setScrollDimensions(new ST(t,e.contentWidth,n,this._getContentHeight(t,n,i)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new em(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new em(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,n=e.get(144),i=e.get(50),s=e.get(143);if(n.isViewportWrapping){const n=e.get(72);return t>s.contentWidth+i.typicalHalfwidthCharacterWidth&&n.enabled&&"right"===n.side?t+s.verticalScrollbarWidth:t}{const n=e.get(103)*i.typicalHalfwidthCharacterWidth,r=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+n+s.verticalScrollbarWidth,r,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new ST(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t);return{scrollTop:t,scrollTopWithoutViewZones:t-this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n),scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){1===t?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}class CT{constructor(e,t,n,i,s){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=i,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const i=e.range,s=e.options;let r;if(s.isWholeLine){const e=this._coordinatesConverter.convertModelPositionToViewPosition(new Ci(i.startLineNumber,1),0,!1,!0),t=this._coordinatesConverter.convertModelPositionToViewPosition(new Ci(i.endLineNumber,this.model.getLineMaxColumn(i.endLineNumber)),1);r=new xi(e.lineNumber,e.column,t.lineNumber,t.column)}else r=this._coordinatesConverter.convertModelRangeToViewRange(i,1);n=new om(r,s),this._decorationsCache[t]=n}return n}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=null!==this._cachedModelDecorationsResolver;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new xi(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(i,t,n).inlineDecorations[0]}_getDecorationsInRange(e,t,n){const i=this._linesCollection.getDecorationsInRange(e,this.editorId,pt(this.configuration.options),t,n),s=e.startLineNumber,r=e.endLineNumber,o=[];let a=0;const l=[];for(let c=s;c<=r;c++)l[c-s]=[];for(let c=0,u=i.length;c<u;c++){const e=i[c],t=e.options;if(!xT(this.model,e))continue;const n=this._getOrCreateViewModelDecoration(e),u=n.range;if(o[a++]=n,t.inlineClassName){const e=new sm(u,t.inlineClassName,t.inlineClassNameAffectsLetterSpacing?3:0),n=Math.max(s,u.startLineNumber),i=Math.min(r,u.endLineNumber);for(let t=n;t<=i;t++)l[t-s].push(e)}if(t.beforeContentClassName&&s<=u.startLineNumber&&u.startLineNumber<=r){const e=new sm(new xi(u.startLineNumber,u.startColumn,u.startLineNumber,u.startColumn),t.beforeContentClassName,1);l[u.startLineNumber-s].push(e)}if(t.afterContentClassName&&s<=u.endLineNumber&&u.endLineNumber<=r){const e=new sm(new xi(u.endLineNumber,u.endColumn,u.endLineNumber,u.endColumn),t.afterContentClassName,2);l[u.endLineNumber-s].push(e)}}return{decorations:o,inlineDecorations:l}}}function xT(e,t){return(!t.options.hideInCommentTokens||!function(e,t){return ET(e,t.range,(e=>1===e))}(e,t))&&(!t.options.hideInStringTokens||!function(e,t){return ET(e,t.range,(e=>2===e))}(e,t))}function ET(e,t,n){for(let i=t.startLineNumber;i<=t.endLineNumber;i++){const s=e.tokenization.getLineTokens(i),r=i===t.startLineNumber,o=i===t.endLineNumber;let a=r?s.findTokenIndexAtOffset(t.startColumn-1):0;for(;a<s.getCount();){if(o){if(s.getStartOffset(a)>t.endColumn-1)break}if(!n(s.getStandardTokenType(a)))return!1;a++}}return!0}function LT(e,t){return null===e?t?AT.INSTANCE:TT.INSTANCE:new DT(e,t)}class DT{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,n){this._assertVisible();const i=n>0?this._projectionData.breakOffsets[n-1]:0,s=this._projectionData.breakOffsets[n];let r;if(null!==this._projectionData.injectionOffsets){const n=this._projectionData.injectionOffsets.map(((e,t)=>new UD(0,0,e+1,this._projectionData.injectionOptions[t],0)));r=UD.applyInjectedText(e.getLineContent(t),n).substring(i,s)}else r=e.getValueInRange({startLineNumber:t,startColumn:i+1,endLineNumber:t,endColumn:s+1});return n>0&&(r=IT(this._projectionData.wrappedTextIndentLength)+r),r}getViewLineLength(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){const i=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],i),i[0]}getViewLinesData(e,t,n,i,s,r,o){this._assertVisible();const a=this._projectionData,l=a.injectionOffsets,c=a.injectionOptions;let u,h=null;if(l){h=[];let e=0,t=0;for(let n=0;n<a.getOutputLineCount();n++){const i=new Array;h[n]=i;const s=n>0?a.breakOffsets[n-1]:0,r=a.breakOffsets[n];for(;t<l.length;){const o=c[t].content.length,u=l[t]+e,h=u+o;if(u>r)break;if(s<h){const e=c[t];if(e.inlineClassName){const t=n>0?a.wrappedTextIndentLength:0,o=t+Math.max(u-s,0),l=t+Math.min(h-s,r-s);o!==l&&i.push(new rm(o,l,e.inlineClassName,e.inlineClassNameAffectsLetterSpacing))}}if(!(h<=r))break;e+=o,t++}}}u=l?e.tokenization.getLineTokens(t).withInserted(l.map(((e,t)=>({offset:e,text:c[t].content,tokenMetadata:Op.defaultTokenMetadata})))):e.tokenization.getLineTokens(t);for(let d=n;d<n+i;d++){const e=s+d-n;r[e]?o[e]=this._getViewLineData(u,h?h[d]:null,d):o[e]=null}}_getViewLineData(e,t,n){this._assertVisible();const i=this._projectionData,s=n>0?i.wrappedTextIndentLength:0,r=n>0?i.breakOffsets[n-1]:0,o=i.breakOffsets[n],a=e.sliceAndInflate(r,o,s);let l=a.getLineContent();n>0&&(l=IT(i.wrappedTextIndentLength)+l);const c=this._projectionData.getMinOutputOffset(n)+1,u=l.length+1,h=n+1<this.getViewLineCount(),d=0===n?0:i.breakOffsetsVisibleColumn[n-1];return new nm(l,h,c,u,d,a,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this._assertVisible();return this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();return e+this._projectionData.translateToOutputPosition(t-1).outputLineIndex}normalizePosition(e,t,n){const i=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(i)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class AT{constructor(){}isVisible(){return!0}setVisible(e){return e?this:TT.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){const i=e.tokenization.getLineTokens(t),s=i.getLineContent();return new nm(s,!1,1,s.length+1,0,i.inflate(),null)}getViewLinesData(e,t,n,i,s,r,o){r[s]?o[s]=this.getViewLineData(e,t,0):o[s]=null}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new Ci(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}}AT.INSTANCE=new AT;class TT{constructor(){}isVisible(){return!1}setVisible(e){return e?AT.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,i,s,r,o){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}TT.INSTANCE=new TT;const NT=[""];function IT(e){if(e>=NT.length)for(let t=1;t<=e;t++)NT[t]=$T(t);return NT[e]}function $T(e){return new Array(e+1).join(" ")}class MT{constructor(e,t,n,i,s,r,o,a,l,c){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=i,this.fontInfo=s,this.tabSize=r,this.wrappingStrategy=o,this.wrappingColumn=a,this.wrappingIndent=l,this.wordBreak=c,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new PT(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),i=this.model.getInjectedTextDecorations(this._editorId),s=n.length,r=this.createLineBreaksComputer(),o=new x(UD.fromDecorations(i));for(let g=0;g<s;g++){const e=o.takeWhile((e=>e.lineNumber===g+1));r.addRequest(n[g],e,t?t[g]:null)}const a=r.finalize(),l=[],c=this.hiddenAreasDecorationIds.map((e=>this.model.getDecorationRange(e))).sort(xi.compareRangesUsingStarts);let u=1,h=0,d=-1,f=d+1<c.length?h+1:s+2;for(let g=0;g<s;g++){const e=g+1;e===f&&(d++,u=c[d].startLineNumber,h=c[d].endLineNumber,f=d+1<c.length?h+1:s+2);const t=e>=u&&e<=h,n=LT(a[g],!t);l[g]=n.getViewLineCount(),this.modelLineProjections[g]=n}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new pf(l)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map((e=>this.model.getDecorationRange(e)))}setHiddenAreas(e){const t=function(e){if(0===e.length)return[];const t=e.slice();t.sort(xi.compareRangesUsingStarts);const n=[];let i=t[0].startLineNumber,s=t[0].endLineNumber;for(let r=1,o=t.length;r<o;r++){const e=t[r];e.startLineNumber>s+1?(n.push(new xi(i,1,s,1)),i=e.startLineNumber,s=e.endLineNumber):e.endLineNumber>s&&(s=e.endLineNumber)}return n.push(new xi(i,1,s,1)),n}(e.map((e=>this.model.validateRange(e)))),n=this.hiddenAreasDecorationIds.map((e=>this.model.getDecorationRange(e))).sort(xi.compareRangesUsingStarts);if(t.length===n.length){let e=!1;for(let i=0;i<t.length;i++)if(!t[i].equalsRange(n[i])){e=!0;break}if(!e)return!1}const i=t.map((e=>({range:e,options:yA.EMPTY})));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,i);const s=t;let r=1,o=0,a=-1,l=a+1<s.length?o+1:this.modelLineProjections.length+2,c=!1;for(let u=0;u<this.modelLineProjections.length;u++){const e=u+1;e===l&&(a++,r=s[a].startLineNumber,o=s[a].endLineNumber,l=a+1<s.length?o+1:this.modelLineProjections.length+2);let t=!1;if(e>=r&&e<=o?this.modelLineProjections[u].isVisible()&&(this.modelLineProjections[u]=this.modelLineProjections[u].setVisible(!1),t=!0):(c=!0,this.modelLineProjections[u].isVisible()||(this.modelLineProjections[u]=this.modelLineProjections[u].setVisible(!0),t=!0)),t){const e=this.modelLineProjections[u].getViewLineCount();this.projectedModelLineLineCounts.setValue(u,e)}}return c||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return!(e<1||e>this.modelLineProjections.length)&&this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize!==e&&(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,i,s){const r=this.fontInfo.equals(e),o=this.wrappingStrategy===t,a=this.wrappingColumn===n,l=this.wrappingIndent===i,c=this.wordBreak===s;if(r&&o&&a&&l&&c)return!1;const u=r&&o&&!a&&l&&c;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=i,this.wordBreak=s;let h=null;if(u){h=[];for(let e=0,t=this.modelLineProjections.length;e<t;e++)h[e]=this.modelLineProjections[e].getProjectionData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return("advanced"===this.wrappingStrategy?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;const i=1===t?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new zA(i,s)}onModelLinesInserted(e,t,n,i){if(!e||e<=this._validModelVersionId)return null;const s=t>2&&!this.modelLineProjections[t-2].isVisible(),r=1===t?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let o=0;const a=[],l=[];for(let c=0,u=i.length;c<u;c++){const e=LT(i[c],!s);a.push(e);const t=e.getViewLineCount();o+=t,l[c]=t}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(a).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,l),new WA(r,r+o-1)}onModelLineChanged(e,t,n){if(null!==e&&e<=this._validModelVersionId)return[!1,null,null,null];const i=t-1,s=this.modelLineProjections[i].getViewLineCount(),r=LT(n,this.modelLineProjections[i].isVisible());this.modelLineProjections[i]=r;const o=this.modelLineProjections[i].getViewLineCount();let a=!1,l=0,c=-1,u=0,h=-1,d=0,f=-1;s>o?(l=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,c=l+o-1,d=c+1,f=d+(s-o)-1,a=!0):s<o?(l=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,c=l+s-1,u=c+1,h=u+(o-s)-1,a=!0):(l=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,c=l+o-1),this.projectedModelLineLineCounts.setValue(i,o);return[a,l<=c?new BA(l,c-l+1):null,u<=h?new WA(u,h):null,d<=f?new zA(d,f):null]}acceptVersionId(e){this._validModelVersionId=e,1!==this.modelLineProjections.length||this.modelLineProjections[0].isVisible()||this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:0|e}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),o=this.model.guides.getActiveIndentGuide(i.lineNumber,s.lineNumber,r.lineNumber),a=this.convertModelPositionToViewPosition(o.startLineNumber,1),l=this.convertModelPositionToViewPosition(o.endLineNumber,this.model.getLineMaxColumn(o.endLineNumber));return{startLineNumber:a.lineNumber,endLineNumber:l.lineNumber,indent:o.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,i=t.remainder;return new RT(n+1,i)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new Ci(e.modelLineNumber,i)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new Ci(e.modelLineNumber,i)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),i=this.getViewLineInfo(t),s=new Array;let r=this.getModelStartPositionOfViewLine(n),o=new Array;for(let a=n.modelLineNumber;a<=i.modelLineNumber;a++){const e=this.modelLineProjections[a-1];if(e.isVisible()){const t=a===n.modelLineNumber?n.modelLineWrappedLineIdx:0,s=a===i.modelLineNumber?i.modelLineWrappedLineIdx+1:e.getViewLineCount();for(let e=t;e<s;e++)o.push(new RT(a,e))}if(!e.isVisible()&&r){const e=new Ci(a-1,this.model.getLineMaxColumn(a-1)+1),t=xi.fromPositions(r,e);s.push(new OT(t,o)),o=[],r=null}else e.isVisible()&&!r&&(r=new Ci(a,1))}if(r){const e=xi.fromPositions(r,this.getModelEndPositionOfViewLine(i));s.push(new OT(e,o))}return s}getViewLinesBracketGuides(e,t,n,i){const s=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,r=[];for(const o of this.getViewLineInfosGroupedByModelRanges(e,t)){const e=o.modelRange.startLineNumber,t=this.model.guides.getLinesBracketGuides(e,o.modelRange.endLineNumber,s,i);for(const n of o.viewLines){const i=t[n.modelLineNumber-e].map((e=>{if(-1!==e.forWrappedLinesAfterColumn){if(this.modelLineProjections[n.modelLineNumber-1].getViewPositionOfModelPosition(0,e.forWrappedLinesAfterColumn).lineNumber>=n.modelLineWrappedLineIdx)return}if(-1!==e.forWrappedLinesBeforeOrAtColumn){if(this.modelLineProjections[n.modelLineNumber-1].getViewPositionOfModelPosition(0,e.forWrappedLinesBeforeOrAtColumn).lineNumber<n.modelLineWrappedLineIdx)return}if(!e.horizontalLine)return e;let t=-1;if(-1!==e.column){const i=this.modelLineProjections[n.modelLineNumber-1].getViewPositionOfModelPosition(0,e.column);if(i.lineNumber===n.modelLineWrappedLineIdx)t=i.column;else if(i.lineNumber<n.modelLineWrappedLineIdx)t=this.getMinColumnOfViewLine(n);else if(i.lineNumber>n.modelLineWrappedLineIdx)return}const i=this.convertModelPositionToViewPosition(n.modelLineNumber,e.horizontalLine.endColumn),s=this.modelLineProjections[n.modelLineNumber-1].getViewPositionOfModelPosition(0,e.horizontalLine.endColumn);return s.lineNumber===n.modelLineWrappedLineIdx?new RC(e.visibleColumn,t,e.className,new OC(e.horizontalLine.top,i.column),-1,-1):s.lineNumber<n.modelLineWrappedLineIdx||-1!==e.visibleColumn?void 0:new RC(e.visibleColumn,t,e.className,new OC(e.horizontalLine.top,this.getMaxColumnOfViewLine(n)),-1,-1)}));r.push(i.filter((e=>!!e)))}}return r}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let s=[];const r=[],o=[],a=n.lineNumber-1,l=i.lineNumber-1;let c=null;for(let f=a;f<=l;f++){const e=this.modelLineProjections[f];if(e.isVisible()){const t=e.getViewLineNumberOfModelPosition(0,f===a?n.column:1),i=e.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(f+1)),s=i-t+1;let l=0;s>1&&1===e.getViewLineMinColumn(this.model,f+1,i)&&(l=0===t?1:2),r.push(s),o.push(l),null===c&&(c=new Ci(f+1,0))}else null!==c&&(s=s.concat(this.model.guides.getLinesIndentGuides(c.lineNumber,f)),c=null)}null!==c&&(s=s.concat(this.model.guides.getLinesIndentGuides(c.lineNumber,i.lineNumber)),c=null);const u=t-e+1,h=new Array(u);let d=0;for(let f=0,g=s.length;f<g;f++){let e=s[f];const t=Math.min(u-d,r[f]),n=o[f];let i;i=2===n?0:1===n?1:t;for(let s=0;s<t;s++)s===i&&(e=0),h[d++]=e}return h}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.projectedModelLineLineCounts.getIndexOf(e-1);let s=e;const r=i.index,o=i.remainder,a=[];for(let l=r,c=this.model.getLineCount();l<c;l++){const i=this.modelLineProjections[l];if(!i.isVisible())continue;const c=l===r?o:0;let u=i.getViewLineCount()-c,h=!1;if(s+u>t&&(h=!0,u=t-s+1),i.getViewLinesData(this.model,l+1,c,u,s-e,n,a),s+=u,h)break}return a}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);const i=this.projectedModelLineLineCounts.getIndexOf(e-1),s=i.index,r=i.remainder,o=this.modelLineProjections[s],a=o.getViewLineMinColumn(this.model,s+1,r),l=o.getViewLineMaxColumn(this.model,s+1,r);t<a&&(t=a),t>l&&(t=l);const c=o.getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new Ci(s+1,c)).equals(n)?new Ci(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new xi(n.lineNumber,n.column,i.lineNumber,i.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e),i=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new Ci(n.modelLineNumber,i))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new xi(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=this.model.validatePosition(new Ci(e,t)),o=r.lineNumber,a=r.column;let l=o-1,c=!1;if(s)for(;l<this.modelLineProjections.length&&!this.modelLineProjections[l].isVisible();)l++,c=!0;else for(;l>0&&!this.modelLineProjections[l].isVisible();)l--,c=!0;if(0===l&&!this.modelLineProjections[l].isVisible())return new Ci(i?0:1,1);const u=1+this.projectedModelLineLineCounts.getPrefixSum(l);let h;return h=c?s?this.modelLineProjections[l].getViewPositionOfModelPosition(u,1,n):this.modelLineProjections[l].getViewPositionOfModelPosition(u,this.model.getLineMaxColumn(l+1),n):this.modelLineProjections[o-1].getViewPositionOfModelPosition(u,a,n),h}convertModelRangeToViewRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return xi.fromPositions(n)}{const t=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),n=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new xi(t.lineNumber,t.column,n.lineNumber,n.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const e=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(e,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(0===n&&!this.modelLineProjections[n].isVisible())return 1;const i=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(i,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n,i,s){const r=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),o=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(o.lineNumber-r.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new xi(r.lineNumber,1,o.lineNumber,o.column),t,n,i,s);let a=[];const l=r.lineNumber-1,c=o.lineNumber-1;let u=null;for(let g=l;g<=c;g++){if(this.modelLineProjections[g].isVisible())null===u&&(u=new Ci(g+1,g===l?r.column:1));else if(null!==u){const e=this.model.getLineMaxColumn(g);a=a.concat(this.model.getDecorationsInRange(new xi(u.lineNumber,u.column,g,e),t,n,i)),u=null}}null!==u&&(a=a.concat(this.model.getDecorationsInRange(new xi(u.lineNumber,u.column,o.lineNumber,o.column),t,n,i)),u=null),a.sort(((e,t)=>{const n=xi.compareRangesUsingStarts(e.range,t.range);return 0===n?e.id<t.id?-1:e.id>t.id?1:0:n}));const h=[];let d=0,f=null;for(const g of a){const e=g.id;f!==e&&(f=e,h[d++]=g)}return h}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return 0===t.modelLineWrappedLineIdx?this.model.getLineIndentColumn(t.modelLineNumber):0}}class RT{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class OT{constructor(e,t){this.modelRange=e,this.viewLines=t}}class PT{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,n,i){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,n,i)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class FT{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new BT(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,i){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,n,i)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new zA(t,n)}onModelLinesInserted(e,t,n,i){return new WA(t,n)}onModelLineChanged(e,t,n){return[!1,new BA(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1,i=new Array(n);for(let s=0;s<n;s++)i[s]=0;return i}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),n=t.getLineContent();return new nm(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);const s=[];for(let r=e;r<=t;r++){const t=r-e;s[t]=n[t]?this.getViewLineData(r):null}return s}getDecorationsInRange(e,t,n,i,s){return this.model.getDecorationsInRange(e,t,n,i,s)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class BT{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}const zT=Df.Right;class WT{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*zT/8))}reset(e){const t=Math.ceil((e+1)*zT/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,n){n&&(this.persist|=1<<e-1);for(let i=t.startLineNumber;i<=t.endLineNumber;i++){const t=zT*i+(e-1);this.lanes[t>>>3]|=1<<t%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(i))}}getLanesAtLine(e){const t=[];let n=zT*e;for(let i=0;i<zT;i++)(this.persist&1<<i||this.lanes[n>>>3]&1<<n%8)&&t.push(i+1),n++;return t.length?t:[Df.Center]}countAtLine(e){let t=zT*e,n=0;for(let i=0;i<zT;i++)(this.persist&1<<i||this.lanes[t>>>3]&1<<t%8)&&n++,t++;return n}}class HT extends Zt{constructor(e,t,n,i,s,r,o,a,l){if(super(),this.languageConfigurationService=o,this._themeService=a,this._attachedView=l,this.hiddenAreasModel=new UT,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new GA,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new hk(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new ol((()=>this._updateConfigurationViewLineCountNow()),0)),this._hasFocus=!1,this._viewportStart=VT.create(this.model),this.glyphLanes=new WT(0),this.model.isTooLargeForTokenization())this._lines=new FT(this.model);else{const e=this._configuration.options,t=e.get(50),n=e.get(137),r=e.get(144),o=e.get(136),a=e.get(128);this._lines=new MT(this._editorId,this.model,i,s,t,this.model.getOptions().tabSize,n,r.wrappingColumn,o,a)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new cT(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new kT(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll((e=>{e.scrollTopChanged&&this._handleVisibleLinesChanged(),e.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new VA(e)),this._eventDispatcher.emitOutgoingEvent(new ZA(e.oldScrollWidth,e.oldScrollLeft,e.oldScrollHeight,e.oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop))}))),this._register(this.viewLayout.onDidContentSizeChange((e=>{this._eventDispatcher.emitOutgoingEvent(e)}))),this._decorations=new CT(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast((e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}}))),this._register(YC.getInstance().onDidChange((()=>{this._eventDispatcher.emitSingleViewEvent(new qA)}))),this._register(this._themeService.onDidColorThemeChange((e=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new jA(e))}))),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new xi(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new OA(e)),this._eventDispatcher.emitOutgoingEvent(new XA(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new TA)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new NA)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new Ci(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new KT(t,this._viewportStart.startLineDelta)}return new KT(null,0)}_onConfigurationChanged(e,t){const n=this._captureStableViewport(),i=this._configuration.options,s=i.get(50),r=i.get(137),o=i.get(144),a=i.get(136),l=i.get(128);this._lines.setWrappingSettings(s,r,o.wrappingColumn,a,l)&&(e.emitViewEvent(new RA),e.emitViewEvent(new FA),e.emitViewEvent(new MA(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(90)&&(this._decorations.reset(),e.emitViewEvent(new MA(null))),t.hasChanged(97)&&(this._decorations.reset(),e.emitViewEvent(new MA(null))),e.emitViewEvent(new IA(t)),this.viewLayout.onConfigurationChanged(t),n.recoverViewportStart(this.coordinatesConverter,this.viewLayout),hk.shouldRecreate(t)&&(this.cursorConfig=new hk(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText((e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();let n=!1,i=!1;const s=e instanceof ZD?e.rawContentChangedEvent.changes:e.changes,r=e instanceof ZD?e.rawContentChangedEvent.versionId:null,o=this._lines.createLineBreaksComputer();for(const e of s)switch(e.changeType){case 4:for(let t=0;t<e.detail.length;t++){const n=e.detail[t];let i=e.injectedTexts[t];i&&(i=i.filter((e=>!e.ownerId||e.ownerId===this._editorId))),o.addRequest(n,i,null)}break;case 2:{let t=null;e.injectedText&&(t=e.injectedText.filter((e=>!e.ownerId||e.ownerId===this._editorId))),o.addRequest(e.detail,t,null);break}}const a=o.finalize(),l=new x(a);for(const e of s)switch(e.changeType){case 1:this._lines.onModelFlushed(),t.emitViewEvent(new RA),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break;case 3:{const i=this._lines.onModelLinesDeleted(r,e.fromLineNumber,e.toLineNumber);null!==i&&(t.emitViewEvent(i),this.viewLayout.onLinesDeleted(i.fromLineNumber,i.toLineNumber)),n=!0;break}case 4:{const i=l.takeCount(e.detail.length),s=this._lines.onModelLinesInserted(r,e.fromLineNumber,e.toLineNumber,i);null!==s&&(t.emitViewEvent(s),this.viewLayout.onLinesInserted(s.fromLineNumber,s.toLineNumber)),n=!0;break}case 2:{const n=l.dequeue(),[s,o,a,c]=this._lines.onModelLineChanged(r,e.lineNumber,n);i=s,o&&t.emitViewEvent(o),a&&(t.emitViewEvent(a),this.viewLayout.onLinesInserted(a.fromLineNumber,a.toLineNumber)),c&&(t.emitViewEvent(c),this.viewLayout.onLinesDeleted(c.fromLineNumber,c.toLineNumber));break}}null!==r&&this._lines.acceptVersionId(r),this.viewLayout.onHeightMaybeChanged(),!n&&i&&(t.emitViewEvent(new FA),t.emitViewEvent(new MA(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const e=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(e){const t=this.coordinatesConverter.convertModelPositionToViewPosition(e.getStartPosition()),n=this.viewLayout.getVerticalOffsetForLineNumber(t.lineNumber);this.viewLayout.setScrollPosition({scrollTop:n+this._viewportStart.startLineDelta},1)}}try{const t=this._eventDispatcher.beginEmitViewEvents();e instanceof ZD&&t.emitOutgoingEvent(new oT(e.contentChangedEvent)),this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()}))),this._register(this.model.onDidChangeTokens((e=>{const t=[];for(let n=0,i=e.ranges.length;n<i;n++){const i=e.ranges[n],s=this.coordinatesConverter.convertModelPositionToViewPosition(new Ci(i.fromLineNumber,1)).lineNumber,r=this.coordinatesConverter.convertModelPositionToViewPosition(new Ci(i.toLineNumber,this.model.getLineMaxColumn(i.toLineNumber))).lineNumber;t[n]={fromLineNumber:s,toLineNumber:r}}this._eventDispatcher.emitSingleViewEvent(new UA(t)),this._eventDispatcher.emitOutgoingEvent(new lT(e))}))),this._register(this.model.onDidChangeLanguageConfiguration((e=>{this._eventDispatcher.emitSingleViewEvent(new PA),this.cursorConfig=new hk(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new rT(e))}))),this._register(this.model.onDidChangeLanguage((e=>{this.cursorConfig=new hk(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new sT(e))}))),this._register(this.model.onDidChangeOptions((e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const e=this._eventDispatcher.beginEmitViewEvents();e.emitViewEvent(new RA),e.emitViewEvent(new FA),e.emitViewEvent(new MA(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new hk(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new aT(e))}))),this._register(this.model.onDidChangeDecorations((e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new MA(e)),this._eventDispatcher.emitOutgoingEvent(new iT(e))})))}setHiddenAreas(e,t){var n;this.hiddenAreasModel.setHiddenAreas(t,e);const i=this.hiddenAreasModel.getMergedRanges();if(i===this.previousHiddenAreas)return;this.previousHiddenAreas=i;const s=this._captureStableViewport();let r=!1;try{const e=this._eventDispatcher.beginEmitViewEvents();r=this._lines.setHiddenAreas(i),r&&(e.emitViewEvent(new RA),e.emitViewEvent(new FA),e.emitViewEvent(new MA(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const t=null===(n=s.viewportStartModelPosition)||void 0===n?void 0:n.lineNumber,o=t&&i.some((e=>e.startLineNumber<=t&&t<=e.endLineNumber));o||s.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),r&&this._eventDispatcher.emitOutgoingEvent(new eT)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(143),t=this._configuration.options.get(66),n=Math.max(20,Math.round(e.height/t)),i=this.viewLayout.getLinesViewportData(),s=Math.max(1,i.completelyVisibleStartLineNumber-n),r=Math.min(this.getLineCount(),i.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new xi(s,this.getLineMinColumn(s),r,this.getLineMaxColumn(r)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(0===n.length)return[t];const i=[];let s=0,r=t.startLineNumber,o=t.startColumn;const a=t.endLineNumber,l=t.endColumn;for(let c=0,u=n.length;c<u;c++){const e=n[c].startLineNumber,t=n[c].endLineNumber;t<r||(e>a||(r<e&&(i[s++]=new xi(r,o,e-1,this.model.getLineMaxColumn(e-1))),r=t+1,o=1))}return(r<a||r===a&&o<l)&&(i[s++]=new xi(r,o,a,l)),i}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new xi(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new xi(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),i=this.coordinatesConverter.convertViewPositionToModelPosition(new Ci(n,this.getLineMinColumn(n))),s=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:i,firstPositionDeltaTop:s}}reduceRestoreState(e){if("undefined"===typeof e.firstPosition)return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:i}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,i){return this._lines.getViewLinesBracketGuides(e,t,n,i)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=Ks(this.getLineContent(e));return-1===t?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Ys(this.getLineContent(e));return-1===t?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const n=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,n)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const n=this.model.mightContainRTL(),i=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),r=this._lines.getViewLineData(e);return r.inlineDecorations&&(t=[...t,...r.inlineDecorations.map((t=>t.toInlineDecoration(e)))]),new im(r.minColumn,r.maxColumn,r.content,r.continuesWithWrappedLine,n,i,r.tokens,t,s,r.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){const i=this._lines.getViewLinesData(e,t,n);return new tm(this.getTabSize(),i)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,pt(this._configuration.options)),n=new jT;for(const i of t){const t=i.options,s=t.overviewRuler;if(!s)continue;const r=s.position;if(0===r)continue;const o=s.getColor(e.value),a=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.startLineNumber,i.range.startColumn),l=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.endLineNumber,i.range.endColumn);n.accept(o,t.zIndex,a,l,r)}return n.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const e=t.options.overviewRuler;null===e||void 0===e||e.invalidateCachedColor();const n=t.options.minimap;null===n||void 0===n||n.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getValueLengthInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(n,t)}modifyPosition(e,t){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e),i=this.model.modifyPosition(n,t);return this.coordinatesConverter.convertModelPositionToViewPosition(i)}deduceModelPositionRelativeToViewPosition(e,t,n){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e);2===this.model.getEOL().length&&(t<0?t-=n:t+=n);const s=this.model.getOffsetAt(i)+t;return this.model.getPositionAt(s)}getPlainTextToCopy(e,t,n){const i=n?"\r\n":this.model.getEOL();(e=e.slice(0)).sort(xi.compareRangesUsingStarts);let s=!1,r=!1;for(const a of e)a.isEmpty()?s=!0:r=!0;if(!r){if(!t)return"";const n=e.map((e=>e.startLineNumber));let s="";for(let e=0;e<n.length;e++)e>0&&n[e-1]===n[e]||(s+=this.model.getLineContent(n[e])+i);return s}if(s&&t){const t=[];let i=0;for(const s of e){const e=s.startLineNumber;s.isEmpty()?e!==i&&t.push(this.model.getLineContent(e)):t.push(this.model.getValueInRange(s,n?2:0)),i=e}return 1===t.length?t[0]:t}const o=[];for(const a of e)a.isEmpty()||o.push(this.model.getValueInRange(a,n?2:0));return 1===o.length?o[0]:o}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===Pd)return null;if(1!==e.length)return null;let i=e[0];if(i.isEmpty()){if(!t)return null;const e=i.startLineNumber;i=new xi(e,this.model.getLineMinColumn(e),e,this.model.getLineMaxColumn(e))}const s=this._configuration.options.get(50),r=this._getColorMap();let o;if(/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===Et.fontFamily)o=Et.fontFamily;else{o=s.fontFamily,o=o.replace(/"/g,"'");if(!/[,']/.test(o)){/[+ ]/.test(o)&&(o="'".concat(o,"'"))}o="".concat(o,", ").concat(Et.fontFamily)}return{mode:n,html:'<div style="'+"color: ".concat(r[1],";")+"background-color: ".concat(r[2],";")+"font-family: ".concat(o,";")+"font-weight: ".concat(s.fontWeight,";")+"font-size: ".concat(s.fontSize,"px;")+"line-height: ".concat(s.lineHeight,"px;")+'white-space: pre;">'+this._getHTMLToCopy(i,r)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,r=e.endColumn,o=this.getTabSize();let a="";for(let l=n;l<=s;l++){const e=this.model.tokenization.getLineTokens(l),c=e.getLineContent(),u=l===n?i-1:0,h=l===s?r-1:c.length;a+=""===c?"<br>":mT(c,e.inflate(),t,u,h,o,be)}return a}_getColorMap(){const e=Ui.getColorMap(),t=["#000000"];if(e)for(let n=1,i=e.length;n<i;n++)t[n]=rp.Format.CSS.formatHex(e[n]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){return this._withViewEventsCollector((i=>this._cursor.setStates(i,e,t,n)))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._withViewEventsCollector((i=>this._cursor.setSelections(i,e,t,n)))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector((t=>this._cursor.restoreState(t,e)))}_executeCursorEdit(e){this._cursor.context.cursorConfig.readOnly?this._eventDispatcher.emitOutgoingEvent(new nT):this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit((i=>this._cursor.executeEdits(i,e,t,n)))}startComposition(){this._executeCursorEdit((e=>this._cursor.startComposition(e)))}endComposition(e){this._executeCursorEdit((t=>this._cursor.endComposition(t,e)))}type(e,t){this._executeCursorEdit((n=>this._cursor.type(n,e,t)))}compositionType(e,t,n,i,s){this._executeCursorEdit((r=>this._cursor.compositionType(r,e,t,n,i,s)))}paste(e,t,n,i){this._executeCursorEdit((s=>this._cursor.paste(s,e,t,n,i)))}cut(e){this._executeCursorEdit((t=>this._cursor.cut(t,e)))}executeCommand(e,t){this._executeCursorEdit((n=>this._cursor.executeCommand(n,e,t)))}executeCommands(e,t){this._executeCursorEdit((n=>this._cursor.executeCommands(n,e,t)))}revealPrimaryCursor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._withViewEventsCollector((i=>this._cursor.revealPrimary(i,e,n,0,t,0)))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new xi(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector((t=>t.emitViewEvent(new HA(e,!1,n,null,0,!0,0))))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new xi(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector((t=>t.emitViewEvent(new HA(e,!1,n,null,0,!0,0))))}revealRange(e,t,n,i,s){this._withViewEventsCollector((r=>r.emitViewEvent(new HA(e,!1,n,null,i,t,s))))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new KA),this._eventDispatcher.emitOutgoingEvent(new JA))}_withViewEventsCollector(e){try{return e(this._eventDispatcher.beginEmitViewEvents())}finally{this._eventDispatcher.endEmitViewEvents()}}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class VT{static create(e){const t=e._setTrackedRange(null,new xi(1,1,1,1),1);return new VT(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,n,i,s){this._model=e,this._viewLineNumber=t,this._isValid=n,this._modelTrackedRange=i,this._startLineDelta=s}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const n=e.coordinatesConverter.convertViewPositionToModelPosition(new Ci(t,e.getLineMinColumn(t))),i=e.model._setTrackedRange(this._modelTrackedRange,new xi(n.lineNumber,n.column,n.lineNumber,n.column),1),s=e.viewLayout.getVerticalOffsetForLineNumber(t),r=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=i,this._startLineDelta=r-s}invalidate(){this._isValid=!1}}class jT{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,i,s){const r=this._asMap[e];if(r){const e=r.data,t=e[e.length-3],o=e[e.length-1];if(t===s&&o+1>=n)return void(i>o&&(e[e.length-1]=i));e.push(s,n,i)}else{const r=new am(e,t,[s,n,i]);this._asMap[e]=r,this.asArray.push(r)}}}class UT{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const n=this.hiddenAreas.get(e);n&&qT(n,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce(((e,t)=>function(e,t){const n=[];let i=0,s=0;for(;i<e.length&&s<t.length;){const r=e[i],o=t[s];if(r.endLineNumber<o.startLineNumber-1)n.push(e[i++]);else if(o.endLineNumber<r.startLineNumber-1)n.push(t[s++]);else{const e=Math.min(r.startLineNumber,o.startLineNumber),t=Math.max(r.endLineNumber,o.endLineNumber);n.push(new xi(e,1,t,1)),i++,s++}}for(;i<e.length;)n.push(e[i++]);for(;s<t.length;)n.push(t[s++]);return n}(e,t)),[]);return qT(this.ranges,e)||(this.ranges=e),this.ranges}}function qT(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].equalsRange(t[n]))return!1;return!0}class KT{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const n=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),i=t.getVerticalOffsetForLineNumber(n.lineNumber);t.setScrollPosition({scrollTop:i+this.startLineDelta},1)}}class GT{constructor(){this._entries=new Map;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const[i,s]of t)this.set(i,s)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}get(e){return this._entries.get(e)}}var YT;!function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(YT||(YT={})),function(e){const t="error",n="warning",i="info";e.fromValue=function(s){return s?ir(t,s)?e.Error:ir(n,s)||ir("warn",s)?e.Warning:ir(i,s)?e.Info:e.Ignore:e.Ignore},e.toString=function(s){switch(s){case e.Error:return t;case e.Warning:return n;case e.Info:return i;default:return"ignore"}}}(YT||(YT={}));const QT=YT;var XT=QT;const ZT=ro("notificationService");class JT{constructor(e,t,n,i,s){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=i,this.wrappedTextIndentLength=s}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let n=this.breakOffsets[e]-t;return e>0&&(n+=this.wrappedTextIndentLength),n}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let n=0===e?t:this.breakOffsets[e-1]+t;if(null!==this.injectionOffsets)for(let i=0;i<this.injectionOffsets.length&&n>this.injectionOffsets[i];i++)n<this.injectionOffsets[i]+this.injectionOptions[i].content.length?n=this.injectionOffsets[i]:n-=this.injectionOptions[i].content.length;return n}translateToOutputPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=e;if(null!==this.injectionOffsets)for(let i=0;i<this.injectionOffsets.length&&!(e<this.injectionOffsets[i])&&(1===t||e!==this.injectionOffsets[i]);i++)n+=this.injectionOptions[i].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=0,i=this.breakOffsets.length-1,s=0,r=0;for(;n<=i;){s=n+(i-n)/2|0;const o=this.breakOffsets[s];if(r=s>0?this.breakOffsets[s-1]:0,0===t)if(e<=r)i=s-1;else{if(!(e>o))break;n=s+1}else if(e<r)i=s-1;else{if(!(e>=o))break;n=s+1}}let o=e-r;return s>0&&(o+=this.wrappedTextIndentLength),new nN(s,o)}normalizeOutputPosition(e,t,n){if(null!==this.injectionOffsets){const i=this.outputPositionToOffsetInInputWithInjections(e,t),s=this.normalizeOffsetInInputWithInjectionsAroundInjections(i,n);if(s!==i)return this.offsetInInputWithInjectionsToOutputPosition(s,n)}if(0===n){if(e>0&&t===this.getMinOutputOffset(e))return new nN(e-1,this.getMaxOutputOffset(e-1))}else if(1===n){if(e<this.getOutputLineCount()-1&&t===this.getMaxOutputOffset(e))return new nN(e+1,this.getMinOutputOffset(e+1))}return new nN(e,t)}outputPositionToOffsetInInputWithInjections(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));return(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(2===t){if(e===n.offsetInInputWithInjections+n.length&&eN(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;{let e=n.offsetInInputWithInjections;if(tN(this.injectionOptions[n.injectedTextIndex].cursorStops))return e;let t=n.injectedTextIndex-1;for(;t>=0&&this.injectionOffsets[t]===this.injectionOffsets[n.injectedTextIndex]&&!eN(this.injectionOptions[t].cursorStops)&&(e-=this.injectionOptions[t].content.length,!tN(this.injectionOptions[t].cursorStops));)t--;return e}}if(1===t||4===t){let e=n.offsetInInputWithInjections+n.length,t=n.injectedTextIndex;for(;t+1<this.injectionOffsets.length&&this.injectionOffsets[t+1]===this.injectionOffsets[t];)e+=this.injectionOptions[t+1].content.length,t++;return e}if(0===t||3===t){let e=n.offsetInInputWithInjections,t=n.injectedTextIndex;for(;t-1>=0&&this.injectionOffsets[t-1]===this.injectionOffsets[t];)e-=this.injectionOptions[t-1].content.length,t--;return e}ma(t)}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),i=this.getInjectedTextAtOffset(n);return i?{options:this.injectionOptions[i.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(null!==t){let i=0;for(let s=0;s<t.length;s++){const r=n[s].content.length,o=t[s]+i,a=t[s]+i+r;if(o>e)break;if(e<=a)return{injectedTextIndex:s,offsetInInputWithInjections:o,length:r};i+=r}}}}function eN(e){return null===e||void 0===e||(e===Tf.Right||e===Tf.Both)}function tN(e){return null===e||void 0===e||(e===Tf.Left||e===Tf.Both)}class nN{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return"".concat(this.outputLineIndex,":").concat(this.outputOffset)}toPosition(e){return new Ci(e+this.outputLineIndex,this.outputOffset+1)}}class iN{static create(e){return new iN(e.get(132),e.get(131))}constructor(e,t){this.classifier=new sN(e,t)}createLineBreaksComputer(e,t,n,i,s){const r=[],o=[],a=[];return{addRequest:(e,t,n)=>{r.push(e),o.push(t),a.push(n)},finalize:()=>{const l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,c=[];for(let e=0,u=r.length;e<u;e++){const u=o[e],h=a[e];!h||h.injectionOptions||u?c[e]=lN(this.classifier,r[e],u,t,n,l,i,s):c[e]=aN(this.classifier,h,r[e],t,n,l,i,s)}return rN.length=0,oN.length=0,c}}}}class sN extends _f{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let rN=[],oN=[];function aN(e,t,n,i,s,r,o,a){if(-1===s)return null;const l=n.length;if(l<=1)return null;const c="keepAll"===a,u=t.breakOffsets,h=t.breakOffsetsVisibleColumn,d=dN(n,i,s,r,o),f=s-d,g=rN,p=oN;let m=0,b=0,_=0,v=s;const y=u.length;let S=0;if(S>=0){let e=Math.abs(h[S]-v);for(;S+1<y;){const t=Math.abs(h[S+1]-v);if(t>=e)break;e=t,S++}}for(;S<y;){let t=S<0?0:u[S],s=S<0?0:h[S];b>t&&(t=b,s=_);let o=0,a=0,d=0,w=0;if(s<=v){let _=s,y=0===t?0:n.charCodeAt(t-1),S=0===t?0:e.get(y),k=!0;for(let s=t;s<l;s++){const t=s,l=n.charCodeAt(s);let u,h;if(ar(l)?(s++,u=0,h=2):(u=e.get(l),h=cN(l,_,i,r)),t>b&&hN(y,S,l,u,c)&&(o=t,a=_),_+=h,_>v){t>b?(d=t,w=_-h):(d=s+1,w=_),_-a>f&&(o=0),k=!1;break}y=l,S=u}if(k){m>0&&(g[m]=u[u.length-1],p[m]=h[u.length-1],m++);break}}if(0===o){let l=s,u=n.charCodeAt(t),h=e.get(u),g=!1;for(let i=t-1;i>=b;i--){const t=i+1,s=n.charCodeAt(i);if(9===s){g=!0;break}let p,m;if(lr(s)?(i--,p=0,m=2):(p=e.get(s),m=Sr(s)?r:1),l<=v){if(0===d&&(d=t,w=l),l<=v-f)break;if(hN(s,p,u,h,c)){o=t,a=l;break}}l-=m,u=s,h=p}if(0!==o){const e=f-(w-a);if(e<=i){const t=n.charCodeAt(d);let s;s=ar(t)?2:cN(t,w,i,r),e-s<0&&(o=0)}}if(g){S--;continue}}if(0===o&&(o=d,a=w),o<=b){const e=n.charCodeAt(b);ar(e)?(o=b+2,a=_+2):(o=b+1,a=_+cN(e,_,i,r))}for(b=o,g[m]=o,_=a,p[m]=a,m++,v=a+f;S<0||S<y&&h[S]<a;)S++;let k=Math.abs(h[S]-v);for(;S+1<y;){const e=Math.abs(h[S+1]-v);if(e>=k)break;k=e,S++}}return 0===m?null:(g.length=m,p.length=m,rN=t.breakOffsets,oN=t.breakOffsetsVisibleColumn,t.breakOffsets=g,t.breakOffsetsVisibleColumn=p,t.wrappedTextIndentLength=d,t)}function lN(e,t,n,i,s,r,o,a){const l=UD.applyInjectedText(t,n);let c,u;if(n&&n.length>0?(c=n.map((e=>e.options)),u=n.map((e=>e.column-1))):(c=null,u=null),-1===s)return c?new JT(u,c,[l.length],[],0):null;const h=l.length;if(h<=1)return c?new JT(u,c,[l.length],[],0):null;const d="keepAll"===a,f=dN(l,i,s,r,o),g=s-f,p=[],m=[];let b=0,_=0,v=0,y=s,S=l.charCodeAt(0),w=e.get(S),k=cN(S,0,i,r),C=1;ar(S)&&(k+=1,S=l.charCodeAt(1),w=e.get(S),C++);for(let x=C;x<h;x++){const t=x,n=l.charCodeAt(x);let s,o;ar(n)?(x++,s=0,o=2):(s=e.get(n),o=cN(n,k,i,r)),hN(S,w,n,s,d)&&(_=t,v=k),k+=o,k>y&&((0===_||k-v>g)&&(_=t,v=k-o),p[b]=_,m[b]=v,b++,y=v+g,_=0),S=n,w=s}return 0!==b||n&&0!==n.length?(p[b]=h,m[b]=k,new JT(u,c,p,m,f)):null}function cN(e,t,n,i){return 9===e?n-t%n:Sr(e)||e<32?i:1}function uN(e,t){return t-e%t}function hN(e,t,n,i,s){return 32!==n&&(2===t&&2!==i||1!==t&&1===i||!s&&3===t&&2!==i||!s&&3===i&&1!==t)}function dN(e,t,n,i,s){let r=0;if(0!==s){const o=Ks(e);if(-1!==o){for(let n=0;n<o;n++){r+=9===e.charCodeAt(n)?uN(r,t):1}const a=3===s?2:2===s?1:0;for(let e=0;e<a;e++){r+=uN(r,t)}r+i>n&&(r=0)}}return r}const fN=vh("domLineBreaksComputer",{createHTML:e=>e});class gN{static create(e){return new gN(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,n,i,s){const r=[],o=[];return{addRequest:(e,t,n)=>{r.push(e),o.push(t)},finalize:()=>function(e,t,n,i,s,r,o,a){var l;function c(e){const n=a[e];if(n){const i=UD.applyInjectedText(t[e],n),s=n.map((e=>e.options)),r=n.map((e=>e.column-1));return new JT(r,s,[i.length],[],0)}return null}if(-1===s){const e=[];for(let n=0,i=t.length;n<i;n++)e[n]=c(n);return e}const u=Math.round(s*n.typicalHalfwidthCharacterWidth),h=3===r?2:2===r?1:0,d=Math.round(i*h),f=Math.ceil(n.spaceWidth*d),g=document.createElement("div");Gr(g,n);const p=new qh(1e4),m=[],b=[],_=[],v=[],y=[];for(let E=0;E<t.length;E++){const e=UD.applyInjectedText(t[E],a[E]);let s=0,o=0,l=u;if(0!==r)if(s=Ks(e),-1===s)s=0;else{for(let n=0;n<s;n++){o+=9===e.charCodeAt(n)?i-o%i:1}const t=Math.ceil(n.spaceWidth*o);t+n.typicalFullwidthCharacterWidth>u?(s=0,o=0):l=u-t}const c=e.substr(s),h=pN(c,o,i,l,p,f);m[E]=s,b[E]=o,_[E]=c,v[E]=h[0],y[E]=h[1]}const S=p.build(),w=null!==(l=null===fN||void 0===fN?void 0:fN.createHTML(S))&&void 0!==l?l:S;g.innerHTML=w,g.style.position="absolute",g.style.top="10000","keepAll"===o?(g.style.wordBreak="keep-all",g.style.overflowWrap="anywhere"):(g.style.wordBreak="inherit",g.style.overflowWrap="break-word");e.document.body.appendChild(g);const k=document.createRange(),C=Array.prototype.slice.call(g.children,0),x=[];for(let E=0;E<t.length;E++){const e=mN(k,C[E],_[E],v[E]);if(null===e){x[E]=c(E);continue}const t=m[E],n=b[E]+d,i=y[E],s=[];for(let a=0,c=e.length;a<c;a++)s[a]=i[e[a]];if(0!==t)for(let a=0,c=e.length;a<c;a++)e[a]+=t;let r,o;const l=a[E];l?(r=l.map((e=>e.options)),o=l.map((e=>e.column-1))):(r=null,o=null),x[E]=new JT(o,r,e,s,n)}return e.document.body.removeChild(g),x}(P(this.targetWindow.deref()),r,e,t,n,i,s,o)}}}function pN(e,t,n,i,s,r){if(0!==r){const e=String(r);s.appendString('<div style="text-indent: -'),s.appendString(e),s.appendString("px; padding-left: "),s.appendString(e),s.appendString("px; box-sizing: border-box; width:")}else s.appendString('<div style="width:');s.appendString(String(i)),s.appendString('px;">');const o=e.length;let a=t,l=0;const c=[],u=[];let h=0<o?e.charCodeAt(0):0;s.appendString("<span>");for(let d=0;d<o;d++){0!==d&&d%16384===0&&s.appendString("</span><span>"),c[d]=l,u[d]=a;const t=h;h=d+1<o?e.charCodeAt(d+1):0;let i=1,r=1;switch(t){case 9:i=n-a%n,r=i;for(let e=1;e<=i;e++)e<i?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 32:32===h?s.appendCharCode(160):s.appendASCIICharCode(32);break;case 60:s.appendString("&lt;");break;case 62:s.appendString("&gt;");break;case 38:s.appendString("&amp;");break;case 0:s.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:s.appendCharCode(65533);break;default:Sr(t)&&r++,t<32?s.appendCharCode(9216+t):s.appendCharCode(t)}l+=i,a+=r}return s.appendString("</span>"),c[e.length]=l,u[e.length]=a,s.appendString("</div>"),[c,u]}function mN(e,t,n,i){if(n.length<=1)return null;const s=Array.prototype.slice.call(t.children,0),r=[];try{bN(e,s,i,0,null,n.length-1,null,r)}catch(o){return console.log(o),null}return 0===r.length?null:(r.push(n.length),r)}function bN(e,t,n,i,s,r,o,a){if(i===r)return;if(s=s||_N(e,t,n[i],n[i+1]),o=o||_N(e,t,n[r],n[r+1]),Math.abs(s[0].top-o[0].top)<=.1)return;if(i+1===r)return void a.push(r);const l=i+(r-i)/2|0,c=_N(e,t,n[l],n[l+1]);bN(e,t,n,i,s,l,c,a),bN(e,t,n,l,c,r,o,a)}function _N(e,t,n,i){return e.setStart(t[n/16384|0].firstChild,n%16384),e.setEnd(t[i/16384|0].firstChild,i%16384),e.getClientRects()}class vN extends Zt{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new tn),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,n){this._editor=e,this._instantiationService=n;for(const i of t)this._pending.has(i.id)?Nt(new Error("Cannot have two contributions with the same id ".concat(i.id))):this._pending.set(i.id,i);this._instantiateSome(0),this._register(Vc(Dc(this._editor.getDomNode()),(()=>{this._instantiateSome(1)}))),this._register(Vc(Dc(this._editor.getDomNode()),(()=>{this._instantiateSome(2)}))),this._register(Vc(Dc(this._editor.getDomNode()),(()=>{this._instantiateSome(3)}),5e3))}saveViewState(){const e={};for(const[t,n]of this._instances)"function"===typeof n.saveViewState&&(e[t]=n.saveViewState());return e}restoreViewState(e){for(const[t,n]of this._instances)"function"===typeof n.restoreViewState&&n.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var e;this._register(Vc(Dc(null===(e=this._editor)||void 0===e?void 0:e.getDomNode()),(()=>{this._instantiateSome(1)}),50))}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const n of t)this._instantiateById(n.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,n]of this._pending)n.instantiation===e&&t.push(n);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const e=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,e),"function"===typeof e.restoreViewState&&0!==t.instantiation&&console.warn("Editor contribution '".concat(t.id,"' should be eager instantiated because it uses saveViewState / restoreViewState."))}catch(n){Nt(n)}}}}var yN,SN=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},wN=function(e,t){return function(n,i){t(n,i,e)}};let kN=0;class CN{constructor(e,t,n,i,s,r){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=i,this.listenersToRemove=s,this.attachedView=r}dispose(){Gt(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}let xN=yN=class extends Zt{get isSimpleWidget(){return this._configuration.isSimpleWidget}constructor(e,t,n,i,s,r,o,a,l,c,u,h){var d;super(),this.languageConfigurationService=u,this._deliveryQueue=new hn,this._contributions=this._register(new vN),this._onDidDispose=this._register(new un),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new LN(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new EN({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new EN({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new LN(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new LN(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new LN(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new LN(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new LN(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new LN(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new LN(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new LN(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new LN(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new LN(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new LN(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new LN(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new LN(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new LN(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new LN(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new LN(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new LN(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new un({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),s.willCreateCodeEditor();const f={...t};let g;this._domElement=e,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++kN,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(n.isSimpleWidget||!1,f,c)),this._register(this._configuration.onDidChange((e=>{this._onDidChangeConfiguration.fire(e);const t=this._configuration.options;if(e.hasChanged(143)){const e=t.get(143);this._onDidLayoutChange.fire(e)}}))),this._contextKeyService=this._register(o.createScoped(this._domElement)),this._notificationService=l,this._codeEditorService=s,this._commandService=r,this._themeService=a,this._register(new DN(this,this._contextKeyService)),this._register(new AN(this,this._contextKeyService,h)),this._instantiationService=i.createChild(new GT([ia,this._contextKeyService])),this._modelData=null,this._focusTracker=new TN(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange((()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())}))),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={},g=Array.isArray(n.contributions)?n.contributions:eh.getEditorContributions(),this._contributions.initialize(this,g,this._instantiationService);for(const m of eh.getEditorActions()){if(this._actions.has(m.id)){Nt(new Error("Cannot have two actions with the same id ".concat(m.id)));continue}const e=new Wx(m.id,m.label,m.alias,m.metadata,null!==(d=m.precondition)&&void 0!==d?d:void 0,(e=>this._instantiationService.invokeFunction((t=>Promise.resolve(m.runEditorCommand(t,this,e))))),this._contextKeyService);this._actions.set(e.id,e)}const p=()=>!this._configuration.options.get(90)&&this._configuration.options.get(36).enabled;this._register(new ju(this._domElement,{onDragOver:e=>{if(!p())return;const t=this.getTargetAtClientPoint(e.clientX,e.clientY);(null===t||void 0===t?void 0:t.position)&&this.showDropIndicatorAt(t.position)},onDrop:async e=>{if(!p())return;if(this.removeDropIndicator(),!e.dataTransfer)return;const t=this.getTargetAtClientPoint(e.clientX,e.clientY);(null===t||void 0===t?void 0:t.position)&&this._onDropIntoEditor.fire({position:t.position,event:e})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;null===(t=this._modelData)||void 0===t||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,n){return new nb(e,t,this._domElement,n)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return Np.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?Ek.getWordAtPosition(this._modelData.model,this._configuration.options.get(129),e):null}getValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this._modelData)return"";const t=!(!e||!e.preserveBOM);let n=0;return e&&e.lineEnding&&"\n"===e.lineEnding?n=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(){var e;const t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===this._modelData&&null===t)return;if(this._modelData&&this._modelData.model===t)return;const n={oldModelUrl:(null===(e=this._modelData)||void 0===e?void 0:e.model.uri)||null,newModelUrl:(null===t||void 0===t?void 0:t.uri)||null};this._onWillChangeModel.fire(n);const i=this.hasTextFocus(),s=this._detachModel();this._attachModel(t),i&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(n),this._postDetachModelCleanup(s),this._contributions.onAfterModelAttached()}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,n,i){const s=e.model.validatePosition({lineNumber:t,column:n}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,i)}getTopForLineNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._modelData?yN._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?yN._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=e.model.validatePosition({lineNumber:t,column:n}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,i)}getBottomForLineNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._modelData?yN._getVerticalOffsetAfterPosition(this._modelData,e,1,t):-1}setHiddenAreas(e,t){var n;null===(n=this._modelData)||void 0===n||n.viewModel.setHiddenAreas(e.map((e=>xi.lift(e))),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return Uy.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this._modelData){if(!Ci.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,i){if(!this._modelData)return;if(!xi.isIRange(e))throw new Error("Invalid arguments");const s=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",n,r,t,i)}revealLine(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,0,t)}revealLineInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,2,t)}revealLineNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,5,t)}_revealLine(e,t,n){if("number"!==typeof e)throw new Error("Invalid arguments");this._sendRevealRange(new xi(e,1,e,1),t,!1,n)}revealPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,0,!0,t)}revealPositionInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,2,!0,t)}revealPositionNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,i){if(!Ci.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new xi(e.lineNumber,e.column,e.lineNumber,e.column),t,n,i)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const n=Ei.isISelection(e),i=xi.isIRange(e);if(!n&&!i)throw new Error("Invalid arguments");if(n)this._setSelectionImpl(e,t);else if(i){const n={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(n,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const n=new Ei(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[n])}revealLines(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,0,n)}revealLinesInCenter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,2,n)}revealLinesNearTop(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,5,n)}_revealLines(e,t,n,i){if("number"!==typeof e||"number"!==typeof t)throw new Error("Invalid arguments");this._sendRevealRange(new xi(e,1,t,1),n,!1,i)}revealRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._revealRange(e,n?1:0,i,t)}revealRangeInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,2,!0,t)}revealRangeNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,6,!0,t)}revealRangeAtTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,3,!0,t)}_revealRange(e,t,n,i){if(!xi.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(xi.lift(e),t,n,i)}setSelections(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._modelData){if(!e||0===e.length)throw new Error("Invalid arguments");for(let t=0,n=e.length;t<n;t++)if(!Ei.isISelection(e[t]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return!!this._modelData&&this._modelData.viewModel.viewLayout.hasPendingScrollAnimation()}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState();return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const e=t.cursorState;Array.isArray(e)?e.length>0&&this._modelData.viewModel.restoreCursorState(e):this._modelData.viewModel.restoreCursorState([e]),this._contributions.restoreViewState(t.contributionsState||{});const n=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(n)}}handleInitialized(){var e;null===(e=this._getViewModel())||void 0===e||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter((e=>e.isSupported())),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,n){switch(n=n||{},t){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(e);case"type":{const t=n;return void this._type(e,t.text||"")}case"replacePreviousChar":{const t=n;return void this._compositionType(e,t.text||"",t.replaceCharCnt||0,0,0)}case"compositionType":{const t=n;return void this._compositionType(e,t.text||"",t.replacePrevCharCnt||0,t.replaceNextCharCnt||0,t.positionDelta||0)}case"paste":{const t=n;return void this._paste(e,t.text||"",t.pasteOnNewLine||!1,t.multicursorText||null,t.mode||null)}case"cut":return void this._cut(e)}const i=this.getAction(t);i?Promise.resolve(i.run(n)).then(void 0,Nt):this._modelData&&(this._triggerEditorCommand(e,t,n)||this._triggerCommand(t,n))}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){this._modelData&&0!==t.length&&("keyboard"===e&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),"keyboard"===e&&this._onDidType.fire(t))}_compositionType(e,t,n,i,s){this._modelData&&this._modelData.viewModel.compositionType(t,n,i,s,e)}_paste(e,t,n,i,s){if(!this._modelData||0===t.length)return;const r=this._modelData.viewModel,o=r.getSelection().getStartPosition();r.paste(t,n,i,e);const a=r.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({range:new xi(o.lineNumber,o.column,a.lineNumber,a.column),languageId:s})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const i=eh.getEditorCommand(t);return!!i&&((n=n||{}).source=e,this._instantiationService.invokeFunction((e=>{Promise.resolve(i.runEditorCommand(e,this,n)).then(void 0,Nt)})),!0)}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!!this._modelData&&(!this._configuration.options.get(90)&&(this._modelData.model.pushStackElement(),!0))}popUndoStop(){return!!this._modelData&&(!this._configuration.options.get(90)&&(this._modelData.model.popStackElement(),!0))}executeEdits(e,t,n){if(!this._modelData)return!1;if(this._configuration.options.get(90))return!1;let i;return i=n?Array.isArray(n)?()=>n:n:()=>null,this._modelData.viewModel.executeEdits(e,t,i),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new NN(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,pt(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,pt(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?0===e.length&&0===t.length?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){this._modelData&&0!==e.length&&this._modelData.model.changeDecorations((t=>{t.deltaDecorations(e,[])}))}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(143)}createOverviewRuler(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}getContainerDomNode(){return this._domElement}getDomNode(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}delegateVerticalScrollbarPointerDown(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._configuration.observeContainer(e),t||this.render()}focus(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}hasTextFocus(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const e=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(e)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const e=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(e)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const n=this._glyphMarginWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(n)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const e=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(e)}}changeViewZones(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,t):null}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,i=n.get(143);return{top:yN._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+i.glyphMarginWidth+i.lineNumbersWidth+i.decorationsWidth-this.getScrollLeft(),height:n.get(66)}}getOffsetForColumn(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,t):-1}render(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,e)}setAriaOptions(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Gr(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e)return void(this._modelData=null);const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const n=e.onBeforeAttached(),i=new HT(this._id,this._configuration,e,gN.create(Dc(this._domElement)),iN.create(this._configuration.options),(e=>Uc(Dc(this._domElement),e)),this.languageConfigurationService,this._themeService,n);t.push(e.onWillDispose((()=>this.setModel(null)))),t.push(i.onEvent((t=>{switch(t.kind){case 0:this._onDidContentSizeChange.fire(t);break;case 1:this._editorTextFocus.setValue(t.hasFocus);break;case 2:this._onDidScrollChange.fire(t);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(t.reachedMaxCursorCount){const e=G("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",this.getOption(79));this._notificationService.prompt(XT.Warning,e,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:G("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const e=[];for(let s=0,r=t.selections.length;s<r;s++)e[s]=t.selections[s].getPosition();const n={position:e[0],secondaryPositions:e.slice(1),reason:t.reason,source:t.source};this._onDidChangeCursorPosition.fire(n);const i={selection:t.selections[0],secondarySelections:t.selections.slice(1),modelVersionId:t.modelVersionId,oldSelections:t.oldSelections,oldModelVersionId:t.oldModelVersionId,source:t.source,reason:t.reason};this._onDidChangeCursorSelection.fire(i);break}case 7:this._onDidChangeModelDecorations.fire(t.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(t.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(t.event);break;case 10:this._onDidChangeModelContent.fire(t.event);break;case 11:this._onDidChangeModelOptions.fire(t.event);break;case 12:this._onDidChangeModelTokens.fire(t.event)}})));const[s,r]=this._createView(i);if(r){this._domElement.appendChild(s.domNode.domNode);let t=Object.keys(this._contentWidgets);for(let e=0,n=t.length;e<n;e++){const n=t[e];s.addContentWidget(this._contentWidgets[n])}t=Object.keys(this._overlayWidgets);for(let e=0,n=t.length;e<n;e++){const n=t[e];s.addOverlayWidget(this._overlayWidgets[n])}t=Object.keys(this._glyphMarginWidgets);for(let e=0,n=t.length;e<n;e++){const n=t[e];s.addGlyphMarginWidget(this._glyphMarginWidgets[n])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new CN(e,i,s,r,t,n)}_createView(e){let t;t=this.isSimpleWidget?{paste:(e,t,n,i)=>{this._paste("keyboard",e,t,n,i)},type:e=>{this._type("keyboard",e)},compositionType:(e,t,n,i)=>{this._compositionType("keyboard",e,t,n,i)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:{paste:(e,t,n,i)=>{const s={text:e,pasteOnNewLine:t,multicursorText:n,mode:i};this._commandService.executeCommand("paste",s)},type:e=>{const t={text:e};this._commandService.executeCommand("type",t)},compositionType:(e,t,n,i)=>{if(n||i){const s={text:e,replacePrevCharCnt:t,replaceNextCharCnt:n,positionDelta:i};this._commandService.executeCommand("compositionType",s)}else{const n={text:e,replaceCharCnt:t};this._commandService.executeCommand("replacePreviousChar",n)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new fC(e.coordinatesConverter);n.onKeyDown=e=>this._onKeyDown.fire(e),n.onKeyUp=e=>this._onKeyUp.fire(e),n.onContextMenu=e=>this._onContextMenu.fire(e),n.onMouseMove=e=>this._onMouseMove.fire(e),n.onMouseLeave=e=>this._onMouseLeave.fire(e),n.onMouseDown=e=>this._onMouseDown.fire(e),n.onMouseUp=e=>this._onMouseUp.fire(e),n.onMouseDrag=e=>this._onMouseDrag.fire(e),n.onMouseDrop=e=>this._onMouseDrop.fire(e),n.onMouseDropCanceled=e=>this._onMouseDropCanceled.fire(e),n.onMouseWheel=e=>this._onMouseWheel.fire(e);return[new Fx(t,this._configuration,this._themeService.getColorTheme(),e,n,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){null===e||void 0===e||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return null!==this._modelData}showDropIndicatorAt(e){const t=[{range:new xi(e.lineNumber,e.column,e.lineNumber,e.column),options:yN.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}};xN.dropIntoEditorDecorationOptions=yA.register({description:"workbench-dnd-target",className:"dnd-target"}),xN=yN=SN([wN(3,so),wN(4,oo),wN(5,_o),wN(6,ia),wN(7,QS),wN(8,ZT),wN(9,Zm),wN(10,qd),wN(11,_p)],xN);class EN extends Zt{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new un(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new un(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}}class LN extends un{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class DN extends Zt{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=qk.editorSimpleInput.bindTo(t),this._editorFocus=qk.focus.bindTo(t),this._textInputFocus=qk.textInputFocus.bindTo(t),this._editorTextFocus=qk.editorTextFocus.bindTo(t),this._tabMovesFocus=qk.tabMovesFocus.bindTo(t),this._editorReadonly=qk.readOnly.bindTo(t),this._inDiffEditor=qk.inDiffEditor.bindTo(t),this._editorColumnSelection=qk.columnSelection.bindTo(t),this._hasMultipleSelections=qk.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=qk.hasNonEmptySelection.bindTo(t),this._canUndo=qk.canUndo.bindTo(t),this._canRedo=qk.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromConfig()))),this._register(this._editor.onDidChangeCursorSelection((()=>this._updateFromSelection()))),this._register(this._editor.onDidFocusEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidFocusEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidChangeModel((()=>this._updateFromModel()))),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromModel()))),this._register(Xm.onDidChangeTabFocus((e=>this._tabMovesFocus.set(e)))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(Xm.getTabFocusMode()),this._editorReadonly.set(e.get(90)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some((e=>!e.isEmpty())))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}class AN extends Zt{constructor(e,t,n){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=n,this._langId=qk.languageId.bindTo(t),this._hasCompletionItemProvider=qk.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=qk.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=qk.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=qk.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=qk.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=qk.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=qk.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=qk.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=qk.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=qk.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=qk.hasReferenceProvider.bindTo(t),this._hasRenameProvider=qk.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=qk.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=qk.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=qk.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=qk.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=qk.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=qk.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInWalkThrough=qk.isInWalkThroughSnippet.bindTo(t);const i=()=>this._update();this._register(e.onDidChangeModel(i)),this._register(e.onDidChangeModelLanguage(i)),this._register(n.completionProvider.onDidChange(i)),this._register(n.codeActionProvider.onDidChange(i)),this._register(n.codeLensProvider.onDidChange(i)),this._register(n.definitionProvider.onDidChange(i)),this._register(n.declarationProvider.onDidChange(i)),this._register(n.implementationProvider.onDidChange(i)),this._register(n.typeDefinitionProvider.onDidChange(i)),this._register(n.hoverProvider.onDidChange(i)),this._register(n.documentHighlightProvider.onDidChange(i)),this._register(n.documentSymbolProvider.onDidChange(i)),this._register(n.referenceProvider.onDidChange(i)),this._register(n.renameProvider.onDidChange(i)),this._register(n.documentFormattingEditProvider.onDidChange(i)),this._register(n.documentRangeFormattingEditProvider.onDidChange(i)),this._register(n.signatureHelpProvider.onDidChange(i)),this._register(n.inlayHintsProvider.onDidChange(i)),i()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents((()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()}))}_update(){const e=this._editor.getModel();e?this._contextKeyService.bufferChangeEvents((()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===dc.walkThroughSnippet)})):this.reset()}}class TN extends Zt{constructor(e,t){super(),this._onChange=this._register(new un),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(Lu(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus((()=>{this._hasDomElementFocus=!0,this._update()}))),this._register(this._domFocusTracker.onDidBlur((()=>{this._hasDomElementFocus=!1,this._update()}))),t&&(this._overflowWidgetsDomNode=this._register(Lu(t)),this._register(this._overflowWidgetsDomNode.onDidFocus((()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()}))),this._register(this._overflowWidgetsDomNode.onDidBlur((()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()}))))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){var e;return null!==(e=this._hadFocus)&&void 0!==e&&e}}class NN{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,n){return this._editor.onDidChangeModelDecorations((n=>{this._isChangingDecorations||e.call(t,n)}),n)}getRange(e){return this._editor.hasModel()?e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e]):null}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const n of this._decorationIds){const i=e.getDecorationRange(n);i&&t.push(i)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){0!==this._decorationIds.length&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations((t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)}))}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations((n=>{t=n.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)}))}finally{this._isChangingDecorations=!1}return t}}const IN=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),$N=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function MN(e){return IN+encodeURIComponent(e.toString())+$N}const RN=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),ON=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');tw(((e,t)=>{const n=e.getColor(i_);n&&t.addRule(".monaco-editor .".concat("squiggly-error",' { background: url("data:image/svg+xml,',MN(n),'") repeat-x bottom left; }'));const i=e.getColor(r_);i&&t.addRule(".monaco-editor .".concat("squiggly-warning",' { background: url("data:image/svg+xml,',MN(i),'") repeat-x bottom left; }'));const s=e.getColor(a_);s&&t.addRule(".monaco-editor .".concat("squiggly-info",' { background: url("data:image/svg+xml,',MN(s),'") repeat-x bottom left; }'));const r=e.getColor(c_);r&&t.addRule(".monaco-editor .".concat("squiggly-hint",' { background: url("data:image/svg+xml,',RN+encodeURIComponent(r.toString())+ON,'") no-repeat bottom left; }'));const o=e.getColor(Lw);o&&t.addRule(".monaco-editor.showUnused .".concat("squiggly-inline-unnecessary"," { opacity: ",o.rgba.a,"; }"))}));var PN=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},FN=function(e,t){return function(n,i){t(n,i,e)}};let BN=class extends Zt{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new un),this._onCodeEditorAdd=this._register(new un),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new un),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new un),this._onDiffEditorAdd=this._register(new un),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new un),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new Be,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map((e=>this._codeEditors[e]))}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map((e=>this._diffEditors[e]))}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach((t=>t.removeDecorationsByType(e)))))}setModelProperty(e,t,n){const i=e.toString();let s;this._modelProperties.has(i)?s=this._modelProperties.get(i):(s=new Map,this._modelProperties.set(i,s)),s.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n)){return this._modelProperties.get(n).get(t)}}async openCodeEditor(e,t,n){for(const i of this._codeEditorOpenHandlers){const s=await i(e,t,n);if(null!==s)return s}return null}registerCodeEditorOpenHandler(e){return Qt(this._codeEditorOpenHandlers.unshift(e))}};BN=PN([FN(0,QS)],BN);var zN=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},WN=function(e,t){return function(n,i){t(n,i,e)}};let HN=class extends BN{constructor(e,t){super(t),this._register(this.onCodeEditorAdd((()=>this._checkContextKey()))),this._register(this.onCodeEditorRemove((()=>this._checkContextKey()))),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler((async(e,t,n)=>t?this.doOpenEditor(t,e):null)))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const n=t.resource.scheme;if(n===dc.http||n===dc.https)return Fu(t.resource.toString()),e}return null}const n=t.options?t.options.selection:null;if(n)if("number"===typeof n.endLineNumber&&"number"===typeof n.endColumn)e.setSelection(n),e.revealRangeInCenter(n,1);else{const t={lineNumber:n.startLineNumber,column:n.startColumn};e.setPosition(t),e.revealPositionInCenter(t,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};HN=zN([WN(0,ia),WN(1,QS)],HN),pd(oo,HN,0);const VN=ro("layoutService");var jN=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},UN=function(e,t){return function(n,i){t(n,i,e)}};let qN=class{get mainContainer(){var e,t;return null!==(t=null===(e=g(this._codeEditorService.listCodeEditors()))||void 0===e?void 0:e.getContainerDomNode())&&void 0!==t?t:Ms.document.body}get activeContainer(){var e,t;const n=null!==(e=this._codeEditorService.getFocusedCodeEditor())&&void 0!==e?e:this._codeEditorService.getActiveCodeEditor();return null!==(t=null===n||void 0===n?void 0:n.getContainerDomNode())&&void 0!==t?t:this.mainContainer}get mainContainerDimension(){return Yc(this.mainContainer)}get activeContainerDimension(){return Yc(this.activeContainer)}get containers(){return u(this._codeEditorService.listCodeEditors().map((e=>e.getContainerDomNode())))}getContainer(){return this.activeContainer}focus(){var e;null===(e=this._codeEditorService.getFocusedCodeEditor())||void 0===e||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=rn.None,this.onDidLayoutActiveContainer=rn.None,this.onDidLayoutContainer=rn.None,this.onDidChangeActiveContainer=rn.None,this.onDidAddContainer=rn.None,this.whenActiveContainerStylesLoaded=Promise.resolve(),this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};qN=jN([UN(0,oo)],qN);let KN=class extends qN{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};KN=jN([UN(1,oo)],KN),pd(VN,qN,1);const GN=ro("dialogService");var YN=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},QN=function(e,t){return function(n,i){t(n,i,e)}};const XN=!1;function ZN(e){return e.scheme===dc.file?e.fsPath:e.path}let JN=0;class eI{constructor(e,t,n,i,s,r,o){this.id=++JN,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=i,this.groupOrder=s,this.sourceId=r,this.sourceOrder=o,this.isValid=!0}setValid(e){this.isValid=e}toString(){return"[id:".concat(this.id,"] [group:").concat(this.groupId,"] [").concat(this.isValid?"  VALID":"INVALID","] ").concat(this.actual.constructor.name," - ").concat(this.actual)}}class tI{constructor(e,t){this.resourceLabel=e,this.reason=t}}class nI{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,i]of this.elements){(0===i.reason?e:t).push(i.resourceLabel)}const n=[];return e.length>0&&n.push(G({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(G({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join("\n")}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class iI{constructor(e,t,n,i,s,r,o){this.id=++JN,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=i,this.groupOrder=s,this.sourceId=r,this.sourceOrder=o,this.removedResources=null,this.invalidatedResources=null}canSplit(){return"function"===typeof this.actual.split}removeResource(e,t,n){this.removedResources||(this.removedResources=new nI),this.removedResources.has(t)||this.removedResources.set(t,new tI(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),0===this.invalidatedResources.size&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new nI),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new tI(e,0)))}toString(){return"[id:".concat(this.id,"] [group:").concat(this.groupId,"] [").concat(this.invalidatedResources?"INVALID":"  VALID","] ").concat(this.actual.constructor.name," - ").concat(this.actual)}}class sI{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)1===e.type&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)1===e.type&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push("* ".concat(this.strResource,":"));for(let t=0;t<this._past.length;t++)e.push("   * [UNDO] ".concat(this._past[t]));for(let t=this._future.length-1;t>=0;t--)e.push("   * [REDO] ".concat(this._future[t]));return e.join("\n")}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){1===e.type?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)1===t.type&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,i=this._past.length;n<i;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new eA(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,i=0,s=-1;for(let o=0,a=this._past.length;o<a;o++,i++){const r=this._past[o];n&&(i>=t||r.id!==e.elements[i])&&(n=!1,s=0),n||1!==r.type||r.removeResource(this.resourceLabel,this.strResource,0)}let r=-1;for(let o=this._future.length-1;o>=0;o--,i++){const s=this._future[o];n&&(i>=t||s.id!==e.elements[i])&&(n=!1,r=o),n||1!==s.type||s.removeResource(this.resourceLabel,this.strResource,0)}-1!==s&&(this._past=this._past.slice(0,s)),-1!==r&&(this._future=this._future.slice(r+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return 0===this._past.length?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return 0===this._future.length?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class rI{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const oI=new sI("","");oI.locked=!0;let aI=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log("AFTER ".concat(e,": "));const t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join("\n"))}pushElement(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tA.None,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nA.None;if(0===e.type){const i=ZN(e.resource),s=this.getUriComparisonKey(e.resource);this._pushElement(new eI(e,i,s,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const i=new Set,s=[],r=[];for(const t of e.resources){const e=ZN(t),n=this.getUriComparisonKey(t);i.has(n)||(i.add(n),s.push(e),r.push(n))}1===s.length?this._pushElement(new eI(e,s[0],r[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new iI(e,s,r,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const n=e.resourceLabels[t],i=e.strResources[t];let s;this._editStacks.has(i)?s=this._editStacks.get(i):(s=new sI(n,i),this._editStacks.set(i,s)),s.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const e=this._editStacks.get(t);if(e.hasFutureElements())return null;const n=e.getClosestPastElement();return n?n.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const s of n){const e=ZN(s.resource),t=this.getUriComparisonKey(s.resource),n=new eI(s,e,t,0,0,0,0);i.set(n.strResource,n)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitPastWorkspaceElement(e,i)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const s of n){const e=ZN(s.resource),t=this.getUriComparisonKey(s.resource),n=new eI(s,e,t,0,0,0,0);i.set(n.strResource,n)}for(const s of e.strResources){if(t&&t.has(s))continue;this._editStacks.get(s).splitFutureWorkspaceElement(e,i)}}removeElements(e){const t="string"===typeof e?e:this.getUriComparisonKey(e);if(this._editStacks.has(t)){this._editStacks.get(t).dispose(),this._editStacks.delete(t)}}setElementsValidFlag(e,t,n){const i=this.getUriComparisonKey(e);if(this._editStacks.has(i)){this._editStacks.get(i).setElementsValidFlag(t,n)}}createSnapshot(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).createSnapshot(e)}return new eA(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),n.hasPastElements()||n.hasFutureElements()||(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).getElements()}return{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestPastElement();r&&(r.sourceId===e&&(!t||r.sourceOrder>t.sourceOrder)&&(t=r,n=i))}return[t,n]}canUndo(e){if(e instanceof nA){const[,t]=this._findClosestUndoElementWithSource(e.id);return!!t}const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).hasPastElements()}return!1}_onError(e,t){Nt(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,i,s){const r=this._acquireLocks(n);let o;try{o=t()}catch(a){return r(),i.dispose(),this._onError(a,e)}return o?o.then((()=>(r(),i.dispose(),s())),(t=>(r(),i.dispose(),this._onError(t,e)))):(r(),i.dispose(),s())}async _invokeWorkspacePrepare(e){if("undefined"===typeof e.actual.prepareUndoRedo)return Zt.None;const t=e.actual.prepareUndoRedo();return"undefined"===typeof t?Zt.None:t}_invokeResourcePrepare(e,t){if(1!==e.actual.type||"undefined"===typeof e.actual.prepareUndoRedo)return t(Zt.None);const n=e.actual.prepareUndoRedo();return n?"function"===typeof(i=n).dispose&&0===i.dispose.length?t(n):n.then((e=>t(e))):t(Zt.None);var i}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||oI);return new rI(t)}_tryToSplitAndUndo(e,t,n,i){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(i),new lI(this._undo(e,0,!0));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(i),new lI}_checkWorkspaceUndo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,G({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,G({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const o of n.editStacks)o.getClosestPastElement()!==t&&s.push(o.resourceLabel);if(s.length>0)return this._tryToSplitAndUndo(e,t,null,G({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const r=[];for(const o of n.editStacks)o.locked&&r.push(o.resourceLabel);return r.length>0?this._tryToSplitAndUndo(e,t,null,G({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,G({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const i=this._getAffectedEditStacks(t),s=this._checkWorkspaceUndo(e,t,i,!1);return s?s.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,i,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const n=t.getSecondClosestPastElement();if(n&&n.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,n,i){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let s;!function(e){e[e.All=0]="All",e[e.This=1]="This",e[e.Cancel=2]="Cancel"}(s||(s={}));const{result:r}=await this._dialogService.prompt({type:QT.Info,message:G("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:G({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",n.editStacks.length),run:()=>s.All},{label:G({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>s.This}],cancelButton:{run:()=>s.Cancel}});if(r===s.Cancel)return;if(r===s.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const o=this._checkWorkspaceUndo(e,t,n,!1);if(o)return o.returnValue;i=!0}let s;try{s=await this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const r=this._checkWorkspaceUndo(e,t,n,!0);if(r)return s.dispose(),r.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,(()=>t.actual.undo()),n,s,(()=>this._continueUndoInGroup(t.groupId,i)))}_resourceUndo(e,t,n){if(t.isValid){if(!e.locked)return this._invokeResourcePrepare(t,(i=>(e.moveBackward(t),this._safeInvokeWithLocks(t,(()=>t.actual.undo()),new rI([e]),i,(()=>this._continueUndoInGroup(t.groupId,n))))));{const e=G({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(e)}}else e.flushAllElements()}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestPastElement();r&&(r.groupId===e&&(!t||r.groupOrder>t.groupOrder)&&(t=r,n=i))}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);return n?this._undo(n,0,t):void 0}undo(e){if(e instanceof nA){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return"string"===typeof e?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(!this._editStacks.has(e))return;const i=this._editStacks.get(e),s=i.getClosestPastElement();if(!s)return;if(s.groupId){const[e,i]=this._findClosestUndoElementInGroup(s.groupId);if(s!==e&&i)return this._undo(i,t,n)}if((s.sourceId!==t||s.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,s);try{return 1===s.type?this._workspaceUndo(e,s,n):this._resourceUndo(i,s,n)}finally{XN}}async _confirmAndContinueUndo(e,t,n){if((await this._dialogService.confirm({message:G("confirmDifferentSource","Would you like to undo '{0}'?",n.label),primaryButton:G({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:G("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestFutureElement();r&&(r.sourceId===e&&(!t||r.sourceOrder<t.sourceOrder)&&(t=r,n=i))}return[t,n]}canRedo(e){if(e instanceof nA){const[,t]=this._findClosestRedoElementWithSource(e.id);return!!t}const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){return this._editStacks.get(t).hasFutureElements()}return!1}_tryToSplitAndRedo(e,t,n,i){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(i),new lI(this._redo(e));for(const s of t.strResources)this.removeElements(s);return this._notificationService.warn(i),new lI}_checkWorkspaceRedo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,G({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,G({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const s=[];for(const o of n.editStacks)o.getClosestFutureElement()!==t&&s.push(o.resourceLabel);if(s.length>0)return this._tryToSplitAndRedo(e,t,null,G({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,s.join(", ")));const r=[];for(const o of n.editStacks)o.locked&&r.push(o.resourceLabel);return r.length>0?this._tryToSplitAndRedo(e,t,null,G({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,G({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),i=this._checkWorkspaceRedo(e,t,n,!1);return i?i.returnValue:this._executeWorkspaceRedo(e,t,n)}async _executeWorkspaceRedo(e,t,n){let i;try{i=await this._invokeWorkspacePrepare(t)}catch(r){return this._onError(r,t)}const s=this._checkWorkspaceRedo(e,t,n,!0);if(s)return i.dispose(),s.returnValue;for(const o of n.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,(()=>t.actual.redo()),n,i,(()=>this._continueRedoInGroup(t.groupId)))}_resourceRedo(e,t){if(t.isValid){if(!e.locked)return this._invokeResourcePrepare(t,(n=>(e.moveForward(t),this._safeInvokeWithLocks(t,(()=>t.actual.redo()),new rI([e]),n,(()=>this._continueRedoInGroup(t.groupId))))));{const e=G({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(e)}}else e.flushAllElements()}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,s]of this._editStacks){const r=s.getClosestFutureElement();r&&(r.groupId===e&&(!t||r.groupOrder<t.groupOrder)&&(t=r,n=i))}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);return t?this._redo(t):void 0}redo(e){if(e instanceof nA){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return"string"===typeof e?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[e,t]=this._findClosestRedoElementInGroup(n.groupId);if(n!==e&&t)return this._redo(t)}try{return 1===n.type?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{XN}}}};aI=YN([QN(0,GN),QN(1,ZT)],aI);class lI{constructor(e){this.returnValue=e}}function cI(e,t,n){return Math.min(Math.max(e,t),n)}pd(JD,aI,1);class uI{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class hI{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const dI=ro("environmentService");var fI=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},gI=function(e,t){return function(n,i){t(n,i,e)}};const pI=ro("ILanguageFeatureDebounceService");var mI;!function(e){const t=new WeakMap;let n=0;e.of=function(e){let i=t.get(e);return void 0===i&&(i=++n,t.set(e,i)),i}}(mI||(mI={}));class bI{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class _I{constructor(e,t,n,i,s,r){this._logService=e,this._name=t,this._registry=n,this._default=i,this._min=s,this._max=r,this._cache=new Og(50,.7)}_key(e){return e.id+this._registry.all(e).reduce(((e,t)=>yc(mI.of(t),e)),0)}get(e){const t=this._key(e),n=this._cache.get(t);return n?cI(n.value,this._min,this._max):this.default()}update(e,t){const n=this._key(e);let i=this._cache.get(n);i||(i=new hI(6),this._cache.set(n,i));const s=cI(i.update(t),this._min,this._max);return fc(e.uri,"output")||this._logService.trace("[DEBOUNCE: ".concat(this._name,"] for ").concat(e.uri.toString()," is ").concat(s,"ms")),s}_overall(){const e=new uI;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){return cI(0|this._overall()||this._default,this._min,this._max)}}let vI=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,n){var i,s,r;const o=null!==(i=null===n||void 0===n?void 0:n.min)&&void 0!==i?i:50,a=null!==(s=null===n||void 0===n?void 0:n.max)&&void 0!==s?s:o**2,l=null!==(r=null===n||void 0===n?void 0:n.key)&&void 0!==r?r:void 0,c="".concat(mI.of(e),",").concat(o).concat(l?","+l:"");let u=this._data.get(c);return u||(this._isDev?u=new _I(this._logService,t,e,0|this._overallAverage()||1.5*o,o,a):(this._logService.debug("[DEBOUNCE: ".concat(t,"] is disabled in developed mode")),u=new bI(1.5*o)),this._data.set(c,u)),u}_overallAverage(){const e=new uI;for(const t of this._data.values())e.update(t.default());return e.value}};vI=fI([gI(0,Ra),gI(1,dI)],vI),pd(pI,vI,1);var yI=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},SI=function(e,t){return function(n,i){t(n,i,e)}};let wI=class{constructor(e,t,n,i){this._legend=e,this._themeService=t,this._languageService=n,this._logService=i,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new CI}getMetadata(e,t,n){const i=this._languageService.languageIdCodec.encodeLanguageId(n),s=this._hashTable.get(e,t,i);let r;if(s)r=s.metadata,this._logService.getLevel()===Oa.Trace&&this._logService.trace("SemanticTokensProviderStyling [CACHED] ".concat(e," / ").concat(t,": foreground ").concat(Rp.getForeground(r),", fontStyle ").concat(Rp.getFontStyle(r).toString(2)));else{let s=this._legend.tokenTypes[e];const o=[];if(s){let e=t;for(let t=0;e>0&&t<this._legend.tokenModifiers.length;t++)1&e&&o.push(this._legend.tokenModifiers[t]),e>>=1;e>0&&this._logService.getLevel()===Oa.Trace&&(this._logService.trace("SemanticTokensProviderStyling: unknown token modifier index: ".concat(t.toString(2)," for legend: ").concat(JSON.stringify(this._legend.tokenModifiers))),o.push("not-in-legend"));const i=this._themeService.getColorTheme().getTokenStyleMetadata(s,o,n);if("undefined"===typeof i)r=2147483647;else{if(r=0,"undefined"!==typeof i.italic){r|=1|(i.italic?1:0)<<11}if("undefined"!==typeof i.bold){r|=2|(i.bold?2:0)<<11}if("undefined"!==typeof i.underline){r|=4|(i.underline?4:0)<<11}if("undefined"!==typeof i.strikethrough){r|=8|(i.strikethrough?8:0)<<11}if(i.foreground){r|=16|i.foreground<<15}0===r&&(r=2147483647)}}else this._logService.getLevel()===Oa.Trace&&this._logService.trace("SemanticTokensProviderStyling: unknown token type index: ".concat(e," for legend: ").concat(JSON.stringify(this._legend.tokenTypes))),r=2147483647,s="not-in-legend";this._hashTable.add(e,t,i,r),this._logService.getLevel()===Oa.Trace&&this._logService.trace("SemanticTokensProviderStyling ".concat(e," (").concat(s,") / ").concat(t," (").concat(o.join(" "),"): foreground ").concat(Rp.getForeground(r),", fontStyle ").concat(Rp.getFontStyle(r).toString(2)))}return r}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn("Overlapping semantic tokens detected at lineNumber ".concat(e,", column ").concat(t)))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn("Semantic token with invalid length detected at lineNumber ".concat(e,", column ").concat(t)))}warnInvalidEditStart(e,t,n,i,s){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn("Invalid semantic tokens edit detected (previousResultId: ".concat(e,", resultId: ").concat(t,") at edit #").concat(n,": The provided start offset ").concat(i," is outside the previous data (length ").concat(s,").")))}};wI=yI([SI(1,QS),SI(2,dd),SI(3,Ra)],wI);class kI{constructor(e,t,n,i){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=i,this.next=null}}class CI{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=CI._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<CI._SIZES.length?2/3*this._currentLength:0),this._elements=[],CI._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const i=this._hashFunc(e,t,n);let s=this._elements[i];for(;s;){if(s.tokenTypeIndex===e&&s.tokenModifierSet===t&&s.languageId===n)return s;s=s.next}return null}add(e,t,n,i){if(this._elementsCount++,0!==this._growCount&&this._elementsCount>=this._growCount){const e=this._elements;this._currentLengthIndex++,this._currentLength=CI._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<CI._SIZES.length?2/3*this._currentLength:0),this._elements=[],CI._nullOutEntries(this._elements,this._currentLength);for(const t of e){let e=t;for(;e;){const t=e.next;e.next=null,this._add(e),e=t}}}this._add(new kI(e,t,n,i))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}CI._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];const xI=ro("semanticTokensStylingService");var EI=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},LI=function(e,t){return function(n,i){t(n,i,e)}};let DI=class extends Zt{constructor(e,t,n){super(),this._themeService=e,this._logService=t,this._languageService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange((()=>{this._caches=new WeakMap})))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new wI(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};DI=EI([LI(0,QS),LI(1,Ra),LI(2,dd)],DI),pd(xI,DI,1);const AI="**",TI="/",NI="[/\\\\]",II="[^/\\\\]",$I=/\//g;function MI(e,t){switch(e){case 0:return"";case 1:return"".concat(II,"*?");default:return"(?:".concat(NI,"|").concat(II,"+").concat(NI).concat(t?"|".concat(NI).concat(II,"+"):"",")*?")}}function RI(e,t){if(!e)return[];const n=[];let i=!1,s=!1,r="";for(const o of e){switch(o){case t:if(!i&&!s){n.push(r),r="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":s=!0;break;case"]":s=!1}r+=o}return r&&n.push(r),n}function OI(e){if(!e)return"";let t="";const n=RI(e,TI);if(n.every((e=>e===AI)))t=".*";else{let e=!1;n.forEach(((i,s)=>{if(i===AI){if(e)return;t+=MI(2,s===n.length-1)}else{let e=!1,r="",o=!1,a="";for(const n of i)if("}"!==n&&e)r+=n;else if(!o||"]"===n&&a)switch(n){case"{":e=!0;continue;case"[":o=!0;continue;case"}":{const n=RI(r,","),i="(?:".concat(n.map((e=>OI(e))).join("|"),")");t+=i,e=!1,r="";break}case"]":t+="["+a+"]",o=!1,a="";break;case"?":t+=II;continue;case"*":t+=MI(1);continue;default:t+=Hs(n)}else{let e;e="-"===n?n:"^"!==n&&"!"!==n||a?n===TI?"":Hs(n):"^",a+=e}s<n.length-1&&(n[s+1]!==AI||s+2<n.length)&&(t+=NI)}e=i===AI}))}return t}const PI=/^\*\*\/\*\.[\w\.-]+$/,FI=/^\*\*\/([\w\.-]+)\/?$/,BI=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,zI=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,WI=/^\*\*((\/[\w\.-]+)+)\/?$/,HI=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,VI=new Og(1e4),jI=function(){return!1},UI=function(){return null};function qI(e,t){if(!e)return UI;let n;n="string"!==typeof e?e.pattern:e,n=n.trim();const i="".concat(n,"_").concat(!!t.trimForExclusions);let s,r=VI.get(i);return r||(r=PI.test(n)?function(e,t){return function(n,i){return"string"===typeof n&&n.endsWith(e)?t:null}}(n.substr(4),n):(s=FI.exec(GI(n,t)))?function(e,t){const n="/".concat(e),i="\\".concat(e),s=function(s,r){return"string"!==typeof s?null:r?r===e?t:null:s===e||s.endsWith(n)||s.endsWith(i)?t:null},r=[e];return s.basenames=r,s.patterns=[t],s.allBasenames=r,s}(s[1],n):(t.trimForExclusions?zI:BI).test(n)?function(e,t){const n=XI(e.slice(1,-1).split(",").map((e=>qI(e,t))).filter((e=>e!==UI)),e),i=n.length;if(!i)return UI;if(1===i)return n[0];const s=function(t,i){for(let s=0,r=n.length;s<r;s++)if(n[s](t,i))return e;return null},r=n.find((e=>!!e.allBasenames));r&&(s.allBasenames=r.allBasenames);const o=n.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);o.length&&(s.allPaths=o);return s}(n,t):(s=WI.exec(GI(n,t)))?YI(s[1].substr(1),n,!0):(s=HI.exec(GI(n,t)))?YI(s[1],n,!1):function(e){try{const t=new RegExp("^".concat(OI(e),"$"));return function(n){return t.lastIndex=0,"string"===typeof n&&t.test(n)?e:null}}catch(t){return UI}}(n),VI.set(i,r)),KI(r,e)}function KI(e,t){if("string"===typeof t)return e;const n=function(n,i){return aL(n,t.base,!ve)?e(Vs(n.substr(t.base.length),oi),i):null};return n.allBasenames=e.allBasenames,n.allPaths=e.allPaths,n.basenames=e.basenames,n.patterns=e.patterns,n}function GI(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function YI(e,t,n){const i=oi===Jn.sep,s=i?e:e.replace($I,oi),r=oi+s,o=Jn.sep+e;let a;return a=n?function(n,a){return"string"!==typeof n||n!==s&&!n.endsWith(r)&&(i||n!==e&&!n.endsWith(o))?null:t}:function(n,r){return"string"!==typeof n||n!==s&&(i||n!==e)?null:t},a.allPaths=[(n?"*/":"./")+e],a}function QI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return jI;if("string"===typeof e||function(e){const t=e;if(!t)return!1;return"string"===typeof t.base&&"string"===typeof t.pattern}(e)){const n=qI(e,t);if(n===UI)return jI;const i=function(e,t){return!!n(e,t)};return n.allBasenames&&(i.allBasenames=n.allBasenames),n.allPaths&&(i.allPaths=n.allPaths),i}return function(e,t){const n=XI(Object.getOwnPropertyNames(e).map((n=>function(e,t,n){if(!1===t)return UI;const i=qI(e,n);if(i===UI)return UI;if("boolean"===typeof t)return i;if(t){const n=t.when;if("string"===typeof n){const t=(t,s,r,o)=>{if(!o||!i(t,s))return null;const a=o(n.replace("$(basename)",(()=>r)));return Xa(a)?a.then((t=>t?e:null)):a?e:null};return t.requiresSiblings=!0,t}}return i}(n,e[n],t))).filter((e=>e!==UI))),i=n.length;if(!i)return UI;if(!n.some((e=>!!e.requiresSiblings))){if(1===i)return n[0];const e=function(e,t){let i;for(let s=0,r=n.length;s<r;s++){const r=n[s](e,t);if("string"===typeof r)return r;Xa(r)&&(i||(i=[]),i.push(r))}return i?(async()=>{for(const e of i){const t=await e;if("string"===typeof t)return t}return null})():null},t=n.find((e=>!!e.allBasenames));t&&(e.allBasenames=t.allBasenames);const s=n.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);return s.length&&(e.allPaths=s),e}const s=function(e,t,i){let s,r;for(let o=0,a=n.length;o<a;o++){const a=n[o];a.requiresSiblings&&i&&(t||(t=si(e)),s||(s=t.substr(0,t.length-ri(e).length)));const l=a(e,t,s,i);if("string"===typeof l)return l;Xa(l)&&(r||(r=[]),r.push(l))}return r?(async()=>{for(const e of r){const t=await e;if("string"===typeof t)return t}return null})():null},r=n.find((e=>!!e.allBasenames));r&&(s.allBasenames=r.allBasenames);const o=n.reduce(((e,t)=>t.allPaths?e.concat(t.allPaths):e),[]);o.length&&(s.allPaths=o);return s}(e,t)}function XI(e,t){const n=e.filter((e=>!!e.basenames));if(n.length<2)return e;const i=n.reduce(((e,t)=>{const n=t.basenames;return n?e.concat(n):e}),[]);let s;if(t){s=[];for(let e=0,n=i.length;e<n;e++)s.push(t)}else s=n.reduce(((e,t)=>{const n=t.patterns;return n?e.concat(n):e}),[]);const r=function(e,t){if("string"!==typeof e)return null;if(!t){let n;for(n=e.length;n>0;n--){const t=e.charCodeAt(n-1);if(47===t||92===t)break}t=e.substr(n)}const n=i.indexOf(t);return-1!==n?s[n]:null};r.basenames=i,r.patterns=s,r.allBasenames=i;const o=e.filter((e=>!e.basenames));return o.push(r),o}function ZI(e,t,n,i,s,r){if(Array.isArray(e)){let o=0;for(const a of e){const e=ZI(a,t,n,i,s,r);if(10===e)return e;e>o&&(o=e)}return o}if("string"===typeof e)return i?"*"===e?5:e===n?10:0:0;if(e){const{language:c,pattern:u,scheme:h,hasAccessToAllModels:d,notebookType:f}=e;if(!i&&!d)return 0;f&&s&&(t=s);let g=0;if(h)if(h===t.scheme)g=10;else{if("*"!==h)return 0;g=5}if(c)if(c===n)g=10;else{if("*"!==c)return 0;g=Math.max(g,5)}if(f)if(f===r)g=10;else{if("*"!==f||void 0===r)return 0;g=Math.max(g,5)}if(u){let e;if(e="string"===typeof u?u:{...u,base:ei(u.base)},e!==t.fsPath&&(o=e,a=t.fsPath,!o||"string"!==typeof a||!QI(o)(a,void 0,l)))return 0;g=10}return g}return 0;var o,a,l}function JI(e){return"string"!==typeof e&&(Array.isArray(e)?e.every(JI):!!e.exclusive)}class e${constructor(e,t,n,i){this.uri=e,this.languageId=t,this.notebookUri=n,this.notebookType=i}equals(e){var t,n;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&(null===(t=this.notebookUri)||void 0===t?void 0:t.toString())===(null===(n=e.notebookUri)||void 0===n?void 0:n.toString())}}class t${constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new un,this.onDidChange=this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),Qt((()=>{if(n){const e=this._entries.indexOf(n);e>=0&&(this._entries.splice(e,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}}))}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e);const t=[];for(const n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e){const t=[];return this._orderedForEach(e,(e=>t.push(e.provider))),t}orderedGroups(e){const t=[];let n,i;return this._orderedForEach(e,(e=>{n&&i===e._score?n.push(e.provider):(i=e._score,n=[e.provider],t.push(n))})),t}_orderedForEach(e,t){this._updateScores(e);for(const n of this._entries)n._score>0&&t(n)}_updateScores(e){var t,n;const i=null===(t=this._notebookInfoResolver)||void 0===t?void 0:t.call(this,e.uri),s=i?new e$(e.uri,e.getLanguageId(),i.uri,i.type):new e$(e.uri,e.getLanguageId(),void 0,void 0);if(!(null===(n=this._lastCandidate)||void 0===n?void 0:n.equals(s))){this._lastCandidate=s;for(const t of this._entries)if(t._score=ZI(t.selector,s.uri,s.languageId,Of(e),s.notebookUri,s.notebookType),JI(t.selector)&&t._score>0){for(const e of this._entries)e._score=0;t._score=1e3;break}this._entries.sort(t$._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:n$(e.selector)&&!n$(t.selector)?1:!n$(e.selector)&&n$(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function n$(e){return"string"!==typeof e&&(Array.isArray(e)?e.some(n$):Boolean(e.isBuiltin))}pd(_p,class{constructor(){this.referenceProvider=new t$(this._score.bind(this)),this.renameProvider=new t$(this._score.bind(this)),this.codeActionProvider=new t$(this._score.bind(this)),this.definitionProvider=new t$(this._score.bind(this)),this.typeDefinitionProvider=new t$(this._score.bind(this)),this.declarationProvider=new t$(this._score.bind(this)),this.implementationProvider=new t$(this._score.bind(this)),this.documentSymbolProvider=new t$(this._score.bind(this)),this.inlayHintsProvider=new t$(this._score.bind(this)),this.colorProvider=new t$(this._score.bind(this)),this.codeLensProvider=new t$(this._score.bind(this)),this.documentFormattingEditProvider=new t$(this._score.bind(this)),this.documentRangeFormattingEditProvider=new t$(this._score.bind(this)),this.onTypeFormattingEditProvider=new t$(this._score.bind(this)),this.signatureHelpProvider=new t$(this._score.bind(this)),this.hoverProvider=new t$(this._score.bind(this)),this.documentHighlightProvider=new t$(this._score.bind(this)),this.multiDocumentHighlightProvider=new t$(this._score.bind(this)),this.selectionRangeProvider=new t$(this._score.bind(this)),this.foldingRangeProvider=new t$(this._score.bind(this)),this.linkProvider=new t$(this._score.bind(this)),this.inlineCompletionsProvider=new t$(this._score.bind(this)),this.completionProvider=new t$(this._score.bind(this)),this.linkedEditingRangeProvider=new t$(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new t$(this._score.bind(this)),this.documentSemanticTokensProvider=new t$(this._score.bind(this)),this.documentOnDropEditProvider=new t$(this._score.bind(this)),this.documentPasteEditProvider=new t$(this._score.bind(this))}_score(e){var t;return null===(t=this._notebookTypeResolver)||void 0===t?void 0:t.call(this,e)}},1);const i$=ro("hoverService"),s$=ro("contextViewService"),r$=ro("contextMenuService"),o$=Mu;class a$ extends Zt{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new DS(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}class l$ extends Zt{static render(e,t,n){return new l$(e,t,n)}constructor(e,t,n){super(),this.actionContainer=Du(e,o$("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=Du(this.actionContainer,o$("a.action")),this.action.setAttribute("role","button"),t.iconClass&&Du(this.action,o$("span.icon.".concat(t.iconClass)));Du(this.action,o$("span")).textContent=n?"".concat(t.label," (").concat(n,")"):t.label,this._register(zc(this.actionContainer,ku.CLICK,(e=>{e.stopPropagation(),e.preventDefault(),t.run(this.actionContainer)}))),this._register(zc(this.actionContainer,ku.KEY_DOWN,(e=>{const n=new ja(e);(n.equals(3)||n.equals(10))&&(e.stopPropagation(),e.preventDefault(),t.run(this.actionContainer))}))),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}const c$=ro("openerService");function u$(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=h$(t);return f$(n,function(e,t){const n={type:1,children:[]};let i=0,s=n;const r=[],o=new d$(e);for(;!o.eos();){let e=o.next();const n="\\"===e&&0!==p$(o.peek(),t);if(n&&(e=o.next()),!n&&g$(e,t)&&e===o.peek()){o.advance(),2===s.type&&(s=r.pop());const n=p$(e,t);if(s.type===n||5===s.type&&6===n)s=r.pop();else{const e={type:n,children:[]};5===n&&(e.index=i,i++),s.children.push(e),r.push(s),s=e}}else if("\n"===e)2===s.type&&(s=r.pop()),s.children.push({type:8});else if(2!==s.type){const t={type:2,content:e};s.children.push(t),r.push(s),s=t}else s.content+=e}2===s.type&&(s=r.pop());r.length;return n}(e,!!t.renderCodeSegments),t.actionHandler,t.renderCodeSegments),n}function h$(e){const t=e.inline?"span":"div",n=document.createElement(t);return e.className&&(n.className=e.className),n}class d${constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function f$(e,t,n,i){let s;if(2===t.type)s=document.createTextNode(t.content||"");else if(3===t.type)s=document.createElement("b");else if(4===t.type)s=document.createElement("i");else if(7===t.type&&i)s=document.createElement("code");else if(5===t.type&&n){const e=document.createElement("a");n.disposables.add(Hc(e,"click",(e=>{n.callback(String(t.index),e)}))),s=e}else 8===t.type?s=document.createElement("br"):1===t.type&&(s=e);s&&e!==s&&e.appendChild(s),s&&Array.isArray(t.children)&&t.children.forEach((e=>{f$(s,e,n,i)}))}function g$(e,t){return 0!==p$(e,t)}function p$(e,t){switch(e){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return t?7:0;default:return 0}}const m$=new RegExp("(\\\\)?\\$\\((".concat(bo.iconNameExpression,"(?:").concat(bo.iconModifierExpression,")?)\\)"),"g");function b$(e){const t=new Array;let n,i=0,s=0;for(;null!==(n=m$.exec(e));){s=n.index||0,i<s&&t.push(e.substring(i,s)),i=(n.index||0)+n[0].length;const[,r,o]=n;t.push(r?"$(".concat(o,")"):_$({id:o}))}return i<e.length&&t.push(e.substring(i)),t}function _$(e){const t=Mu("span");return t.classList.add(...bo.asClassNameArray(e)),t}new Uint32Array(10);new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function v$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){for(let i=0,s=t.length;i<s;i++){const s=t[i](e,n);if(s)return s}return null}}S$.bind(void 0,!1);const y$=S$.bind(void 0,!0);function S$(e,t,n){if(!n||n.length<t.length)return null;let i;return i=e?sr(n,t):0===n.indexOf(t),i?t.length>0?[{start:0,end:t.length}]:[]:null}function w$(e,t,n,i){if(n===e.length)return[];if(i===t.length)return null;if(e[n]===t[i]){let s=null;return(s=w$(e,t,n+1,i+1))?A$({start:i,end:i+1},s):null}return w$(e,t,n,i+1)}function k$(e){return 97<=e&&e<=122}function C$(e){return 65<=e&&e<=90}function x$(e){return 48<=e&&e<=57}function E$(e){return 32===e||9===e||10===e||13===e}const L$=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach((e=>L$.add(e.charCodeAt(0))));new Map;function D$(e){return k$(e)||C$(e)||x$(e)}function A$(e,t){return 0===t.length?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function T$(e,t){for(let n=t;n<e.length;n++){const t=e.charCodeAt(n);if(C$(t)||x$(t)||n>0&&!D$(e.charCodeAt(n-1)))return n}return e.length}function N$(e,t,n,i){if(n===e.length)return[];if(i===t.length)return null;if(e[n]!==t[i].toLowerCase())return null;{let s=null,r=i+1;for(s=N$(e,t,n+1,i+1);!s&&(r=T$(t,r))<t.length;)s=N$(e,t,n+1,r),r++;return null===s?null:A$({start:i,end:i+1},s)}}function I$(e,t){if(!t)return null;if(0===(t=t.trim()).length)return null;if(!function(e){let t=0,n=0,i=0,s=0;for(let r=0;r<e.length;r++)i=e.charCodeAt(r),C$(i)&&t++,k$(i)&&n++,E$(i)&&s++;return 0!==t&&0!==n||0!==s?t<=5:e.length<=30}(e))return null;if(t.length>60)return null;const n=function(e){let t=0,n=0,i=0,s=0,r=0;for(let o=0;o<e.length;o++)r=e.charCodeAt(o),C$(r)&&t++,k$(r)&&n++,D$(r)&&i++,x$(r)&&s++;return{upperPercent:t/e.length,lowerPercent:n/e.length,alphaPercent:i/e.length,numericPercent:s/e.length}}(t);if(!function(e){const{upperPercent:t,lowerPercent:n,alphaPercent:i,numericPercent:s}=e;return n>.2&&t<.8&&i>.6&&s<.2}(n)){if(!function(e){const{upperPercent:t,lowerPercent:n}=e;return 0===n&&t>.6}(n))return null;t=t.toLowerCase()}let i=null,s=0;for(e=e.toLowerCase();s<t.length&&null===(i=N$(e,t,0,s));)s=T$(t,s+1);return i}const $$=v$(y$,I$,(function(e,t){const n=t.toLowerCase().indexOf(e.toLowerCase());return-1===n?null:[{start:n,end:n+e.length}]})),M$=v$(y$,I$,(function(e,t){return w$(e.toLowerCase(),t.toLowerCase(),0,0)})),R$=new Og(1e4);function O$(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!==typeof e||"string"!==typeof t)return null;let i=R$.get(e);i||(i=new RegExp(e.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*"),"i"),R$.set(e,i));const s=i.exec(t);return s?[{start:s.index,end:s.index+s[0].length}]:n?M$(e,t):$$(e,t)}function P$(e,t){const n=J$(e,e.toLowerCase(),0,t,t.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return n?function(e){if("undefined"===typeof e)return[];const t=[],n=e[1];for(let i=e.length-1;i>1;i--){const s=e[i]+n,r=t[t.length-1];r&&r.end===s?r.end=s+1:t.push({start:s,end:s+1})}return t}(n):null}const F$=128;function B$(){const e=[],t=[];for(let n=0;n<=F$;n++)t[n]=0;for(let n=0;n<=F$;n++)e.push(t.slice(0));return e}function z$(e){const t=[];for(let n=0;n<=e;n++)t[n]=0;return t}const W$=z$(2*F$),H$=z$(2*F$),V$=B$(),j$=B$(),U$=B$(),q$=!1;function K$(e,t,n,i,s){function r(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";for(;e.length<t;)e=n+e;return e}let o=" |   |".concat(i.split("").map((e=>r(e,3))).join("|"),"\n");for(let a=0;a<=n;a++)o+=0===a?" |":"".concat(t[a-1],"|"),o+=e[a].slice(0,s+1).map((e=>r(e.toString(),3))).join("|")+"\n";return o}function G$(e,t){if(t<0||t>=e.length)return!1;const n=e.codePointAt(t);switch(n){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!wr(n)}}function Y$(e,t){if(t<0||t>=e.length)return!1;switch(e.charCodeAt(t)){case 32:case 9:return!0;default:return!1}}function Q$(e,t,n){return t[e]!==n[e]}var X$;!function(e){e.Default=[-100,0],e.isDefault=function(e){return!e||2===e.length&&-100===e[0]&&0===e[1]}}(X$||(X$={}));class Z${constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}}function J$(e,t,n,i,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Z$.default;const a=e.length>F$?F$:e.length,l=i.length>F$?F$:i.length;if(n>=a||r>=l||a-n>l-r)return;if(!function(e,t,n,i,s,r){let o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];for(;t<n&&s<r;)e[t]===i[s]&&(o&&(W$[t]=s),t+=1),s+=1;return t===n}(t,n,a,s,r,l,!0))return;!function(e,t,n,i,s,r){let o=e-1,a=t-1;for(;o>=n&&a>=i;)s[o]===r[a]&&(H$[o]=a,o--),a--}(a,l,n,r,t,s);let c=1,u=1,h=n,d=r;const f=[!1];for(c=1,h=n;h<a;c++,h++){const o=W$[h],g=H$[h],p=h+1<a?H$[h+1]:l;for(u=o-r+1,d=o;d<p;u++,d++){let a=Number.MIN_SAFE_INTEGER,p=!1;d<=g&&(a=eM(e,t,h,n,i,s,d,l,r,0===V$[c-1][u-1],f));let m=0;a!==Number.MAX_SAFE_INTEGER&&(p=!0,m=a+j$[c-1][u-1]);const b=d>o,_=b?j$[c][u-1]+(V$[c][u-1]>0?-5:0):0,v=d>o+1&&V$[c][u-1]>0,y=v?j$[c][u-2]+(V$[c][u-2]>0?-5:0):0;if(v&&(!b||y>=_)&&(!p||y>=m))j$[c][u]=y,U$[c][u]=3,V$[c][u]=0;else if(b&&(!p||_>=m))j$[c][u]=_,U$[c][u]=2,V$[c][u]=0;else{if(!p)throw new Error("not possible");j$[c][u]=m,U$[c][u]=1,V$[c][u]=V$[c-1][u-1]+1}}}if(q$&&function(e,t,n,i){e=e.substr(t),n=n.substr(i),console.log(K$(j$,e,e.length,n,n.length)),console.log(K$(U$,e,e.length,n,n.length)),console.log(K$(V$,e,e.length,n,n.length))}(e,n,i,r),!f[0]&&!o.firstMatchCanBeWeak)return;c--,u--;const g=[j$[c][u],r];let p=0,m=0;for(;c>=1;){let e=u;do{const t=U$[c][e];if(3===t)e-=2;else{if(2!==t)break;e-=1}}while(e>=1);p>1&&t[n+c-1]===s[r+u-1]&&!Q$(e+r-1,i,s)&&p+1>V$[c][e]&&(e=u),e===u?p++:p=1,m||(m=e),c--,u=e-1,g.push(u)}l===a&&o.boostFullMatch&&(g[0]+=2);const b=m-a;return g[0]-=b,g}function eM(e,t,n,i,s,r,o,a,l,c,u){if(t[n]!==r[o])return Number.MIN_SAFE_INTEGER;let h=1,d=!1;return o===n-i?h=e[n]===s[o]?7:5:!Q$(o,s,r)||0!==o&&Q$(o-1,s,r)?!G$(r,o)||0!==o&&G$(r,o-1)?(G$(r,o-1)||Y$(r,o-1))&&(h=5,d=!0):h=5:(h=e[n]===s[o]?7:5,d=!0),h>1&&n===i&&(u[0]=!0),d||(d=Q$(o,s,r)||G$(r,o-1)||Y$(r,o-1)),n===i?o>l&&(h-=d?3:5):h+=c?d?2:0:d?0:1,o+1===a&&(h-=d?3:5),h}Z$.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};const tM="$(",nM=new RegExp("\\$\\(".concat(bo.iconNameExpression,"(?:").concat(bo.iconModifierExpression,")?\\)"),"g"),iM=new RegExp("(\\\\)?".concat(nM.source),"g");const sM=new RegExp("\\\\".concat(nM.source),"g");const rM=new RegExp("(\\s)?(\\\\)?".concat(nM.source,"(\\s)?"),"g");function oM(e){return-1===e.indexOf(tM)?e:e.replace(rM,((e,t,n,i)=>n?e:t||i||""))}const aM=new RegExp("\\$\\(".concat(bo.iconNameCharacter,"+\\)"),"g");function lM(e){aM.lastIndex=0;let t="";const n=[];let i=0;for(;;){const s=aM.lastIndex,r=aM.exec(e),o=e.substring(s,null===r||void 0===r?void 0:r.index);if(o.length>0){t+=o;for(let e=0;e<o.length;e++)n.push(i)}if(!r)break;i+=r[0].length}return{text:t,iconOffsets:n}}function cM(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{text:i,iconOffsets:s}=t;if(!s||0===s.length)return O$(e,i,n);const r=Vs(i," "),o=i.length-r.length,a=O$(e,r,n);if(a)for(const l of a){const e=s[l.start+o]+o;l.start+=e,l.end+=e}return a}class uM{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n,i,s;if(this.value=e,"string"!==typeof this.value)throw Pt("value");"boolean"===typeof t?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=null!==(n=t.isTrusted)&&void 0!==n?n:void 0,this.supportThemeIcons=null!==(i=t.supportThemeIcons)&&void 0!==i&&i,this.supportHtml=null!==(s=t.supportHtml)&&void 0!==s&&s)}appendText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var n;return this.value+=function(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}(this.supportThemeIcons?(n=e,n.replace(iM,((e,t)=>t?e:"\\".concat(e)))):e).replace(/([ \t]+)/g,((e,t)=>"&nbsp;".repeat(t.length))).replace(/\>/gm,"\\>").replace(/\n/g,1===t?"\\\n":"\n\n"),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+="\n".concat(function(e,t){var n,i;const s=null!==(i=null===(n=e.match(/^`+/gm))||void 0===n?void 0:n.reduce(((e,t)=>e.length>t.length?e:t)).length)&&void 0!==i?i:0,r=s>=3?s+1:3;return["".concat("`".repeat(r)).concat(t),e,"".concat("`".repeat(r))].join("\n")}(t,e),"\n"),this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=' "'.concat(this._escape(this._escape(n,'"'),")"),'"')),this.value+=")",this}_escape(e,t){const n=new RegExp(Hs(t),"g");return e.replace(n,((t,n)=>"\\"!==e.charAt(n-1)?"\\".concat(t):t))}}function hM(e){return e instanceof uM||!(!e||"object"!==typeof e)&&("string"===typeof e.value&&("boolean"===typeof e.isTrusted||"object"===typeof e.isTrusted||void 0===e.isTrusted)&&("boolean"===typeof e.supportThemeIcons||void 0===e.supportThemeIcons))}function dM(e){return e.replace(/"/g,"&quot;")}function fM(e){return e?e.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1"):e}class gM{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const pM=new gM("id#");let mM={};!function(){function e(e,t){t(mM)}e.amd=!0,function(t,n){e.amd?e(0,n):"object"===typeof exports?n(exports):n((t="undefined"!==typeof globalThis?globalThis:t||self).marked={})}(this,(function(e){function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function i(e,t){var i="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"===typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){i&&(e=i);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.defaults={async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};var r=/[&<>"']/,o=/[&<>"']/g,a=/[<>"']|&(?!#?\w+;)/,l=/[<>"']|&(?!#?\w+;)/g,c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u=function(e){return c[e]};function h(e,t){if(t){if(r.test(e))return e.replace(o,u)}else if(a.test(e))return e.replace(l,u);return e}var d=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function f(e){return e.replace(d,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}var g=/(^|[^\[])\^/g;function p(e,t){e="string"===typeof e?e:e.source,t=t||"";var n={replace:function(t,i){return i=(i=i.source||i).replace(g,"$1"),e=e.replace(t,i),n},getRegex:function(){return new RegExp(e,t)}};return n}var m=/[^\w:]/g,b=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function _(e,t,n){if(e){var i;try{i=decodeURIComponent(f(n)).replace(m,"").toLowerCase()}catch(zY){return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}t&&!b.test(n)&&(n=function(e,t){v[" "+e]||(y.test(e)?v[" "+e]=e+"/":v[" "+e]=E(e,"/",!0));e=v[" "+e];var n=-1===e.indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(S,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(w,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(zY){return null}return n}var v={},y=/^[^:]+:\/*[^/]*$/,S=/^([^:]+:)[\s\S]*$/,w=/^([^:]+:\/*[^/]*)[\s\S]*$/;var k={exec:function(){}};function C(e){for(var t,n,i=1;i<arguments.length;i++)for(n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function x(e,t){var n=e.replace(/\|/g,(function(e,t,n){for(var i=!1,s=t;--s>=0&&"\\"===n[s];)i=!i;return i?"|":" |"})).split(/ \|/),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function E(e,t,n){var i=e.length;if(0===i)return"";for(var s=0;s<i;){var r=e.charAt(i-s-1);if(r!==t||n){if(r===t||!n)break;s++}else s++}return e.slice(0,i-s)}function L(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function D(e,t){if(t<1)return"";for(var n="";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e}function A(e,t,n,i){var s=t.href,r=t.title?h(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){i.state.inLink=!0;var a={type:"link",raw:n,href:s,title:r,text:o,tokens:i.inlineTokens(o)};return i.state.inLink=!1,a}return{type:"image",raw:n,href:s,title:r,text:h(o)}}var T=function(){function t(t){this.options=t||e.defaults}var n=t.prototype;return n.space=function(e){var t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}},n.code=function(e){var t=this.rules.block.code.exec(e);if(t){var n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:E(n,"\n")}}},n.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],i=function(e,t){var n=e.match(/^(\s+)(?:```)/);if(null===n)return t;var i=n[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=i.length?e.slice(i.length):e})).join("\n")}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:i}}},n.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var n=t[2].trim();if(/#$/.test(n)){var i=E(n,"#");this.options.pedantic?n=i.trim():i&&!/ $/.test(i)||(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}},n.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},n.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(n,[]),text:n}}},n.list=function(e){var t=this.rules.block.list.exec(e);if(t){var n,s,r,o,a,l,c,u,h,d,f,g,p=t[1].trim(),m=p.length>1,b={type:"list",raw:"",ordered:m,start:m?+p.slice(0,-1):"",loose:!1,items:[]};p=m?"\\d{1,9}\\"+p.slice(-1):"\\"+p,this.options.pedantic&&(p=m?p:"[*+-]");for(var _=new RegExp("^( {0,3}"+p+")((?:[\t ][^\\n]*)?(?:\\n|$))");e&&(g=!1,t=_.exec(e))&&!this.rules.block.hr.test(e);){if(n=t[0],e=e.substring(n.length),u=t[2].split("\n",1)[0],h=e.split("\n",1)[0],this.options.pedantic?(o=2,f=u.trimLeft()):(o=(o=t[2].search(/[^ ]/))>4?1:o,f=u.slice(o),o+=t[1].length),l=!1,!u&&/^ *$/.test(h)&&(n+=h+"\n",e=e.substring(h.length+1),g=!0),!g)for(var v=new RegExp("^ {0,"+Math.min(3,o-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),y=new RegExp("^ {0,"+Math.min(3,o-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),S=new RegExp("^ {0,"+Math.min(3,o-1)+"}(?:```|~~~)"),w=new RegExp("^ {0,"+Math.min(3,o-1)+"}#");e&&(u=d=e.split("\n",1)[0],this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!S.test(u))&&!w.test(u)&&!v.test(u)&&!y.test(e);){if(u.search(/[^ ]/)>=o||!u.trim())f+="\n"+u.slice(o);else{if(l)break;f+="\n"+u}l||u.trim()||(l=!0),n+=d+"\n",e=e.substring(d.length+1)}b.loose||(c?b.loose=!0:/\n *\n *$/.test(n)&&(c=!0)),this.options.gfm&&(s=/^\[[ xX]\] /.exec(f))&&(r="[ ] "!==s[0],f=f.replace(/^\[[ xX]\] +/,"")),b.items.push({type:"list_item",raw:n,task:!!s,checked:r,loose:!1,text:f}),b.raw+=n}b.items[b.items.length-1].raw=n.trimRight(),b.items[b.items.length-1].text=f.trimRight(),b.raw=b.raw.trimRight();var k=b.items.length;for(a=0;a<k;a++){this.lexer.state.top=!1,b.items[a].tokens=this.lexer.blockTokens(b.items[a].text,[]);var C=b.items[a].tokens.filter((function(e){return"space"===e.type})),x=C.every((function(e){for(var t,n=0,s=i(e.raw.split(""));!(t=s()).done;){if("\n"===t.value&&(n+=1),n>1)return!0}return!1}));!b.loose&&C.length&&x&&(b.loose=!0,b.items[a].loose=!0)}return b}},n.html=function(e){var t=this.rules.block.html.exec(e);if(t){var n={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};if(this.options.sanitize){var i=this.options.sanitizer?this.options.sanitizer(t[0]):h(t[0]);n.type="paragraph",n.text=i,n.tokens=this.lexer.inline(i)}return n}},n.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},n.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:x(t[1]).map((function(e){return{text:e}})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];var i,s,r,o,a=n.align.length;for(i=0;i<a;i++)/^ *-+: *$/.test(n.align[i])?n.align[i]="right":/^ *:-+: *$/.test(n.align[i])?n.align[i]="center":/^ *:-+ *$/.test(n.align[i])?n.align[i]="left":n.align[i]=null;for(a=n.rows.length,i=0;i<a;i++)n.rows[i]=x(n.rows[i],n.header.length).map((function(e){return{text:e}}));for(a=n.header.length,s=0;s<a;s++)n.header[s].tokens=this.lexer.inline(n.header[s].text);for(a=n.rows.length,s=0;s<a;s++)for(o=n.rows[s],r=0;r<o.length;r++)o[r].tokens=this.lexer.inline(o[r].text);return n}}},n.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}},n.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t){var n="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}},n.text=function(e){var t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}},n.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:h(t[1])}},n.tag=function(e){var t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):h(t[0]):t[0]}},n.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var i=E(n.slice(0,-1),"\\");if((n.length-i.length)%2===0)return}else{var s=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,i=0,s=0;s<n;s++)if("\\"===e[s])s++;else if(e[s]===t[0])i++;else if(e[s]===t[1]&&--i<0)return s;return-1}(t[2],"()");if(s>-1){var r=(0===t[0].indexOf("!")?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,r).trim(),t[3]=""}}var o=t[2],a="";if(this.options.pedantic){var l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);l&&(o=l[1],a=l[3])}else a=t[3]?t[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(o=this.options.pedantic&&!/>$/.test(n)?o.slice(1):o.slice(1,-1)),A(t,{href:o?o.replace(this.rules.inline._escapes,"$1"):o,title:a?a.replace(this.rules.inline._escapes,"$1"):a},t[0],this.lexer)}},n.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var i=(n[2]||n[1]).replace(/\s+/g," ");if(!(i=t[i.toLowerCase()])||!i.href){var s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return A(n,i,n[0],this.lexer)}},n.emStrong=function(e,t,n){void 0===n&&(n="");var i=this.rules.inline.emStrong.lDelim.exec(e);if(i&&(!i[3]||!n.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var s=i[1]||i[2]||"";if(!s||s&&(""===n||this.rules.inline.punctuation.exec(n))){var r,o,a=i[0].length-1,l=a,c=0,u="*"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+a);null!=(i=u.exec(t));)if(r=i[1]||i[2]||i[3]||i[4]||i[5]||i[6])if(o=r.length,i[3]||i[4])l+=o;else if(!((i[5]||i[6])&&a%3)||(a+o)%3){if(!((l-=o)>0)){if(o=Math.min(o,o+l+c),Math.min(a,o)%2){var h=e.slice(1,a+i.index+o);return{type:"em",raw:e.slice(0,a+i.index+o+1),text:h,tokens:this.lexer.inlineTokens(h)}}var d=e.slice(2,a+i.index+o-1);return{type:"strong",raw:e.slice(0,a+i.index+o+1),text:d,tokens:this.lexer.inlineTokens(d)}}}else c+=o}}},n.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var n=t[2].replace(/\n/g," "),i=/[^ ]/.test(n),s=/^ /.test(n)&&/ $/.test(n);return i&&s&&(n=n.substring(1,n.length-1)),n=h(n,!0),{type:"codespan",raw:t[0],text:n}}},n.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},n.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}},n.autolink=function(e,t){var n,i,s=this.rules.inline.autolink.exec(e);if(s)return i="@"===s[2]?"mailto:"+(n=h(this.options.mangle?t(s[1]):s[1])):n=h(s[1]),{type:"link",raw:s[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}},n.url=function(e,t){var n;if(n=this.rules.inline.url.exec(e)){var i,s;if("@"===n[2])s="mailto:"+(i=h(this.options.mangle?t(n[0]):n[0]));else{var r;do{r=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(r!==n[0]);i=h(n[0]),s="www."===n[1]?"http://"+i:i}return{type:"link",raw:n[0],text:i,href:s,tokens:[{type:"text",raw:i,text:i}]}}},n.inlineText=function(e,t){var n,i=this.rules.inline.text.exec(e);if(i)return n=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):h(i[0]):i[0]:h(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:n}},t}(),N={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:k,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};N.def=p(N.def).replace("label",N._label).replace("title",N._title).getRegex(),N.bullet=/(?:[*+-]|\d{1,9}[.)])/,N.listItemStart=p(/^( *)(bull) */).replace("bull",N.bullet).getRegex(),N.list=p(N.list).replace(/bull/g,N.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+N.def.source+")").getRegex(),N._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",N._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,N.html=p(N.html,"i").replace("comment",N._comment).replace("tag",N._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),N.paragraph=p(N._paragraph).replace("hr",N.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",N._tag).getRegex(),N.blockquote=p(N.blockquote).replace("paragraph",N.paragraph).getRegex(),N.normal=C({},N),N.gfm=C({},N.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),N.gfm.table=p(N.gfm.table).replace("hr",N.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",N._tag).getRegex(),N.gfm.paragraph=p(N._paragraph).replace("hr",N.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",N.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",N._tag).getRegex(),N.pedantic=C({},N.normal,{html:p("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",N._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:k,paragraph:p(N.normal._paragraph).replace("hr",N.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",N.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var I={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:k,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:k,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function $(e){return e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function M(e){var t,n,i="",s=e.length;for(t=0;t<s;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),i+="&#"+n+";";return i}I._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",I.punctuation=p(I.punctuation).replace(/punctuation/g,I._punctuation).getRegex(),I.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,I.escapedEmSt=/\\\*|\\_/g,I._comment=p(N._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),I.emStrong.lDelim=p(I.emStrong.lDelim).replace(/punct/g,I._punctuation).getRegex(),I.emStrong.rDelimAst=p(I.emStrong.rDelimAst,"g").replace(/punct/g,I._punctuation).getRegex(),I.emStrong.rDelimUnd=p(I.emStrong.rDelimUnd,"g").replace(/punct/g,I._punctuation).getRegex(),I._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,I._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,I._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,I.autolink=p(I.autolink).replace("scheme",I._scheme).replace("email",I._email).getRegex(),I._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,I.tag=p(I.tag).replace("comment",I._comment).replace("attribute",I._attribute).getRegex(),I._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,I._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,I._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,I.link=p(I.link).replace("label",I._label).replace("href",I._href).replace("title",I._title).getRegex(),I.reflink=p(I.reflink).replace("label",I._label).replace("ref",N._label).getRegex(),I.nolink=p(I.nolink).replace("ref",N._label).getRegex(),I.reflinkSearch=p(I.reflinkSearch,"g").replace("reflink",I.reflink).replace("nolink",I.nolink).getRegex(),I.normal=C({},I),I.pedantic=C({},I.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:p(/^!?\[(label)\]\((.*?)\)/).replace("label",I._label).getRegex(),reflink:p(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",I._label).getRegex()}),I.gfm=C({},I.normal,{escape:p(I.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),I.gfm.url=p(I.gfm.url,"i").replace("email",I.gfm._extended_email).getRegex(),I.breaks=C({},I.gfm,{br:p(I.br).replace("{2,}","*").getRegex(),text:p(I.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var R=function(){function n(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||e.defaults,this.options.tokenizer=this.options.tokenizer||new T,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var n={block:N.normal,inline:I.normal};this.options.pedantic?(n.block=N.pedantic,n.inline=I.pedantic):this.options.gfm&&(n.block=N.gfm,this.options.breaks?n.inline=I.breaks:n.inline=I.gfm),this.tokenizer.rules=n}n.lex=function(e,t){return new n(t).lex(e)},n.lexInline=function(e,t){return new n(t).inlineTokens(e)};var i,s,r,o=n.prototype;return o.lex=function(e){var t;for(e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens},o.blockTokens=function(e,t){var n,i,s,r,o=this;for(void 0===t&&(t=[]),e=this.options.pedantic?e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e.replace(/^( *)(\t+)/gm,(function(e,t,n){return t+"    ".repeat(n.length)}));e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((function(i){return!!(n=i.call({lexer:o},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)}))))if(n=this.tokenizer.space(e))e=e.substring(n.raw.length),1===n.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(n);else if(n=this.tokenizer.code(e))e=e.substring(n.raw.length),!(i=t[t.length-1])||"paragraph"!==i.type&&"text"!==i.type?t.push(n):(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(n=this.tokenizer.fences(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.heading(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.hr(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.blockquote(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.list(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.html(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.def(e))e=e.substring(n.raw.length),!(i=t[t.length-1])||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title}):(i.raw+="\n"+n.raw,i.text+="\n"+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(n=this.tokenizer.table(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.lheading(e))e=e.substring(n.raw.length),t.push(n);else if(s=e,this.options.extensions&&this.options.extensions.startBlock&&function(){var t=1/0,n=e.slice(1),i=void 0;o.options.extensions.startBlock.forEach((function(e){"number"===typeof(i=e.call({lexer:this},n))&&i>=0&&(t=Math.min(t,i))})),t<1/0&&t>=0&&(s=e.substring(0,t+1))}(),this.state.top&&(n=this.tokenizer.paragraph(s)))i=t[t.length-1],r&&"paragraph"===i.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n),r=s.length!==e.length,e=e.substring(n.raw.length);else if(n=this.tokenizer.text(e))e=e.substring(n.raw.length),(i=t[t.length-1])&&"text"===i.type?(i.raw+="\n"+n.raw,i.text+="\n"+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);else if(e){var a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}throw new Error(a)}return this.state.top=!0,t},o.inline=function(e,t){return void 0===t&&(t=[]),this.inlineQueue.push({src:e,tokens:t}),t},o.inlineTokens=function(e,t){var n,i,s,r=this;void 0===t&&(t=[]);var o,a,l,c=e;if(this.tokens.links){var u=Object.keys(this.tokens.links);if(u.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(c));)u.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(c=c.slice(0,o.index)+"["+D("a",o[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(c));)c=c.slice(0,o.index)+"["+D("a",o[0].length-2)+"]"+c.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.escapedEmSt.exec(c));)c=c.slice(0,o.index)+"++"+c.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(a||(l=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((function(i){return!!(n=i.call({lexer:r},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)}))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),(i=t[t.length-1])&&"text"===n.type&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),(i=t[t.length-1])&&"text"===n.type&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,c,l))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e,M))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e,M))){if(s=e,this.options.extensions&&this.options.extensions.startInline&&function(){var t=1/0,n=e.slice(1),i=void 0;r.options.extensions.startInline.forEach((function(e){"number"===typeof(i=e.call({lexer:this},n))&&i>=0&&(t=Math.min(t,i))})),t<1/0&&t>=0&&(s=e.substring(0,t+1))}(),n=this.tokenizer.inlineText(s,$))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(l=n.raw.slice(-1)),a=!0,(i=t[t.length-1])&&"text"===i.type?(i.raw+=n.raw,i.text+=n.text):t.push(n);else if(e){var h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}throw new Error(h)}}else e=e.substring(n.raw.length),t.push(n);return t},i=n,r=[{key:"rules",get:function(){return{block:N,inline:I}}}],(s=null)&&t(i.prototype,s),r&&t(i,r),Object.defineProperty(i,"prototype",{writable:!1}),n}(),O=function(){function t(t){this.options=t||e.defaults}var n=t.prototype;return n.code=function(e,t,n){var i=(t||"").match(/\S*/)[0];if(this.options.highlight){var s=this.options.highlight(e,i);null!=s&&s!==e&&(n=!0,e=s)}return e=e.replace(/\n$/,"")+"\n",i?'<pre><code class="'+this.options.langPrefix+h(i,!0)+'">'+(n?e:h(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:h(e,!0))+"</code></pre>\n"},n.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},n.html=function(e){return e},n.heading=function(e,t,n,i){return this.options.headerIds?"<h"+t+' id="'+(this.options.headerPrefix+i.slug(n))+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},n.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},n.list=function(e,t,n){var i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+i+">\n"},n.listitem=function(e){return"<li>"+e+"</li>\n"},n.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},n.paragraph=function(e){return"<p>"+e+"</p>\n"},n.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},n.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},n.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},n.strong=function(e){return"<strong>"+e+"</strong>"},n.em=function(e){return"<em>"+e+"</em>"},n.codespan=function(e){return"<code>"+e+"</code>"},n.br=function(){return this.options.xhtml?"<br/>":"<br>"},n.del=function(e){return"<del>"+e+"</del>"},n.link=function(e,t,n){if(null===(e=_(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<a href="'+h(e)+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>"},n.image=function(e,t,n){if(null===(e=_(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">"},n.text=function(e){return e},t}(),P=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return""+n},t.image=function(e,t,n){return""+n},t.br=function(){return""},e}(),F=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var n=e,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[e];do{n=e+"-"+ ++i}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=i,this.seen[n]=0),n},t.slug=function(e,t){void 0===t&&(t={});var n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)},e}(),B=function(){function t(t){this.options=t||e.defaults,this.options.renderer=this.options.renderer||new O,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new P,this.slugger=new F}t.parse=function(e,n){return new t(n).parse(e)},t.parseInline=function(e,n){return new t(n).parseInline(e)};var n=t.prototype;return n.parse=function(e,t){void 0===t&&(t=!0);var n,i,s,r,o,a,l,c,u,h,d,g,p,m,b,_,v,y,S,w="",k=e.length;for(n=0;n<k;n++)if(h=e[n],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type])||!1===(S=this.options.extensions.renderers[h.type].call({parser:this},h))&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))switch(h.type){case"space":continue;case"hr":w+=this.renderer.hr();continue;case"heading":w+=this.renderer.heading(this.parseInline(h.tokens),h.depth,f(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue;case"code":w+=this.renderer.code(h.text,h.lang,h.escaped);continue;case"table":for(c="",l="",r=h.header.length,i=0;i<r;i++)l+=this.renderer.tablecell(this.parseInline(h.header[i].tokens),{header:!0,align:h.align[i]});for(c+=this.renderer.tablerow(l),u="",r=h.rows.length,i=0;i<r;i++){for(l="",o=(a=h.rows[i]).length,s=0;s<o;s++)l+=this.renderer.tablecell(this.parseInline(a[s].tokens),{header:!1,align:h.align[s]});u+=this.renderer.tablerow(l)}w+=this.renderer.table(c,u);continue;case"blockquote":u=this.parse(h.tokens),w+=this.renderer.blockquote(u);continue;case"list":for(d=h.ordered,g=h.start,p=h.loose,r=h.items.length,u="",i=0;i<r;i++)_=(b=h.items[i]).checked,v=b.task,m="",b.task&&(y=this.renderer.checkbox(_),p?b.tokens.length>0&&"paragraph"===b.tokens[0].type?(b.tokens[0].text=y+" "+b.tokens[0].text,b.tokens[0].tokens&&b.tokens[0].tokens.length>0&&"text"===b.tokens[0].tokens[0].type&&(b.tokens[0].tokens[0].text=y+" "+b.tokens[0].tokens[0].text)):b.tokens.unshift({type:"text",text:y}):m+=y),m+=this.parse(b.tokens,p),u+=this.renderer.listitem(m,v,_);w+=this.renderer.list(u,d,g);continue;case"html":w+=this.renderer.html(h.text);continue;case"paragraph":w+=this.renderer.paragraph(this.parseInline(h.tokens));continue;case"text":for(u=h.tokens?this.parseInline(h.tokens):h.text;n+1<k&&"text"===e[n+1].type;)u+="\n"+((h=e[++n]).tokens?this.parseInline(h.tokens):h.text);w+=t?this.renderer.paragraph(u):u;continue;default:var C='Token with "'+h.type+'" type was not found.';if(this.options.silent)return void console.error(C);throw new Error(C)}else w+=S||"";return w},n.parseInline=function(e,t){t=t||this.renderer;var n,i,s,r="",o=e.length;for(n=0;n<o;n++)if(i=e[n],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type])||!1===(s=this.options.extensions.renderers[i.type].call({parser:this},i))&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type))switch(i.type){case"escape":case"text":r+=t.text(i.text);break;case"html":r+=t.html(i.text);break;case"link":r+=t.link(i.href,i.title,this.parseInline(i.tokens,t));break;case"image":r+=t.image(i.href,i.title,i.text);break;case"strong":r+=t.strong(this.parseInline(i.tokens,t));break;case"em":r+=t.em(this.parseInline(i.tokens,t));break;case"codespan":r+=t.codespan(i.text);break;case"br":r+=t.br();break;case"del":r+=t.del(this.parseInline(i.tokens,t));break;default:var a='Token with "'+i.type+'" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}else r+=s||"";return r},t}();function z(e,t,n){if("undefined"===typeof e||null===e)throw new Error("marked(): input parameter is undefined or null");if("string"!==typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"===typeof t&&(n=t,t=null),L(t=C({},z.defaults,t||{})),n){var i,s=t.highlight;try{i=R.lex(e,t)}catch(zY){return n(zY)}var r=function(e){var r;if(!e)try{t.walkTokens&&z.walkTokens(i,t.walkTokens),r=B.parse(i,t)}catch(zY){e=zY}return t.highlight=s,e?n(e):n(null,r)};if(!s||s.length<3)return r();if(delete t.highlight,!i.length)return r();var o=0;return z.walkTokens(i,(function(e){"code"===e.type&&(o++,setTimeout((function(){s(e.text,e.lang,(function(t,n){if(t)return r(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),0===--o&&r()}))}),0))})),void(0===o&&r())}function a(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+h(e.message+"",!0)+"</pre>";throw e}try{var l=R.lex(e,t);if(t.walkTokens){if(t.async)return Promise.all(z.walkTokens(l,t.walkTokens)).then((function(){return B.parse(l,t)})).catch(a);z.walkTokens(l,t.walkTokens)}return B.parse(l,t)}catch(zY){a(zY)}}z.options=z.setOptions=function(t){var n;return C(z.defaults,t),n=z.defaults,e.defaults=n,z},z.getDefaults=s,z.defaults=e.defaults,z.use=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,s=C.apply(void 0,[{}].concat(t)),r=z.defaults.extensions||{renderers:{},childTokens:{}};t.forEach((function(e){if(e.extensions&&(i=!0,e.extensions.forEach((function(e){if(!e.name)throw new Error("extension name required");if(e.renderer){var t=r.renderers?r.renderers[e.name]:null;r.renderers[e.name]=t?function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var r=e.renderer.apply(this,i);return!1===r&&(r=t.apply(this,i)),r}:e.renderer}if(e.tokenizer){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");r[e.level]?r[e.level].unshift(e.tokenizer):r[e.level]=[e.tokenizer],e.start&&("block"===e.level?r.startBlock?r.startBlock.push(e.start):r.startBlock=[e.start]:"inline"===e.level&&(r.startInline?r.startInline.push(e.start):r.startInline=[e.start]))}e.childTokens&&(r.childTokens[e.name]=e.childTokens)}))),e.renderer&&function(){var t=z.defaults.renderer||new O,n=function(n){var i=t[n];t[n]=function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];var a=e.renderer[n].apply(t,r);return!1===a&&(a=i.apply(t,r)),a}};for(var i in e.renderer)n(i);s.renderer=t}(),e.tokenizer&&function(){var t=z.defaults.tokenizer||new T,n=function(n){var i=t[n];t[n]=function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];var a=e.tokenizer[n].apply(t,r);return!1===a&&(a=i.apply(t,r)),a}};for(var i in e.tokenizer)n(i);s.tokenizer=t}(),e.walkTokens){var t=z.defaults.walkTokens;s.walkTokens=function(n){var i=[];return i.push(e.walkTokens.call(this,n)),t&&(i=i.concat(t.call(this,n))),i}}i&&(s.extensions=r),z.setOptions(s)}))},z.walkTokens=function(e,t){for(var n,s=[],r=function(){var e=n.value;switch(s=s.concat(t.call(z,e)),e.type){case"table":for(var r,o=i(e.header);!(r=o()).done;){var a=r.value;s=s.concat(z.walkTokens(a.tokens,t))}for(var l,c=i(e.rows);!(l=c()).done;)for(var u,h=i(l.value);!(u=h()).done;){var d=u.value;s=s.concat(z.walkTokens(d.tokens,t))}break;case"list":s=s.concat(z.walkTokens(e.items,t));break;default:z.defaults.extensions&&z.defaults.extensions.childTokens&&z.defaults.extensions.childTokens[e.type]?z.defaults.extensions.childTokens[e.type].forEach((function(n){s=s.concat(z.walkTokens(e[n],t))})):e.tokens&&(s=s.concat(z.walkTokens(e.tokens,t)))}},o=i(e);!(n=o()).done;)r();return s},z.parseInline=function(e,t){if("undefined"===typeof e||null===e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!==typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");L(t=C({},z.defaults,t||{}));try{var n=R.lexInline(e,t);return t.walkTokens&&z.walkTokens(n,t.walkTokens),B.parseInline(n,t)}catch(zY){if(zY.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+h(zY.message+"",!0)+"</pre>";throw zY}},z.Parser=B,z.parser=B.parse,z.Renderer=O,z.TextRenderer=P,z.Lexer=R,z.lexer=R.lex,z.Tokenizer=T,z.Slugger=F,z.parse=z;var W=z.options,H=z.setOptions,V=z.use,j=z.walkTokens,U=z.parseInline,q=z,K=B.parse,G=R.lex;e.Lexer=R,e.Parser=B,e.Renderer=O,e.Slugger=F,e.TextRenderer=P,e.Tokenizer=T,e.getDefaults=s,e.lexer=G,e.marked=z,e.options=W,e.parse=q,e.parseInline=U,e.parser=K,e.setOptions=H,e.use=V,e.walkTokens=j,Object.defineProperty(e,"__esModule",{value:!0})}))}();mM.Lexer||exports.Lexer,mM.Parser||exports.Parser,mM.Renderer||exports.Renderer,mM.Slugger||exports.Slugger,mM.TextRenderer||exports.TextRenderer,mM.Tokenizer||exports.Tokenizer,mM.getDefaults||exports.getDefaults,mM.lexer||exports.lexer;var bM=mM.marked||exports.marked;mM.options||exports.options,mM.parse||exports.parse,mM.parseInline||exports.parseInline,mM.parser||exports.parser,mM.setOptions||exports.setOptions,mM.use||exports.use,mM.walkTokens||exports.walkTokens;function _M(e){let t=JSON.parse(e);return t=yM(t),t}function vM(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function yM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e||t>200)return e;if("object"===typeof e){switch(e.$mid){case 1:return fi.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof Oh||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let n=0;n<e.length;++n)e[n]=yM(e[n],t+1);else for(const n in e)Object.hasOwnProperty.call(e,n)&&(e[n]=yM(e[n],t+1))}return e}const SM=Object.freeze({image:(e,t,n)=>{let i=[],s=[];return e&&(({href:e,dimensions:i}=function(e){const t=[],n=e.split("|").map((e=>e.trim()));e=n[0];const i=n[1];if(i){const e=/height=(\d+)/.exec(i),n=/width=(\d+)/.exec(i),s=e?e[1]:"",r=n?n[1]:"",o=isFinite(parseInt(r)),a=isFinite(parseInt(s));o&&t.push('width="'.concat(r,'"')),a&&t.push('height="'.concat(s,'"'))}return{href:e,dimensions:t}}(e)),s.push('src="'.concat(dM(e),'"'))),n&&s.push('alt="'.concat(dM(n),'"')),t&&s.push('title="'.concat(dM(t),'"')),i.length&&(s=s.concat(i)),"<img "+s.join(" ")+">"},paragraph:e=>"<p>".concat(e,"</p>"),link:(e,t,n)=>"string"!==typeof e?"":(e===n&&(n=fM(n)),t="string"===typeof t?dM(fM(t)):"",e=(e=fM(e)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),'<a href="'.concat(e,'" title="').concat(t||e,'" draggable="false">').concat(n,"</a>"))});function wM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i,s;const r=new Xt;let o=!1;const a=h$(t),l=function(t){let n;try{n=_M(decodeURIComponent(t))}catch(zY){}return n?(n=H(n,(t=>e.uris&&e.uris[t]?fi.revive(e.uris[t]):void 0)),encodeURIComponent(JSON.stringify(n))):t},c=function(t,n){const i=e.uris&&e.uris[t];let s=fi.revive(i);return n?t.startsWith(dc.data+":")?t:(s||(s=fi.parse(t)),bc.uriToBrowserUri(s).toString(!0)):s?fi.parse(t).toString()===s.toString()?t:(s.query&&(s=s.with({query:l(s.query)})),s.toString()):t},u=new bM.Renderer;u.image=SM.image,u.link=SM.link,u.paragraph=SM.paragraph;const h=[],d=[];if(t.codeBlockRendererSync?u.code=(e,n)=>{const i=pM.nextId(),s=t.codeBlockRendererSync(kM(n),e);return d.push([i,s]),'<div class="code" data-code="'.concat(i,'">').concat(Ws(e),"</div>")}:t.codeBlockRenderer&&(u.code=(e,n)=>{const i=pM.nextId(),s=t.codeBlockRenderer(kM(n),e);return h.push(s.then((e=>[i,e]))),'<div class="code" data-code="'.concat(i,'">').concat(Ws(e),"</div>")}),t.actionHandler){const n=function(n){let i=n.target;if("A"===i.tagName||(i=i.parentElement,i&&"A"===i.tagName))try{let s=i.dataset.href;s&&(e.baseUri&&(s=CM(fi.from(e.baseUri),s)),t.actionHandler.callback(s,n))}catch(s){Nt(s)}finally{n.preventDefault()}},i=t.actionHandler.disposables.add(new MS(a,"click")),s=t.actionHandler.disposables.add(new MS(a,"auxclick"));t.actionHandler.disposables.add(rn.any(i.event,s.event)((e=>{const t=new Ga(Dc(a),e);(t.leftButton||t.middleButton)&&n(t)}))),t.actionHandler.disposables.add(zc(a,"keydown",(e=>{const t=new ja(e);(t.equals(10)||t.equals(3))&&n(t)})))}e.supportHtml||(n.sanitizer=t=>(e.isTrusted?t.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?t:"",n.sanitize=!0,n.silent=!0),n.renderer=u;let f=null!==(i=e.value)&&void 0!==i?i:"";let g;if(f.length>1e5&&(f="".concat(f.substr(0,1e5),"\u2026")),e.supportThemeIcons&&(f=f.replace(sM,(e=>"\\".concat(e)))),t.fillInIncompleteTokens){const e={...bM.defaults,...n},t=function(e){let t,n;for(t=0;t<e.length;t++){const i=e[t];if("paragraph"===i.type&&i.raw.match(/(\n|^)```/)){n=IM(e.slice(t));break}if("paragraph"===i.type&&i.raw.match(/(\n|^)\|/)){n=WM(e.slice(t));break}if(t===e.length-1&&"paragraph"===i.type){const e=NM(i);if(e){n=[e];break}}}if(n){const i=[...e.slice(0,t),...n];return i.links=e.links,i}return e}(bM.lexer(f,e));g=bM.parser(t,e)}else g=bM.parse(f,n);if(e.supportThemeIcons){g=b$(g).map((e=>"string"===typeof e?e:e.outerHTML)).join("")}const p=(new DOMParser).parseFromString(xM(e,g),"text/html");if(p.body.querySelectorAll("img").forEach((t=>{const n=t.getAttribute("src");if(n){let s=n;try{e.baseUri&&(s=CM(fi.from(e.baseUri),s))}catch(i){}t.src=c(s,!0)}})),p.body.querySelectorAll("a").forEach((t=>{const n=t.getAttribute("href");if(t.setAttribute("href",""),!n||/^data:|javascript:/i.test(n)||/^command:/i.test(n)&&!e.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(n))t.replaceWith(...t.childNodes);else{let i=c(n,!1);e.baseUri&&(i=CM(fi.from(e.baseUri),n)),t.dataset.href=i}})),a.innerHTML=xM(e,p.body.innerHTML),h.length>0)Promise.all(h).then((e=>{var n,i;if(o)return;const s=new Map(e),r=a.querySelectorAll("div[data-code]");for(const t of r){const e=s.get(null!==(n=t.dataset.code)&&void 0!==n?n:"");e&&Tu(t,e)}null===(i=t.asyncRenderCallback)||void 0===i||i.call(t)}));else if(d.length>0){const e=new Map(d),t=a.querySelectorAll("div[data-code]");for(const n of t){const t=e.get(null!==(s=n.dataset.code)&&void 0!==s?s:"");t&&Tu(n,t)}}if(t.asyncRenderCallback)for(const m of a.getElementsByTagName("img")){const e=r.add(zc(m,"load",(()=>{e.dispose(),t.asyncRenderCallback()})))}return{element:a,dispose:()=>{o=!0,r.dispose()}}}function kM(e){if(!e)return"";const t=e.split(/[\s+|:|,|\{|\?]/,1);return t.length?t[0]:e}function CM(e,t){return/^\w[\w\d+.-]*:/.test(t)?t:e.path.endsWith("/")?mL(e,t).toString():mL(gL(e),t).toString()}function xM(e,t){const{config:n,allowedSchemes:i}=function(e){const t=[dc.http,dc.https,dc.mailto,dc.data,dc.file,dc.vscodeFileResource,dc.vscodeRemote,dc.vscodeRemoteResource];e.isTrusted&&t.push(dc.command);return{config:{ALLOWED_TAGS:[...Hu],ALLOWED_ATTR:EM,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:t}}(e);uc("uponSanitizeAttribute",((e,t)=>{var n;if("style"!==t.attrName&&"class"!==t.attrName){if("INPUT"===e.tagName&&"checkbox"===(null===(n=e.attributes.getNamedItem("type"))||void 0===n?void 0:n.value)){if("type"===t.attrName&&"checkbox"===t.attrValue||"disabled"===t.attrName||"checked"===t.attrName)return void(t.keepAttr=!0);t.keepAttr=!1}}else{if("SPAN"===e.tagName){if("style"===t.attrName)return void(t.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?$/.test(t.attrValue));if("class"===t.attrName)return void(t.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(t.attrValue))}t.keepAttr=!1}})),uc("uponSanitizeElement",((e,t)=>{var n,i;"input"===t.tagName&&("checkbox"===(null===(n=e.attributes.getNamedItem("type"))||void 0===n?void 0:n.value)?e.setAttribute("disabled",""):null===(i=e.parentElement)||void 0===i||i.removeChild(e))}));const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.createElement("a");return uc("afterSanitizeAttributes",(i=>{for(const s of["href","src"])if(i.hasAttribute(s)){const r=i.getAttribute(s);if("href"===s&&r.startsWith("#"))continue;if(n.href=r,!e.includes(n.protocol.replace(/:$/,""))){if(t&&"src"===s&&n.href.startsWith("data:"))continue;i.removeAttribute(s)}}})),Qt((()=>{hc("afterSanitizeAttributes")}))}(i);try{return cc(t,{...n,RETURN_TRUSTED_TYPE:!0})}finally{hc("uponSanitizeAttribute"),s.dispose()}}const EM=["align","autoplay","alt","checked","class","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","src","style","target","title","type","width","start"];function LM(e){return"string"===typeof e?e:function(e){var t;let n=null!==(t=e.value)&&void 0!==t?t:"";n.length>1e5&&(n="".concat(n.substr(0,1e5),"\u2026"));const i=bM.parse(n,{renderer:AM.value}).replace(/&(#\d+|[a-zA-Z]+);/g,(e=>{var t;return null!==(t=DM.get(e))&&void 0!==t?t:e}));return xM({isTrusted:!1},i).toString()}(e)}const DM=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]),AM=new Ps((()=>{const e=new bM.Renderer;return e.code=e=>e,e.blockquote=e=>e,e.html=e=>"",e.heading=(e,t,n)=>e+"\n",e.hr=()=>"",e.list=(e,t)=>e,e.listitem=e=>e+"\n",e.paragraph=e=>e+"\n",e.table=(e,t)=>e+t+"\n",e.tablerow=e=>e,e.tablecell=(e,t)=>e+" ",e.strong=e=>e,e.em=e=>e,e.codespan=e=>e,e.br=()=>"\n",e.del=e=>e,e.image=(e,t,n)=>"",e.text=e=>e,e.link=(e,t,n)=>n,e}));function TM(e){let t="";return e.forEach((e=>{t+=e.raw})),t}function NM(e){var t,n;for(let i=0;i<e.tokens.length;i++){const s=e.tokens[i];if("text"===s.type){const r=s.raw.split("\n"),o=r[r.length-1];if(o.includes("`"))return $M(e);if(o.includes("**"))return zM(e,"**");if(o.match(/\*\w/))return MM(e);if(o.match(/(^|\s)__\w/))return BM(e);if(o.match(/(^|\s)_\w/))return RM(e);if(o.match(/(^|\s)\[.*\]\(\w*/)){const s=e.tokens.slice(i+1);return"link"===(null===(t=s[0])||void 0===t?void 0:t.type)&&"text"===(null===(n=s[1])||void 0===n?void 0:n.type)&&s[1].raw.match(/^ *"[^"]*$/)?PM(e):OM(e)}if(o.match(/(^|\s)\[\w/))return FM(e)}}}function IM(e){const t=TM(e);return bM.lexer(t+"\n```")}function $M(e){return zM(e,"`")}function MM(e){return zM(e,"*")}function RM(e){return zM(e,"_")}function OM(e){return zM(e,")")}function PM(e){return zM(e,'")')}function FM(e){return zM(e,"](about:blank)")}function BM(e){return zM(e,"__")}function zM(e,t){const n=TM(Array.isArray(e)?e:[e]);return bM.lexer(n+t)[0]}function WM(e){const t=TM(e),n=t.split("\n");let i,s=!1;for(let r=0;r<n.length;r++){const e=n[r].trim();if("undefined"===typeof i&&e.match(/^\s*\|/)){const t=e.match(/(\|[^\|]+)(?=\||$)/g);t&&(i=t.length)}else if("number"===typeof i){if(!e.match(/^\s*\|/))return;if(r!==n.length-1)return;s=!0}}if("number"===typeof i&&i>0){const e=s?n.slice(0,-1).join("\n"):t,r=!!e.match(/\|\s*$/),o=e+(r?"":"|")+"\n|".concat(" --- |".repeat(i));return bM.lexer(o)}}var HM,VM=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},jM=function(e,t){return function(n,i){t(n,i,e)}};let UM=HM=class{constructor(e,t,n){this._options=e,this._languageService=t,this._openerService=n,this._onDidRenderAsync=new un,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e){return{element:document.createElement("span"),dispose:()=>{}}}const i=new Xt,s=i.add(wM(e,{...this._getRenderOptions(e,i),...t},n));return s.element.classList.add("rendered-markdown"),{element:s.element,dispose:()=>i.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(e,t)=>{var n,i,s;let r;e?r=this._languageService.getLanguageIdByLanguageName(e):this._options.editor&&(r=null===(n=this._options.editor.getModel())||void 0===n?void 0:n.getLanguageId()),r||(r=Pd);const o=await async function(e,t,n){if(!n)return bT(t,e.languageIdCodec,pT);const i=await Ui.getOrCreate(n);return bT(t,e.languageIdCodec,i||pT)}(this._languageService,t,r),a=document.createElement("span");if(a.innerHTML=null!==(s=null===(i=HM._ttpTokenizer)||void 0===i?void 0:i.createHTML(o))&&void 0!==s?s:o,this._options.editor){Gr(a,this._options.editor.getOption(50))}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return void 0!==this._options.codeBlockFontSize&&(a.style.fontSize=this._options.codeBlockFontSize),a},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:t=>qM(this._openerService,t,e.isTrusted),disposables:t}}}};async function qM(e,t,n){try{return await e.open(t,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:KM(n)})}catch(zY){return Nt(zY),!1}}function KM(e){return!0===e||!(!e||!Array.isArray(e.enabledCommands))&&e.enabledCommands}UM._ttpTokenizer=vh("tokenizeToString",{createHTML:e=>e}),UM=HM=VM([jM(1,dd),jM(2,c$)],UM);var GM=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},YM=function(e,t){return function(n,i){t(n,i,e)}};const QM=Mu;let XM=class extends uS{get _targetWindow(){return Dc(this._target.targetElements[0])}get _targetDocumentElement(){return Dc(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return 2===this._hoverPosition?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,n,i,s,r){var o,a,l,c,u,h,d,f;super(),this._keybindingService=t,this._configurationService=n,this._openerService=i,this._instantiationService=s,this._accessibilityService=r,this._messageListeners=new Xt,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new un),this._onRequestLayout=this._register(new un),this._linkHandler=e.linkHandler||(t=>qM(this._openerService,t,hM(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new JM(e.target),this._hoverPointer=(null===(o=e.appearance)||void 0===o?void 0:o.showPointer)?QM("div.workbench-hover-pointer"):void 0,this._hover=this._register(new a$),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),(null===(a=e.appearance)||void 0===a?void 0:a.compact)&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),(null===(l=e.appearance)||void 0===l?void 0:l.skipFadeInAnimation)&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),(null===(c=e.position)||void 0===c?void 0:c.forcePosition)&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=null!==(h=null===(u=e.position)||void 0===u?void 0:u.hoverPosition)&&void 0!==h?h:3,this.onmousedown(this._hover.containerDomNode,(e=>e.stopPropagation())),this.onkeydown(this._hover.containerDomNode,(e=>{e.equals(9)&&this.dispose()})),this._register(zc(this._targetWindow,"blur",(()=>this.dispose())));const g=QM("div.hover-row.markdown-hover"),p=QM("div.hover-contents");if("string"===typeof e.content)p.textContent=e.content,p.style.whiteSpace="pre-wrap";else if(e.content instanceof HTMLElement)p.appendChild(e.content),p.classList.add("html-hover-contents");else{const t=e.content,n=this._instantiationService.createInstance(UM,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||Et.fontFamily}),{element:i}=n.render(t,{actionHandler:{callback:e=>this._linkHandler(e),disposables:this._messageListeners},asyncRenderCallback:()=>{p.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});p.appendChild(i)}if(g.appendChild(p),this._hover.contentsDomNode.appendChild(g),e.actions&&e.actions.length>0){const t=QM("div.hover-row.status-bar"),n=QM("div.actions");e.actions.forEach((e=>{const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;l$.render(n,{label:e.label,commandId:e.commandId,run:t=>{e.run(t),this.dispose()},iconClass:e.iconClass},i)})),t.appendChild(n),this._hover.containerDomNode.appendChild(t)}let m;if(this._hoverContainer=QM("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode),m=!(e.actions&&e.actions.length>0)&&(void 0===(null===(d=e.persistence)||void 0===d?void 0:d.hideOnHover)?"string"===typeof e.content||hM(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):e.persistence.hideOnHover),m&&(null===(f=e.appearance)||void 0===f?void 0:f.showHoverHint)){const e=QM("div.hover-row.status-bar"),t=QM("div.info");t.textContent=G("hoverhint","Hold {0} key to mouse over",_e?"Option":"Alt"),e.appendChild(t),this._hover.containerDomNode.appendChild(e)}const b=[...this._target.targetElements];m||b.push(this._hoverContainer);const _=this._register(new ZM(b));if(this._register(_.onMouseOut((()=>{this._isLocked||this.dispose()}))),m){const e=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new ZM(e)),this._register(this._lockMouseTracker.onMouseOut((()=>{this._isLocked||this.dispose()})))}else this._lockMouseTracker=_}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const n=Au(this._hoverContainer,QM("div")),i=Du(this._hoverContainer,QM("div"));n.tabIndex=0,i.tabIndex=0,this._register(zc(i,"focus",(t=>{e.focus(),t.preventDefault()}))),this._register(zc(n,"focus",(e=>{t.focus(),e.preventDefault()})))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes.item(e.childNodes.length-t-1);if(n.nodeType===n.ELEMENT_NODE){const e=n;if("number"===typeof e.tabIndex&&e.tabIndex>=0)return e}const i=this.findLastFocusableChild(n);if(i)return i}}render(e){var t;e.appendChild(this._hoverContainer);const n=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&(i=!0===this._configurationService.getValue("accessibility.verbosity.hover")&&this._accessibilityService.isScreenReaderOptimized(),s=null===(t=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))||void 0===t?void 0:t.getAriaLabel(),i&&s?G("acessibleViewHint","Inspect this in the accessible view with {0}.",s):i?G("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):"");var i,s;n&&zm(n),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=this._target.targetElements.map((e=>(e=>{const t=Jc(e),n=e.getBoundingClientRect();return{top:n.top*t,bottom:n.bottom*t,right:n.right*t,left:n.left*t}})(e))),t=Math.min(...e.map((e=>e.top))),n=Math.max(...e.map((e=>e.right))),i=Math.max(...e.map((e=>e.bottom))),s=Math.min(...e.map((e=>e.left))),r=n-s,o=i-t,a={top:t,right:n,bottom:i,left:s,width:r,height:o,center:{x:s+r/2,y:t+o/2}};if(this.adjustHorizontalHoverPosition(a),this.adjustVerticalHoverPosition(a),this.adjustHoverMaxHeight(a),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:a.left+=3,a.right+=3,this._hoverContainer.style.paddingLeft="".concat(3,"px"),this._hoverContainer.style.marginLeft="".concat(-3,"px");break;case 0:a.left-=3,a.right-=3,this._hoverContainer.style.paddingRight="".concat(3,"px"),this._hoverContainer.style.marginRight="".concat(-3,"px");break;case 2:a.top+=3,a.bottom+=3,this._hoverContainer.style.paddingTop="".concat(3,"px"),this._hoverContainer.style.marginTop="".concat(-3,"px");break;case 3:a.top-=3,a.bottom-=3,this._hoverContainer.style.paddingBottom="".concat(3,"px"),this._hoverContainer.style.marginBottom="".concat(-3,"px")}a.center.x=a.left+r/2,a.center.y=a.top+o/2}this.computeXCordinate(a),this.computeYCordinate(a),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(a)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;void 0!==this._target.x?this._x=this._target.x:1===this._hoverPosition?this._x=e.right:0===this._hoverPosition?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){void 0!==this._target.y?this._y=this._target.y:3===this._hoverPosition?this._y=e.top:2===this._hoverPosition?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(void 0===this._target.x)if(this._forcePosition){const t=2+(this._hoverPointer?3:0);1===this._hoverPosition?this._hover.containerDomNode.style.maxWidth="".concat(this._targetDocumentElement.clientWidth-e.right-t,"px"):0===this._hoverPosition&&(this._hover.containerDomNode.style.maxWidth="".concat(e.left-t,"px"))}else if(1===this._hoverPosition){if(this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth){e.left>=this._hover.containerDomNode.clientWidth?this._hoverPosition=0:this._hoverPosition=2}}else if(0===this._hoverPosition){if(e.left<this._hover.containerDomNode.clientWidth){this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth?this._hoverPosition=1:this._hoverPosition=2}e.left-this._hover.containerDomNode.clientWidth<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1)}}adjustVerticalHoverPosition(e){void 0!==this._target.y||this._forcePosition||(3===this._hoverPosition?e.top-this._hover.containerDomNode.clientHeight<0&&(this._hoverPosition=2):2===this._hoverPosition&&e.bottom+this._hover.containerDomNode.clientHeight>this._targetWindow.innerHeight&&(this._hoverPosition=3))}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const n=2+(this._hoverPointer?3:0);3===this._hoverPosition?t=Math.min(t,e.top-n):2===this._hoverPosition&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-n))}if(this._hover.containerDomNode.style.maxHeight="".concat(t,"px"),this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const e="".concat(this._hover.scrollbar.options.verticalScrollbarSize,"px");this._hover.contentsDomNode.style.paddingRight!==e&&(this._hover.contentsDomNode.style.paddingRight=e)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(0===this._hoverPosition?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top="".concat(e.center.y-(this._y-t)-3,"px"):this._hoverPointer.style.top="".concat(Math.round(t/2)-3,"px");break}case 3:case 2:{this._hoverPointer.classList.add(3===this._hoverPosition?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let n=Math.round(t/2)-3;const i=this._x+n;(i<e.left||i>e.right)&&(n=e.center.x-this._x-3),this._hoverPointer.style.left="".concat(n,"px");break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};XM=GM([YM(1,tk),YM(2,od),YM(3,c$),YM(4,so),YM(5,Zm)],XM);class ZM extends uS{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new un),this._elements.forEach((e=>this.onmouseover(e,(()=>this._onTargetMouseOver(e))))),this._elements.forEach((e=>this.onmouseleave(e,(()=>this._onTargetMouseLeave(e)))))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=Dc(e).setTimeout((()=>this._fireIfMouseOutside()),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(Dc(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class JM{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var eR=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},tR=function(e,t){return function(n,i){t(n,i,e)}};let nR=class{constructor(e,t,n,i,s,r){this._instantiationService=e,this._contextViewService=t,this._keybindingService=i,this._layoutService=s,this._accessibilityService=r,n.onDidShowContextMenu((()=>this.hideHover()))}showHover(e,t,n){var i,s,r,o;if(iR(this._currentHoverOptions)===iR(e))return;if(this._currentHover&&(null===(s=null===(i=this._currentHoverOptions)||void 0===i?void 0:i.persistence)||void 0===s?void 0:s.sticky))return;this._currentHoverOptions=e,this._lastHoverOptions=e;const a=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),l=cu();n||(this._lastFocusedElementBeforeOpen=a&&l?l:void 0);const c=new Xt,u=this._instantiationService.createInstance(XM,e);if((null===(r=e.persistence)||void 0===r?void 0:r.sticky)&&(u.isLocked=!0),u.onDispose((()=>{var t,n;(null===(t=this._currentHover)||void 0===t?void 0:t.domNode)&&hu(this._currentHover.domNode)&&(null===(n=this._lastFocusedElementBeforeOpen)||void 0===n||n.focus()),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),c.dispose()})),!e.container){const t=e.target instanceof HTMLElement?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(Dc(t))}const h=this._contextViewService;if(h.showContextView(new sR(u,t),e.container),u.onRequestLayout((()=>h.layout())),null===(o=e.persistence)||void 0===o?void 0:o.sticky)c.add(zc(Dc(e.container).document,ku.MOUSE_DOWN,(e=>{su(e.target,u.domNode)||this.doHideHover()})));else{if("targetElements"in e.target)for(const n of e.target.targetElements)c.add(zc(n,ku.CLICK,(()=>this.hideHover())));else c.add(zc(e.target,ku.CLICK,(()=>this.hideHover())));const t=cu();if(t){const n=Dc(t).document;c.add(zc(t,ku.KEY_DOWN,(t=>{var n;return this._keyDown(t,u,!!(null===(n=e.persistence)||void 0===n?void 0:n.hideOnKeyDown))}))),c.add(zc(n,ku.KEY_DOWN,(t=>{var n;return this._keyDown(t,u,!!(null===(n=e.persistence)||void 0===n?void 0:n.hideOnKeyDown))}))),c.add(zc(t,ku.KEY_UP,(e=>this._keyUp(e,u)))),c.add(zc(n,ku.KEY_UP,(e=>this._keyUp(e,u))))}}if("IntersectionObserver"in Ms){const t=new IntersectionObserver((e=>this._intersectionChange(e,u)),{threshold:0}),n="targetElements"in e.target?e.target.targetElements[0]:e.target;t.observe(n),c.add(Qt((()=>t.disconnect())))}return this._currentHover=u,u}hideHover(){var e;!(null===(e=this._currentHover)||void 0===e?void 0:e.isLocked)&&this._currentHoverOptions&&this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewService.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}_keyDown(e,t,n){var i,s;if("Alt"===e.key)return void(t.isLocked=!0);const r=new ja(e);this._keybindingService.resolveKeyboardEvent(r).getSingleModifierDispatchChords().some((e=>!!e))||0!==this._keybindingService.softDispatch(r,r.target).kind||!n||(null===(i=this._currentHoverOptions)||void 0===i?void 0:i.trapFocus)&&"Tab"===e.key||(this.hideHover(),null===(s=this._lastFocusedElementBeforeOpen)||void 0===s||s.focus())}_keyUp(e,t){var n;"Alt"===e.key&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),null===(n=this._lastFocusedElementBeforeOpen)||void 0===n||n.focus()))}};function iR(e){var t;if(void 0!==e)return null!==(t=null===e||void 0===e?void 0:e.id)&&void 0!==t?t:e}nR=eR([tR(0,so),tR(1,s$),tR(2,r$),tR(3,tk),tR(4,VN),tR(5,Zm)],nR);class sR{get anchorPosition(){return this._hover.anchor}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._hover=e,this._focus=t}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}pd(i$,nR,1),tw(((e,t)=>{const n=e.getColor(N_);n&&(t.addRule(".monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ".concat(n.transparent(.5),"; }")),t.addRule(".monaco-workbench .workbench-hover hr { border-top: 1px solid ".concat(n.transparent(.5),"; }")))}));const rR=ro("IWorkspaceEditService");class oR{constructor(e){this.metadata=e}static convert(e){return e.edits.map((e=>{if(aR.is(e))return aR.lift(e);if(lR.is(e))return lR.lift(e);throw new Error("Unsupported edit")}))}}class aR extends oR{static is(e){return e instanceof aR||D(e)&&fi.isUri(e.resource)&&D(e.textEdit)}static lift(e){return e instanceof aR?e:new aR(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;super(arguments.length>3?arguments[3]:void 0),this.resource=e,this.textEdit=t,this.versionId=n}}class lR extends oR{static is(e){return e instanceof lR||D(e)&&(Boolean(e.newResource)||Boolean(e.oldResource))}static lift(e){return e instanceof lR?e:new lR(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(arguments.length>3?arguments[3]:void 0),this.oldResource=e,this.newResource=t,this.options=n}}const cR={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0},uR={...Object.freeze({id:"editor",order:5,type:"object",title:G("editorConfigurationTitle","Editor"),scope:5}),properties:{"editor.tabSize":{type:"number",default:Oe.tabSize,minimum:1,markdownDescription:G("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:G("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Oe.insertSpaces,markdownDescription:G("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Oe.detectIndentation,markdownDescription:G("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Oe.trimAutoWhitespace,description:G("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Oe.largeFileOptimizations,description:G("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[G("wordBasedSuggestions.off","Turn off Word Based Suggestions."),G("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),G("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),G("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:G("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[G("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),G("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),G("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:G("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:G("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:G("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!1,description:G("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:G("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:G("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:G("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:G("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:G("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:G("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:G("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:G("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:cR.maxComputationTime,description:G("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:cR.maxFileSize,description:G("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:cR.renderSideBySide,description:G("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:cR.renderSideBySideInlineBreakpoint,description:G("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:cR.useInlineViewWhenSpaceIsLimited,description:G("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:cR.renderMarginRevertIcon,description:G("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:cR.ignoreTrimWhitespace,description:G("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:cR.renderIndicators,description:G("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:cR.diffCodeLens,description:G("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:cR.diffWordWrap,markdownEnumDescriptions:[G("wordWrap.off","Lines will never wrap."),G("wordWrap.on","Lines will wrap at the viewport width."),G("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:cR.diffAlgorithm,markdownEnumDescriptions:[G("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),G("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:cR.hideUnchangedRegions.enabled,markdownDescription:G("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:cR.hideUnchangedRegions.revealLineCount,markdownDescription:G("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:cR.hideUnchangedRegions.minimumLineCount,markdownDescription:G("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:cR.hideUnchangedRegions.contextLineCount,markdownDescription:G("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:cR.experimental.showMoves,markdownDescription:G("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:cR.experimental.showEmptyDecorations,description:G("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")}}};for(const WY of Lt){const e=WY.schema;if("undefined"!==typeof e)if("undefined"!==typeof(hR=e).type||"undefined"!==typeof hR.anyOf)uR.properties["editor.".concat(WY.name)]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(uR.properties[t]=e[t])}var hR;let dR=null;function fR(){return null===dR&&(dR=Object.create(null),Object.keys(uR.properties).forEach((e=>{dR[e]=!0}))),dR}ya.as(yd).registerConfiguration(uR);class gR{static insert(e,t){return{range:new xi(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function pR(e){return Object.isFrozen(e)?e:function(e){if(!e||"object"!==typeof e)return e;const t=[e];for(;t.length>0;){const e=t.shift();Object.freeze(e);for(const n in e)if(W.call(e,n)){const i=e[n];"object"!==typeof i||Object.isFrozen(i)||A(i)||t.push(i)}}return e}(e)}class mR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0;this._contents=e,this._keys=t,this._overrides=n,this.raw=i,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if(null===(e=this.raw)||void 0===e?void 0:e.length){const e=this.raw.map((e=>{if(e instanceof mR)return e;const t=new bR("");return t.parseRaw(e),t.configurationModel}));this._rawConfiguration=e.reduce(((e,t)=>t===e?t:e.merge(t)),e[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return 0===this._keys.length&&0===Object.keys(this._contents).length&&0===this._overrides.length}getValue(e){return e?hd(this.contents,e):this.contents}inspect(e,t){const n=this.rawConfiguration.getValue(e);return{value:n,override:t?this.rawConfiguration.getOverrideValue(e,t):void 0,merged:t?this.rawConfiguration.override(t).getValue(e):n}}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?hd(n,e):n:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(){var e,t;const n=z(this.contents),i=z(this.overrides),s=[...this.keys],r=(null===(e=this.raw)||void 0===e?void 0:e.length)?[...this.raw]:[this];for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];for(const u of l)if(r.push(...(null===(t=u.raw)||void 0===t?void 0:t.length)?u.raw:[u]),!u.isEmpty()){this.mergeContents(n,u.contents);for(const e of u.overrides){const[t]=i.filter((t=>a(t.identifiers,e.identifiers)));t?(this.mergeContents(t.contents,e.contents),t.keys.push(...e.keys),t.keys=f(t.keys)):i.push(z(e))}for(const e of u.keys)-1===s.indexOf(e)&&s.push(e)}return new mR(n,s,i,r.every((e=>e instanceof mR))?void 0:r)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||"object"!==typeof t||!Object.keys(t).length)return this;const n={};for(const i of f([...Object.keys(this.contents),...Object.keys(t)])){let e=this.contents[i];const s=t[i];s&&("object"===typeof e&&"object"===typeof s?(e=z(e),this.mergeContents(e,s)):e=s),n[i]=e}return new mR(n,this.keys,this.overrides)}mergeContents(e,t){for(const n of Object.keys(t))n in e&&D(e[n])&&D(t[n])?this.mergeContents(e[n],t[n]):e[n]=z(t[n])}getContentsForOverrideIdentifer(e){let t=null,n=null;const i=e=>{e&&(n?this.mergeContents(n,e):n=z(e))};for(const s of this.overrides)1===s.identifiers.length&&s.identifiers[0]===e?t=s.contents:s.identifiers.includes(e)&&i(s.contents);return i(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(e,t){this.updateValue(e,t,!0)}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);-1!==t&&(this.keys.splice(t,1),cd(this.contents,e),Id.test(e)&&this.overrides.splice(this.overrides.findIndex((t=>a(t.identifiers,$d(e)))),1))}updateValue(e,t,n){ld(this.contents,e,t,(e=>console.error(e))),(n=n||-1===this.keys.indexOf(e))&&this.keys.push(e),Id.test(e)&&this.overrides.push({identifiers:$d(e),keys:Object.keys(this.contents[e]),contents:ad(this.contents[e],(e=>console.error(e)))})}}class bR{constructor(e){this._name=e,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||new mR}parseRaw(e,t){this._raw=e;const{contents:n,keys:i,overrides:s,restricted:r,hasExcludedProperties:o}=this.doParseRaw(e,t);this._configurationModel=new mR(n,i,s,o?[e]:void 0),this._restrictedConfigurations=r||[]}doParseRaw(e,t){const n=ya.as(yd).getConfigurationProperties(),i=this.filter(e,n,!0,t);return{contents:ad(e=i.raw,(e=>console.error("Conflict in settings file ".concat(this._name,": ").concat(e)))),keys:Object.keys(e),overrides:this.toOverrides(e,(e=>console.error("Conflict in settings file ".concat(this._name,": ").concat(e)))),restricted:i.restricted,hasExcludedProperties:i.hasExcludedProperties}}filter(e,t,n,i){var s,r,o;let a=!1;if(!(null===i||void 0===i?void 0:i.scopes)&&!(null===i||void 0===i?void 0:i.skipRestricted)&&!(null===(s=null===i||void 0===i?void 0:i.exclude)||void 0===s?void 0:s.length))return{raw:e,restricted:[],hasExcludedProperties:a};const l={},c=[];for(const u in e)if(Id.test(u)&&n){const n=this.filter(e[u],t,!1,i);l[u]=n.raw,a=a||n.hasExcludedProperties,c.push(...n.restricted)}else{const n=t[u],s=n?"undefined"!==typeof n.scope?n.scope:3:void 0;(null===n||void 0===n?void 0:n.restricted)&&c.push(u),(null===(r=i.exclude)||void 0===r?void 0:r.includes(u))||!(null===(o=i.include)||void 0===o?void 0:o.includes(u))&&(void 0!==s&&void 0!==i.scopes&&!i.scopes.includes(s)||i.skipRestricted&&(null===n||void 0===n?void 0:n.restricted))?a=!0:l[u]=e[u]}return{raw:l,restricted:c,hasExcludedProperties:a}}toOverrides(e,t){const n=[];for(const i of Object.keys(e))if(Id.test(i)){const s={};for(const t in e[i])s[t]=e[i][t];n.push({identifiers:$d(i),keys:Object.keys(s),contents:ad(s,t)})}return n}}class _R{constructor(e,t,n,i,s,r,o,a,l,c,u,h,d){this.key=e,this.overrides=t,this._value=n,this.overrideIdentifiers=i,this.defaultConfiguration=s,this.policyConfiguration=r,this.applicationConfiguration=o,this.userConfiguration=a,this.localUserConfiguration=l,this.remoteUserConfiguration=c,this.workspaceConfiguration=u,this.folderConfigurationModel=h,this.memoryConfigurationModel=d}inspect(e,t,n){const i=e.inspect(t,n);return{get value(){return pR(i.value)},get override(){return pR(i.override)},get merged(){return pR(i.merged)}}}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.inspect(this.userConfiguration,this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return void 0!==this.userInspectValue.value||void 0!==this.userInspectValue.override?{value:this.userInspectValue.value,override:this.userInspectValue.override}:void 0}}class vR{constructor(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new mR,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new mR,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new Mg,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:new mR,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:new Mg;this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=n,this._localUserConfiguration=i,this._remoteUserConfiguration=s,this._workspaceConfiguration=r,this._folderConfigurations=o,this._memoryConfiguration=a,this._memoryConfigurationByResource=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new Mg,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidatedConfigurationModel(e,t,n).getValue(e)}updateValue(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.resource?(n=this._memoryConfigurationByResource.get(i.resource),n||(n=new mR,this._memoryConfigurationByResource.set(i.resource,n))):n=this._memoryConfiguration,void 0===t?n.removeValue(e):n.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,n){const i=this.getConsolidatedConfigurationModel(e,t,n),s=this.getFolderConfigurationModelForResource(t.resource,n),r=t.resource&&this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration,o=new Set;for(const a of i.overrides)for(const t of a.identifiers)void 0!==i.getOverrideValue(e,t)&&o.add(t);return new _R(e,t,i.getValue(e),o.size?[...o]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,n?this._workspaceConfiguration:void 0,s||void 0,r)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,n){let i=this.getConsolidatedConfigurationModelForResource(t,n);return t.overrideIdentifier&&(i=i.override(t.overrideIdentifier)),this._policyConfiguration.isEmpty()||void 0===this._policyConfiguration.getValue(e)||(i=i.merge(this._policyConfiguration)),i}getConsolidatedConfigurationModelForResource(e,t){let{resource:n}=e,i=this.getWorkspaceConsolidatedConfiguration();if(t&&n){const e=t.getFolder(n);e&&(i=this.getFolderConsolidatedConfiguration(e.uri)||i);const s=this._memoryConfigurationByResource.get(n);s&&(i=i.merge(s))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),i=this._folderConfigurations.get(e);i?(t=n.merge(i),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce(((e,t)=>{const{contents:n,overrides:i,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:i,keys:s}]),e}),[])}}static parse(e){const t=this.parseConfigurationModel(e.defaults),n=this.parseConfigurationModel(e.policy),i=this.parseConfigurationModel(e.application),s=this.parseConfigurationModel(e.user),r=this.parseConfigurationModel(e.workspace),o=e.folders.reduce(((e,t)=>(e.set(fi.revive(t[0]),this.parseConfigurationModel(t[1])),e)),new Mg);return new vR(t,n,i,s,new mR,r,o,new mR,new Mg)}static parseConfigurationModel(e){return new mR(e.contents,e.keys,e.overrides)}}class yR{constructor(e,t,n,i){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=i,this._marker="\n",this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=".".charCodeAt(0),this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const s of e.keys)this.affectedKeys.add(s);for(const[,s]of e.overrides)for(const e of s)this.affectedKeys.add(e);this._affectsConfigStr=this._marker;for(const s of this.affectedKeys)this._affectsConfigStr+=s+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=vR.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var n;const i=this._marker+e,s=this._affectsConfigStr.indexOf(i);if(s<0)return!1;const r=s+i.length;if(r>=this._affectsConfigStr.length)return!1;const o=this._affectsConfigStr.charCodeAt(r);if(o!==this._markerCode1&&o!==this._markerCode2)return!1;if(t){return!j(this.previousConfiguration?this.previousConfiguration.getValue(e,t,null===(n=this.previous)||void 0===n?void 0:n.workspace):void 0,this.currentConfiguraiton.getValue(e,t,this.currentWorkspace))}return!0}}const SR={kind:0},wR={kind:1};class kR{constructor(e,t,n){var i;this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const s of e){const e=s.command;e&&"-"!==e.charAt(0)&&this._defaultBoundCommands.set(e,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=kR.handleRemovals([].concat(e).concat(t));for(let s=0,r=this._keybindings.length;s<r;s++){const e=this._keybindings[s];if(0===e.chords.length)continue;const t=null===(i=e.when)||void 0===i?void 0:i.substituteConstants();t&&0===t.type||this._addKeyPress(e.chords[0],e)}}static _isTargetedForRemoval(e,t,n){if(t)for(let i=0;i<t.length;i++)if(t[i]!==e.chords[i])return!1;if(n&&1!==n.type){if(!e.when)return!1;if(!function(e,t){const n=e?e.substituteConstants():void 0,i=t?t.substituteConstants():void 0;return!n&&!i||!(!n||!i)&&n.equals(i)}(n,e.when))return!1}return!0}static handleRemovals(e){const t=new Map;for(let i=0,s=e.length;i<s;i++){const n=e[i];if(n.command&&"-"===n.command.charAt(0)){const e=n.command.substring(1);t.has(e)?t.get(e).push(n):t.set(e,[n])}}if(0===t.size)return e;const n=[];for(let i=0,s=e.length;i<s;i++){const s=e[i];if(!s.command||0===s.command.length){n.push(s);continue}if("-"===s.command.charAt(0))continue;const r=t.get(s.command);if(!r||!s.isDefault){n.push(s);continue}let o=!1;for(const e of r){const t=e.when;if(this._isTargetedForRemoval(s,e.chords,t)){o=!0;break}}o||n.push(s)}return n}_addKeyPress(e,t){const n=this._map.get(e);if("undefined"===typeof n)return this._map.set(e,[t]),void this._addToLookupMap(t);for(let i=n.length-1;i>=0;i--){const e=n[i];if(e.command===t.command)continue;let s=!0;for(let n=1;n<e.chords.length&&n<t.chords.length;n++)if(e.chords[n]!==t.chords[n]){s=!1;break}s&&(kR.whenIsEntirelyIncluded(e.when,t.when)&&this._removeFromLookupMap(e))}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);"undefined"===typeof t?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if("undefined"!==typeof t)for(let n=0,i=t.length;n<i;n++)if(t[n]===e)return void t.splice(n,1)}static whenIsEntirelyIncluded(e,t){return!t||1===t.type||!(!e||1===e.type)&&oa(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if("undefined"===typeof n||0===n.length)return null;if(1===n.length)return n[0];for(let i=n.length-1;i>=0;i--){const e=n[i];if(t.contextMatchesRules(e.when))return e}return n[n.length-1]}resolve(e,t,n){const i=[...t,n];this._log("| Resolving ".concat(i));const s=this._map.get(i[0]);if(void 0===s)return this._log("\\ No keybinding entries."),SR;let r=null;if(i.length<2)r=s;else{r=[];for(let e=0,t=s.length;e<t;e++){const t=s[e];if(i.length>t.chords.length)continue;let n=!0;for(let e=1;e<i.length;e++)if(t.chords[e]!==i[e]){n=!1;break}n&&r.push(t)}}const o=this._findCommand(e,r);return o?i.length<o.chords.length?(this._log("\\ From ".concat(r.length," keybinding entries, awaiting ").concat(o.chords.length-i.length," more chord(s), when: ").concat(CR(o.when),", source: ").concat(xR(o),".")),wR):(this._log("\\ From ".concat(r.length," keybinding entries, matched ").concat(o.command,", when: ").concat(CR(o.when),", source: ").concat(xR(o),".")),a=o.command,l=o.commandArgs,c=o.bubble,{kind:2,commandId:a,commandArgs:l,isBubble:c}):(this._log("\\ From ".concat(r.length," keybinding entries, no when clauses matched the context.")),SR);var a,l,c}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){const i=t[n];if(kR._contextMatchesRules(e,i.when))return i}return null}static _contextMatchesRules(e,t){return!t||t.evaluate(e)}}function CR(e){return e?"".concat(e.serialize()):"no when condition"}function xR(e){return e.extensionId?e.isBuiltinExtension?"built-in extension ".concat(e.extensionId):"user extension ".concat(e.extensionId):e.isDefault?"built-in":"user"}const ER=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class LR extends Zt{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:rn.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,n,i,s){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=i,this._logService=s,this._onDidUpdateKeybindings=this._register(new un),this._currentChords=[],this._currentChordChecker=new rl,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=DR.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new sl,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info("[KeybindingService]: ".concat(e))}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const n=this.resolveKeyboardEvent(e);if(n.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),SR;const[i]=n.getDispatchChords();if(null===i)return this._log("\\ Keyboard event cannot be dispatched"),SR;const s=this._contextKeyService.getContext(t),r=this._currentChords.map((e=>{let{keypress:t}=e;return t}));return this._getResolver().resolve(s,r,i)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet((()=>{this._documentHasFocus()?Date.now()-e>5e3&&this._leaveChordMode():this._leaveChordMode()}),500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw Ft("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(G("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const e=this._currentChords.map((e=>{let{label:t}=e;return t})).join(", ");this._currentChordStatusMessage=this._notificationService.status(G("next.chord","({0}) was pressed. Waiting for next key of chord...",e))}}this._scheduleLeaveChordMode(),ek.enabled&&ek.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],ek.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getSingleModifierDispatchChords();if(i)return this._ignoreSingleModifiers.has(i)?(this._log("+ Ignoring single modifier ".concat(i," due to it being pressed together with other keys.")),this._ignoreSingleModifiers=DR.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=DR.EMPTY,null===this._currentSingleModifier?(this._log("+ Storing single modifier for possible chord ".concat(i,".")),this._currentSingleModifier=i,this._currentSingleModifierClearTimeout.cancelAndSet((()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null}),300),!1):i===this._currentSingleModifier?(this._log("/ Dispatching single modifier chord ".concat(i," ").concat(i)),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log("+ Clearing single modifier due to modifier mismatch: ".concat(this._currentSingleModifier," ").concat(i)),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[s]=n.getChords();return this._ignoreSingleModifiers=new DR(s),null!==this._currentSingleModifier&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var i;let s=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let r=null,o=null;if(n){const[t]=e.getSingleModifierDispatchChords();r=t,o=t?[t]:[]}else[r]=e.getDispatchChords(),o=this._currentChords.map((e=>{let{keypress:t}=e;return t}));if(null===r)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),s;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,o,r);switch(c.kind){case 0:if(this._logService.trace("KeybindingService#dispatch",l,"[ No matching keybinding ]"),this.inChordMode){const e=this._currentChords.map((e=>{let{label:t}=e;return t})).join(", ");this._log('+ Leaving multi-chord mode: Nothing bound to "'.concat(e,", ").concat(l,'".')),this._notificationService.status(G("missing.chord","The key combination ({0}, {1}) is not a command.",e,l),{hideAfter:1e4}),this._leaveChordMode(),s=!0}return s;case 1:return this._logService.trace("KeybindingService#dispatch",l,"[ Several keybindings match - more chords needed ]"),s=!0,this._expectAnotherChord(r,l),this._log(1===this._currentChords.length?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),s;case 2:if(this._logService.trace("KeybindingService#dispatch",l,"[ Will dispatch command ".concat(c.commandId," ]")),null===c.commandId||""===c.commandId){if(this.inChordMode){const e=this._currentChords.map((e=>{let{label:t}=e;return t})).join(", ");this._log('+ Leaving chord mode: Nothing bound to "'.concat(e,", ").concat(l,'".')),this._notificationService.status(G("missing.chord","The key combination ({0}, {1}) is not a command.",e,l),{hideAfter:1e4}),this._leaveChordMode(),s=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(s=!0),this._log("+ Invoking command ".concat(c.commandId,".")),this._currentlyDispatchingCommandId=c.commandId;try{"undefined"===typeof c.commandArgs?this._commandService.executeCommand(c.commandId).then(void 0,(e=>this._notificationService.warn(e))):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,(e=>this._notificationService.warn(e)))}finally{this._currentlyDispatchingCommandId=null}ER.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:null!==(i=e.getUserSettingsLabel())&&void 0!==i?i:void 0})}return s}}mightProducePrintableCharacter(e){return!e.ctrlKey&&!e.metaKey&&(e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30)}}class DR{constructor(e){this._ctrlKey=!!e&&e.ctrlKey,this._shiftKey=!!e&&e.shiftKey,this._altKey=!!e&&e.altKey,this._metaKey=!!e&&e.metaKey}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}DR.EMPTY=new DR(null);class AR{constructor(e,t,n,i,s,r,o){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?TR(e.getDispatchChords()):[],e&&0===this.chords.length&&(this.chords=TR(e.getSingleModifierDispatchChords())),this.bubble=!!t&&94===t.charCodeAt(0),this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=i,this.isDefault=s,this.extensionId=r,this.isBuiltinExtension=o}}function TR(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!i)return[];t.push(i)}return t}class NR{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(0===t.length)return null;const i=[];for(let s=0,r=t.length;s<r;s++){const r=t[s],o=n(r);if(null===o)return null;i[s]=OR(r,o,this.modifierLabels[e])}return i.join(" ")}}const IR=new NR({ctrlKey:"\u2303",shiftKey:"\u21e7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:G({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:G({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:G({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:G({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:G({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:G({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:G({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:G({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),$R=new NR({ctrlKey:G({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:G({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:G({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:G({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:G({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:G({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:G({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:G({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:G({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:G({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:G({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:G({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),MR=new NR({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),RR=new NR({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function OR(e,t,n){if(null===t)return"";const i=[];return e.ctrlKey&&i.push(n.ctrlKey),e.shiftKey&&i.push(n.shiftKey),e.altKey&&i.push(n.altKey),e.metaKey&&i.push(n.metaKey),""!==t&&i.push(t),i.join(n.separator)}class PR extends ga{constructor(e,t){if(super(),0===t.length)throw Pt("chords");this._os=e,this._chords=t}getLabel(){return IR.toLabel(this._os,this._chords,(e=>this._getLabel(e)))}getAriaLabel(){return $R.toLabel(this._os,this._chords,(e=>this._getAriaLabel(e)))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:MR.toLabel(this._os,this._chords,(e=>this._getElectronAccelerator(e)))}getUserSettingsLabel(){return RR.toLabel(this._os,this._chords,(e=>this._getUserSettingsLabel(e)))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map((e=>this._getChord(e)))}_getChord(e){return new fa(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map((e=>this._getChordDispatch(e)))}getSingleModifierDispatchChords(){return this._chords.map((e=>this._getSingleModifierChordDispatch(e)))}}class FR extends PR{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(2===this._os)switch(e){case 15:return"\u2190";case 16:return"\u2191";case 17:return"\u2192";case 18:return"\u2193"}return $n.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":$n.toString(e.keyCode)}_getElectronAccelerator(e){return $n.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=$n.toUserSettingsUS(e.keyCode);return t?t.toLowerCase():t}_getChordDispatch(e){return FR.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=$n.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return 5!==e.keyCode||e.shiftKey||e.altKey||e.metaKey?4!==e.keyCode||e.ctrlKey||e.altKey||e.metaKey?6!==e.keyCode||e.ctrlKey||e.shiftKey||e.metaKey?57!==e.keyCode||e.ctrlKey||e.shiftKey||e.altKey?null:"meta":"alt":"shift":"ctrl"}static _scanCodeToKeyCode(e){const t=Nn[e];if(-1!==t)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof ha)return e;const t=this._scanCodeToKeyCode(e.scanCode);return 0===t?null:new ha(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const n=TR(e.chords.map((e=>this._toKeyCodeChord(e))));return n.length>0?[new FR(n,t)]:[]}}const BR=ro("labelService"),zR=ro("progressService");Object.freeze({total(){},worked(){},done(){}});Object.freeze({report(){}});const WR=ro("editorProgressService");class HR{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){return e.charCodeAt(0)-this._value.charCodeAt(this._pos)}value(){return this._value[this._pos]}}class VR{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){if(46===this._value.charCodeAt(this._to)){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?Xs(e,this._value,0,e.length,this._from,this._to):Js(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class jR{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const e=this._value.charCodeAt(t);if(!(47===e||this._splitOnBackslash&&92===e))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(47===t||this._splitOnBackslash&&92===t){if(!e)break;this._from++}else e=!1}return this}cmp(e){return this._caseSensitive?Xs(e,this._value,0,e.length,this._from,this._to):Js(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class UR{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new jR(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return 3===this._states[this._stateIdx]&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(1===this._states[this._stateIdx])return Zs(e,this._value.scheme);if(2===this._states[this._stateIdx])return Zs(e,this._value.authority);if(3===this._states[this._stateIdx])return this._pathIterator.cmp(e);if(4===this._states[this._stateIdx])return Qs(e,this._value.query);if(5===this._states[this._stateIdx])return Qs(e,this._value.fragment);throw new Error}value(){if(1===this._states[this._stateIdx])return this._value.scheme;if(2===this._states[this._stateIdx])return this._value.authority;if(3===this._states[this._stateIdx])return this._pathIterator.value();if(4===this._states[this._stateIdx])return this._value.query;if(5===this._states[this._stateIdx])return this._value.fragment;throw new Error}}class qR{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e,t;return null!==(t=null===(e=this.left)||void 0===e?void 0:e.height)&&void 0!==t?t:0}get heightRight(){var e,t;return null!==(t=null===(e=this.right)||void 0===e?void 0:e.height)&&void 0!==t?t:0}}class KR{static forUris(){return new KR(new UR(arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>!1))}static forStrings(){return new KR(new HR)}static forConfigKeys(){return new KR(new VR)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let i;this._root||(this._root=new qR,this._root.segment=n.value());const s=[];for(i=this._root;;){const e=n.cmp(i.segment);if(e>0)i.left||(i.left=new qR,i.left.segment=n.value()),s.push([-1,i]),i=i.left;else if(e<0)i.right||(i.right=new qR,i.right.segment=n.value()),s.push([1,i]),i=i.right;else{if(!n.hasNext())break;n.next(),i.mid||(i.mid=new qR,i.mid.segment=n.value()),s.push([0,i]),i=i.mid}}const r=i.value;i.value=t,i.key=e;for(let o=s.length-1;o>=0;o--){const e=s[o][1];e.updateHeight();const t=e.balanceFactor();if(t<-1||t>1){const t=s[o][0],n=s[o+1][0];if(1===t&&1===n)s[o][1]=e.rotateLeft();else if(-1===t&&-1===n)s[o][1]=e.rotateRight();else if(1===t&&-1===n)e.right=s[o+1][1]=s[o+1][1].rotateRight(),s[o][1]=e.rotateLeft();else{if(-1!==t||1!==n)throw new Error;e.left=s[o+1][1]=s[o+1][1].rotateLeft(),s[o][1]=e.rotateRight()}if(o>0)switch(s[o-1][0]){case-1:s[o-1][1].left=s[o][1];break;case 1:s[o-1][1].right=s[o][1];break;case 0:s[o-1][1].mid=s[o][1]}else this._root=s[0][1]}}return r}get(e){var t;return null===(t=this._getNode(e))||void 0===t?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const e=t.cmp(n.segment);if(e>0)n=n.left;else if(e<0)n=n.right;else{if(!t.hasNext())break;t.next(),n=n.mid}}return n}has(e){const t=this._getNode(e);return!(void 0===(null===t||void 0===t?void 0:t.value)&&void 0===(null===t||void 0===t?void 0:t.mid))}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){var n;const i=this._iter.reset(e),s=[];let r=this._root;for(;r;){const e=i.cmp(r.segment);if(e>0)s.push([-1,r]),r=r.left;else if(e<0)s.push([1,r]),r=r.right;else{if(!i.hasNext())break;i.next(),s.push([0,r]),r=r.mid}}if(r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){const e=this._min(r.right);if(e.key){const{key:t,value:n,segment:i}=e;this._delete(e.key,!1),r.key=t,r.value=n,r.segment=i}}else{const e=null!==(n=r.left)&&void 0!==n?n:r.right;if(s.length>0){const[t,n]=s[s.length-1];switch(t){case-1:n.left=e;break;case 0:n.mid=e;break;case 1:n.right=e}}else this._root=e}for(let e=s.length-1;e>=0;e--){const t=s[e][1];t.updateHeight();const n=t.balanceFactor();if(n>1?(t.right.balanceFactor()>=0||(t.right=t.right.rotateRight()),s[e][1]=t.rotateLeft()):n<-1&&(t.left.balanceFactor()<=0||(t.left=t.left.rotateLeft()),s[e][1]=t.rotateRight()),e>0)switch(s[e-1][0]){case-1:s[e-1][1].left=s[e][1];break;case 1:s[e-1][1].right=s[e][1];break;case 0:s[e-1][1].mid=s[e][1]}else this._root=s[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n,i=this._root;for(;i;){const e=t.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!t.hasNext())break;t.next(),n=i.value||n,i=i.mid}}return i&&i.value||n}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const n=this._iter.reset(e);let i=this._root;for(;i;){const e=n.cmp(i.segment);if(e>0)i=i.left;else if(e<0)i=i.right;else{if(!n.hasNext())return i.mid?this._entries(i.mid):t?i.value:void 0;n.next(),i=i.mid}}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const GR=ro("contextService");class YR{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}G("codeWorkspace","Code Workspace");const QR="4064f6ec-cb38-4ad0-af64-ee6467e63c82";var XR,ZR,JR,eO,tO,nO,iO,sO;!function(e){e.inspectTokensAction=G("inspectTokens","Developer: Inspect Tokens")}(XR||(XR={})),function(e){e.gotoLineActionLabel=G("gotoLineActionLabel","Go to Line/Column...")}(ZR||(ZR={})),function(e){e.helpQuickAccessActionLabel=G("helpQuickAccess","Show all Quick Access Providers")}(JR||(JR={})),function(e){e.quickCommandActionLabel=G("quickCommandActionLabel","Command Palette"),e.quickCommandHelp=G("quickCommandActionHelp","Show And Run Commands")}(eO||(eO={})),function(e){e.quickOutlineActionLabel=G("quickOutlineActionLabel","Go to Symbol..."),e.quickOutlineByCategoryActionLabel=G("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")}(tO||(tO={})),function(e){e.editorViewAccessibleLabel=G("editorViewAccessibleLabel","Editor content"),e.accessibilityHelpMessage=G("accessibilityHelpMessage","Press Alt+F1 for Accessibility Options.")}(nO||(nO={})),function(e){e.toggleHighContrast=G("toggleHighContrast","Toggle High Contrast Theme")}(iO||(iO={})),function(e){e.bulkEditServiceSummary=G("bulkEditServiceSummary","Made {0} edits in {1} files")}(sO||(sO={}));const rO=ro("workspaceTrustManagementService");var oO,aO;function lO(e,t,n){const i=n.mode===aO.ALIGN?n.offset:n.offset+n.size,s=n.mode===aO.ALIGN?n.offset+n.size:n.offset;return 0===n.position?t<=e-i?i:t<=s?s-t:Math.max(e-t,0):t<=s?s-t:t<=e-i?i:0}!function(e){function t(e,t){if(e.start>=t.end||t.start>=e.end)return{start:0,end:0};const n=Math.max(e.start,t.start),i=Math.min(e.end,t.end);return i-n<=0?{start:0,end:0}:{start:n,end:i}}function n(e){return e.end-e.start<=0}e.intersect=t,e.isEmpty=n,e.intersects=function(e,i){return!n(t(e,i))},e.relativeComplement=function(e,t){const i=[],s={start:e.start,end:Math.min(t.start,e.end)},r={start:Math.max(t.end,e.start),end:e.end};return n(s)||i.push(s),n(r)||i.push(r),i}}(oO||(oO={})),function(e){e[e.AVOID=0]="AVOID",e[e.ALIGN=1]="ALIGN"}(aO||(aO={}));class cO extends Zt{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=Zt.None,this.toDisposeOnSetContainer=Zt.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=Mu(".context-view"),Ou(this.view),this.setContainer(e,t),this._register(Qt((()=>this.setContainer(null,1))))}setContainer(e,t){var n;this.useFixedPosition=1!==t;const i=this.useShadowDOM;if(this.useShadowDOM=3===t,(e!==this.container||i!==this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.shadowRoot?(this.shadowRoot.removeChild(this.view),this.shadowRoot=null,null===(n=this.shadowRootHostElement)||void 0===n||n.remove(),this.shadowRootHostElement=null):this.container.removeChild(this.view),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=Mu(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const e=document.createElement("style");e.textContent=uO,this.shadowRoot.appendChild(e),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(Mu("slot"))}else this.container.appendChild(this.view);const t=new Xt;cO.BUBBLE_UP_EVENTS.forEach((e=>{t.add(Hc(this.container,e,(e=>{this.onDOMEvent(e,!1)})))})),cO.BUBBLE_DOWN_EVENTS.forEach((e=>{t.add(Hc(this.container,e,(e=>{this.onDOMEvent(e,!0)}),!0))})),this.toDisposeOnSetContainer=t}}show(e){var t,n;this.isVisible()&&this.hide(),Fc(this.view),this.view.className="context-view",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex="2575",this.view.style.position=this.useFixedPosition?"fixed":"absolute",Ru(this.view),this.toDisposeOnClean=e.render(this.view)||Zt.None,this.delegate=e,this.doLayout(),null===(n=(t=this.delegate).focus)||void 0===n||n.call(t)}getViewElement(){return this.view}layout(){this.isVisible()&&(!1!==this.delegate.canRelayout||ke&&Wa?(this.delegate.layout&&this.delegate.layout(),this.doLayout()):this.hide())}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(e instanceof HTMLElement){const n=Zc(e),i=Jc(e);t={top:n.top*i,left:n.left*i,width:n.width*i,height:n.height*i}}else t=function(e){const t=e;return!!t&&"number"===typeof t.x&&"number"===typeof t.y}(e)?{top:e.y,left:e.x,width:e.width||1,height:e.height||2}:{top:e.posy,left:e.posx,width:2,height:2};const n=eu(this.view),i=iu(this.view),s=this.delegate.anchorPosition||0,r=this.delegate.anchorAlignment||0,o=this.delegate.anchorAxisAlignment||0;let a,l;const c=function(){var e,t;return null!==(t=null===(e=du().defaultView)||void 0===e?void 0:e.window)&&void 0!==t?t:Ms}();if(0===o){const e={offset:t.top-c.pageYOffset,size:t.height,position:0===s?0:1},o={offset:t.left,size:t.width,position:0===r?0:1,mode:aO.ALIGN};a=lO(c.innerHeight,i,e)+c.pageYOffset,oO.intersects({start:a,end:a+i},{start:e.offset,end:e.offset+e.size})&&(o.mode=aO.AVOID),l=lO(c.innerWidth,n,o)}else{const e={offset:t.left,size:t.width,position:0===r?0:1},o={offset:t.top,size:t.height,position:0===s?0:1,mode:aO.ALIGN};l=lO(c.innerWidth,n,e),oO.intersects({start:l,end:l+n},{start:e.offset,end:e.offset+e.size})&&(o.mode=aO.AVOID),a=lO(c.innerHeight,i,o)+c.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(0===s?"bottom":"top"),this.view.classList.add(0===r?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const u=Zc(this.container);this.view.style.top="".concat(a-(this.useFixedPosition?Zc(this.view).top:u.top),"px"),this.view.style.left="".concat(l-(this.useFixedPosition?Zc(this.view).left:u.left),"px"),this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,(null===t||void 0===t?void 0:t.onHide)&&t.onHide(e),this.toDisposeOnClean.dispose(),Ou(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,Dc(e).document.activeElement):t&&!su(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}cO.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],cO.BUBBLE_DOWN_EVENTS=["click"];const uO='\n\t:host {\n\t\tall: initial; /* 1st rule so subsequent properties are reset. */\n\t}\n\n\t.codicon[class*=\'codicon-\'] {\n\t\tfont: normal normal normal 16px/1 codicon;\n\t\tdisplay: inline-block;\n\t\ttext-decoration: none;\n\t\ttext-rendering: auto;\n\t\ttext-align: center;\n\t\t-webkit-font-smoothing: antialiased;\n\t\t-moz-osx-font-smoothing: grayscale;\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-ms-user-select: none;\n\t}\n\n\t:host {\n\t\tfont-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;\n\t}\n\n\t:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }\n\t:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }\n\t:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }\n\t:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }\n\t:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }\n\n\t:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }\n\t:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }\n\t:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }\n\t:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }\n\t:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }\n\n\t:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }\n\t:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }\n';var hO=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},dO=function(e,t){return function(n,i){t(n,i,e)}};let fO=class extends Zt{constructor(e){super(),this.layoutService=e,this.currentViewDisposable=Zt.None,this.contextView=this._register(new cO(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer((()=>this.layout())))}showContextView(e,t,n){let i;i=t?t===this.layoutService.getContainer(Dc(t))?1:n?3:2:1,this.contextView.setContainer(null!==t&&void 0!==t?t:this.layoutService.activeContainer,i),this.contextView.show(e);const s=Qt((()=>{this.currentViewDisposable===s&&this.hideContextView()}));return this.currentViewDisposable=s,s}getContextViewElement(){return this.contextView.getViewElement()}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e)}dispose(){super.dispose(),this.currentViewDisposable.dispose(),this.currentViewDisposable=Zt.None}};fO=hO([dO(0,VN)],fO);let gO=[],pO=[],mO=[];function bO(e){!function(e,t,n){const i=function(e,t){return{id:e.id,mime:e.mime,filename:e.filename,extension:e.extension,filepattern:e.filepattern,firstline:e.firstline,userConfigured:t,filenameLowercase:e.filename?e.filename.toLowerCase():void 0,extensionLowercase:e.extension?e.extension.toLowerCase():void 0,filepatternLowercase:e.filepattern?QI(e.filepattern.toLowerCase()):void 0,filepatternOnPath:!!e.filepattern&&e.filepattern.indexOf(Jn.sep)>=0}}(e,t);gO.push(i),i.userConfigured?mO.push(i):pO.push(i);n&&!i.userConfigured&&gO.forEach((e=>{e.mime===i.mime||e.userConfigured||(i.extension&&e.extension===i.extension&&console.warn("Overwriting extension <<".concat(i.extension,">> to now point to mime <<").concat(i.mime,">>")),i.filename&&e.filename===i.filename&&console.warn("Overwriting filename <<".concat(i.filename,">> to now point to mime <<").concat(i.mime,">>")),i.filepattern&&e.filepattern===i.filepattern&&console.warn("Overwriting filepattern <<".concat(i.filepattern,">> to now point to mime <<").concat(i.mime,">>")),i.firstline&&e.firstline===i.firstline&&console.warn("Overwriting firstline <<".concat(i.firstline,">> to now point to mime <<").concat(i.mime,">>")))}))}(e,!1,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function _O(e,t){return function(e,t){let n;if(e)switch(e.scheme){case dc.file:n=e.fsPath;break;case dc.data:n=vL.parseMetaData(e).get(vL.META_DATA_LABEL);break;case dc.vscodeNotebookCell:n=void 0;break;default:n=e.path}if(!n)return[{id:"unknown",mime:bd.unknown}];n=n.toLowerCase();const i=si(n),s=vO(n,i,mO);if(s)return[s,{id:Pd,mime:bd.text}];const r=vO(n,i,pO);if(r)return[r,{id:Pd,mime:bd.text}];if(t){const e=function(e){Cr(e)&&(e=e.substr(1));if(e.length>0)for(let t=gO.length-1;t>=0;t--){const n=gO[t];if(!n.firstline)continue;const i=e.match(n.firstline);if(i&&i.length>0)return n}return}(t);if(e)return[e,{id:Pd,mime:bd.text}]}return[{id:"unknown",mime:bd.unknown}]}(e,t).map((e=>e.id))}function vO(e,t,n){var i;let s,r,o;for(let a=n.length-1;a>=0;a--){const l=n[a];if(t===l.filenameLowercase){s=l;break}if(l.filepattern&&(!r||l.filepattern.length>r.filepattern.length)){const n=l.filepatternOnPath?e:t;(null===(i=l.filepatternLowercase)||void 0===i?void 0:i.call(l,n))&&(r=l)}l.extension&&(!o||l.extension.length>o.extension.length)&&t.endsWith(l.extensionLowercase)&&(o=l)}return s||(r||(o||void 0))}const yO=Object.prototype.hasOwnProperty,SO="vs.editor.nullLanguage";class wO{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(SO,0),this._register(Pd,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||SO}}class kO extends Zt{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this._onDidChange=this._register(new un),this.onDidChange=this._onDidChange.event,kO.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new wO,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(Od.onDidChangeLanguages((e=>{this._initializeFromRegistry()}))))}dispose(){kO.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},gO=gO.filter((e=>e.userConfigured)),pO=[];const e=[].concat(Od.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach((e=>{const t=this._languages[e];t.name&&(this._nameMap[t.name]=t.identifier),t.aliases.forEach((e=>{this._lowercaseNameMap[e.toLowerCase()]=t.identifier})),t.mimetypes.forEach((e=>{this._mimeTypesMap[e]=t.identifier}))})),ya.as(yd).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;yO.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let i=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),i=t.mimetypes[0]),i||(i="text/x-".concat(n),e.mimetypes.push(i)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const e of t.extensions)bO({id:n,mime:i,extension:e},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const l of t.filenames)bO({id:n,mime:i,filename:l},this._warnOnOverwrite),e.filenames.push(l);if(Array.isArray(t.filenamePatterns))for(const l of t.filenamePatterns)bO({id:n,mime:i,filepattern:l},this._warnOnOverwrite);if("string"===typeof t.firstLine&&t.firstLine.length>0){let e=t.firstLine;"^"!==e.charAt(0)&&(e="^"+e);try{const t=new RegExp(e);"^"!==(s=t).source&&"^$"!==s.source&&"$"!==s.source&&"^\\s*$"!==s.source&&s.exec("")&&0===s.lastIndex||bO({id:n,mime:i,firstline:t},this._warnOnOverwrite)}catch(a){console.warn("[".concat(t.id,"]: Invalid regular expression `").concat(e,"`: "),a)}}var s;e.aliases.push(n);let r=null;if("undefined"!==typeof t.aliases&&Array.isArray(t.aliases)&&(r=0===t.aliases.length?[null]:t.aliases),null!==r)for(const l of r)l&&0!==l.length&&e.aliases.push(l);const o=null!==r&&r.length>0;if(o&&null===r[0]);else{const t=(o?r[0]:null)||n;!o&&e.name||(e.name=t)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return!!e&&yO.call(this._languages,e)}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return yO.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&yO.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return e||t?_O(e,t):[]}}kO.instanceCount=0;class CO extends Zt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super(),this._onDidRequestBasicLanguageFeatures=this._register(new un),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new un),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new un({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,CO.instanceCount++,this._registry=this._register(new kO(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange((()=>this._onDidChange.fire())))}dispose(){CO.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){return g(this._registry.guessLanguageIdByFilepathOrFirstLine(e,t),null)}createById(e){return new xO(this.onDidChange,(()=>this._createAndGetLanguageIdentifier(e)))}createByFilepathOrFirstLine(e,t){return new xO(this.onDidChange,(()=>{const n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)}))}_createAndGetLanguageIdentifier(e){return e&&this.isRegisteredLanguageId(e)||(e=Pd),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),Ui.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}}CO.instanceCount=0;class xO{constructor(e,t){this._onDidChangeLanguages=e,this._selector=t,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages((()=>this._evaluate()))),this._emitter||(this._emitter=new un({onDidRemoveLastListener:()=>{this._dispose()}})),this._emitter.event}_evaluate(){var e;const t=this._selector();t!==this.languageId&&(this.languageId=t,null===(e=this._emitter)||void 0===e||e.fire(this.languageId))}}const EO={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:bd.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"};class LO{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}async update(e,t,n){var i;if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(void 0===e||L(e)||e instanceof HTMLElement)s=e;else if(F(e.markdown)){this._hoverWidget||this.show(G("iconLabel.loading","Loading..."),t),this._cancellationTokenSource=new Sn;const n=this._cancellationTokenSource.token;if(s=await e.markdown(n),void 0===s&&(s=e.markdownNotSupportedFallback),this.isDisposed||n.isCancellationRequested)return}else s=null!==(i=e.markdown)&&void 0!==i?i:e.markdownNotSupportedFallback;this.show(s,t,n)}show(e,t,n){const i=this._hoverWidget;if(this.hasContent(e)){const s={content:e,target:this.target,appearance:{showPointer:"element"===this.hoverDelegate.placement,skipFadeInAnimation:!this.fadeInAnimation||!!i},position:{hoverPosition:2},...n};this._hoverWidget=this.hoverDelegate.showHover(s,t)}null===i||void 0===i||i.dispose()}hasContent(e){return!!e&&(!hM(e)||!!e.value)}get isDisposed(){var e;return null===(e=this._hoverWidget)||void 0===e?void 0:e.isDisposed}dispose(){var e,t;null===(e=this._hoverWidget)||void 0===e||e.dispose(),null===(t=this._cancellationTokenSource)||void 0===t||t.dispose(!0),this._cancellationTokenSource=void 0}}function DO(e,t,n,i){let s,r;const o=(t,n)=>{var i;const o=void 0!==r;t&&(null===r||void 0===r||r.dispose(),r=void 0),n&&(null===s||void 0===s||s.dispose(),s=void 0),o&&(null===(i=e.onDidHideHover)||void 0===i||i.call(e))},a=(s,o,a)=>new sl((async()=>{r&&!r.isDisposed||(r=new LO(e,a||t,s>0),await r.update(n,o,i))}),s);let l=!1;const c=zc(t,ku.MOUSE_DOWN,(()=>{l=!0,o(!0,!0)}),!0),u=zc(t,ku.MOUSE_UP,(()=>{l=!1}),!0),h=zc(t,ku.MOUSE_LEAVE,(e=>{l=!1,o(!1,e.fromElement===t)}),!0),d=zc(t,ku.MOUSE_OVER,(()=>{if(s)return;const n=new Xt,i={targetElements:[t],dispose:()=>{}};if(void 0===e.placement||"mouse"===e.placement){const e=e=>{i.x=e.x+10,e.target instanceof HTMLElement&&e.target.classList.contains("action-label")&&o(!0,!0)};n.add(zc(t,ku.MOUSE_MOVE,e,!0))}n.add(a(e.delay,!1,i)),s=n}),!0),f=zc(t,ku.FOCUS,(()=>{if(l||s)return;const n={targetElements:[t],dispose:()=>{}},i=new Xt;i.add(zc(t,ku.BLUR,(()=>o(!0,!0)),!0)),i.add(a(e.delay,!1,n)),s=i}),!0);return{show:e=>{o(!1,!0),a(0,e)},hide:()=>{o(!0,!0)},update:async(e,t)=>{n=e,await(null===r||void 0===r?void 0:r.update(n,void 0,t))},dispose:()=>{d.dispose(),h.dispose(),c.dispose(),u.dispose(),f.dispose(),o(!0,!0)}}}class AO{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach((i=>i.splice(e,t,n)))}}class TO extends Error{constructor(e,t){super("ListError [".concat(e,"] ").concat(t))}}function NO(e,t){const n=[];for(const i of t){if(e.start>=i.range.end)continue;if(e.end<i.range.start)break;const t=oO.intersect(e,i.range);oO.isEmpty(t)||n.push({range:t,size:i.size})}return n}function IO(e,t){let{start:n,end:i}=e;return{start:n+t,end:i+t}}class $O{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=null!==e&&void 0!==e?e:0,this._size=this._paddingTop}splice(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const i=n.length-t,s=NO({start:0,end:e},this.groups),r=NO({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map((e=>({range:IO(e.range,i),size:e.size}))),o=n.map(((t,n)=>({range:{start:e+n,end:e+n+1},size:t.size})));this.groups=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){const t=[];let n=null;for(const i of e){const e=i.range.start,s=i.range.end,r=i.size;n&&r===n.size?n.range.end=s:(n={range:{start:e,end:s},size:r},t.push(n))}return t}(t.reduce(((e,t)=>e.concat(t)),[]))}(s,o,r),this._size=this._paddingTop+this.groups.reduce(((e,t)=>e+t.size*(t.range.end-t.range.start)),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,n=this._paddingTop;for(const i of this.groups){const s=i.range.end-i.range.start,r=n+s*i.size;if(e<r)return t+Math.floor((e-n)/i.size);t+=s,n=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(const i of this.groups){const s=i.range.end-i.range.start,r=n+s;if(e<r)return this._paddingTop+t+(e-n)*i.size;t+=s*i.size,n=r}return-1}}class MO{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),n=!1;if(t)n=this.transactionNodesPendingRemoval.has(t.domNode),n&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const n=Mu(".monaco-list-row");t={domNode:n,templateId:e,templateData:this.getRenderer(e).renderTemplate(n)}}return{row:t,isReusingConnectedDomNode:n}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const e of this.transactionNodesPendingRemoval)this.doRemoveNode(e);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t));this.getTemplateCache(n).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),function(e){var t;try{null===(t=e.parentElement)||void 0===t||t.removeChild(e)}catch(zY){}}(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach(((e,t)=>{for(const n of e){this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}})),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error("No renderer found for ".concat(e));return t}}var RO=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const OO={CurrentDragAndDropData:void 0},PO={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements:e=>[e],getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class FO{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class BO{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class zO{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}class WO{constructor(e){(null===e||void 0===e?void 0:e.getSetSize)?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(e,t,n)=>n,(null===e||void 0===e?void 0:e.getPosInSet)?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(e,t)=>t+1,(null===e||void 0===e?void 0:e.getRole)?this.getRole=e.getRole.bind(e):this.getRole=e=>"listitem",(null===e||void 0===e?void 0:e.isChecked)?this.isChecked=e.isChecked.bind(e):this.isChecked=e=>{}}}class HO{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const e of this.items)this.measureItemWidth(e);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:tu(this.domNode)}),this.rowsContainer.style.width="".concat(Math.max(this.scrollWidth||0,this.renderWidth),"px")}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:PO;var s,r,o,a,l,c,u,h,d,f,g,p,m;if(this.virtualDelegate=t,this.domId="list_id_".concat(++HO.InstanceCount),this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new el(50),this.splicing=!1,this.dragOverAnimationStopDisposable=Zt.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=Zt.None,this.onDragLeaveTimeout=Zt.None,this.disposables=new Xt,this._onDidChangeContentHeight=new un,this._onDidChangeContentWidth=new un,this.onDidChangeContentHeight=rn.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new $O(null!==(s=i.paddingTop)&&void 0!==s?s:0);for(const b of n)this.renderers.set(b.templateId,b);this.cache=this.disposables.add(new MO(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support","boolean"!==typeof i.mouseSupport||i.mouseSupport),this._horizontalScrolling=null!==(r=i.horizontalScrolling)&&void 0!==r?r:PO.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom="undefined"===typeof i.paddingBottom?0:i.paddingBottom,this.accessibilityProvider=new WO(i.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows";(null!==(o=i.transformOptimization)&&void 0!==o?o:PO.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(cS.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new vS({forceIntegerValues:!0,smoothScrollDuration:null!==(a=i.smoothScrolling)&&void 0!==a&&a?125:0,scheduleAtNextAnimationFrame:e=>Uc(Dc(this.domNode),e)})),this.scrollableElement=this.disposables.add(new LS(this.rowsContainer,{alwaysConsumeMouseWheel:null!==(l=i.alwaysConsumeMouseWheel)&&void 0!==l?l:PO.alwaysConsumeMouseWheel,horizontal:1,vertical:null!==(c=i.verticalScrollMode)&&void 0!==c?c:PO.verticalScrollMode,useShadows:null!==(u=i.useShadows)&&void 0!==u?u:PO.useShadows,mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity,scrollByPage:i.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(zc(this.rowsContainer,aS.Change,(e=>this.onTouchChange(e)))),this.disposables.add(zc(this.scrollableElement.getDomNode(),"scroll",(e=>e.target.scrollTop=0))),this.disposables.add(zc(this.domNode,"dragover",(e=>this.onDragOver(this.toDragEvent(e))))),this.disposables.add(zc(this.domNode,"drop",(e=>this.onDrop(this.toDragEvent(e))))),this.disposables.add(zc(this.domNode,"dragleave",(e=>this.onDragLeave(this.toDragEvent(e))))),this.disposables.add(zc(this.domNode,"dragend",(e=>this.onDragEnd(e)))),this.setRowLineHeight=null!==(h=i.setRowLineHeight)&&void 0!==h?h:PO.setRowLineHeight,this.setRowHeight=null!==(d=i.setRowHeight)&&void 0!==d?d:PO.setRowHeight,this.supportDynamicHeights=null!==(f=i.supportDynamicHeights)&&void 0!==f?f:PO.supportDynamicHeights,this.dnd=null!==(g=i.dnd)&&void 0!==g?g:this.disposables.add(PO.dnd),this.layout(null===(p=i.initialSize)||void 0===p?void 0:p.height,null===(m=i.initialSize)||void 0===m?void 0:m.width)}updateOptions(e){let t;if(void 0!==e.paddingBottom&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),void 0!==e.smoothScrolling&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),void 0!==e.horizontalScrolling&&(this.horizontalScrolling=e.horizontalScrolling),void 0!==e.scrollByPage&&(t={...null!==t&&void 0!==t?t:{},scrollByPage:e.scrollByPage}),void 0!==e.mouseWheelScrollSensitivity&&(t={...null!==t&&void 0!==t?t:{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),void 0!==e.fastScrollSensitivity&&(t={...null!==t&&void 0!==t?t:{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),void 0!==e.paddingTop&&e.paddingTop!==this.rangeMap.paddingTop){const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),n=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(t,Math.max(0,this.lastRenderTop+n),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}splice(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s={start:e,end:e+t},r=oO.intersect(i,s),o=new Map;for(let y=r.end-1;y>=r.start;y--){const e=this.items[y];if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){let t=o.get(e.templateId);t||(t=[],o.set(e.templateId,t));const n=this.renderers.get(e.templateId);n&&n.disposeElement&&n.disposeElement(e.element,y,e.row.templateData,e.size),t.push(e.row)}e.row=null}const a={start:e+t,end:this.items.length},l=oO.intersect(a,i),c=oO.relativeComplement(a,i),u=n.map((e=>({id:String(this.itemId++),element:e,templateId:this.virtualDelegate.getTemplateId(e),size:this.virtualDelegate.getHeight(e),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(e),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:Zt.None,checkedDisposable:Zt.None})));let h;0===e&&t>=this.items.length?(this.rangeMap=new $O(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,u),h=this.items,this.items=u):(this.rangeMap.splice(e,t,u),h=this.items.splice(e,t,...u));const d=n.length-t,f=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),g=IO(l,d),p=oO.intersect(f,g);for(let y=p.start;y<p.end;y++)this.updateItemInDOM(this.items[y],y);const m=oO.relativeComplement(g,f);for(const y of m)for(let e=y.start;e<y.end;e++)this.removeItemFromDOM(e);const b=c.map((e=>IO(e,d))),_=[{start:e,end:e+n.length},...b].map((e=>oO.intersect(f,e))),v=this.getNextToLastElement(_);for(const y of _)for(let e=y.start;e<y.end;e++){const t=this.items[e],n=o.get(t.templateId),i=null===n||void 0===n?void 0:n.pop();this.insertItemInDOM(e,v,i)}for(const y of o.values())for(const e of y)this.cache.release(e);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map((e=>e.element))}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height="".concat(this._scrollHeight,"px"),this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=Uc(Dc(this.domNode),(()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null})))}eventuallyUpdateScrollWidth(){this.horizontalScrolling?this.scrollableElementWidthDelayer.trigger((()=>this.updateScrollWidth())):this.scrollableElementWidthDelayer.cancel()}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)"undefined"!==typeof t.width&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:0===e?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex((t=>t.element===e))}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const n={height:"number"===typeof e?e:nu(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),"undefined"!==typeof t&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:"number"===typeof t?t:tu(this.domNode)})}render(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const o=this.getRenderRange(t,n),a=oO.relativeComplement(o,e),l=oO.relativeComplement(e,o),c=this.getNextToLastElement(a);if(r){const t=oO.intersect(e,o);for(let e=t.start;e<t.end;e++)this.updateItemInDOM(this.items[e],e)}this.cache.transact((()=>{for(const e of l)for(let t=e.start;t<e.end;t++)this.removeItemFromDOM(t);for(const e of a)for(let t=e.start;t<e.end;t++)this.insertItemInDOM(t,c)})),void 0!==i&&(this.rowsContainer.style.left="-".concat(i,"px")),this.rowsContainer.style.top="-".concat(t,"px"),this.horizontalScrolling&&void 0!==s&&(this.rowsContainer.style.width="".concat(Math.max(s,this.renderWidth),"px")),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t,n){const i=this.items[e];let s=!1;if(!i.row)if(n)i.row=n;else{const e=this.cache.alloc(i.templateId);i.row=e.row,s=e.isReusingConnectedDomNode}const r=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",r);const o=this.accessibilityProvider.isChecked(i.element);if("boolean"===typeof o)i.row.domNode.setAttribute("aria-checked",String(!!o));else if(o){const e=e=>i.row.domNode.setAttribute("aria-checked",String(!!e));e(o.value),i.checkedDisposable=o.onDidChange(e)}!s&&i.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(i.row.domNode,t):this.rowsContainer.appendChild(i.row.domNode)),this.updateItemInDOM(i,e);const a=this.renderers.get(i.templateId);if(!a)throw new Error("No renderer found for template id ".concat(i.templateId));null===a||void 0===a||a.renderElement(i.element,e,i.row.templateData,i.size);const l=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!l,l&&(i.dragStartDisposable=zc(i.row.domNode,"dragstart",(e=>this.onDragStart(i.element,l,e)))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=tu(e.row.domNode);const t=Dc(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top="".concat(this.elementTop(t),"px"),this.setRowHeight&&(e.row.domNode.style.height="".concat(e.size,"px")),this.setRowLineHeight&&(e.row.domNode.style.lineHeight="".concat(e.size,"px")),e.row.domNode.setAttribute("data-index","".concat(t)),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return rn.map(this.disposables.add(new MS(this.domNode,"click")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseDblClick(){return rn.map(this.disposables.add(new MS(this.domNode,"dblclick")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseMiddleClick(){return rn.filter(rn.map(this.disposables.add(new MS(this.domNode,"auxclick")).event,(e=>this.toMouseEvent(e)),this.disposables),(e=>1===e.browserEvent.button),this.disposables)}get onMouseDown(){return rn.map(this.disposables.add(new MS(this.domNode,"mousedown")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseOver(){return rn.map(this.disposables.add(new MS(this.domNode,"mouseover")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseOut(){return rn.map(this.disposables.add(new MS(this.domNode,"mouseout")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onContextMenu(){return rn.any(rn.map(this.disposables.add(new MS(this.domNode,"contextmenu")).event,(e=>this.toMouseEvent(e)),this.disposables),rn.map(this.disposables.add(new MS(this.domNode,aS.Contextmenu)).event,(e=>this.toGestureEvent(e)),this.disposables))}get onTouchStart(){return rn.map(this.disposables.add(new MS(this.domNode,"touchstart")).event,(e=>this.toTouchEvent(e)),this.disposables)}get onTap(){return rn.map(this.disposables.add(new MS(this.rowsContainer,aS.Tap)).event,(e=>this.toGestureEvent(e)),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n="undefined"===typeof t?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n="undefined"===typeof t?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n="undefined"===typeof t?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n="undefined"===typeof t?void 0:this.items[t];return{browserEvent:e,index:t,element:n&&n.element,sector:this.getTargetSector(e,t)}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){var i,s;if(!n.dataTransfer)return;const r=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(EO.TEXT,t),n.dataTransfer.setDragImage){let e;this.dnd.getDragLabel&&(e=this.dnd.getDragLabel(r,n)),"undefined"===typeof e&&(e=String(r.length));const t=Mu(".monaco-drag-image");t.textContent=e;const i=(e=>{for(;e&&!e.classList.contains("monaco-workbench");)e=e.parentElement;return e||this.domNode.ownerDocument})(this.domNode);i.appendChild(t),n.dataTransfer.setDragImage(t,-10,-10),setTimeout((()=>i.removeChild(t)),0)}this.domNode.classList.add("dragging"),this.currentDragData=new FO(r),OO.CurrentDragAndDropData=new BO(r),null===(s=(i=this.dnd).onDragStart)||void 0===s||s.call(i,this.currentDragData,n)}onDragOver(e){var t,n;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),OO.CurrentDragAndDropData&&"vscode-ui"===OO.CurrentDragAndDropData.getData())return!1;if(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer)return!1;if(!this.currentDragData)if(OO.CurrentDragAndDropData)this.currentDragData=OO.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new zO}const i=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop="boolean"===typeof i?i:i.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;let s;e.browserEvent.dataTransfer.dropEffect="boolean"!==typeof i&&0===(null===(t=i.effect)||void 0===t?void 0:t.type)?"copy":"move",s="boolean"!==typeof i&&i.feedback?i.feedback:"undefined"===typeof e.index?[-1]:[e.index],s=f(s).filter((e=>e>=-1&&e<this.length)).sort(((e,t)=>e-t)),s=-1===s[0]?[-1]:s;let r="boolean"!==typeof i&&i.effect&&i.effect.position?i.effect.position:"drop-target";if(o=this.currentDragFeedback,l=s,(Array.isArray(o)&&Array.isArray(l)?a(o,l):o===l)&&this.currentDragFeedbackPosition===r)return!0;var o,l;if(this.currentDragFeedback=s,this.currentDragFeedbackPosition=r,this.currentDragFeedbackDisposable.dispose(),-1===s[0])this.domNode.classList.add(r),this.rowsContainer.classList.add(r),this.currentDragFeedbackDisposable=Qt((()=>{this.domNode.classList.remove(r),this.rowsContainer.classList.remove(r)}));else{if(s.length>1&&"drop-target"!==r)throw new Error("Can't use multiple feedbacks with position different than 'over'");"drop-target-after"===r&&s[0]<this.length-1&&(s[0]+=1,r="drop-target-before");for(const e of s){const t=this.items[e];t.dropTarget=!0,null===(n=t.row)||void 0===n||n.domNode.classList.add(r)}this.currentDragFeedbackDisposable=Qt((()=>{var e;for(const t of s){const n=this.items[t];n.dropTarget=!1,null===(e=n.row)||void 0===e||e.domNode.classList.remove(r)}}))}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=il((()=>this.clearDragOverFeedback()),100,this.disposables),this.currentDragData&&(null===(n=(t=this.dnd).onDragLeave)||void 0===n||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,OO.CurrentDragAndDropData=void 0,t&&e.browserEvent.dataTransfer&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){var t,n;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,OO.CurrentDragAndDropData=void 0,null===(n=(t=this.dnd).onDragEnd)||void 0===n||n.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=Zt.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const e=function(e){let t=e.offsetParent,n=e.offsetTop,i=e.offsetLeft;for(;null!==(e=e.parentNode)&&e!==e.ownerDocument.body&&e!==e.ownerDocument.documentElement;){n-=e.scrollTop;const s=ou(e)?null:Gc(e);s&&(i-="rtl"!==s.direction?e.scrollLeft:-e.scrollLeft),e===t&&(i+=Qc.getBorderLeftWidth(e),n+=Qc.getBorderTopWidth(e),n+=e.offsetTop,i+=e.offsetLeft,t=e.offsetParent)}return{left:i,top:n}}(this.domNode).top;this.dragOverAnimationDisposable=function(e,t){const n=()=>{t(),i=Uc(e,n)};let i=Uc(e,n);return Qt((()=>i.dispose()))}(Dc(this.domNode),this.animateDragAndDropScrollTop.bind(this,e))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=il((()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}),1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(void 0===this.dragOverMouseY)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(void 0===t)return;const n=e.offsetY/this.items[t].size;return Math.floor(n/.25)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;n instanceof HTMLElement&&n!==this.rowsContainer&&t.contains(n);){const e=n.getAttribute("data-index");if(e){const t=Number(e);if(!isNaN(t))return t}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const i=this.getRenderRange(e,t);let s,r;e===this.elementTop(i.start)?(s=i.start,r=0):i.end-i.start>1&&(s=i.start+1,r=this.elementTop(s)-e);let o=0;for(;;){const a=this.getRenderRange(e,t);let l=!1;for(let e=a.start;e<a.end;e++){const t=this.probeDynamicHeight(e);0!==t&&this.rangeMap.splice(e,1,[this.items[e]]),o+=t,l=l||0!==t}if(!l){0!==o&&this.eventuallyUpdateScrollDimensions();const t=oO.relativeComplement(i,a);for(const e of t)for(let t=e.start;t<e.end;t++)this.items[t].row&&this.removeItemFromDOM(t);const l=oO.relativeComplement(a,i);for(const e of l)for(let t=e.start;t<e.end;t++){const e=t+1,n=e<this.items.length?this.items[e].row:null,i=n?n.domNode:null;this.insertItemInDOM(t,i)}for(let e=a.start;e<a.end;e++)this.items[e].row&&this.updateItemInDOM(this.items[e],e);if("number"===typeof s){const t=this.scrollable.getFutureScrollPosition().scrollTop-e,i=this.elementTop(s)-r+t;this.setScrollTop(i,n)}return void this._onDidChangeContentHeight.fire(this.contentHeight)}}}probeDynamicHeight(e){var t,n,i;const s=this.items[e];if(this.virtualDelegate.getDynamicHeight){const e=this.virtualDelegate.getDynamicHeight(s.element);if(null!==e){const t=s.size;return s.size=e,s.lastDynamicHeightWidth=this.renderWidth,e-t}}if(!s.hasDynamicHeight||s.lastDynamicHeightWidth===this.renderWidth)return 0;if(this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(s.element))return 0;const r=s.size;if(s.row)return s.row.domNode.style.height="",s.size=s.row.domNode.offsetHeight,s.lastDynamicHeightWidth=this.renderWidth,s.size-r;const{row:o}=this.cache.alloc(s.templateId);o.domNode.style.height="",this.rowsContainer.appendChild(o.domNode);const a=this.renderers.get(s.templateId);if(!a)throw new Wt("Missing renderer for templateId: "+s.templateId);return a.renderElement(s.element,e,o.templateData,void 0),s.size=o.domNode.offsetHeight,null===(t=a.disposeElement)||void 0===t||t.call(a,s.element,e,o.templateData,void 0),null===(i=(n=this.virtualDelegate).setDynamicHeight)||void 0===i||i.call(n,s.element,s.size),s.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(o.domNode),this.cache.release(o),s.size-r}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const n=this.items[t.end];return n&&n.row?n.row.domNode:null}getElementDomId(e){return"".concat(this.domId,"_").concat(e)}dispose(){var e,t;for(const n of this.items)if(n.dragStartDisposable.dispose(),n.checkedDisposable.dispose(),n.row){const t=this.renderers.get(n.row.templateId);t&&(null===(e=t.disposeElement)||void 0===e||e.call(t,n.element,-1,n.row.templateData,void 0),t.disposeTemplate(n.row.templateData))}this.items=[],this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),null===(t=this.dragOverAnimationDisposable)||void 0===t||t.dispose(),this.disposables.dispose()}}HO.InstanceCount=0,RO([oS],HO.prototype,"onMouseClick",null),RO([oS],HO.prototype,"onMouseDblClick",null),RO([oS],HO.prototype,"onMouseMiddleClick",null),RO([oS],HO.prototype,"onMouseDown",null),RO([oS],HO.prototype,"onMouseOver",null),RO([oS],HO.prototype,"onMouseOut",null),RO([oS],HO.prototype,"onContextMenu",null),RO([oS],HO.prototype,"onTouchStart",null),RO([oS],HO.prototype,"onTap",null);var VO,jO,UO=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};class qO{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return"template:".concat(this.trait.name)}renderTemplate(e){return e}renderElement(e,t,n){const i=this.renderedElements.findIndex((e=>e.templateData===n));if(i>=0){const e=this.renderedElements[i];this.trait.unrender(n),e.index=t}else{const e={index:t,templateData:n};this.renderedElements.push(e)}this.trait.renderIndex(t,n)}splice(e,t,n){const i=[];for(const s of this.renderedElements)s.index<e?i.push(s):s.index>=e+t&&i.push({index:s.index+n-t,templateData:s.templateData});this.renderedElements=i}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex((t=>t.templateData===e));t<0||this.renderedElements.splice(t,1)}}class KO{get name(){return this._trait}get renderer(){return new qO(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new un,this.onChange=this._onChange.event}splice(e,t,n){const i=n.length-t,s=e+t,r=[];let o=0;for(;o<this.sortedIndexes.length&&this.sortedIndexes[o]<e;)r.push(this.sortedIndexes[o++]);for(let a=0;a<n.length;a++)n[a]&&r.push(a+e);for(;o<this.sortedIndexes.length&&this.sortedIndexes[o]>=s;)r.push(this.sortedIndexes[o++]+i);this.renderer.splice(e,t,n.length),this._set(r,r)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(gP),t)}_set(e,t,n){const i=this.indexes,s=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const r=fP(s,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:n}),i}get(){return this.indexes}contains(e){return t=this.sortedIndexes,n=e,i=gP,function(e,t){let n=0,i=e-1;for(;n<=i;){const e=(n+i)/2|0,s=t(e);if(s<0)n=e+1;else{if(!(s>0))return e;i=e-1}}return-(n+1)}(t.length,(e=>i(t[e],n)))>=0;var t,n,i}dispose(){Gt(this._onChange)}}UO([oS],KO.prototype,"renderer",null);class GO extends KO{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class YO{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,new Array(n.length).fill(!1));const i=this.trait.get().map((e=>this.identityProvider.getId(this.view.element(e)).toString()));if(0===i.length)return this.trait.splice(e,t,new Array(n.length).fill(!1));const s=new Set(i),r=n.map((e=>s.has(this.identityProvider.getId(e).toString())));this.trait.splice(e,t,r)}}function QO(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName}function XO(e,t){return!!e.classList.contains(t)||!e.classList.contains("monaco-list")&&(!!e.parentElement&&XO(e.parentElement,t))}function ZO(e){return XO(e,"monaco-editor")}function JO(e){return XO(e,"monaco-tree-sticky-row")}function eP(e){return e.classList.contains("monaco-tree-sticky-container")}function tP(e){return!!("A"===e.tagName&&e.classList.contains("monaco-button")||"DIV"===e.tagName&&e.classList.contains("monaco-button-dropdown"))||!e.classList.contains("monaco-list")&&(!!e.parentElement&&tP(e.parentElement))}class nP{get onKeyDown(){return rn.chain(this.disposables.add(new MS(this.view.domNode,"keydown")).event,(e=>e.filter((e=>!QO(e.target))).map((e=>new ja(e)))))}constructor(e,t,n){this.list=e,this.view=t,this.disposables=new Xt,this.multipleSelectionDisposables=new Xt,this.multipleSelectionSupport=n.multipleSelectionSupport,this.disposables.add(this.onKeyDown((e=>{switch(e.keyCode){case 3:return this.onEnter(e);case 16:return this.onUpArrow(e);case 18:return this.onDownArrow(e);case 11:return this.onPageUpArrow(e);case 12:return this.onPageDownArrow(e);case 9:return this.onEscape(e);case 31:this.multipleSelectionSupport&&(_e?e.metaKey:e.ctrlKey)&&this.onCtrlA(e)}})))}updateOptions(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(p(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}UO([oS],nP.prototype,"onKeyDown",null),function(e){e[e.Automatic=0]="Automatic",e[e.Trigger=1]="Trigger"}(VO||(VO={})),function(e){e[e.Idle=0]="Idle",e[e.Typing=1]="Typing"}(jO||(jO={}));const iP=new class{mightProducePrintableCharacter(e){return!(e.ctrlKey||e.metaKey||e.altKey)&&(e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30||e.keyCode>=98&&e.keyCode<=107||e.keyCode>=85&&e.keyCode<=95)}};class sP{constructor(e,t,n,i,s){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.keyboardNavigationEventFilter=i,this.delegate=s,this.enabled=!1,this.state=jO.Idle,this.mode=VO.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new Xt,this.disposables=new Xt,this.updateOptions(e.options)}updateOptions(e){var t,n;null===(t=e.typeNavigationEnabled)||void 0===t||t?this.enable():this.disable(),this.mode=null!==(n=e.typeNavigationMode)&&void 0!==n?n:VO.Automatic}enable(){if(this.enabled)return;let e=!1;const t=rn.chain(this.enabledDisposables.add(new MS(this.view.domNode,"keydown")).event,(t=>t.filter((e=>!QO(e.target))).filter((()=>this.mode===VO.Automatic||this.triggered)).map((e=>new ja(e))).filter((t=>e||this.keyboardNavigationEventFilter(t))).filter((e=>this.delegate.mightProducePrintableCharacter(e))).forEach((e=>xu(e,!0))).map((e=>e.browserEvent.key)))),n=rn.debounce(t,(()=>null),800,void 0,void 0,void 0,this.enabledDisposables);rn.reduce(rn.any(t,n),((e,t)=>null===t?null:(e||"")+t),void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t((()=>e=!0),void 0,this.enabledDisposables),n((()=>e=!1),void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const n=null===(e=this.list.options.accessibilityProvider)||void 0===e?void 0:e.getAriaLabel(this.list.element(t[0]));n&&Bm(n)}this.previouslyFocused=-1}onInput(e){if(!e)return this.state=jO.Idle,void(this.triggered=!1);const t=this.list.getFocus(),n=t.length>0?t[0]:0,i=this.state===jO.Idle?1:0;this.state=jO.Typing;for(let s=0;s<this.list.length;s++){const t=(n+s+i)%this.list.length,r=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(t)),o=r&&r.toString();if(this.list.options.typeNavigationEnabled){if("undefined"!==typeof o){if(y$(e,o))return this.previouslyFocused=n,this.list.setFocus([t]),void this.list.reveal(t);const i=P$(e,o);if(i){if(i[0].end-i[0].start>1&&1===i.length)return this.previouslyFocused=n,this.list.setFocus([t]),void this.list.reveal(t)}}}else if("undefined"===typeof o||y$(e,o))return this.previouslyFocused=n,this.list.setFocus([t]),void this.list.reveal(t)}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class rP{constructor(e,t){this.list=e,this.view=t,this.disposables=new Xt;const n=rn.chain(this.disposables.add(new MS(t.domNode,"keydown")).event,(e=>e.filter((e=>!QO(e.target))).map((e=>new ja(e))))),i=rn.chain(n,(e=>e.filter((e=>2===e.keyCode&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey))));i(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(0===t.length)return;const n=this.view.domElement(t[0]);if(!n)return;const i=n.querySelector("[tabIndex]");if(!i||!(i instanceof HTMLElement)||-1===i.tabIndex)return;const s=Dc(i).getComputedStyle(i);"hidden"!==s.visibility&&"none"!==s.display&&(e.preventDefault(),e.stopPropagation(),i.focus())}dispose(){this.disposables.dispose()}}function oP(e){return _e?e.browserEvent.metaKey:e.browserEvent.ctrlKey}function aP(e){return e.browserEvent.shiftKey}const lP={isSelectionSingleChangeEvent:oP,isSelectionRangeChangeEvent:aP};class cP{constructor(e){this.list=e,this.disposables=new Xt,this._onPointer=new un,this.onPointer=this._onPointer.event,!1!==e.options.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||lP),this.mouseSupport="undefined"===typeof e.options.mouseSupport||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(cS.addTarget(e.getHTMLElement()))),rn.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||lP))}isSelectionSingleChangeEvent(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionSingleChangeEvent(e)}isSelectionRangeChangeEvent(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionRangeChangeEvent(e)}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){ZO(e.browserEvent.target)||cu()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(QO(e.browserEvent.target)||ZO(e.browserEvent.target))return;const t="undefined"===typeof e.index?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport)return;if(QO(e.browserEvent.target)||ZO(e.browserEvent.target))return;if(e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;return"undefined"===typeof t?(this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),void this.list.setAnchor(void 0)):this.isSelectionChangeEvent(e)?this.changeSelection(e):(this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),Su(n=e.browserEvent)&&2===n.button||this.list.setSelection([t],e.browserEvent),void this._onPointer.fire(e));var n}onDoubleClick(e){if(QO(e.browserEvent.target)||ZO(e.browserEvent.target))return;if(this.isSelectionChangeEvent(e))return;if(e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if("undefined"===typeof n){const e=this.list.getFocus()[0];n=null!==e&&void 0!==e?e:t,this.list.setAnchor(n)}const i=p(Math.min(n,t),Math.max(n,t)+1),s=this.list.getSelection(),r=function(e,t){const n=e.indexOf(t);if(-1===n)return[];const i=[];let s=n-1;for(;s>=0&&e[s]===t-(n-s);)i.push(e[s--]);i.reverse(),s=n;for(;s<e.length&&e[s]===t+(s-n);)i.push(e[s++]);return i}(fP(s,[n]),n);if(0===r.length)return;const o=fP(i,function(e,t){const n=[];let i=0,s=0;for(;i<e.length||s<t.length;)if(i>=e.length)n.push(t[s++]);else if(s>=t.length)n.push(e[i++]);else{if(e[i]===t[s]){i++,s++;continue}e[i]<t[s]?n.push(e[i++]):s++}return n}(s,r));this.list.setSelection(o,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const n=this.list.getSelection(),i=n.filter((e=>e!==t));this.list.setFocus([t]),this.list.setAnchor(t),n.length===i.length?this.list.setSelection([...i,t],e.browserEvent):this.list.setSelection(i,e.browserEvent)}}dispose(){this.disposables.dispose()}}class uP{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){var t,n;const i=this.selectorSuffix&&".".concat(this.selectorSuffix),s=[];e.listBackground&&s.push(".monaco-list".concat(i," .monaco-list-rows { background: ").concat(e.listBackground,"; }")),e.listFocusBackground&&(s.push(".monaco-list".concat(i,":focus .monaco-list-row.focused { background-color: ").concat(e.listFocusBackground,"; }")),s.push(".monaco-list".concat(i,":focus .monaco-list-row.focused:hover { background-color: ").concat(e.listFocusBackground,"; }"))),e.listFocusForeground&&s.push(".monaco-list".concat(i,":focus .monaco-list-row.focused { color: ").concat(e.listFocusForeground,"; }")),e.listActiveSelectionBackground&&(s.push(".monaco-list".concat(i,":focus .monaco-list-row.selected { background-color: ").concat(e.listActiveSelectionBackground,"; }")),s.push(".monaco-list".concat(i,":focus .monaco-list-row.selected:hover { background-color: ").concat(e.listActiveSelectionBackground,"; }"))),e.listActiveSelectionForeground&&s.push(".monaco-list".concat(i,":focus .monaco-list-row.selected { color: ").concat(e.listActiveSelectionForeground,"; }")),e.listActiveSelectionIconForeground&&s.push(".monaco-list".concat(i,":focus .monaco-list-row.selected .codicon { color: ").concat(e.listActiveSelectionIconForeground,"; }")),e.listFocusAndSelectionBackground&&s.push("\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list".concat(i,":focus .monaco-list-row.selected.focused { background-color: ").concat(e.listFocusAndSelectionBackground,"; }\n\t\t\t")),e.listFocusAndSelectionForeground&&s.push("\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list".concat(i,":focus .monaco-list-row.selected.focused { color: ").concat(e.listFocusAndSelectionForeground,"; }\n\t\t\t")),e.listInactiveFocusForeground&&(s.push(".monaco-list".concat(i," .monaco-list-row.focused { color:  ").concat(e.listInactiveFocusForeground,"; }")),s.push(".monaco-list".concat(i," .monaco-list-row.focused:hover { color:  ").concat(e.listInactiveFocusForeground,"; }"))),e.listInactiveSelectionIconForeground&&s.push(".monaco-list".concat(i," .monaco-list-row.focused .codicon { color:  ").concat(e.listInactiveSelectionIconForeground,"; }")),e.listInactiveFocusBackground&&(s.push(".monaco-list".concat(i," .monaco-list-row.focused { background-color:  ").concat(e.listInactiveFocusBackground,"; }")),s.push(".monaco-list".concat(i," .monaco-list-row.focused:hover { background-color:  ").concat(e.listInactiveFocusBackground,"; }"))),e.listInactiveSelectionBackground&&(s.push(".monaco-list".concat(i," .monaco-list-row.selected { background-color:  ").concat(e.listInactiveSelectionBackground,"; }")),s.push(".monaco-list".concat(i," .monaco-list-row.selected:hover { background-color:  ").concat(e.listInactiveSelectionBackground,"; }"))),e.listInactiveSelectionForeground&&s.push(".monaco-list".concat(i," .monaco-list-row.selected { color: ").concat(e.listInactiveSelectionForeground,"; }")),e.listHoverBackground&&s.push(".monaco-list".concat(i,":not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ").concat(e.listHoverBackground,"; }")),e.listHoverForeground&&s.push(".monaco-list".concat(i,":not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ").concat(e.listHoverForeground,"; }"));const r=Wu(e.listFocusAndSelectionOutline,Wu(e.listSelectionOutline,null!==(t=e.listFocusOutline)&&void 0!==t?t:""));r&&s.push(".monaco-list".concat(i,":focus .monaco-list-row.focused.selected { outline: 1px solid ").concat(r,"; outline-offset: -1px;}")),e.listFocusOutline&&s.push("\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list".concat(i,":focus .monaco-list-row.focused { outline: 1px solid ").concat(e.listFocusOutline,"; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list").concat(i,".last-focused .monaco-list-row.focused { outline: 1px solid ").concat(e.listFocusOutline,"; outline-offset: -1px; }\n\t\t\t"));const o=Wu(e.listSelectionOutline,null!==(n=e.listInactiveFocusOutline)&&void 0!==n?n:"");o&&s.push(".monaco-list".concat(i," .monaco-list-row.focused.selected { outline: 1px dotted ").concat(o,"; outline-offset: -1px; }")),e.listSelectionOutline&&s.push(".monaco-list".concat(i," .monaco-list-row.selected { outline: 1px dotted ").concat(e.listSelectionOutline,"; outline-offset: -1px; }")),e.listInactiveFocusOutline&&s.push(".monaco-list".concat(i," .monaco-list-row.focused { outline: 1px dotted ").concat(e.listInactiveFocusOutline,"; outline-offset: -1px; }")),e.listHoverOutline&&s.push(".monaco-list".concat(i," .monaco-list-row:hover { outline: 1px dashed ").concat(e.listHoverOutline,"; outline-offset: -1px; }")),e.listDropOverBackground&&s.push("\n\t\t\t\t.monaco-list".concat(i,".drop-target,\n\t\t\t\t.monaco-list").concat(i," .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list").concat(i," .monaco-list-row.drop-target { background-color: ").concat(e.listDropOverBackground," !important; color: inherit !important; }\n\t\t\t")),e.listDropBetweenBackground&&(s.push("\n\t\t\t.monaco-list".concat(i," .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,\n\t\t\t.monaco-list").concat(i,' .monaco-list-row.drop-target-before::before {\n\t\t\t\tcontent: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ').concat(e.listDropBetweenBackground,";\n\t\t\t}")),s.push("\n\t\t\t.monaco-list".concat(i," .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,\n\t\t\t.monaco-list").concat(i,' .monaco-list-row.drop-target-after::after {\n\t\t\t\tcontent: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ').concat(e.listDropBetweenBackground,";\n\t\t\t}"))),e.tableColumnsBorder&&s.push("\n\t\t\t\t.monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ".concat(e.tableColumnsBorder,";\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: transparent;\n\t\t\t\t}\n\t\t\t")),e.tableOddRowsBackgroundColor&&s.push("\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ".concat(e.tableOddRowsBackgroundColor,";\n\t\t\t\t}\n\t\t\t")),this.styleElement.textContent=s.join("\n")}}const hP={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:rp.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:rp.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:rp.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0},dP={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI:()=>null,onDragStart(){},onDragOver:()=>!1,drop(){},dispose(){}}};function fP(e,t){const n=[];let i=0,s=0;for(;i<e.length||s<t.length;)if(i>=e.length)n.push(t[s++]);else if(s>=t.length)n.push(e[i++]);else{if(e[i]===t[s]){n.push(e[i]),i++,s++;continue}e[i]<t[s]?n.push(e[i++]):n.push(t[s++])}return n}const gP=(e,t)=>e-t;class pP{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map((t=>t.renderTemplate(e)))}renderElement(e,t,n,i){let s=0;for(const r of this.renderers)r.renderElement(e,t,n[s++],i)}disposeElement(e,t,n,i){var s;let r=0;for(const o of this.renderers)null===(s=o.disposeElement)||void 0===s||s.call(o,e,t,n[r],i),r+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class mP{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,n){const i=this.accessibilityProvider.getAriaLabel(e);i?n.setAttribute("aria-label",i):n.removeAttribute("aria-label");const s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);"number"===typeof s?n.setAttribute("aria-level","".concat(s)):n.removeAttribute("aria-level")}disposeTemplate(e){}}class bP{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var n,i;null===(i=(n=this.dnd).onDragStart)||void 0===i||i.call(n,e,t)}onDragOver(e,t,n,i,s){return this.dnd.onDragOver(e,t,n,i,s)}onDragLeave(e,t,n,i){var s,r;null===(r=(s=this.dnd).onDragLeave)||void 0===r||r.call(s,e,t,n,i)}onDragEnd(e){var t,n;null===(n=(t=this.dnd).onDragEnd)||void 0===n||n.call(t,e)}drop(e,t,n,i,s){this.dnd.drop(e,t,n,i,s)}dispose(){this.dnd.dispose()}}class _P{get onDidChangeFocus(){return rn.map(this.eventBufferer.wrapEvent(this.focus.onChange),(e=>this.toListEvent(e)),this.disposables)}get onDidChangeSelection(){return rn.map(this.eventBufferer.wrapEvent(this.selection.onChange),(e=>this.toListEvent(e)),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=rn.chain(this.disposables.add(new MS(this.view.domNode,"keydown")).event,(t=>t.map((e=>new ja(e))).filter((t=>e=58===t.keyCode||t.shiftKey&&68===t.keyCode)).map((e=>xu(e,!0))).filter((()=>!1)))),n=rn.chain(this.disposables.add(new MS(this.view.domNode,"keyup")).event,(t=>t.forEach((()=>e=!1)).map((e=>new ja(e))).filter((e=>58===e.keyCode||e.shiftKey&&68===e.keyCode)).map((e=>xu(e,!0))).map((e=>{let{browserEvent:t}=e;const n=this.getFocus(),i=n.length?n[0]:void 0;return{index:i,element:"undefined"!==typeof i?this.view.element(i):void 0,anchor:"undefined"!==typeof i?this.view.domElement(i):this.view.domNode,browserEvent:t}})))),i=rn.chain(this.view.onContextMenu,(t=>t.filter((t=>!e)).map((e=>{let{element:t,index:n,browserEvent:i}=e;return{element:t,index:n,anchor:new Ga(Dc(this.view.domNode),i),browserEvent:i}}))));return rn.any(t,n,i)}get onKeyDown(){return this.disposables.add(new MS(this.view.domNode,"keydown")).event}get onDidFocus(){return rn.signal(this.disposables.add(new MS(this.view.domNode,"focus",!0)).event)}constructor(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:dP;var r,o,a,l;this.user=e,this._options=s,this.focus=new KO("focused"),this.anchor=new KO("anchor"),this.eventBufferer=new mn,this._ariaLabel="",this.disposables=new Xt,this._onDidDispose=new un,this.onDidDispose=this._onDidDispose.event;const c=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?null===(r=this._options.accessibilityProvider)||void 0===r?void 0:r.getWidgetRole():"list";this.selection=new GO("listbox"!==c);const u=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=s.accessibilityProvider,this.accessibilityProvider&&(u.push(new mP(this.accessibilityProvider)),null===(a=(o=this.accessibilityProvider).onDidChangeActiveDescendant)||void 0===a||a.call(o,this.onDidChangeActiveDescendant,this,this.disposables)),i=i.map((e=>new pP(e.templateId,[...u,e])));const h={...s,dnd:s.dnd&&new bP(this,s.dnd)};if(this.view=this.createListView(t,n,i,h),this.view.domNode.setAttribute("role",c),s.styleController)this.styleController=s.styleController(this.view.domId);else{const e=gu(this.view.domNode);this.styleController=new uP(e,this.view.domId)}if(this.spliceable=new AO([new YO(this.focus,this.view,s.identityProvider),new YO(this.selection,this.view,s.identityProvider),new YO(this.anchor,this.view,s.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new rP(this,this.view)),("boolean"!==typeof s.keyboardSupport||s.keyboardSupport)&&(this.keyboardController=new nP(this,this.view,s),this.disposables.add(this.keyboardController)),s.keyboardNavigationLabelProvider){const e=s.keyboardNavigationDelegate||iP;this.typeNavigationController=new sP(this,this.view,s.keyboardNavigationLabelProvider,null!==(l=s.keyboardNavigationEventFilter)&&void 0!==l?l:()=>!0,e),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(s),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),!1!==this._options.multipleSelectionSupport&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,n,i){return new HO(e,t,n,i)}createMouseController(e){return new cP(this)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,n;this._options={...this._options,...e},null===(t=this.typeNavigationController)||void 0===t||t.updateOptions(this._options),void 0!==this._options.multipleSelectionController&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),null===(n=this.keyboardController)||void 0===n||n.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e<0||e>this.view.length)throw new TO(this.user,"Invalid start index: ".concat(e));if(t<0)throw new TO(this.user,"Invalid delete count: ".concat(t));0===t&&0===n.length||this.eventBufferer.bufferEvents((()=>this.spliceable.splice(e,t,n)))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new TO(this.user,"Invalid index ".concat(n));this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map((e=>this.view.element(e)))}setAnchor(e){if("undefined"!==typeof e){if(e<0||e>=this.length)throw new TO(this.user,"Invalid index ".concat(e));this.anchor.set([e])}else this.anchor.set([])}getAnchor(){return g(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return"undefined"===typeof e?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new TO(this.user,"Invalid index ".concat(n));this.focus.set(e,t)}focusNext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(0===this.length)return;const s=this.focus.get(),r=this.findNextIndex(s.length>0?s[0]+e:0,t,i);r>-1&&this.setFocus([r],n)}focusPrevious(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(0===this.length)return;const s=this.focus.get(),r=this.findPreviousIndex(s.length>0?s[0]-e:0,t,i);r>-1&&this.setFocus([r],n)}async focusNextPage(e,t){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=0===n?0:n-1;const i=this.getFocus()[0];if(i!==n&&(void 0===i||n>i)){const s=this.findPreviousIndex(n,!1,t);s>-1&&i!==s?this.setFocus([s],e):this.setFocus([n],e)}else{const s=this.view.getScrollTop();let r=s+this.view.renderHeight;n>i&&(r-=this.view.elementHeight(n)),this.view.setScrollTop(r),this.view.getScrollTop()!==s&&(this.setFocus([]),await nl(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>0;const s=i(),r=this.view.getScrollTop()+s;n=0===r?this.view.indexAt(r):this.view.indexAfter(r-1);const o=this.getFocus()[0];if(o!==n&&(void 0===o||o>=n)){const i=this.findNextIndex(n,!1,t);i>-1&&o!==i?this.setFocus([i],e):this.setFocus([n],e)}else{const n=r;this.view.setScrollTop(r-this.view.renderHeight-s),this.view.getScrollTop()+i()!==n&&(this.setFocus([]),await nl(0),await this.focusPreviousPage(e,t,i))}}focusLast(e,t){if(0===this.length)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(0===this.length)return;const i=this.findNextIndex(e,!1,n);i>-1&&this.setFocus([i],t)}findNextIndex(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;for(let i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e%=this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;for(let i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map((e=>this.view.element(e)))}reveal(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e<0||e>=this.length)throw new TO(this.user,"Invalid index ".concat(e));const i=this.view.getScrollTop(),s=this.view.elementTop(e),r=this.view.elementHeight(e);if(T(t)){const e=r-this.view.renderHeight+n;this.view.setScrollTop(e*cI(t,0,1)+s-n)}else{const e=s+r,t=i+this.view.renderHeight;s<i+n&&e>=t||(s<i+n||e>=t&&r>=this.view.renderHeight?this.view.setScrollTop(s-n):e>=t&&this.view.setScrollTop(e-this.view.renderHeight))}}getRelativeTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e<0||e>=this.length)throw new TO(this.user,"Invalid index ".concat(e));const n=this.view.getScrollTop(),i=this.view.elementTop(e),s=this.view.elementHeight(e);if(i<n+t||i+s>n+this.view.renderHeight)return null;const r=s-this.view.renderHeight+t;return Math.abs((n+t-i)/r)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent(e){let{indexes:t,browserEvent:n}=e;return{indexes:t,elements:t.map((e=>this.view.element(e))),browserEvent:n}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let n;(null===(e=this.accessibilityProvider)||void 0===e?void 0:e.getActiveDescendantId)&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",0===e.length),this.view.domNode.classList.toggle("selection-single",1===e.length),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}UO([oS],_P.prototype,"onDidChangeFocus",null),UO([oS],_P.prototype,"onDidChangeSelection",null),UO([oS],_P.prototype,"onContextMenu",null),UO([oS],_P.prototype,"onKeyDown",null),UO([oS],_P.prototype,"onDidFocus",null);const vP=Mu,yP="selectOption.entry.template";class SP{get templateId(){return yP}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=Du(e,vP(".option-text")),t.detail=Du(e,vP(".option-detail")),t.decoratorRight=Du(e,vP(".option-decorator-right")),t}renderElement(e,t,n){const i=n,s=e.text,r=e.detail,o=e.decoratorRight,a=e.isDisabled;i.text.textContent=s,i.detail.textContent=r||"",i.decoratorRight.innerText=o||"",a?i.root.classList.add("option-disabled"):i.root.classList.remove("option-disabled")}disposeTemplate(e){}}class wP extends Zt{constructor(e,t,n,i,s){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=i,this.selectBoxOptions=s||Object.create(null),"number"!==typeof this.selectBoxOptions.minBottomMargin?this.selectBoxOptions.minBottomMargin=wP.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding","string"===typeof this.selectBoxOptions.ariaLabel&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),"string"===typeof this.selectBoxOptions.ariaDescription&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new un,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(n),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}getHeight(){return 22}getTemplateId(){return yP}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=Mu(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=Du(this.selectDropDownContainer,vP(".select-box-details-pane"));const t=Du(this.selectDropDownContainer,vP(".select-box-dropdown-container-width-control")),n=Du(t,vP(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",Du(n,this.widthControlElement),this._dropDownPosition=0,this.styleElement=gu(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(zc(this.selectDropDownContainer,ku.DRAG_START,(e=>{xu(e,!0)})))}registerListeners(){let e;this._register(Hc(this.selectElement,"change",(e=>{this.selected=e.target.selectedIndex,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)}))),this._register(zc(this.selectElement,ku.CLICK,(e=>{xu(e),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()}))),this._register(zc(this.selectElement,ku.MOUSE_DOWN,(e=>{xu(e)}))),this._register(zc(this.selectElement,"touchstart",(t=>{e=this._isVisible}))),this._register(zc(this.selectElement,"touchend",(t=>{xu(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()}))),this._register(zc(this.selectElement,ku.KEY_DOWN,(e=>{const t=new ja(e);let n=!1;_e?18!==t.keyCode&&16!==t.keyCode&&10!==t.keyCode&&3!==t.keyCode||(n=!0):(18===t.keyCode&&t.altKey||16===t.keyCode&&t.altKey||10===t.keyCode||3===t.keyCode)&&(n=!0),n&&(this.showSelectDropDown(),xu(e,!0))})))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){a(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach(((e,t)=>{this.selectElement.add(this.createOption(e.text,t,e.isDisabled)),"string"===typeof e.description&&(this._hasDetails=!0)}))),void 0!==t&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;null===(e=this.selectList)||void 0===e||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ".concat(this.styles.listFocusBackground," !important; }")),this.styles.listFocusForeground&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ".concat(this.styles.listFocusForeground," !important; }")),this.styles.decoratorRightForeground&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ".concat(this.styles.decoratorRightForeground,"; }")),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(".monaco-select-box-dropdown-container { border: 1px solid ".concat(this.styles.selectBorder," } ")),e.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ".concat(this.styles.selectBorder," } ")),e.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ".concat(this.styles.selectBorder," } "))):this.styles.selectListBorder&&(e.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ".concat(this.styles.selectListBorder," } ")),e.push(".monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ".concat(this.styles.selectListBorder," } "))),this.styles.listHoverForeground&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ".concat(this.styles.listHoverForeground," !important; }")),this.styles.listHoverBackground&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ".concat(this.styles.listHoverBackground," !important; }")),this.styles.listFocusOutline&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ".concat(this.styles.listFocusOutline," !important; outline-offset: -1.6px !important; }")),this.styles.listHoverOutline&&e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ".concat(this.styles.listHoverOutline," !important; outline-offset: -1.6px !important; }")),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join("\n")}styleSelectElement(){var e,t,n;const i=null!==(e=this.styles.selectBackground)&&void 0!==e?e:"",s=null!==(t=this.styles.selectForeground)&&void 0!==t?t:"",r=null!==(n=this.styles.selectBorder)&&void 0!==n?n:"";this.selectElement.style.backgroundColor=i,this.selectElement.style.color=s,this.selectElement.style.borderColor=r}styleList(){var e,t;const n=null!==(e=this.styles.selectBackground)&&void 0!==e?e:"",i=Wu(this.styles.selectListBackground,n);this.selectDropDownListContainer.style.backgroundColor=i,this.selectionDetailsPane.style.backgroundColor=i;const s=null!==(t=this.styles.focusBorder)&&void 0!==t?t:"";this.selectDropDownContainer.style.outlineColor=s,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,n){const i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}showSelectDropDown(){this.selectionDetailsPane.innerText="",this.contextViewProvider&&!this._isVisible&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){this.contextViewProvider&&this._isVisible&&(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{try{e.removeChild(this.selectDropDownContainer)}catch(t){}}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach(((t,n)=>{this.updateDetail(n),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)})),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=Dc(this.selectElement),n=Zc(this.selectElement),i=Dc(this.selectElement).getComputedStyle(this.selectElement),s=parseFloat(i.getPropertyValue("--dropdown-padding-top"))+parseFloat(i.getPropertyValue("--dropdown-padding-bottom")),r=t.innerHeight-n.top-n.height-(this.selectBoxOptions.minBottomMargin||0),o=n.top-wP.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,a=this.selectElement.offsetWidth,l=this.setWidthControlElement(this.widthControlElement),c=Math.max(l,Math.round(a)).toString()+"px";this.selectDropDownContainer.style.width=c,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let u=this.selectList.contentHeight;this._hasDetails&&void 0===this._cachedMaxDetailsHeight&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const h=this._hasDetails?this._cachedMaxDetailsHeight:0,d=u+s+h,f=Math.floor((r-s-h)/this.getHeight()),g=Math.floor((o-s-h)/this.getHeight());if(e)return!(n.top+n.height>t.innerHeight-22||n.top<wP.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||f<1&&g<1)&&(f<wP.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&g>f&&this.options.length>f?(this._dropDownPosition=1,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownContainer.removeChild(this.selectDropDownListContainer),this.selectDropDownContainer.removeChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(n.top+n.height>t.innerHeight-22||n.top<wP.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||0===this._dropDownPosition&&f<1||1===this._dropDownPosition&&g<1)return this.hideSelectDropDown(!0),!1;if(0===this._dropDownPosition){if(this._isVisible&&f+g<1)return this.hideSelectDropDown(!0),!1;d>r&&(u=f*this.getHeight())}else d>o&&(u=g*this.getHeight());return this.selectList.layout(u),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=u+s+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=u+s+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=c,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}return!1}setWidthControlElement(e){let t=0;if(e){let n=0,i=0;this.options.forEach(((e,t)=>{const s=e.detail?e.detail.length:0,r=e.decoratorRight?e.decoratorRight.length:0,o=e.text.length+s+r;o>i&&(n=t,i=o)})),e.textContent=this.options[n].text+(this.options[n].decoratorRight?this.options[n].decoratorRight+" ":""),t=eu(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=Du(e,vP(".select-box-dropdown-list-container")),this.listRenderer=new SP,this.selectList=new _P("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:e=>{let t=e.text;return e.detail&&(t+=". ".concat(e.detail)),e.decoratorRight&&(t+=". ".concat(e.decoratorRight)),e.description&&(t+=". ".concat(e.description)),t},getWidgetAriaLabel:()=>G({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>_e?"":"option",getWidgetRole:()=>"listbox"}}),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new MS(this.selectDropDownListContainer,"keydown")),n=rn.chain(t.event,(e=>e.filter((()=>this.selectList.length>0)).map((e=>new ja(e)))));this._register(rn.chain(n,(e=>e.filter((e=>3===e.keyCode))))(this.onEnter,this)),this._register(rn.chain(n,(e=>e.filter((e=>2===e.keyCode))))(this.onEnter,this)),this._register(rn.chain(n,(e=>e.filter((e=>9===e.keyCode))))(this.onEscape,this)),this._register(rn.chain(n,(e=>e.filter((e=>16===e.keyCode))))(this.onUpArrow,this)),this._register(rn.chain(n,(e=>e.filter((e=>18===e.keyCode))))(this.onDownArrow,this)),this._register(rn.chain(n,(e=>e.filter((e=>12===e.keyCode))))(this.onPageDown,this)),this._register(rn.chain(n,(e=>e.filter((e=>11===e.keyCode))))(this.onPageUp,this)),this._register(rn.chain(n,(e=>e.filter((e=>14===e.keyCode))))(this.onHome,this)),this._register(rn.chain(n,(e=>e.filter((e=>13===e.keyCode))))(this.onEnd,this)),this._register(rn.chain(n,(e=>e.filter((e=>e.keyCode>=21&&e.keyCode<=56||e.keyCode>=85&&e.keyCode<=113))))(this.onCharacter,this)),this._register(zc(this.selectList.getHTMLElement(),ku.POINTER_UP,(e=>this.onPointerUp(e)))),this._register(this.selectList.onMouseOver((e=>"undefined"!==typeof e.index&&this.selectList.setFocus([e.index])))),this._register(this.selectList.onDidChangeFocus((e=>this.onListFocus(e)))),this._register(zc(this.selectDropDownContainer,ku.FOCUS_OUT,(e=>{this._isVisible&&!su(e.relatedTarget,this.selectDropDownContainer)&&this.onListBlur()}))),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;xu(e);const t=e.target;if(!t)return;if(t.classList.contains("slider"))return;const n=t.closest(".monaco-list-row");if(!n)return;const i=Number(n.getAttribute("data-index")),s=n.classList.contains("option-disabled");i>=0&&i<this.options.length&&!s&&(this.selected=i,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const n=e=>{for(let t=0;t<e.childNodes.length;t++){const i=e.childNodes.item(t);"img"===(i.tagName&&i.tagName.toLowerCase())?e.removeChild(i):n(i)}},i=wM({value:e,supportThemeIcons:!0},{actionHandler:t});return i.element.classList.add("select-box-description-markdown"),n(i.element),i.element}onListFocus(e){this._isVisible&&this._hasDetails&&this.updateDetail(e.indexes[0])}updateDetail(e){var t,n;this.selectionDetailsPane.innerText="";const i=this.options[e],s=null!==(t=null===i||void 0===i?void 0:i.description)&&void 0!==t?t:"",r=null!==(n=null===i||void 0===i?void 0:i.descriptionIsMarkdown)&&void 0!==n&&n;if(s){if(r){const e=i.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(s,e))}else this.selectionDetailsPane.innerText=s;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){xu(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){xu(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&(this.selectElement.title=this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){xu(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){if(this.selected>0){xu(e,!0);this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onPageUp(e){xu(e),this.selectList.focusPreviousPage(),setTimeout((()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)}),1)}onPageDown(e){xu(e),this.selectList.focusNextPage(),setTimeout((()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)}),1)}onHome(e){xu(e),this.options.length<2||(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){xu(e),this.options.length<2||(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=$n.toString(e.keyCode);let n=-1;for(let i=0;i<this.options.length-1;i++)if(n=(i+this.selected+1)%this.options.length,this.options[n].text.charAt(0).toUpperCase()===t&&!this.options[n].isDisabled){this.select(n),this.selectList.setFocus([n]),this.selectList.reveal(this.selectList.getFocus()[0]),xu(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}}wP.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,wP.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,wP.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;class kP extends Zt{constructor(e,t,n,i){super(),this.selected=0,this.selectBoxOptions=i||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box","string"===typeof this.selectBoxOptions.ariaLabel&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),"string"===typeof this.selectBoxOptions.ariaDescription&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new un),this.styles=n,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(cS.addTarget(this.selectElement)),[aS.Tap].forEach((e=>{this._register(zc(this.selectElement,e,(e=>{this.selectElement.focus()})))})),this._register(Hc(this.selectElement,"click",(e=>{xu(e,!0)}))),this._register(Hc(this.selectElement,"change",(e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})}))),this._register(Hc(this.selectElement,"keydown",(e=>{let t=!1;_e?18!==e.keyCode&&16!==e.keyCode&&10!==e.keyCode||(t=!0):(18===e.keyCode&&e.altKey||10===e.keyCode||3===e.keyCode)&&(t=!0),t&&e.stopPropagation()})))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){this.options&&a(this.options,e)||(this.options=e,this.selectElement.options.length=0,this.options.forEach(((e,t)=>{this.selectElement.add(this.createOption(e.text,t,e.isDisabled))}))),void 0!==t&&this.select(t)}select(e){0===this.options.length?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&"string"===typeof this.options[this.selected].text?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){var e,t,n;this.selectElement&&(this.selectElement.style.backgroundColor=null!==(e=this.styles.selectBackground)&&void 0!==e?e:"",this.selectElement.style.color=null!==(t=this.styles.selectForeground)&&void 0!==t?t:"",this.selectElement.style.borderColor=null!==(n=this.styles.selectBorder)&&void 0!==n?n:"")}createOption(e,t,n){const i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}}class CP extends uS{constructor(e,t,n,i,s){super(),_e&&!(null===s||void 0===s?void 0:s.useCustomDrawn)?this.selectBoxDelegate=new kP(e,t,i,s):this.selectBoxDelegate=new wP(e,t,n,i,s),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class xP extends Zt{get action(){return this._action}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.options=n,this._context=e||this,this._action=t,t instanceof co&&this._register(t.onDidChange((e=>{this.element&&this.handleActionChangeEvent(e)})))}handleActionChangeEvent(e){void 0!==e.enabled&&this.updateEnabled(),void 0!==e.checked&&this.updateChecked(),void 0!==e.class&&this.updateClass(),void 0!==e.label&&(this.updateLabel(),this.updateTooltip()),void 0!==e.tooltip&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new uo)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(cS.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,Fr&&this._register(zc(e,ku.DRAG_START,(e=>{var t;return null===(t=e.dataTransfer)||void 0===t?void 0:t.setData(EO.TEXT,this._action.label)})))),this._register(zc(t,aS.Tap,(e=>this.onClick(e,!0)))),this._register(zc(t,ku.MOUSE_DOWN,(e=>{n||xu(e,!0),this._action.enabled&&0===e.button&&t.classList.add("active")}))),_e&&this._register(zc(t,ku.CONTEXT_MENU,(e=>{0===e.button&&!0===e.ctrlKey&&this.onClick(e)}))),this._register(zc(t,ku.CLICK,(e=>{xu(e,!0),this.options&&this.options.isMenu||this.onClick(e)}))),this._register(zc(t,ku.DBLCLICK,(e=>{xu(e,!0)}))),[ku.MOUSE_UP,ku.MOUSE_OUT].forEach((e=>{this._register(zc(t,e,(e=>{xu(e),t.classList.remove("active")})))}))}onClick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n;xu(e,!0);const i=R(this._context)?(null===(n=this.options)||void 0===n?void 0:n.useEventAsContext)?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){var e;if(!this.element)return;const t=null!==(e=this.getTooltip())&&void 0!==e?e:"";this.updateAriaLabel(),this.options.hoverDelegate?(this.element.title="",this.customHover?this.customHover.update(t):(this.customHover=DO(this.options.hoverDelegate,this.element,t),this._store.add(this.customHover))):this.element.title=t}updateAriaLabel(){var e;if(this.element){const t=null!==(e=this.getTooltip())&&void 0!==e?e:"";this.element.setAttribute("aria-label",t)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class EP extends xP{constructor(e,t,n){super(e,t,n),this.options=n,this.options.icon=void 0!==n.icon&&n.icon,this.options.label=void 0===n.label||n.label,this.cssClass=""}render(e){super.render(e),O(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const e=document.createElement("span");e.classList.add("keybinding"),e.textContent=this.options.keybinding,this.element.appendChild(e)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===ho.ID?"presentation":this.options.isMenu?"menuitem":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=G({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),null!==e&&void 0!==e?e:void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):null===(e=this.label)||void 0===e||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),null===(e=this.element)||void 0===e||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),null===(t=this.element)||void 0===t||t.classList.add("disabled"))}updateAriaLabel(){var e;if(this.label){const t=null!==(e=this.getTooltip())&&void 0!==e?e:"";this.label.setAttribute("aria-label",t)}}updateChecked(){this.label&&(void 0!==this.action.checked?(this.label.classList.toggle("checked",this.action.checked),this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox")):(this.label.classList.remove("checked"),this.label.removeAttribute("aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class LP extends xP{constructor(e,t,n,i,s,r,o){super(e,t),this.selectBox=new CP(n,i,s,r,o),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect((e=>this.runAction(e.selected,e.index))))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;null===(e=this.selectBox)||void 0===e||e.focus()}blur(){var e;null===(e=this.selectBox)||void 0===e||e.blur()}render(e){this.selectBox.render(e)}}class DP extends uo{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new un),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=Du(e,Mu(".monaco-dropdown")),this._label=Du(this._element,Mu(".dropdown-label"));let n=t.labelRenderer;n||(n=e=>(e.textContent=t.label||"",null));for(const s of[ku.CLICK,ku.MOUSE_DOWN,aS.Tap])this._register(zc(this.element,s,(e=>xu(e,!0))));for(const s of[ku.MOUSE_DOWN,aS.Tap])this._register(zc(this._label,s,(e=>{Su(e)&&(e.detail>1||0!==e.button)||(this.visible?this.hide():this.show())})));this._register(zc(this._label,ku.KEY_UP,(e=>{const t=new ja(e);(t.equals(3)||t.equals(10))&&(xu(e,!0),this.visible?this.hide():this.show())})));const i=n(this._label);i&&this._register(i),this._register(cS.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class AP extends DP{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class TP extends xP{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Object.create(null);super(null,e,i),this.actionItem=null,this._onDidChangeVisibility=this._register(new un),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=i,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=Array.isArray(this.menuActionsOrProvider),n={contextMenuProvider:this.contextMenuProvider,labelRenderer:e=>{this.element=Du(e,Mu("a.action-label"));let t=[];return"string"===typeof this.options.classNames?t=this.options.classNames.split(/\s+/g).filter((e=>!!e)):this.options.classNames&&(t=this.options.classNames),t.find((e=>"icon"===e))||t.push("codicon"),this.element.classList.add(...t),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this.element.title=this._action.label||"",this.element.ariaLabel=this._action.label||"",null},menuAsChild:this.options.menuAsChild,actions:t?this.menuActionsOrProvider:void 0,actionProvider:t?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new AP(e,n)),this._register(this.dropdownMenu.onDidChangeVisibility((e=>{var t;null===(t=this.element)||void 0===t||t.setAttribute("aria-expanded","".concat(e)),this._onDidChangeVisibility.fire(e)}))),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const e=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return e.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),null!==e&&void 0!==e?e:void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;null===(e=this.dropdownMenu)||void 0===e||e.show()}updateEnabled(){var e,t;const n=!this.action.enabled;null===(e=this.actionItem)||void 0===e||e.classList.toggle("disabled",n),null===(t=this.element)||void 0===t||t.classList.toggle("disabled",n)}}var NP,IP;!function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"}(NP||(NP={})),function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"}(IP||(IP={}));class $P extends Zt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.create(null);super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new dn),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=IP.None,this.cache=new Map,this.flushDelayer=this._register(new tl($P.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal((e=>this.onDidChangeItemsExternal(e))))}onDidChangeItemsExternal(e){var t,n;this._onDidChangeStorage.pause();try{null===(t=e.changed)||void 0===t||t.forEach(((e,t)=>this.acceptExternal(t,e))),null===(n=e.deleted)||void 0===n||n.forEach((e=>this.acceptExternal(e,void 0)))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===IP.Closed)return;let n=!1;if(R(t))n=this.cache.delete(e);else{this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0)}n&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const n=this.cache.get(e);return R(n)?t:n}getBoolean(e,t){const n=this.get(e);return R(n)?t:"true"===n}getNumber(e,t){const n=this.get(e);return R(n)?t:parseInt(n,10)}async set(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.state===IP.Closed)return;if(R(t))return this.delete(e,n);const i=D(t)||Array.isArray(t)?(s=t,JSON.stringify(s,vM)):String(t);var s;return this.cache.get(e)!==i?(this.cache.set(e,i),this.pendingInserts.set(e,i),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:n}),this.doFlush()):void 0}async delete(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.state===IP.Closed)return;return this.cache.delete(e)?(this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()):void 0}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally((()=>{var e;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)null===(e=this.whenFlushedCallbacks.pop())||void 0===e||e()}))}async doFlush(e){return this.options.hint===NP.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger((()=>this.flushPending()),e)}}$P.DEFAULT_FLUSH_DELAY=100;class MP{constructor(){this.onDidChangeItemsExternal=rn.None,this.items=new Map}async updateItems(e){var t,n;null===(t=e.insert)||void 0===t||t.forEach(((e,t)=>this.items.set(t,e))),null===(n=e.delete)||void 0===n||n.forEach((e=>this.items.delete(e)))}}const RP="__$__targetStorageMarker",OP=ro("storageService");var PP;!function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"}(PP||(PP={}));class FP extends Zt{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{flushInterval:FP.DEFAULT_FLUSH_INTERVAL};super(),this.options=e,this._onDidChangeValue=this._register(new dn),this._onDidChangeTarget=this._register(new dn),this._onWillSaveState=this._register(new un),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,n){return rn.filter(this._onDidChangeValue.event,(n=>n.scope===e&&(void 0===t||n.key===t)),n)}emitDidChangeValue(e,t){const{key:n,external:i}=t;if(n===RP){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:n,target:this.getKeyTargets(e)[n],external:i})}get(e,t,n){var i;return null===(i=this.getStorage(t))||void 0===i?void 0:i.get(e,n)}getBoolean(e,t,n){var i;return null===(i=this.getStorage(t))||void 0===i?void 0:i.getBoolean(e,n)}getNumber(e,t,n){var i;return null===(i=this.getStorage(t))||void 0===i?void 0:i.getNumber(e,n)}store(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];R(t)?this.remove(e,n,s):this.withPausedEmitters((()=>{var r;this.updateKeyTarget(e,n,i),null===(r=this.getStorage(n))||void 0===r||r.set(e,t,s)}))}remove(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.withPausedEmitters((()=>{var i;this.updateKeyTarget(e,t,void 0),null===(i=this.getStorage(t))||void 0===i||i.delete(e,n)}))}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var s,r;const o=this.getKeyTargets(t);"number"===typeof n?o[e]!==n&&(o[e]=n,null===(s=this.getStorage(t))||void 0===s||s.set(RP,JSON.stringify(o),i)):"number"===typeof o[e]&&(delete o[e],null===(r=this.getStorage(t))||void 0===r||r.set(RP,JSON.stringify(o),i))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?function(e){const t=e.get(RP);if(t)try{return JSON.parse(t)}catch(n){}return Object.create(null)}(t):Object.create(null)}}FP.DEFAULT_FLUSH_INTERVAL=6e4;const BP={keybindingLabelBackground:hb(y_),keybindingLabelForeground:hb(S_),keybindingLabelBorder:hb(w_),keybindingLabelBottomBorder:hb(k_),keybindingLabelShadow:hb(Sb)},zP={buttonForeground:hb(Hb),buttonSeparator:hb(Vb),buttonBackground:hb(jb),buttonHoverBackground:hb(Ub),buttonSecondaryForeground:hb(Kb),buttonSecondaryBackground:hb(Gb),buttonSecondaryHoverBackground:hb(Yb),buttonBorder:hb(qb)},WP={progressBarBackground:hb(n_)},HP={inputActiveOptionBorder:hb(Eb),inputActiveOptionForeground:hb(Db),inputActiveOptionBackground:hb(Lb)},VP=(hb(pv),hb(bv),hb(mv),hb(d_),hb(f_),hb(Sb),hb(_b),hb(Yv),hb(Qv),hb(Xv),hb(yb),{inputBackground:hb(kb),inputForeground:hb(Cb),inputBorder:hb(xb),inputValidationInfoBorder:hb(Nb),inputValidationInfoBackground:hb(Ab),inputValidationInfoForeground:hb(Tb),inputValidationWarningBorder:hb(Mb),inputValidationWarningBackground:hb(Ib),inputValidationWarningForeground:hb($b),inputValidationErrorBorder:hb(Pb),inputValidationErrorBackground:hb(Rb),inputValidationErrorForeground:hb(Ob)}),jP={listFilterWidgetBackground:hb(av),listFilterWidgetOutline:hb(lv),listFilterWidgetNoMatchesOutline:hb(cv),listFilterWidgetShadow:hb(uv),inputBoxStyles:VP,toggleStyles:HP},UP={badgeBackground:hb(Qb),badgeForeground:hb(Xb),badgeBorder:hb(_b)},qP=(hb(Nv),hb(Tv),hb(Iv),hb(Iv),hb($v),{listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:hb(W_),listFocusForeground:hb(H_),listFocusOutline:hb(V_),listActiveSelectionBackground:hb(U_),listActiveSelectionForeground:hb(q_),listActiveSelectionIconForeground:hb(K_),listFocusAndSelectionOutline:hb(j_),listFocusAndSelectionBackground:hb(U_),listFocusAndSelectionForeground:hb(q_),listInactiveSelectionBackground:hb(G_),listInactiveSelectionIconForeground:hb(Q_),listInactiveSelectionForeground:hb(Y_),listInactiveFocusBackground:hb(X_),listInactiveFocusOutline:hb(Z_),listHoverBackground:hb(J_),listHoverForeground:hb(ev),listDropOverBackground:hb(tv),listDropBetweenBackground:hb(nv),listSelectionOutline:hb(vb),listHoverOutline:hb(vb),treeIndentGuidesStroke:hb(hv),treeInactiveIndentGuidesStroke:hb(dv),tableColumnsBorder:hb(fv),tableOddRowsBackgroundColor:hb(gv)});function KP(e){return function(e,t){const n={...t};for(const i in e){const t=e[i];n[i]=void 0!==t?hb(t):void 0}return n}(e,qP)}const GP={selectBackground:hb(Fb),selectListBackground:hb(Bb),selectForeground:hb(zb),decoratorRightForeground:hb(__),selectBorder:hb(Wb),focusBorder:hb(bb),listFocusBackground:hb(Sv),listInactiveSelectionIconForeground:hb(yv),listFocusForeground:hb(vv),listFocusOutline:(YP=vb,QP=rp.transparent.toString(),"var(".concat(ub(YP),", ").concat(QP,")")),listHoverBackground:hb(J_),listHoverForeground:hb(ev),listHoverOutline:hb(vb),selectListBorder:hb(g_),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0};var YP,QP;const XP={shadowColor:hb(Sb),borderColor:hb(wv),foregroundColor:hb(kv),backgroundColor:hb(Cv),selectionForegroundColor:hb(xv),selectionBackgroundColor:hb(Ev),selectionBorderColor:hb(Lv),separatorColor:hb(Dv),scrollbarShadow:hb(Zb),scrollbarSliderBackground:hb(Jb),scrollbarSliderHoverBackground:hb(e_),scrollbarSliderActiveBackground:hb(t_)};var ZP=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},JP=function(e,t){return function(n,i){t(n,i,e)}};function eF(e,t,n){let i,s,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>"navigation"===e,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>!1,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];Array.isArray(t)?(i=t,s=t):(i=t.primary,s=t.secondary);const l=new Set;for(const[c,u]of e){let e;r(c)?(e=i,e.length>0&&a&&e.push(new ho)):(e=s,e.length>0&&e.push(new ho));for(let t of u){n&&(t=t instanceof $a&&t.alt?t.alt:t);const i=e.push(t);t instanceof fo&&l.add({group:c,action:t,index:i-1})}}for(const{group:c,action:u,index:h}of l){const e=r(c)?i:s,t=u.actions;o(u,c,e.length)&&e.splice(h,1,...t)}}let tF=class extends EP{constructor(e,t,n,i,s,r,o,a){super(void 0,e,{icon:!(!e.class&&!e.item.icon),label:!e.class&&!e.item.icon,draggable:null===t||void 0===t?void 0:t.draggable,keybinding:null===t||void 0===t?void 0:t.keybinding,hoverDelegate:null===t||void 0===t?void 0:t.hoverDelegate}),this._keybindingService=n,this._notificationService=i,this._contextKeyService=s,this._themeService=r,this._contextMenuService=o,this._accessibilityService=a,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new Jt),this._altKey=Vu.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const n=()=>{var e;const n=!!(null===(e=this._menuItemAction.alt)||void 0===e?void 0:e.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);n!==this._wantsAltCommand&&(this._wantsAltCommand=n,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(n)),this._register(zc(e,"mouseleave",(e=>{t=!1,n()}))),this._register(zc(e,"mouseenter",(e=>{t=!0,n()}))),n()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var e;const t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),n=t&&t.getLabel(),i=this._commandAction.tooltip||this._commandAction.label;let s=n?G("titleAndKb","{0} ({1})",i,n):i;if(!this._wantsAltCommand&&(null===(e=this._menuItemAction.alt)||void 0===e?void 0:e.enabled)){const e=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,t=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),n=t&&t.getLabel(),i=n?G("titleAndKb","{0} ({1})",e,n):e;s=G("titleAndKbAndAlt","{0}\n[{1}] {2}",s,IR.modifierLabels[De].altKey,i)}return s}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:n}=this;if(!t||!n)return;const i=this._commandAction.checked&&((s=e.toggled)&&void 0!==s.condition)&&e.toggled.icon?e.toggled.icon:e.icon;var s;if(i)if(bo.isThemeIcon(i)){const e=bo.asClassNameArray(i);n.classList.add(...e),this._itemClassDispose.value=Qt((()=>{n.classList.remove(...e)}))}else n.style.backgroundImage=$y(this._themeService.getColorTheme().type)?Bu(i.dark):Bu(i.light),n.classList.add("icon"),this._itemClassDispose.value=Yt(Qt((()=>{n.style.backgroundImage="",n.classList.remove("icon")})),this._themeService.onDidColorThemeChange((()=>{this.updateClass()})))}};tF=ZP([JP(2,tk),JP(3,ZT),JP(4,ia),JP(5,QS),JP(6,r$),JP(7,Zm)],tF);let nF=class extends TP{constructor(e,t,n,i,s){var r,o,a;const l={...t,menuAsChild:null!==(r=null===t||void 0===t?void 0:t.menuAsChild)&&void 0!==r&&r,classNames:null!==(o=null===t||void 0===t?void 0:t.classNames)&&void 0!==o?o:bo.isThemeIcon(e.item.icon)?bo.asClassName(e.item.icon):void 0,keybindingProvider:null!==(a=null===t||void 0===t?void 0:t.keybindingProvider)&&void 0!==a?a:e=>n.lookupKeybinding(e.id)};super(e,{getActions:()=>e.actions},i,l),this._keybindingService=n,this._contextMenuService=i,this._themeService=s}render(e){super.render(e),O(this.element),e.classList.add("menu-entry");const t=this._action,{icon:n}=t.item;if(n&&!bo.isThemeIcon(n)){this.element.classList.add("icon");const e=()=>{this.element&&(this.element.style.backgroundImage=$y(this._themeService.getColorTheme().type)?Bu(n.dark):Bu(n.light))};e(),this._register(this._themeService.onDidColorThemeChange((()=>{e()})))}}};nF=ZP([JP(2,tk),JP(3,r$),JP(4,QS)],nF);let iF=class extends xP{constructor(e,t,n,i,s,r,o,a){var l,c,u;let h;super(null,e),this._keybindingService=n,this._notificationService=i,this._contextMenuService=s,this._menuService=r,this._instaService=o,this._storageService=a,this._container=null,this._options=t,this._storageKey="".concat(e.item.submenu.id,"_lastActionId");const d=(null===t||void 0===t?void 0:t.persistLastActionId)?a.get(this._storageKey,1):void 0;d&&(h=e.actions.find((e=>d===e.id))),h||(h=e.actions[0]),this._defaultAction=this._instaService.createInstance(tF,h,{keybinding:this._getDefaultActionKeybindingLabel(h)});const f={keybindingProvider:e=>this._keybindingService.lookupKeybinding(e.id),...t,menuAsChild:null===(l=null===t||void 0===t?void 0:t.menuAsChild)||void 0===l||l,classNames:null!==(c=null===t||void 0===t?void 0:t.classNames)&&void 0!==c?c:["codicon","codicon-chevron-down"],actionRunner:null!==(u=null===t||void 0===t?void 0:t.actionRunner)&&void 0!==u?u:new uo};this._dropdown=new TP(e,e.actions,this._contextMenuService,f),this._register(this._dropdown.actionRunner.onDidRun((e=>{e.action instanceof $a&&this.update(e.action)})))}update(e){var t;(null===(t=this._options)||void 0===t?void 0:t.persistLastActionId)&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(tF,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends uo{async runAction(e,t){await e.run(void 0)}},this._container&&this._defaultAction.render(Au(this._container,Mu(".action-container")))}_getDefaultActionKeybindingLabel(e){var t;let n;if(null===(t=this._options)||void 0===t?void 0:t.renderKeybindingWithDefaultActionLabel){const t=this._keybindingService.lookupKeybinding(e.id);t&&(n="(".concat(t.getLabel(),")"))}return n}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=Mu(".action-container");this._defaultAction.render(Du(this._container,t)),this._register(zc(t,ku.KEY_DOWN,(e=>{const t=new ja(e);t.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),t.stopPropagation())})));const n=Mu(".dropdown-action-container");this._dropdown.render(Du(this._container,n)),this._register(zc(n,ku.KEY_DOWN,(e=>{var t;const n=new ja(e);n.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),null===(t=this._defaultAction.element)||void 0===t||t.focus(),n.stopPropagation())})))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};iF=ZP([JP(2,tk),JP(3,ZT),JP(4,r$),JP(5,Aa),JP(6,so),JP(7,OP)],iF);let sF=class extends LP{constructor(e,t){super(null,e,e.actions.map((e=>({text:e.id===ho.ID?"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500":e.label,isDisabled:!e.enabled}))),0,t,GP,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex((e=>e.checked))))}render(e){super.render(e),e.style.borderColor=hb(Wb)}runAction(e,t){const n=this.action.actions[t];n&&this.actionRunner.run(n)}};sF=ZP([JP(1,s$)],sF);class rF extends Zt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,i,s,r,o,a;let l,c;switch(super(),this._actionRunnerDisposables=this._register(new Xt),this.viewItemDisposables=this._register(new tn),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new un),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new un({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new un),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new un),this.onWillRun=this._onWillRun.event,this.options=t,this._context=null!==(n=t.context)&&void 0!==n?n:null,this._orientation=null!==(i=this.options.orientation)&&void 0!==i?i:0,this._triggerKeys={keyDown:null!==(r=null===(s=this.options.triggerKeys)||void 0===s?void 0:s.keyDown)&&void 0!==r&&r,keys:null!==(a=null===(o=this.options.triggerKeys)||void 0===o?void 0:o.keys)&&void 0!==a?a:[3,10]},this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new uo,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun((e=>this._onDidRun.fire(e)))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun((e=>this._onWillRun.fire(e)))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar",!1!==t.animated&&this.domNode.classList.add("animated"),this._orientation){case 0:l=[15],c=[17];break;case 1:l=[16],c=[18],this.domNode.className+=" vertical"}this._register(zc(this.domNode,ku.KEY_DOWN,(e=>{const t=new ja(e);let n=!0;const i="number"===typeof this.focusedItem?this.viewItems[this.focusedItem]:void 0;l&&(t.equals(l[0])||t.equals(l[1]))?n=this.focusPrevious():c&&(t.equals(c[0])||t.equals(c[1]))?n=this.focusNext():t.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():t.equals(14)?n=this.focusFirst():t.equals(13)?n=this.focusLast():t.equals(2)&&i instanceof xP&&i.trapsArrowNavigation?n=this.focusNext():this.isTriggerKeyEvent(t)?this._triggerKeys.keyDown?this.doTrigger(t):this.triggerKeyDown=!0:n=!1,n&&(t.preventDefault(),t.stopPropagation())}))),this._register(zc(this.domNode,ku.KEY_UP,(e=>{const t=new ja(e);this.isTriggerKeyEvent(t)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(t)),t.preventDefault(),t.stopPropagation()):(t.equals(2)||t.equals(1026)||t.equals(16)||t.equals(18)||t.equals(15)||t.equals(17))&&this.updateFocusedItem()}))),this.focusTracker=this._register(Lu(this.domNode)),this._register(this.focusTracker.onDidBlur((()=>{cu()!==this.domNode&&su(cu(),this.domNode)||(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)}))),this._register(this.focusTracker.onDidFocus((()=>this.updateFocusedItem()))),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const e=this.viewItems.find((e=>e instanceof xP&&e.isEnabled()));e instanceof xP&&e.setFocusable(!0)}else this.viewItems.forEach((e=>{e instanceof xP&&e.setFocusable(!1)}))}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach((n=>{t=t||e.equals(n)})),t}updateFocusedItem(){var e,t;for(let n=0;n<this.actionsList.children.length;n++){const i=this.actionsList.children[n];if(su(cu(),i)){this.focusedItem=n,null===(t=null===(e=this.viewItems[this.focusedItem])||void 0===e?void 0:e.showHover)||void 0===t||t.call(e);break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach((t=>t.setActionContext(e)))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun((e=>this._onDidRun.fire(e)))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun((e=>this._onWillRun.fire(e)))),this.viewItems.forEach((t=>t.actionRunner=e))}getContainer(){return this.domNode}getAction(e){var t;if("number"===typeof e)return null===(t=this.viewItems[e])||void 0===t?void 0:t.action;if(e instanceof HTMLElement){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let t=0;t<this.actionsList.childNodes.length;t++)if(this.actionsList.childNodes[t]===e)return this.viewItems[t].action}}push(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(e)?e:[e];let i=T(t.index)?t.index:null;n.forEach((e=>{const n=document.createElement("li");let s;n.className="action-item",n.setAttribute("role","presentation");const r={hoverDelegate:this.options.hoverDelegate,...t};this.options.actionViewItemProvider&&(s=this.options.actionViewItemProvider(e,r)),s||(s=new EP(this.context,e,r)),this.options.allowContextMenu||this.viewItemDisposables.set(s,zc(n,ku.CONTEXT_MENU,(e=>{xu(e,!0)}))),s.actionRunner=this._actionRunner,s.setActionContext(this.context),s.render(n),this.focusable&&s instanceof xP&&0===this.viewItems.length&&s.setFocusable(!0),null===i||i<0||i>=this.actionsList.children.length?(this.actionsList.appendChild(n),this.viewItems.push(s)):(this.actionsList.insertBefore(n,this.actionsList.children[i]),this.viewItems.splice(i,0,s),i++)})),"number"===typeof this.focusedItem&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=Gt(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),Fc(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return 0===this.viewItems.length}focus(e){let t,n=!1;if(void 0===e?n=!0:"number"===typeof e?t=e:"boolean"===typeof e&&(n=e),n&&"undefined"===typeof this.focusedItem){const e=this.viewItems.findIndex((e=>e.isEnabled()));this.focusedItem=-1===e?void 0:e,this.updateFocus(void 0,void 0,!0)}else void 0!==t&&(this.focusedItem=t),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e){if("undefined"===typeof this.focusedItem)this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===ho.ID));return this.updateFocus(),!0}focusPrevious(e){if("undefined"===typeof this.focusedItem)this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===ho.ID));return this.updateFocus(!0),!0}updateFocus(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var i,s;"undefined"===typeof this.focusedItem&&this.actionsList.focus({preventScroll:t}),void 0!==this.previouslyFocusedItem&&this.previouslyFocusedItem!==this.focusedItem&&(null===(i=this.viewItems[this.previouslyFocusedItem])||void 0===i||i.blur());const r=void 0!==this.focusedItem?this.viewItems[this.focusedItem]:void 0;if(r){let i=!0;F(r.focus)||(i=!1),this.options.focusOnlyEnabledItems&&F(r.isEnabled)&&!r.isEnabled()&&(i=!1),r.action.id===ho.ID&&(i=!1),i?(n||this.previouslyFocusedItem!==this.focusedItem)&&(r.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),i&&(null===(s=r.showHover)||void 0===s||s.call(r))}}doTrigger(e){if("undefined"===typeof this.focusedItem)return;const t=this.viewItems[this.focusedItem];if(t instanceof xP){const n=null===t._context||void 0===t._context?e:t._context;this.run(t._action,n)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=Gt(this.viewItems),this.getContainer().remove(),super.dispose()}}const oF=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,aF=/(&amp;)?(&amp;)([^\s&])/g;var lF;!function(e){e[e.Right=0]="Right",e[e.Left=1]="Left"}(lF||(lF={}));class cF extends rF{constructor(e,t,n,i){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const s=document.createElement("div");s.classList.add("monaco-menu"),s.setAttribute("role","presentation"),super(s,{orientation:1,actionViewItemProvider:e=>this.doGetActionViewItem(e,n,r),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,..._e||ve?[10]:[]],keyDown:!0}}),this.menuStyles=i,this.menuElement=s,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,i),this._register(cS.addTarget(s)),this._register(zc(s,ku.KEY_DOWN,(e=>{new ja(e).equals(2)&&e.preventDefault()}))),n.enableMnemonics&&this._register(zc(s,ku.KEY_DOWN,(e=>{const t=e.key.toLocaleLowerCase();if(this.mnemonics.has(t)){xu(e,!0);const n=this.mnemonics.get(t);if(1===n.length&&(n[0]instanceof hF&&n[0].container&&this.focusItemByElement(n[0].container),n[0].onClick(e)),n.length>1){const e=n.shift();e&&e.container&&(this.focusItemByElement(e.container),n.push(e)),this.mnemonics.set(t,n)}}}))),ve&&this._register(zc(s,ku.KEY_DOWN,(e=>{const t=new ja(e);t.equals(14)||t.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),xu(e,!0)):(t.equals(13)||t.equals(12))&&(this.focusedItem=0,this.focusPrevious(),xu(e,!0))}))),this._register(zc(this.domNode,ku.MOUSE_OUT,(e=>{su(e.relatedTarget,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),e.stopPropagation())}))),this._register(zc(this.actionsList,ku.MOUSE_OVER,(e=>{let t=e.target;if(t&&su(t,this.actionsList)&&t!==this.actionsList){for(;t.parentElement!==this.actionsList&&null!==t.parentElement;)t=t.parentElement;if(t.classList.contains("action-item")){const e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}}))),this._register(cS.addTarget(this.actionsList)),this._register(zc(this.actionsList,aS.Tap,(e=>{let t=e.initialTarget;if(t&&su(t,this.actionsList)&&t!==this.actionsList){for(;t.parentElement!==this.actionsList&&null!==t.parentElement;)t=t.parentElement;if(t.classList.contains("action-item")){const e=this.focusedItem;this.setFocusedItem(t),e!==this.focusedItem&&this.updateFocus()}}})));const r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new DS(s,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const o=this.scrollableElement.getDomNode();o.style.position="",this.styleScrollElement(o,i),this._register(zc(s,aS.Change,(e=>{xu(e,!0);const t=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:t-e.translationY})}))),this._register(zc(o,ku.MOUSE_UP,(e=>{e.preventDefault()})));const a=Dc(e);s.style.maxHeight="".concat(Math.max(10,a.innerHeight-e.getBoundingClientRect().top-35),"px"),t=t.filter(((e,i)=>{var s;if(null===(s=n.submenuIds)||void 0===s?void 0:s.has(e.id))return console.warn("Found submenu cycle: ".concat(e.id)),!1;if(e instanceof ho){if(i===t.length-1||0===i)return!1;if(t[i-1]instanceof ho)return!1}return!0})),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter((e=>!(e instanceof dF))).forEach(((e,t,n)=>{e.updatePositionInSet(t+1,n.length)}))}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(au(e)?this.styleSheet=gu(e):(cF.globalStyleSheet||(cF.globalStyleSheet=gu()),this.styleSheet=cF.globalStyleSheet)),this.styleSheet.textContent=function(e,t){let n="\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n".concat(fF(Ti.menuSelection),"\n").concat(fF(Ti.menuSubmenu),"\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar.animated .action-item.active {\n\ttransform: scale(1.272019649, 1.272019649); /* 1.272019649 = \u221a\u03c6 */\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}");if(t){n+="\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t";const t=e.scrollbarShadow;t&&(n+="\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ".concat(t," 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ").concat(t," 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ").concat(t," 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t"));const i=e.scrollbarSliderBackground;i&&(n+="\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ".concat(i,";\n\t\t\t\t}\n\t\t\t"));const s=e.scrollbarSliderHoverBackground;s&&(n+="\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ".concat(s,";\n\t\t\t\t}\n\t\t\t"));const r=e.scrollbarSliderActiveBackground;r&&(n+="\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ".concat(r,";\n\t\t\t\t}\n\t\t\t"))}return n}(t,au(e))}styleScrollElement(e,t){var n,i;const s=null!==(n=t.foregroundColor)&&void 0!==n?n:"",r=null!==(i=t.backgroundColor)&&void 0!==i?i:"",o=t.borderColor?"1px solid ".concat(t.borderColor):"",a=t.shadowColor?"0 2px 8px ".concat(t.shadowColor):"";e.style.outline=o,e.style.borderRadius="5px",e.style.color=s,e.style.backgroundColor=r,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){if(e===this.actionsList.children[t]){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),"undefined"!==typeof this.focusedItem&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof ho)return new dF(t.context,e,{icon:!0},this.menuStyles);if(e instanceof fo){const i=new hF(e,e.actions,n,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const e=i.getMnemonic();if(e&&i.isEnabled()){let t=[];this.mnemonics.has(e)&&(t=this.mnemonics.get(e)),t.push(i),this.mnemonics.set(e,t)}}return i}{const n={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const i=t.getKeyBinding(e);if(i){const e=i.getLabel();e&&(n.keybinding=e)}}const i=new uF(t.context,e,n,this.menuStyles);if(t.enableMnemonics){const e=i.getMnemonic();if(e&&i.isEnabled()){let t=[];this.mnemonics.has(e)&&(t=this.mnemonics.get(e)),t.push(i),this.mnemonics.set(e,t)}}return i}}}class uF extends xP{constructor(e,t,n,i){if(n.isMenu=!0,super(t,t,n),this.menuStyle=i,this.options=n,this.options.icon=void 0!==n.icon&&n.icon,this.options.label=void 0===n.label||n.label,this.cssClass="",this.options.label&&n.enableMnemonics){const e=this.action.label;if(e){const t=oF.exec(e);t&&(this.mnemonic=(t[1]?t[1]:t[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new ol((()=>{this.element&&(this._register(zc(this.element,ku.MOUSE_UP,(e=>{if(xu(e,!0),Fr){if(new Ga(Dc(this.element),e).rightButton)return;this.onClick(e)}else setTimeout((()=>{this.onClick(e)}),0)}))),this._register(zc(this.element,ku.CONTEXT_MENU,(e=>{xu(e,!0)}))))}),100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=Du(this.element,Mu("a.action-menu-item")),this._action.id===ho.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts","".concat(this.mnemonic))),this.check=Du(this.item,Mu("span.menu-item-check"+bo.asCSSSelector(Ti.menuSelection))),this.check.setAttribute("role","none"),this.label=Du(this.item,Mu("span.action-label")),this.options.label&&this.options.keybinding&&(Du(this.item,Mu("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),null===(e=this.item)||void 0===e||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset","".concat(e)),this.item.setAttribute("aria-setsize","".concat(t)))}updateLabel(){var e;if(this.label&&this.options.label){Fc(this.label);let t=oM(this.action.label);if(t){const n=function(e){const t=oF,n=t.exec(e);if(!n)return e;const i=!n[1];return e.replace(t,i?"$2$3":"").trim()}(t);this.options.enableMnemonics||(t=n),this.label.setAttribute("aria-label",n.replace(/&&/g,"&"));const i=oF.exec(t);if(i){t=Ws(t),aF.lastIndex=0;let n=aF.exec(t);for(;n&&n[1];)n=aF.exec(t);const s=e=>e.replace(/&amp;&amp;/g,"&amp;");n?this.label.append(Vs(s(t.substr(0,n.index))," "),Mu("u",{"aria-hidden":"true"},n[3]),js(s(t.substr(n.index+n[0].length))," ")):this.label.innerText=s(t).trim(),null===(e=this.item)||void 0===e||e.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),void 0!==e?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,i=e&&this.menuStyle.selectionBorderColor?"1px solid ".concat(this.menuStyle.selectionBorderColor):"",s=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=null!==t&&void 0!==t?t:"",this.item.style.backgroundColor=null!==n&&void 0!==n?n:"",this.item.style.outline=i,this.item.style.outlineOffset=s),this.check&&(this.check.style.color=null!==t&&void 0!==t?t:"")}}class hF extends uF{constructor(e,t,n,i,s){super(e,e,i,s),this.submenuActions=t,this.parentData=n,this.submenuOptions=i,this.mysubmenu=null,this.submenuDisposables=this._register(new Xt),this.mouseOver=!1,this.expandDirection=i&&void 0!==i.expandDirection?i.expandDirection:lF.Right,this.showScheduler=new ol((()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))}),250),this.hideScheduler=new ol((()=>{this.element&&!su(cu(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))}),750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=Du(this.item,Mu("span.submenu-indicator"+bo.asCSSSelector(Ti.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(zc(this.element,ku.KEY_UP,(e=>{const t=new ja(e);(t.equals(17)||t.equals(3))&&(xu(e,!0),this.createSubmenu(!0))}))),this._register(zc(this.element,ku.KEY_DOWN,(e=>{const t=new ja(e);cu()===this.item&&(t.equals(17)||t.equals(3))&&xu(e,!0)}))),this._register(zc(this.element,ku.MOUSE_OVER,(e=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())}))),this._register(zc(this.element,ku.MOUSE_LEAVE,(e=>{this.mouseOver=!1}))),this._register(zc(this.element,ku.FOCUS_OUT,(e=>{this.element&&!su(cu(),this.element)&&this.hideScheduler.schedule()}))),this._register(this.parentData.parent.onScroll((()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))}))))}updateEnabled(){}onClick(e){xu(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch(Y){}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,i){const s={top:0,left:0};return s.left=lO(e.width,t.width,{position:i===lF.Right?0:1,offset:n.left,size:n.width}),s.left>=n.left&&s.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(s.left=n.left+10),n.top+=10,n.height=0),s.top=lO(e.height,t.height,{position:0,offset:n.top,size:0}),s.top+t.height===n.top&&s.top+n.height+t.height<=e.height&&(s.top+=n.height),s}createSubmenu(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=Du(this.element,Mu("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=Dc(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new cF(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new go],this.submenuOptions,this.menuStyle);const i=this.element.getBoundingClientRect(),s={top:i.top-n,left:i.left,height:i.height+2*n,width:i.width},r=this.submenuContainer.getBoundingClientRect(),o=Dc(this.element),{top:a,left:l}=this.calculateSubmenuMenuLayout(new Xc(o.innerWidth,o.innerHeight),Xc.lift(r),s,this.expandDirection);this.submenuContainer.style.left="".concat(l-r.left,"px"),this.submenuContainer.style.top="".concat(a-r.top,"px"),this.submenuDisposables.add(zc(this.submenuContainer,ku.KEY_UP,(e=>{new ja(e).equals(15)&&(xu(e,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))}))),this.submenuDisposables.add(zc(this.submenuContainer,ku.KEY_DOWN,(e=>{new ja(e).equals(15)&&xu(e,!0)}))),this.submenuDisposables.add(this.parentData.submenu.onDidCancel((()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)}))),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&(null===(t=this.item)||void 0===t||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();const e=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=null!==e&&void 0!==e?e:"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class dF extends EP{constructor(e,t,n,i){super(e,t,n),this.menuStyles=i}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?"".concat(this.menuStyles.separatorColor):"")}}function fF(e){const t=Ai()[e.id];return".codicon-".concat(e.id,":before { content: '\\").concat(t.toString(16),"'; }")}class gF{constructor(e,t,n,i){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=i,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;let n;this.focusToReturn=cu();const i=e.domForShadowRoot instanceof HTMLElement?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:i=>{var s;this.lastContainer=i;const r=e.getMenuClassName?e.getMenuClassName():"";r&&(i.className+=" "+r),this.options.blockMouse&&(this.block=i.appendChild(Mu(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",null===(s=this.blockDisposable)||void 0===s||s.dispose(),this.blockDisposable=zc(this.block,ku.MOUSE_DOWN,(e=>e.stopPropagation())));const o=new Xt,a=e.actionRunner||new uo;a.onWillRun((t=>this.onActionRun(t,!e.skipTelemetry)),this,o),a.onDidRun(this.onDidActionRun,this,o),n=new cF(i,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:a,getKeyBinding:e.getKeyBinding?e.getKeyBinding:e=>this.keybindingService.lookupKeybinding(e.id)},XP),n.onDidCancel((()=>this.contextViewService.hideContextView(!0)),null,o),n.onDidBlur((()=>this.contextViewService.hideContextView(!0)),null,o);const l=Dc(i);return o.add(zc(l,ku.BLUR,(()=>this.contextViewService.hideContextView(!0)))),o.add(zc(l,ku.MOUSE_DOWN,(e=>{if(e.defaultPrevented)return;const t=new Ga(l,e);let n=t.target;if(!t.rightButton){for(;n;){if(n===i)return;n=n.parentElement}this.contextViewService.hideContextView(!0)}}))),Yt(o,n)},focus:()=>{null===n||void 0===n||n.focus(!!e.autoSelectFirstItem)},onHide:t=>{var n,i,s;null===(n=e.onHide)||void 0===n||n.call(e,!!t),this.block&&(this.block.remove(),this.block=null),null===(i=this.blockDisposable)||void 0===i||i.dispose(),this.blockDisposable=null,this.lastContainer&&(cu()===this.lastContainer||su(cu(),this.lastContainer))&&(null===(s=this.focusToReturn)||void 0===s||s.focus()),this.lastContainer=null}},i,!!i)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!Rt(e.error)&&this.notificationService.error(e.error)}}var pF=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},mF=function(e,t){return function(n,i){t(n,i,e)}};let bF=class extends Zt{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new gF(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,n,i,s,r){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=n,this.keybindingService=i,this.menuService=s,this.contextKeyService=r,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new un),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new un)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=_F.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{var n;null===(n=e.onHide)||void 0===n||n.call(e,t),this._onDidHideContextMenu.fire()}}),Vu.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};var _F,vF;bF=pF([mF(0,Ma),mF(1,ZT),mF(2,s$),mF(3,tk),mF(4,Aa),mF(5,ia)],bF),function(e){e.transform=function(e,t,n){if(!((i=e)&&i.menuId instanceof Da))return e;var i;const{menuId:s,menuActionOptions:r,contextKeyService:o}=e;return{...e,getActions:()=>{const i=[];if(s){const e=t.createMenu(s,null!==o&&void 0!==o?o:n);!function(e,t,n,i){const s=e.getActions(t),r=Vu.getInstance();eF(s,n,r.keyStatus.altKey||(be||ve)&&r.keyStatus.shiftKey,i?e=>e===i:e=>"navigation"===e)}(e,r,i),e.dispose()}return e.getActions?ho.join(e.getActions(),i):i}}}}(_F||(_F={})),function(e){e[e.API=0]="API",e[e.USER=1]="USER"}(vF||(vF={}));var yF=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},SF=function(e,t){return function(n,i){t(n,i,e)}};let wF=class{constructor(e){this._commandService=e}async open(e,t){if(!fc(e,dc.command))return!1;if(!(null===t||void 0===t?void 0:t.allowCommands))return!0;if("string"===typeof e&&(e=fi.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path))return!0;let n=[];try{n=_M(decodeURIComponent(e.query))}catch(Y){try{n=_M(e.query)}catch(Ig){}}return Array.isArray(n)||(n=[n]),await this._commandService.executeCommand(e.path,...n),!0}};wF=yF([SF(0,_o)],wF);let kF=class{constructor(e){this._editorService=e}async open(e,t){"string"===typeof e&&(e=fi.parse(e));const{selection:n,uri:i}=function(e){let t;const n=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(e.fragment);return n&&(t={startLineNumber:parseInt(n[1]),startColumn:n[2]?parseInt(n[2]):1,endLineNumber:n[4]?parseInt(n[4]):void 0,endColumn:n[4]?n[5]?parseInt(n[5]):1:void 0},e=e.with({fragment:""})),{selection:t,uri:e}}(e);return(e=i).scheme===dc.file&&(e=pL(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:n,source:(null===t||void 0===t?void 0:t.fromUserGesture)?vF.USER:vF.API,...null===t||void 0===t?void 0:t.editorOptions}},this._editorService.getFocusedCodeEditor(),null===t||void 0===t?void 0:t.openToSide),!0}};kF=yF([SF(0,oo)],kF);let CF=class{constructor(e,t){this._openers=new Be,this._validators=new Be,this._resolvers=new Be,this._resolvedUriTargets=new Mg((e=>e.with({path:null,fragment:null,query:null}).toString())),this._externalOpeners=new Be,this._defaultExternalOpener={openExternal:async e=>(gc(e,dc.http,dc.https)?Fu(e):Ms.location.href=e,!0)},this._openers.push({open:async(e,t)=>!(!(null===t||void 0===t?void 0:t.openExternal)&&!gc(e,dc.mailto,dc.http,dc.https,dc.vsls))&&(await this._doOpenExternal(e,t),!0)}),this._openers.push(new wF(t)),this._openers.push(new kF(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){var n;const i="string"===typeof e?fi.parse(e):e,s=null!==(n=this._resolvedUriTargets.get(i))&&void 0!==n?n:e;for(const r of this._validators)if(!await r.shouldOpen(s,t))return!1;for(const r of this._openers){if(await r.open(e,t))return!0}return!1}async resolveExternalUri(e,t){for(const n of this._resolvers)try{const i=await n.resolveExternalUri(e,t);if(i)return this._resolvedUriTargets.has(i.resolved)||this._resolvedUriTargets.set(i.resolved,e),i}catch(Y){}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const n="string"===typeof e?fi.parse(e):e;let i,s;try{i=(await this.resolveExternalUri(n,t)).resolved}catch(Y){i=n}if(s="string"===typeof e&&n.toString()===i.toString()?e:encodeURI(i.toString(!0)),null===t||void 0===t?void 0:t.allowContributedOpeners){const e="string"===typeof(null===t||void 0===t?void 0:t.allowContributedOpeners)?null===t||void 0===t?void 0:t.allowContributedOpeners:void 0;for(const t of this._externalOpeners){if(await t.openExternal(s,{sourceUri:n,preferredOpenerId:e},vn.None))return!0}}return this._defaultExternalOpener.openExternal(s,{sourceUri:n},vn.None)}dispose(){this._validators.clear()}};CF=yF([SF(0,oo),SF(1,_o)],CF);const xF=ro("editorWorkerService");var EF,LF;!function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"}(EF||(EF={})),function(e){e.compare=function(e,t){return t-e};const t=Object.create(null);t[e.Error]=G("sev.error","Error"),t[e.Warning]=G("sev.warning","Warning"),t[e.Info]=G("sev.info","Info"),e.toString=function(e){return t[e]||""},e.fromSeverity=function(t){switch(t){case QT.Error:return e.Error;case QT.Warning:return e.Warning;case QT.Info:return e.Info;case QT.Ignore:return e.Hint}},e.toSeverity=function(t){switch(t){case e.Error:return QT.Error;case e.Warning:return QT.Warning;case e.Info:return QT.Info;case e.Hint:return QT.Ignore}}}(EF||(EF={})),function(e){const t="";function n(e,n){const i=[t];return e.source?i.push(e.source.replace("\xa6","\\\xa6")):i.push(t),e.code?"string"===typeof e.code?i.push(e.code.replace("\xa6","\\\xa6")):i.push(e.code.value.replace("\xa6","\\\xa6")):i.push(t),void 0!==e.severity&&null!==e.severity?i.push(EF.toString(e.severity)):i.push(t),e.message&&n?i.push(e.message.replace("\xa6","\\\xa6")):i.push(t),void 0!==e.startLineNumber&&null!==e.startLineNumber?i.push(e.startLineNumber.toString()):i.push(t),void 0!==e.startColumn&&null!==e.startColumn?i.push(e.startColumn.toString()):i.push(t),void 0!==e.endLineNumber&&null!==e.endLineNumber?i.push(e.endLineNumber.toString()):i.push(t),void 0!==e.endColumn&&null!==e.endColumn?i.push(e.endColumn.toString()):i.push(t),i.push(t),i.join("\xa6")}e.makeKey=function(e){return n(e,!0)},e.makeKeyOptionalMessage=n}(LF||(LF={}));const DF=ro("markerService");var AF=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},TF=function(e,t){return function(n,i){t(n,i,e)}};let NF=class extends Zt{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new un),this._markerDecorations=new Mg,e.getModels().forEach((e=>this._onModelAdded(e))),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach((e=>e.dispose())),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach((e=>{const t=this._markerDecorations.get(e);t&&this._updateDecorations(t)}))}_onModelAdded(e){const t=new IF(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var t;const n=this._markerDecorations.get(e.uri);n&&(n.dispose(),this._markerDecorations.delete(e.uri)),e.uri.scheme!==dc.inMemory&&e.uri.scheme!==dc.internal&&e.uri.scheme!==dc.vscode||null===(t=this._markerService)||void 0===t||t.read({resource:e.uri}).map((e=>e.owner)).forEach((t=>this._markerService.remove(t,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};NF=AF([TF(0,ao),TF(1,DF)],NF);class IF extends Zt{constructor(e){super(),this.model=e,this._map=new Pg,this._register(Qt((()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()})))}update(e){const{added:t,removed:n}=function(e,t){const n=[],i=[];for(const s of e)t.has(s)||n.push(s);for(const s of t)e.has(s)||i.push(s);return{removed:n,added:i}}(new Set(this._map.keys()),new Set(e));if(0===t.length&&0===n.length)return!1;const i=n.map((e=>this._map.get(e))),s=t.map((e=>({range:this._createDecorationRange(this.model,e),options:this._createDecorationOption(e)}))),r=this.model.deltaDecorations(i,s);for(const o of n)this._map.delete(o);for(let o=0;o<r.length;o++)this._map.set(t[o],r[o]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let n=xi.lift(t);if(t.severity!==EF.Hint||this._hasMarkerTag(t,1)||this._hasMarkerTag(t,2)||(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),n=e.validateRange(n),n.isEmpty()){const t=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(1===t||n.endColumn>=t)return n;const i=e.getWordAtPosition(n.getStartPosition());i&&(n=new xi(n.startLineNumber,i.startColumn,n.endLineNumber,i.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&1===t.startColumn&&n.startLineNumber===n.endLineNumber){const i=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);i<n.endColumn&&(n=new xi(n.startLineNumber,i,n.endLineNumber,n.endColumn),t.startColumn=i)}return n}_createDecorationOption(e){let t,n,i,s,r;switch(e.severity){case EF.Hint:t=this._hasMarkerTag(e,2)?void 0:this._hasMarkerTag(e,1)?"squiggly-unnecessary":"squiggly-hint",i=0;break;case EF.Info:t="squiggly-info",n=XS(Nw),i=10,r={color:XS(jv),position:Af.Inline};break;case EF.Warning:t="squiggly-warning",n=XS(Tw),i=20,r={color:XS(Uv),position:Af.Inline};break;case EF.Error:default:t="squiggly-error",n=XS(Aw),i=30,r={color:XS(qv),position:Af.Inline}}return e.tags&&(-1!==e.tags.indexOf(1)&&(s="squiggly-inline-unnecessary"),-1!==e.tags.indexOf(2)&&(s="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:Lf.Right},minimap:r,zIndex:i,inlineClassName:s}}_hasMarkerTag(e,t){return!!e.tags&&e.tags.indexOf(t)>=0}}var $F,MF=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},RF=function(e,t){return function(n,i){t(n,i,e)}};function OF(e){return e.toString()}class PF{constructor(e,t,n){this.model=e,this._modelEventListeners=new Xt,this.model=e,this._modelEventListeners.add(e.onWillDispose((()=>t(e)))),this._modelEventListeners.add(e.onDidChangeLanguage((t=>n(e,t))))}dispose(){this._modelEventListeners.dispose()}}const FF=ve||_e?1:2;class BF{constructor(e,t,n,i,s,r,o,a){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=i,this.heapSize=s,this.sha1=r,this.versionId=o,this.alternativeVersionId=a}}let zF=$F=class extends Zt{constructor(e,t,n,i,s){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=n,this._languageService=i,this._languageConfigurationService=s,this._onModelAdded=this._register(new un),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new un),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new un),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration((e=>this._updateModelOptions(e)))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var n;let i=Oe.tabSize;if(e.editor&&"undefined"!==typeof e.editor.tabSize){const t=parseInt(e.editor.tabSize,10);isNaN(t)||(i=t),i<1&&(i=1)}let s="tabSize";if(e.editor&&"undefined"!==typeof e.editor.indentSize&&"tabSize"!==e.editor.indentSize){const t=parseInt(e.editor.indentSize,10);isNaN(t)||(s=Math.max(t,1))}let r=Oe.insertSpaces;e.editor&&"undefined"!==typeof e.editor.insertSpaces&&(r="false"!==e.editor.insertSpaces&&Boolean(e.editor.insertSpaces));let o=FF;const a=e.eol;"\r\n"===a?o=2:"\n"===a&&(o=1);let l=Oe.trimAutoWhitespace;e.editor&&"undefined"!==typeof e.editor.trimAutoWhitespace&&(l="false"!==e.editor.trimAutoWhitespace&&Boolean(e.editor.trimAutoWhitespace));let c=Oe.detectIndentation;e.editor&&"undefined"!==typeof e.editor.detectIndentation&&(c="false"!==e.editor.detectIndentation&&Boolean(e.editor.detectIndentation));let u=Oe.largeFileOptimizations;e.editor&&"undefined"!==typeof e.editor.largeFileOptimizations&&(u="false"!==e.editor.largeFileOptimizations&&Boolean(e.editor.largeFileOptimizations));let h=Oe.bracketPairColorizationOptions;return(null===(n=e.editor)||void 0===n?void 0:n.bracketPairColorization)&&"object"===typeof e.editor.bracketPairColorization&&(h={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:i,indentSize:s,insertSpaces:r,detectIndentation:c,defaultEOL:o,trimAutoWhitespace:l,largeFileOptimizations:u,bracketPairColorizationOptions:h}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&"string"===typeof n&&"auto"!==n?n:3===De||2===De?"\n":"\r\n"}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return"boolean"!==typeof e||e}getCreationOptions(e,t,n){const i="string"===typeof e?e:e.languageId;let s=this._modelCreationOptionsByLanguageAndResource[i+t];if(!s){const e=this._configurationService.getValue("editor",{overrideIdentifier:i,resource:t}),r=this._getEOL(t,i);s=$F._readModelOptions({editor:e,eol:r},n),this._modelCreationOptionsByLanguageAndResource[i+t]=s}return s}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const n=Object.keys(this._models);for(let i=0,s=n.length;i<s;i++){const s=n[i],r=this._models[s],o=r.model.getLanguageId(),a=r.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:o,resource:a})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:o,resource:a}))continue;const l=t[o+a],c=this.getCreationOptions(o,a,r.model.isForSimpleWidget);$F._setModelOptionsForModel(r.model,c,l)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&1===e.getLineCount()&&e.setEOL(1===t.defaultEOL?0:1),n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&j(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions)||(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(OF(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(OF(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(OF(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach((e=>{e.sharesUndoRedoStack||t.push(e)})),t.sort(((e,t)=>e.time-t.time));t.length>0&&this._disposedModelsHeapSize>e;){const e=t.shift();this._removeDisposedModel(e.uri),null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,i){const s=this.getCreationOptions(t,n,i),r=new uA(e,t,s,n,this._undoRedoService,this._languageService,this._languageConfigurationService);if(n&&this._disposedModels.has(OF(n))){const e=this._removeDisposedModel(n),t=this._undoRedoService.getElements(n),i=this._getSHA1Computer(),s=!!i.canComputeSHA1(r)&&i.computeSHA1(r)===e.sha1;if(s||e.sharesUndoRedoStack){for(const e of t.past)xL(e)&&e.matchesResource(n)&&e.setModel(r);for(const e of t.future)xL(e)&&e.matchesResource(n)&&e.setModel(r);this._undoRedoService.setElementsValidFlag(n,!0,(e=>xL(e)&&e.matchesResource(n))),s&&(r._overwriteVersionId(e.versionId),r._overwriteAlternativeVersionId(e.alternativeVersionId),r._overwriteInitialUndoRedoSnapshot(e.initialUndoRedoSnapshot))}else null!==e.initialUndoRedoSnapshot&&this._undoRedoService.restoreSnapshot(e.initialUndoRedoSnapshot)}const o=OF(r.uri);if(this._models[o])throw new Error("ModelService: Cannot add model because it already exists!");const a=new PF(r,(e=>this._onWillDispose(e)),((e,t)=>this._onDidChangeLanguage(e,t)));return this._models[o]=a,a}createModel(e,t,n){let i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return i=t?this._createModelData(e,t,n,s):this._createModelData(e,Pd,n,s),this._onModelAdded.fire(i.model),i.model}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(this._models[i].model)}return e}getModel(e){const t=OF(e),n=this._models[t];return n?n.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===dc.file||e.scheme===dc.vscodeRemote||e.scheme===dc.vscodeUserData||e.scheme===dc.vscodeNotebookCell||"fake-fs"===e.scheme}_onWillDispose(e){const t=OF(e.uri),n=this._models[t],i=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let s=!1,r=0;if(i||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const t=this._undoRedoService.getElements(e.uri);if(t.past.length>0||t.future.length>0){for(const n of t.past)xL(n)&&n.matchesResource(e.uri)&&(s=!0,r+=n.heapSize(e.uri),n.setModel(e.uri));for(const n of t.future)xL(n)&&n.matchesResource(e.uri)&&(s=!0,r+=n.heapSize(e.uri),n.setModel(e.uri))}}const o=$F.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,a=this._getSHA1Computer();if(s)if(i||!(r>o)&&a.canComputeSHA1(e))this._ensureDisposedModelsHeapSize(o-r),this._undoRedoService.setElementsValidFlag(e.uri,!1,(t=>xL(t)&&t.matchesResource(e.uri))),this._insertDisposedModel(new BF(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),i,r,a.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else{const e=n.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}else if(!i){const e=n.model.getInitialUndoRedoSnapshot();null!==e&&this._undoRedoService.restoreSnapshot(e)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,i=e.getLanguageId(),s=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),r=this.getCreationOptions(i,e.uri,e.isForSimpleWidget);$F._setModelOptionsForModel(e,r,s),this._onModelModeChanged.fire({model:e,oldLanguageId:n})}_getSHA1Computer(){return new WF}};zF.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20971520,zF=$F=MF([RF(0,od),RF(1,bp),RF(2,JD),RF(3,dd),RF(4,qd)],zF);class WF{canComputeSHA1(e){return e.getValueLength()<=WF.MAX_MODEL_SIZE}computeSHA1(e){const t=new Ec,n=e.createSnapshot();let i;for(;i=n.read();)t.update(i);return t.digest()}}WF.MAX_MODEL_SIZE=10485760;class HF{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:Zt.None}}renderElement(e,t,n,i){var s;if(null===(s=n.disposable)||void 0===s||s.dispose(),!n.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,n.data,i);const o=new Sn,a=r.resolve(e,o.token);n.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then((t=>this.renderer.renderElement(t,e,n.data,i)))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class VF{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}class jF{constructor(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const r=()=>this.model,o=i.map((e=>new HF(e,r)));this.list=new _P(e,t,n,o,function(e,t){return{...t,accessibilityProvider:t.accessibilityProvider&&new VF(e,t.accessibilityProvider)}}(r,s))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return rn.map(this.list.onMouseDblClick,(e=>{let{element:t,index:n,browserEvent:i}=e;return{element:void 0===t?void 0:this._model.get(t),index:n,browserEvent:i}}))}get onPointer(){return rn.map(this.list.onPointer,(e=>{let{element:t,index:n,browserEvent:i}=e;return{element:void 0===t?void 0:this._model.get(t),index:n,browserEvent:i}}))}get onDidChangeSelection(){return rn.map(this.list.onDidChangeSelection,(e=>{let{elements:t,indexes:n,browserEvent:i}=e;return{elements:t.map((e=>this._model.get(e))),indexes:n,browserEvent:i}}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,p(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map((e=>this.model.get(e)))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var UF=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};var qF;!function(e){e.North="north",e.South="south",e.East="east",e.West="west"}(qF||(qF={}));const KF=new un;const GF=new un;class YF{constructor(e){this.el=e,this.disposables=new Xt}get onPointerMove(){return this.disposables.add(new MS(Dc(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new MS(Dc(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}UF([oS],YF.prototype,"onPointerMove",null),UF([oS],YF.prototype,"onPointerUp",null);class QF{get onPointerMove(){return this.disposables.add(new MS(this.el,aS.Change)).event}get onPointerUp(){return this.disposables.add(new MS(this.el,aS.End)).event}constructor(e){this.el=e,this.disposables=new Xt}dispose(){this.disposables.dispose()}}UF([oS],QF.prototype,"onPointerMove",null),UF([oS],QF.prototype,"onPointerUp",null);class XF{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}UF([oS],XF.prototype,"onPointerMove",null),UF([oS],XF.prototype,"onPointerUp",null);const ZF="pointer-events-disabled";class JF extends Zt{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",0===e),this.el.classList.toggle("minimum",1===e),this.el.classList.toggle("maximum",2===e),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=t=>{this.orthogonalStartDragHandleDisposables.clear(),0!==t&&(this._orthogonalStartDragHandle=Du(this.el,Mu(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(Qt((()=>this._orthogonalStartDragHandle.remove()))),this.orthogonalStartDragHandleDisposables.add(new MS(this._orthogonalStartDragHandle,"mouseenter")).event((()=>JF.onMouseEnter(e)),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new MS(this._orthogonalStartDragHandle,"mouseleave")).event((()=>JF.onMouseLeave(e)),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=t=>{this.orthogonalEndDragHandleDisposables.clear(),0!==t&&(this._orthogonalEndDragHandle=Du(this.el,Mu(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(Qt((()=>this._orthogonalEndDragHandle.remove()))),this.orthogonalEndDragHandleDisposables.add(new MS(this._orthogonalEndDragHandle,"mouseenter")).event((()=>JF.onMouseEnter(e)),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new MS(this._orthogonalEndDragHandle,"mouseleave")).event((()=>JF.onMouseLeave(e)),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,n){super(),this.hoverDelay=300,this.hoverDelayer=this._register(new el(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new un),this._onDidStart=this._register(new un),this._onDidChange=this._register(new un),this._onDidReset=this._register(new un),this._onDidEnd=this._register(new un),this.orthogonalStartSashDisposables=this._register(new Xt),this.orthogonalStartDragHandleDisposables=this._register(new Xt),this.orthogonalEndSashDisposables=this._register(new Xt),this.orthogonalEndDragHandleDisposables=this._register(new Xt),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=Du(e,Mu(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add("orthogonal-edge-".concat(n.orthogonalEdge)),_e&&this.el.classList.add("mac");const i=this._register(new MS(this.el,"mousedown")).event;this._register(i((t=>this.onPointerStart(t,new YF(e))),this));const s=this._register(new MS(this.el,"dblclick")).event;this._register(s(this.onPointerDoublePress,this));const r=this._register(new MS(this.el,"mouseenter")).event;this._register(r((()=>JF.onMouseEnter(this))));const o=this._register(new MS(this.el,"mouseleave")).event;this._register(o((()=>JF.onMouseLeave(this)))),this._register(cS.addTarget(this.el));const a=this._register(new MS(this.el,aS.Start)).event;this._register(a((e=>this.onPointerStart(e,new QF(this.el))),this));const l=this._register(new MS(this.el,aS.Tap)).event;let c;this._register(l((e=>{if(c)return clearTimeout(c),c=void 0,void this.onPointerDoublePress(e);clearTimeout(c),c=setTimeout((()=>c=void 0),250)}),this)),"number"===typeof n.size?(this.size=n.size,0===n.orientation?this.el.style.width="".concat(this.size,"px"):this.el.style.height="".concat(this.size,"px")):(this.size=4,this._register(KF.event((e=>{this.size=e,this.layout()})))),this._register(GF.event((e=>this.hoverDelay=e))),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,1===this.orientation?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",false),this.layout()}onPointerStart(e,t){xu(e);let n=!1;if(!e.__orthogonalSashEvent){const i=this.getOrthogonalSash(e);i&&(n=!0,e.__orthogonalSashEvent=!0,i.onPointerStart(e,new XF(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new XF(t))),!this.state)return;const i=this.el.ownerDocument.getElementsByTagName("iframe");for(const h of i)h.classList.add(ZF);const s=e.pageX,r=e.pageY,o=e.altKey,a={startX:s,currentX:s,startY:r,currentY:r,altKey:o};this.el.classList.add("active"),this._onDidStart.fire(a);const l=gu(this.el),c=()=>{let e="";e=n?"all-scroll":1===this.orientation?1===this.state?"s-resize":2===this.state?"n-resize":_e?"row-resize":"ns-resize":1===this.state?"e-resize":2===this.state?"w-resize":_e?"col-resize":"ew-resize",l.textContent="* { cursor: ".concat(e," !important; }")},u=new Xt;c(),n||this.onDidEnablementChange.event(c,null,u);t.onPointerMove((e=>{xu(e,!1);const t={startX:s,currentX:e.pageX,startY:r,currentY:e.pageY,altKey:o};this._onDidChange.fire(t)}),null,u),t.onPointerUp((e=>{xu(e,!1),this.el.removeChild(l),this.el.classList.remove("active"),this._onDidEnd.fire(),u.dispose();for(const t of i)t.classList.remove(ZF)}),null,u),u.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger((()=>e.el.classList.add("hover")),e.hoverDelay).then(void 0,(()=>{})),!t&&e.linkedSash&&JF.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&JF.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){JF.onMouseLeave(this)}layout(){if(0===this.orientation){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){var t;const n=null!==(t=e.initialTarget)&&void 0!==t?t:e.target;if(n&&n instanceof HTMLElement)return n.classList.contains("orthogonal-drag-handle")?n.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash:void 0}dispose(){super.dispose(),this.el.remove()}}const eB={separatorBorder:rp.transparent};class tB{set size(e){this._size=e}get size(){return this._size}get visible(){return"undefined"===typeof this._cachedVisibleSize}setVisible(e,t){var n,i;if(e!==this.visible){e?(this.size=cI(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize="number"===typeof t?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{null===(i=(n=this.view).setVisible)||void 0===i||i.call(n,e)}catch(zY){console.error("Splitview: Failed to set visible view"),console.error(zY)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){var e;return null===(e=this.view.proportionalLayout)||void 0===e||e}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,n,i){this.container=e,this.view=t,this.disposable=i,this._cachedVisibleSize=void 0,"number"===typeof n?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(zY){console.error("Splitview: Failed to layout view"),console.error(zY)}}dispose(){this.disposable.dispose()}}class nB extends tB{layoutContainer(e){this.container.style.top="".concat(e,"px"),this.container.style.height="".concat(this.size,"px")}}class iB extends tB{layoutContainer(e){this.container.style.left="".concat(e,"px"),this.container.style.width="".concat(this.size,"px")}}var sB,rB;!function(e){e[e.Idle=0]="Idle",e[e.Busy=1]="Busy"}(sB||(sB={})),function(e){e.Distribute={type:"distribute"},e.Split=function(e){return{type:"split",index:e}},e.Auto=function(e){return{type:"auto",index:e}},e.Invisible=function(e){return{type:"invisible",cachedVisibleSize:e}}}(rB||(rB={}));class oB extends Zt{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,i,s,r,o;super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=sB.Idle,this._onDidSashChange=this._register(new un),this._onDidSashReset=this._register(new un),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=null!==(n=t.orientation)&&void 0!==n?n:0,this.inverseAltBehavior=null!==(i=t.inverseAltBehavior)&&void 0!==i&&i,this.proportionalLayout=null===(s=t.proportionalLayout)||void 0===s||s,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(0===this.orientation?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=Du(this.el,Mu(".sash-container")),this.viewContainer=Mu(".split-view-container"),this.scrollable=this._register(new vS({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:e=>Uc(Dc(this.el),e)})),this.scrollableElement=this._register(new LS(this.viewContainer,{vertical:0===this.orientation?null!==(r=t.scrollbarVisibility)&&void 0!==r?r:1:2,horizontal:1===this.orientation?null!==(o=t.scrollbarVisibility)&&void 0!==o?o:1:2},this.scrollable));const a=this._register(new MS(this.viewContainer,"scroll")).event;this._register(a((e=>{const t=this.scrollableElement.getScrollPosition(),n=Math.abs(this.viewContainer.scrollLeft-t.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,i=Math.abs(this.viewContainer.scrollTop-t.scrollTop)<=1?void 0:this.viewContainer.scrollTop;void 0===n&&void 0===i||this.scrollableElement.setScrollPosition({scrollLeft:n,scrollTop:i})}))),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll((e=>{e.scrollTopChanged&&(this.viewContainer.scrollTop=e.scrollTop),e.scrollLeftChanged&&(this.viewContainer.scrollLeft=e.scrollLeft)}))),Du(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||eB),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach(((e,t)=>{const n=$(e.visible)||e.visible?e.size:{type:"invisible",cachedVisibleSize:e.size},i=e.view;this.doAddView(i,n,t,!0)})),this._contentSize=this.viewItems.reduce(((e,t)=>e+t.size),0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.viewItems.length,i=arguments.length>3?arguments[3]:void 0;this.doAddView(e,t,n,i)}layout(e,t){const n=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let t=0;for(let n=0;n<this.viewItems.length;n++){const i=this.viewItems[n],s=this.proportions[n];"number"===typeof s?t+=s:e-=i.size}for(let n=0;n<this.viewItems.length;n++){const i=this.viewItems[n],s=this.proportions[n];"number"===typeof s&&t>0&&(i.size=cI(Math.round(s*e/t),i.minimumSize,i.maximumSize))}}else{const t=p(this.viewItems.length),i=t.filter((e=>1===this.viewItems[e].priority)),s=t.filter((e=>2===this.viewItems[e].priority));this.resize(this.viewItems.length-1,e-n,void 0,i,s)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map((e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0)))}onSashStart(e){let{sash:t,start:n,alt:i}=e;for(const a of this.viewItems)a.enabled=!1;const s=this.sashItems.findIndex((e=>e.sash===t)),r=Yt(zc(this.el.ownerDocument.body,"keydown",(e=>o(this.sashDragState.current,e.altKey))),zc(this.el.ownerDocument.body,"keyup",(()=>o(this.sashDragState.current,!1)))),o=(e,t)=>{const n=this.viewItems.map((e=>e.size));let i,o,a=Number.NEGATIVE_INFINITY,l=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(t=!t),t){if(s===this.sashItems.length-1){const e=this.viewItems[s];a=(e.minimumSize-e.size)/2,l=(e.maximumSize-e.size)/2}else{const e=this.viewItems[s+1];a=(e.size-e.maximumSize)/2,l=(e.size-e.minimumSize)/2}}if(!t){const e=p(s,-1),t=p(s+1,this.viewItems.length),r=e.reduce(((e,t)=>e+(this.viewItems[t].minimumSize-n[t])),0),a=e.reduce(((e,t)=>e+(this.viewItems[t].viewMaximumSize-n[t])),0),l=0===t.length?Number.POSITIVE_INFINITY:t.reduce(((e,t)=>e+(n[t]-this.viewItems[t].minimumSize)),0),c=0===t.length?Number.NEGATIVE_INFINITY:t.reduce(((e,t)=>e+(n[t]-this.viewItems[t].viewMaximumSize)),0),u=Math.max(r,c),h=Math.min(l,a),d=this.findFirstSnapIndex(e),f=this.findFirstSnapIndex(t);if("number"===typeof d){const e=this.viewItems[d],t=Math.floor(e.viewMinimumSize/2);i={index:d,limitDelta:e.visible?u-t:u+t,size:e.size}}if("number"===typeof f){const e=this.viewItems[f],t=Math.floor(e.viewMinimumSize/2);o={index:f,limitDelta:e.visible?h+t:h-t,size:e.size}}}this.sashDragState={start:e,current:e,index:s,sizes:n,minDelta:a,maxDelta:l,alt:t,snapBefore:i,snapAfter:o,disposable:r}};o(n,i)}onSashChange(e){let{current:t}=e;const{index:n,start:i,sizes:s,alt:r,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=t;const u=t-i,h=this.resize(n,u,s,void 0,void 0,o,a,l,c);if(r){const e=n===this.sashItems.length-1,t=this.viewItems.map((e=>e.size)),i=e?n:n+1,s=this.viewItems[i],r=s.size-s.maximumSize,o=s.size-s.minimumSize,a=e?n-1:n+1;this.resize(a,-h,t,void 0,void 0,r,o)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=cI(t="number"===typeof t?t:e.size,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==sB.Idle)throw new Error("Cant modify splitview");this.state=sB.Busy;try{const n=p(this.viewItems.length).filter((t=>t!==e)),i=[...n.filter((e=>1===this.viewItems[e].priority)),e],s=n.filter((e=>2===this.viewItems[e].priority)),r=this.viewItems[e];t=cI(t=Math.round(t),r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(i,s)}finally{this.state=sB.Idle}}}distributeViewSizes(){const e=[];let t=0;for(const o of this.viewItems)o.maximumSize-o.minimumSize>0&&(e.push(o),t+=o.size);const n=Math.floor(t/e.length);for(const o of e)o.size=cI(n,o.minimumSize,o.maximumSize);const i=p(this.viewItems.length),s=i.filter((e=>1===this.viewItems[e].priority)),r=i.filter((e=>2===this.viewItems[e].priority));this.relayout(s,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.viewItems.length,i=arguments.length>3?arguments[3]:void 0;if(this.state!==sB.Idle)throw new Error("Cant modify splitview");this.state=sB.Busy;try{const s=Mu(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(s):this.viewContainer.insertBefore(s,this.viewContainer.children.item(n));const r=e.onDidChange((e=>this.onViewChange(l,e))),o=Yt(r,Qt((()=>this.viewContainer.removeChild(s))));let a;"number"===typeof t?a=t:("auto"===t.type&&(t=this.areViewsDistributed()?{type:"distribute"}:{type:"split",index:t.index}),a="split"===t.type?this.getViewSize(t.index)/2:"invisible"===t.type?{cachedVisibleSize:t.cachedVisibleSize}:e.minimumSize);const l=0===this.orientation?new nB(s,e,a,o):new iB(s,e,a,o);if(this.viewItems.splice(n,0,l),this.viewItems.length>1){const e={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},t=0===this.orientation?new JF(this.sashContainer,{getHorizontalSashTop:e=>this.getSashPosition(e),getHorizontalSashWidth:this.getSashOrthogonalSize},{...e,orientation:1}):new JF(this.sashContainer,{getVerticalSashLeft:e=>this.getSashPosition(e),getVerticalSashHeight:this.getSashOrthogonalSize},{...e,orientation:0}),i=0===this.orientation?e=>({sash:t,start:e.startY,current:e.currentY,alt:e.altKey}):e=>({sash:t,start:e.startX,current:e.currentX,alt:e.altKey}),s=rn.map(t.onDidStart,i)(this.onSashStart,this),r=rn.map(t.onDidChange,i)(this.onSashChange,this),o=rn.map(t.onDidEnd,(()=>this.sashItems.findIndex((e=>e.sash===t)))),a=o(this.onSashEnd,this),l=t.onDidReset((()=>{const e=this.sashItems.findIndex((e=>e.sash===t)),n=p(e,-1),i=p(e+1,this.viewItems.length),s=this.findFirstSnapIndex(n),r=this.findFirstSnapIndex(i);("number"!==typeof s||this.viewItems[s].visible)&&("number"!==typeof r||this.viewItems[r].visible)&&this._onDidSashReset.fire(e)})),c=Yt(s,r,a,l,t),u={sash:t,disposable:c};this.sashItems.splice(n-1,0,u)}let c;s.appendChild(e.element),"number"!==typeof t&&"split"===t.type&&(c=[t.index]),i||this.relayout([n],c),i||"number"===typeof t||"distribute"!==t.type||this.distributeViewSizes()}finally{this.state=sB.Idle}}relayout(e,t){const n=this.viewItems.reduce(((e,t)=>e+t.size),0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.viewItems.map((e=>e.size)),i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Number.NEGATIVE_INFINITY,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Number.POSITIVE_INFINITY,a=arguments.length>7?arguments[7]:void 0,l=arguments.length>8?arguments[8]:void 0;if(e<0||e>=this.viewItems.length)return 0;const c=p(e,-1),u=p(e+1,this.viewItems.length);if(s)for(const p of s)b(c,p),b(u,p);if(i)for(const p of i)_(c,p),_(u,p);const h=c.map((e=>this.viewItems[e])),d=c.map((e=>n[e])),f=u.map((e=>this.viewItems[e])),g=u.map((e=>n[e])),m=c.reduce(((e,t)=>e+(this.viewItems[t].minimumSize-n[t])),0),v=c.reduce(((e,t)=>e+(this.viewItems[t].maximumSize-n[t])),0),y=0===u.length?Number.POSITIVE_INFINITY:u.reduce(((e,t)=>e+(n[t]-this.viewItems[t].minimumSize)),0),S=0===u.length?Number.NEGATIVE_INFINITY:u.reduce(((e,t)=>e+(n[t]-this.viewItems[t].maximumSize)),0),w=Math.max(m,S,r),k=Math.min(y,v,o);let C=!1;if(a){const e=this.viewItems[a.index],n=t>=a.limitDelta;C=n!==e.visible,e.setVisible(n,a.size)}if(!C&&l){const e=this.viewItems[l.index],n=t<l.limitDelta;C=n!==e.visible,e.setVisible(n,l.size)}if(C)return this.resize(e,t,n,i,s,r,o);for(let p=0,b=t=cI(t,w,k);p<h.length;p++){const e=h[p],t=cI(d[p]+b,e.minimumSize,e.maximumSize);b-=t-d[p],e.size=t}for(let p=0,b=t;p<f.length;p++){const e=f[p],t=cI(g[p]-b,e.minimumSize,e.maximumSize);b+=t-g[p],e.size=t}return t}distributeEmptySpace(e){const t=this.viewItems.reduce(((e,t)=>e+t.size),0);let n=this.size-t;const i=p(this.viewItems.length-1,-1),s=i.filter((e=>1===this.viewItems[e].priority)),r=i.filter((e=>2===this.viewItems[e].priority));for(const o of r)b(i,o);for(const o of s)_(i,o);"number"===typeof e&&_(i,e);for(let o=0;0!==n&&o<i.length;o++){const e=this.viewItems[i[o]],t=cI(e.size+n,e.minimumSize,e.maximumSize);n-=t-e.size,e.size=t}}layoutViews(){this._contentSize=this.viewItems.reduce(((e,t)=>e+t.size),0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach((e=>e.sash.layout())),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){0===this.orientation?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map((t=>e=t.size-t.minimumSize>0||e));e=!1;const n=this.viewItems.map((t=>e=t.maximumSize-t.size>0||e)),i=[...this.viewItems].reverse();e=!1;const s=i.map((t=>e=t.size-t.minimumSize>0||e)).reverse();e=!1;const r=i.map((t=>e=t.maximumSize-t.size>0||e)).reverse();let o=0;for(let a=0;a<this.sashItems.length;a++){const{sash:e}=this.sashItems[a];o+=this.viewItems[a].size;const i=!(t[a]&&r[a+1]),l=!(n[a]&&s[a+1]);if(i&&l){const n=p(a,-1),i=p(a+1,this.viewItems.length),r=this.findFirstSnapIndex(n),l=this.findFirstSnapIndex(i),c="number"===typeof r&&!this.viewItems[r].visible,u="number"===typeof l&&!this.viewItems[l].visible;c&&s[a]&&(o>0||this.startSnappingEnabled)?e.state=1:u&&t[a]&&(o<this._contentSize||this.endSnappingEnabled)?e.state=2:e.state=0}else e.state=i&&!l?1:!i&&l?2:3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const e=this.viewItems[t];if(e.visible&&e.snap)return t}for(const t of e){const e=this.viewItems[t];if(e.visible&&e.maximumSize-e.minimumSize>0)return;if(!e.visible&&e.snap)return t}}areViewsDistributed(){let e,t;for(const n of this.viewItems)if(e=void 0===e?n.size:Math.min(e,n.size),t=void 0===t?n.size:Math.max(t,n.size),t-e>2)return!1;return!0}dispose(){var e;null===(e=this.sashDragState)||void 0===e||e.disposable.dispose(),Gt(this.viewItems),this.viewItems=[],this.sashItems.forEach((e=>e.disposable.dispose())),this.sashItems=[],super.dispose()}}class aB{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=aB.TemplateId,this.renderedTemplates=new Set;const i=new Map(t.map((e=>[e.templateId,e])));this.renderers=[];for(const s of e){const e=i.get(s.templateId);if(!e)throw new Error("Table cell renderer for template id ".concat(s.templateId," not found."));this.renderers.push(e)}}renderTemplate(e){const t=Du(e,Mu(".monaco-table-tr")),n=[],i=[];for(let r=0;r<this.columns.length;r++){const e=this.renderers[r],s=Du(t,Mu(".monaco-table-td",{"data-col-index":r}));s.style.width="".concat(this.getColumnSize(r),"px"),n.push(s),i.push(e.renderTemplate(s))}const s={container:e,cellContainers:n,cellTemplateData:i};return this.renderedTemplates.add(s),s}renderElement(e,t,n,i){for(let s=0;s<this.columns.length;s++){const r=this.columns[s].project(e);this.renderers[s].renderElement(r,t,n.cellTemplateData[s],i)}}disposeElement(e,t,n,i){for(let s=0;s<this.columns.length;s++){const r=this.renderers[s];if(r.disposeElement){const o=this.columns[s].project(e);r.disposeElement(o,t,n.cellTemplateData[s],i)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++){this.renderers[t].disposeTemplate(e.cellTemplateData[t])}Fc(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width="".concat(t,"px")}}aB.TemplateId="row";class lB{get minimumSize(){var e;return null!==(e=this.column.minimumWidth)&&void 0!==e?e:120}get maximumSize(){var e;return null!==(e=this.column.maximumWidth)&&void 0!==e?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return null!==(e=this.column.onDidChangeWidthConstraints)&&void 0!==e?e:rn.None}constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new un,this.onDidLayout=this._onDidLayout.event,this.element=Mu(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}layout(e){this._onDidLayout.fire([this.index,e])}}class cB{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,n,i,s,r){this.virtualDelegate=n,this.domId="table_id_".concat(++cB.InstanceCount),this.disposables=new Xt,this.cachedWidth=0,this.cachedHeight=0,this.domNode=Du(t,Mu(".monaco-table.".concat(this.domId)));const o=i.map(((e,t)=>new lB(e,t))),a={size:o.reduce(((e,t)=>e+t.column.weight),0),views:o.map((e=>({size:e.column.weight,view:e})))};this.splitview=this.disposables.add(new oB(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:a})),this.splitview.el.style.height="".concat(n.headerRowHeight,"px"),this.splitview.el.style.lineHeight="".concat(n.headerRowHeight,"px");const l=new aB(i,s,(e=>this.splitview.getViewSize(e)));var c;this.list=this.disposables.add(new _P(e,this.domNode,(c=n,{getHeight:e=>c.getHeight(e),getTemplateId:()=>aB.TemplateId}),[l],r)),rn.any(...o.map((e=>e.onDidLayout)))((e=>{let[t,n]=e;return l.layoutColumn(t,n)}),null,this.disposables),this.splitview.onDidSashReset((e=>{const t=i.reduce(((e,t)=>e+t.weight),0),n=i[e].weight/t*this.cachedWidth;this.splitview.resizeView(e,n)}),null,this.disposables),this.styleElement=gu(this.domNode),this.style(hP)}updateOptions(e){this.list.updateOptions(e)}splice(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(".monaco-table.".concat(this.domId," > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ").concat(this.virtualDelegate.headerRowHeight+1,"px;\n\t\t\theight: calc(100% - ").concat(this.virtualDelegate.headerRowHeight,"px);\n\t\t}")),this.styleElement.textContent=t.join("\n"),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}cB.InstanceCount=0;class uB extends uS{constructor(e){super(),this._onChange=this._register(new un),this.onChange=this._onChange.event,this._onKeyDown=this._register(new un),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...bo.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,(e=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),e.preventDefault())})),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,(e=>{if(10===e.keyCode||3===e.keyCode)return this.checked=!this._checked,this._onChange.fire(!0),e.preventDefault(),void e.stopPropagation();this._onKeyDown.fire(e)}))}get enabled(){return"true"!==this.domNode.getAttribute("aria-disabled")}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}const hB=G("caseDescription","Match Case"),dB=G("wordsDescription","Match Whole Word"),fB=G("regexDescription","Use Regular Expression");class gB extends uB{constructor(e){super({icon:Ti.caseSensitive,title:hB+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class pB extends uB{constructor(e){super({icon:Ti.wholeWord,title:dB+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class mB extends uB{constructor(e){super({icon:Ti.regex,title:fB+e.appendTitle,isChecked:e.isChecked,inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class bB{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t-1;this.items=e,this.start=t,this.end=n,this.index=i}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class _B{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return 0!==this._currentPosition()?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return null===this._navigator.current()}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new bB(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach((t=>e.push(t))),e}}const vB=Mu;class yB extends uS{constructor(e,t,n){var i;super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new un),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new un),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=null!==(i=this.options.tooltip)&&void 0!==i?i:this.placeholder||"",this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=Du(e,vB(".monaco-inputbox.idle"));const s=this.options.flexibleHeight?"textarea":"input",r=Du(this.element,vB(".ibwrapper"));if(this.input=Du(r,vB(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,(()=>this.element.classList.add("synthetic-focus"))),this.onblur(this.input,(()=>this.element.classList.remove("synthetic-focus"))),this.options.flexibleHeight){this.maxHeight="number"===typeof this.options.flexibleMaxHeight?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=Du(r,vB("div.mirror")),this.mirror.innerText="\xa0",this.scrollableElement=new ES(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),Du(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll((e=>this.input.scrollTop=e.scrollTop)));const t=this._register(new MS(e.ownerDocument,"selectionchange")),n=rn.filter(t.event,(()=>{const t=e.ownerDocument.getSelection();return(null===t||void 0===t?void 0:t.anchorNode)===r}));this._register(n(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,(()=>this.onValueChange())),this.onblur(this.input,(()=>this.onBlur())),this.onfocus(this.input,(()=>this.onFocus())),this._register(this.ignoreGesture(this.input)),setTimeout((()=>this.updateMirror()),0),this.options.actions&&(this.actionbar=this._register(new rF(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.input.title=e}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return"number"===typeof this.cachedHeight?this.cachedHeight:iu(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return uu(this.input)}select(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width="calc(100% - ".concat(e,"px)"),this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if("number"!==typeof this.cachedContentHeight||"number"!==typeof this.cachedHeight||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){if("open"===this.state&&j(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border="1px solid ".concat(Wu(n.border,"transparent")),this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),null===e||void 0===e?void 0:e.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=eu(this.element)+"px";let n;this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:n=>{var i,s;if(!this.message)return null;e=Du(n,vB(".monaco-inputbox-container")),t();const r={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?u$(this.message.content,r):function(e){const t=h$(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return t.textContent=e,t}(this.message.content,r);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=null!==(i=a.background)&&void 0!==i?i:"",o.style.color=null!==(s=a.foreground)&&void 0!==s?s:"",o.style.border=a.border?"1px solid ".concat(a.border):"",Du(e,o),null},onHide:()=>{this.state="closed"},layout:t}),n=3===this.message.type?G("alertErrorMessage","Error: {0}",this.message.content):2===this.message.type?G("alertWarningMessage","Warning: {0}",this.message.content):G("alertInfoMessage","Info: {0}",this.message.content),Bm(n),this.state="open"}_hideMessage(){this.contextViewProvider&&("open"===this.state&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),"open"===this.state&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,t=10===e.charCodeAt(e.length-1)?" ":"";(e+t).replace(/\u000c/g,"")?this.mirror.textContent=e+t:this.mirror.innerText="\xa0",this.layout()}applyStyles(){var e,t,n;const i=this.options.inputBoxStyles,s=null!==(e=i.inputBackground)&&void 0!==e?e:"",r=null!==(t=i.inputForeground)&&void 0!==t?t:"",o=null!==(n=i.inputBorder)&&void 0!==n?n:"";this.element.style.backgroundColor=s,this.element.style.color=r,this.input.style.backgroundColor="inherit",this.input.style.color=r,this.element.style.border="1px solid ".concat(Wu(o,"transparent"))}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=iu(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,i=t.selectionEnd,s=t.value;null!==n&&null!==i&&(this.value=s.substr(0,n)+e+s.substr(i),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,null===(e=this.actionbar)||void 0===e||e.dispose(),super.dispose()}}class SB extends yB{constructor(e,t,n){const i=G({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is \u21c5 to represent the up and down arrow keys.']}," or {0} for history","\u21c5"),s=G({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is \u21c5 to represent the up and down arrow keys.']}," ({0} for history)","\u21c5");super(e,t,n),this._onDidFocus=this._register(new un),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new un),this.onDidBlur=this._onDidBlur.event,this.history=new _B(n.history,100);const r=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(i)&&!this.placeholder.endsWith(s)&&this.history.getHistory().length){const e=this.placeholder.endsWith(")")?i:s,t=this.placeholder+e;n.showPlaceholderOnFocus&&!uu(this.input)?this.placeholder=t:this.setPlaceHolder(t)}};this.observer=new MutationObserver(((e,t)=>{e.forEach((e=>{e.target.textContent||r()}))})),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,(()=>r())),this.onblur(this.input,(()=>{const e=e=>{if(this.placeholder.endsWith(e)){const t=this.placeholder.slice(0,this.placeholder.length-e.length);return n.showPlaceholderOnFocus?this.placeholder=t:this.setPlaceHolder(t),!0}return!1};e(s)||e(i)}))}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=null!==e&&void 0!==e?e:"",zm(this.value?this.value:G("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,zm(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const wB=G("defaultLabel","input");class kB extends uS{constructor(e,t,n){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new Jt),this.additionalToggles=[],this._onDidOptionChange=this._register(new un),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new un),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new un),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new un),this._onKeyUp=this._register(new un),this._onCaseSensitiveKeyDown=this._register(new un),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new un),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||wB,this.showCommonFindToggles=!!n.showCommonFindToggles;const i=n.appendCaseSensitiveLabel||"",s=n.appendWholeWordsLabel||"",r=n.appendRegexLabel||"",o=n.history||[],a=!!n.flexibleHeight,l=!!n.flexibleWidth,c=n.flexibleMaxHeight;if(this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new SB(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:o,showHistoryHint:n.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c,inputBoxStyles:n.inputBoxStyles})),this.showCommonFindToggles){this.regex=this._register(new mB({appendTitle:r,isChecked:!1,...n.toggleStyles})),this._register(this.regex.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this._register(this.regex.onKeyDown((e=>{this._onRegexKeyDown.fire(e)}))),this.wholeWords=this._register(new pB({appendTitle:s,isChecked:!1,...n.toggleStyles})),this._register(this.wholeWords.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this.caseSensitive=this._register(new gB({appendTitle:i,isChecked:!1,...n.toggleStyles})),this._register(this.caseSensitive.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()}))),this._register(this.caseSensitive.onKeyDown((e=>{this._onCaseSensitiveKeyDown.fire(e)})));const e=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,(t=>{if(t.equals(15)||t.equals(17)||t.equals(9)){const n=e.indexOf(this.domNode.ownerDocument.activeElement);if(n>=0){let i=-1;t.equals(17)?i=(n+1)%e.length:t.equals(15)&&(i=0===n?e.length-1:n-1),t.equals(9)?(e[n].blur(),this.inputBox.focus()):i>=0&&e[i].focus(),xu(t,!0)}}}))}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(null===n||void 0===n?void 0:n.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),null===e||void 0===e||e.appendChild(this.domNode),this._register(zc(this.inputBox.inputElement,"compositionstart",(e=>{this.imeSessionInProgress=!0}))),this._register(zc(this.inputBox.inputElement,"compositionend",(e=>{this.imeSessionInProgress=!1,this._onInput.fire()}))),this.onkeydown(this.inputBox.inputElement,(e=>this._onKeyDown.fire(e))),this.onkeyup(this.inputBox.inputElement,(e=>this._onKeyUp.fire(e))),this.oninput(this.inputBox.inputElement,(e=>this._onInput.fire())),this.onmousedown(this.inputBox.inputElement,(e=>this._onMouseDown.fire(e)))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,n;this.domNode.classList.remove("disabled"),this.inputBox.enable(),null===(e=this.regex)||void 0===e||e.enable(),null===(t=this.wholeWords)||void 0===t||t.enable(),null===(n=this.caseSensitive)||void 0===n||n.enable();for(const i of this.additionalToggles)i.enable()}disable(){var e,t,n;this.domNode.classList.add("disabled"),this.inputBox.disable(),null===(e=this.regex)||void 0===e||e.disable(),null===(t=this.wholeWords)||void 0===t||t.disable(),null===(n=this.caseSensitive)||void 0===n||n.disable();for(const i of this.additionalToggles)i.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new Xt;for(const t of null!==e&&void 0!==e?e:[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange((e=>{this._onDidOptionChange.fire(e),!e&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()}))),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t,n,i,s,r,o;this.inputBox.paddingRight=e?0:(null!==(n=null===(t=this.caseSensitive)||void 0===t?void 0:t.width())&&void 0!==n?n:0)+(null!==(s=null===(i=this.wholeWords)||void 0===i?void 0:i.width())&&void 0!==s?s:0)+(null!==(o=null===(r=this.regex)||void 0===r?void 0:r.width())&&void 0!==o?o:0)+this.additionalToggles.reduce(((e,t)=>e+t.width()),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e,t;return null!==(t=null===(e=this.caseSensitive)||void 0===e?void 0:e.checked)&&void 0!==t&&t}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e,t;return null!==(t=null===(e=this.wholeWords)||void 0===e?void 0:e.checked)&&void 0!==t&&t}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e,t;return null!==(t=null===(e=this.regex)||void 0===e?void 0:e.checked)&&void 0!==t&&t}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;null===(e=this.caseSensitive)||void 0===e||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}var CB,xB,EB;!function(e){e[e.Expanded=0]="Expanded",e[e.Collapsed=1]="Collapsed",e[e.PreserveOrExpanded=2]="PreserveOrExpanded",e[e.PreserveOrCollapsed=3]="PreserveOrCollapsed"}(CB||(CB={})),function(e){e[e.Unknown=0]="Unknown",e[e.Twistie=1]="Twistie",e[e.Element=2]="Element",e[e.Filter=3]="Filter"}(xB||(xB={}));class LB extends Error{constructor(e,t){super("TreeError [".concat(e,"] ").concat(t))}}class DB{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function AB(e){return"object"===typeof e&&"visibility"in e&&"data"in e}function TB(e){switch(e){case!0:return 1;case!1:return 0;default:return e}}function NB(e){return"boolean"===typeof e.collapsible}class IB{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new mn,this._onDidChangeCollapseState=new un,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new un,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new un,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new el(Qa),this.collapseByDefault="undefined"!==typeof i.collapseByDefault&&i.collapseByDefault,this.filter=i.filter,this.autoExpandSingleChildren="undefined"!==typeof i.autoExpandSingleChildren&&i.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pe.empty(),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(0===e.length)throw new LB(this.user,"Invalid tree location");i.diffIdentityProvider?this.spliceSmart(i.diffIdentityProvider,e,t,n,i):this.spliceSimple(e,t,n,i)}spliceSmart(e,t,n,i,s,r){var o;void 0===i&&(i=Pe.empty()),void 0===r&&(r=null!==(o=s.diffDepth)&&void 0!==o?o:0);const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,n,i,s);const l=[...i],c=t[t.length-1],u=new hf({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,c),...l,...a.children.slice(c+n)].map((t=>e.getId(t.element).toString()))}).ComputeDiff(!1);if(u.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,n,l,s);const h=t.slice(0,-1),d=(t,n,i)=>{if(r>0)for(let o=0;o<i;o++)t--,n--,this.spliceSmart(e,[...h,t,0],Number.MAX_SAFE_INTEGER,l[n].children,s,r-1)};let f=Math.min(a.children.length,c+n),g=l.length;for(const p of u.changes.sort(((e,t)=>t.originalStart-e.originalStart)))d(f,g,f-(p.originalStart+p.originalLength)),f=p.originalStart,g=p.modifiedStart-c,this.spliceSimple([...h,f],p.originalLength,Pe.slice(l,g,g+p.modifiedLength),s);d(f,g,f)}spliceSimple(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pe.empty(),{onDidCreateNode:i,onDidDeleteNode:s,diffIdentityProvider:r}=arguments.length>3?arguments[3]:void 0;const{parentNode:o,listIndex:a,revealed:l,visible:c}=this.getParentNodeWithListIndex(e),u=[],h=Pe.map(n,(e=>this.createTreeNode(e,o,o.visible?1:0,l,u,i))),d=e[e.length-1];let f=0;for(let y=d;y>=0&&y<o.children.length;y--){const e=o.children[y];if(e.visible){f=e.visibleChildIndex;break}}const g=[];let p=0,m=0;for(const y of h)g.push(y),m+=y.renderNodeCount,y.visible&&(y.visibleChildIndex=f+p++);const b=y(o.children,d,t,g);r?o.lastDiffIds?y(o.lastDiffIds,d,t,g.map((e=>r.getId(e.element).toString()))):o.lastDiffIds=o.children.map((e=>r.getId(e.element).toString())):o.lastDiffIds=void 0;let _=0;for(const y of b)y.visible&&_++;if(0!==_)for(let y=d+g.length;y<o.children.length;y++){const e=o.children[y];e.visible&&(e.visibleChildIndex-=_)}if(o.visibleChildrenCount+=p-_,l&&c){const e=b.reduce(((e,t)=>e+(t.visible?t.renderNodeCount:0)),0);this._updateAncestorsRenderNodeCount(o,m-e),this.list.splice(a,e,u)}if(b.length>0&&s){const e=t=>{s(t),t.children.forEach(e)};b.forEach(e)}this._onDidSplice.fire({insertedNodes:g,deletedNodes:b});let v=o;for(;v;){if(2===v.visibility){this.refilterDelayer.trigger((()=>this.refilter()));break}v=v.parent}}rerender(e){if(0===e.length)throw new LB(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:i}=this.getTreeNodeWithListIndex(e);t.visible&&i&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:i}=this.getTreeNodeWithListIndex(e);return n&&i?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);"undefined"===typeof t&&(t=!n.collapsible);const i={collapsible:t};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(e,i)))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const i=this.getTreeNode(e);"undefined"===typeof t&&(t=!i.collapsed);const s={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(e,s)))}_setCollapseState(e,t){const{node:n,listIndex:i,revealed:s}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(n,i,s,t);if(n!==this.root&&this.autoExpandSingleChildren&&r&&!NB(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let i=-1;for(let e=0;e<n.children.length;e++){if(n.children[e].visible){if(i>-1){i=-1;break}i=e}}i>-1&&this._setCollapseState([...e,i],t)}return r}_setListNodeCollapseState(e,t,n,i){const s=this._setNodeCollapseState(e,i,!1);if(!n||!e.visible||!s)return s;const r=e.renderNodeCount,o=this.updateNodeAfterCollapseChange(e),a=r-(-1===t?0:1);return this.list.splice(t+1,a,o.slice(1)),s}_setNodeCollapseState(e,t,n){let i;if(e===this.root?i=!1:(NB(t)?(i=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(i=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):i=!1,i&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!NB(t)&&t.recursive)for(const s of e.children)i=this._setNodeCollapseState(s,t,!0)||i;return i}expandTo(e){this.eventBufferer.bufferEvents((()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})}))}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,n,i,s,r){const o={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:"boolean"===typeof e.collapsible?e.collapsible:"undefined"!==typeof e.collapsed,collapsed:"undefined"===typeof e.collapsed?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},a=this._filterNode(o,n);o.visibility=a,i&&s.push(o);const l=e.children||Pe.empty(),c=i&&0!==a&&!o.collapsed;let u=0,h=1;for(const d of l){const e=this.createTreeNode(d,o,a,c,s,r);o.children.push(e),h+=e.renderNodeCount,e.visible&&(e.visibleChildIndex=u++)}return o.collapsible=o.collapsible||o.children.length>0,o.visibleChildrenCount=u,o.visible=2===a?u>0:1===a,o.visible?o.collapsed||(o.renderNodeCount=h):(o.renderNodeCount=0,i&&s.pop()),null===r||void 0===r||r(o),o}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(!1===e.visible)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n){let i,s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e!==this.root){if(i=this._filterNode(e,t),0===i)return e.visible=!1,e.renderNodeCount=0,!1;s&&n.push(e)}const r=n.length;e.renderNodeCount=e===this.root?0:1;let o=!1;if(e.collapsed&&0===i)e.visibleChildrenCount=0;else{let t=0;for(const r of e.children)o=this._updateNodeAfterFilterChange(r,i,n,s&&!e.collapsed)||o,r.visible&&(r.visibleChildIndex=t++);e.visibleChildrenCount=t}return e!==this.root&&(e.visible=2===i?o:1===i,e.visibility=i),e.visible?e.collapsed||(e.renderNodeCount+=n.length-r):(e.renderNodeCount=0,s&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(0!==t)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return"boolean"===typeof n?(e.filterData=void 0,n?1:0):AB(n)?(e.filterData=n.data,TB(n.visibility)):(e.filterData=void 0,TB(n))}hasTreeNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root;if(!e||0===e.length)return!0;const[n,...i]=e;return!(n<0||n>t.children.length)&&this.hasTreeNode(i,t.children[n])}getTreeNode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root;if(!e||0===e.length)return t;const[n,...i]=e;if(n<0||n>t.children.length)throw new LB(this.user,"Invalid tree location");return this.getTreeNode(i,t.children[n])}getTreeNodeWithListIndex(e){if(0===e.length)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:i,visible:s}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new LB(this.user,"Invalid tree location");const o=t.children[r];return{node:o,listIndex:n,revealed:i,visible:s&&o.visible}}getParentNodeWithListIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const[r,...o]=e;if(r<0||r>t.children.length)throw new LB(this.user,"Invalid tree location");for(let a=0;a<r;a++)n+=t.children[a].renderNodeCount;return i=i&&!t.collapsed,s=s&&t.visible,0===o.length?{parentNode:t,listIndex:n,revealed:i,visible:s}:this.getParentNodeWithListIndex(o,t.children[r],n+1,i,s)}getNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){return 0===e.length?void 0:1===e.length?[]:function(e){if(0===e.length)throw new Error("Invalid tail call");return[e.slice(0,e.length-1),e[e.length-1]]}(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(0!==t.children.length)return t.children[0].element}}class $B extends FO{constructor(e){super(e.elements.map((e=>e.element))),this.data=e}}function MB(e){return e instanceof FO?new $B(e):e}class RB{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=Zt.None,this.disposables=new Xt}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((e=>e.element)),t)}onDragStart(e,t){var n,i;null===(i=(n=this.dnd).onDragStart)||void 0===i||i.call(n,MB(e),t)}onDragOver(e,t,n,i,s){let r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];const o=this.dnd.onDragOver(MB(e),t&&t.element,n,i,s),a=this.autoExpandNode!==t;if(a&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),"undefined"===typeof t)return o;if(a&&"boolean"!==typeof o&&o.autoExpand&&(this.autoExpandDisposable=il((()=>{const e=this.modelProvider(),n=e.getNodeLocation(t);e.isCollapsed(n)&&e.setCollapsed(n,!1),this.autoExpandNode=void 0}),500,this.disposables)),"boolean"===typeof o||!o.accept||"undefined"===typeof o.bubble||o.feedback){if(!r){return{accept:"boolean"===typeof o?o:o.accept,effect:"boolean"===typeof o?void 0:o.effect,feedback:[n]}}return o}if(1===o.bubble){const n=this.modelProvider(),r=n.getNodeLocation(t),o=n.getParentNodeLocation(r),a=n.getNode(o),l=o&&n.getListIndex(o);return this.onDragOver(e,a,l,i,s,!1)}const l=this.modelProvider(),c=l.getNodeLocation(t),u=l.getListIndex(c),h=l.getListRenderCount(c);return{...o,feedback:p(u,u+h)}}drop(e,t,n,i,s){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(MB(e),t&&t.element,n,i,s)}onDragEnd(e){var t,n;null===(n=(t=this.dnd).onDragEnd)||void 0===n||n.call(t,e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function OB(e,t){return t&&{...t,identityProvider:t.identityProvider&&{getId:e=>t.identityProvider.getId(e.element)},dnd:t.dnd&&new RB(e,t.dnd),multipleSelectionController:t.multipleSelectionController&&{isSelectionSingleChangeEvent:e=>t.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element}),isSelectionRangeChangeEvent:e=>t.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})},accessibilityProvider:t.accessibilityProvider&&{...t.accessibilityProvider,getSetSize(t){const n=e(),i=n.getNodeLocation(t),s=n.getParentNodeLocation(i);return n.getNode(s).visibleChildrenCount},getPosInSet:e=>e.visibleChildIndex+1,isChecked:t.accessibilityProvider&&t.accessibilityProvider.isChecked?e=>t.accessibilityProvider.isChecked(e.element):void 0,getRole:t.accessibilityProvider&&t.accessibilityProvider.getRole?e=>t.accessibilityProvider.getRole(e.element):()=>"treeitem",getAriaLabel:e=>t.accessibilityProvider.getAriaLabel(e.element),getWidgetAriaLabel:()=>t.accessibilityProvider.getWidgetAriaLabel(),getWidgetRole:t.accessibilityProvider&&t.accessibilityProvider.getWidgetRole?()=>t.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:t.accessibilityProvider&&t.accessibilityProvider.getAriaLevel?e=>t.accessibilityProvider.getAriaLevel(e.element):e=>e.depth,getActiveDescendantId:t.accessibilityProvider.getActiveDescendantId&&(e=>t.accessibilityProvider.getActiveDescendantId(e.element))},keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{...t.keyboardNavigationLabelProvider,getKeyboardNavigationLabel:e=>t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}}}class PB{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var n,i;null===(i=(n=this.delegate).setDynamicHeight)||void 0===i||i.call(n,e.element,t)}}!function(e){e.None="none",e.OnHover="onHover",e.Always="always"}(EB||(EB={}));class FB{get elements(){return this._elements}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this._elements=t,this.disposables=new Xt,this.onDidChange=rn.forEach(e,(e=>this._elements=e),this.disposables)}dispose(){this.disposables.dispose()}}class BB{constructor(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};var o;this.renderer=e,this.modelProvider=t,this.activeNodes=i,this.renderedIndentGuides=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=BB.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=Zt.None,this.disposables=new Xt,this.templateId=e.templateId,this.updateOptions(r),rn.map(n,(e=>e.node))(this.onDidChangeNodeTwistieState,this,this.disposables),null===(o=e.onDidChangeTwistieState)||void 0===o||o.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"!==typeof e.indent){const t=cI(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[e,t]of this.renderedNodes)this.renderTreeElement(e,t)}}if("undefined"!==typeof e.renderIndentGuides){const t=e.renderIndentGuides!==EB.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[e,t]of this.renderedNodes)this._renderIndentGuides(e,t);if(this.indentGuidesDisposable.dispose(),t){const e=new Xt;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,e),this.indentGuidesDisposable=e,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}"undefined"!==typeof e.hideTwistiesOfChildlessElements&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=Du(e,Mu(".monaco-tl-row")),n=Du(t,Mu(".monaco-tl-indent")),i=Du(t,Mu(".monaco-tl-twistie")),s=Du(t,Mu(".monaco-tl-contents")),r=this.renderer.renderTemplate(s);return{container:e,indent:n,twistie:i,indentGuidesDisposable:Zt.None,templateData:r}}renderElement(e,t,n,i){this.renderedNodes.set(e,n),this.renderedElements.set(e.element,e),this.renderTreeElement(e,n),this.renderer.renderElement(e,t,n.templateData,i)}disposeElement(e,t,n,i){var s,r;n.indentGuidesDisposable.dispose(),null===(r=(s=this.renderer).disposeElement)||void 0===r||r.call(s,e,t,n.templateData,i),"number"===typeof i&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const n=BB.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft="".concat(n,"px"),t.indent.style.width="".concat(n+this.indent-16,"px"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...bo.asClassNameArray(Ti.treeItemExpanded));let i=!1;this.renderer.renderTwistie&&(i=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(i||t.twistie.classList.add(...bo.asClassNameArray(Ti.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(Fc(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new Xt,i=this.modelProvider();for(;;){const s=i.getNodeLocation(e),r=i.getParentNodeLocation(s);if(!r)break;const o=i.getNode(r),a=Mu(".indent-guide",{style:"width: ".concat(this.indent,"px")});this.activeIndentNodes.has(o)&&a.classList.add("active"),0===t.indent.childElementCount?t.indent.appendChild(a):t.indent.insertBefore(a,t.indent.firstElementChild),this.renderedIndentGuides.add(o,a),n.add(Qt((()=>this.renderedIndentGuides.delete(o,a)))),e=o}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach((e=>{const i=n.getNodeLocation(e);try{const s=n.getParentNodeLocation(i);e.collapsible&&e.children.length>0&&!e.collapsed?t.add(e):s&&t.add(n.getNode(s))}catch(Y){}})),this.activeIndentNodes.forEach((e=>{t.has(e)||this.renderedIndentGuides.forEach(e,(e=>e.classList.remove("active")))})),t.forEach((e=>{this.activeIndentNodes.has(e)||this.renderedIndentGuides.forEach(e,(e=>e.classList.add("active")))})),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),Gt(this.disposables)}}BB.DefaultIndent=8;class zB{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new Xt,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let n=1;if(this._filter){const i=this._filter.filter(e,t);if(n="boolean"===typeof i?i?1:0:AB(i)?TB(i.visibility):i,0===n)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:X$.Default,visibility:n};const i=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),s=Array.isArray(i)?i:[i];for(const r of s){const e=r&&r.toString();if("undefined"===typeof e)return{data:X$.Default,visibility:n};let t;if(this.tree.findMatchType===HB.Contiguous){const n=e.toLowerCase().indexOf(this._lowercasePattern);if(n>-1){t=[Number.MAX_SAFE_INTEGER,0];for(let e=this._lowercasePattern.length;e>0;e--)t.push(n+e-1)}}else t=J$(this._pattern,this._lowercasePattern,0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(t)return this._matchCount++,1===s.length?{data:t,visibility:n}:{data:{label:e,score:t},visibility:n}}return this.tree.findMode===WB.Filter?"number"===typeof this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:X$.Default,visibility:n}}reset(){this._totalCount=0,this._matchCount=0}dispose(){Gt(this.disposables)}}var WB,HB;!function(e){e[e.Highlight=0]="Highlight",e[e.Filter=1]="Filter"}(WB||(WB={})),function(e){e[e.Fuzzy=0]="Fuzzy",e[e.Contiguous=1]="Contiguous"}(HB||(HB={}));class VB{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};var o,a;this.tree=e,this.view=n,this.filter=i,this.contextViewProvider=s,this.options=r,this._pattern="",this.width=0,this._onDidChangeMode=new un,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new un,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new un,this._onDidChangeOpenState=new un,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new Xt,this.disposables=new Xt,this._mode=null!==(o=e.options.defaultFindMode)&&void 0!==o?o:WB.Highlight,this._matchType=null!==(a=e.options.defaultFindMatchType)&&void 0!==a?a:HB.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0!==e.defaultFindMode&&(this.mode=e.defaultFindMode),void 0!==e.defaultFindMatchType&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){this.widget&&0!==this.pattern.length&&(this.tree.refilter(),this.render())}render(){var e,t,n,i;const s=this.filter.totalCount>0&&0===this.filter.matchCount;this.pattern&&s?null===(e=this.tree.options.showNotFoundMessage)||void 0===e||e?null===(t=this.widget)||void 0===t||t.showMessage({type:2,content:G("not found","No elements found.")}):null===(n=this.widget)||void 0===n||n.showMessage({type:2}):null===(i=this.widget)||void 0===i||i.clearMessage()}shouldAllowFocus(e){return!this.widget||!this.pattern||(this.filter.totalCount>0&&this.filter.matchCount<=1||!X$.isDefault(e.filterData))}layout(e){var t;this.width=e,null===(t=this.widget)||void 0===t||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function jB(e,t){return e.position===t.position&&UB(e,t)}function UB(e,t){return e.node.element===t.node.element&&e.startIndex===t.startIndex&&e.height===t.height&&e.endIndex===t.endIndex}class qB{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return a(this.stickyNodes,e.stickyNodes,jB)}lastNodePartiallyVisible(){if(0===this.count)return!1;const e=this.stickyNodes[this.count-1];if(1===this.count)return 0!==e.position;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!a(this.stickyNodes,e.stickyNodes,UB))return!1;if(0===this.count)return!1;const t=this.stickyNodes[this.count-1],n=e.stickyNodes[e.count-1];return t.position!==n.position}}class KB{constrainStickyScrollNodes(e,t,n){for(let i=0;i<e.length;i++){const s=e[i];if(s.position+s.height>n||i>=t)return e.slice(0,i)}return e}}class GB extends Zt{constructor(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};var o;super(),this.tree=e,this.model=t,this.view=n,this.treeDelegate=s,this.maxWidgetViewRatio=.4;const a=this.validateStickySettings(r);this.stickyScrollMaxItemCount=a.stickyScrollMaxItemCount,this.stickyScrollDelegate=null!==(o=r.stickyScrollDelegate)&&void 0!==o?o:new KB,this._widget=this._register(new YB(n.getScrollableElement(),n,e,i,s,r.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(n.onDidScroll((()=>this.update()))),this._register(n.onDidChangeContentHeight((()=>this.update()))),this._register(e.onDidChangeCollapseState((()=>this.update()))),this.update()}getNodeAtHeight(e){let t;if(t=0===e?this.view.firstVisibleIndex:this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||0===this.tree.scrollTop)return void this._widget.setState(void 0);const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let n=e,i=0,s=this.getNextStickyNode(n,void 0,i);for(;s&&(t.push(s),i+=s.height,!(t.length<=this.stickyScrollMaxItemCount)||(n=this.getNextVisibleNode(s),n));)s=this.getNextStickyNode(n,s.node,i);const r=this.constrainStickyNodes(t);return r.length?new qB(r):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,n){const i=this.getAncestorUnderPrevious(e,t);if(i){if(i===e){if(!this.nodeIsUncollapsedParent(e))return;if(this.nodeTopAlignsWithStickyNodesBottom(e,n))return}return this.createStickyScrollNode(i,n)}}nodeTopAlignsWithStickyNodesBottom(e,t){const n=this.getNodeIndex(e),i=this.view.getElementTop(n),s=t;return this.view.scrollTop===i-s}createStickyScrollNode(e,t){const n=this.treeDelegate.getHeight(e),{startIndex:i,endIndex:s}=this.getNodeRange(e);return{node:e,position:this.calculateStickyNodePosition(s,t,n),height:n,startIndex:i,endIndex:s}}getAncestorUnderPrevious(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=e,i=this.getParentNode(n);for(;i;){if(i===t)return n;n=i,i=this.getParentNode(n)}if(void 0===t)return n}calculateStickyNodePosition(e,t,n){let i=this.view.getRelativeTop(e);if(null===i&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const t=this.treeDelegate.getHeight(this.view.element(e)),n=this.view.getRelativeTop(e+1);i=n?n-t/this.view.renderHeight:null}if(null===i)return t;const s=this.view.element(e),r=this.treeDelegate.getHeight(s),o=i*this.view.renderHeight+r;return t+n>o&&t<=o?o-n:t}constrainStickyNodes(e){if(0===e.length)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,n=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&n.position+n.height<=t)return e;const i=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!i.length)return[];const s=i[i.length-1];if(i.length>this.stickyScrollMaxItemCount||s.position+s.height>t)throw new Error("stickyScrollDelegate violates constraints");return i}getParentNode(e){const t=this.model.getNodeLocation(e),n=this.model.getParentNodeLocation(t);return n?this.model.getNode(n):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),n=this.model.getListIndex(t);if(n<0)throw new Error("Node not found in tree");return{startIndex:n,endIndex:n+this.model.getListRenderCount(t)-1}}nodePositionTopBelowWidget(e){const t=[];let n=this.getParentNode(e);for(;n;)t.push(n),n=this.getParentNode(n);let i=0;for(let s=0;s<t.length&&s<this.stickyScrollMaxItemCount;s++)i+=this.treeDelegate.getHeight(t[s]);return i}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return"number"===typeof e.stickyScrollMaxItemCount&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}}class YB{constructor(e,t,n,i,s,r){this.view=t,this.tree=n,this.treeRenderers=i,this.treeDelegate=s,this.accessibilityProvider=r,this._previousElements=[],this._previousStateDisposables=new Xt,this._rootDomNode=Mu(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const o=Mu(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(o),this.stickyScrollFocus=new QB(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}setState(e){const t=!!this._previousState&&this._previousState.count>0,n=!!e&&e.count>0;if(!t&&!n||t&&n&&this._previousState.equal(e))return;if(t!==n&&this.setVisible(n),!n)return this._previousState=void 0,this._previousElements=[],void this._previousStateDisposables.clear();const i=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top="".concat(i.position,"px");else{this._previousStateDisposables.clear();const t=Array(e.count);for(let n=e.count-1;n>=0;n--){const i=e.stickyNodes[n],{element:s,disposable:r}=this.createElement(i,n,e.count);t[n]=s,this._rootDomNode.appendChild(s),this._previousStateDisposables.add(r)}this.stickyScrollFocus.updateElements(t,e),this._previousElements=t}this._previousState=e,this._rootDomNode.style.height="".concat(i.position+i.height,"px")}createElement(e,t,n){const i=e.startIndex,s=document.createElement("div");s.style.top="".concat(e.position,"px"),s.style.height="".concat(e.height,"px"),s.style.lineHeight="".concat(e.height,"px"),s.classList.add("monaco-tree-sticky-row"),s.classList.add("monaco-list-row"),s.setAttribute("data-index","".concat(i)),s.setAttribute("data-parity",i%2===0?"even":"odd"),s.setAttribute("id",this.view.getElementID(i)),this.setAccessibilityAttributes(s,e.node.element,t,n);const r=this.treeDelegate.getTemplateId(e.node),o=this.treeRenderers.find((e=>e.templateId===r));if(!o)throw new Error("No renderer found for template id ".concat(r));let a=e.node;a===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(a=new Proxy(e.node,{}));const l=o.renderTemplate(s);o.renderElement(a,e.startIndex,l,e.height);const c=Qt((()=>{o.disposeElement(a,e.startIndex,l,e.height),o.disposeTemplate(l),s.remove()}));return{element:s,disposable:c}}setAccessibilityAttributes(e,t,n,i){var s;if(!this.accessibilityProvider)return;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,n,i))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,n))),this.accessibilityProvider.getRole&&e.setAttribute("role",null!==(s=this.accessibilityProvider.getRole(t))&&void 0!==s?s:"treeitem");const r=this.accessibilityProvider.getAriaLabel(t);r&&e.setAttribute("aria-label",r);const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);"number"===typeof o&&e.setAttribute("aria-level","".concat(o)),e.setAttribute("aria-selected",String(!1))}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}class QB extends Zt{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new un,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new un,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this.container.addEventListener("focus",(()=>this.onFocus())),this.container.addEventListener("blur",(()=>this.onBlur())),this._register(this.view.onDidFocus((()=>this.toggleStickyScrollFocused(!1)))),this._register(this.view.onKeyDown((e=>this.onKeyDown(e)))),this._register(this.view.onMouseDown((e=>this.onMouseDown(e)))),this._register(this.view.onContextMenu((e=>this.handleContextMenu(e))))}handleContextMenu(e){const t=e.browserEvent.target;if(!eP(t)&&!JO(t))return void(this.focusedLast()&&this.view.domFocus());if(!wu(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const t=this.state.stickyNodes.findIndex((t=>{var n;return t.node.element===(null===(n=e.element)||void 0===n?void 0:n.element)}));if(-1===t)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");return this.container.focus(),void this.setFocus(t)}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const n=this.state.stickyNodes[this.focusedIndex].node.element,i=this.elements[this.focusedIndex];this._onContextMenu.fire({element:n,anchor:i,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state)if("ArrowUp"===e.key)this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if("ArrowDown"===e.key||"ArrowRight"===e.key){if(this.focusedIndex>=this.state.count-1){const e=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([e]),this.scrollNodeUnderWidget(e,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}onMouseDown(e){const t=e.browserEvent.target;(eP(t)||JO(t))&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&0===t.count)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const n=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const e=cI(n,0,t.count-1);this.setFocus(e)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const n=t.stickyNodes[e];this.scrollNodeUnderWidget(n.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const n=t.stickyNodes[t.count-1],i=t.count>1?t.stickyNodes[t.count-2]:void 0,s=this.view.getElementTop(e),r=i?i.position+i.height+n.height:n.height;this.view.scrollTop=s-r}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return!!this.state&&this.view.getHTMLElement().classList.contains("sticky-scroll-focused")}removeFocus(){-1!==this.focusedIndex&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){e.classList.toggle("focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||0===this.elements.length)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),-1===this.focusedIndex&&this.setFocus(0)}onBlur(){this.domHasFocus=!1}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function XB(e){let t=xB.Unknown;return ru(e.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?t=xB.Twistie:ru(e.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?t=xB.Element:ru(e.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(t=xB.Filter),{browserEvent:e.browserEvent,element:e.element?e.element.element:null,target:t}}function ZB(e,t){t(e),e.children.forEach((e=>ZB(e,t)))}class JB{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new un,this.onDidChange=this._onDidChange.event}set(e,t){!(null===t||void 0===t?void 0:t.__forceEvent)&&a(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const e=this;this._onDidChange.fire({get elements(){return e.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map((e=>e.element))),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice(e){let{insertedNodes:t,deletedNodes:n}=e;if(!this.identityProvider){const e=this.createNodeSet(),t=t=>e.delete(t);return n.forEach((e=>ZB(e,t))),void this.set([...e.values()])}const i=new Set,s=e=>i.add(this.identityProvider.getId(e.element).toString());n.forEach((e=>ZB(e,s)));const r=new Map,o=e=>r.set(this.identityProvider.getId(e.element).toString(),e);t.forEach((e=>ZB(e,o)));const a=[];for(const l of this.nodes){const e=this.identityProvider.getId(l.element).toString();if(i.has(e)){const t=r.get(e);t&&t.visible&&a.push(t)}else a.push(l)}if(this.nodes.length>0&&0===a.length){const e=this.getFirstViewElementWithTrait();e&&a.push(e)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class ez extends cP{constructor(e,t,n){super(e),this.tree=t,this.stickyScrollProvider=n}onViewPointer(e){if(tP(e.browserEvent.target)||QO(e.browserEvent.target)||ZO(e.browserEvent.target))return;if(e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,i=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,s=JO(e.browserEvent.target);let r=!1;if(r=!!s||("function"===typeof this.tree.expandOnlyOnTwistieClick?this.tree.expandOnlyOnTwistieClick(t.element):!!this.tree.expandOnlyOnTwistieClick),s)this.handleStickyScrollMouseEvent(e,t);else{if(r&&!i&&2!==e.browserEvent.detail)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&2===e.browserEvent.detail)return super.onViewPointer(e)}if(t.collapsible&&(!s||i)){const n=this.tree.getNodeLocation(t),s=e.browserEvent.altKey;if(this.tree.setFocus([n]),this.tree.toggleCollapsed(n,s),r&&i)return void(e.browserEvent.isHandledByList=!0)}s||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(function(e){return XO(e,"monaco-custom-toggle")}(e.browserEvent.target)||function(e){return XO(e,"action-item")}(e.browserEvent.target))return;const n=this.stickyScrollProvider();if(!n)throw new Error("Sticky scroll controller not found");const i=this.list.indexOf(t),s=this.list.getElementTop(i),r=n.nodePositionTopBelowWidget(t);this.tree.scrollTop=s-r,this.list.domFocus(),this.list.setFocus([i]),this.list.setSelection([i])}onDoubleClick(e){!e.browserEvent.target.classList.contains("monaco-tl-twistie")&&this.tree.expandOnDoubleClick&&(e.browserEvent.isHandledByList||super.onDoubleClick(e))}onMouseDown(e){const t=e.browserEvent.target;eP(t)||JO(t)||super.onMouseDown(e)}onContextMenu(e){const t=e.browserEvent.target;eP(t)||JO(t)||super.onContextMenu(e)}}class tz extends _P{constructor(e,t,n,i,s,r,o,a){super(e,t,n,i,a),this.focusTrait=s,this.selectionTrait=r,this.anchorTrait=o}createMouseController(e){return new ez(this,e.tree,e.stickyScrollProvider)}splice(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(super.splice(e,t,n),0===n.length)return;const i=[],s=[];let r;n.forEach(((t,n)=>{this.focusTrait.has(t)&&i.push(e+n),this.selectionTrait.has(t)&&s.push(e+n),this.anchorTrait.has(t)&&(r=e+n)})),i.length>0&&super.setFocus(f([...super.getFocus(),...i])),s.length>0&&super.setSelection(f([...super.getSelection(),...s])),"number"===typeof r&&super.setAnchor(r)}setFocus(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super.setFocus(e,t),n||this.focusTrait.set(e.map((e=>this.element(e))),t)}setSelection(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super.setSelection(e,t),n||this.selectionTrait.set(e.map((e=>this.element(e))),t)}setAnchor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.setAnchor(e),t||("undefined"===typeof e?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class nz{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return rn.filter(rn.map(this.view.onMouseDblClick,XB),(e=>e.target!==xB.Filter))}get onPointer(){return rn.map(this.view.onPointer,XB)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return rn.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e,t;return null!==(t=null===(e=this.findController)||void 0===e?void 0:e.mode)&&void 0!==t?t:WB.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e,t;return null!==(t=null===(e=this.findController)||void 0===e?void 0:e.matchType)&&void 0!==t?t:HB.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return"undefined"===typeof this._options.expandOnDoubleClick||this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return"undefined"===typeof this._options.expandOnlyOnTwistieClick||this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};var r;this._user=e,this._options=s,this.eventBufferer=new mn,this.onDidChangeFindOpenState=rn.None,this.onDidChangeStickyScrollFocused=rn.None,this.disposables=new Xt,this._onWillRefilter=new un,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new un,this.treeDelegate=new PB(n);const o=new bn,a=new bn,l=this.disposables.add(new FB(a.event)),c=new Fg;this.renderers=i.map((e=>new BB(e,(()=>this.model),o.event,l,c,s)));for(const g of this.renderers)this.disposables.add(g);let u;s.keyboardNavigationLabelProvider&&(u=new zB(this,s.keyboardNavigationLabelProvider,s.filter),s={...s,filter:u},this.disposables.add(u)),this.focus=new JB((()=>this.view.getFocusedElements()[0]),s.identityProvider),this.selection=new JB((()=>this.view.getSelectedElements()[0]),s.identityProvider),this.anchor=new JB((()=>this.view.getAnchorElement()),s.identityProvider),this.view=new tz(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...OB((()=>this.model),s),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,s),o.input=this.model.onDidChangeCollapseState;const h=rn.forEach(this.model.onDidSplice,(e=>{this.eventBufferer.bufferEvents((()=>{this.focus.onDidModelSplice(e),this.selection.onDidModelSplice(e)}))}),this.disposables);h((()=>null),null,this.disposables);const d=this.disposables.add(new un),f=this.disposables.add(new el(0));if(this.disposables.add(rn.any(h,this.focus.onDidChange,this.selection.onDidChange)((()=>{f.trigger((()=>{const e=new Set;for(const t of this.focus.getNodes())e.add(t);for(const t of this.selection.getNodes())e.add(t);d.fire([...e.values()])}))}))),a.input=d.event,!1!==s.keyboardSupport){const e=rn.chain(this.view.onKeyDown,(e=>e.filter((e=>!QO(e.target))).map((e=>new ja(e)))));rn.chain(e,(e=>e.filter((e=>15===e.keyCode))))(this.onLeftArrow,this,this.disposables),rn.chain(e,(e=>e.filter((e=>17===e.keyCode))))(this.onRightArrow,this,this.disposables),rn.chain(e,(e=>e.filter((e=>10===e.keyCode))))(this.onSpace,this,this.disposables)}if((null===(r=s.findWidgetEnabled)||void 0===r||r)&&s.keyboardNavigationLabelProvider&&s.contextViewProvider){const e=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new VB(this,this.model,this.view,u,s.contextViewProvider,e),this.focusNavigationFilter=e=>this.findController.shouldAllowFocus(e),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=rn.None,this.onDidChangeFindMatchType=rn.None;s.enableStickyScroll&&(this.stickyScrollController=new GB(this,this.model,this.view,this.renderers,this.treeDelegate,s),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=gu(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===EB.Always)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;this._options={...this._options,...e};for(const n of this.renderers)n.updateOptions(e);this.view.updateOptions(this._options),null===(t=this.findController)||void 0===t||t.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===EB.Always)}get options(){return this._options}updateStickyScroll(e){var t;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new GB(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=rn.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),null===(t=this.stickyScrollController)||void 0===t||t.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}domFocus(){var e;(null===(e=this.stickyScrollController)||void 0===e?void 0:e.focusedLast())?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){var n;this.view.layout(e,t),T(t)&&(null===(n=this.findController)||void 0===n||n.layout(t))}style(e){var t;const n=".".concat(this.view.domId),i=[];e.treeIndentGuidesStroke&&(i.push(".monaco-list".concat(n,":hover .monaco-tl-indent > .indent-guide, .monaco-list").concat(n,".always .monaco-tl-indent > .indent-guide  { border-color: ").concat(e.treeInactiveIndentGuidesStroke,"; }")),i.push(".monaco-list".concat(n," .monaco-tl-indent > .indent-guide.active { border-color: ").concat(e.treeIndentGuidesStroke,"; }"))),e.listBackground&&(i.push(".monaco-list".concat(n," .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ").concat(e.listBackground,"; }")),i.push(".monaco-list".concat(n," .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ").concat(e.listBackground,"; }"))),e.listFocusForeground&&(i.push(".monaco-list".concat(n,".sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ").concat(e.listFocusForeground,"; }")),i.push(".monaco-list".concat(n,":not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }")));const s=Wu(e.listFocusAndSelectionOutline,Wu(e.listSelectionOutline,null!==(t=e.listFocusOutline)&&void 0!==t?t:""));s&&(i.push(".monaco-list".concat(n,".sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ").concat(s,"; outline-offset: -1px;}")),i.push(".monaco-list".concat(n,":not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}"))),e.listFocusOutline&&(i.push(".monaco-list".concat(n,".sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ").concat(e.listFocusOutline,"; outline-offset: -1px; }")),i.push(".monaco-list".concat(n,":not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }")),i.push(".monaco-workbench.context-menu-visible .monaco-list".concat(n,".last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }")),i.push(".monaco-workbench.context-menu-visible .monaco-list".concat(n,".last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }"))),this.styleElement.textContent=i.join("\n"),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.model.setCollapsed(e,!0,t)}expand(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents((()=>{const n=e.map((e=>this.model.getNode(e)));this.selection.set(n,t);const i=e.map((e=>this.model.getListIndex(e))).filter((e=>e>-1));this.view.setSelection(i,t,!0)}))}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents((()=>{const n=e.map((e=>this.model.getNode(e)));this.focus.set(n,t);const i=e.map((e=>this.model.getListIndex(e))).filter((e=>e>-1));this.view.setFocus(i,t,!0)}))}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);if(-1!==n)if(this.stickyScrollController){const i=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(n,t,i)}else this.view.reveal(n,t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!0)){const e=this.model.getParentNodeLocation(i);if(!e)return;const t=this.model.getListIndex(e);this.view.reveal(t),this.view.setFocus([t])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!1)){if(!n.children.some((e=>e.visible)))return;const[e]=this.view.getFocus(),t=e+1;this.view.reveal(t),this.view.setFocus([t])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const n=t[0],i=this.model.getNodeLocation(n),s=e.browserEvent.altKey;this.model.setCollapsed(i,void 0,s)}dispose(){var e;Gt(this.disposables),null===(e=this.stickyScrollController)||void 0===e||e.dispose(),this.view.dispose()}}class iz{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new IB(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare:(e,t)=>n.sorter.compare(e.element,t.element)}),this.identityProvider=n.identityProvider}setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe.empty(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=this.getElementLocation(e);this._setChildren(i,this.preserveCollapseState(t),n)}_setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe.empty(),n=arguments.length>2?arguments[2]:void 0;const i=new Set,s=new Set;this.model.splice([...e,0],Number.MAX_VALUE,t,{...n,onDidCreateNode:e=>{var t;if(null===e.element)return;const r=e;if(i.add(r.element),this.nodes.set(r.element,r),this.identityProvider){const e=this.identityProvider.getId(r.element).toString();s.add(e),this.nodesByIdentity.set(e,r)}null===(t=n.onDidCreateNode)||void 0===t||t.call(n,r)},onDidDeleteNode:e=>{var t;if(null===e.element)return;const r=e;if(i.has(r.element)||this.nodes.delete(r.element),this.identityProvider){const e=this.identityProvider.getId(r.element).toString();s.has(e)||this.nodesByIdentity.delete(e)}null===(t=n.onDidDeleteNode)||void 0===t||t.call(n,r)}})}preserveCollapseState(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe.empty();return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Pe.map(e,(e=>{let t=this.nodes.get(e.element);if(!t&&this.identityProvider){const n=this.identityProvider.getId(e.element).toString();t=this.nodesByIdentity.get(n)}if(!t){let t;return t="undefined"===typeof e.collapsed?void 0:e.collapsed===CB.Collapsed||e.collapsed===CB.PreserveOrCollapsed||e.collapsed!==CB.Expanded&&e.collapsed!==CB.PreserveOrExpanded&&Boolean(e.collapsed),{...e,children:this.preserveCollapseState(e.children),collapsed:t}}const n="boolean"===typeof e.collapsible?e.collapsible:t.collapsible;let i;return i="undefined"===typeof e.collapsed||e.collapsed===CB.PreserveOrCollapsed||e.collapsed===CB.PreserveOrExpanded?t.collapsed:e.collapsed===CB.Collapsed||e.collapsed!==CB.Expanded&&Boolean(e.collapsed),{...e,collapsible:n,collapsed:i,children:this.preserveCollapseState(e.children)}}))}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getElementLocation(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===e)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new LB(this.user,"Tree element not found: ".concat(e));return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(null===e)throw new LB(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new LB(this.user,"Tree element not found: ".concat(e));const n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return this.model.getNode(i).element}getElementLocation(e){if(null===e)return[];const t=this.nodes.get(e);if(!t)throw new LB(this.user,"Tree element not found: ".concat(e));return this.model.getNodeLocation(t)}}function sz(e){return{element:{elements:[e.element],incompressible:e.incompressible||!1},children:Pe.map(Pe.from(e.children),sz),collapsible:e.collapsible,collapsed:e.collapsed}}function rz(e){const t=[e.element],n=e.incompressible||!1;let i,s;for(;[s,i]=Pe.consume(Pe.from(e.children),2),1===s.length&&!s[0].incompressible;)e=s[0],t.push(e.element);return{element:{elements:t,incompressible:n},children:Pe.map(Pe.concat(s,i),rz),collapsible:e.collapsible,collapsed:e.collapsed}}function oz(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=n<e.element.elements.length-1?[oz(e,n+1)]:Pe.map(Pe.from(e.children),(e=>oz(e,0))),0===n&&e.element.incompressible?{element:e.element.elements[n],children:t,incompressible:!0,collapsible:e.collapsible,collapsed:e.collapsed}:{element:e.element.elements[n],children:t,collapsible:e.collapsible,collapsed:e.collapsed}}function az(e){return oz(e,0)}function lz(e,t,n){return e.element===t?{...e,children:n}:{...e,children:Pe.map(Pe.from(e.children),(e=>lz(e,t,n)))}}class cz{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new iz(e,t,n),this.enabled="undefined"===typeof n.compressionEnabled||n.compressionEnabled,this.identityProvider=n.identityProvider}setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe.empty(),n=arguments.length>2?arguments[2]:void 0;const i=n.diffIdentityProvider&&(s=n.diffIdentityProvider,{getId:e=>e.elements.map((e=>s.getId(e).toString())).join("\0")});var s;if(null===e){const e=Pe.map(t,this.enabled?rz:sz);return void this._setChildren(null,e,{diffIdentityProvider:i,diffDepth:1/0})}const r=this.nodes.get(e);if(!r)throw new LB(this.user,"Unknown compressed tree node");const o=this.model.getNode(r),l=this.model.getParentNodeLocation(r),c=this.model.getNode(l),u=lz(az(o),e,t),h=(this.enabled?rz:sz)(u),d=n.diffIdentityProvider?(e,t)=>n.diffIdentityProvider.getId(e)===n.diffIdentityProvider.getId(t):void 0;if(a(h.element.elements,o.element.elements,d))return void this._setChildren(r,h.children||Pe.empty(),{diffIdentityProvider:i,diffDepth:1});const f=c.children.map((e=>e===o?h:e));this._setChildren(c.element,f,{diffIdentityProvider:i,diffDepth:o.depth-c.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const t=this.model.getNode().children,n=Pe.map(t,az),i=Pe.map(n,e?rz:sz);this._setChildren(null,i,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const i=new Set;this.model.setChildren(e,t,{...n,onDidCreateNode:e=>{for(const t of e.element.elements)i.add(t),this.nodes.set(t,e.element)},onDidDeleteNode:e=>{for(const t of e.element.elements)i.has(t)||this.nodes.delete(t)}})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if("undefined"===typeof e)return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return null===t?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return null===n?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getCompressedNode(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(null===e)return null;const t=this.nodes.get(e);if(!t)throw new LB(this.user,"Tree element not found: ".concat(e));return t}}const uz=e=>e[e.length-1];class hz{get element(){return null===this.node.element?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map((e=>new hz(this.unwrapper,e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}class dz{get onDidSplice(){return rn.map(this.model.onDidSplice,(e=>{let{insertedNodes:t,deletedNodes:n}=e;return{insertedNodes:t.map((e=>this.nodeMapper.map(e))),deletedNodes:n.map((e=>this.nodeMapper.map(e)))}}))}get onDidChangeCollapseState(){return rn.map(this.model.onDidChangeCollapseState,(e=>{let{node:t,deep:n}=e;return{node:this.nodeMapper.map(t),deep:n}}))}get onDidChangeRenderNodeCount(){return rn.map(this.model.onDidChangeRenderNodeCount,(e=>this.nodeMapper.map(e)))}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.rootRef=null,this.elementMapper=n.elementMapper||uz;const i=e=>this.elementMapper(e.elements);this.nodeMapper=new DB((e=>new hz(i,e))),this.model=new cz(e,function(e,t){return{splice(n,i,s){t.splice(n,i,s.map((t=>e.map(t))))},updateElementHeight(e,n){t.updateElementHeight(e,n)}}}(this.nodeMapper,t),function(e,t){return{...t,identityProvider:t.identityProvider&&{getId:n=>t.identityProvider.getId(e(n))},sorter:t.sorter&&{compare:(e,n)=>t.sorter.compare(e.elements[0],n.elements[0])},filter:t.filter&&{filter:(n,i)=>t.filter.filter(e(n),i)}}}(i,n))}setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe.empty(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.model.setChildren(e,t,n)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return null===t||"undefined"===typeof t?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.model.getNode(e)}}var fz=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};class gz extends nz{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,n,i){super(e,t,n,i,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}),this.user=e}setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe.empty(),n=arguments.length>2?arguments[2]:void 0;this.model.setChildren(e,t,n)}rerender(e){void 0!==e?this.model.rerender(e):this.view.rerender()}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new iz(e,t,n)}}class pz{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,n){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=n,this.templateId=n.templateId,n.onDidChangeTwistieState&&(this.onDidChangeTwistieState=n.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){let s=this.stickyScrollDelegate.getCompressedNode(e);s||(s=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),1===s.element.elements.length?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,i)):(n.compressedTreeNode=s,this.renderer.renderCompressedElements(s,t,n.data,i))}disposeElement(e,t,n,i){var s,r,o,a;n.compressedTreeNode?null===(r=(s=this.renderer).disposeCompressedElements)||void 0===r||r.call(s,n.compressedTreeNode,t,n.data,i):null===(a=(o=this.renderer).disposeElement)||void 0===a||a.call(o,e,t,n.data,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return!!this.renderer.renderTwistie&&this.renderer.renderTwistie(e,t)}}fz([oS],pz.prototype,"compressedTreeNodeProvider",null);class mz{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,n){if(this.compressedStickyNodes.clear(),0===e.length)return[];for(let i=0;i<e.length;i++){const s=e[i],r=s.position+s.height;if(i+1<e.length&&r+e[i+1].height>n||i>=t-1&&t<e.length){const t=e.slice(0,i),n=e.slice(i);return[...t,this.compressStickyNodes(n)]}}return e}compressStickyNodes(e){if(0===e.length)throw new Error("Can't compress empty sticky nodes");if(!this.modelProvider().isCompressionEnabled())return e[0];const t=[];for(const a of e){const e=this.modelProvider().getCompressedTreeNode(a.node.element);if(e.element){if(e.element.incompressible)break;t.push(...e.element.elements)}}if(t.length<2)return e[0];const n=e[e.length-1],i={elements:t,incompressible:!1},s={...n.node,children:[],element:i},r=new Proxy(e[0].node,{}),o={node:r,startIndex:e[0].startIndex,endIndex:n.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(r,s),o}}function bz(e,t){return t&&{...t,keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(n){let i;try{i=e().getCompressedTreeNode(n)}catch(Y){return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(n)}return 1===i.element.elements.length?t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(n):t.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(i.element.elements)}}}}class _z extends gz{constructor(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const r=()=>this,o=new mz((()=>this.model));super(e,t,n,i.map((e=>new pz(r,o,e))),{...bz(r,s),stickyScrollDelegate:o})}setChildren(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pe.empty(),n=arguments.length>2?arguments[2]:void 0;this.model.setChildren(e,t,n)}createModel(e,t,n){return new dz(e,t,n)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super.updateOptions(e),"undefined"!==typeof e.compressionEnabled&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.model.getCompressedTreeNode(e)}}function vz(e){return{...e,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function yz(e,t){return!!t.parent&&(t.parent===e||yz(e,t.parent))}class Sz{get element(){return this.node.element.element}get children(){return this.node.children.map((e=>new Sz(e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class wz{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...bo.asClassNameArray(Ti.treeItemLoading)),!0):(t.classList.remove(...bo.asClassNameArray(Ti.treeItemLoading)),!1)}disposeElement(e,t,n,i){var s,r;null===(r=(s=this.renderer).disposeElement)||void 0===r||r.call(s,this.nodeMapper.map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function kz(e){return{browserEvent:e.browserEvent,elements:e.elements.map((e=>e.element))}}function Cz(e){return{browserEvent:e.browserEvent,element:e.element&&e.element.element,target:e.target}}class xz extends FO{constructor(e){super(e.elements.map((e=>e.element))),this.data=e}}function Ez(e){return e instanceof FO?new xz(e):e}class Lz{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((e=>e.element)),t)}onDragStart(e,t){var n,i;null===(i=(n=this.dnd).onDragStart)||void 0===i||i.call(n,Ez(e),t)}onDragOver(e,t,n,i,s){return this.dnd.onDragOver(Ez(e),t&&t.element,n,i,s)}drop(e,t,n,i,s){this.dnd.drop(Ez(e),t&&t.element,n,i,s)}onDragEnd(e){var t,n;null===(n=(t=this.dnd).onDragEnd)||void 0===n||n.call(t,e)}dispose(){this.dnd.dispose()}}function Dz(e){return e&&{...e,collapseByDefault:!0,identityProvider:e.identityProvider&&{getId:t=>e.identityProvider.getId(t.element)},dnd:e.dnd&&new Lz(e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent:t=>e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element}),isSelectionRangeChangeEvent:t=>e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",isChecked:e.accessibilityProvider.isChecked?t=>{var n;return!!(null===(n=e.accessibilityProvider)||void 0===n?void 0:n.isChecked(t.element))}:void 0,getAriaLabel:t=>e.accessibilityProvider.getAriaLabel(t.element),getWidgetAriaLabel:()=>e.accessibilityProvider.getWidgetAriaLabel(),getWidgetRole:e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider.getAriaLevel&&(t=>e.accessibilityProvider.getAriaLevel(t.element)),getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},filter:e.filter&&{filter:(t,n)=>e.filter.filter(t.element,n)},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel:t=>e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)},sorter:void 0,expandOnlyOnTwistieClick:"undefined"===typeof e.expandOnlyOnTwistieClick?void 0:"function"!==typeof e.expandOnlyOnTwistieClick?e.expandOnlyOnTwistieClick:t=>e.expandOnlyOnTwistieClick(t.element),defaultFindVisibility:t=>t.hasChildren&&t.stale?1:"number"===typeof e.defaultFindVisibility?e.defaultFindVisibility:"undefined"===typeof e.defaultFindVisibility?2:e.defaultFindVisibility(t.element)}}function Az(e,t){t(e),e.children.forEach((e=>Az(e,t)))}class Tz{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return rn.map(this.tree.onDidChangeFocus,kz)}get onDidChangeSelection(){return rn.map(this.tree.onDidChangeSelection,kz)}get onMouseDblClick(){return rn.map(this.tree.onMouseDblClick,Cz)}get onPointer(){return rn.map(this.tree.onPointer,Cz)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.user=e,this.dataSource=s,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new un,this._onDidChangeNodeSlowState=new un,this.nodeMapper=new DB((e=>new Sz(e))),this.disposables=new Xt,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren="undefined"!==typeof r.autoExpandSingleChildren&&r.autoExpandSingleChildren,this.sorter=r.sorter,this.getDefaultCollapseState=e=>r.collapseByDefault?r.collapseByDefault(e)?CB.PreserveOrCollapsed:CB.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,n,i,r),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=vz({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,n,i,s){const r=new PB(n),o=i.map((e=>new wz(e,this.nodeMapper,this._onDidChangeNodeSlowState.event))),a=Dz(s)||{};return new gz(e,t,r,o,a)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach((e=>e.cancel())),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&"number"===typeof t.scrollTop&&(this.scrollTop=t.scrollTop)}async _updateChildren(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root.element,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if("undefined"===typeof this.root.element)throw new LB(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await rn.toPromise(this._onDidRender.event));const r=this.getDataNode(e);if(await this.refreshAndRenderNode(r,t,i,s),n)try{this.tree.rerender(r)}catch(Y){}}rerender(e){if(void 0===e||e===this.root.element)return void this.tree.rerender();const t=this.getDataNode(e);this.tree.rerender(t)}getNode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root.element;const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}async expand(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("undefined"===typeof this.root.element)throw new LB(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await rn.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n))return!1;if(n.refreshPromise&&(await this.root.refreshPromise,await rn.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n))return!1;const i=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(await this.root.refreshPromise,await rn.toPromise(this._onDidRender.event)),i}setSelection(e,t){const n=e.map((e=>this.getDataNode(e)));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map((e=>e.element))}setFocus(e,t){const n=e.map((e=>this.getDataNode(e)));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map((e=>e.element))}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.root.element;const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new LB(this.user,"Data tree node not found: ".concat(e));return t}async refreshAndRenderNode(e,t,n,i){await this.refreshNode(e,t,n),this.disposables.isDisposed||this.render(e,n,i)}async refreshNode(e,t,n){let i;if(this.subTreeRefreshPromises.forEach(((s,r)=>{!i&&function(e,t){return e===t||yz(e,t)||yz(t,e)}(r,e)&&(i=s.then((()=>this.refreshNode(e,t,n))))})),i)return i;if(e!==this.root){if(this.tree.getNode(e).collapsed)return e.hasChildren=!!this.dataSource.hasChildren(e.element),void(e.stale=!0)}return this.doRefreshSubTree(e,t,n)}async doRefreshSubTree(e,t,n){let i;e.refreshPromise=new Promise((e=>i=e)),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally((()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)}));try{const i=await this.doRefreshNode(e,t,n);e.stale=!1,await dl.settled(i.map((e=>this.doRefreshSubTree(e,t,n))))}finally{i()}}async doRefreshNode(e,t,n){let i;if(e.hasChildren=!!this.dataSource.hasChildren(e.element),e.hasChildren){const t=this.doGetChildren(e);if(N(t))i=Promise.resolve(t);else{const n=nl(800);n.then((()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)}),(e=>null)),i=t.finally((()=>n.cancel()))}}else i=Promise.resolve(Pe.empty());try{const s=await i;return this.setChildren(e,s,t,n)}catch(s){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Rt(s))return[];throw s}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const n=this.dataSource.getChildren(e.element);return N(n)?this.processChildren(n):(t=Za((async()=>this.processChildren(await n))),this.refreshPromises.set(e,t),t.finally((()=>{this.refreshPromises.delete(e)})))}_onDidChangeCollapseState(e){let{node:t,deep:n}=e;null!==t.element&&!t.collapsed&&t.element.stale&&(n?this.collapse(t.element.element):this.refreshAndRenderNode(t.element,!1).catch(Nt))}setChildren(e,t,n,i){const s=[...t];if(0===e.children.length&&0===s.length)return[];const r=new Map,o=new Map;for(const c of e.children)r.set(c.element,c),this.identityProvider&&o.set(c.id,{node:c,collapsed:this.tree.hasElement(c)&&this.tree.isCollapsed(c)});const a=[],l=s.map((t=>{const s=!!this.dataSource.hasChildren(t);if(!this.identityProvider){const n=vz({element:t,parent:e,hasChildren:s,defaultCollapseState:this.getDefaultCollapseState(t)});return s&&n.defaultCollapseState===CB.PreserveOrExpanded&&a.push(n),n}const l=this.identityProvider.getId(t).toString(),c=o.get(l);if(c){const e=c.node;return r.delete(e.element),this.nodes.delete(e.element),this.nodes.set(t,e),e.element=t,e.hasChildren=s,n?c.collapsed?(e.children.forEach((e=>Az(e,(e=>this.nodes.delete(e.element))))),e.children.splice(0,e.children.length),e.stale=!0):a.push(e):s&&!c.collapsed&&a.push(e),e}const u=vz({element:t,parent:e,id:l,hasChildren:s,defaultCollapseState:this.getDefaultCollapseState(t)});return i&&i.viewState.focus&&i.viewState.focus.indexOf(l)>-1&&i.focus.push(u),i&&i.viewState.selection&&i.viewState.selection.indexOf(l)>-1&&i.selection.push(u),(i&&i.viewState.expanded&&i.viewState.expanded.indexOf(l)>-1||s&&u.defaultCollapseState===CB.PreserveOrExpanded)&&a.push(u),u}));for(const c of r.values())Az(c,(e=>this.nodes.delete(e.element)));for(const c of l)this.nodes.set(c.element,c);return e.children.splice(0,e.children.length,...l),e!==this.root&&this.autoExpandSingleChildren&&1===l.length&&0===a.length&&(l[0].forceExpanded=!0,a.push(l[0])),a}render(e,t,n){const i=e.children.map((e=>this.asTreeElement(e,t))),s=n&&{...n,diffIdentityProvider:n.diffIdentityProvider&&{getId:e=>n.diffIdentityProvider.getId(e.element)}};this.tree.setChildren(e===this.root?null:e,i,s),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:e.forceExpanded?(n=!1,e.forceExpanded=!1):n=e.defaultCollapseState,{element:e,children:e.hasChildren?Pe.map(e.children,(e=>this.asTreeElement(e,t))):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class Nz{get element(){return{elements:this.node.element.elements.map((e=>e.element)),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map((e=>new Nz(e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class Iz{constructor(e,t,n,i){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderCompressedElements(e,t,n,i){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...bo.asClassNameArray(Ti.treeItemLoading)),!0):(t.classList.remove(...bo.asClassNameArray(Ti.treeItemLoading)),!1)}disposeElement(e,t,n,i){var s,r;null===(r=(s=this.renderer).disposeElement)||void 0===r||r.call(s,this.nodeMapper.map(e),t,n.templateData,i)}disposeCompressedElements(e,t,n,i){var s,r;null===(r=(s=this.renderer).disposeCompressedElements)||void 0===r||r.call(s,this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=Gt(this.disposables)}}class $z extends Tz{constructor(e,t,n,i,s,r){let o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};super(e,t,n,s,r,o),this.compressionDelegate=i,this.compressibleNodeMapper=new DB((e=>new Nz(e))),this.filter=o.filter}createTree(e,t,n,i,s){const r=new PB(n),o=i.map((e=>new Iz(e,this.nodeMapper,(()=>this.compressibleNodeMapper),this._onDidChangeNodeSlowState.event))),a=function(e){const t=e&&Dz(e);return t&&{...t,keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{...t.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel:t=>e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map((e=>e.element)))}}}(s)||{};return new _z(e,t,r,o,a)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tree.updateOptions(e)}render(e,t,n){if(!this.identityProvider)return super.render(e,t);const i=e=>this.identityProvider.getId(e).toString(),s=e=>{const t=new Set;for(const n of e){const e=this.tree.getCompressedTreeNode(n===this.root?null:n);if(e.element)for(const n of e.element.elements)t.add(i(n.element))}return t},r=s(this.tree.getSelection()),o=s(this.tree.getFocus());super.render(e,t,n);const a=this.getSelection();let l=!1;const c=this.getFocus();let u=!1;const h=e=>{const t=e.element;if(t)for(let n=0;n<t.elements.length;n++){const e=i(t.elements[n].element),s=t.elements[t.elements.length-1].element;r.has(e)&&-1===a.indexOf(s)&&(a.push(s),l=!0),o.has(e)&&-1===c.indexOf(s)&&(c.push(s),u=!0)}e.children.forEach(h)};h(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(a),u&&this.setFocus(c)}processChildren(e){return this.filter&&(e=Pe.filter(e,(e=>{const t=this.filter.filter(e,1),n="boolean"===typeof(i=t)?i?1:0:AB(i)?TB(i.visibility):TB(i);var i;if(2===n)throw new Error("Recursive tree visibility not supported in async data compressed trees");return 1===n}))),super.processChildren(e)}}class Mz extends nz{constructor(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};super(e,t,n,i,r),this.user=e,this.dataSource=s,this.identityProvider=r.identityProvider}createModel(e,t,n){return new iz(e,t,n)}}new na("isMac",_e,G("isMac","Whether the operating system is macOS")),new na("isLinux",ve,G("isLinux","Whether the operating system is Linux")),new na("isWindows",be,G("isWindows","Whether the operating system is Windows")),new na("isWeb",Se,G("isWeb","Whether the platform is a web browser")),new na("isMacNative",_e&&!Se,G("isMacNative","Whether the operating system is macOS on a non-browser platform")),new na("isIOS",ke,G("isIOS","Whether the operating system is iOS")),new na("isMobile",Ce,G("isMobile","Whether the platform is a mobile web browser")),new na("isDevelopment",!1,!0),new na("productQualityType","",G("productQualityType","Quality type of VS Code"));const Rz="inputFocus";new na(Rz,!1,G("inputFocus","Whether keyboard focus is inside an input box"));var Oz=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},Pz=function(e,t){return function(n,i){t(n,i,e)}};const Fz=ro("listService");const Bz=new na("listScrollAtBoundary","none"),zz=(Oo.or(Bz.isEqualTo("top"),Bz.isEqualTo("both")),Oo.or(Bz.isEqualTo("bottom"),Bz.isEqualTo("both")),new na("listFocus",!0)),Wz=new na("treestickyScrollFocused",!1),Hz=new na("listSupportsMultiselect",!0),Vz=(Oo.and(zz,Oo.not(Rz),Wz.negate()),new na("listHasSelectionOrFocus",!1)),jz=new na("listDoubleSelection",!1),Uz=new na("listMultiSelection",!1),qz=new na("listSelectionNavigation",!1),Kz=new na("listSupportsFind",!0),Gz=new na("treeElementCanCollapse",!1),Yz=new na("treeElementHasParent",!1),Qz=new na("treeElementCanExpand",!1),Xz=new na("treeElementHasChild",!1),Zz=new na("treeFindOpen",!1),Jz="listTypeNavigationMode",eW="listAutomaticKeyboardNavigation";function tW(e,t){const n=e.createScoped(t.getHTMLElement());return zz.bindTo(n),n}function nW(e,t){const n=Bz.bindTo(e),i=()=>{const e=0===t.scrollTop,i=t.scrollHeight-t.renderHeight-t.scrollTop<1;e&&i?n.set("both"):e?n.set("top"):i?n.set("bottom"):n.set("none")};return i(),t.onDidScroll(i)}const iW="workbench.list.multiSelectModifier",sW="workbench.list.openMode",rW="workbench.list.horizontalScrolling",oW="workbench.list.defaultFindMode",aW="workbench.list.typeNavigationMode",lW="workbench.list.keyboardNavigation",cW="workbench.list.scrollByPage",uW="workbench.list.defaultFindMatchType",hW="workbench.tree.indent",dW="workbench.tree.renderIndentGuides",fW="workbench.list.smoothScrolling",gW="workbench.list.mouseWheelScrollSensitivity",pW="workbench.list.fastScrollSensitivity",mW="workbench.tree.expandMode",bW="workbench.tree.enableStickyScroll",_W="workbench.tree.stickyScrollMaxItemCount";function vW(e){return"alt"===e.getValue(iW)}class yW extends Zt{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=vW(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration(iW)&&(this.useAltAsMultipleSelectionModifier=vW(this.configurationService))})))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:oP(e)}isSelectionRangeChangeEvent(e){return aP(e)}}function SW(e,t){var n;const i=e.get(od),s=e.get(tk),r=new Xt;return[{...t,keyboardNavigationDelegate:{mightProducePrintableCharacter:e=>s.mightProducePrintableCharacter(e)},smoothScrolling:Boolean(i.getValue(fW)),mouseWheelScrollSensitivity:i.getValue(gW),fastScrollSensitivity:i.getValue(pW),multipleSelectionController:null!==(n=t.multipleSelectionController)&&void 0!==n?n:r.add(new yW(i)),keyboardNavigationEventFilter:AW(s),scrollByPage:Boolean(i.getValue(cW))},r]}let wW=class extends _P{constructor(e,t,n,i,s,r,o,a,l){const c="undefined"!==typeof s.horizontalScrolling?s.horizontalScrolling:Boolean(a.getValue(rW)),[u,h]=l.invokeFunction(SW,s);super(e,t,n,i,{keyboardSupport:!1,...u,horizontalScrolling:c}),this.disposables.add(h),this.contextKeyService=tW(r,this),this.disposables.add(nW(this.contextKeyService,this)),this.listSupportsMultiSelect=Hz.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==s.multipleSelectionSupport);qz.bindTo(this.contextKeyService).set(Boolean(s.selectionNavigation)),this.listHasSelectionOrFocus=Vz.bindTo(this.contextKeyService),this.listDoubleSelection=jz.bindTo(this.contextKeyService),this.listMultiSelection=Uz.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=vW(a),this.disposables.add(this.contextKeyService),this.disposables.add(o.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection((()=>{const e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(2===e.length)}))}))),this.disposables.add(this.onDidChangeFocus((()=>{const e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)}))),this.disposables.add(a.onDidChangeConfiguration((e=>{e.affectsConfiguration(iW)&&(this._useAltAsMultipleSelectionModifier=vW(a));let t={};if(e.affectsConfiguration(rW)&&void 0===this.horizontalScrolling){const e=Boolean(a.getValue(rW));t={...t,horizontalScrolling:e}}if(e.affectsConfiguration(cW)){const e=Boolean(a.getValue(cW));t={...t,scrollByPage:e}}if(e.affectsConfiguration(fW)){const e=Boolean(a.getValue(fW));t={...t,smoothScrolling:e}}if(e.affectsConfiguration(gW)){const e=a.getValue(gW);t={...t,mouseWheelScrollSensitivity:e}}if(e.affectsConfiguration(pW)){const e=a.getValue(pW);t={...t,fastScrollSensitivity:e}}Object.keys(t).length>0&&this.updateOptions(t)}))),this.navigator=new EW(this,{configurationService:a,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?KP(e):qP)}};wW=Oz([Pz(5,ia),Pz(6,Fz),Pz(7,od),Pz(8,so)],wW);let kW=class extends jF{constructor(e,t,n,i,s,r,o,a,l){const c="undefined"!==typeof s.horizontalScrolling?s.horizontalScrolling:Boolean(a.getValue(rW)),[u,h]=l.invokeFunction(SW,s);super(e,t,n,i,{keyboardSupport:!1,...u,horizontalScrolling:c}),this.disposables=new Xt,this.disposables.add(h),this.contextKeyService=tW(r,this),this.disposables.add(nW(this.contextKeyService,this.widget)),this.horizontalScrolling=s.horizontalScrolling,this.listSupportsMultiSelect=Hz.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==s.multipleSelectionSupport);qz.bindTo(this.contextKeyService).set(Boolean(s.selectionNavigation)),this._useAltAsMultipleSelectionModifier=vW(a),this.disposables.add(this.contextKeyService),this.disposables.add(o.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(a.onDidChangeConfiguration((e=>{e.affectsConfiguration(iW)&&(this._useAltAsMultipleSelectionModifier=vW(a));let t={};if(e.affectsConfiguration(rW)&&void 0===this.horizontalScrolling){const e=Boolean(a.getValue(rW));t={...t,horizontalScrolling:e}}if(e.affectsConfiguration(cW)){const e=Boolean(a.getValue(cW));t={...t,scrollByPage:e}}if(e.affectsConfiguration(fW)){const e=Boolean(a.getValue(fW));t={...t,smoothScrolling:e}}if(e.affectsConfiguration(gW)){const e=a.getValue(gW);t={...t,mouseWheelScrollSensitivity:e}}if(e.affectsConfiguration(pW)){const e=a.getValue(pW);t={...t,fastScrollSensitivity:e}}Object.keys(t).length>0&&this.updateOptions(t)}))),this.navigator=new EW(this,{configurationService:a,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?KP(e):qP)}dispose(){this.disposables.dispose(),super.dispose()}};kW=Oz([Pz(5,ia),Pz(6,Fz),Pz(7,od),Pz(8,so)],kW);let CW=class extends cB{constructor(e,t,n,i,s,r,o,a,l,c){const u="undefined"!==typeof r.horizontalScrolling?r.horizontalScrolling:Boolean(l.getValue(rW)),[h,d]=c.invokeFunction(SW,r);super(e,t,n,i,s,{keyboardSupport:!1,...h,horizontalScrolling:u}),this.disposables.add(d),this.contextKeyService=tW(o,this),this.disposables.add(nW(this.contextKeyService,this)),this.listSupportsMultiSelect=Hz.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==r.multipleSelectionSupport);qz.bindTo(this.contextKeyService).set(Boolean(r.selectionNavigation)),this.listHasSelectionOrFocus=Vz.bindTo(this.contextKeyService),this.listDoubleSelection=jz.bindTo(this.contextKeyService),this.listMultiSelection=Uz.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=vW(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection((()=>{const e=this.getSelection(),t=this.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.listHasSelectionOrFocus.set(e.length>0||t.length>0),this.listMultiSelection.set(e.length>1),this.listDoubleSelection.set(2===e.length)}))}))),this.disposables.add(this.onDidChangeFocus((()=>{const e=this.getSelection(),t=this.getFocus();this.listHasSelectionOrFocus.set(e.length>0||t.length>0)}))),this.disposables.add(l.onDidChangeConfiguration((e=>{e.affectsConfiguration(iW)&&(this._useAltAsMultipleSelectionModifier=vW(l));let t={};if(e.affectsConfiguration(rW)&&void 0===this.horizontalScrolling){const e=Boolean(l.getValue(rW));t={...t,horizontalScrolling:e}}if(e.affectsConfiguration(cW)){const e=Boolean(l.getValue(cW));t={...t,scrollByPage:e}}if(e.affectsConfiguration(fW)){const e=Boolean(l.getValue(fW));t={...t,smoothScrolling:e}}if(e.affectsConfiguration(gW)){const e=l.getValue(gW);t={...t,mouseWheelScrollSensitivity:e}}if(e.affectsConfiguration(pW)){const e=l.getValue(pW);t={...t,fastScrollSensitivity:e}}Object.keys(t).length>0&&this.updateOptions(t)}))),this.navigator=new LW(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),void 0!==e.overrideStyles&&this.updateStyles(e.overrideStyles),void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?KP(e):qP)}dispose(){this.disposables.dispose(),super.dispose()}};CW=Oz([Pz(6,ia),Pz(7,Fz),Pz(8,od),Pz(9,so)],CW);class xW extends Zt{constructor(e,t){var n;super(),this.widget=e,this._onDidOpen=this._register(new un),this.onDidOpen=this._onDidOpen.event,this._register(rn.filter(this.widget.onDidChangeSelection,(e=>wu(e.browserEvent)))((e=>this.onSelectionFromKeyboard(e)))),this._register(this.widget.onPointer((e=>this.onPointer(e.element,e.browserEvent)))),this._register(this.widget.onMouseDblClick((e=>this.onMouseDblClick(e.element,e.browserEvent)))),"boolean"!==typeof(null===t||void 0===t?void 0:t.openOnSingleClick)&&(null===t||void 0===t?void 0:t.configurationService)?(this.openOnSingleClick="doubleClick"!==(null===t||void 0===t?void 0:t.configurationService.getValue(sW)),this._register(null===t||void 0===t?void 0:t.configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration(sW)&&(this.openOnSingleClick="doubleClick"!==(null===t||void 0===t?void 0:t.configurationService.getValue(sW)))})))):this.openOnSingleClick=null===(n=null===t||void 0===t?void 0:t.openOnSingleClick)||void 0===n||n}onSelectionFromKeyboard(e){if(1!==e.elements.length)return;const t=e.browserEvent,n="boolean"!==typeof t.preserveFocus||t.preserveFocus,i="boolean"===typeof t.pinned?t.pinned:!n;this._open(this.getSelectedElement(),n,i,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick)return;if(2===t.detail)return;const n=1===t.button,i=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!0,n,i,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const i=t.ctrlKey||t.metaKey||t.altKey;this._open(e,!1,!0,i,t)}_open(e,t,n,i,s){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:i,element:e,browserEvent:s})}}class EW extends xW{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class LW extends xW{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class DW extends xW{constructor(e,t){super(e,t)}getSelectedElement(){var e;return null!==(e=this.widget.getSelection()[0])&&void 0!==e?e:void 0}}function AW(e){let t=!1;return n=>{if(n.toKeyCodeChord().isModifierKey())return!1;if(t)return t=!1,!1;const i=e.softDispatch(n,n.target);return 1===i.kind?(t=!0,!1):(t=!1,0===i.kind)}}let TW=class extends gz{constructor(e,t,n,i,s,r,o,a,l){const{options:c,getTypeNavigationMode:u,disposable:h}=r.invokeFunction(PW,s);super(e,t,n,i,c),this.disposables.add(h),this.internals=new FW(this,s,u,s.overrideStyles,o,a,l),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};TW=Oz([Pz(5,so),Pz(6,ia),Pz(7,Fz),Pz(8,od)],TW);let NW=class extends _z{constructor(e,t,n,i,s,r,o,a,l){const{options:c,getTypeNavigationMode:u,disposable:h}=r.invokeFunction(PW,s);super(e,t,n,i,c),this.disposables.add(h),this.internals=new FW(this,s,u,s.overrideStyles,o,a,l),this.disposables.add(this.internals)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};NW=Oz([Pz(5,so),Pz(6,ia),Pz(7,Fz),Pz(8,od)],NW);let IW=class extends Mz{constructor(e,t,n,i,s,r,o,a,l,c){const{options:u,getTypeNavigationMode:h,disposable:d}=o.invokeFunction(PW,r);super(e,t,n,i,s,u),this.disposables.add(d),this.internals=new FW(this,r,h,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super.updateOptions(e),void 0!==e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};IW=Oz([Pz(6,so),Pz(7,ia),Pz(8,Fz),Pz(9,od)],IW);let $W=class extends Tz{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,i,s,r,o,a,l,c){const{options:u,getTypeNavigationMode:h,disposable:d}=o.invokeFunction(PW,r);super(e,t,n,i,s,u),this.disposables.add(d),this.internals=new FW(this,r,h,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};$W=Oz([Pz(6,so),Pz(7,ia),Pz(8,Fz),Pz(9,od)],$W);let MW=class extends $z{constructor(e,t,n,i,s,r,o,a,l,c,u){const{options:h,getTypeNavigationMode:d,disposable:f}=a.invokeFunction(PW,o);super(e,t,n,i,s,r,h),this.disposables.add(f),this.internals=new FW(this,o,d,o.overrideStyles,l,c,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};function RW(e){const t=e.getValue(oW);if("highlight"===t)return WB.Highlight;if("filter"===t)return WB.Filter;const n=e.getValue(lW);return"simple"===n||"highlight"===n?WB.Highlight:"filter"===n?WB.Filter:void 0}function OW(e){const t=e.getValue(uW);return"fuzzy"===t?HB.Fuzzy:"contiguous"===t?HB.Contiguous:void 0}function PW(e,t){var n;const i=e.get(od),s=e.get(s$),r=e.get(ia),o=e.get(so),a=void 0!==t.horizontalScrolling?t.horizontalScrolling:Boolean(i.getValue(rW)),[l,c]=o.invokeFunction(SW,t),u=t.paddingBottom,h=void 0!==t.renderIndentGuides?t.renderIndentGuides:i.getValue(dW);return{getTypeNavigationMode:()=>{const e=r.getContextKeyValue(Jz);if("automatic"===e)return VO.Automatic;if("trigger"===e)return VO.Trigger;if(!1===r.getContextKeyValue(eW))return VO.Trigger;const t=i.getValue(aW);return"automatic"===t?VO.Automatic:"trigger"===t?VO.Trigger:void 0},disposable:c,options:{keyboardSupport:!1,...l,indent:"number"===typeof i.getValue(hW)?i.getValue(hW):void 0,renderIndentGuides:h,smoothScrolling:Boolean(i.getValue(fW)),defaultFindMode:RW(i),defaultFindMatchType:OW(i),horizontalScrolling:a,scrollByPage:Boolean(i.getValue(cW)),paddingBottom:u,hideTwistiesOfChildlessElements:t.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:null!==(n=t.expandOnlyOnTwistieClick)&&void 0!==n?n:"doubleClick"===i.getValue(mW),contextViewProvider:s,findWidgetStyles:jP,enableStickyScroll:Boolean(i.getValue(bW)),stickyScrollMaxItemCount:Number(i.getValue(_W))}}}MW=Oz([Pz(7,so),Pz(8,ia),Pz(9,Fz),Pz(10,od)],MW);let FW=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,i,s,r,o){var a;this.tree=e,this.disposables=[],this.contextKeyService=tW(s,e),this.disposables.push(nW(this.contextKeyService,e)),this.listSupportsMultiSelect=Hz.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(!1!==t.multipleSelectionSupport);qz.bindTo(this.contextKeyService).set(Boolean(t.selectionNavigation)),this.listSupportFindWidget=Kz.bindTo(this.contextKeyService),this.listSupportFindWidget.set(null===(a=t.findWidgetEnabled)||void 0===a||a),this.hasSelectionOrFocus=Vz.bindTo(this.contextKeyService),this.hasDoubleSelection=jz.bindTo(this.contextKeyService),this.hasMultiSelection=Uz.bindTo(this.contextKeyService),this.treeElementCanCollapse=Gz.bindTo(this.contextKeyService),this.treeElementHasParent=Yz.bindTo(this.contextKeyService),this.treeElementCanExpand=Qz.bindTo(this.contextKeyService),this.treeElementHasChild=Xz.bindTo(this.contextKeyService),this.treeFindOpen=Zz.bindTo(this.contextKeyService),this.treeStickyScrollFocused=Wz.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=vW(o),this.updateStyleOverrides(i);const l=()=>{const t=e.getFocus()[0];if(!t)return;const n=e.getNode(t);this.treeElementCanCollapse.set(n.collapsible&&!n.collapsed),this.treeElementHasParent.set(!!e.getParentElement(t)),this.treeElementCanExpand.set(n.collapsible&&n.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(t))},c=new Set;c.add(Jz),c.add(eW),this.disposables.push(this.contextKeyService,r.register(e),e.onDidChangeSelection((()=>{const t=e.getSelection(),n=e.getFocus();this.contextKeyService.bufferChangeEvents((()=>{this.hasSelectionOrFocus.set(t.length>0||n.length>0),this.hasMultiSelection.set(t.length>1),this.hasDoubleSelection.set(2===t.length)}))})),e.onDidChangeFocus((()=>{const t=e.getSelection(),n=e.getFocus();this.hasSelectionOrFocus.set(t.length>0||n.length>0),l()})),e.onDidChangeCollapseState(l),e.onDidChangeModel(l),e.onDidChangeFindOpenState((e=>this.treeFindOpen.set(e))),e.onDidChangeStickyScrollFocused((e=>this.treeStickyScrollFocused.set(e))),o.onDidChangeConfiguration((i=>{let s={};if(i.affectsConfiguration(iW)&&(this._useAltAsMultipleSelectionModifier=vW(o)),i.affectsConfiguration(hW)){const e=o.getValue(hW);s={...s,indent:e}}if(i.affectsConfiguration(dW)&&void 0===t.renderIndentGuides){const e=o.getValue(dW);s={...s,renderIndentGuides:e}}if(i.affectsConfiguration(fW)){const e=Boolean(o.getValue(fW));s={...s,smoothScrolling:e}}if(i.affectsConfiguration(oW)||i.affectsConfiguration(lW)){const e=RW(o);s={...s,defaultFindMode:e}}if(i.affectsConfiguration(aW)||i.affectsConfiguration(lW)){const e=n();s={...s,typeNavigationMode:e}}if(i.affectsConfiguration(uW)){const e=OW(o);s={...s,defaultFindMatchType:e}}if(i.affectsConfiguration(rW)&&void 0===t.horizontalScrolling){const e=Boolean(o.getValue(rW));s={...s,horizontalScrolling:e}}if(i.affectsConfiguration(cW)){const e=Boolean(o.getValue(cW));s={...s,scrollByPage:e}}if(i.affectsConfiguration(mW)&&void 0===t.expandOnlyOnTwistieClick&&(s={...s,expandOnlyOnTwistieClick:"doubleClick"===o.getValue(mW)}),i.affectsConfiguration(bW)){const e=o.getValue(bW);s={...s,enableStickyScroll:e}}if(i.affectsConfiguration(_W)){const e=Math.max(1,o.getValue(_W));s={...s,stickyScrollMaxItemCount:e}}if(i.affectsConfiguration(gW)){const e=o.getValue(gW);s={...s,mouseWheelScrollSensitivity:e}}if(i.affectsConfiguration(pW)){const e=o.getValue(pW);s={...s,fastScrollSensitivity:e}}Object.keys(s).length>0&&e.updateOptions(s)})),this.contextKeyService.onDidChangeContext((t=>{t.affectsSome(c)&&e.updateOptions({typeNavigationMode:n()})}))),this.navigator=new DW(e,{configurationService:o,...t}),this.disposables.push(this.navigator)}updateOptions(e){void 0!==e.multipleSelectionSupport&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?KP(e):qP)}dispose(){this.disposables=Gt(this.disposables)}};FW=Oz([Pz(4,ia),Pz(5,Fz),Pz(6,od)],FW);var BW;ya.as(yd).registerConfiguration({id:"workbench",order:7,title:G("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[iW]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[G("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),G("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:G({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[sW]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:G({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[rW]:{type:"boolean",default:!1,description:G("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[cW]:{type:"boolean",default:!1,description:G("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[hW]:{type:"number",default:8,minimum:4,maximum:40,description:G("tree indent setting","Controls tree indentation in pixels.")},[dW]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:G("render tree indent guides","Controls whether the tree should render indent guides.")},[fW]:{type:"boolean",default:!1,description:G("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[gW]:{type:"number",default:1,markdownDescription:G("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[pW]:{type:"number",default:5,markdownDescription:G("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[oW]:{type:"string",enum:["highlight","filter"],enumDescriptions:[G("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),G("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:G("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[lW]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[G("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),G("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),G("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:G("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:G("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and\t'workbench.list.typeNavigationMode' instead.")},[uW]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[G("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),G("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:G("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[mW]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:G("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[bW]:{type:"boolean",default:!0,description:G("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[_W]:{type:"number",minimum:1,default:7,markdownDescription:G("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when `#workbench.tree.enableStickyScroll#` is enabled.")},[aW]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:G("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}}),function(e){e[e.PRESERVE=0]="PRESERVE",e[e.LAST=1]="LAST"}(BW||(BW={}));const zW="workbench.contributions.quickaccess";ya.add(zW,new class{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return 0===e.prefix.length?this.defaultProvider=e:this.providers.push(e),this.providers.sort(((e,t)=>t.prefix.length-e.prefix.length)),Qt((()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)}))}getQuickAccessProviders(){return u([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find((t=>e.startsWith(t.prefix)))||void 0||this.defaultProvider}});const WW={ctrlCmd:!1,alt:!1};var HW,VW;!function(e){e[e.Blur=1]="Blur",e[e.Gesture=2]="Gesture",e[e.Other=3]="Other"}(HW||(HW={})),function(e){e[e.NONE=0]="NONE",e[e.FIRST=1]="FIRST",e[e.SECOND=2]="SECOND",e[e.LAST=3]="LAST"}(VW||(VW={}));new class{constructor(e){this.options=e}};const jW=ro("quickInputService");var UW=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},qW=function(e,t){return function(n,i){t(n,i,e)}};let KW=class extends Zt{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=ya.as(zW),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var i;const[s,r]=this.getOrInstantiateProvider(e),o=this.visibleQuickAccess,a=null===o||void 0===o?void 0:o.descriptor;if(o&&r&&a===r)return e===r.prefix||(null===n||void 0===n?void 0:n.preserveValue)||(o.picker.value=e),void this.adjustValueSelection(o.picker,r,n);if(r&&!(null===n||void 0===n?void 0:n.preserveValue)){let t;if(o&&a&&a!==r){const e=o.value.substr(a.prefix.length);e&&(t="".concat(r.prefix).concat(e))}if(!t){const e=null===s||void 0===s?void 0:s.defaultFilterValue;e===BW.LAST?t=this.lastAcceptedPickerValues.get(r):"string"===typeof e&&(t="".concat(r.prefix).concat(e))}"string"===typeof t&&(e=t)}const l=new Xt,c=l.add(this.quickInputService.createQuickPick());let u;c.value=e,this.adjustValueSelection(c,r,n),c.placeholder=null===r||void 0===r?void 0:r.placeholder,c.quickNavigate=null===n||void 0===n?void 0:n.quickNavigateConfiguration,c.hideInput=!!c.quickNavigate&&!o,("number"===typeof(null===n||void 0===n?void 0:n.itemActivation)||(null===n||void 0===n?void 0:n.quickNavigateConfiguration))&&(c.itemActivation=null!==(i=null===n||void 0===n?void 0:n.itemActivation)&&void 0!==i?i:VW.SECOND),c.contextKey=null===r||void 0===r?void 0:r.contextKey,c.filterValue=e=>e.substring(r?r.prefix.length:0),t&&(u=new hl,l.add(rn.once(c.onWillAccept)((e=>{e.veto(),c.hide()})))),l.add(this.registerPickerListeners(c,s,r,e,null===n||void 0===n?void 0:n.providerOptions));const h=l.add(new Sn);return s&&l.add(s.provide(c,h.token,null===n||void 0===n?void 0:n.providerOptions)),rn.once(c.onDidHide)((()=>{0===c.selectedItems.length&&h.cancel(),l.dispose(),null===u||void 0===u||u.complete(c.selectedItems.slice(0))})),c.show(),t?null===u||void 0===u?void 0:u.p:void 0}adjustValueSelection(e,t,n){var i;let s;s=(null===n||void 0===n?void 0:n.preserveValue)?[e.value.length,e.value.length]:[null!==(i=null===t||void 0===t?void 0:t.prefix.length)&&void 0!==i?i:0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,n,i,s){const r=new Xt,o=this.visibleQuickAccess={picker:e,descriptor:n,value:i};return r.add(Qt((()=>{o===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)}))),r.add(e.onDidChangeValue((e=>{const[n]=this.getOrInstantiateProvider(e);n!==t?this.show(e,{preserveValue:!0,providerOptions:s}):o.value=e}))),n&&r.add(e.onDidAccept((()=>{this.lastAcceptedPickerValues.set(n,e.value)}))),r}getOrInstantiateProvider(e){const t=this.registry.getQuickAccessProvider(e);if(!t)return[void 0,void 0];let n=this.mapProviderToDescriptor.get(t);return n||(n=this.instantiationService.createInstance(t.ctor),this.mapProviderToDescriptor.set(t,n)),[n,t]}};KW=UW([qW(0,jW),qW(1,so)],KW);class GW{constructor(e,t){var n;this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=null!==(n=null===t||void 0===t?void 0:t.supportIcons)&&void 0!==n&&n,this.domNode=Du(e,Mu("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e||(e=""),(arguments.length>3?arguments[3]:void 0)&&(e=GW.escapeNewLines(e,t)),this.didEverRender&&this.text===e&&this.title===n&&j(this.highlights,t)||(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const i=this.text.substring(t,n.start);this.supportIcons?e.push(...b$(i)):e.push(i),t=n.start}const i=this.text.substring(t,n.end),s=Mu("span.highlight",void 0,...this.supportIcons?b$(i):[i]);n.extraClasses&&s.classList.add(...n.extraClasses),e.push(s),t=n.end}if(t<this.text.length){const n=this.text.substring(t);this.supportIcons?e.push(...b$(n)):e.push(n)}Tu(this.domNode,...e),this.title?this.domNode.title=this.title:this.domNode.removeAttribute("title"),this.didEverRender=!0}static escapeNewLines(e,t){let n=0,i=0;return e.replace(/\r\n|\r|\n/g,((e,s)=>{i="\r\n"===e?-1:0,s+=n;for(const n of t)n.end<=s||(n.start>=s&&(n.start+=i),n.end>=s&&(n.end+=i));return n+=i,"\u23ce"}))}}class YW{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set className(e){this.disposed||e===this._className||(this._className=e,this._element.className=e)}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class QW extends Zt{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new YW(Du(e,Mu(".monaco-icon-label")))),this.labelContainer=Du(this.domNode.element,Mu(".monaco-icon-label-container")),this.nameContainer=Du(this.labelContainer,Mu("span.monaco-icon-name-container")),(null===t||void 0===t?void 0:t.supportHighlights)||(null===t||void 0===t?void 0:t.supportIcons)?this.nameNode=new ZW(this.nameContainer,!!t.supportIcons):this.nameNode=new XW(this.nameContainer),this.hoverDelegate=null===t||void 0===t?void 0:t.hoverDelegate}get element(){return this.domNode.element}setLabel(e,t,n){var i;const s=["monaco-icon-label"],r=["monaco-icon-label-container"];let o="";if(n&&(n.extraClasses&&s.push(...n.extraClasses),n.italic&&s.push("italic"),n.strikethrough&&s.push("strikethrough"),n.disabledCommand&&r.push("disabled"),n.title&&("string"===typeof n.title?o+=n.title:o+=e)),this.domNode.className=s.join(" "),this.domNode.element.setAttribute("aria-label",o),this.labelContainer.className=r.join(" "),this.setupHover((null===n||void 0===n?void 0:n.descriptionTitle)?this.labelContainer:this.element,null===n||void 0===n?void 0:n.title),this.nameNode.setLabel(e,n),t||this.descriptionNode){const e=this.getOrCreateDescriptionNode();e instanceof GW?(e.set(t||"",n?n.descriptionMatches:void 0,void 0,null===n||void 0===n?void 0:n.labelEscapeNewLines),this.setupHover(e.element,null===n||void 0===n?void 0:n.descriptionTitle)):(e.textContent=t&&(null===n||void 0===n?void 0:n.labelEscapeNewLines)?GW.escapeNewLines(t,[]):t||"",this.setupHover(e.element,(null===n||void 0===n?void 0:n.descriptionTitle)||""),e.empty=!t)}if((null===n||void 0===n?void 0:n.suffix)||this.suffixNode){this.getOrCreateSuffixNode().textContent=null!==(i=null===n||void 0===n?void 0:n.suffix)&&void 0!==i?i:""}}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),t)if(this.hoverDelegate){const n=DO(this.hoverDelegate,e,t);n&&this.customHovers.set(e,n)}else!function(e,t){L(t)?e.title=oM(t):(null===t||void 0===t?void 0:t.markdownNotSupportedFallback)?e.title=t.markdownNotSupportedFallback:e.removeAttribute("title")}(e,t);else e.removeAttribute("title")}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const n=this._register(new YW((e=this.nameContainer,t=Mu("span.monaco-icon-suffix-container"),e.after(t),t)));this.suffixNode=this._register(new YW(Du(n.element,Mu("span.label-suffix"))))}var e,t;return this.suffixNode}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){const t=this._register(new YW(Du(this.labelContainer,Mu("span.monaco-icon-description-container"))));(null===(e=this.creationOptions)||void 0===e?void 0:e.supportDescriptionHighlights)?this.descriptionNode=new GW(Du(t.element,Mu("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons}):this.descriptionNode=this._register(new YW(Du(t.element,Mu("span.label-description"))))}return this.descriptionNode}}class XW{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(this.label!==e||!j(this.options,t))if(this.label=e,this.options=t,"string"===typeof e)this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=Du(this.container,Mu("a.label-name",{id:null===t||void 0===t?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const i=e[n],s=(null===t||void 0===t?void 0:t.domId)&&"".concat(null===t||void 0===t?void 0:t.domId,"_").concat(n);Du(this.container,Mu("a.label-name",{id:s,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},i)),n<e.length-1&&Du(this.container,Mu("span.label-separator",void 0,(null===t||void 0===t?void 0:t.separator)||"/"))}}}}class ZW{constructor(e,t){this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(this.label!==e||!j(this.options,t))if(this.label=e,this.options=t,"string"===typeof e)this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=new GW(Du(this.container,Mu("a.label-name",{id:null===t||void 0===t?void 0:t.domId})),{supportIcons:this.supportIcons})),this.singleLabel.set(e,null===t||void 0===t?void 0:t.matches,void 0,null===t||void 0===t?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=(null===t||void 0===t?void 0:t.separator)||"/",i=function(e,t,n){if(!n)return;let i=0;return e.map((e=>{const s={start:i,end:i+e.length},r=n.map((e=>oO.intersect(s,e))).filter((e=>!oO.isEmpty(e))).map((e=>{let{start:t,end:n}=e;return{start:t-i,end:n-i}}));return i=s.end+t.length,r}))}(e,n,null===t||void 0===t?void 0:t.matches);for(let s=0;s<e.length;s++){const r=e[s],o=i?i[s]:void 0,a=Mu("a.label-name",{id:(null===t||void 0===t?void 0:t.domId)&&"".concat(null===t||void 0===t?void 0:t.domId,"_").concat(s),"data-icon-label-count":e.length,"data-icon-label-index":s,role:"treeitem"});new GW(Du(this.container,a),{supportIcons:this.supportIcons}).set(r,o,void 0,null===t||void 0===t?void 0:t.labelEscapeNewLines),s<e.length-1&&Du(a,Mu("span.label-separator",void 0,n))}}}}const JW=Mu;class eH{constructor(e,t,n){this.os=t,this.keyElements=new Set,this.options=n||Object.create(null);const i=this.options.keybindingLabelForeground;this.domNode=Du(e,JW(".monaco-keybinding")),i&&(this.domNode.style.color=i),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&eH.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){var e;if(this.clear(),this.keybinding){const t=this.keybinding.getChords();t[0]&&this.renderChord(this.domNode,t[0],this.matches?this.matches.firstPart:null);for(let e=1;e<t.length;e++)Du(this.domNode,JW("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,t[e],this.matches?this.matches.chordPart:null);const n=null!==(e=this.options.disableTitle)&&void 0!==e&&e?void 0:this.keybinding.getAriaLabel()||void 0;void 0!==n?this.domNode.title=n:this.domNode.removeAttribute("title")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){Fc(this.domNode),this.keyElements.clear()}renderChord(e,t,n){const i=IR.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,i.ctrlKey,Boolean(null===n||void 0===n?void 0:n.ctrlKey),i.separator),t.shiftKey&&this.renderKey(e,i.shiftKey,Boolean(null===n||void 0===n?void 0:n.shiftKey),i.separator),t.altKey&&this.renderKey(e,i.altKey,Boolean(null===n||void 0===n?void 0:n.altKey),i.separator),t.metaKey&&this.renderKey(e,i.metaKey,Boolean(null===n||void 0===n?void 0:n.metaKey),i.separator);const s=t.keyLabel;s&&this.renderKey(e,s,Boolean(null===n||void 0===n?void 0:n.keyCode),"")}renderKey(e,t,n,i){Du(e,this.createKeyElement(t,n?".highlight":"")),i&&Du(e,JW("span.monaco-keybinding-key-separator",void 0,i))}renderUnbound(e){Du(e,this.createKeyElement(G("unbound","Unbound")))}createKeyElement(e){const t=JW("span.monaco-keybinding-key"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""),void 0,e);return this.keyElements.add(t),this.options.keybindingLabelBackground&&(t.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(t.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(t.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(t.style.boxShadow="inset 0 -1px 0 ".concat(this.options.keybindingLabelShadow)),t}static areSame(e,t){return e===t||!e&&!t||!!e&&!!t&&j(e.firstPart,t.firstPart)&&j(e.chordPart,t.chordPart)}}const tH=new Ps((()=>{const e=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}));new Ps((()=>({collator:new Intl.Collator(void 0,{numeric:!0})}))),new Ps((()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})})));function nH(e,t,n){const i=e.toLowerCase(),s=t.toLowerCase(),r=function(e,t,n){const i=e.toLowerCase(),s=t.toLowerCase(),r=i.startsWith(n),o=s.startsWith(n);if(r!==o)return r?-1:1;if(r&&o){if(i.length<s.length)return-1;if(i.length>s.length)return 1}return 0}(e,t,n);if(r)return r;const o=i.endsWith(n);if(o!==s.endsWith(n))return o?-1:1;const a=function(e,t){const n=e||"",i=t||"",s=tH.value.collator.compare(n,i);return tH.value.collatorIsNumeric&&0===s&&n!==i?n<i?-1:1:s}(i,s);return 0!==a?a:i.localeCompare(s)}var iH=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};class sH{constructor(e){this.nodes=e}toString(){return this.nodes.map((e=>"string"===typeof e?e:e.label)).join("")}}iH([oS],sH.prototype,"toString",null);const rH=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;const oH={},aH=new gM("quick-input-button-icon-");function lH(e,t,n){let i=e.iconClass||function(e){if(!e)return;let t;const n=e.dark.toString();return oH[n]?t=oH[n]:(t=aH.nextId(),yu(".".concat(t,", .hc-light .").concat(t),"background-image: ".concat(Bu(e.light||e.dark))),yu(".vs-dark .".concat(t,", .hc-black .").concat(t),"background-image: ".concat(Bu(e.dark))),oH[n]=t),t}(e.iconPath);return e.alwaysVisible&&(i=i?"".concat(i," always-visible"):"always-visible"),{id:t,label:"",tooltip:e.tooltip||"",class:i,enabled:!0,run:n}}function cH(e,t,n){Tu(t);const i=function(e){const t=[];let n,i=0;for(;n=rH.exec(e);){n.index-i>0&&t.push(e.substring(i,n.index));const[,s,r,,o]=n;o?t.push({label:s,href:r,title:o}):t.push({label:s,href:r}),i=n.index+n[0].length}return i<e.length&&t.push(e.substring(i)),new sH(t)}(e);let s=0;for(const r of i.nodes)if("string"===typeof r)t.append(...b$(r));else{let e=r.title;!e&&r.href.startsWith("command:")?e=G("executeCommand","Click to execute command '{0}'",r.href.substring(8)):e||(e=r.href);const i=Mu("a",{href:r.href,title:e,tabIndex:s++},r.label);i.style.textDecoration="underline";const o=e=>{Cu(e)&&xu(e,!0),n.callback(r.href)},a=n.disposables.add(new MS(i,ku.CLICK)).event,l=n.disposables.add(new MS(i,ku.KEY_DOWN)).event,c=rn.chain(l,(e=>e.filter((e=>{const t=new ja(e);return t.equals(10)||t.equals(3)}))));n.disposables.add(cS.addTarget(i));const u=n.disposables.add(new MS(i,aS.Tap)).event;rn.any(a,u,c)(o,null,n.disposables),t.appendChild(i)}}var uH=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o};const hH=Mu;class dH{constructor(e,t,n,i,s,r,o){var a,l,c;this._checked=!1,this._hidden=!1,this.hasCheckbox=i,this.index=n,this.fireButtonTriggered=s,this.fireSeparatorButtonTriggered=r,this._onChecked=o,this.onChecked=i?rn.map(rn.filter(this._onChecked.event,(e=>e.listElement===this)),(e=>e.checked)):rn.None,"separator"===e.type?this._separator=e:(this.item=e,t&&"separator"===t.type&&!t.buttons&&(this._separator=t),this.saneDescription=this.item.description,this.saneDetail=this.item.detail,this._labelHighlights=null===(a=this.item.highlights)||void 0===a?void 0:a.label,this._descriptionHighlights=null===(l=this.item.highlights)||void 0===l?void 0:l.description,this._detailHighlights=null===(c=this.item.highlights)||void 0===c?void 0:c.detail,this.saneTooltip=this.item.tooltip),this._init=new Ps((()=>{var t;const n=null!==(t=e.label)&&void 0!==t?t:"",i=lM(n).text.trim(),s=e.ariaLabel||[n,this.saneDescription,this.saneDetail].map((e=>{return(t=e)?t.replace(/\$\((.*?)\)/g,((e,t)=>" ".concat(t," "))).trim():"";var t})).filter((e=>!!e)).join(", ");return{saneLabel:n,saneSortLabel:i,saneAriaLabel:s}}))}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({listElement:this,checked:e}))}get separator(){return this._separator}set separator(e){this._separator=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class fH{constructor(e,t){this.themeService=e,this.hoverDelegate=t}get templateId(){return fH.ID}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=[],t.toDisposeTemplate=[],t.entry=Du(e,hH(".quick-input-list-entry"));const n=Du(t.entry,hH("label.quick-input-list-label"));t.toDisposeTemplate.push(Hc(n,ku.CLICK,(e=>{t.checkbox.offsetParent||e.preventDefault()}))),t.checkbox=Du(n,hH("input.quick-input-list-checkbox")),t.checkbox.type="checkbox",t.toDisposeTemplate.push(Hc(t.checkbox,ku.CHANGE,(e=>{t.element.checked=t.checkbox.checked})));const i=Du(n,hH(".quick-input-list-rows")),s=Du(i,hH(".quick-input-list-row")),r=Du(i,hH(".quick-input-list-row"));t.label=new QW(s,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.push(t.label),t.icon=Au(t.label.element,hH(".quick-input-list-icon"));const o=Du(s,hH(".quick-input-list-entry-keybinding"));t.keybinding=new eH(o,De);const a=Du(r,hH(".quick-input-list-label-meta"));return t.detail=new QW(a,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.push(t.detail),t.separator=Du(t.entry,hH(".quick-input-list-separator")),t.actionBar=new rF(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.push(t.actionBar),t}renderElement(e,t,n){var i,s,r,o;n.element=e,e.element=null!==(i=n.entry)&&void 0!==i?i:void 0;const a=e.item?e.item:e.separator;n.checkbox.checked=e.checked,n.toDisposeElement.push(e.onChecked((e=>n.checkbox.checked=e)));const{labelHighlights:l,descriptionHighlights:c,detailHighlights:u}=e;if(null===(s=e.item)||void 0===s?void 0:s.iconPath){const t=$y(this.themeService.getColorTheme().type)?e.item.iconPath.dark:null!==(r=e.item.iconPath.light)&&void 0!==r?r:e.item.iconPath.dark,i=fi.revive(t);n.icon.className="quick-input-list-icon",n.icon.style.backgroundImage=Bu(i)}else n.icon.style.backgroundImage="",n.icon.className=(null===(o=e.item)||void 0===o?void 0:o.iconClass)?"quick-input-list-icon ".concat(e.item.iconClass):"";const h={matches:l||[],descriptionTitle:e.saneTooltip?void 0:e.saneDescription,descriptionMatches:c||[],labelEscapeNewLines:!0};"separator"!==a.type?(h.extraClasses=a.iconClasses,h.italic=a.italic,h.strikethrough=a.strikethrough,n.entry.classList.remove("quick-input-list-separator-as-item")):n.entry.classList.add("quick-input-list-separator-as-item"),n.label.setLabel(e.saneLabel,e.saneDescription,h),n.keybinding.set("separator"===a.type?void 0:a.keybinding),e.saneDetail?(n.detail.element.style.display="",n.detail.setLabel(e.saneDetail,void 0,{matches:u,title:e.saneTooltip?void 0:e.saneDetail,labelEscapeNewLines:!0})):n.detail.element.style.display="none",e.item&&e.separator&&e.separator.label?(n.separator.textContent=e.separator.label,n.separator.style.display=""):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!e.separator);const d=a.buttons;d&&d.length?(n.actionBar.push(d.map(((t,n)=>lH(t,"id-".concat(n),(()=>"separator"!==a.type?e.fireButtonTriggered({button:t,item:a}):e.fireSeparatorButtonTriggered({button:t,separator:a}))))),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){n.toDisposeElement=Gt(n.toDisposeElement),n.actionBar.clear()}disposeTemplate(e){e.toDisposeElement=Gt(e.toDisposeElement),e.toDisposeTemplate=Gt(e.toDisposeTemplate)}}fH.ID="listelement";class gH{getHeight(e){return e.item?e.saneDetail?44:22:24}getTemplateId(e){return fH.ID}}var pH;!function(e){e[e.First=1]="First",e[e.Second=2]="Second",e[e.Last=3]="Last",e[e.Next=4]="Next",e[e.Previous=5]="Previous",e[e.NextPage=6]="NextPage",e[e.PreviousPage=7]="PreviousPage"}(pH||(pH={}));class mH{constructor(e,t,n,i){this.parent=e,this.options=n,this.inputElements=[],this.elements=[],this.elementsToIndexes=new Map,this.matchOnDescription=!1,this.matchOnDetail=!1,this.matchOnLabel=!0,this.matchOnLabelMode="fuzzy",this.sortByLabel=!0,this._onChangedAllVisibleChecked=new un,this.onChangedAllVisibleChecked=this._onChangedAllVisibleChecked.event,this._onChangedCheckedCount=new un,this.onChangedCheckedCount=this._onChangedCheckedCount.event,this._onChangedVisibleCount=new un,this.onChangedVisibleCount=this._onChangedVisibleCount.event,this._onChangedCheckedElements=new un,this.onChangedCheckedElements=this._onChangedCheckedElements.event,this._onButtonTriggered=new un,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new un,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._onKeyDown=new un,this.onKeyDown=this._onKeyDown.event,this._onLeave=new un,this.onLeave=this._onLeave.event,this._listElementChecked=new un,this._fireCheckedEvents=!0,this.elementDisposables=[],this.disposables=[],this.id=t,this.container=Du(this.parent,hH(".quick-input-list"));const s=new gH,r=new _H;this.list=n.createList("QuickInput",this.container,s,[new fH(i,n.hoverDelegate)],{identityProvider:{getId:e=>{var t,n,i,s,r,o,a,l;return null!==(l=null!==(o=null!==(s=null!==(n=null===(t=e.item)||void 0===t?void 0:t.id)&&void 0!==n?n:null===(i=e.item)||void 0===i?void 0:i.label)&&void 0!==s?s:null===(r=e.separator)||void 0===r?void 0:r.id)&&void 0!==o?o:null===(a=e.separator)||void 0===a?void 0:a.label)&&void 0!==l?l:""}},setRowLineHeight:!1,multipleSelectionSupport:!1,horizontalScrolling:!1,accessibilityProvider:r}),this.list.getHTMLElement().id=t,this.disposables.push(this.list),this.disposables.push(this.list.onKeyDown((e=>{const t=new ja(e);switch(t.keyCode){case 10:this.toggleCheckbox();break;case 31:(_e?e.metaKey:e.ctrlKey)&&this.list.setFocus(p(this.list.length));break;case 16:{const e=this.list.getFocus();1===e.length&&0===e[0]&&this._onLeave.fire();break}case 18:{const e=this.list.getFocus();1===e.length&&e[0]===this.list.length-1&&this._onLeave.fire();break}}this._onKeyDown.fire(t)}))),this.disposables.push(this.list.onMouseDown((e=>{2!==e.browserEvent.button&&e.browserEvent.preventDefault()}))),this.disposables.push(zc(this.container,ku.CLICK,(e=>{(e.x||e.y)&&this._onLeave.fire()}))),this.disposables.push(this.list.onMouseMiddleClick((e=>{this._onLeave.fire()}))),this.disposables.push(this.list.onContextMenu((e=>{"number"===typeof e.index&&(e.browserEvent.preventDefault(),this.list.setSelection([e.index]))})));const o=new tl(n.hoverDelegate.delay);this.disposables.push(this.list.onMouseOver((async e=>{var t;if(e.browserEvent.target instanceof HTMLAnchorElement)o.cancel();else if(e.browserEvent.relatedTarget instanceof HTMLAnchorElement||!su(e.browserEvent.relatedTarget,null===(t=e.element)||void 0===t?void 0:t.element))try{await o.trigger((async()=>{e.element&&this.showHover(e.element)}))}catch(e){if(!Rt(e))throw e}}))),this.disposables.push(this.list.onMouseOut((e=>{var t;su(e.browserEvent.relatedTarget,null===(t=e.element)||void 0===t?void 0:t.element)||o.cancel()}))),this.disposables.push(o),this.disposables.push(this._listElementChecked.event((e=>this.fireCheckedEvents()))),this.disposables.push(this._onChangedAllVisibleChecked,this._onChangedCheckedCount,this._onChangedVisibleCount,this._onChangedCheckedElements,this._onButtonTriggered,this._onSeparatorButtonTriggered,this._onLeave,this._onKeyDown)}get onDidChangeFocus(){return rn.map(this.list.onDidChangeFocus,(e=>e.elements.map((e=>e.item))))}get onDidChangeSelection(){return rn.map(this.list.onDidChangeSelection,(e=>({items:e.elements.map((e=>e.item)),event:e.browserEvent})))}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get ariaLabel(){return this.list.getHTMLElement().ariaLabel}set ariaLabel(e){this.list.getHTMLElement().ariaLabel=e}getAllVisibleChecked(){return this.allVisibleChecked(this.elements,!1)}allVisibleChecked(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];for(let n=0,i=e.length;n<i;n++){const i=e[n];if(!i.hidden){if(!i.checked)return!1;t=!0}}return t}getCheckedCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].checked&&e++;return e}getVisibleCount(){let e=0;const t=this.elements;for(let n=0,i=t.length;n<i;n++)t[n].hidden||e++;return e}setAllVisibleChecked(e){try{this._fireCheckedEvents=!1,this.elements.forEach((t=>{t.hidden||(t.checked=e)}))}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}setElements(e){this.elementDisposables=Gt(this.elementDisposables);const t=e=>this.fireButtonTriggered(e),n=e=>this.fireSeparatorButtonTriggered(e);this.inputElements=e;const i=new Map,s=this.parent.classList.contains("show-checkboxes");this.elements=e.reduce(((r,o,a)=>{var l;const c=a>0?e[a-1]:void 0;if("separator"===o.type&&!o.buttons)return r;const u=new dH(o,c,a,s,t,n,this._listElementChecked),h=r.length;return r.push(u),i.set(null!==(l=u.item)&&void 0!==l?l:u.separator,h),r}),[]),this.elementsToIndexes=i,this.list.splice(0,this.list.length),this.list.splice(0,this.list.length,this.elements),this._onChangedVisibleCount.fire(this.elements.length)}getFocusedElements(){return this.list.getFocusedElements().map((e=>e.item))}setFocusedElements(e){if(this.list.setFocus(e.filter((e=>this.elementsToIndexes.has(e))).map((e=>this.elementsToIndexes.get(e)))),e.length>0){const e=this.list.getFocus()[0];"number"===typeof e&&this.list.reveal(e)}}getActiveDescendant(){return this.list.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){this.list.setSelection(e.filter((e=>this.elementsToIndexes.has(e))).map((e=>this.elementsToIndexes.get(e))))}getCheckedElements(){return this.elements.filter((e=>e.checked)).map((e=>e.item)).filter((e=>!!e))}setCheckedElements(e){try{this._fireCheckedEvents=!1;const t=new Set;for(const n of e)t.add(n);for(const e of this.elements)e.checked=t.has(e.item)}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}set enabled(e){this.list.getHTMLElement().style.pointerEvents=e?"":"none"}focus(e){if(!this.list.length)return;switch(e===pH.Second&&this.list.length<2&&(e=pH.First),e){case pH.First:this.list.scrollTop=0,this.list.focusFirst(void 0,(e=>!!e.item));break;case pH.Second:this.list.scrollTop=0,this.list.focusNth(1,void 0,(e=>!!e.item));break;case pH.Last:this.list.scrollTop=this.list.scrollHeight,this.list.focusLast(void 0,(e=>!!e.item));break;case pH.Next:{this.list.focusNext(void 0,!0,void 0,(e=>!!e.item));const e=this.list.getFocus()[0];0!==e&&!this.elements[e-1].item&&this.list.firstVisibleIndex>e-1&&this.list.reveal(e-1);break}case pH.Previous:{this.list.focusPrevious(void 0,!0,void 0,(e=>!!e.item));const e=this.list.getFocus()[0];0!==e&&!this.elements[e-1].item&&this.list.firstVisibleIndex>e-1&&this.list.reveal(e-1);break}case pH.NextPage:this.list.focusNextPage(void 0,(e=>!!e.item));break;case pH.PreviousPage:this.list.focusPreviousPage(void 0,(e=>!!e.item))}const t=this.list.getFocus()[0];"number"===typeof t&&this.list.reveal(t)}clearFocus(){this.list.setFocus([])}domFocus(){this.list.domFocus()}showHover(e){var t,n,i;this._lastHover&&!this._lastHover.isDisposed&&(null===(n=(t=this.options.hoverDelegate).onDidHideHover)||void 0===n||n.call(t),null===(i=this._lastHover)||void 0===i||i.dispose()),e.element&&e.saneTooltip&&(this._lastHover=this.options.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:e=>{this.options.linkOpenerDelegate(e)},appearance:{showPointer:!0},container:this.container,position:{hoverPosition:1}},!1))}layout(e){this.list.getHTMLElement().style.maxHeight=e?"".concat(44*Math.floor(e/44)+6,"px"):"",this.list.layout()}filter(e){if(!(this.sortByLabel||this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))return this.list.layout(),!1;const t=e;if((e=e.trim())&&(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail)){let n;this.elements.forEach((i=>{var s,r,o,a;let l;l="fuzzy"===this.matchOnLabelMode?this.matchOnLabel&&null!==(s=cM(e,lM(i.saneLabel)))&&void 0!==s?s:void 0:this.matchOnLabel&&null!==(r=function(e,t){const{text:n,iconOffsets:i}=t;if(!i||0===i.length)return bH(e,n);const s=Vs(n," "),r=n.length-s.length,o=bH(e,s);if(o)for(const a of o){const e=i[a.start+r]+r;a.start+=e,a.end+=e}return o}(t,lM(i.saneLabel)))&&void 0!==r?r:void 0;const c=this.matchOnDescription&&null!==(o=cM(e,lM(i.saneDescription||"")))&&void 0!==o?o:void 0,u=this.matchOnDetail&&null!==(a=cM(e,lM(i.saneDetail||"")))&&void 0!==a?a:void 0;if(l||c||u?(i.labelHighlights=l,i.descriptionHighlights=c,i.detailHighlights=u,i.hidden=!1):(i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=!i.item||!i.item.alwaysShow),i.item?i.separator=void 0:i.separator&&(i.hidden=!0),!this.sortByLabel){const e=i.index&&this.inputElements[i.index-1];n=e&&"separator"===e.type?e:n,n&&!i.hidden&&(i.separator=n,n=void 0)}}))}else this.elements.forEach((e=>{e.labelHighlights=void 0,e.descriptionHighlights=void 0,e.detailHighlights=void 0,e.hidden=!1;const t=e.index&&this.inputElements[e.index-1];e.item&&(e.separator=t&&"separator"===t.type&&!t.buttons?t:void 0)}));const n=this.elements.filter((e=>!e.hidden));if(this.sortByLabel&&e){const t=e.toLowerCase();n.sort(((e,n)=>function(e,t,n){const i=e.labelHighlights||[],s=t.labelHighlights||[];if(i.length&&!s.length)return-1;if(!i.length&&s.length)return 1;if(0===i.length&&0===s.length)return 0;return nH(e.saneSortLabel,t.saneSortLabel,n)}(e,n,t)))}return this.elementsToIndexes=n.reduce(((e,t,n)=>{var i;return e.set(null!==(i=t.item)&&void 0!==i?i:t.separator,n),e}),new Map),this.list.splice(0,this.list.length,n),this.list.setFocus([]),this.list.layout(),this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedVisibleCount.fire(n.length),!0}toggleCheckbox(){try{this._fireCheckedEvents=!1;const e=this.list.getFocusedElements(),t=this.allVisibleChecked(e);for(const n of e)n.checked=!t}finally{this._fireCheckedEvents=!0,this.fireCheckedEvents()}}display(e){this.container.style.display=e?"":"none"}isDisplayed(){return"none"!==this.container.style.display}dispose(){this.elementDisposables=Gt(this.elementDisposables),this.disposables=Gt(this.disposables)}fireCheckedEvents(){this._fireCheckedEvents&&(this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked()),this._onChangedCheckedCount.fire(this.getCheckedCount()),this._onChangedCheckedElements.fire(this.getCheckedElements()))}fireButtonTriggered(e){this._onButtonTriggered.fire(e)}fireSeparatorButtonTriggered(e){this._onSeparatorButtonTriggered.fire(e)}style(e){this.list.style(e)}toggleHover(){const e=this.list.getFocusedElements()[0];if(!(null===e||void 0===e?void 0:e.saneTooltip))return;if(this._lastHover&&!this._lastHover.isDisposed)return void this._lastHover.dispose();const t=this.list.getFocusedElements()[0];if(!t)return;this.showHover(t);const n=new Xt;n.add(this.list.onDidChangeFocus((e=>{e.indexes.length&&this.showHover(e.elements[0])}))),this._lastHover&&n.add(this._lastHover),this._toggleHover=n,this.elementDisposables.push(this._toggleHover)}}function bH(e,t){const n=t.toLowerCase().indexOf(e.toLowerCase());return-1!==n?[{start:n,end:n+e.length}]:null}uH([oS],mH.prototype,"onDidChangeFocus",null),uH([oS],mH.prototype,"onDidChangeSelection",null);class _H{getWidgetAriaLabel(){return G("quickInput","Quick Input")}getAriaLabel(e){var t;return(null===(t=e.separator)||void 0===t?void 0:t.label)?"".concat(e.saneAriaLabel,", ").concat(e.separator.label):e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(e.hasCheckbox)return{value:e.checked,onDidChange:e.onChecked}}}const vH={iconClass:bo.asClassName(Ti.quickInputBack),tooltip:G("quickInput.back","Back"),handle:-1};class yH extends Zt{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=yH.noPromptMessage,this._severity=QT.Ignore,this.onDidTriggerButtonEmitter=this._register(new un),this.onDidHideEmitter=this._register(new un),this.onDisposeEmitter=this._register(new un),this.visibleDisposables=this._register(new Xt),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!ke;this._ignoreFocusOut=e&&!ke,t&&this.update()}get buttons(){return this._buttons}set buttons(e){this._buttons=e,this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=null!==e&&void 0!==e?e:[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton((e=>{-1!==this.buttons.indexOf(e)&&this.onDidTriggerButtonEmitter.fire(e)}))),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:HW.Other;this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}update(){var e,t;if(!this.visible)return;const n=this.getTitle();n&&this.ui.title.textContent!==n?this.ui.title.textContent=n:n||"&nbsp;"===this.ui.title.innerHTML||(this.ui.title.innerText="\xa0");const i=this.getDescription();if(this.ui.description1.textContent!==i&&(this.ui.description1.textContent=i),this.ui.description2.textContent!==i&&(this.ui.description2.textContent=i),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?Tu(this.ui.widget,this._widget):Tu(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new sl,this.busyDelay.setIfNotSet((()=>{this.visible&&this.ui.progressBar.infinite()}),800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const e=this.buttons.filter((e=>e===vH)).map(((e,t)=>lH(e,"id-".concat(t),(async()=>this.onDidTriggerButtonEmitter.fire(e)))));this.ui.leftActionBar.push(e,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const t=this.buttons.filter((e=>e!==vH)).map(((e,t)=>lH(e,"id-".concat(t),(async()=>this.onDidTriggerButtonEmitter.fire(e)))));this.ui.rightActionBar.push(t,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const n=null!==(t=null===(e=this.toggles)||void 0===e?void 0:e.filter((e=>e instanceof uB)))&&void 0!==t?t:[];this.ui.inputBox.toggles=n}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const s=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==s&&(this._lastValidationMessage=s,Tu(this.ui.message),cH(s,this.ui.message,{callback:e=>{this.ui.linkOpenerDelegate(e)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?"".concat(this.title," (").concat(this.getSteps(),")"):this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?G("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==QT.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?"".concat(t.foreground):"",this.ui.message.style.backgroundColor=t.background?"".concat(t.background):"",this.ui.message.style.border=t.border?"1px solid ".concat(t.border):"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}yH.noPromptMessage=G("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class SH extends yH{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new un),this.onWillAcceptEmitter=this._register(new un),this.onDidAcceptEmitter=this._register(new un),this.onDidCustomEmitter=this._register(new un),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=VW.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new un),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new un),this.onDidTriggerItemButtonEmitter=this._register(new un),this.onDidTriggerSeparatorButtonEmitter=this._register(new un),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){if(this._value!==e){if(this._value=e,t||this.update(),this.visible){this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst()}this.onDidChangeValueEmitter.fire(this._value)}}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?WW:this.ui.keyMods}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(pH.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange((e=>{this.doSetValue(e,!0)}))),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown((e=>{switch(e.keyCode){case 18:this.ui.list.focus(pH.Next),this.canSelectMany&&this.ui.list.domFocus(),xu(e,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(pH.Previous):this.ui.list.focus(pH.Last),this.canSelectMany&&this.ui.list.domFocus(),xu(e,!0);break;case 12:this.ui.list.focus(pH.NextPage),this.canSelectMany&&this.ui.list.domFocus(),xu(e,!0);break;case 11:this.ui.list.focus(pH.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),xu(e,!0);break;case 17:if(!this._canAcceptInBackground)return;if(!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:!e.ctrlKey&&!e.metaKey||e.shiftKey||e.altKey||(this.ui.list.focus(pH.First),xu(e,!0));break;case 13:!e.ctrlKey&&!e.metaKey||e.shiftKey||e.altKey||(this.ui.list.focus(pH.Last),xu(e,!0))}}))),this.visibleDisposables.add(this.ui.onDidAccept((()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)}))),this.visibleDisposables.add(this.ui.onDidCustom((()=>{this.onDidCustomEmitter.fire()}))),this.visibleDisposables.add(this.ui.list.onDidChangeFocus((e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&a(e,this._activeItems,((e,t)=>e===t))||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))}))),this.visibleDisposables.add(this.ui.list.onDidChangeSelection((e=>{let{items:t,event:n}=e;this.canSelectMany?t.length&&this.ui.list.setSelectedElements([]):this.selectedItemsToConfirm!==this._selectedItems&&a(t,this._selectedItems,((e,t)=>e===t))||(this._selectedItems=t,this.onDidChangeSelectionEmitter.fire(t),t.length&&this.handleAccept(Su(n)&&1===n.button))}))),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements((e=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&a(e,this._selectedItems,((e,t)=>e===t))||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e)))}))),this.visibleDisposables.add(this.ui.list.onButtonTriggered((e=>this.onDidTriggerItemButtonEmitter.fire(e)))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered((e=>this.onDidTriggerSeparatorButtonEmitter.fire(e)))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return zc(this.ui.container,ku.KEY_UP,(e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new ja(e),n=t.keyCode;this._quickNavigate.keybindings.some((e=>{const i=e.getChords();return!(i.length>1)&&(i[0].shiftKey&&4===n?!(t.ctrlKey||t.altKey||t.metaKey):!(!i[0].altKey||6!==n)||(!(!i[0].ctrlKey||5!==n)||!(!i[0].metaKey||57!==n)))}))&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)}))}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,n={title:!!this.title||!!this.step||!!this.buttons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:"default"===this.ok?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let i=this.ariaLabel;if(!i&&n.inputBox&&(i=this.placeholder||SH.DEFAULT_ARIA_LABEL,this.title&&(i+=" - ".concat(this.title))),this.ui.list.ariaLabel!==i&&(this.ui.list.ariaLabel=null!==i&&void 0!==i?i:null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case VW.NONE:this._itemActivation=VW.FIRST;break;case VW.SECOND:this.ui.list.focus(pH.Second),this._itemActivation=VW.FIRST;break;case VW.LAST:this.ui.list.focus(pH.Last),this._itemActivation=VW.FIRST;break;default:this.trySelectFirst()}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(pH.First)),this.keepScrollPosition&&(this.scrollTop=e)}}SH.DEFAULT_ARIA_LABEL=G("quickInputBox.ariaLabel","Type to narrow down results.");class wH extends yH{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new un),this.onDidAcceptEmitter=this._register(new un),this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange((e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))}))),this.visibleDisposables.add(this.ui.onDidAccept((()=>this.onDidAcceptEmitter.fire()))),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}}class kH{get delay(){return Date.now()-this.lastHoverHideTime<200?0:this.configurationService.getValue("workbench.hover.delay")}constructor(e,t){this.configurationService=e,this.hoverService=t,this.lastHoverHideTime=0,this.placement="element"}showHover(e,t){var n;const i=(e.content instanceof HTMLElement?null!==(n=e.content.textContent)&&void 0!==n?n:"":"string"===typeof e.content?e.content:e.content.value).length>20;return this.hoverService.showHover({...e,persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:i,skipFadeInAnimation:!0}},t)}onDidHideHover(){this.lastHoverHideTime=Date.now()}}rp.white.toString(),rp.white.toString();class CH extends Zt{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new un),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const n=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,i=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=i||"",this._element.style.backgroundColor=n||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),"string"===typeof t.ariaLabel&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(cS.addTarget(this._element)),[ku.CLICK,aS.Tap].forEach((e=>{this._register(zc(this._element,e,(e=>{this.enabled?this._onDidClick.fire(e):xu(e)})))})),this._register(zc(this._element,ku.KEY_DOWN,(e=>{const t=new ja(e);let n=!1;this.enabled&&(t.equals(3)||t.equals(10))?(this._onDidClick.fire(e),n=!0):t.equals(9)&&(this._element.blur(),n=!0),n&&xu(t,!0)}))),this._register(zc(this._element,ku.MOUSE_OVER,(e=>{this._element.classList.contains("disabled")||this.updateBackground(!0)}))),this._register(zc(this._element,ku.MOUSE_OUT,(e=>{this.updateBackground(!1)}))),this.focusTracker=this._register(Lu(this._element)),this._register(this.focusTracker.onDidFocus((()=>{this.enabled&&this.updateBackground(!0)}))),this._register(this.focusTracker.onDidBlur((()=>{this.enabled&&this.updateBackground(!1)})))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let n of b$(e))if("string"===typeof n){if(n=n.trim(),""===n)continue;const e=document.createElement("span");e.textContent=n,t.push(e)}else t.push(n);return t}updateBackground(e){let t;t=this.options.secondary?e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var t,n,i;if(this._label===e)return;if(hM(this._label)&&hM(e)&&((n=this._label)===(i=e)||n&&i&&n.value===i.value&&n.isTrusted===i.isTrusted&&n.supportThemeIcons===i.supportThemeIcons&&n.supportHtml===i.supportHtml&&(n.baseUri===i.baseUri||n.baseUri&&i.baseUri&&dL(fi.from(n.baseUri),fi.from(i.baseUri)))))return;this._element.classList.add("monaco-text-button");const s=this.options.supportShortLabel?this._labelElement:this._element;if(hM(e)){const n=wM(e,{inline:!0});n.dispose();const i=null===(t=n.element.querySelector("p"))||void 0===t?void 0:t.innerHTML;if(i){const e=cc(i,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});s.innerHTML=e}else Tu(s)}else this.options.supportIcons?Tu(s,...this.getContentElements(e)):s.textContent=e;"string"===typeof this.options.title?this._element.title=this.options.title:this.options.title&&(this._element.title=LM(e)),"string"===typeof this.options.ariaLabel?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",this._element.title),this._label=e}get label(){return this._label}set icon(e){this._element.classList.add(...bo.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}}class xH{constructor(e,t,n){this.options=t,this.styles=n,this.count=0,this.element=Du(e,Mu(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){var e,t;this.element.textContent=zs(this.countFormat,this.count),this.element.title=zs(this.titleFormat,this.count),this.element.style.backgroundColor=null!==(e=this.styles.badgeBackground)&&void 0!==e?e:"",this.element.style.color=null!==(t=this.styles.badgeForeground)&&void 0!==t?t:"",this.styles.badgeBorder&&(this.element.style.border="1px solid ".concat(this.styles.badgeBorder))}}const EH="done",LH="active",DH="infinite",AH="infinite-long-running",TH="discrete";class NH extends Zt{constructor(e,t){super(),this.workedVal=0,this.showDelayedScheduler=this._register(new ol((()=>Ru(this.element)),0)),this.longRunningScheduler=this._register(new ol((()=>this.infiniteLongRunning()),NH.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(null===t||void 0===t?void 0:t.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(LH,DH,AH,TH),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(EH),this.element.classList.contains(DH)?(this.bit.style.opacity="0",e?setTimeout((()=>this.off()),200):this.off()):(this.bit.style.width="inherit",e?setTimeout((()=>this.off()),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(TH,EH,AH),this.element.classList.add(LH,DH),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(AH)}getContainer(){return this.element}}NH.LONG_RUNNING_INFINITE_THRESHOLD=1e4;const IH=Mu;class $H extends Zt{constructor(e,t,n){super(),this.parent=e,this.onKeyDown=e=>Hc(this.findInput.inputBox.inputElement,ku.KEY_DOWN,e),this.onDidChange=e=>this.findInput.onDidChange(e),this.container=Du(this.parent,IH(".quick-input-box")),this.findInput=this._register(new kB(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:n}));const i=this.findInput.inputBox.inputElement;i.role="combobox",i.ariaHasPopup="menu",i.ariaAutoComplete="list",i.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.findInput.inputBox.select(e)}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return"password"===this.findInput.inputBox.inputElement.type}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===QT.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===QT.Info?1:e===QT.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===QT.Info?1:e===QT.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}const MH=Mu;class RH extends Zt{constructor(e,t,n){super(),this.options=e,this.themeService=t,this.layoutService=n,this.enabled=!0,this.onDidAcceptEmitter=this._register(new un),this.onDidCustomEmitter=this._register(new un),this.onDidTriggerButtonEmitter=this._register(new un),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new un),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new un),this.onHide=this.onHideEmitter.event,this.idPrefix=e.idPrefix,this.parentElement=e.container,this.styles=e.styles,this._register(rn.runAndSubscribe(Rc,(e=>{let{window:t,disposables:n}=e;return this.registerKeyModsListeners(t,n)}),{window:Ms,disposables:this._store})),this._register(Oc((e=>{this.ui&&Dc(this.ui.container)===e&&this.reparentUI(this.layoutService.mainContainer)})))}registerKeyModsListeners(e,t){const n=e=>{this.keyMods.ctrlCmd=e.ctrlKey||e.metaKey,this.keyMods.alt=e.altKey};for(const i of[ku.KEY_DOWN,ku.KEY_UP,ku.MOUSE_DOWN])t.add(zc(e,i,n,!0))}getUI(e){if(this.ui)return e&&this.parentElement.ownerDocument!==this.layoutService.activeContainer.ownerDocument&&this.reparentUI(this.layoutService.activeContainer),this.ui;const t=Du(this.parentElement,MH(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const n=gu(t),i=Du(t,MH(".quick-input-titlebar")),s=this._register(new rF(i,{hoverDelegate:this.options.hoverDelegate}));s.domNode.classList.add("quick-input-left-action-bar");const r=Du(i,MH(".quick-input-title")),o=this._register(new rF(i,{hoverDelegate:this.options.hoverDelegate}));o.domNode.classList.add("quick-input-right-action-bar");const a=Du(t,MH(".quick-input-header")),l=Du(a,MH("input.quick-input-check-all"));l.type="checkbox",l.setAttribute("aria-label",G("quickInput.checkAll","Toggle all checkboxes")),this._register(Hc(l,ku.CHANGE,(e=>{const t=l.checked;E.setAllVisibleChecked(t)}))),this._register(zc(l,ku.CLICK,(e=>{(e.x||e.y)&&d.setFocus()})));const c=Du(a,MH(".quick-input-description")),u=Du(a,MH(".quick-input-and-message")),h=Du(u,MH(".quick-input-filter")),d=this._register(new $H(h,this.styles.inputBox,this.styles.toggle));d.setAttribute("aria-describedby","".concat(this.idPrefix,"message"));const f=Du(h,MH(".quick-input-visible-count"));f.setAttribute("aria-live","polite"),f.setAttribute("aria-atomic","true");const g=new xH(f,{countFormat:G({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),p=Du(h,MH(".quick-input-count"));p.setAttribute("aria-live","polite");const m=new xH(p,{countFormat:G({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),b=Du(a,MH(".quick-input-action")),_=this._register(new CH(b,this.styles.button));_.label=G("ok","OK"),this._register(_.onDidClick((e=>{this.onDidAcceptEmitter.fire()})));const v=Du(a,MH(".quick-input-action")),y=this._register(new CH(v,{...this.styles.button,supportIcons:!0}));y.label=G("custom","Custom"),this._register(y.onDidClick((e=>{this.onDidCustomEmitter.fire()})));const S=Du(u,MH("#".concat(this.idPrefix,"message.quick-input-message"))),w=this._register(new NH(t,this.styles.progressBar));w.getContainer().classList.add("quick-input-progress");const k=Du(t,MH(".quick-input-html-widget"));k.tabIndex=-1;const C=Du(t,MH(".quick-input-description")),x=this.idPrefix+"list",E=this._register(new mH(t,x,this.options,this.themeService));d.setAttribute("aria-controls",x),this._register(E.onDidChangeFocus((()=>{var e;d.setAttribute("aria-activedescendant",null!==(e=E.getActiveDescendant())&&void 0!==e?e:"")}))),this._register(E.onChangedAllVisibleChecked((e=>{l.checked=e}))),this._register(E.onChangedVisibleCount((e=>{g.setCount(e)}))),this._register(E.onChangedCheckedCount((e=>{m.setCount(e)}))),this._register(E.onLeave((()=>{setTimeout((()=>{d.setFocus(),this.controller instanceof SH&&this.controller.canSelectMany&&E.clearFocus()}),0)})));const L=Lu(t);return this._register(L),this._register(zc(t,ku.FOCUS,(e=>{su(e.relatedTarget,t)||(this.previousFocusElement=e.relatedTarget instanceof HTMLElement?e.relatedTarget:void 0)}),!0)),this._register(L.onDidBlur((()=>{this.getUI().ignoreFocusOut||this.options.ignoreFocusOut()||this.hide(HW.Blur),this.previousFocusElement=void 0}))),this._register(zc(t,ku.FOCUS,(e=>{d.setFocus()}))),this._register(Hc(t,ku.KEY_DOWN,(e=>{if(!su(e.target,k))switch(e.keyCode){case 3:xu(e,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:xu(e,!0),this.hide(HW.Gesture);break;case 2:if(!e.altKey&&!e.ctrlKey&&!e.metaKey){const n=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?n.push("input"):n.push("input[type=text]"),this.getUI().list.isDisplayed()&&n.push(".monaco-list"),this.getUI().message&&n.push(".quick-input-message a"),this.getUI().widget){if(su(e.target,this.getUI().widget))break;n.push(".quick-input-html-widget")}const i=t.querySelectorAll(n.join(", "));e.shiftKey&&e.target===i[0]?(xu(e,!0),E.clearFocus()):!e.shiftKey&&su(e.target,i[i.length-1])&&(xu(e,!0),i[0].focus())}break;case 10:e.ctrlKey&&(xu(e,!0),this.getUI().list.toggleHover())}}))),this.ui={container:t,styleSheet:n,leftActionBar:s,titleBar:i,title:r,description1:C,description2:c,widget:k,rightActionBar:o,checkAll:l,inputContainer:u,filterContainer:h,inputBox:d,visibleCountContainer:f,visibleCount:g,countContainer:p,count:m,okContainer:b,ok:_,message:S,customButtonContainer:v,customButton:y,list:E,progressBar:w,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:e=>this.show(e),hide:()=>this.hide(),setVisibilities:e=>this.setVisibilities(e),setEnabled:e=>this.setEnabled(e),setContextKey:e=>this.options.setContextKey(e),linkOpenerDelegate:e=>this.options.linkOpenerDelegate(e)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this.parentElement=e,Du(this.parentElement,this.ui.container))}pick(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vn.None;return new Promise(((i,s)=>{let r=e=>{var n;r=i,null===(n=t.onKeyMods)||void 0===n||n.call(t,o.keyMods),i(e)};if(n.isCancellationRequested)return void r(void 0);const o=this.createQuickPick();let a;const l=[o,o.onDidAccept((()=>{if(o.canSelectMany)r(o.selectedItems.slice()),o.hide();else{const e=o.activeItems[0];e&&(r(e),o.hide())}})),o.onDidChangeActive((e=>{const n=e[0];n&&t.onDidFocus&&t.onDidFocus(n)})),o.onDidChangeSelection((e=>{if(!o.canSelectMany){const t=e[0];t&&(r(t),o.hide())}})),o.onDidTriggerItemButton((e=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...e,removeItem:()=>{const t=o.items.indexOf(e.item);if(-1!==t){const e=o.items.slice(),n=e.splice(t,1),i=o.activeItems.filter((e=>e!==n[0])),s=o.keepScrollPosition;o.keepScrollPosition=!0,o.items=e,i&&(o.activeItems=i),o.keepScrollPosition=s}}}))),o.onDidTriggerSeparatorButton((e=>{var n;return null===(n=t.onDidTriggerSeparatorButton)||void 0===n?void 0:n.call(t,e)})),o.onDidChangeValue((e=>{!a||e||1===o.activeItems.length&&o.activeItems[0]===a||(o.activeItems=[a])})),n.onCancellationRequested((()=>{o.hide()})),o.onDidHide((()=>{Gt(l),r(void 0)}))];o.title=t.title,o.canSelectMany=!!t.canPickMany,o.placeholder=t.placeHolder,o.ignoreFocusOut=!!t.ignoreFocusLost,o.matchOnDescription=!!t.matchOnDescription,o.matchOnDetail=!!t.matchOnDetail,o.matchOnLabel=void 0===t.matchOnLabel||t.matchOnLabel,o.quickNavigate=t.quickNavigate,o.hideInput=!!t.hideInput,o.contextKey=t.contextKey,o.busy=!0,Promise.all([e,t.activeItem]).then((e=>{let[t,n]=e;a=n,o.busy=!1,o.items=t,o.canSelectMany&&(o.selectedItems=t.filter((e=>"separator"!==e.type&&e.picked))),a&&(o.activeItems=[a])})),o.show(),Promise.resolve(e).then(void 0,(e=>{s(e),o.hide()}))}))}createQuickPick(){const e=this.getUI(!0);return new SH(e)}createInputBox(){const e=this.getUI(!0);return new wH(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const n=this.controller;this.controller=e,null===n||void 0===n||n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",Tu(t.widget),t.rightActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(QT.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),Tu(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const i=this.options.backKeybindingLabel();vH.tooltip=i?G("quickInput.backWithKeybinding","Back ({0})",i):G("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus()}isVisible(){return!!this.ui&&"none"!==this.ui.container.style.display}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=!e.description||e.inputBox||e.checkAll?"none":"",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.display(!!e.list),t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var t,n;const i=this.controller;if(!i)return;const s=null===(t=this.ui)||void 0===t?void 0:t.container,r=s&&!hu(s);if(this.controller=null,this.onHideEmitter.fire(),s&&(s.style.display="none"),!r){let e=this.previousFocusElement;for(;e&&!e.offsetParent;)e=null!==(n=e.parentElement)&&void 0!==n?n:void 0;(null===e||void 0===e?void 0:e.offsetParent)?(e.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}i.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top="".concat(this.titleBarOffset,"px");const e=this.ui.container.style,t=Math.min(.62*this.dimension.width,RH.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&.4*this.dimension.height)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,widgetBorder:i,widgetShadow:s}=this.styles.widget;this.ui.titleBar.style.backgroundColor=null!==e&&void 0!==e?e:"",this.ui.container.style.backgroundColor=null!==t&&void 0!==t?t:"",this.ui.container.style.color=null!==n&&void 0!==n?n:"",this.ui.container.style.border=i?"1px solid ".concat(i):"",this.ui.container.style.boxShadow=s?"0 0 8px 2px ".concat(s):"",this.ui.list.style(this.styles.list);const r=[];this.styles.pickerGroup.pickerGroupBorder&&r.push(".quick-input-list .quick-input-list-entry { border-top-color:  ".concat(this.styles.pickerGroup.pickerGroupBorder,"; }")),this.styles.pickerGroup.pickerGroupForeground&&r.push(".quick-input-list .quick-input-list-separator { color:  ".concat(this.styles.pickerGroup.pickerGroupForeground,"; }")),this.styles.pickerGroup.pickerGroupForeground&&r.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push("background-color: ".concat(this.styles.keybindingLabel.keybindingLabelBackground,";")),this.styles.keybindingLabel.keybindingLabelBorder&&r.push("border-color: ".concat(this.styles.keybindingLabel.keybindingLabelBorder,";")),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push("border-bottom-color: ".concat(this.styles.keybindingLabel.keybindingLabelBottomBorder,";")),this.styles.keybindingLabel.keybindingLabelShadow&&r.push("box-shadow: inset 0 -1px 0 ".concat(this.styles.keybindingLabel.keybindingLabelShadow,";")),this.styles.keybindingLabel.keybindingLabelForeground&&r.push("color: ".concat(this.styles.keybindingLabel.keybindingLabelForeground,";")),r.push("}"));const o=r.join("\n");o!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=o)}}}RH.MAX_WIDTH=600;var OH=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},PH=function(e,t){return function(n,i){t(n,i,e)}};let FH=class extends nw{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(KW))),this._quickAccess}constructor(e,t,n,i,s,r){super(n),this.instantiationService=e,this.contextKeyService=t,this.layoutService=i,this.configurationService=s,this.hoverService=r,this._onShow=this._register(new un),this._onHide=this._register(new un),this.contexts=new Map}createController(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.layoutService,t=arguments.length>1?arguments[1]:void 0;const n={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:e=>this.setContextKey(e),linkOpenerDelegate:e=>{this.instantiationService.invokeFunction((t=>{t.get(c$).open(e,{allowCommands:!0,fromUserGesture:!0})}))},returnFocus:()=>e.focus(),createList:(e,t,n,i,s)=>this.instantiationService.createInstance(wW,e,t,n,i,s),styles:this.computeStyles(),hoverDelegate:new kH(this.configurationService,this.hoverService)},i=this._register(new RH({...n,...t},this.themeService,this.layoutService));return i.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer((t=>i.layout(t,e.activeContainerOffset.quickPickTop)))),this._register(e.onDidChangeActiveContainer((()=>{i.isVisible()||i.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)}))),this._register(i.onShow((()=>{this.resetContextKeys(),this._onShow.fire()}))),this._register(i.onHide((()=>{this.resetContextKeys(),this._onHide.fire()}))),i}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new na(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),t&&t.get()||(this.resetContextKeys(),null===t||void 0===t||t.set(!0))}resetContextKeys(){this.contexts.forEach((e=>{e.get()&&e.reset()}))}pick(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vn.None;return this.controller.pick(e,t,n)}createQuickPick(){return this.controller.createQuickPick()}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:hb(p_),quickInputForeground:hb(m_),quickInputTitleBackground:hb(b_),widgetBorder:hb(wb),widgetShadow:hb(Sb)},inputBox:VP,toggle:HP,countBadge:UP,button:zP,progressBar:WP,keybindingLabel:BP,list:KP({listBackground:p_,listFocusBackground:Sv,listFocusForeground:vv,listInactiveFocusForeground:vv,listInactiveSelectionIconForeground:yv,listInactiveFocusBackground:Sv,listFocusOutline:vb,listInactiveFocusOutline:vb}),pickerGroup:{pickerGroupBorder:hb(v_),pickerGroupForeground:hb(__)}}}};FH=OH([PH(0,so),PH(1,ia),PH(2,QS),PH(3,VN),PH(4,od),PH(5,i$)],FH);var BH=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},zH=function(e,t){return function(n,i){t(n,i,e)}};let WH=class extends FH{constructor(e,t,n,i,s,r,o){super(t,n,i,new KN(e.getContainerDomNode(),s),r,o),this.host=void 0;const a=VH.get(e);if(a){const t=a.widget;this.host={_serviceBrand:void 0,get mainContainer(){return t.getDomNode()},getContainer:()=>t.getDomNode(),get containers(){return[t.getDomNode()]},get activeContainer(){return t.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return rn.map(e.onDidLayoutChange,(e=>({container:t.getDomNode(),dimension:e})))},get onDidChangeActiveContainer(){return rn.None},get onDidAddContainer(){return rn.None},get whenActiveContainerStylesLoaded(){return Promise.resolve()},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};WH=BH([zH(1,so),zH(2,ia),zH(3,QS),zH(4,oo),zH(5,od),zH(6,i$)],WH);let HH=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(WH,e);this.mapEditorToService.set(e,t),Ht(e.onDidDispose)((()=>{n.dispose(),this.mapEditorToService.delete(e)}))}return t}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vn.None;return this.activeService.pick(e,t,n)}createQuickPick(){return this.activeService.createQuickPick()}createInputBox(){return this.activeService.createInputBox()}};HH=BH([zH(0,so),zH(1,oo)],HH);class VH{static get(e){return e.getContribution(VH.ID)}constructor(e){this.editor=e,this.widget=new jH(this.editor)}dispose(){this.widget.dispose()}}VH.ID="editor.controller.quickInput";class jH{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return jH.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}jH.ID="editor.contrib.quickInputWidget",Ju(VH.ID,VH,4);class UH{constructor(e,t,n,i,s){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=i,this.background=s}}const qH=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class KH{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(null===e)return 0;const t=e.match(qH);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=rp.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}class GH{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(function(e){if(!e||!Array.isArray(e))return[];const t=[];let n=0;for(let i=0,s=e.length;i<s;i++){const s=e[i];let r=-1;if("string"===typeof s.fontStyle){r=0;const e=s.fontStyle.split(" ");for(let t=0,n=e.length;t<n;t++)switch(e[t]){case"italic":r|=1;break;case"bold":r|=2;break;case"underline":r|=4;break;case"strikethrough":r|=8}}let o=null;"string"===typeof s.foreground&&(o=s.foreground);let a=null;"string"===typeof s.background&&(a=s.background),t[n++]=new UH(s.token||"",i,r,o,a)}return t}(e),t)}static createFromParsedTokenTheme(e,t){return function(e,t){e.sort(((e,t)=>{const n=function(e,t){return e<t?-1:e>t?1:0}(e.token,t.token);return 0!==n?n:e.index-t.index}));let n=0,i="000000",s="ffffff";for(;e.length>=1&&""===e[0].token;){const t=e.shift();-1!==t.fontStyle&&(n=t.fontStyle),null!==t.foreground&&(i=t.foreground),null!==t.background&&(s=t.background)}const r=new KH;for(const u of t)r.getId(u);const o=r.getId(i),a=r.getId(s),l=new QH(n,o,a),c=new XH(l);for(let u=0,h=e.length;u<h;u++){const t=e[u];c.insert(t.token,t.fontStyle,r.getId(t.foreground),r.getId(t.background))}return new GH(r,c)}(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if("undefined"===typeof n){const e=this._match(t),i=function(e){const t=e.match(YH);if(!t)return 0;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}(t);n=(e.metadata|i<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}const YH=/\b(comment|string|regex|regexp)\b/;class QH{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new QH(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){-1!==e&&(this._fontStyle=e),0!==t&&(this._foreground=t),0!==n&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class XH{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(""===e)return this._mainRule;const t=e.indexOf(".");let n,i;-1===t?(n=e,i=""):(n=e.substring(0,t),i=e.substring(t+1));const s=this._children.get(n);return"undefined"!==typeof s?s.match(i):this._mainRule}insert(e,t,n,i){if(""===e)return void this._mainRule.acceptOverwrite(t,n,i);const s=e.indexOf(".");let r,o;-1===s?(r=e,o=""):(r=e.substring(0,s),o=e.substring(s+1));let a=this._children.get(r);"undefined"===typeof a&&(a=new XH(this._mainRule.clone()),this._children.set(r,a)),a.insert(o,t,n,i)}}const ZH={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[u_]:"#FFFFFE",[h_]:"#000000",[E_]:"#E5EBF1",[hw]:"#D3D3D3",[bw]:"#939393",[L_]:"#ADD6FF4D"}},JH={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[u_]:"#1E1E1E",[h_]:"#D4D4D4",[E_]:"#3A3D41",[hw]:"#404040",[bw]:"#707070",[L_]:"#ADD6FF26"}},eV={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[u_]:"#000000",[h_]:"#FFFFFF",[hw]:"#FFFFFF",[bw]:"#FFFFFF"}},tV={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[u_]:"#FFFFFF",[h_]:"#292929",[hw]:"#292929",[bw]:"#292929"}};var nV,iV;!function(e){e.getDefinition=function(e,t){let n=e.defaults;for(;bo.isThemeIcon(n);){const e=sV.getIcon(n.id);if(!e)return;n=e.defaults}return n}}(nV||(nV={})),function(e){e.toJSONObject=function(e){return{weight:e.weight,style:e.style,src:e.src.map((e=>({format:e.format,location:e.location.toString()})))}},e.fromJSONObject=function(e){const t=e=>L(e)?e:void 0;if(e&&Array.isArray(e.src)&&e.src.every((e=>L(e.format)&&L(e.location))))return{weight:t(e.weight),style:t(e.style),src:e.src.map((e=>({format:e.format,location:fi.parse(e.location)})))}}}(iV||(iV={}));const sV=new class{constructor(){this._onDidChange=new un,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:G("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:G("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:"^".concat(bo.iconNameExpression,"$"),enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,i){const s=this.iconsById[e];if(s){if(n&&!s.description){s.description=n,this.iconSchema.properties[e].markdownDescription="".concat(n," $(").concat(e,")");const t=this.iconReferenceSchema.enum.indexOf(e);-1!==t&&(this.iconReferenceSchema.enumDescriptions[t]=n),this._onDidChange.fire()}return s}const r={id:e,description:n,defaults:t,deprecationMessage:i};this.iconsById[e]=r;const o={$ref:"#/definitions/icons"};return i&&(o.deprecationMessage=i),n&&(o.markdownDescription="".concat(n,": $(").concat(e,")")),this.iconSchema.properties[e]=o,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map((e=>this.iconsById[e]))}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(e,t)=>e.id.localeCompare(t.id),t=e=>{for(;bo.isThemeIcon(e.defaults);)e=this.iconsById[e.defaults.id];return"codicon codicon-".concat(e?e.id:"")},n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.iconsById).map((e=>this.iconsById[e]));for(const s of i.filter((e=>!!e.description)).sort(e))n.push('|<i class="'.concat(t(s),'"></i>|').concat(s.id,"|").concat(bo.isThemeIcon(s.defaults)?s.defaults.id:s.id,"|").concat(s.description||"","|"));n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const s of i.filter((e=>!bo.isThemeIcon(e.defaults))).sort(e))n.push('|<i class="'.concat(t(s),'"></i>|').concat(s.id,"|"));return n.join("\n")}};function rV(e,t,n,i){return sV.registerIcon(e,t,n,i)}function oV(){return sV}ya.add("base.contributions.icons",sV),function(){const e=Ai();for(const t in e){const n="\\"+e[t].toString(16);sV.registerIcon(t,{fontCharacter:n})}}();const aV="vscode://schemas/icons",lV=ya.as(_d);lV.registerSchema(aV,sV.getIconSchema());const cV=new ol((()=>lV.notifySchemaChanged(aV)),200);sV.onDidChange((()=>{cV.isScheduled()||cV.schedule()}));rV("widget-close",Ti.close,G("widgetClose","Icon for the close action in widgets.")),rV("goto-previous-location",Ti.arrowUp,G("previousChangeIcon","Icon for goto previous editor location.")),rV("goto-next-location",Ti.arrowDown,G("nextChangeIcon","Icon for goto next editor location.")),bo.modify(Ti.sync,"spin"),bo.modify(Ti.loading,"spin");class uV{getIcon(e){const t=oV();let n=e.defaults;for(;bo.isThemeIcon(n);){const e=t.getIcon(n.id);if(!e)return;n=e.defaults}return n}}const hV="vs",dV="vs-dark",fV="hc-black",gV="hc-light",pV=ya.as(db),mV=ya.as(JS);class bV{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const n=t.base;e.length>0?(_V(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,rp.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=vV(this.themeData.base);for(const n in t.colors)e.has(n)||e.set(n,rp.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);return n||(!1!==t?this.getDefault(e):void 0)}getDefault(e){let t=this.defaultColors[e];return t||(t=pV.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case hV:return Ny.LIGHT;case fV:return Ny.HIGH_CONTRAST_DARK;case gV:return Ny.HIGH_CONTRAST_LIGHT;default:return Ny.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const n=vV(this.themeData.base);e=n.rules,n.encodedTokensColors&&(t=n.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],i=this.themeData.colors["editor.background"];if(n||i){const t={token:""};n&&(t.foreground=n),i&&(t.background=i),e.push(t)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=GH.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const i=this.tokenTheme._match([e].concat(t).join(".")).metadata,s=Rp.getForeground(i),r=Rp.getFontStyle(i);return{foreground:s,italic:Boolean(1&r),bold:Boolean(2&r),underline:Boolean(4&r),strikethrough:Boolean(8&r)}}}function _V(e){return e===hV||e===dV||e===fV||e===gV}function vV(e){switch(e){case hV:return ZH;case dV:return JH;case fV:return eV;case gV:return tV}}function yV(e){const t=vV(e);return new bV(e,t)}const SV=ro("themeService");var wV=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},kV=function(e,t){return function(n,i){t(n,i,e)}};let CV=class extends Zt{constructor(e,t,n){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=n,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new un,this._onDidChangeReducedMotion=new un,this._accessibilityModeEnabledContext=Jm.bindTo(this._contextKeyService);const i=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("editor.accessibilitySupport")&&(i(),this._onDidChangeScreenReaderOptimized.fire()),e.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())}))),i(),this._register(this.onDidChangeScreenReaderOptimized((()=>i())));const s=Ms.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=s.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this.initReducedMotionListeners(s)}initReducedMotionListeners(e){this._register(zc(e,"change",(()=>{this._systemMotionReduced=e.matches,"auto"===this._configMotionReduced&&this._onDidChangeReducedMotion.fire()})));const t=()=>{const e=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",e),this._layoutService.mainContainer.classList.toggle("enable-motion",!e)};t(),this._register(this.onDidChangeReducedMotion((()=>t())))}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return"on"===e||"auto"===e&&2===this._accessibilitySupport}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return"on"===e||"auto"===e&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};CV=wV([kV(0,ia),kV(1,VN),kV(2,od)],CV);var xV,EV,LV=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},DV=function(e,t){return function(n,i){t(n,i,e)}};let AV=class{constructor(e,t){this._commandService=e,this._hiddenStates=new TV(t)}createMenu(e,t,n){return new IV(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...n},this._commandService,t)}resetHiddenStates(e){this._hiddenStates.reset(e)}};AV=LV([DV(0,_o),DV(1,OP)],AV);let TV=xV=class{constructor(e){this._storageService=e,this._disposables=new Xt,this._onDidChange=new un,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(xV._key,0,"{}");this._data=JSON.parse(t)}catch(t){this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,xV._key,this._disposables)((()=>{if(!this._ignoreChangeEvent)try{const t=e.get(xV._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()})))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){var n;return null!==(n=this._hiddenByDefaultCache.get("".concat(e.id,"/").concat(t)))&&void 0!==n&&n}setDefaultState(e,t,n){this._hiddenByDefaultCache.set("".concat(e.id,"/").concat(t),n)}isHidden(e,t){var n,i;const s=this._isHiddenByDefault(e,t),r=null!==(i=null===(n=this._data[e.id])||void 0===n?void 0:n.includes(t))&&void 0!==i&&i;return s?!r:r}updateHidden(e,t,n){this._isHiddenByDefault(e,t)&&(n=!n);const i=this._data[e.id];if(n)if(i){i.indexOf(t)<0&&i.push(t)}else this._data[e.id]=[t];else if(i){const n=i.indexOf(t);n>=0&&function(e,t){const n=e.length-1;t<n&&(e[t]=e[n]),e.pop()}(i,n),0===i.length&&delete this._data[e.id]}this._persist()}reset(e){if(void 0===e)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(xV._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}};TV._key="menu.hiddenCommands",TV=xV=LV([DV(0,OP)],TV);let NV=EV=class{constructor(e,t,n,i,s){this._id=e,this._hiddenStates=t,this._collectContextKeysForSubmenus=n,this._commandService=i,this._contextKeyService=s,this._menuGroups=[],this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=Na.getMenuItems(this._id);let t;e.sort(EV._compareMenuItems);for(const n of e){const e=n.group||"";t&&t[0]===e||(t=[e,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeys(n)}}_collectContextKeys(e){if(EV._fillInKbExprKeys(e.when,this._structureContextKeys),La(e)){if(e.command.precondition&&EV._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;EV._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&Na.getMenuItems(e.submenu).forEach(this._collectContextKeys,this)}createActionGroups(e){const t=[];for(const n of this._menuGroups){const[i,s]=n,r=[];for(const t of s)if(this._contextKeyService.contextMatchesRules(t.when)){const n=La(t);n&&this._hiddenStates.setDefaultState(this._id,t.command.id,!!t.isHiddenByDefault);const i=$V(this._id,n?t.command:t,this._hiddenStates);if(n)r.push(new $a(t.command,t.alt,e,i,this._contextKeyService,this._commandService));else{const n=new EV(t.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._contextKeyService).createActionGroups(e),s=ho.join(...n.map((e=>e[1])));s.length>0&&r.push(new Ia(t,i,s))}}r.length>0&&t.push([i,r])}return t}static _fillInKbExprKeys(e,t){if(e)for(const n of e.keys())t.add(n)}static _compareMenuItems(e,t){const n=e.group,i=t.group;if(n!==i){if(!n)return 1;if(!i)return-1;if("navigation"===n)return-1;if("navigation"===i)return 1;const e=n.localeCompare(i);if(0!==e)return e}const s=e.order||0,r=t.order||0;return s<r?-1:s>r?1:EV._compareTitles(La(e)?e.command.title:e.title,La(t)?t.command.title:t.title)}static _compareTitles(e,t){const n="string"===typeof e?e:e.original,i="string"===typeof t?t:t.original;return n.localeCompare(i)}};NV=EV=LV([DV(3,_o),DV(4,ia)],NV);let IV=class{constructor(e,t,n,i,s){this._disposables=new Xt,this._menuInfo=new NV(e,t,n.emitEventsForSubmenuChanges,i,s);const r=new ol((()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})}),n.eventDebounceDelay);this._disposables.add(r),this._disposables.add(Na.onDidChangeMenu((t=>{t.has(e)&&r.schedule()})));const o=this._disposables.add(new Xt);this._onDidChange=new fn({onWillAddFirstListener:()=>{o.add(s.onDidChangeContext((e=>{const t=e.affectsSome(this._menuInfo.structureContextKeys),n=e.affectsSome(this._menuInfo.preconditionContextKeys),i=e.affectsSome(this._menuInfo.toggledContextKeys);(t||n||i)&&this._onDidChange.fire({menu:this,isStructuralChange:t,isEnablementChange:n,isToggleChange:i})}))),o.add(t.onDidChange((e=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})})))},onDidRemoveLastListener:o.clear.bind(o),delay:n.eventDebounceDelay,merge:e=>{let t=!1,n=!1,i=!1;for(const s of e)if(t=t||s.isStructuralChange,n=n||s.isEnablementChange,i=i||s.isToggleChange,t&&n&&i)break;return{menu:this,isStructuralChange:t,isEnablementChange:n,isToggleChange:i}}}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};function $V(e,t,n){const i=void 0!==t.submenu?t.submenu.id:t.id;const s="string"===typeof t.title?t.title:t.title.value,r=po({id:"hide/".concat(e.id,"/").concat(i),label:G("hide.label","Hide '{0}'",s),run(){n.updateHidden(e,i,!0)}}),o=po({id:"toggle/".concat(e.id,"/").concat(i),label:s,get checked(){return!n.isHidden(e,i)},run(){n.updateHidden(e,i,!!this.checked)}});return{hide:r,toggle:o,get isHidden(){return!o.checked}}}IV=LV([DV(3,_o),DV(4,ia)],IV);var MV,RV=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},OV=function(e,t){return function(n,i){t(n,i,e)}};let PV=MV=class extends Zt{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(Wr||Hr)&&this.installWebKitWriteTextWorkaround(),this._register(rn.runAndSubscribe(Rc,(e=>{let{window:t,disposables:n}=e;n.add(zc(t.document,"copy",(()=>this.clearResources())))}),{window:Ms,disposables:this._store}))}installWebKitWriteTextWorkaround(){const e=()=>{const e=new hl;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=e,navigator.clipboard.write([new ClipboardItem({"text/plain":e.p})]).catch((async t=>{t instanceof Error&&"NotAllowedError"===t.name&&e.isRejected||this.logService.error(t)}))};this._register(rn.runAndSubscribe(this.layoutService.onDidAddContainer,(t=>{let{container:n,disposables:i}=t;i.add(zc(n,"click",e)),i.add(zc(n,"keydown",e))}),{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.writeResources([]),t)this.mapTextToType.set(t,e);else{if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await navigator.clipboard.writeText(e)}catch(n){console.error(n)}this.fallbackWriteText(e)}}fallbackWriteText(e){const t=du(),n=t.activeElement,i=t.body.appendChild(Mu("textarea",{"aria-hidden":!0}));i.style.height="1px",i.style.width="1px",i.style.position="absolute",i.value=e,i.focus(),i.select(),t.execCommand("copy"),n instanceof HTMLElement&&n.focus(),t.body.removeChild(i)}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async writeResources(e){0===e.length?this.clearResources():(this.resources=e,this.resourcesStateHash=await this.computeResourcesStateHash())}async readResources(){const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResources(),this.resources}async computeResourcesStateHash(){if(0===this.resources.length)return;return vc((await this.readText()).substring(0,MV.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearResources(){this.resources=[],this.resourcesStateHash=void 0}};PV.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,PV=MV=RV([OV(0,VN),OV(1,Ra)],PV);const FV=ro("clipboardService");var BV=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},zV=function(e,t){return function(n,i){t(n,i,e)}};const WV="data-keybinding-context";class HV{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t&&(this._value[e]=t,!0)}removeValue(e){return e in this._value&&(delete this._value[e],!0)}getValue(e){const t=this._value[e];return"undefined"===typeof t&&this._parent?this._parent.getValue(e):t}}class VV extends HV{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}}VV.INSTANCE=new VV;class jV extends HV{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=KR.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration((e=>{if(7===e.source){const e=Array.from(this._values,(e=>{let[t]=e;return t}));this._values.clear(),n.fire(new KV(e))}else{const t=[];for(const n of e.affectedKeys){const e="config.".concat(n),i=this._values.findSuperstr(e);void 0!==i&&(t.push(...Pe.map(i,(e=>{let[t]=e;return t}))),this._values.deleteSuperstr(e)),this._values.has(e)&&(t.push(e),this._values.delete(e))}n.fire(new KV(t))}}))}dispose(){this._listener.dispose()}getValue(e){if(0!==e.indexOf(jV._keyPrefix))return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(jV._keyPrefix.length),n=this._configurationService.getValue(t);let i;switch(typeof n){case"number":case"boolean":case"string":i=n;break;default:i=Array.isArray(n)?JSON.stringify(n):n}return this._values.set(e,i),i}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}}jV._keyPrefix="config.";class UV{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){"undefined"===typeof this._defaultValue?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class qV{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class KV{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every((t=>e.has(t)))}}class GV{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every((t=>t.allKeysContainedIn(e)))}}class YV extends Zt{constructor(e){super(),this._onDidChangeContext=this._register(new dn({merge:e=>new GV(e)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new UV(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new XV(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return!e||e.evaluate(t)}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new qV(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new qV(e))}getContext(e){return this._isDisposed?VV.INSTANCE:this.getContextValuesContainer(function(e){for(;e;){if(e.hasAttribute(WV)){const t=e.getAttribute(WV);return t?parseInt(t,10):NaN}e=e.parentElement}return 0}(e))}dispose(){super.dispose(),this._isDisposed=!0}}let QV=class extends YV{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new jV(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?VV.INSTANCE:this._contexts.get(e)||VV.INSTANCE}createChildContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._myContextId;if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new HV(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};QV=BV([zV(0,od)],QV);class XV extends YV{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new Jt),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(WV)){let e="";this._domNode.classList&&(e=Array.from(this._domNode.classList.values()).join(", ")),console.error("Element already has context attribute".concat(e?": "+e:""))}this._domNode.setAttribute(WV,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext((e=>{const t=this._parent.getContextValuesContainer(this._myContextId).value;var n;n=t,e.allKeysContainedIn(new Set(Object.keys(n)))||this._onDidChangeContext.fire(e)}))}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(WV),super.dispose())}getContextValuesContainer(e){return this._isDisposed?VV.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._myContextId;if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}vo.registerCommand("_setContext",(function(e,t,n){e.get(ia).createKey(String(t),function(e){return H(e,(e=>"object"===typeof e&&1===e.$mid?fi.revive(e).toString():e instanceof fi?e.toString():void 0))}(n))})),vo.registerCommand({id:"getContextKeyInfo",handler:()=>[...na.all()].sort(((e,t)=>e.key.localeCompare(t.key))),metadata:{description:G("getContextKeyInfo","A command that returns information about context keys"),args:[]}}),vo.registerCommand("_generateContextKeyInfo",(function(){const e=[],t=new Set;for(const n of na.all())t.has(n.key)||(t.add(n.key),e.push(n));e.sort(((e,t)=>e.key.localeCompare(t.key))),console.log(JSON.stringify(e,void 0,2))}));class ZV{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}}class JV{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())0===t.outgoing.size&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new ZV(t,e),this._nodes.set(t,n)),n}isEmpty(){return 0===this._nodes.size}toString(){const e=[];for(const[t,n]of this._nodes)e.push("".concat(t,"\n\t(-> incoming)[").concat([...n.incoming.keys()].join(", "),"]\n\t(outgoing ->)[").concat([...n.outgoing.keys()].join(","),"]\n"));return e.join("\n")}findCycleSlow(){for(const[e,t]of this._nodes){const n=new Set([e]),i=this._findCycle(t,n);if(i)return i}}_findCycle(e,t){for(const[n,i]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const e=this._findCycle(i,t);if(e)return e;t.delete(n)}}}class ej extends Error{constructor(e){var t;super("cyclic dependency between services"),this.message=null!==(t=e.findCycleSlow())&&void 0!==t?t:"UNABLE to detect cycle, dumping graph: \n".concat(e.toString())}}class tj{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new GT,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var s;this._services=e,this._strict=t,this._parent=n,this._enableTracing=i,this._activeInstantiations=new Set,this._services.set(so,this),this._globalGraph=i?null!==(s=null===n||void 0===n?void 0:n._globalGraph)&&void 0!==s?s:new JV((e=>e)):void 0}createChild(e){return new tj(e,this._strict,this,this._enableTracing)}invokeFunction(e){const t=nj.traceInvocation(this._enableTracing,e);let n=!1;try{const o={get:e=>{if(n)throw Ft("service accessor is only valid during the invocation of its target method");const i=this._getOrCreateServiceInstance(e,t);if(!i)throw new Error("[invokeFunction] unknown service '".concat(e,"'"));return i}};for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return e(o,...s)}finally{n=!0,t.stop()}}createInstance(e){let t,n;for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return e instanceof fd?(t=nj.traceCreation(this._enableTracing,e.ctor),n=this._createInstance(e.ctor,e.staticArguments.concat(s),t)):(t=nj.traceCreation(this._enableTracing,e),n=this._createInstance(e,s,t)),t.stop(),n}_createInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;const i=io.getServiceDependencies(e).sort(((e,t)=>e.index-t.index)),s=[];for(const o of i){const t=this._getOrCreateServiceInstance(o.id,n);t||this._throwIfStrict("[createInstance] ".concat(e.name," depends on UNKNOWN service ").concat(o.id,"."),!1),s.push(t)}const r=i.length>0?i[0].index:t.length;if(t.length!==r){console.trace("[createInstance] First service dependency of ".concat(e.name," at position ").concat(r+1," conflicts with ").concat(t.length," static arguments"));const n=r-t.length;t=n>0?t.concat(new Array(n)):t.slice(0,r)}return Reflect.construct(e,t.concat(s))}_setServiceInstance(e,t){if(this._services.get(e)instanceof fd)this._services.set(e,t);else{if(!this._parent)throw new Error("illegalState - setting UNKNOWN service instance");this._parent._setServiceInstance(e,t)}}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const n=this._getServiceInstanceOrDescriptor(e);return n instanceof fd?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error("illegal state - RECURSIVELY instantiating service '".concat(e,"'"));this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){var i;const s=new JV((e=>e.id.toString()));let r=0;const o=[{id:e,desc:t,_trace:n}];for(;o.length;){const t=o.pop();if(s.lookupOrInsertNode(t),r++>1e3)throw new ej(s);for(const n of io.getServiceDependencies(t.desc.ctor)){const r=this._getServiceInstanceOrDescriptor(n.id);if(r||this._throwIfStrict("[createInstance] ".concat(e," depends on ").concat(n.id," which is NOT registered."),!0),null===(i=this._globalGraph)||void 0===i||i.insertEdge(String(t.id),String(n.id)),r instanceof fd){const e={id:n.id,desc:r,_trace:t._trace.branch(n.id,!0)};s.insertEdge(t,e),o.push(e)}}}for(;;){const e=s.roots();if(0===e.length){if(!s.isEmpty())throw new ej(s);break}for(const{data:t}of e){if(this._getServiceInstanceOrDescriptor(t.id)instanceof fd){const e=this._createServiceInstanceWithOwner(t.id,t.desc.ctor,t.desc.staticArguments,t.desc.supportsDelayedInstantiation,t._trace);this._setServiceInstance(t.id,e)}s.removeNode(t)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if(this._services.get(e)instanceof fd)return this._createServiceInstance(e,t,n,i,s);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,s);throw new Error("illegalState - creating UNKNOWN service instance ".concat(t.name))}_createServiceInstance(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>4?arguments[4]:void 0;if(arguments.length>3?arguments[3]:void 0){const s=new tj(void 0,this._strict,this,this._enableTracing);s._globalGraphImplicitDependency=String(e);const r=new Map,o=new ul((()=>{const e=s._createInstance(t,n,i);for(const[t,n]of r){const i=e[t];if("function"===typeof i)for(const t of n)t.disposable=i.apply(e,t.listener)}return r.clear(),e}));return new Proxy(Object.create(null),{get(e,t){if(!o.isInitialized&&"string"===typeof t&&(t.startsWith("onDid")||t.startsWith("onWill"))){let e=r.get(t);e||(e=new Be,r.set(t,e));const n=(n,i,s)=>{if(o.isInitialized)return o.value[t](n,i,s);{const t={listener:[n,i,s],disposable:void 0},r=e.push(t),o=Qt((()=>{var e;r(),null===(e=t.disposable)||void 0===e||e.dispose()}));return o}};return n}if(t in e)return e[t];const n=o.value;let i=n[t];return"function"!==typeof i||(i=i.bind(n),e[t]=i),i},set:(e,t,n)=>(o.value[t]=n,!0),getPrototypeOf:e=>t.prototype})}return this._createInstance(t,n,i)}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}class nj{static traceInvocation(e,t){return e?new nj(2,t.name||(new Error).stack.split("\n").slice(3,4).join("\n")):nj._None}static traceCreation(e,t){return e?new nj(1,t.name):nj._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const n=new nj(3,e.toString());return this._dep.push([e,t,n]),n}stop(){const e=Date.now()-this._start;nj._totals+=e;let t=!1;const n=["".concat(1===this.type?"CREATE":"CALL"," ").concat(this.name),"".concat(function e(n,i){const s=[],r=new Array(n+1).join("\t");for(const[o,a,l]of i._dep)if(a&&l){t=!0,s.push("".concat(r,"CREATES -> ").concat(o));const i=e(n+1,l);i&&s.push(i)}else s.push("".concat(r,"uses -> ").concat(o));return s.join("\n")}(1,this)),"DONE, took ".concat(e.toFixed(2),"ms (grand total ").concat(nj._totals.toFixed(2),"ms)")];(e>2||t)&&nj.all.add(n.join("\n"))}}nj.all=new Set,nj._None=new class extends nj{constructor(){super(0,null)}stop(){}branch(){return this}},nj._totals=0;const ij=new Set([dc.inMemory,dc.vscodeSourceControl,dc.walkThrough,dc.walkThroughSnippet]);class sj{constructor(){this._byResource=new Mg,this._byOwner=new Map}set(e,t,n){let i=this._byResource.get(e);i||(i=new Map,this._byResource.set(e,i)),i.set(t,n);let s=this._byOwner.get(t);s||(s=new Mg,this._byOwner.set(t,s)),s.set(e,n)}get(e,t){const n=this._byResource.get(e);return null===n||void 0===n?void 0:n.get(t)}delete(e,t){let n=!1,i=!1;const s=this._byResource.get(e);s&&(n=s.delete(t));const r=this._byOwner.get(t);if(r&&(i=r.delete(e)),n!==i)throw new Error("illegal state");return n&&i}values(e){var t,n,i,s;return"string"===typeof e?null!==(n=null===(t=this._byOwner.get(e))||void 0===t?void 0:t.values())&&void 0!==n?n:Pe.empty():fi.isUri(e)?null!==(s=null===(i=this._byResource.get(e))||void 0===i?void 0:i.values())&&void 0!==s?s:Pe.empty():Pe.map(Pe.concat(...this._byOwner.values()),(e=>e[1]))}}class rj{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new Mg,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const e=this._data.get(t);e&&this._substract(e);const n=this._resourceStats(t);this._add(n),this._data.set(t,n)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(ij.has(e.scheme))return t;for(const{severity:n}of this._service.read({resource:e}))n===EF.Error?t.errors+=1:n===EF.Warning?t.warnings+=1:n===EF.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class oj{constructor(){this._onMarkerChanged=new fn({delay:0,merge:oj._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new sj,this._stats=new rj(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(i=n,Array.isArray(i)&&0!==i.length){const i=[];for(const s of n){const n=oj._toMarker(e,t,s);n&&i.push(n)}this._data.set(t,e,i),this._onMarkerChanged.fire([t])}else{this._data.delete(t,e)&&this._onMarkerChanged.fire([t])}var i}static _toMarker(e,t,n){let{code:i,severity:s,message:r,source:o,startLineNumber:a,startColumn:l,endLineNumber:c,endColumn:u,relatedInformation:h,tags:d}=n;if(r)return a=a>0?a:1,l=l>0?l:1,c=c>=a?c:a,u=u>0?u:l,{resource:t,owner:e,code:i,severity:s,message:r,source:o,startLineNumber:a,startColumn:l,endLineNumber:c,endColumn:u,relatedInformation:h,tags:d}}changeAll(e,t){const n=[],i=this._data.values(e);if(i)for(const s of i){const t=Pe.first(s);t&&(n.push(t.resource),this._data.delete(t.resource,e))}if(d(t)){const i=new Mg;for(const{resource:s,marker:r}of t){const t=oj._toMarker(e,s,r);if(!t)continue;const o=i.get(s);o?o.push(t):(i.set(s,[t]),n.push(s))}for(const[t,n]of i)this._data.set(t,e,n)}n.length>0&&this._onMarkerChanged.fire(n)}read(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.create(null),{owner:t,resource:n,severities:i,take:s}=e;if((!s||s<0)&&(s=-1),t&&n){const e=this._data.get(n,t);if(e){const t=[];for(const n of e)if(oj._accept(n,i)){const e=t.push(n);if(s>0&&e===s)break}return t}return[]}if(t||n){const e=this._data.values(null!==n&&void 0!==n?n:t),r=[];for(const t of e)for(const e of t)if(oj._accept(e,i)){const t=r.push(e);if(s>0&&t===s)return r}return r}{const e=[];for(const t of this._data.values())for(const n of t)if(oj._accept(n,i)){const t=e.push(n);if(s>0&&t===s)return e}return e}}static _accept(e,t){return void 0===t||(t&e.severity)===e.severity}static _merge(e){const t=new Mg;for(const n of e)for(const e of n)t.set(e,!0);return Array.from(t.keys())}}class aj extends Zt{constructor(){super(...arguments),this._configurationModel=new mR}get configurationModel(){return this._configurationModel}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=new mR;const e=ya.as(yd).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const n=this.getConfigurationDefaultOverrides();for(const i of e){const e=n[i],s=t[i];void 0!==e?this._configurationModel.addValue(i,e):s?this._configurationModel.addValue(i,s.default):this._configurationModel.removeValue(i)}}}const lj=ro("audioCue");class cj{static register(e){return new cj(e.fileName)}constructor(e){this.fileName=e}}cj.error=cj.register({fileName:"error.mp3"}),cj.warning=cj.register({fileName:"warning.mp3"}),cj.foldedArea=cj.register({fileName:"foldedAreas.mp3"}),cj.break=cj.register({fileName:"break.mp3"}),cj.quickFixes=cj.register({fileName:"quickFixes.mp3"}),cj.taskCompleted=cj.register({fileName:"taskCompleted.mp3"}),cj.taskFailed=cj.register({fileName:"taskFailed.mp3"}),cj.terminalBell=cj.register({fileName:"terminalBell.mp3"}),cj.diffLineInserted=cj.register({fileName:"diffLineInserted.mp3"}),cj.diffLineDeleted=cj.register({fileName:"diffLineDeleted.mp3"}),cj.diffLineModified=cj.register({fileName:"diffLineModified.mp3"}),cj.chatRequestSent=cj.register({fileName:"chatRequestSent.mp3"}),cj.chatResponsePending=cj.register({fileName:"chatResponsePending.mp3"}),cj.chatResponseReceived1=cj.register({fileName:"chatResponseReceived1.mp3"}),cj.chatResponseReceived2=cj.register({fileName:"chatResponseReceived2.mp3"}),cj.chatResponseReceived3=cj.register({fileName:"chatResponseReceived3.mp3"}),cj.chatResponseReceived4=cj.register({fileName:"chatResponseReceived4.mp3"}),cj.clear=cj.register({fileName:"clear.mp3"}),cj.save=cj.register({fileName:"save.mp3"}),cj.format=cj.register({fileName:"format.mp3"});class uj{constructor(e){this.randomOneOf=e}}class hj{static register(e){const t=new uj("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),n=new hj(t,e.name,e.settingsKey,e.alertSettingsKey,e.alertMessage);return hj._audioCues.add(n),n}constructor(e,t,n,i,s){this.sound=e,this.name=t,this.settingsKey=n,this.alertSettingsKey=i,this.alertMessage=s}}hj._audioCues=new Set,hj.error=hj.register({name:G("audioCues.lineHasError.name","Error on Line"),sound:cj.error,settingsKey:"audioCues.lineHasError",alertSettingsKey:"accessibility.alert.error",alertMessage:G("audioCues.lineHasError.alertMessage","Error")}),hj.warning=hj.register({name:G("audioCues.lineHasWarning.name","Warning on Line"),sound:cj.warning,settingsKey:"audioCues.lineHasWarning",alertSettingsKey:"accessibility.alert.warning",alertMessage:G("audioCues.lineHasWarning.alertMessage","Warning")}),hj.foldedArea=hj.register({name:G("audioCues.lineHasFoldedArea.name","Folded Area on Line"),sound:cj.foldedArea,settingsKey:"audioCues.lineHasFoldedArea",alertSettingsKey:"accessibility.alert.foldedArea",alertMessage:G("audioCues.lineHasFoldedArea.alertMessage","Folded")}),hj.break=hj.register({name:G("audioCues.lineHasBreakpoint.name","Breakpoint on Line"),sound:cj.break,settingsKey:"audioCues.lineHasBreakpoint",alertSettingsKey:"accessibility.alert.breakpoint",alertMessage:G("audioCues.lineHasBreakpoint.alertMessage","Breakpoint")}),hj.inlineSuggestion=hj.register({name:G("audioCues.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:cj.quickFixes,settingsKey:"audioCues.lineHasInlineSuggestion"}),hj.terminalQuickFix=hj.register({name:G("audioCues.terminalQuickFix.name","Terminal Quick Fix"),sound:cj.quickFixes,settingsKey:"audioCues.terminalQuickFix",alertSettingsKey:"accessibility.alert.terminalQuickFix",alertMessage:G("audioCues.terminalQuickFix.alertMessage","Quick Fix")}),hj.onDebugBreak=hj.register({name:G("audioCues.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:cj.break,settingsKey:"audioCues.onDebugBreak",alertSettingsKey:"accessibility.alert.onDebugBreak",alertMessage:G("audioCues.onDebugBreak.alertMessage","Breakpoint")}),hj.noInlayHints=hj.register({name:G("audioCues.noInlayHints","No Inlay Hints on Line"),sound:cj.error,settingsKey:"audioCues.noInlayHints",alertSettingsKey:"accessibility.alert.noInlayHints",alertMessage:G("audioCues.noInlayHints.alertMessage","No Inlay Hints")}),hj.taskCompleted=hj.register({name:G("audioCues.taskCompleted","Task Completed"),sound:cj.taskCompleted,settingsKey:"audioCues.taskCompleted",alertSettingsKey:"accessibility.alert.taskCompleted",alertMessage:G("audioCues.taskCompleted.alertMessage","Task Completed")}),hj.taskFailed=hj.register({name:G("audioCues.taskFailed","Task Failed"),sound:cj.taskFailed,settingsKey:"audioCues.taskFailed",alertSettingsKey:"accessibility.alert.taskFailed",alertMessage:G("audioCues.taskFailed.alertMessage","Task Failed")}),hj.terminalCommandFailed=hj.register({name:G("audioCues.terminalCommandFailed","Terminal Command Failed"),sound:cj.error,settingsKey:"audioCues.terminalCommandFailed",alertSettingsKey:"accessibility.alert.terminalCommandFailed",alertMessage:G("audioCues.terminalCommandFailed.alertMessage","Command Failed")}),hj.terminalBell=hj.register({name:G("audioCues.terminalBell","Terminal Bell"),sound:cj.terminalBell,settingsKey:"audioCues.terminalBell",alertSettingsKey:"accessibility.alert.terminalBell",alertMessage:G("audioCues.terminalBell.alertMessage","Terminal Bell")}),hj.notebookCellCompleted=hj.register({name:G("audioCues.notebookCellCompleted","Notebook Cell Completed"),sound:cj.taskCompleted,settingsKey:"audioCues.notebookCellCompleted",alertSettingsKey:"accessibility.alert.notebookCellCompleted",alertMessage:G("audioCues.notebookCellCompleted.alertMessage","Notebook Cell Completed")}),hj.notebookCellFailed=hj.register({name:G("audioCues.notebookCellFailed","Notebook Cell Failed"),sound:cj.taskFailed,settingsKey:"audioCues.notebookCellFailed",alertSettingsKey:"accessibility.alert.notebookCellFailed",alertMessage:G("audioCues.notebookCellFailed.alertMessage","Notebook Cell Failed")}),hj.diffLineInserted=hj.register({name:G("audioCues.diffLineInserted","Diff Line Inserted"),sound:cj.diffLineInserted,settingsKey:"audioCues.diffLineInserted"}),hj.diffLineDeleted=hj.register({name:G("audioCues.diffLineDeleted","Diff Line Deleted"),sound:cj.diffLineDeleted,settingsKey:"audioCues.diffLineDeleted"}),hj.diffLineModified=hj.register({name:G("audioCues.diffLineModified","Diff Line Modified"),sound:cj.diffLineModified,settingsKey:"audioCues.diffLineModified"}),hj.chatRequestSent=hj.register({name:G("audioCues.chatRequestSent","Chat Request Sent"),sound:cj.chatRequestSent,settingsKey:"audioCues.chatRequestSent",alertSettingsKey:"accessibility.alert.chatRequestSent",alertMessage:G("audioCues.chatRequestSent.alertMessage","Chat Request Sent")}),hj.chatResponseReceived=hj.register({name:G("audioCues.chatResponseReceived","Chat Response Received"),settingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[cj.chatResponseReceived1,cj.chatResponseReceived2,cj.chatResponseReceived3,cj.chatResponseReceived4]}}),hj.chatResponsePending=hj.register({name:G("audioCues.chatResponsePending","Chat Response Pending"),sound:cj.chatResponsePending,settingsKey:"audioCues.chatResponsePending",alertSettingsKey:"accessibility.alert.chatResponsePending",alertMessage:G("audioCues.chatResponsePending.alertMessage","Chat Response Pending")}),hj.clear=hj.register({name:G("audioCues.clear","Clear"),sound:cj.clear,settingsKey:"audioCues.clear",alertSettingsKey:"accessibility.alert.clear",alertMessage:G("audioCues.clear.alertMessage","Clear")}),hj.save=hj.register({name:G("audioCues.save","Save"),sound:cj.save,settingsKey:"audioCues.save",alertSettingsKey:"accessibility.alert.save",alertMessage:G("audioCues.save.alertMessage","Save")}),hj.format=hj.register({name:G("audioCues.format","Format"),sound:cj.format,settingsKey:"audioCues.format",alertSettingsKey:"accessibility.alert.format",alertMessage:G("audioCues.format.alertMessage","Format")});class dj extends Zt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];super(),this.logger=new za([e,...t]),this._register(e.onDidChangeLogLevel((e=>this.setLevel(e))))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.logger.trace(e,...n)}debug(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.logger.debug(e,...n)}info(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.logger.info(e,...n)}warn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.logger.warn(e,...n)}error(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.logger.error(e,...n)}}const fj=[];function gj(){return fj.slice(0)}var pj=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},mj=function(e,t){return function(n,i){t(n,i,e)}};class bj{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new un}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let _j=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new en(new bj(t))):Promise.reject(new Error("Model not found"))}};_j=pj([mj(0,ao)],_j);class vj{show(){return vj.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}}vj.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};class yj{info(e){return this.notify({severity:QT.Info,message:e})}warn(e){return this.notify({severity:QT.Warning,message:e})}error(e){return this.notify({severity:QT.Error,message:e})}notify(e){switch(e.severity){case QT.Error:console.error(e.message);break;case QT.Warning:console.warn(e.message);break;default:console.log(e.message)}return yj.NO_OP}prompt(e,t,n,i){return yj.NO_OP}status(e,t){return Zt.None}}yj.NO_OP=new class{};let Sj=class{constructor(e){this._onWillExecuteCommand=new un,this._onDidExecuteCommand=new un,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e){const t=vo.getCommand(e);if(!t)return Promise.reject(new Error("command '".concat(e,"' not found")));try{for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];this._onWillExecuteCommand.fire({commandId:e,args:i});const r=this._instantiationService.invokeFunction.apply(this._instantiationService,[t.handler,...i]);return this._onDidExecuteCommand.fire({commandId:e,args:i}),Promise.resolve(r)}catch(r){return Promise.reject(r)}}};Sj=pj([mj(0,so)],Sj);let wj=class extends LR{constructor(e,t,n,i,s,r){super(e,t,n,i,s),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const o=e=>{const t=new Xt;t.add(zc(e,ku.KEY_DOWN,(e=>{const t=new ja(e);this._dispatch(t,t.target)&&(t.preventDefault(),t.stopPropagation())}))),t.add(zc(e,ku.KEY_UP,(e=>{const t=new ja(e);this._singleModifierDispatch(t,t.target)&&t.preventDefault()}))),this._domNodeListeners.push(new kj(e,t))},a=e=>{for(let t=0;t<this._domNodeListeners.length;t++){const n=this._domNodeListeners[t];n.domNode===e&&(this._domNodeListeners.splice(t,1),n.dispose())}},l=e=>{e.getOption(61)||o(e.getContainerDomNode())};this._register(r.onCodeEditorAdd(l)),this._register(r.onCodeEditorRemove((e=>{e.getOption(61)||a(e.getContainerDomNode())}))),r.listCodeEditors().forEach(l);const c=e=>{o(e.getContainerDomNode())};this._register(r.onDiffEditorAdd(c)),this._register(r.onDiffEditorRemove((e=>{a(e.getContainerDomNode())}))),r.listDiffEditors().forEach(c)}addDynamicKeybinding(e,t,n,i){return Yt(vo.registerCommand(e,n),this.addDynamicKeybindings([{keybinding:t,command:e,when:i}]))}addDynamicKeybindings(e){const t=e.map((e=>{var t;return{keybinding:ca(e.keybinding,De),command:null!==(t=e.command)&&void 0!==t?t:null,commandArgs:e.commandArgs,when:e.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),Qt((()=>{for(let e=0;e<this._dynamicKeybindings.length;e++)if(this._dynamicKeybindings[e]===t[0])return this._dynamicKeybindings.splice(e,t.length),void this.updateResolver()}))}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(wa.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new kR(e,t,(e=>this._log(e)))}return this._cachedResolver}_documentHasFocus(){return Ms.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const n=[];let i=0;for(const s of e){const e=s.when||void 0,r=s.keybinding;if(r){const o=FR.resolveKeybinding(r,De);for(const r of o)n[i++]=new AR(r,s.command,s.commandArgs,e,t,null,!1)}else n[i++]=new AR(void 0,s.command,s.commandArgs,e,t,null,!1)}return n}resolveKeyboardEvent(e){const t=new ha(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new FR([t],De)}};wj=pj([mj(0,ia),mj(1,_o),mj(2,Ma),mj(3,ZT),mj(4,Ra),mj(5,oo)],wj);class kj extends Zt{constructor(e,t){super(),this.domNode=e,this._register(t)}}function Cj(e){return e&&"object"===typeof e&&(!e.overrideIdentifier||"string"===typeof e.overrideIdentifier)&&(!e.resource||e.resource instanceof fi)}class xj{constructor(){this._onDidChangeConfiguration=new un,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const e=new aj;this._configuration=new vR(e.reload(),new mR,new mR,new mR),e.dispose()}getValue(e,t){const n="string"===typeof e?e:void 0,i=Cj(e)?e:Cj(t)?t:{};return this._configuration.getValue(n,i,void 0)}updateValues(e){const t={data:this._configuration.toData()},n=[];for(const i of e){const[e,t]=i;this.getValue(e)!==t&&(this._configuration.updateValue(e,t),n.push(e))}if(n.length>0){const e=new yR({keys:n,overrides:[]},t,this._configuration);e.source=8,this._onDidChangeConfiguration.fire(e)}return Promise.resolve()}updateValue(e,t,n,i){return this.updateValues([[e,t]])}inspect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._configuration.inspect(e,t,void 0)}}let Ej=class{constructor(e,t,n){this.configurationService=e,this.modelService=t,this.languageService=n,this._onDidChangeConfiguration=new un,this.configurationService.onDidChangeConfiguration((e=>{this._onDidChangeConfiguration.fire({affectedKeys:e.affectedKeys,affectsConfiguration:(t,n)=>e.affectsConfiguration(n)})}))}getValue(e,t,n){const i=Ci.isIPosition(t)?t:null,s=i?"string"===typeof n?n:void 0:"string"===typeof t?t:void 0,r=e?this.getLanguage(e,i):void 0;return"undefined"===typeof s?this.configurationService.getValue({resource:e,overrideIdentifier:r}):this.configurationService.getValue(s,{resource:e,overrideIdentifier:r})}getLanguage(e,t){const n=this.modelService.getModel(e);return n?t?n.getLanguageIdAtPosition(t.lineNumber,t.column):n.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};Ej=pj([mj(0,od),mj(1,ao),mj(2,dd)],Ej);let Lj=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&"string"===typeof n&&"auto"!==n?n:ve||_e?"\n":"\r\n"}};Lj=pj([mj(0,od)],Lj);class Dj{constructor(){const e=fi.from({scheme:Dj.SCHEME,authority:"model",path:"/"});this.workspace={id:QR,folders:[new YR({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===Dj.SCHEME?this.workspace.folders[0]:null}}function Aj(e,t,n){if(!t)return;if(!(e instanceof xj))return;const i=[];Object.keys(t).forEach((e=>{(function(e){return fR()["editor.".concat(e)]||!1})(e)&&i.push(["editor.".concat(e),t[e]]),n&&function(e){return fR()["diffEditor.".concat(e)]||!1}(e)&&i.push(["diffEditor.".concat(e),t[e]])})),i.length>0&&e.updateValues(i)}Dj.SCHEME="inmemory";let Tj=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){const n=Array.isArray(e)?e:oR.convert(e),i=new Map;for(const o of n){if(!(o instanceof aR))throw new Error("bad edit - only text edits are supported");const e=this._modelService.getModel(o.resource);if(!e)throw new Error("bad edit - model not found");if("number"===typeof o.versionId&&e.getVersionId()!==o.versionId)throw new Error("bad state - model changed in the meantime");let t=i.get(e);t||(t=[],i.set(e,t)),t.push(gR.replaceMove(xi.lift(o.textEdit.range),o.textEdit.text))}let s=0,r=0;for(const[o,a]of i)o.pushStackElement(),o.pushEditOperations([],a,(()=>[])),o.pushStackElement(),r+=1,s+=a.length;return{ariaSummary:zs(sO.bulkEditServiceSummary,s,r),isApplied:s>0}}};Tj=pj([mj(0,ao)],Tj);let Nj=class extends fO{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,n){if(!t){const e=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();e&&(t=e.getContainerDomNode())}return super.showContextView(e,t,n)}};Nj=pj([mj(0,VN),mj(1,oo)],Nj);let Ij=class extends bF{constructor(e,t,n,i,s,r){super(e,t,n,i,s,r),this.configure({blockMouse:!1})}};Ij=pj([mj(0,Ma),mj(1,ZT),mj(2,s$),mj(3,tk),mj(4,Aa),mj(5,ia)],Ij);var $j;let Mj,Rj,Oj,Pj,Fj;function Bj(){return Mj}pd(od,xj,0),pd(mp,Ej,0),pd(bp,Lj,0),pd(GR,Dj,0),pd(BR,class{getUriLabel(e,t){return"file"===e.scheme?e.fsPath:e.path}getUriBasenameLabel(e){return fL(e)}},0),pd(Ma,class{publicLog2(){}},0),pd(GN,class{async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let n=e;return t&&(n=n+"\n\n"+t),Ms.confirm(n)}async prompt(e){var t,n;let i;if(this.doConfirm(e.message,e.detail)){const s=[...null!==(t=e.buttons)&&void 0!==t?t:[]];e.cancelButton&&"string"!==typeof e.cancelButton&&"boolean"!==typeof e.cancelButton&&s.push(e.cancelButton),i=await(null===(n=s[0])||void 0===n?void 0:n.run({checkboxChecked:!1}))}return{result:i}}async error(e,t){await this.prompt({type:QT.Error,message:e,detail:t})}},0),pd(dI,class{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}},0),pd(ZT,yj,0),pd(DF,oj,0),pd(dd,class extends CO{constructor(){super()}},0),pd(SV,class extends Zt{constructor(){super(),this._onColorThemeChange=this._register(new un),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new un),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new uV,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(hV,yV(hV)),this._knownThemes.set(dV,yV(dV)),this._knownThemes.set(fV,yV(fV)),this._knownThemes.set(gV,yV(gV));const e=this._register(function(e){const t=new Xt,n=t.add(new un),i=oV();return t.add(i.onDidChange((()=>n.fire()))),e&&t.add(e.onDidProductIconThemeChange((()=>n.fire()))),{dispose:()=>t.dispose(),onDidChange:n.event,getCSS(){const t=e?e.getProductIconTheme():new uV,n={},s=e=>{const i=t.getIcon(e);if(!i)return;const s=i.font;return s?(n[s.id]=s.definition,".codicon-".concat(e.id,":before { content: '").concat(i.fontCharacter,"'; font-family: ").concat(zu(s.id),"; }")):".codicon-".concat(e.id,":before { content: '").concat(i.fontCharacter,"'; }")},r=[];for(const e of i.getIcons()){const t=s(e);t&&r.push(t)}for(const e in n){const t=n[e],i=t.weight?"font-weight: ".concat(t.weight,";"):"",s=t.style?"font-style: ".concat(t.style,";"):"",o=t.src.map((e=>"".concat(Bu(e.location)," format('").concat(e.format,"')"))).join(", ");r.push("@font-face { src: ".concat(o,"; font-family: ").concat(zu(e),";").concat(i).concat(s," font-display: block; }"))}return r.join("\n")}}}(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS="".concat(this._codiconCSS,"\n").concat(this._themeCSS),this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(hV),this._onOSSchemeChanged(),this._register(e.onDidChange((()=>{this._codiconCSS=e.getCSS(),this._updateCSS()}))),Rr(Ms,"(forced-colors: active)",(()=>{this._onOSSchemeChanged()}))}registerEditorContainer(e){return au(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=gu(void 0,(e=>{e.className="monaco-colors",e.textContent=this._allCSS})),this._styleElements.push(this._globalStyleElement)),Zt.None}_registerShadowDomContainer(e){const t=gu(e,(e=>{e.className="monaco-colors",e.textContent=this._allCSS}));return this._styleElements.push(t),{dispose:()=>{for(let e=0;e<this._styleElements.length;e++)if(this._styleElements[e]===t)return void this._styleElements.splice(e,1)}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!_V(t.base)&&!_V(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new bV(e,t)),_V(e)&&this._knownThemes.forEach((t=>{t.base===e&&t.notifyBaseUpdated()})),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;t=this._knownThemes.has(e)?this._knownThemes.get(e):this._knownThemes.get(hV),this._updateActualTheme(t)}_updateActualTheme(e){e&&this._theme!==e&&(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=Ms.matchMedia("(forced-colors: active)").matches;if(e!==Iy(this._theme.type)){let t;t=$y(this._theme.type)?e?fV:dV:e?gV:hV,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},n={addRule:n=>{t[n]||(e.push(n),t[n]=!0)}};mV.getThemingParticipants().forEach((e=>e(this._theme,n,this._environment)));const i=[];for(const r of pV.getColors()){const e=this._theme.getColor(r.id,!0);e&&i.push("".concat(ub(r.id),": ").concat(e.toString(),";"))}n.addRule(".monaco-editor, .monaco-diff-editor, .monaco-component { ".concat(i.join("\n")," }"));const s=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(function(e){const t=[];for(let n=1,i=e.length;n<i;n++){const i=e[n];t[n]=".mtk".concat(n," { color: ").concat(i,"; }")}return t.push(".mtki { font-style: italic; }"),t.push(".mtkb { font-weight: bold; }"),t.push(".mtku { text-decoration: underline; text-underline-position: under; }"),t.push(".mtks { text-decoration: line-through; }"),t.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),t.join("\n")}(s)),this._themeCSS=e.join("\n"),this._updateCSS(),Ui.setColorMap(s),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS="".concat(this._codiconCSS,"\n").concat(this._themeCSS),this._styleElements.forEach((e=>e.textContent=this._allCSS))}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}},0),pd(Ra,class extends dj{constructor(){super(new Ba)}},0),pd(ao,zF,0),pd(Hm,NF,0),pd(ia,QV,0),pd(zR,class{withProgress(e,t,n){return t({report:()=>{}})}},0),pd(WR,vj,0),pd(OP,class extends FP{constructor(){super(),this.applicationStorage=this._register(new $P(new MP,{hint:NP.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new $P(new MP,{hint:NP.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new $P(new MP,{hint:NP.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage((e=>this.emitDidChangeValue(1,e)))),this._register(this.profileStorage.onDidChangeStorage((e=>this.emitDidChangeValue(0,e)))),this._register(this.applicationStorage.onDidChangeStorage((e=>this.emitDidChangeValue(-1,e))))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}},0),pd(xF,kp,0),pd(rR,Tj,0),pd(rO,class{constructor(){this._neverEmitter=new un,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}},0),pd(lo,_j,0),pd(Zm,CV,0),pd(Fz,class{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new Xt,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,n;e!==this._lastFocusedWidget&&(null===(t=this._lastFocusedWidget)||void 0===t||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,null===(n=this._lastFocusedWidget)||void 0===n||n.getHTMLElement().classList.add("last-focused"))}register(e,t){if(!this._hasCreatedStyleController){this._hasCreatedStyleController=!0;new uP(gu(),"").style(qP)}if(this.lists.some((t=>t.widget===e)))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),uu(e.getHTMLElement())&&this.setLastFocusedList(e),Yt(e.onDidFocus((()=>this.setLastFocusedList(e))),Qt((()=>this.lists.splice(this.lists.indexOf(n),1))),e.onDidDispose((()=>{this.lists=this.lists.filter((e=>e!==n)),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)})))}dispose(){this.disposables.dispose()}},0),pd(_o,Sj,0),pd(tk,wj,0),pd(jW,HH,0),pd(s$,Nj,0),pd(c$,CF,0),pd(FV,PV,0),pd(r$,Ij,0),pd(Aa,AV,0),pd(lj,class{async playAudioCue(e,t){}},0),function(e){const t=new GT;for(const[o,a]of md())t.set(o,a);const n=new tj(t,!0);t.set(so,n),e.get=function(e){i||r({});const s=t.get(e);if(!s)throw new Error("Missing service "+e);return s instanceof fd?n.invokeFunction((t=>t.get(e))):s};let i=!1;const s=new un;function r(e){if(i)return n;i=!0;for(const[n,i]of md())t.get(n)||t.set(n,i);for(const n in e)if(e.hasOwnProperty(n)){const i=ro(n);t.get(i)instanceof fd&&t.set(i,e[n])}const r=gj();for(const t of r)try{n.createInstance(t)}catch(o){Nt(o)}return s.fire(),n}e.initialize=r,e.withServices=function(e){if(i)return e();const t=new Xt,n=t.add(s.event((()=>{n.dispose(),t.add(e())})));return t}}($j||($j={}));class zj{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const n=void 0===t?void 0:e,i=void 0===t?e:t;return Pj({owner:n,debugName:()=>{const e=Xj(i);if(void 0!==e)return e;const t=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());return t?"".concat(this.debugName,".").concat(t[2]):n?void 0:"".concat(this.debugName," (mapped)")}},(e=>i(this.read(e),e)))}recomputeInitiallyAndOnChange(e,t){return e.add(Rj(this,t)),this}}class Wj extends zj{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),0===t&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&0===this.observers.size&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function Hj(e,t){const n=new Uj(e,t);try{e(n)}finally{n.finish()}}function Vj(e){if(Fj)e(Fj);else{const t=new Uj(e,void 0);Fj=t;try{e(t)}finally{t.finish(),Fj=void 0}}}function jj(e,t,n){e?t(e):Hj(t,n)}class Uj{constructor(e,t){var n;this._fn=e,this._getDebugName=t,this.updatingObservers=[],null===(n=Bj())||void 0===n||n.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():Xj(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){var e;const t=this.updatingObservers;for(let n=0;n<t.length;n++){const{observer:e,observable:i}=t[n];e.endUpdate(i)}this.updatingObservers=null,null===(e=Bj())||void 0===e||e.handleEndTransaction()}}const qj=new Map,Kj=new WeakMap;function Gj(e,t,n,i){var s;const r=Kj.get(e);if(r)return r;const o=function(e,t,n,i){const s=Kj.get(e);if(s)return s;const r=i?function(e){var t;const n=Qj.get(e);if(n)return n;const i=function(e){const t=e.constructor;if(t)return t.name;return"Object"}(e);let s=null!==(t=Yj.get(i))&&void 0!==t?t:0;s++,Yj.set(i,s);const r=1===s?i:"".concat(i,"#").concat(s);return Qj.set(e,r),r}(i)+".":"";let o;if(void 0!==t){if("function"!==typeof t)return r+t;if(o=t(),void 0!==o)return r+o}if(void 0!==n&&(o=Xj(n),void 0!==o))return r+o;if(void 0!==i)for(const a in i)if(i[a]===e)return r+a;return}(e,t,n,i);if(o){let t=null!==(s=qj.get(o))&&void 0!==s?s:0;t++,qj.set(o,t);const n=1===t?o:"".concat(o,"#").concat(t);return Kj.set(e,n),n}}const Yj=new Map,Qj=new WeakMap;function Xj(e){const t=e.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t),i=n?n[1]:void 0;return null===i||void 0===i?void 0:i.trim()}function Zj(e,t){return"string"===typeof e?new Jj(void 0,e,t):new Jj(e,void 0,t)}class Jj extends Wj{get debugName(){var e;return null!==(e=Gj(this,this._debugName,void 0,this._owner))&&void 0!==e?e:"ObservableValue"}constructor(e,t,n){super(),this._owner=e,this._debugName=t,this._value=n}get(){return this._value}set(e,t,n){var i;if(this._value===e)return;let s;t||(t=s=new Uj((()=>{}),(()=>"Setting ".concat(this.debugName))));try{const s=this._value;this._setValue(e),null===(i=Bj())||void 0===i||i.handleObservableChanged(this,{oldValue:s,newValue:e,change:n,didChange:!0,hadValue:!0});for(const e of this.observers)t.updateObserver(e,this),e.handleChange(this,n)}finally{s&&s.finish()}}toString(){return"".concat(this.debugName,": ").concat(this._value)}_setValue(e){this._value=e}}class eU extends Jj{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){var e;null===(e=this._value)||void 0===e||e.dispose()}}const tU=(e,t)=>e===t;function nU(e,t){return void 0!==t?new rU(e,void 0,t,void 0,void 0,void 0,tU):new rU(void 0,void 0,e,void 0,void 0,void 0,tU)}function iU(e,t){let n,i;void 0===t?(n=e,i=void 0):(i=e,n=t);const s=new Xt;return new rU(i,(()=>{var e;return null!==(e=Xj(n))&&void 0!==e?e:"(anonymous)"}),(e=>(s.clear(),n(e,s))),void 0,void 0,(()=>s.dispose()),tU)}function sU(e,t){let n,i;void 0===t?(n=e,i=void 0):(i=e,n=t);const s=new Xt;return new rU(i,(()=>{var e;return null!==(e=Xj(n))&&void 0!==e?e:"(anonymous)"}),(e=>{s.clear();const t=n(e);return t&&s.add(t),t}),void 0,void 0,(()=>s.dispose()),tU)}!function(e){Pj=e}((function(e,t){var n;return new rU(e.owner,e.debugName,t,void 0,void 0,e.onLastObserverRemoved,null!==(n=e.equalityComparer)&&void 0!==n?n:tU)}));class rU extends Wj{get debugName(){var e;return null!==(e=Gj(this,this._debugName,this._computeFn,this._owner))&&void 0!==e?e:"(anonymous)"}constructor(e,t,n,i,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;var a,l;super(),this._owner=e,this._debugName=t,this._computeFn=n,this.createChangeSummary=i,this._handleChange=s,this._handleLastObserverRemoved=r,this._equalityComparator=o,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=null===(a=this.createChangeSummary)||void 0===a?void 0:a.call(this),null===(l=Bj())||void 0===l||l.handleDerivedCreated(this)}onLastObserverRemoved(){var e;this.state=0,this.value=void 0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),null===(e=this._handleLastObserverRemoved)||void 0===e||e.call(this)}get(){var e;if(0===this.observers.size){const t=this._computeFn(this,null===(e=this.createChangeSummary)||void 0===e?void 0:e.call(this));return this.onLastObserverRemoved(),t}do{if(1===this.state)for(const e of this.dependencies)if(e.reportChanges(),2===this.state)break;1===this.state&&(this.state=3),this._recomputeIfNeeded()}while(3!==this.state);return this.value}_recomputeIfNeeded(){var e,t;if(3===this.state)return;const n=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=n;const i=0!==this.state,s=this.value;this.state=3;const r=this.changeSummary;this.changeSummary=null===(e=this.createChangeSummary)||void 0===e?void 0:e.call(this);try{this.value=this._computeFn(this,r)}finally{for(const e of this.dependenciesToBeRemoved)e.removeObserver(this);this.dependenciesToBeRemoved.clear()}const o=i&&!this._equalityComparator(s,this.value);if(null===(t=Bj())||void 0===t||t.handleDerivedRecomputed(this,{oldValue:s,newValue:this.value,change:void 0,didChange:o,hadValue:i}),o)for(const a of this.observers)a.handleChange(this,void 0)}toString(){return"LazyDerived<".concat(this.debugName,">")}beginUpdate(e){this.updateCount++;const t=1===this.updateCount;if(3===this.state&&(this.state=1,!t))for(const n of this.observers)n.handlePossibleChange(this);if(t)for(const n of this.observers)n.beginUpdate(this)}endUpdate(e){if(this.updateCount--,0===this.updateCount){const e=[...this.observers];for(const t of e)t.endUpdate(this)}_a((()=>this.updateCount>=0))}handlePossibleChange(e){if(3===this.state&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const e of this.observers)e.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const n=!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:t=>t===e},this.changeSummary),i=3===this.state;if(n&&(1===this.state||i)&&(this.state=2,i))for(const e of this.observers)e.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}function oU(e){return new uU(void 0,e,void 0,void 0)}function aU(e,t){return new uU(e.debugName,t,void 0,void 0)}function lU(e,t){return new uU(e.debugName,t,e.createEmptyChangeSummary,e.handleChange)}function cU(e){const t=new Xt,n=aU({debugName:()=>Xj(e)||"(anonymous)"},(n=>{t.clear(),e(n,t)}));return Qt((()=>{n.dispose(),t.dispose()}))}class uU{get debugName(){if("string"===typeof this._debugName)return this._debugName;if("function"===typeof this._debugName){const e=this._debugName();if(void 0!==e)return e}const e=Xj(this._runFn);return void 0!==e?e:"(anonymous)"}constructor(e,t,n,i){var s,r;this._debugName=e,this._runFn=t,this.createChangeSummary=n,this._handleChange=i,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=null===(s=this.createChangeSummary)||void 0===s?void 0:s.call(this),null===(r=Bj())||void 0===r||r.handleAutorunCreated(this),this._runIfNeeded(),jt(this)}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Ut(this)}_runIfNeeded(){var e,t,n;if(3===this.state)return;const i=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=i,this.state=3;const s=this.disposed;try{if(!s){null===(e=Bj())||void 0===e||e.handleAutorunTriggered(this);const n=this.changeSummary;this.changeSummary=null===(t=this.createChangeSummary)||void 0===t?void 0:t.call(this),this._runFn(this,n)}}finally{s||null===(n=Bj())||void 0===n||n.handleAutorunFinished(this);for(const e of this.dependenciesToBeRemoved)e.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return"Autorun<".concat(this.debugName,">")}beginUpdate(){3===this.state&&(this.state=1),this.updateCount++}endUpdate(){if(1===this.updateCount)do{if(1===this.state){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),2===this.state)break}this._runIfNeeded()}while(3!==this.state);this.updateCount--,_a((()=>this.updateCount>=0))}handlePossibleChange(e){3===this.state&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:t=>t===e},this.changeSummary))&&(this.state=2)}}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}function hU(e){return new dU(e)}!function(e){e.Observer=uU}(oU||(oU={}));class dU extends zj{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return"Const: ".concat(this.value)}}function fU(e,t){return new gU(e,t)}class gU extends Wj{constructor(e,t){super(),this.event=e,this._getValue=t,this.hasValue=!1,this.handleEvent=e=>{var t;const n=this._getValue(e),i=this.value,s=!this.hasValue||i!==n;let r=!1;s&&(this.value=n,this.hasValue&&(r=!0,jj(gU.globalTransaction,(e=>{var t;null===(t=Bj())||void 0===t||t.handleFromEventObservableTriggered(this,{oldValue:i,newValue:n,change:void 0,didChange:s,hadValue:this.hasValue});for(const n of this.observers)e.updateObserver(n,this),n.handleChange(this,void 0)}),(()=>{const e=this.getDebugName();return"Event fired"+(e?": ".concat(e):"")}))),this.hasValue=!0),r||null===(t=Bj())||void 0===t||t.handleFromEventObservableTriggered(this,{oldValue:i,newValue:n,change:void 0,didChange:s,hadValue:this.hasValue})}}getDebugName(){return Xj(this._getValue)}get debugName(){const e=this.getDebugName();return"From Event"+(e?": ".concat(e):"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}function pU(e,t){return new mU(e,t)}!function(e){e.Observer=gU,e.batchEventsGlobally=function(e,t){let n=!1;void 0===gU.globalTransaction&&(gU.globalTransaction=e,n=!0);try{t()}finally{n&&(gU.globalTransaction=void 0)}}}(fU||(fU={}));class mU extends Wj{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{Hj((e=>{for(const t of this.observers)e.updateObserver(t,this),t.handleChange(this,void 0)}),(()=>this.debugName))}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}class bU extends Wj{get debugName(){var e;return null!==(e=Gj(this,this._debugName,void 0,this._owner))&&void 0!==e?e:"Observable Signal"}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(e)for(const n of this.observers)e.updateObserver(n,this),n.handleChange(this,t);else Hj((e=>{this.trigger(e,t)}),(()=>"Trigger signal ".concat(this.debugName)))}get(){}}function _U(e,t){const n=new vU(!0,t);return e.addObserver(n),t?t(e.get()):e.reportChanges(),Qt((()=>{e.removeObserver(n)}))}!function(e){Oj=e}((function(e){const t=new vU(!1,void 0);return e.addObserver(t),Qt((()=>{e.removeObserver(t)}))})),function(e){Rj=e}(_U);class vU{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,0===this._counter&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}class yU{static capture(e){if(0===e.getScrollTop()||e.hasPendingScrollAnimation())return new yU(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,n=0;const i=e.getVisibleRanges();if(i.length>0){t=i[0].getStartPosition();const s=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-s}return new yU(e.getScrollTop(),e.getContentHeight(),t,n,e.getPosition())}constructor(e,t,n,i,s){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=n,this._visiblePositionScrollDelta=i,this._cursorPosition=s}restore(e){if((this._initialContentHeight!==e.getContentHeight()||this._initialScrollTop!==e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n)}}function SU(){return Pn&&!!Pn.VSCODE_DEV}function wU(e){if(SU()){const t=function(){kU||(kU=new Set);const e=globalThis;e.$hotReload_applyNewExports||(e.$hotReload_applyNewExports=e=>{for(const t of kU){const n=t(e);if(n)return n}});return kU}();return t.add(e),{dispose(){t.delete(e)}}}return{dispose(){}}}let kU;function CU(e,t){const n=new Xt,i=e.createDecorationsCollection();return n.add(aU({debugName:()=>"Apply decorations from ".concat(t.debugName)},(e=>{const n=t.read(e);i.set(n)}))),n.add({dispose:()=>{i.clear()}}),n}function xU(e,t){return e.appendChild(t),Qt((()=>{e.removeChild(t)}))}SU()&&wU((e=>{let{oldExports:t,newSrc:n}=e;if(-1!==n.indexOf("/* hot-reload:patch-prototype-methods */"))return e=>{var n,i;for(const s in e){const r=e[s];if(console.log("[hot-reload] Patching prototype methods of '".concat(s,"'"),{exportedItem:r}),"function"===typeof r&&r.prototype){const o=t[s];if(o){for(const e of Object.getOwnPropertyNames(r.prototype)){const t=Object.getOwnPropertyDescriptor(r.prototype,e),a=Object.getOwnPropertyDescriptor(o.prototype,e);(null===(n=null===t||void 0===t?void 0:t.value)||void 0===n?void 0:n.toString())!==(null===(i=null===a||void 0===a?void 0:a.value)||void 0===i?void 0:i.toString())&&console.log("[hot-reload] Patching prototype method '".concat(s,".").concat(e,"'")),Object.defineProperty(o.prototype,e,t)}e[s]=o}}}return!0}}));class EU extends Zt{get width(){return this._width}get height(){return this._height}constructor(e,t){super(),this.elementSizeObserver=this._register(new qm(e,t)),this._width=Zj(this,this.elementSizeObserver.getWidth()),this._height=Zj(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange((e=>Hj((e=>{this._width.set(this.elementSizeObserver.getWidth(),e),this._height.set(this.elementSizeObserver.getHeight(),e)})))))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function LU(e,t,n){let i=t.get(),s=i,r=i;const o=Zj("animatedValue",i);let a=-1;let l;function c(){const t=Date.now()-a;var n,u,h,d;r=Math.floor((u=s,h=i-s,(n=t)===(d=300)?u+h:h*(1-Math.pow(2,-10*n/d))+u)),t<300?l=e.requestAnimationFrame(c):r=i,o.set(r,void 0)}return n.add(lU({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(e,n)=>(e.didChange(t)&&(n.animate=n.animate||e.change),!0)},((n,o)=>{void 0!==l&&(e.cancelAnimationFrame(l),l=void 0),s=r,i=t.read(n),a=Date.now()-(o.animate?0:300),c()}))),o}class DU extends Zt{constructor(e,t,n){super(),this._register(new TU(e,n)),this._register(NU(n,{height:t.actualHeight,top:t.actualTop}))}}class AU{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=Zj(this,void 0),this._actualHeight=Zj(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=e=>{this._actualTop.set(e,void 0)},this.onComputedHeight=e=>{this._actualHeight.set(e,void 0)}}}class TU{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId="managedOverlayWidget-".concat(TU._counter++),this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}}function NU(e,t){return oU((n=>{for(let[i,s]of Object.entries(t))s&&"object"===typeof s&&"read"in s&&(s=s.read(n)),"number"===typeof s&&(s="".concat(s,"px")),i=i.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),e.style[i]=s}))}function IU(e,t){return function(e,t){if(SU()){pU("reload",(t=>wU((n=>{let{oldExports:i}=n;if([...Object.values(i)].some((t=>e.includes(t))))return e=>(t(void 0),!0)})))).read(t)}}([e],t),e}function $U(e,t,n,i){const s=new Xt,r=[];return s.add(cU(((s,o)=>{const a=t.read(s),l=new Map,c=new Map;n&&n(!0),e.changeViewZones((e=>{for(const t of r)e.removeZone(t),null===i||void 0===i||i.delete(t);r.length=0;for(const t of a){const n=e.addZone(t);t.setZoneId&&t.setZoneId(n),r.push(n),null===i||void 0===i||i.add(n),l.set(t,n)}})),n&&n(!1),o.add(lU({createEmptyChangeSummary:()=>({zoneIds:[]}),handleChange(e,t){const n=c.get(e.changedObservable);return void 0!==n&&t.zoneIds.push(n),!0}},((t,i)=>{for(const e of a)e.onChange&&(c.set(e.onChange,l.get(e)),e.onChange.read(t));n&&n(!0),e.changeViewZones((e=>{for(const t of i.zoneIds)e.layoutZone(t)})),n&&n(!1)})))}))),s.add({dispose(){n&&n(!0),e.changeViewZones((e=>{for(const t of r)e.removeZone(t)})),null===i||void 0===i||i.clear(),n&&n(!1)}}),s}TU._counter=0;function MU(e,t){const n=Qf(t,(t=>t.original.startLineNumber<=e.lineNumber));if(!n)return xi.fromPositions(e);if(n.original.endLineNumberExclusive<=e.lineNumber){const t=e.lineNumber-n.original.endLineNumberExclusive+n.modified.endLineNumberExclusive;return xi.fromPositions(new Ci(t,e.column))}if(!n.innerChanges)return xi.fromPositions(new Ci(n.modified.startLineNumber,1));const i=Qf(n.innerChanges,(t=>t.originalRange.getStartPosition().isBeforeOrEqual(e)));if(!i){const t=e.lineNumber-n.original.startLineNumber+n.modified.startLineNumber;return xi.fromPositions(new Ci(t,e.column))}if(i.originalRange.containsPosition(e))return i.modifiedRange;{const t=(o=i.originalRange.getEndPosition(),a=e,o.lineNumber===a.lineNumber?new qx(0,a.column-o.column):new qx(a.lineNumber-o.lineNumber,a.column-1));return xi.fromPositions((s=i.modifiedRange.getEndPosition(),0===(r=t).lineCount?new Ci(s.lineNumber,s.column+r.columnCount):new Ci(s.lineNumber+r.lineCount,r.columnCount+1)))}var s,r,o,a}function RU(e,t,n){const i=e.bindTo(t);return aU({debugName:()=>"Update ".concat(e.key)},(e=>{i.set(n(e))}))}var OU=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},PU=function(e,t){return function(n,i){t(n,i,e)}};const FU=rV("diff-review-insert",Ti.add,G("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),BU=rV("diff-review-remove",Ti.remove,G("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),zU=rV("diff-review-close",Ti.close,G("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));let WU=class extends Zt{constructor(e,t,n,i,s,r,o,a,l){super(),this._parentNode=e,this._visible=t,this._setVisible=n,this._canClose=i,this._width=s,this._height=r,this._diffs=o,this._editors=a,this._instantiationService=l,this._state=iU(this,((e,t)=>{const n=this._visible.read(e);if(this._parentNode.style.visibility=n?"visible":"hidden",!n)return null;const i=t.add(this._instantiationService.createInstance(HU,this._diffs,this._editors,this._setVisible,this._canClose));return{model:i,view:t.add(this._instantiationService.createInstance(QU,this._parentNode,i,this._width,this._height,this._editors))}})).recomputeInitiallyAndOnChange(this._store)}next(){Hj((e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)}))}prev(){Hj((e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)}))}close(){Hj((e=>{this._setVisible(!1,e)}))}};WU._ttPolicy=vh("diffReview",{createHTML:e=>e}),WU=OU([PU(8,so)],WU);let HU=class extends Zt{constructor(e,t,n,i,s){super(),this._diffs=e,this._editors=t,this._setVisible=n,this.canClose=i,this._audioCueService=s,this._groups=Zj(this,[]),this._currentGroupIdx=Zj(this,0),this._currentElementIdx=Zj(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map(((e,t)=>this._groups.read(t)[e])),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map(((e,t)=>{var n;return null===(n=this.currentGroup.read(t))||void 0===n?void 0:n.lines[e]})),this._register(oU((e=>{const t=this._diffs.read(e);if(!t)return void this._groups.set([],void 0);const n=function(e,t,n){const i=[];for(const s of l(e,((e,t)=>t.modified.startLineNumber-e.modified.endLineNumberExclusive<2*VU))){const e=[];e.push(new qU);const r=new ig(Math.max(1,s[0].original.startLineNumber-VU),Math.min(s[s.length-1].original.endLineNumberExclusive+VU,t+1)),o=new ig(Math.max(1,s[0].modified.startLineNumber-VU),Math.min(s[s.length-1].modified.endLineNumberExclusive+VU,n+1));c(s,((t,n)=>{const i=new ig(t?t.original.endLineNumberExclusive:r.startLineNumber,n?n.original.startLineNumber:r.endLineNumberExclusive),s=new ig(t?t.modified.endLineNumberExclusive:o.startLineNumber,n?n.modified.startLineNumber:o.endLineNumberExclusive);i.forEach((t=>{e.push(new YU(t,s.startLineNumber+(t-i.startLineNumber)))})),n&&(n.original.forEach((t=>{e.push(new KU(n,t))})),n.modified.forEach((t=>{e.push(new GU(n,t))})))}));const a=s[0].modified.join(s[s.length-1].modified),l=s[0].original.join(s[s.length-1].original);i.push(new UU(new rg(a,l),e))}return i}(t,this._editors.original.getModel().getLineCount(),this._editors.modified.getModel().getLineCount());Hj((e=>{const t=this._editors.modified.getPosition();if(t){const i=n.findIndex((e=>(null===t||void 0===t?void 0:t.lineNumber)<e.range.modified.endLineNumberExclusive));-1!==i&&this._currentGroupIdx.set(i,e)}this._groups.set(n,e)}))}))),this._register(oU((e=>{const t=this.currentElement.read(e);(null===t||void 0===t?void 0:t.type)===jU.Deleted?this._audioCueService.playAudioCue(hj.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(null===t||void 0===t?void 0:t.type)===jU.Added&&this._audioCueService.playAudioCue(hj.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})}))),this._register(oU((e=>{var t;const n=this.currentElement.read(e);if(n&&n.type!==jU.Header){const e=null!==(t=n.modifiedLineNumber)&&void 0!==t?t:n.diff.modified.startLineNumber;this._editors.modified.setSelection(xi.fromPositions(new Ci(e,1)))}})))}_goToGroupDelta(e,t){const n=this.groups.get();!n||n.length<=1||jj(t,(t=>{this._currentGroupIdx.set(Gf.ofLength(n.length).clipCyclic(this._currentGroupIdx.get()+e),t),this._currentElementIdx.set(0,t)}))}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||Hj((n=>{this._currentElementIdx.set(Gf.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),n)}))}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const n=t.lines.indexOf(e);-1!==n&&Hj((e=>{this._currentElementIdx.set(n,e)}))}revealCurrentElementInEditor(){this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===jU.Deleted?(this._editors.original.setSelection(xi.fromPositions(new Ci(e.originalLineNumber,1))),this._editors.original.revealLine(e.originalLineNumber),this._editors.original.focus()):(e.type!==jU.Header&&(this._editors.modified.setSelection(xi.fromPositions(new Ci(e.modifiedLineNumber,1))),this._editors.modified.revealLine(e.modifiedLineNumber)),this._editors.modified.focus()))}close(){this._setVisible(!1,void 0),this._editors.modified.focus()}};HU=OU([PU(4,lj)],HU);const VU=3;var jU;!function(e){e[e.Header=0]="Header",e[e.Unchanged=1]="Unchanged",e[e.Deleted=2]="Deleted",e[e.Added=3]="Added"}(jU||(jU={}));class UU{constructor(e,t){this.range=e,this.lines=t}}class qU{constructor(){this.type=jU.Header}}class KU{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=jU.Deleted,this.modifiedLineNumber=void 0}}class GU{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=jU.Added,this.originalLineNumber=void 0}}class YU{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=jU.Unchanged}}let QU=class extends Zt{constructor(e,t,n,i,s,r){super(),this._element=e,this._model=t,this._width=n,this._height=i,this._editors=s,this._languageService=r,this.domNode=this._element,this.domNode.className="diff-review monaco-editor-background";const o=document.createElement("div");o.className="diff-review-actions",this._actionBar=this._register(new rF(o)),this._register(oU((e=>{this._actionBar.clear(),this._model.canClose.read(e)&&this._actionBar.push(new co("diffreview.close",G("label.close","Close"),"close-diff-review "+bo.asClassName(zU),!0,(async()=>t.close())),{label:!1,icon:!0})}))),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new DS(this._content,{})),Tu(this.domNode,this._scrollbar.getDomNode(),o),this._register(Qt((()=>{Tu(this.domNode)}))),this._register(NU(this.domNode,{width:this._width,height:this._height})),this._register(NU(this._content,{width:this._width,height:this._height})),this._register(cU(((e,t)=>{this._model.currentGroup.read(e),this._render(t)}))),this._register(Hc(this.domNode,"keydown",(e=>{(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),this._model.goToNextLine()),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),this._model.goToPreviousLine()),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),this._model.close()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),this._model.revealCurrentElementInEditor())})))}_render(e){const t=this._editors.original.getOptions(),n=this._editors.modified.getOptions(),i=document.createElement("div");i.className="diff-review-table",i.setAttribute("role","list"),i.setAttribute("aria-label",G("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),Gr(i,n.get(50)),Tu(this._content,i);const s=this._editors.original.getModel(),r=this._editors.modified.getModel();if(!s||!r)return;const o=s.getOptions(),a=r.getOptions(),l=n.get(66),c=this._model.currentGroup.get();for(const u of(null===c||void 0===c?void 0:c.lines)||[]){if(!c)break;let h;if(u.type===jU.Header){const e=document.createElement("div");e.className="diff-review-row",e.setAttribute("role","listitem");const t=c.range,n=this._model.currentGroupIndex.get(),i=this._model.groups.get().length,s=e=>0===e?G("no_lines_changed","no lines changed"):1===e?G("one_line_changed","1 line changed"):G("more_lines_changed","{0} lines changed",e),r=s(t.original.length),o=s(t.modified.length);e.setAttribute("aria-label",G({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",n+1,i,t.original.startLineNumber,r,t.modified.startLineNumber,o));const a=document.createElement("div");a.className="diff-review-cell diff-review-summary",a.appendChild(document.createTextNode("".concat(n+1,"/").concat(i,": @@ -").concat(t.original.startLineNumber,",").concat(t.original.length," +").concat(t.modified.startLineNumber,",").concat(t.modified.length," @@"))),e.appendChild(a),h=e}else h=this._createRow(u,l,this._width.get(),t,s,o,n,r,a);i.appendChild(h);const d=nU((e=>this._model.currentElement.read(e)===u));e.add(oU((e=>{const t=d.read(e);h.tabIndex=t?0:-1,t&&h.focus()}))),e.add(zc(h,"focus",(()=>{this._model.goToLine(u)})))}this._scrollbar.scanDomNode()}_createRow(e,t,n,i,s,r,o,a,l){const c=i.get(143),u=c.glyphMarginWidth+c.lineNumbersWidth,h=o.get(143),d=10+h.glyphMarginWidth+h.lineNumbersWidth;let f="diff-review-row",g="";let p=null;switch(e.type){case jU.Added:f="diff-review-row line-insert",g=" char-insert",p=FU;break;case jU.Deleted:f="diff-review-row line-delete",g=" char-delete",p=BU}const m=document.createElement("div");m.style.minWidth=n+"px",m.className=f,m.setAttribute("role","listitem"),m.ariaLevel="";const b=document.createElement("div");b.className="diff-review-cell",b.style.height="".concat(t,"px"),m.appendChild(b);const _=document.createElement("span");_.style.width=u+"px",_.style.minWidth=u+"px",_.className="diff-review-line-number"+g,void 0!==e.originalLineNumber?_.appendChild(document.createTextNode(String(e.originalLineNumber))):_.innerText="\xa0",b.appendChild(_);const v=document.createElement("span");v.style.width=d+"px",v.style.minWidth=d+"px",v.style.paddingRight="10px",v.className="diff-review-line-number"+g,void 0!==e.modifiedLineNumber?v.appendChild(document.createTextNode(String(e.modifiedLineNumber))):v.innerText="\xa0",b.appendChild(v);const y=document.createElement("span");if(y.className="diff-review-spacer",p){const e=document.createElement("span");e.className=bo.asClassName(p),e.innerText="\xa0\xa0",y.appendChild(e)}else y.innerText="\xa0\xa0";let S;if(b.appendChild(y),void 0!==e.modifiedLineNumber){let t=this._getLineHtml(a,o,l.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);WU._ttPolicy&&(t=WU._ttPolicy.createHTML(t)),b.insertAdjacentHTML("beforeend",t),S=a.getLineContent(e.modifiedLineNumber)}else{let t=this._getLineHtml(s,i,r.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);WU._ttPolicy&&(t=WU._ttPolicy.createHTML(t)),b.insertAdjacentHTML("beforeend",t),S=s.getLineContent(e.originalLineNumber)}0===S.length&&(S=G("blankLine","blank"));let w="";switch(e.type){case jU.Unchanged:w=e.originalLineNumber===e.modifiedLineNumber?G({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",S,e.originalLineNumber):G("equalLine","{0} original line {1} modified line {2}",S,e.originalLineNumber,e.modifiedLineNumber);break;case jU.Added:w=G("insertLine","+ {0} modified line {1}",S,e.modifiedLineNumber);break;case jU.Deleted:w=G("deleteLine","- {0} original line {1}",S,e.originalLineNumber)}return m.setAttribute("aria-label",w),m}_getLineHtml(e,t,n,i,s){const r=e.getLineContent(i),o=t.get(50),a=Op.createEmpty(r,s),l=im.isBasicASCII(r,e.mightContainNonBasicASCII()),c=im.containsRTL(r,l,e.mightContainRTL());return Qp(new jp(o.isMonospace&&!t.get(33),o.canUseHalfwidthRightwardsArrow,r,!1,l,c,0,a,[],n,0,o.spaceWidth,o.middotWidth,o.wsmiddotWidth,t.get(116),t.get(98),t.get(93),t.get(51)!==ht.OFF,null)).html}};QU=OU([PU(5,dd)],QU);class XU extends Zt{constructor(e,t,n,i,r){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=n,this._modifiedEditorLayoutInfo=i,this._editors=r,this._originalScrollTop=fU(this._editors.original.onDidScrollChange,(()=>this._editors.original.getScrollTop())),this._modifiedScrollTop=fU(this._editors.modified.onDidScrollChange,(()=>this._editors.modified.getScrollTop())),this._viewZonesChanged=pU("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=Zj(this,0),this._modifiedViewZonesChangedSignal=pU("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=pU("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=iU(this,((e,t)=>{var n;this._element.replaceChildren();const i=this._diffModel.read(e),r=null===(n=null===i||void 0===i?void 0:i.diff.read(e))||void 0===n?void 0:n.movedTexts;if(!r||0===r.length)return void this.width.set(0,void 0);this._viewZonesChanged.read(e);const o=this._originalEditorLayoutInfo.read(e),a=this._modifiedEditorLayoutInfo.read(e);if(!o||!a)return void this.width.set(0,void 0);this._modifiedViewZonesChangedSignal.read(e),this._originalViewZonesChangedSignal.read(e);const l=r.map((t=>{function n(e,t){return(t.getTopForLineNumber(e.startLineNumber,!0)+t.getTopForLineNumber(e.endLineNumberExclusive,!0))/2}const i=n(t.lineRangeMapping.original,this._editors.original),s=this._originalScrollTop.read(e),r=n(t.lineRangeMapping.modified,this._editors.modified),o=i-s,a=r-this._modifiedScrollTop.read(e),l=Math.min(i,r),c=Math.max(i,r);return{range:new Gf(l,c),from:o,to:a,fromWithoutScroll:i,toWithoutScroll:r,move:t}}));l.sort(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(e,n)=>{for(const i of t){const t=i(e,n);if(!s.isNeitherLessOrGreaterThan(t))return t}return s.neitherLessOrGreaterThan}}(w((e=>e.fromWithoutScroll>e.toWithoutScroll),C),w((e=>e.fromWithoutScroll>e.toWithoutScroll?e.fromWithoutScroll:-e.toWithoutScroll),k)));const c=ZU.compute(l.map((e=>e.range))),u=o.verticalScrollbarWidth,h=10*(c.getTrackCount()-1)+20,d=u+h+(a.contentLeft-XU.movedCodeBlockPadding);let f=0;for(const s of l){const e=u+10+10*c.getTrack(f),n=15,r=15,o=d,l=a.glyphMarginWidth+a.lineNumbersWidth,h=18,g=document.createElementNS("http://www.w3.org/2000/svg","rect");g.classList.add("arrow-rectangle"),g.setAttribute("x","".concat(o-l)),g.setAttribute("y","".concat(s.to-h/2)),g.setAttribute("width","".concat(l)),g.setAttribute("height","".concat(h)),this._element.appendChild(g);const p=document.createElementNS("http://www.w3.org/2000/svg","g"),m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttribute("d","M ".concat(0," ",s.from," L ").concat(e," ").concat(s.from," L ").concat(e," ").concat(s.to," L ").concat(o-r," ").concat(s.to)),m.setAttribute("fill","none"),p.appendChild(m);const b=document.createElementNS("http://www.w3.org/2000/svg","polygon");b.classList.add("arrow"),t.add(oU((e=>{m.classList.toggle("currentMove",s.move===i.activeMovedText.read(e)),b.classList.toggle("currentMove",s.move===i.activeMovedText.read(e))}))),b.setAttribute("points","".concat(o-r,",").concat(s.to-n/2," ").concat(o,",").concat(s.to," ").concat(o-r,",").concat(s.to+n/2)),p.appendChild(b),this._element.appendChild(p),f++}this.width.set(h,void 0)})),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(Qt((()=>this._element.remove()))),this._register(oU((e=>{const t=this._originalEditorLayoutInfo.read(e),n=this._modifiedEditorLayoutInfo.read(e);t&&n&&(this._element.style.left="".concat(t.width-t.verticalScrollbarWidth,"px"),this._element.style.height="".concat(t.height,"px"),this._element.style.width="".concat(t.verticalScrollbarWidth+t.contentLeft-XU.movedCodeBlockPadding+this.width.read(e),"px"))}))),this._register(_U(this._state));const o=nU((e=>{const t=this._diffModel.read(e),n=null===t||void 0===t?void 0:t.diff.read(e);return n?n.movedTexts.map((e=>({move:e,original:new AU(hU(e.lineRangeMapping.original.startLineNumber-1),18),modified:new AU(hU(e.lineRangeMapping.modified.startLineNumber-1),18)}))):[]}));this._register($U(this._editors.original,o.map((e=>e.map((e=>e.original)))))),this._register($U(this._editors.modified,o.map((e=>e.map((e=>e.modified)))))),this._register(cU(((e,t)=>{const n=o.read(e);for(const i of n)t.add(new JU(this._editors.original,i.original,i.move,"original",this._diffModel.get())),t.add(new JU(this._editors.modified,i.modified,i.move,"modified",this._diffModel.get()))})));const a=fU(this._editors.original.onDidChangeCursorPosition,(()=>this._editors.original.getPosition())),l=fU(this._editors.modified.onDidChangeCursorPosition,(()=>this._editors.modified.getPosition())),c=pU("original.onDidFocusEditorWidget",(e=>this._editors.original.onDidFocusEditorWidget((()=>setTimeout((()=>e(void 0)),0))))),u=pU("modified.onDidFocusEditorWidget",(e=>this._editors.modified.onDidFocusEditorWidget((()=>setTimeout((()=>e(void 0)),0)))));let h="modified";this._register(lU({createEmptyChangeSummary:()=>{},handleChange:(e,t)=>(e.didChange(c)&&(h="original"),e.didChange(u)&&(h="modified"),!0)},(e=>{c.read(e),u.read(e);const t=this._diffModel.read(e);if(!t)return;const n=t.diff.read(e);let i;if(n&&"original"===h){const t=a.read(e);t&&(i=n.movedTexts.find((e=>e.lineRangeMapping.original.contains(t.lineNumber))))}if(n&&"modified"===h){const t=l.read(e);t&&(i=n.movedTexts.find((e=>e.lineRangeMapping.modified.contains(t.lineNumber))))}i!==t.movedTextToCompare.get()&&t.movedTextToCompare.set(void 0,void 0),t.setActiveMovedText(i)})))}}XU.movedCodeBlockPadding=4;class ZU{static compute(e){const t=[],n=[];for(const i of e){let e=t.findIndex((e=>!e.intersectsStrict(i)));if(-1===e){const n=6;t.length>=n?e=ng(t,w((e=>e.intersectWithRangeLength(i)),k)):(e=t.length,t.push(new Yf))}t[e].addRange(i),n.push(e)}return new ZU(t.length,n)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class JU extends DU{constructor(e,t,n,i,s){const r=qu("div.diff-hidden-lines-widget");super(e,t,r.root),this._editor=e,this._move=n,this._kind=i,this._diffModel=s,this._nodes=qu("div.diff-moved-code-block",{style:{marginRight:"4px"}},[qu("div.text-content@textContent"),qu("div.action-bar@actionBar")]),r.root.appendChild(this._nodes.root);const o=fU(this._editor.onDidLayoutChange,(()=>this._editor.getLayoutInfo()));let a;this._register(NU(this._nodes.root,{paddingRight:o.map((e=>e.verticalScrollbarWidth))})),a=n.changes.length>0?"original"===this._kind?G("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):G("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):"original"===this._kind?G("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):G("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const l=this._register(new rF(this._nodes.actionBar,{highlightToggledItems:!0})),c=new co("",a,"",!1);l.push(c,{icon:!1,label:!0});const u=new co("","Compare",bo.asClassName(Ti.compareChanges),!0,(()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===n?void 0:this._move,void 0)}));this._register(oU((e=>{const t=this._diffModel.movedTextToCompare.read(e)===n;u.checked=t}))),l.push(u,{icon:!1,label:!0})}}gb("diffEditor.move.border",{dark:"#8b8b8b9c",light:"#8b8b8b9c",hcDark:"#8b8b8b9c",hcLight:"#8b8b8b9c"},G("diffEditor.move.border","The border color for text that got moved in the diff editor.")),gb("diffEditor.moveActive.border",{dark:"#FFA500",light:"#FFA500",hcDark:"#FFA500",hcLight:"#FFA500"},G("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor.")),gb("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},G("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const eq=rV("diff-insert",Ti.add,G("diffInsertIcon","Line decoration for inserts in the diff editor.")),tq=rV("diff-remove",Ti.remove,G("diffRemoveIcon","Line decoration for removals in the diff editor.")),nq=yA.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+bo.asClassName(eq),marginClassName:"gutter-insert"}),iq=yA.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+bo.asClassName(tq),marginClassName:"gutter-delete"}),sq=yA.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),rq=yA.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),oq=yA.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),aq=yA.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),lq=yA.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),cq=yA.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),uq=yA.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),hq=yA.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});class dq extends Zt{constructor(e,t,n,i){super(),this._editors=e,this._diffModel=t,this._options=n,this._decorations=nU(this,(e=>{var t;const n=null===(t=this._diffModel.read(e))||void 0===t?void 0:t.diff.read(e);if(!n)return null;const i=this._diffModel.read(e).movedTextToCompare.read(e),s=this._options.renderIndicators.read(e),r=this._options.showEmptyDecorations.read(e),o=[],a=[];if(!i)for(const c of n.mappings)if(c.lineRangeMapping.original.isEmpty||o.push({range:c.lineRangeMapping.original.toInclusiveRange(),options:s?iq:rq}),c.lineRangeMapping.modified.isEmpty||a.push({range:c.lineRangeMapping.modified.toInclusiveRange(),options:s?nq:sq}),c.lineRangeMapping.modified.isEmpty||c.lineRangeMapping.original.isEmpty)c.lineRangeMapping.original.isEmpty||o.push({range:c.lineRangeMapping.original.toInclusiveRange(),options:uq}),c.lineRangeMapping.modified.isEmpty||a.push({range:c.lineRangeMapping.modified.toInclusiveRange(),options:aq});else for(const e of c.lineRangeMapping.innerChanges||[])c.lineRangeMapping.original.contains(e.originalRange.startLineNumber)&&o.push({range:e.originalRange,options:e.originalRange.isEmpty()&&r?hq:cq}),c.lineRangeMapping.modified.contains(e.modifiedRange.startLineNumber)&&a.push({range:e.modifiedRange,options:e.modifiedRange.isEmpty()&&r?lq:oq});if(i)for(const c of i.changes){const e=c.original.toInclusiveRange();e&&o.push({range:e,options:s?iq:rq});const t=c.modified.toInclusiveRange();t&&a.push({range:t,options:s?nq:sq});for(const n of c.innerChanges||[])o.push({range:n.originalRange,options:cq}),a.push({range:n.modifiedRange,options:oq})}const l=this._diffModel.read(e).activeMovedText.read(e);for(const c of n.movedTexts)o.push({range:c.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(c===l?" currentMove":""),blockPadding:[XU.movedCodeBlockPadding,0,XU.movedCodeBlockPadding,XU.movedCodeBlockPadding]}}),a.push({range:c.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(c===l?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:o,modifiedDecorations:a}})),this._register(CU(this._editors.original,this._decorations.map((e=>(null===e||void 0===e?void 0:e.originalDecorations)||[])))),this._register(CU(this._editors.modified,this._decorations.map((e=>(null===e||void 0===e?void 0:e.modifiedDecorations)||[]))))}}class fq extends Zt{constructor(e,t,n,i){super(),this._options=e,this._domNode=t,this._dimensions=n,this._sashes=i,this._sashRatio=Zj(this,void 0),this.sashLeft=nU(this,(e=>{var t;const n=null!==(t=this._sashRatio.read(e))&&void 0!==t?t:this._options.splitViewDefaultRatio.read(e);return this._computeSashLeft(n,e)})),this._sash=this._register(new JF(this._domNode,{getVerticalSashTop:e=>0,getVerticalSashLeft:e=>this.sashLeft.get(),getVerticalSashHeight:e=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart((()=>{this._startSashPosition=this.sashLeft.get()}))),this._register(this._sash.onDidChange((e=>{const t=this._dimensions.width.get(),n=this._computeSashLeft((this._startSashPosition+(e.currentX-e.startX))/t,void 0);this._sashRatio.set(n/t,void 0)}))),this._register(this._sash.onDidEnd((()=>this._sash.layout()))),this._register(this._sash.onDidReset((()=>this._sashRatio.set(void 0,void 0)))),this._register(oU((e=>{const t=this._sashes.read(e);t&&(this._sash.orthogonalEndSash=t.bottom)}))),this._register(oU((e=>{const t=this._options.enableSplitViewResizing.read(e);this._sash.state=t?3:0,this.sashLeft.read(e),this._dimensions.height.read(e),this._sash.layout()})))}_computeSashLeft(e,t){const n=this._dimensions.width.read(t),i=Math.floor(this._options.splitViewDefaultRatio.read(t)*n),s=this._options.enableSplitViewResizing.read(t)?Math.floor(e*n):i,r=100;return n<=200?i:s<r?r:s>n-r?n-r:s}}var gq,pq=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},mq=function(e,t){return function(n,i){t(n,i,e)}};let bq=gq=class extends Zt{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,n,i){super(),this._editors=e,this._diffModel=t,this._options=n,this._instantiationService=i,this._modifiedOutlineSource=sU(this,(e=>{const t=this._editors.modifiedModel.read(e),n=gq._breadcrumbsSourceFactory.read(e);return t&&n?n(t,this._instantiationService):void 0})),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition((e=>{if(3===e.reason){const e=this._diffModel.get();Hj((t=>{for(const n of this._editors.original.getSelections()||[])null===e||void 0===e||e.ensureOriginalLineIsVisible(n.getStartPosition().lineNumber,0,t),null===e||void 0===e||e.ensureOriginalLineIsVisible(n.getEndPosition().lineNumber,0,t)}))}}))),this._register(this._editors.modified.onDidChangeCursorPosition((e=>{if(3===e.reason){const e=this._diffModel.get();Hj((t=>{for(const n of this._editors.modified.getSelections()||[])null===e||void 0===e||e.ensureModifiedLineIsVisible(n.getStartPosition().lineNumber,0,t),null===e||void 0===e||e.ensureModifiedLineIsVisible(n.getEndPosition().lineNumber,0,t)}))}})));const s=this._diffModel.map(((e,t)=>{var n,i;const s=null!==(n=null===e||void 0===e?void 0:e.unchangedRegions.read(t))&&void 0!==n?n:[];return 1===s.length&&1===s[0].modifiedLineNumber&&s[0].lineCount===(null===(i=this._editors.modifiedModel.read(t))||void 0===i?void 0:i.getLineCount())?[]:s}));this.viewZones=iU(this,((e,t)=>{const n=this._modifiedOutlineSource.read(e);if(!n)return{origViewZones:[],modViewZones:[]};const i=[],r=[],o=this._options.renderSideBySide.read(e),a=s.read(e);for(const s of a)if(!s.shouldHideControls(e)){{const e=nU(this,(e=>s.getHiddenOriginalRange(e).startLineNumber-1)),r=new AU(e,24);i.push(r),t.add(new _q(this._editors.original,r,s,s.originalUnchangedRange,!o,n,(e=>this._diffModel.get().ensureModifiedLineIsVisible(e,2,void 0)),this._options))}{const e=nU(this,(e=>s.getHiddenModifiedRange(e).startLineNumber-1)),i=new AU(e,24);r.push(i),t.add(new _q(this._editors.modified,i,s,s.modifiedUnchangedRange,!1,n,(e=>this._diffModel.get().ensureModifiedLineIsVisible(e,2,void 0)),this._options))}}return{origViewZones:i,modViewZones:r}}));const r={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},o={description:"Fold Unchanged",glyphMarginHoverMessage:new uM(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(G("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+bo.asClassName(Ti.fold),zIndex:10001};this._register(CU(this._editors.original,nU(this,(e=>{const t=s.read(e),n=t.map((e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:r})));for(const i of t)i.shouldHideControls(e)&&n.push({range:xi.fromPositions(new Ci(i.originalLineNumber,1)),options:o});return n})))),this._register(CU(this._editors.modified,nU(this,(e=>{const t=s.read(e),n=t.map((e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:r})));for(const i of t)i.shouldHideControls(e)&&n.push({range:ig.ofLength(i.modifiedLineNumber,1).toInclusiveRange(),options:o});return n})))),this._register(oU((e=>{const t=s.read(e);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(t.map((t=>t.getHiddenOriginalRange(e).toInclusiveRange())).filter(M)),this._editors.modified.setHiddenAreas(t.map((t=>t.getHiddenModifiedRange(e).toInclusiveRange())).filter(M))}finally{this._isUpdatingHiddenAreas=!1}}))),this._register(this._editors.modified.onMouseUp((e=>{var t;if(!e.event.rightButton&&e.target.position&&(null===(t=e.target.element)||void 0===t?void 0:t.className.includes("fold-unchanged"))){const t=e.target.position.lineNumber,n=this._diffModel.get();if(!n)return;const i=n.unchangedRegions.get().find((e=>e.modifiedUnchangedRange.includes(t)));if(!i)return;i.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}}))),this._register(this._editors.original.onMouseUp((e=>{var t;if(!e.event.rightButton&&e.target.position&&(null===(t=e.target.element)||void 0===t?void 0:t.className.includes("fold-unchanged"))){const t=e.target.position.lineNumber,n=this._diffModel.get();if(!n)return;const i=n.unchangedRegions.get().find((e=>e.originalUnchangedRange.includes(t)));if(!i)return;i.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}})))}};bq._breadcrumbsSourceFactory=Zj("breadcrumbsSourceFactory",void 0),bq=gq=pq([mq(3,so)],bq);class _q extends DU{constructor(e,t,n,i,s,r,o,a){const l=qu("div.diff-hidden-lines-widget");super(e,t,l.root),this._editor=e,this._unchangedRegion=n,this._unchangedRegionRange=i,this._hide=s,this._modifiedOutlineSource=r,this._revealModifiedHiddenLine=o,this._options=a,this._nodes=qu("div.diff-hidden-lines",[qu("div.top@top",{title:G("diff.hiddenLines.top","Click or drag to show more above")}),qu("div.center@content",{style:{display:"flex"}},[qu("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[Mu("a",{title:G("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...b$("$(unfold)"))]),qu("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),qu("div.bottom@bottom",{title:G("diff.bottom","Click or drag to show more below"),role:"button"})]),l.root.appendChild(this._nodes.root);const c=fU(this._editor.onDidLayoutChange,(()=>this._editor.getLayoutInfo()));this._hide?Tu(this._nodes.first):this._register(NU(this._nodes.first,{width:c.map((e=>e.contentLeft))})),this._register(oU((e=>{const t=this._unchangedRegion.visibleLineCountTop.read(e)+this._unchangedRegion.visibleLineCountBottom.read(e)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!t),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(e)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(e)>0),this._nodes.top.classList.toggle("canMoveBottom",!t);const n=this._unchangedRegion.isDragged.read(e),i=this._editor.getDomNode();i&&(i.classList.toggle("draggingUnchangedRegion",!!n),"top"===n?(i.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(e)>0),i.classList.toggle("canMoveBottom",!t)):"bottom"===n?(i.classList.toggle("canMoveTop",!t),i.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(e)>0)):(i.classList.toggle("canMoveTop",!1),i.classList.toggle("canMoveBottom",!1)))})));const u=this._editor;this._register(zc(this._nodes.top,"mousedown",(e=>{if(0!==e.button)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),e.preventDefault();const t=e.clientY;let n=!1;const i=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const s=Dc(this._nodes.top),r=zc(s,"mousemove",(e=>{const s=e.clientY-t;n=n||Math.abs(s)>2;const r=Math.round(s/u.getOption(66)),o=Math.max(0,Math.min(i+r,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(o,void 0)})),o=zc(s,"mouseup",(e=>{n||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),r.dispose(),o.dispose()}))}))),this._register(zc(this._nodes.bottom,"mousedown",(e=>{if(0!==e.button)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),e.preventDefault();const t=e.clientY;let n=!1;const i=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const s=Dc(this._nodes.bottom),r=zc(s,"mousemove",(e=>{const s=e.clientY-t;n=n||Math.abs(s)>2;const r=Math.round(s/u.getOption(66)),o=Math.max(0,Math.min(i-r,this._unchangedRegion.getMaxVisibleLineCountBottom())),a=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(o,void 0);const l=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(l-a))})),o=zc(s,"mouseup",(e=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!n){const e=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const t=u.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);u.setScrollTop(u.getScrollTop()+(t-e))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),r.dispose(),o.dispose()}))}))),this._register(oU((e=>{const t=[];if(!this._hide){const i=G("hiddenLines","{0} hidden lines",n.getHiddenModifiedRange(e).length),s=Mu("span",{title:G("diff.hiddenLines.expandAll","Double click to unfold")},i);s.addEventListener("dblclick",(e=>{0===e.button&&(e.preventDefault(),this._unchangedRegion.showAll(void 0))})),t.push(s);const r=this._unchangedRegion.getHiddenModifiedRange(e),o=this._modifiedOutlineSource.getBreadcrumbItems(r,e);if(o.length>0){t.push(Mu("span",void 0,"\xa0\xa0|\xa0\xa0"));for(let e=0;e<o.length;e++){const n=o[e],i=qu("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[_$(zi.toIcon(n.kind)),"\xa0",n.name,...e===o.length-1?[]:[_$(Ti.chevronRight)]]).root;t.push(i),i.onclick=()=>{this._revealModifiedHiddenLine(n.startLineNumber)}}}}Tu(this._nodes.others,...t)})))}}var vq,yq=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},Sq=function(e,t){return function(n,i){t(n,i,e)}};const wq=ro("diffProviderFactoryService");let kq=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(Cq,e)}};kq=yq([Sq(0,so)],kq),pd(wq,kq,1);let Cq=vq=class{constructor(e,t,n){this.editorWorkerService=t,this.telemetryService=n,this.onDidChangeEventEmitter=new un,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;null===(e=this.diffAlgorithmOnDidChangeSubscription)||void 0===e||e.dispose()}async computeDiff(e,t,n,i){var s,r;if("string"!==typeof this.diffAlgorithm)return this.diffAlgorithm.computeDiff(e,t,n,i);if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return 1===t.getLineCount()&&1===t.getLineMaxColumn(1)?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new og(new ig(1,2),new ig(1,t.getLineCount()+1),[new ag(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const o=JSON.stringify([e.uri.toString(),t.uri.toString()]),a=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(n)]),l=vq.diffCache.get(o);if(l&&l.context===a)return l.result;const c=sn.create(),u=await this.editorWorkerService.computeDiff(e.uri,t.uri,n,this.diffAlgorithm),h=c.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:h,timedOut:null===(s=null===u||void 0===u?void 0:u.quitEarly)||void 0===s||s,detectedMoves:n.computeMoves?null!==(r=null===u||void 0===u?void 0:u.moves.length)&&void 0!==r?r:0:-1}),i.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!u)throw new Error("no diff result available");return vq.diffCache.size>10&&vq.diffCache.delete(vq.diffCache.keys().next().value),vq.diffCache.set(o,{result:u,context:a}),u}setOptions(e){var t;let n=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&(null===(t=this.diffAlgorithmOnDidChangeSubscription)||void 0===t||t.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,"string"!==typeof e.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange((()=>this.onDidChangeEventEmitter.fire()))),n=!0),n&&this.onDidChangeEventEmitter.fire()}};Cq.diffCache=new Map,Cq=vq=yq([Sq(1,xF),Sq(2,Ma)],Cq);var xq=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},Eq=function(e,t){return function(n,i){t(n,i,e)}};let Lq=class extends Zt{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,n){super(),this.model=e,this._options=t,this._diffProviderFactoryService=n,this._isDiffUpToDate=Zj(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=Zj(this,void 0),this.diff=this._diff,this._unchangedRegions=Zj(this,void 0),this.unchangedRegions=nU(this,(e=>{var t,n;return this._options.hideUnchangedRegions.read(e)?null!==(n=null===(t=this._unchangedRegions.read(e))||void 0===t?void 0:t.regions)&&void 0!==n?n:[]:(Hj((e=>{var t;for(const n of(null===(t=this._unchangedRegions.get())||void 0===t?void 0:t.regions)||[])n.collapseAll(e)})),[])})),this.movedTextToCompare=Zj(this,void 0),this._activeMovedText=Zj(this,void 0),this._hoveredMovedText=Zj(this,void 0),this.activeMovedText=nU(this,(e=>{var t,n;return null!==(n=null!==(t=this.movedTextToCompare.read(e))&&void 0!==t?t:this._hoveredMovedText.read(e))&&void 0!==n?n:this._activeMovedText.read(e)})),this._cancellationTokenSource=new Sn,this._diffProvider=nU(this,(e=>{const t=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(e)});return{diffProvider:t,onChangeSignal:pU("onDidChange",t.onDidChange)}})),this._register(Qt((()=>this._cancellationTokenSource.cancel())));const i="string"===typeof(s="contentChangedSignal")?new bU(s):new bU(void 0,s);var s;const r=this._register(new ol((()=>i.trigger(void 0)),200));this._register(oU((t=>{const n=this._unchangedRegions.read(t);if(!n||n.regions.some((e=>e.isDragged.read(t))))return;const i=n.originalDecorationIds.map((t=>e.original.getDecorationRange(t))).map((e=>e?ig.fromRangeInclusive(e):void 0)),s=n.modifiedDecorationIds.map((t=>e.modified.getDecorationRange(t))).map((e=>e?ig.fromRangeInclusive(e):void 0)),r=n.regions.map(((e,n)=>i[n]&&s[n]?new Tq(i[n].startLineNumber,s[n].startLineNumber,i[n].length,e.visibleLineCountTop.read(t),e.visibleLineCountBottom.read(t)):void 0)).filter(M),o=[];let a=!1;for(const e of l(r,((e,n)=>e.getHiddenModifiedRange(t).endLineNumberExclusive===n.getHiddenModifiedRange(t).startLineNumber)))if(e.length>1){a=!0;const t=e.reduce(((e,t)=>e+t.lineCount),0),n=new Tq(e[0].originalLineNumber,e[0].modifiedLineNumber,t,e[0].visibleLineCountTop.get(),e[e.length-1].visibleLineCountBottom.get());o.push(n)}else o.push(e[0]);if(a){const t=e.original.deltaDecorations(n.originalDecorationIds,o.map((e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})))),i=e.modified.deltaDecorations(n.modifiedDecorationIds,o.map((e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))));Hj((e=>{this._unchangedRegions.set({regions:o,originalDecorationIds:t,modifiedDecorationIds:i},e)}))}})));const o=(t,n,i)=>{const s=Tq.fromDiffs(t.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(i),this._options.hideUnchangedRegionsContextLineCount.read(i));let r;const o=this._unchangedRegions.get();if(o){const t=o.originalDecorationIds.map((t=>e.original.getDecorationRange(t))).map((e=>e?ig.fromRangeInclusive(e):void 0)),n=o.modifiedDecorationIds.map((t=>e.modified.getDecorationRange(t))).map((e=>e?ig.fromRangeInclusive(e):void 0)),s=function(e,t){let n;return e.filter((e=>{const i=t(e,n);return n=e,i}))}(o.regions.map(((e,i)=>{if(!t[i]||!n[i])return;const s=t[i].length;return new Tq(t[i].startLineNumber,n[i].startLineNumber,s,Math.min(e.visibleLineCountTop.get(),s),Math.min(e.visibleLineCountBottom.get(),s-e.visibleLineCountTop.get()))})).filter(M),((e,t)=>!t||e.modifiedLineNumber>=t.modifiedLineNumber+t.lineCount&&e.originalLineNumber>=t.originalLineNumber+t.lineCount));let a=s.map((e=>new rg(e.getHiddenOriginalRange(i),e.getHiddenModifiedRange(i))));a=rg.clip(a,ig.ofLength(1,e.original.getLineCount()),ig.ofLength(1,e.modified.getLineCount())),r=rg.inverse(a,e.original.getLineCount(),e.modified.getLineCount())}const a=[];if(r)for(const e of s){const t=r.filter((t=>t.original.intersectsStrict(e.originalUnchangedRange)&&t.modified.intersectsStrict(e.modifiedUnchangedRange)));a.push(...e.setVisibleRanges(t,n))}else a.push(...s);const l=e.original.deltaDecorations((null===o||void 0===o?void 0:o.originalDecorationIds)||[],a.map((e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})))),c=e.modified.deltaDecorations((null===o||void 0===o?void 0:o.modifiedDecorationIds)||[],a.map((e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))));this._unchangedRegions.set({regions:a,originalDecorationIds:l,modifiedDecorationIds:c},n)};this._register(e.modified.onDidChangeContent((t=>{if(this._diff.get()){const n=aE.fromModelContentChanges(t.changes),i=Iq(this._lastDiff,n,e.original,e.modified);i&&(this._lastDiff=i,Hj((e=>{this._diff.set(Dq.fromDiffResult(this._lastDiff),e),o(i,e);const t=this.movedTextToCompare.get();this.movedTextToCompare.set(t?this._lastDiff.moves.find((e=>e.lineRangeMapping.modified.intersect(t.lineRangeMapping.modified))):void 0,e)})))}this._isDiffUpToDate.set(!1,void 0),r.schedule()}))),this._register(e.original.onDidChangeContent((t=>{if(this._diff.get()){const n=aE.fromModelContentChanges(t.changes),i=Nq(this._lastDiff,n,e.original,e.modified);i&&(this._lastDiff=i,Hj((e=>{this._diff.set(Dq.fromDiffResult(this._lastDiff),e),o(i,e);const t=this.movedTextToCompare.get();this.movedTextToCompare.set(t?this._lastDiff.moves.find((e=>e.lineRangeMapping.modified.intersect(t.lineRangeMapping.modified))):void 0,e)})))}this._isDiffUpToDate.set(!1,void 0),r.schedule()}))),this._register(cU((async(t,n)=>{var s,a;this._options.hideUnchangedRegionsMinimumLineCount.read(t),this._options.hideUnchangedRegionsContextLineCount.read(t),r.cancel(),i.read(t);const l=this._diffProvider.read(t);l.onChangeSignal.read(t),IU(Xg,t),IU(qg,t),this._isDiffUpToDate.set(!1,void 0);let c=[];n.add(e.original.onDidChangeContent((e=>{const t=aE.fromModelContentChanges(e.changes);c=zE(c,t)})));let u=[];n.add(e.modified.onDidChangeContent((e=>{const t=aE.fromModelContentChanges(e.changes);u=zE(u,t)})));let h=await l.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(t),maxComputationTimeMs:this._options.maxComputationTimeMs.read(t),computeMoves:this._options.showMoves.read(t)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||(h=function(e,t,n){return{changes:e.changes.map((e=>new og(e.original,e.modified,e.innerChanges?e.innerChanges.map((e=>function(e,t,n){let i=e.originalRange,s=e.modifiedRange;(1!==i.endColumn||1!==s.endColumn)&&i.endColumn===t.getLineMaxColumn(i.endLineNumber)&&s.endColumn===n.getLineMaxColumn(s.endLineNumber)&&i.endLineNumber<t.getLineCount()&&s.endLineNumber<n.getLineCount()&&(i=i.setEndPosition(i.endLineNumber+1,1),s=s.setEndPosition(s.endLineNumber+1,1));return new ag(i,s)}(e,t,n))):void 0))),moves:e.moves,identical:e.identical,quitEarly:e.quitEarly}}(h,e.original,e.modified),h=null!==(s=Nq(h,c,e.original,e.modified))&&void 0!==s?s:h,h=null!==(a=Iq(h,u,e.original,e.modified))&&void 0!==a?a:h,Hj((e=>{o(h,e),this._lastDiff=h;const t=Dq.fromDiffResult(h);this._diff.set(t,e),this._isDiffUpToDate.set(!0,e);const n=this.movedTextToCompare.get();this.movedTextToCompare.set(n?this._lastDiff.moves.find((e=>e.lineRangeMapping.modified.intersect(n.lineRangeMapping.modified))):void 0,e)})))})))}ensureModifiedLineIsVisible(e,t,n){var i,s;if(0===(null===(i=this.diff.get())||void 0===i?void 0:i.mappings.length))return;const r=(null===(s=this._unchangedRegions.get())||void 0===s?void 0:s.regions)||[];for(const o of r)if(o.getHiddenModifiedRange(void 0).contains(e))return void o.showModifiedLine(e,t,n)}ensureOriginalLineIsVisible(e,t,n){var i,s;if(0===(null===(i=this.diff.get())||void 0===i?void 0:i.mappings.length))return;const r=(null===(s=this._unchangedRegions.get())||void 0===s?void 0:s.regions)||[];for(const o of r)if(o.getHiddenOriginalRange(void 0).contains(e))return void o.showOriginalLine(e,t,n)}async waitForDiff(){var e,t;await(e=this.isDiffUpToDate,t=e=>e,new Promise((n=>{let i=!1,s=!1;const r=e.map((e=>({isFinished:t(e),state:e}))),o=oU((e=>{const{isFinished:t,state:a}=r.read(e);t&&(i?o.dispose():s=!0,n(a))}));i=!0,s&&o.dispose()})))}serializeState(){const e=this._unchangedRegions.get();return{collapsedRegions:null===e||void 0===e?void 0:e.regions.map((e=>({range:e.getHiddenModifiedRange(void 0).serialize()})))}}restoreSerializedState(e){var t;const n=null===(t=e.collapsedRegions)||void 0===t?void 0:t.map((e=>ig.deserialize(e.range))),i=this._unchangedRegions.get();i&&n&&Hj((e=>{for(const t of i.regions)for(const i of n)if(t.modifiedUnchangedRange.intersect(i)){t.setHiddenModifiedRange(i,e);break}}))}};Lq=xq([Eq(2,wq)],Lq);class Dq{static fromDiffResult(e){return new Dq(e.changes.map((e=>new Aq(e))),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,n,i){this.mappings=e,this.movedTexts=t,this.identical=n,this.quitEarly=i}}class Aq{constructor(e){this.lineRangeMapping=e}}class Tq{static fromDiffs(e,t,n,i,s){const r=og.inverse(e,t,n),o=[];for(const a of r){let e=a.original.startLineNumber,r=a.modified.startLineNumber,l=a.original.length;const c=1===e&&1===r,u=e+l===t+1&&r+l===n+1;(c||u)&&l>=s+i?(c&&!u&&(l-=s),u&&!c&&(e+=s,r+=s,l-=s),o.push(new Tq(e,r,l,0,0))):l>=2*s+i&&(e+=s,r+=s,l-=2*s,o.push(new Tq(e,r,l,0,0)))}return o}get originalUnchangedRange(){return ig.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return ig.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,n,i,s){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=n,this._visibleLineCountTop=Zj(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=Zj(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=nU(this,(e=>this.visibleLineCountTop.read(e)+this.visibleLineCountBottom.read(e)===this.lineCount&&!this.isDragged.read(e))),this.isDragged=Zj(this,void 0);const r=Math.max(Math.min(i,this.lineCount),0),o=Math.max(Math.min(s,this.lineCount-i),0);ba(i===r),ba(s===o),this._visibleLineCountTop.set(r,void 0),this._visibleLineCountBottom.set(o,void 0)}setVisibleRanges(e,t){const n=[],i=new sg(e.map((e=>e.modified))).subtractFrom(this.modifiedUnchangedRange);let s=this.originalLineNumber,r=this.modifiedLineNumber;const o=this.modifiedLineNumber+this.lineCount;if(0===i.ranges.length)this.showAll(t),n.push(this);else{let e=0;for(const a of i.ranges){const l=e===i.ranges.length-1;e++;const c=(l?o:a.endLineNumberExclusive)-r,u=new Tq(s,r,c,0,0);u.setHiddenModifiedRange(a,t),n.push(u),s=u.originalUnchangedRange.endLineNumberExclusive,r=u.modifiedUnchangedRange.endLineNumberExclusive}}return n}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return ig.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return ig.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const n=e.startLineNumber-this.modifiedLineNumber,i=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(n,i,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0;const n=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,n),t)}showMoreBelow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1?arguments[1]:void 0;const n=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,n),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,n){const i=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),s=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;0===t&&i<s||1===t?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+i,n):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+s,n)}showOriginalLine(e,t,n){const i=e-this.originalLineNumber,s=this.originalLineNumber+this.lineCount-e;0===t&&i<s||1===t?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+s-i,this.getMaxVisibleLineCountTop()),n):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+i-s,this.getMaxVisibleLineCountBottom()),n)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,n){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,n),this._visibleLineCountBottom.set(t,n)}}function Nq(e,t,n,i){}function Iq(e,t,n,i){}class $q extends Zt{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,n,i,s,r,o,a,l){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=n,this._diff=i,this._editor=s,this._viewLineCounts=r,this._originalTextModel=o,this._contextMenuService=a,this._clipboardService=l,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=bo.asClassName(Ti.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const c=this._modifiedEditor.getOption(66);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height="".concat(c,"px"),this._diffActions.style.lineHeight="".concat(c,"px"),this._marginDomNode.appendChild(this._diffActions);let u=0;const h=n.getOption(126)&&!ke,d=(e,t)=>{var s;this._contextMenuService.showContextMenu({domForShadowRoot:h&&null!==(s=n.getDomNode())&&void 0!==s?s:void 0,getAnchor:()=>({x:e,y:t}),getActions:()=>{const e=[],t=i.modified.isEmpty;e.push(new co("diff.clipboard.copyDeletedContent",t?i.original.length>1?G("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):G("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):i.original.length>1?G("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):G("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,(async()=>{const e=this._originalTextModel.getValueInRange(i.original.toExclusiveRange());await this._clipboardService.writeText(e)}))),i.original.length>1&&e.push(new co("diff.clipboard.copyDeletedLineContent",t?G("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.original.startLineNumber+u):G("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.original.startLineNumber+u),void 0,!0,(async()=>{let e=this._originalTextModel.getLineContent(i.original.startLineNumber+u);if(""===e){e=0===this._originalTextModel.getEndOfLineSequence()?"\n":"\r\n"}await this._clipboardService.writeText(e)})));return n.getOption(90)||e.push(new co("diff.inline.revertChange",G("diff.inline.revertChange.label","Revert this change"),void 0,!0,(async()=>{this._editor.revert(this._diff)}))),e},autoSelectFirstItem:!0})};this._register(Hc(this._diffActions,"mousedown",(e=>{if(!e.leftButton)return;const{top:t,height:n}=Zc(this._diffActions),i=Math.floor(c/3);e.preventDefault(),d(e.posx,t+n+i)}))),this._register(n.onMouseMove((e=>{8!==e.target.type&&5!==e.target.type||e.target.detail.viewZoneId!==this._getViewZoneId()?this.visibility=!1:(u=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,c),this.visibility=!0)}))),this._register(n.onMouseDown((e=>{if(e.event.leftButton&&(8===e.target.type||5===e.target.type)){e.target.detail.viewZoneId===this._getViewZoneId()&&(e.event.preventDefault(),u=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,c),d(e.event.posx,e.event.posy+c))}})))}_updateLightBulbPosition(e,t,n){const{top:i}=Zc(e),s=t-i,r=Math.floor(s/n),o=r*n;if(this._diffActions.style.top="".concat(o,"px"),this._viewLineCounts){let e=0;for(let t=0;t<this._viewLineCounts.length;t++)if(e+=this._viewLineCounts[t],r<e)return t}return r}}const Mq=vh("diffEditorWidget",{createHTML:e=>e});function Rq(e,t,n,i){Gr(i,t.fontInfo);const s=n.length>0,r=new qh(1e4);let o=0,a=0;const l=[];for(let h=0;h<e.lineTokens.length;h++){const i=h+1,c=e.lineTokens[h],u=e.lineBreakData[h],d=Fp.filter(n,i,1,Number.MAX_SAFE_INTEGER);if(u){let n=0;for(const i of u.breakOffsets){const l=c.sliceAndInflate(n,i,0);o=Math.max(o,Fq(a,l,Fp.extractWrapped(d,n,i),s,e.mightContainNonBasicASCII,e.mightContainRTL,t,r)),a++,n=i}l.push(u.breakOffsets.length)}else l.push(1),o=Math.max(o,Fq(a,c,d,s,e.mightContainNonBasicASCII,e.mightContainRTL,t,r)),a++}o+=t.scrollBeyondLastColumn;const c=r.build(),u=Mq?Mq.createHTML(c):c;i.innerHTML=u;return{heightInLines:a,minWidthInPx:o*t.typicalHalfwidthCharacterWidth,viewLineCounts:l}}class Oq{constructor(e,t,n,i){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=n,this.mightContainRTL=i}}class Pq{static fromEditor(e){var t;const n=e.getOptions(),i=n.get(50),s=n.get(143);return new Pq((null===(t=e.getModel())||void 0===t?void 0:t.getOptions().tabSize)||0,i,n.get(33),i.typicalHalfwidthCharacterWidth,n.get(103),n.get(66),s.decorationsWidth,n.get(116),n.get(98),n.get(93),n.get(51))}constructor(e,t,n,i,s,r,o,a,l,c,u){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=n,this.typicalHalfwidthCharacterWidth=i,this.scrollBeyondLastColumn=s,this.lineHeight=r,this.lineDecorationsWidth=o,this.stopRenderingLineAfter=a,this.renderWhitespace=l,this.renderControlCharacters=c,this.fontLigatures=u}}function Fq(e,t,n,i,s,r,o,a){a.appendString('<div class="view-line'),i||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(e*o.lineHeight)),a.appendString('px;width:1000000px;">');const l=t.getLineContent(),c=im.isBasicASCII(l,s),u=im.containsRTL(l,c,r),h=Gp(new jp(o.fontInfo.isMonospace&&!o.disableMonospaceOptimizations,o.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,u,0,t,n,o.tabSize,0,o.fontInfo.spaceWidth,o.fontInfo.middotWidth,o.fontInfo.wsmiddotWidth,o.stopRenderingLineAfter,o.renderWhitespace,o.renderControlCharacters,o.fontLigatures!==ht.OFF,null),a);return a.appendString("</div>"),h.characterMapping.getHorizontalOffset(h.characterMapping.length)}var Bq=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},zq=function(e,t){return function(n,i){t(n,i,e)}};let Wq=class extends Zt{constructor(e,t,n,i,s,r,o,a,l,c){super(),this._targetWindow=e,this._editors=t,this._diffModel=n,this._options=i,this._diffEditorWidget=s,this._canIgnoreViewZoneUpdateEvent=r,this._origViewZonesToIgnore=o,this._modViewZonesToIgnore=a,this._clipboardService=l,this._contextMenuService=c,this._originalTopPadding=Zj(this,0),this._originalScrollOffset=Zj(this,0),this._originalScrollOffsetAnimated=LU(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=Zj(this,0),this._modifiedScrollOffset=Zj(this,0),this._modifiedScrollOffsetAnimated=LU(this._targetWindow,this._modifiedScrollOffset,this._store);const u=Zj("invalidateAlignmentsState",0),h=this._register(new ol((()=>{u.set(u.get()+1,void 0)}),0));this._register(this._editors.original.onDidChangeViewZones((e=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()}))),this._register(this._editors.modified.onDidChangeViewZones((e=>{this._canIgnoreViewZoneUpdateEvent()||h.schedule()}))),this._register(this._editors.original.onDidChangeConfiguration((e=>{(e.hasChanged(144)||e.hasChanged(66))&&h.schedule()}))),this._register(this._editors.modified.onDidChangeConfiguration((e=>{(e.hasChanged(144)||e.hasChanged(66))&&h.schedule()})));const d=this._diffModel.map((e=>e?fU(e.model.original.onDidChangeTokens,(()=>2===e.model.original.tokenization.backgroundTokenizationState)):void 0)).map(((e,t)=>null===e||void 0===e?void 0:e.read(t))),f=nU((e=>{const t=this._diffModel.read(e),n=null===t||void 0===t?void 0:t.diff.read(e);if(!t||!n)return null;u.read(e);const i=this._options.renderSideBySide.read(e);return Hq(this._editors.original,this._editors.modified,n.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,i)})),g=nU((e=>{var t;const n=null===(t=this._diffModel.read(e))||void 0===t?void 0:t.movedTextToCompare.read(e);if(!n)return null;u.read(e);const i=n.changes.map((e=>new Aq(e)));return Hq(this._editors.original,this._editors.modified,i,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)}));function p(){const e=document.createElement("div");return e.className="diagonal-fill",e}const m=this._register(new Xt);this.viewZones=iU(this,((e,t)=>{var n,i,r,o,a,l,c,u;m.clear();const h=f.read(e)||[],b=[],_=[],v=this._modifiedTopPadding.read(e);v>0&&_.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:v,showInHiddenAreas:!0,suppressMouseDown:!0});const y=this._originalTopPadding.read(e);y>0&&b.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:y,showInHiddenAreas:!0,suppressMouseDown:!0});const S=this._options.renderSideBySide.read(e),w=S||null===(n=this._editors.modified._getViewModel())||void 0===n?void 0:n.createLineBreaksComputer();if(w){const T=this._editors.original.getModel();for(const N of h)if(N.diff)for(let I=N.originalRange.startLineNumber;I<N.originalRange.endLineNumberExclusive;I++){if(I>T.getLineCount())return{orig:b,mod:_};null===w||void 0===w||w.addRequest(T.getLineContent(I),null,null)}}const k=null!==(i=null===w||void 0===w?void 0:w.finalize())&&void 0!==i?i:[];let C=0;const x=this._editors.modified.getOption(66),E=null===(r=this._diffModel.read(e))||void 0===r?void 0:r.movedTextToCompare.read(e),L=null!==(a=null===(o=this._editors.original.getModel())||void 0===o?void 0:o.mightContainNonBasicASCII())&&void 0!==a&&a,D=null!==(c=null===(l=this._editors.original.getModel())||void 0===l?void 0:l.mightContainRTL())&&void 0!==c&&c,A=Pq.fromEditor(this._editors.modified);for(const $ of h)if($.diff&&!S){if(!$.originalRange.isEmpty){d.read(e);const R=document.createElement("div");R.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const O=this._editors.original.getModel();if($.originalRange.endLineNumberExclusive-1>O.getLineCount())return{orig:b,mod:_};const F=new Oq($.originalRange.mapToLineArray((e=>O.tokenization.getLineTokens(e))),$.originalRange.mapToLineArray((e=>k[C++])),L,D),B=[];for(const V of $.diff.innerChanges||[])B.push(new sm(V.originalRange.delta(-($.diff.original.startLineNumber-1)),cq.className,0));const z=Rq(F,A,B,R),W=document.createElement("div");if(W.className="inline-deleted-margin-view-zone",Gr(W,A.fontInfo),this._options.renderIndicators.read(e))for(let j=0;j<z.heightInLines;j++){const U=document.createElement("div");U.className="delete-sign ".concat(bo.asClassName(tq)),U.setAttribute("style","position:absolute;top:".concat(j*x,"px;width:").concat(A.lineDecorationsWidth,"px;height:").concat(x,"px;right:0;")),W.appendChild(U)}let H;m.add(new $q((()=>P(H)),W,this._editors.modified,$.diff,this._diffEditorWidget,z.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let q=0;q<z.viewLineCounts.length;q++){const K=z.viewLineCounts[q];K>1&&b.push({afterLineNumber:$.originalRange.startLineNumber+q,domNode:p(),heightInPx:(K-1)*x,showInHiddenAreas:!0,suppressMouseDown:!0})}_.push({afterLineNumber:$.modifiedRange.startLineNumber-1,domNode:R,heightInPx:z.heightInLines*x,minWidthInPx:z.minWidthInPx,marginDomNode:W,setZoneId(e){H=e},showInHiddenAreas:!0,suppressMouseDown:!0})}const M=document.createElement("div");M.className="gutter-delete",b.push({afterLineNumber:$.originalRange.endLineNumberExclusive-1,domNode:p(),heightInPx:$.modifiedHeightInPx,marginDomNode:M,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const G=$.modifiedHeightInPx-$.originalHeightInPx;if(G>0){if(null===E||void 0===E?void 0:E.lineRangeMapping.original.delta(-1).deltaLength(2).contains($.originalRange.endLineNumberExclusive-1))continue;b.push({afterLineNumber:$.originalRange.endLineNumberExclusive-1,domNode:p(),heightInPx:G,showInHiddenAreas:!0,suppressMouseDown:!0})}else{if(null===E||void 0===E?void 0:E.lineRangeMapping.modified.delta(-1).deltaLength(2).contains($.modifiedRange.endLineNumberExclusive-1))continue;function Y(){const e=document.createElement("div");return e.className="arrow-revert-change "+bo.asClassName(Ti.arrowRight),t.add(zc(e,"mousedown",(e=>e.stopPropagation()))),t.add(zc(e,"click",(e=>{e.stopPropagation(),s.revert($.diff)}))),Mu("div",{},e)}let Q;$.diff&&$.diff.modified.isEmpty&&this._options.shouldRenderRevertArrows.read(e)&&(Q=Y()),_.push({afterLineNumber:$.modifiedRange.endLineNumberExclusive-1,domNode:p(),heightInPx:-G,marginDomNode:Q,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const X of null!==(u=g.read(e))&&void 0!==u?u:[]){if(!(null===E||void 0===E?void 0:E.lineRangeMapping.original.intersect(X.originalRange))||!(null===E||void 0===E?void 0:E.lineRangeMapping.modified.intersect(X.modifiedRange)))continue;const Z=X.modifiedHeightInPx-X.originalHeightInPx;Z>0?b.push({afterLineNumber:X.originalRange.endLineNumberExclusive-1,domNode:p(),heightInPx:Z,showInHiddenAreas:!0,suppressMouseDown:!0}):_.push({afterLineNumber:X.modifiedRange.endLineNumberExclusive-1,domNode:p(),heightInPx:-Z,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:b,mod:_}}));let b=!1;this._register(this._editors.original.onDidScrollChange((e=>{e.scrollLeftChanged&&!b&&(b=!0,this._editors.modified.setScrollLeft(e.scrollLeft),b=!1)}))),this._register(this._editors.modified.onDidScrollChange((e=>{e.scrollLeftChanged&&!b&&(b=!0,this._editors.original.setScrollLeft(e.scrollLeft),b=!1)}))),this._originalScrollTop=fU(this._editors.original.onDidScrollChange,(()=>this._editors.original.getScrollTop())),this._modifiedScrollTop=fU(this._editors.modified.onDidScrollChange,(()=>this._editors.modified.getScrollTop())),this._register(oU((e=>{const t=this._originalScrollTop.read(e)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(e))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(e));t!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(t,1)}))),this._register(oU((e=>{const t=this._modifiedScrollTop.read(e)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(e))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(e));t!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(t,1)}))),this._register(oU((e=>{var t;const n=null===(t=this._diffModel.read(e))||void 0===t?void 0:t.movedTextToCompare.read(e);let i=0;if(n){const e=this._editors.original.getTopForLineNumber(n.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();i=this._editors.modified.getTopForLineNumber(n.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-e}i>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(i,void 0)):i<0?(this._modifiedTopPadding.set(-i,void 0),this._originalTopPadding.set(0,void 0)):setTimeout((()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)}),400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-i,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+i,void 0,!0)})))}};function Hq(e,t,n,i,s,r){const o=new x(Vq(e,i)),a=new x(Vq(t,s)),l=e.getOption(66),c=t.getOption(66),u=[];let h=0,d=0;function f(e,t){for(;;){let n=o.peek(),i=a.peek();if(n&&n.lineNumber>=e&&(n=void 0),i&&i.lineNumber>=t&&(i=void 0),!n&&!i)break;const s=n?n.lineNumber-h:Number.MAX_VALUE,r=i?i.lineNumber-d:Number.MAX_VALUE;s<r?(o.dequeue(),i={lineNumber:n.lineNumber-h+d,heightInPx:0}):s>r?(a.dequeue(),n={lineNumber:i.lineNumber-d+h,heightInPx:0}):(o.dequeue(),a.dequeue()),u.push({originalRange:ig.ofLength(n.lineNumber,1),modifiedRange:ig.ofLength(i.lineNumber,1),originalHeightInPx:l+n.heightInPx,modifiedHeightInPx:c+i.heightInPx,diff:void 0})}}for(const g of n){const p=g.lineRangeMapping;f(p.original.startLineNumber,p.modified.startLineNumber);let m=!0,b=p.modified.startLineNumber,_=p.original.startLineNumber;function v(e,t){var n,i,s,r;if(e<_||t<b)return;if(m)m=!1;else if(e===_||t===b)return;const h=new ig(_,e),d=new ig(b,t);if(h.isEmpty&&d.isEmpty)return;const f=null!==(i=null===(n=o.takeWhile((t=>t.lineNumber<e)))||void 0===n?void 0:n.reduce(((e,t)=>e+t.heightInPx),0))&&void 0!==i?i:0,p=null!==(r=null===(s=a.takeWhile((e=>e.lineNumber<t)))||void 0===s?void 0:s.reduce(((e,t)=>e+t.heightInPx),0))&&void 0!==r?r:0;u.push({originalRange:h,modifiedRange:d,originalHeightInPx:h.length*l+f,modifiedHeightInPx:d.length*c+p,diff:g.lineRangeMapping}),_=e,b=t}if(r)for(const y of p.innerChanges||[]){y.originalRange.startColumn>1&&y.modifiedRange.startColumn>1&&v(y.originalRange.startLineNumber,y.modifiedRange.startLineNumber);const S=e.getModel(),w=y.originalRange.endLineNumber<=S.getLineCount()?S.getLineMaxColumn(y.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;y.originalRange.endColumn<w&&v(y.originalRange.endLineNumber,y.modifiedRange.endLineNumber)}v(p.original.endLineNumberExclusive,p.modified.endLineNumberExclusive),h=p.original.endLineNumberExclusive,d=p.modified.endLineNumberExclusive}return f(Number.MAX_VALUE,Number.MAX_VALUE),u}function Vq(e,t){const n=[],i=[],s=-1!==e.getOption(144).wrappingColumn,r=e._getViewModel().coordinatesConverter,o=e.getOption(66);if(s)for(let a=1;a<=e.getModel().getLineCount();a++){const e=r.getModelLineViewLineCount(a);e>1&&i.push({lineNumber:a,heightInPx:o*(e-1)})}for(const a of e.getWhitespaces()){if(t.has(a.id))continue;const e=0===a.afterLineNumber?0:r.convertViewPositionToModelPosition(new Ci(a.afterLineNumber,1)).lineNumber;n.push({lineNumber:e,heightInPx:a.height})}return function(e,t,n,i){if(0===e.length)return t;if(0===t.length)return e;const s=[];let r=0,o=0;for(;r<e.length&&o<t.length;){const a=e[r],l=t[o],c=n(a),u=n(l);c<u?(s.push(a),r++):c>u?(s.push(l),o++):(s.push(i(a,l)),r++,o++)}for(;r<e.length;)s.push(e[r]),r++;for(;o<t.length;)s.push(t[o]),o++;return s}(n,i,(e=>e.lineNumber),((e,t)=>({lineNumber:e.lineNumber,heightInPx:e.heightInPx+t.heightInPx})))}Wq=Bq([zq(8,FV),zq(9,r$)],Wq);var jq,Uq=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},qq=function(e,t){return function(n,i){t(n,i,e)}};let Kq=jq=class extends Zt{constructor(e,t,n,i,s,r,o){super(),this._editors=e,this._rootElement=t,this._diffModel=n,this._rootWidth=i,this._rootHeight=s,this._modifiedEditorLayoutInfo=r,this._themeService=o,this.width=jq.ENTIRE_DIFF_OVERVIEW_WIDTH;const a=fU(this._themeService.onDidColorThemeChange,(()=>this._themeService.getColorTheme())),l=nU((e=>{const t=a.read(e);return{insertColor:t.getColor(B_)||(t.getColor(P_)||R_).transparent(2),removeColor:t.getColor(z_)||(t.getColor(F_)||O_).transparent(2)}})),c=Kr(document.createElement("div"));c.setClassName("diffViewport"),c.setPosition("absolute");const u=qu("div.diffOverview",{style:{position:"absolute",top:"0px",width:jq.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(xU(u,c.domNode)),this._register(Hc(u,ku.POINTER_DOWN,(e=>{this._editors.modified.delegateVerticalScrollbarPointerDown(e)}))),this._register(zc(u,ku.MOUSE_WHEEL,(e=>{this._editors.modified.delegateScrollFromMouseWheelEvent(e)}),{passive:!1})),this._register(xU(this._rootElement,u)),this._register(cU(((e,t)=>{const n=this._diffModel.read(e),i=this._editors.original.createOverviewRuler("original diffOverviewRuler");i&&(t.add(i),t.add(xU(u,i.getDomNode())));const s=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(s&&(t.add(s),t.add(xU(u,s.getDomNode()))),!i||!s)return;const r=pU("viewZoneChanged",this._editors.original.onDidChangeViewZones),o=pU("viewZoneChanged",this._editors.modified.onDidChangeViewZones),a=pU("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),h=pU("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);t.add(oU((e=>{var t;r.read(e),o.read(e),a.read(e),h.read(e);const c=l.read(e),u=null===(t=null===n||void 0===n?void 0:n.diff.read(e))||void 0===t?void 0:t.mappings;function d(e,t,n){const i=n._getViewModel();return i?e.filter((e=>e.length>0)).map((e=>{const n=i.coordinatesConverter.convertModelPositionToViewPosition(new Ci(e.startLineNumber,1)),s=i.coordinatesConverter.convertModelPositionToViewPosition(new Ci(e.endLineNumberExclusive,1)),r=s.lineNumber-n.lineNumber;return new px(n.lineNumber,s.lineNumber,r,t.toString())})):[]}const f=d((u||[]).map((e=>e.lineRangeMapping.original)),c.removeColor,this._editors.original),g=d((u||[]).map((e=>e.lineRangeMapping.modified)),c.insertColor,this._editors.modified);null===i||void 0===i||i.setZones(f),null===s||void 0===s||s.setZones(g)}))),t.add(oU((e=>{const t=this._rootHeight.read(e),n=this._rootWidth.read(e),r=this._modifiedEditorLayoutInfo.read(e);if(r){const n=jq.ENTIRE_DIFF_OVERVIEW_WIDTH-2*jq.ONE_OVERVIEW_WIDTH;i.setLayout({top:0,height:t,right:n+jq.ONE_OVERVIEW_WIDTH,width:jq.ONE_OVERVIEW_WIDTH}),s.setLayout({top:0,height:t,right:0,width:jq.ONE_OVERVIEW_WIDTH});const o=this._editors.modifiedScrollTop.read(e),a=this._editors.modifiedScrollHeight.read(e),l=this._editors.modified.getOption(102),u=new pS(l.verticalHasArrows?l.arrowSize:0,l.verticalScrollbarSize,0,r.height,a,o);c.setTop(u.getSliderPosition()),c.setHeight(u.getSliderSize())}else c.setTop(0),c.setHeight(0);u.style.height=t+"px",u.style.left=n-jq.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",c.setWidth(jq.ENTIRE_DIFF_OVERVIEW_WIDTH)})))})))}};Kq.ONE_OVERVIEW_WIDTH=15,Kq.ENTIRE_DIFF_OVERVIEW_WIDTH=2*jq.ONE_OVERVIEW_WIDTH,Kq=jq=Uq([qq(6,QS)],Kq);class Gq extends Zt{constructor(){super(...arguments),this._id=++Gq.idCounter,this._onDidDispose=this._register(new un),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setPosition(e,t)}revealLine(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLine(e,t)}revealLineInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineNearTop(e,t)}revealPosition(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setSelection(e,t)}setSelections(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setSelections(e,t)}revealLines(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLines(e,t,n)}revealLinesInCenter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesNearTop(e,t,n)}revealRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._targetEditor.revealRange(e,t,n,i)}revealRangeInCenter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,n){this._targetEditor.trigger(e,t,n)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}}Gq.idCounter=0;var Yq=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},Qq=function(e,t){return function(n,i){t(n,i,e)}};let Xq=class extends Zt{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,n,i,s,r,o){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=n,this._createInnerEditor=s,this._instantiationService=r,this._keybindingService=o,this._onDidContentSizeChange=this._register(new un),this.original=this._register(this._createLeftHandSideEditor(n.editorOptions.get(),i.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(n.editorOptions.get(),i.modifiedEditor||{})),this.modifiedModel=fU(this.modified.onDidChangeModel,(()=>this.modified.getModel())),this.modifiedScrollTop=fU(this.modified.onDidScrollChange,(()=>this.modified.getScrollTop())),this.modifiedScrollHeight=fU(this.modified.onDidScrollChange,(()=>this.modified.getScrollHeight())),this.modifiedSelections=fU(this.modified.onDidChangeCursorSelection,(()=>{var e;return null!==(e=this.modified.getSelections())&&void 0!==e?e:[]})),this.modifiedCursor=fU(this.modified.onDidChangeCursorPosition,(()=>{var e;return null!==(e=this.modified.getPosition())&&void 0!==e?e:new Ci(1,1)})),this._register(lU({createEmptyChangeSummary:()=>({}),handleChange:(e,t)=>(e.didChange(n.editorOptions)&&Object.assign(t,e.change.changedOptions),!0)},((e,t)=>{n.editorOptions.read(e),this._options.renderSideBySide.read(e),this.modified.updateOptions(this._adjustOptionsForRightHandSide(e,t)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(e,t))})))}_createLeftHandSideEditor(e,t){const n=this._adjustOptionsForLeftHandSide(void 0,e),i=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,n,t);return i.setContextValue("isInDiffLeftEditor",!0),i}_createRightHandSideEditor(e,t){const n=this._adjustOptionsForRightHandSide(void 0,e),i=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,n,t);return i.setContextValue("isInDiffRightEditor",!0),i}_constructInnerEditor(e,t,n,i){const s=this._createInnerEditor(e,t,n,i);return this._register(s.onDidContentSizeChange((e=>{const t=this.original.getContentWidth()+this.modified.getContentWidth()+Kq.ENTIRE_DIFF_OVERVIEW_WIDTH,n=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:n,contentWidth:t,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged})}))),s}_adjustOptionsForLeftHandSide(e,t){const n=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(n.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},n.wordWrapOverride1=this._options.diffWordWrap.get()):(n.wordWrapOverride1="off",n.wordWrapOverride2="off",n.stickyScroll={enabled:!1},n.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),n.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(n.ariaLabel=t.originalAriaLabel),n.ariaLabel=this._updateAriaLabel(n.ariaLabel),n.readOnly=!this._options.originalEditable.get(),n.dropIntoEditor={enabled:!n.readOnly},n.extraEditorClassName="original-in-monaco-diff-editor",n}_adjustOptionsForRightHandSide(e,t){const n=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(n.ariaLabel=t.modifiedAriaLabel),n.ariaLabel=this._updateAriaLabel(n.ariaLabel),n.wordWrapOverride1=this._options.diffWordWrap.get(),n.revealHorizontalRightPadding=At.revealHorizontalRightPadding.defaultValue+Kq.ENTIRE_DIFF_OVERVIEW_WIDTH,n.scrollbar.verticalHasArrows=!1,n.extraEditorClassName="modified-in-monaco-diff-editor",n}_adjustOptionsForSubEditor(e){const t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var t;e||(e="");const n=G("diff-aria-navigation-tip"," use {0} to open the accessibility help.",null===(t=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))||void 0===t?void 0:t.getAriaLabel());return this._options.accessibilityVerbose.get()?e+n:e?e.replaceAll(n,""):""}};Xq=Yq([Qq(5,so),Qq(6,tk)],Xq);class Zq{get editorOptions(){return this._options}constructor(e){this._diffEditorWidth=Zj(this,0),this.couldShowInlineViewBecauseOfSize=nU(this,(e=>this._options.read(e).renderSideBySide&&this._diffEditorWidth.read(e)<=this._options.read(e).renderSideBySideInlineBreakpoint)),this.renderOverviewRuler=nU(this,(e=>this._options.read(e).renderOverviewRuler)),this.renderSideBySide=nU(this,(e=>this._options.read(e).renderSideBySide&&!(this._options.read(e).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(e)))),this.readOnly=nU(this,(e=>this._options.read(e).readOnly)),this.shouldRenderRevertArrows=nU(this,(e=>!!this._options.read(e).renderMarginRevertIcon&&(!!this.renderSideBySide.read(e)&&!this.readOnly.read(e)))),this.renderIndicators=nU(this,(e=>this._options.read(e).renderIndicators)),this.enableSplitViewResizing=nU(this,(e=>this._options.read(e).enableSplitViewResizing)),this.splitViewDefaultRatio=nU(this,(e=>this._options.read(e).splitViewDefaultRatio)),this.ignoreTrimWhitespace=nU(this,(e=>this._options.read(e).ignoreTrimWhitespace)),this.maxComputationTimeMs=nU(this,(e=>this._options.read(e).maxComputationTime)),this.showMoves=nU(this,(e=>this._options.read(e).experimental.showMoves&&this.renderSideBySide.read(e))),this.isInEmbeddedEditor=nU(this,(e=>this._options.read(e).isInEmbeddedEditor)),this.diffWordWrap=nU(this,(e=>this._options.read(e).diffWordWrap)),this.originalEditable=nU(this,(e=>this._options.read(e).originalEditable)),this.diffCodeLens=nU(this,(e=>this._options.read(e).diffCodeLens)),this.accessibilityVerbose=nU(this,(e=>this._options.read(e).accessibilityVerbose)),this.diffAlgorithm=nU(this,(e=>this._options.read(e).diffAlgorithm)),this.showEmptyDecorations=nU(this,(e=>this._options.read(e).experimental.showEmptyDecorations)),this.onlyShowAccessibleDiffViewer=nU(this,(e=>this._options.read(e).onlyShowAccessibleDiffViewer)),this.hideUnchangedRegions=nU(this,(e=>this._options.read(e).hideUnchangedRegions.enabled)),this.hideUnchangedRegionsRevealLineCount=nU(this,(e=>this._options.read(e).hideUnchangedRegions.revealLineCount)),this.hideUnchangedRegionsContextLineCount=nU(this,(e=>this._options.read(e).hideUnchangedRegions.contextLineCount)),this.hideUnchangedRegionsMinimumLineCount=nU(this,(e=>this._options.read(e).hideUnchangedRegions.minimumLineCount));const t={...e,...Jq(e,cR)};this._options=Zj(this,t)}updateOptions(e){const t=Jq(e,this._options.get()),n={...this._options.get(),...e,...t};this._options.set(n,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}}function Jq(e,t){var n,i,s,r,o,a,l,c;return{enableSplitViewResizing:Je(e.enableSplitViewResizing,t.enableSplitViewResizing),splitViewDefaultRatio:it(e.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:Je(e.renderSideBySide,t.renderSideBySide),renderMarginRevertIcon:Je(e.renderMarginRevertIcon,t.renderMarginRevertIcon),maxComputationTime:tt(e.maxComputationTime,t.maxComputationTime,0,1073741824),maxFileSize:tt(e.maxFileSize,t.maxFileSize,0,1073741824),ignoreTrimWhitespace:Je(e.ignoreTrimWhitespace,t.ignoreTrimWhitespace),renderIndicators:Je(e.renderIndicators,t.renderIndicators),originalEditable:Je(e.originalEditable,t.originalEditable),diffCodeLens:Je(e.diffCodeLens,t.diffCodeLens),renderOverviewRuler:Je(e.renderOverviewRuler,t.renderOverviewRuler),diffWordWrap:ot(e.diffWordWrap,t.diffWordWrap,["off","on","inherit"]),diffAlgorithm:ot(e.diffAlgorithm,t.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:Je(e.accessibilityVerbose,t.accessibilityVerbose),experimental:{showMoves:Je(null===(n=e.experimental)||void 0===n?void 0:n.showMoves,t.experimental.showMoves),showEmptyDecorations:Je(null===(i=e.experimental)||void 0===i?void 0:i.showEmptyDecorations,t.experimental.showEmptyDecorations)},hideUnchangedRegions:{enabled:Je(null!==(r=null===(s=e.hideUnchangedRegions)||void 0===s?void 0:s.enabled)&&void 0!==r?r:null===(o=e.experimental)||void 0===o?void 0:o.collapseUnchangedRegions,t.hideUnchangedRegions.enabled),contextLineCount:tt(null===(a=e.hideUnchangedRegions)||void 0===a?void 0:a.contextLineCount,t.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:tt(null===(l=e.hideUnchangedRegions)||void 0===l?void 0:l.minimumLineCount,t.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:tt(null===(c=e.hideUnchangedRegions)||void 0===c?void 0:c.revealLineCount,t.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:Je(e.isInEmbeddedEditor,t.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:Je(e.onlyShowAccessibleDiffViewer,t.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:tt(e.renderSideBySideInlineBreakpoint,t.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:Je(e.useInlineViewWhenSpaceIsLimited,t.useInlineViewWhenSpaceIsLimited)}}class eK extends Zt{constructor(e,t,n,i){super(),this._editors=e,this._diffModel=t,this._options=n,this._widget=i;const s=[],r=nU(this,(e=>{const t=this._diffModel.read(e),n=null===t||void 0===t?void 0:t.diff.read(e);if(!n)return s;const i=this._editors.modifiedSelections.read(e);if(i.every((e=>e.isEmpty())))return s;const r=new sg(i.map((e=>ig.fromRangeInclusive(e)))),o=n.mappings.filter((e=>e.lineRangeMapping.innerChanges&&r.intersects(e.lineRangeMapping.modified))).map((e=>({mapping:e,rangeMappings:e.lineRangeMapping.innerChanges.filter((e=>i.some((t=>xi.areIntersecting(e.modifiedRange,t)))))})));return 0===o.length||o.every((e=>0===e.rangeMappings.length))?s:o}));this._register(cU(((e,t)=>{const n=this._diffModel.read(e),i=null===n||void 0===n?void 0:n.diff.read(e);if(!n||!i)return;if(this._diffModel.read(e).movedTextToCompare.read(e))return;if(!this._options.shouldRenderRevertArrows.read(e))return;const s=[],o=r.read(e),a=new Set(o.map((e=>e.mapping)));if(o.length>0){const n=this._editors.modifiedSelections.read(e),i=t.add(new tK(n[n.length-1].positionLineNumber,this._widget,o.flatMap((e=>e.rangeMappings)),!0));this._editors.modified.addGlyphMarginWidget(i),s.push(i)}for(const r of i.mappings)if(!a.has(r)&&!r.lineRangeMapping.modified.isEmpty&&r.lineRangeMapping.innerChanges){const e=t.add(new tK(r.lineRangeMapping.modified.startLineNumber,this._widget,r.lineRangeMapping.innerChanges,!1));this._editors.modified.addGlyphMarginWidget(e),s.push(e)}t.add(Qt((()=>{for(const e of s)this._editors.modified.removeGlyphMarginWidget(e)})))})))}}class tK extends Zt{getId(){return this._id}constructor(e,t,n,i){super(),this._lineNumber=e,this._widget=t,this._diffs=n,this._selection=i,this._id="revertButton".concat(tK.counter++),this._domNode=qu("div.revertButton",{title:this._selection?G("revertSelectedChanges","Revert Selected Changes"):G("revertChange","Revert Change")},[_$(Ti.arrowRight)]).root,this._register(zc(this._domNode,ku.MOUSE_DOWN,(e=>{2!==e.button&&(e.stopPropagation(),e.preventDefault())}))),this._register(zc(this._domNode,ku.MOUSE_UP,(e=>{e.stopPropagation(),e.preventDefault()}))),this._register(zc(this._domNode,ku.CLICK,(e=>{this._widget.revertRangeMappings(this._diffs),e.stopPropagation(),e.preventDefault()})))}getDomNode(){return this._domNode}getPosition(){return{lane:Df.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}}tK.counter=0;var nK=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},iK=function(e,t){return function(n,i){t(n,i,e)}};let sK=class extends Gq{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,n,i,s,r,o,a){var l;super(),this._domElement=e,this._parentContextKeyService=i,this._parentInstantiationService=s,this._audioCueService=o,this._editorProgressService=a,this.elements=qu("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[qu("div.noModificationsOverlay@overlay",{style:{position:"absolute",height:"100%",visibility:"hidden"}},[Mu("span",{},"No Changes")]),qu("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),qu("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),qu("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModel=Zj(this,void 0),this._shouldDisposeDiffModel=!1,this.onDidChangeModel=rn.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._parentInstantiationService.createChild(new GT([ia,this._contextKeyService])),this._boundarySashes=Zj(this,void 0),this._accessibleDiffViewerShouldBeVisible=Zj(this,!1),this._accessibleDiffViewerVisible=nU(this,(e=>!!this._options.onlyShowAccessibleDiffViewer.read(e)||this._accessibleDiffViewerShouldBeVisible.read(e))),this._movedBlocksLinesPart=Zj(this,void 0),this._layoutInfo=nU(this,(e=>{var t,n,i,s,r;const o=this._rootSizeObserver.width.read(e),a=this._rootSizeObserver.height.read(e),l=null===(t=this._sash.read(e))||void 0===t?void 0:t.sashLeft.read(e),c=null!==l&&void 0!==l?l:Math.max(5,this._editors.original.getLayoutInfo().decorationsLeft),u=o-c-(null!==(i=null===(n=this._overviewRulerPart.read(e))||void 0===n?void 0:n.width)&&void 0!==i?i:0),h=c-(null!==(r=null===(s=this._movedBlocksLinesPart.read(e))||void 0===s?void 0:s.width.read(e))&&void 0!==r?r:0);return this.elements.original.style.width=h+"px",this.elements.original.style.left="0px",this.elements.modified.style.width=u+"px",this.elements.modified.style.left=c+"px",this._editors.original.layout({width:h,height:a},!0),this._editors.modified.layout({width:u,height:a},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}})),this._diffValue=this._diffModel.map(((e,t)=>null===e||void 0===e?void 0:e.diff.read(t))),this.onDidUpdateDiff=rn.fromObservableLight(this._diffValue),r.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(Qt((()=>this._domElement.removeChild(this.elements.root)))),this._rootSizeObserver=this._register(new EU(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout(null!==(l=t.automaticLayout)&&void 0!==l&&l),this._options=new Zq(t),this._register(oU((e=>{this._options.setWidth(this._rootSizeObserver.width.read(e))}))),this._contextKeyService.createKey(qk.isEmbeddedDiffEditor.key,!1),this._register(RU(qk.isEmbeddedDiffEditor,this._contextKeyService,(e=>this._options.isInEmbeddedEditor.read(e)))),this._register(RU(qk.comparingMovedCode,this._contextKeyService,(e=>{var t;return!!(null===(t=this._diffModel.read(e))||void 0===t?void 0:t.movedTextToCompare.read(e))}))),this._register(RU(qk.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,(e=>this._options.couldShowInlineViewBecauseOfSize.read(e)))),this._register(RU(qk.hasChanges,this._contextKeyService,(e=>{var t,n,i;return(null!==(i=null===(n=null===(t=this._diffModel.read(e))||void 0===t?void 0:t.diff.read(e))||void 0===n?void 0:n.mappings.length)&&void 0!==i?i:0)>0}))),this._editors=this._register(this._instantiationService.createInstance(Xq,this.elements.original,this.elements.modified,this._options,n,((e,t,n,i)=>this._createInnerEditor(e,t,n,i)))),this._overviewRulerPart=sU(this,(e=>this._options.renderOverviewRuler.read(e)?this._instantiationService.createInstance(IU(Kq,e),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map((e=>e.modifiedEditor))):void 0)).recomputeInitiallyAndOnChange(this._store),this._sash=sU(this,(e=>{const t=this._options.renderSideBySide.read(e);return this.elements.root.classList.toggle("side-by-side",t),t?new fq(this._options,this.elements.root,{height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map(((e,t)=>{var n,i;return e-(null!==(i=null===(n=this._overviewRulerPart.read(t))||void 0===n?void 0:n.width)&&void 0!==i?i:0)}))},this._boundarySashes):void 0})).recomputeInitiallyAndOnChange(this._store);const c=sU(this,(e=>this._instantiationService.createInstance(IU(bq,e),this._editors,this._diffModel,this._options))).recomputeInitiallyAndOnChange(this._store);sU(this,(e=>this._instantiationService.createInstance(IU(dq,e),this._editors,this._diffModel,this._options,this))).recomputeInitiallyAndOnChange(this._store);const u=new Set,h=new Set;let d=!1;const f=sU(this,(e=>this._instantiationService.createInstance(IU(Wq,e),Dc(this._domElement),this._editors,this._diffModel,this._options,this,(()=>d||c.get().isUpdatingHiddenAreas),u,h))).recomputeInitiallyAndOnChange(this._store),g=nU(this,(e=>{const t=f.read(e).viewZones.read(e).orig,n=c.read(e).viewZones.read(e).origViewZones;return t.concat(n)})),p=nU(this,(e=>{const t=f.read(e).viewZones.read(e).mod,n=c.read(e).viewZones.read(e).modViewZones;return t.concat(n)}));let m;this._register($U(this._editors.original,g,(e=>{d=e}),u)),this._register($U(this._editors.modified,p,(e=>{d=e,d?m=yU.capture(this._editors.modified):(null===m||void 0===m||m.restore(this._editors.modified),m=void 0)}),h)),this._accessibleDiffViewer=sU(this,(e=>this._instantiationService.createInstance(IU(WU,e),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,((e,t)=>this._accessibleDiffViewerShouldBeVisible.set(e,t)),this._options.onlyShowAccessibleDiffViewer.map((e=>!e)),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map(((e,t)=>{var n;return null===(n=null===e||void 0===e?void 0:e.diff.read(t))||void 0===n?void 0:n.mappings.map((e=>e.lineRangeMapping))})),this._editors))).recomputeInitiallyAndOnChange(this._store);const b=this._accessibleDiffViewerVisible.map((e=>e?"hidden":"visible"));this._register(NU(this.elements.modified,{visibility:b})),this._register(NU(this.elements.original,{visibility:b})),this._createDiffEditorContributions(),r.addDiffEditor(this),this._register(_U(this._layoutInfo)),sU(this,(e=>new(IU(XU,e))(this.elements.root,this._diffModel,this._layoutInfo.map((e=>e.originalEditor)),this._layoutInfo.map((e=>e.modifiedEditor)),this._editors))).recomputeInitiallyAndOnChange(this._store,(e=>{this._movedBlocksLinesPart.set(e,void 0)})),this._register(NU(this.elements.overlay,{width:this._layoutInfo.map(((e,t)=>e.originalEditor.width+(this._options.renderSideBySide.read(t)?0:e.modifiedEditor.width))),visibility:nU((e=>{var t,n;return this._options.hideUnchangedRegions.read(e)&&0===(null===(n=null===(t=this._diffModel.read(e))||void 0===t?void 0:t.diff.read(e))||void 0===n?void 0:n.mappings.length)?"visible":"hidden"}))})),this._register(rn.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,(e=>{var t,n;if(3===(null===e||void 0===e?void 0:e.reason)){const i=null===(n=null===(t=this._diffModel.get())||void 0===t?void 0:t.diff.get())||void 0===n?void 0:n.mappings.find((t=>t.lineRangeMapping.modified.contains(e.position.lineNumber)));(null===i||void 0===i?void 0:i.lineRangeMapping.modified.isEmpty)?this._audioCueService.playAudioCue(hj.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):(null===i||void 0===i?void 0:i.lineRangeMapping.original.isEmpty)?this._audioCueService.playAudioCue(hj.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):i&&this._audioCueService.playAudioCue(hj.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}})));const _=this._diffModel.map(this,((e,t)=>{if(e)return void 0===e.diff.read(t)&&!e.isDiffUpToDate.read(t)}));this._register(cU(((e,t)=>{if(!0===_.read(e)){const e=this._editorProgressService.show(!0,1e3);t.add(Qt((()=>e.done())))}}))),this._register(Qt((()=>{var e;this._shouldDisposeDiffModel&&(null===(e=this._diffModel.get())||void 0===e||e.dispose())}))),this._register(new eK(this._editors,this._diffModel,this._options,this))}_createInnerEditor(e,t,n,i){return e.createInstance(xN,t,n,i)}_createDiffEditorContributions(){const e=eh.getDiffEditorContributions();for(const n of e)try{this._register(this._instantiationService.createInstance(n.ctor,this))}catch(t){Nt(t)}}get _targetEditor(){return this._editors.modified}getEditorType(){return Np.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var e;return{original:this._editors.original.saveViewState(),modified:this._editors.modified.saveViewState(),modelState:null===(e=this._diffModel.get())||void 0===e?void 0:e.serializeState()}}restoreViewState(e){var t;if(e&&e.original&&e.modified){const n=e;this._editors.original.restoreViewState(n.original),this._editors.modified.restoreViewState(n.modified),n.modelState&&(null===(t=this._diffModel.get())||void 0===t||t.restoreSerializedState(n.modelState))}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(Lq,e,this._options)}getModel(){var e,t;return null!==(t=null===(e=this._diffModel.get())||void 0===e?void 0:e.model)&&void 0!==t?t:null}setModel(e,t){!e&&this._diffModel.get()&&this._accessibleDiffViewer.get().close();const n=e?"model"in e?{model:e,shouldDispose:!1}:{model:this.createViewModel(e),shouldDispose:!0}:void 0;this._diffModel.get()!==(null===n||void 0===n?void 0:n.model)&&jj(t,(e=>{var t;fU.batchEventsGlobally(e,(()=>{this._editors.original.setModel(n?n.model.model.original:null),this._editors.modified.setModel(n?n.model.model.modified:null)}));const i=this._diffModel.get(),s=this._shouldDisposeDiffModel;this._shouldDisposeDiffModel=null!==(t=null===n||void 0===n?void 0:n.shouldDispose)&&void 0!==t&&t,this._diffModel.set(null===n||void 0===n?void 0:n.model,e),s&&(null===i||void 0===i||i.dispose())}))}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var e;const t=null===(e=this._diffModel.get())||void 0===e?void 0:e.diff.get();return t?t.mappings.map((e=>{const t=e.lineRangeMapping;let n,i,s,r,o=t.innerChanges;return t.original.isEmpty?(n=t.original.startLineNumber-1,i=0,o=void 0):(n=t.original.startLineNumber,i=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(s=t.modified.startLineNumber-1,r=0,o=void 0):(s=t.modified.startLineNumber,r=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:n,originalEndLineNumber:i,modifiedStartLineNumber:s,modifiedEndLineNumber:r,charChanges:null===o||void 0===o?void 0:o.map((e=>({originalStartLineNumber:e.originalRange.startLineNumber,originalStartColumn:e.originalRange.startColumn,originalEndLineNumber:e.originalRange.endLineNumber,originalEndColumn:e.originalRange.endColumn,modifiedStartLineNumber:e.modifiedRange.startLineNumber,modifiedStartColumn:e.modifiedRange.startColumn,modifiedEndLineNumber:e.modifiedRange.endLineNumber,modifiedEndColumn:e.modifiedRange.endColumn})))}})):null}revert(e){if(e.innerChanges)return void this.revertRangeMappings(e.innerChanges);const t=this._diffModel.get();t&&t.isDiffUpToDate.get()&&this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;const n=e.map((e=>({range:e.modifiedRange,text:t.model.original.getValueInRange(e.originalRange)})));this._editors.modified.executeEdits("diffEditor",n)}_goTo(e){this._editors.modified.setPosition(new Ci(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){var t,n,i,s;const r=null===(n=null===(t=this._diffModel.get())||void 0===t?void 0:t.diff.get())||void 0===n?void 0:n.mappings;if(!r||0===r.length)return;const o=this._editors.modified.getPosition().lineNumber;let a;a="next"===e?null!==(i=r.find((e=>e.lineRangeMapping.modified.startLineNumber>o)))&&void 0!==i?i:r[0]:null!==(s=Qf(r,(e=>e.lineRangeMapping.modified.startLineNumber<o)))&&void 0!==s?s:r[r.length-1],this._goTo(a),a.lineRangeMapping.modified.isEmpty?this._audioCueService.playAudioCue(hj.diffLineDeleted,{source:"diffEditor.goToDiff"}):a.lineRangeMapping.original.isEmpty?this._audioCueService.playAudioCue(hj.diffLineInserted,{source:"diffEditor.goToDiff"}):a&&this._audioCueService.playAudioCue(hj.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then((()=>{var t;const n=null===(t=e.diff.get())||void 0===t?void 0:t.mappings;n&&0!==n.length&&this._goTo(n[0])}))}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){var e,t;const n=this._editors.modified.hasWidgetFocus(),i=n?this._editors.modified:this._editors.original,s=n?this._editors.original:this._editors.modified;let r;const o=i.getSelection();if(o){const i=null===(t=null===(e=this._diffModel.get())||void 0===e?void 0:e.diff.get())||void 0===t?void 0:t.mappings.map((e=>n?e.lineRangeMapping.flip():e.lineRangeMapping));if(i){const e=MU(o.getStartPosition(),i),t=MU(o.getEndPosition(),i);r=xi.plusRange(e,t)}}return{destination:s,destinationSelection:r}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var e;const t=null===(e=this._diffModel.get())||void 0===e?void 0:e.unchangedRegions.get();t&&Hj((e=>{for(const n of t)n.collapseAll(e)}))}showAllUnchangedRegions(){var e;const t=null===(e=this._diffModel.get())||void 0===e?void 0:e.unchangedRegions.get();t&&Hj((e=>{for(const n of t)n.showAll(e)}))}};sK=nK([iK(3,ia),iK(4,so),iK(5,oo),iK(6,lj),iK(7,WR)],sK);var rK=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},oK=function(e,t){return function(n,i){t(n,i,e)}};let aK=0,lK=!1;function cK(e){if(!e){if(lK)return;lK=!0}!function(e){Mm=document.createElement("div"),Mm.className="monaco-aria-container";const t=()=>{const e=document.createElement("div");return e.className="monaco-alert",e.setAttribute("role","alert"),e.setAttribute("aria-atomic","true"),Mm.appendChild(e),e};Rm=t(),Om=t();const n=()=>{const e=document.createElement("div");return e.className="monaco-status",e.setAttribute("aria-live","polite"),e.setAttribute("aria-atomic","true"),Mm.appendChild(e),e};Pm=n(),Fm=n(),e.appendChild(Mm)}(e||Ms.document.body)}let uK=class extends xN{constructor(e,t,n,i,s,r,o,a,l,c,u,h){const d={...t};d.ariaLabel=d.ariaLabel||nO.editorViewAccessibleLabel,d.ariaLabel=d.ariaLabel+";"+nO.accessibilityHelpMessage,super(e,d,{},n,i,s,r,a,l,c,u,h),this._standaloneKeybindingService=o instanceof wj?o:null,cK(d.ariaContainerElement)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const i="DYNAMIC_"+ ++aK,s=Oo.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(i,e,t,s),i}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){var t=this;if("string"!==typeof e.id||"string"!==typeof e.label||"function"!==typeof e.run)throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Zt.None;const n=e.id,i=e.label,s=Oo.and(Oo.equals("editorId",this.getId()),Oo.deserialize(e.precondition)),r=e.keybindings,o=Oo.and(s,Oo.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return Promise.resolve(e.run(t,...s))},u=new Xt,h=this.getId()+":"+n;if(u.add(vo.registerCommand(h,c)),a){const e={command:{id:h,title:i},when:s,group:a,order:l};u.add(Na.appendMenuItem(Da.EditorContext,e))}if(Array.isArray(r))for(const f of r)u.add(this._standaloneKeybindingService.addDynamicKeybinding(h,f,c,o));const d=new Wx(h,i,i,void 0,s,(function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return Promise.resolve(e.run(t,...i))}),this._contextKeyService);return this._actions.set(n,d),u.add(Qt((()=>{this._actions.delete(n)}))),u}_triggerCommand(e,t){if(this._codeEditorService instanceof HN)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};uK=rK([oK(2,so),oK(3,oo),oK(4,_o),oK(5,ia),oK(6,tk),oK(7,QS),oK(8,ZT),oK(9,Zm),oK(10,qd),oK(11,_p)],uK);let hK=class extends uK{constructor(e,t,n,i,s,r,o,a,l,c,u,h,d,f,g){const p={...t};Aj(c,p,!1);const m=a.registerEditorContainer(e);"string"===typeof p.theme&&a.setTheme(p.theme),"undefined"!==typeof p.autoDetectHighContrast&&a.setAutoDetectHighContrast(Boolean(p.autoDetectHighContrast));const b=p.model;let _;if(delete p.model,super(e,p,n,i,s,r,o,a,l,u,f,g),this._configurationService=c,this._standaloneThemeService=a,this._register(m),"undefined"===typeof b){const e=d.getLanguageIdByMimeType(p.language)||p.language||Pd;_=fK(h,d,p.value||"",e,void 0),this._ownsModel=!0}else _=b,this._ownsModel=!1;if(this._attachModel(_),_){const e={oldModelUrl:null,newModelUrl:_.uri};this._onDidChangeModel.fire(e)}}dispose(){super.dispose()}updateOptions(e){Aj(this._configurationService,e,!1),"string"===typeof e.theme&&this._standaloneThemeService.setTheme(e.theme),"undefined"!==typeof e.autoDetectHighContrast&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};hK=rK([oK(2,so),oK(3,oo),oK(4,_o),oK(5,ia),oK(6,tk),oK(7,SV),oK(8,ZT),oK(9,od),oK(10,Zm),oK(11,ao),oK(12,dd),oK(13,qd),oK(14,_p)],hK);let dK=class extends sK{constructor(e,t,n,i,s,r,o,a,l,c,u,h){const d={...t};Aj(a,d,!0);const f=r.registerEditorContainer(e);"string"===typeof d.theme&&r.setTheme(d.theme),"undefined"!==typeof d.autoDetectHighContrast&&r.setAutoDetectHighContrast(Boolean(d.autoDetectHighContrast)),super(e,d,{},i,n,s,h,c),this._configurationService=a,this._standaloneThemeService=r,this._register(f)}dispose(){super.dispose()}updateOptions(e){Aj(this._configurationService,e,!0),"string"===typeof e.theme&&this._standaloneThemeService.setTheme(e.theme),"undefined"!==typeof e.autoDetectHighContrast&&this._standaloneThemeService.setAutoDetectHighContrast(Boolean(e.autoDetectHighContrast)),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(uK,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};function fK(e,t,n,i,s){if(n=n||"",!i){const i=n.indexOf("\n");let r=n;return-1!==i&&(r=n.substring(0,i)),gK(e,n,t.createByFilepathOrFirstLine(s||null,r),s)}return gK(e,n,t.createById(i),s)}function gK(e,t,n,i){return e.createModel(t,n,i)}dK=rK([oK(2,so),oK(3,ia),oK(4,oo),oK(5,SV),oK(6,ZT),oK(7,od),oK(8,r$),oK(9,WR),oK(10,FV),oK(11,lj)],dK);class pK extends Zt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{orientation:0};super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new pn),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new Xt),this.options=n,this.lookupKeybindings="function"===typeof this.options.getKeyBinding,this.toggleMenuAction=this._register(new mK((()=>{var e;return null===(e=this.toggleMenuActionViewItem)||void 0===e?void 0:e.show()}),n.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new rF(this.element,{orientation:n.orientation,ariaLabel:n.ariaLabel,actionRunner:n.actionRunner,allowContextMenu:n.allowContextMenu,highlightToggledItems:n.highlightToggledItems,actionViewItemProvider:(e,i)=>{var s;if(e.id===mK.ID)return this.toggleMenuActionViewItem=new TP(e,e.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:bo.asClassNameArray(null!==(s=n.moreIcon)&&void 0!==s?s:Ti.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(n.actionViewItemProvider){const t=n.actionViewItemProvider(e,i);if(t)return t}if(e instanceof fo){const n=new TP(e,e.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:e.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry});return n.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(n),this.disposables.add(this._onDidChangeDropdownVisibility.add(n.onDidChangeVisibility)),n}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const n=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),n.push(this.toggleMenuAction)),n.forEach((e=>{this.actionBar.push(e,{icon:!0,label:!1,keybinding:this.getKeybindingLabel(e)})}))}getKeybindingLabel(e){var t,n,i;const s=this.lookupKeybindings?null===(n=(t=this.options).getKeyBinding)||void 0===n?void 0:n.call(t,e):void 0;return null!==(i=null===s||void 0===s?void 0:s.getLabel())&&void 0!==i?i:void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}class mK extends co{constructor(e,t){t=t||G("moreActions","More Actions..."),super(mK.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}}mK.ID="toolbar.toggle.more";var bK=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},_K=function(e,t){return function(n,i){t(n,i,e)}};let vK=class extends pK{constructor(e,t,n,i,s,r,o){super(e,s,{getKeyBinding:e=>{var t;return null!==(t=r.lookupKeybinding(e.id))&&void 0!==t?t:void 0},...t,allowContextMenu:!0,skipTelemetry:"string"===typeof(null===t||void 0===t?void 0:t.telemetrySource)}),this._options=t,this._menuService=n,this._contextKeyService=i,this._contextMenuService=s,this._sessionDisposables=this._store.add(new Xt);const a=null===t||void 0===t?void 0:t.telemetrySource;a&&this._store.add(this.actionBar.onDidRun((e=>o.publicLog2("workbenchActionExecuted",{id:e.action.id,from:a}))))}setActions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;var i,s,r;this._sessionDisposables.clear();const o=e.slice(),a=t.slice(),l=[];let c=0;const u=[];let d=!1;if(-1!==(null===(i=this._options)||void 0===i?void 0:i.hiddenItemStrategy))for(let h=0;h<o.length;h++){const e=o[h];(e instanceof $a||e instanceof Ia)&&(e.hideActions&&(l.push(e.hideActions.toggle),e.hideActions.toggle.checked&&c++,e.hideActions.isHidden&&(d=!0,o[h]=void 0,0!==(null===(s=this._options)||void 0===s?void 0:s.hiddenItemStrategy)&&(u[h]=e))))}if(void 0!==(null===(r=this._options)||void 0===r?void 0:r.overflowBehavior)){const e=function(e,t){const n=new Set;for(const i of t)e.has(i)&&n.add(i);return n}(new Set(this._options.overflowBehavior.exempted),Pe.map(o,(e=>null===e||void 0===e?void 0:e.id))),t=this._options.overflowBehavior.maxItems-e.size;let n=0;for(let i=0;i<o.length;i++){const s=o[i];s&&(n++,e.has(s.id)||n>=t&&(o[i]=void 0,u[i]=s))}}h(o),h(u),super.setActions(o,ho.join(u,a)),l.length>0&&this._sessionDisposables.add(zc(this.getElement(),"contextmenu",(e=>{var t,i,s,r,o;const a=new Ga(Dc(this.getElement()),e),u=this.getItemAction(a.target);if(!u)return;a.preventDefault(),a.stopPropagation();let h,f=!1;if(1===c&&0===(null===(t=this._options)||void 0===t?void 0:t.hiddenItemStrategy)){f=!0;for(let e=0;e<l.length;e++)if(l[e].checked){l[e]=po({id:u.id,label:u.label,checked:!0,enabled:!1,run(){}});break}}if(!f&&(u instanceof $a||u instanceof Ia)){if(!u.hideActions)return;h=u.hideActions.hide}else h=po({id:"label",label:G("hide","Hide"),enabled:!1,run(){}});const g=ho.join([h],l);(null===(i=this._options)||void 0===i?void 0:i.resetMenu)&&!n&&(n=[this._options.resetMenu]),d&&n&&(g.push(new ho),g.push(po({id:"resetThisMenu",label:G("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(n)}))),this._contextMenuService.showContextMenu({getAnchor:()=>a,getActions:()=>g,menuId:null===(s=this._options)||void 0===s?void 0:s.contextMenu,menuActionOptions:{renderShortTitle:!0,...null===(r=this._options)||void 0===r?void 0:r.menuOptions},skipTelemetry:"string"===typeof(null===(o=this._options)||void 0===o?void 0:o.telemetrySource),contextKeyService:this._contextKeyService})})))}};vK=bK([_K(2,Aa),_K(3,ia),_K(4,r$),_K(5,tk),_K(6,Ma)],vK);let yK=class extends vK{constructor(e,t,n,i,s,r,o,a){super(e,{resetMenu:t,...n},i,s,r,o,a),this._onDidChangeMenuItems=this._store.add(new un);const l=this._store.add(i.createMenu(t,s,{emitEventsForSubmenuChanges:!0})),c=()=>{var t,i,s;const r=[],o=[];!function(e,t,n,i,s,r){eF(e.getActions(t),n,!1,"string"===typeof i?e=>e===i:i,s,r)}(l,null===n||void 0===n?void 0:n.menuOptions,{primary:r,secondary:o},null===(t=null===n||void 0===n?void 0:n.toolbarOptions)||void 0===t?void 0:t.primaryGroup,null===(i=null===n||void 0===n?void 0:n.toolbarOptions)||void 0===i?void 0:i.shouldInlineSubmenu,null===(s=null===n||void 0===n?void 0:n.toolbarOptions)||void 0===s?void 0:s.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",0===r.length&&0===o.length),super.setActions(r,o)};this._store.add(l.onDidChange((()=>{c(),this._onDidChangeMenuItems.fire(this)}))),c()}setActions(){throw new Wt("This toolbar is populated from a menu.")}};yK=bK([_K(3,Aa),_K(4,ia),_K(5,r$),_K(6,tk),_K(7,Ma)],yK);class SK extends uo{constructor(e){super(),this._getContext=e}runAction(e,t){return super.runAction(e,this._getContext())}}var wK=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},kK=function(e,t){return function(n,i){t(n,i,e)}};class CK{constructor(e){this.viewModel=e}getId(){return this.viewModel}}let xK=class extends Zt{constructor(e,t,n,i){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=n,this._instantiationService=i,this._viewModel=Zj(this,void 0),this._collapsed=nU(this,(e=>{var t;return null===(t=this._viewModel.read(e))||void 0===t?void 0:t.collapsed.read(e)})),this._editorContentHeight=Zj(this,500),this.contentHeight=nU(this,(e=>(this._collapsed.read(e)?0:this._editorContentHeight.read(e))+this._outerEditorHeight)),this._modifiedContentWidth=Zj(this,0),this._modifiedWidth=Zj(this,0),this._originalContentWidth=Zj(this,0),this._originalWidth=Zj(this,0),this.maxScroll=nU(this,(e=>{const t=this._modifiedContentWidth.read(e)-this._modifiedWidth.read(e),n=this._originalContentWidth.read(e)-this._originalWidth.read(e);return t>n?{maxScroll:t,width:this._modifiedWidth.read(e)}:{maxScroll:n,width:this._originalWidth.read(e)}})),this._elements=qu("div.multiDiffEntry",[qu("div.header@header",[qu("div.collapse-button@collapseButton"),qu("div.file-path",[qu("div.title.modified.show-file-icons@primaryPath",[]),qu("div.status.deleted@status",["R"]),qu("div.title.original.show-file-icons@secondaryPath",[])]),qu("div.actions@actions")]),qu("div.editorParent",[qu("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(sK,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=EK(this.editor.getModifiedEditor()),this.isOriginalFocused=EK(this.editor.getOriginalEditor()),this.isFocused=nU(this,(e=>this.isModifedFocused.read(e)||this.isOriginalFocused.read(e))),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=new Xt,this._headerHeight=38;const s=new CH(this._elements.collapseButton,{});this._register(oU((e=>{s.element.className="",s.icon=this._collapsed.read(e)?Ti.chevronRight:Ti.chevronDown}))),this._register(s.onDidClick((()=>{var e;null===(e=this._viewModel.get())||void 0===e||e.collapsed.set(!this._collapsed.get(),void 0)}))),this._register(oU((e=>{this._elements.editor.style.display=this._collapsed.read(e)?"none":"block"}))),this.editor.getModifiedEditor().onDidLayoutChange((e=>{const t=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(t,void 0)})),this.editor.getOriginalEditor().onDidLayoutChange((e=>{const t=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(t,void 0)})),this._register(this.editor.onDidContentSizeChange((e=>{Vj((t=>{this._editorContentHeight.set(e.contentHeight,t),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),t),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),t)}))}))),this._register(oU((e=>{const t=this.isFocused.read(e);this._elements.root.classList.toggle("focused",t)}))),this._container.appendChild(this._elements.root),this._outerEditorHeight=38,this._register(this._instantiationService.createInstance(yK,this._elements.actions,Da.MultiDiffEditorFileToolbar,{actionRunner:this._register(new SK((()=>{var e;return null===(e=this._viewModel.get())||void 0===e?void 0:e.modifiedUri}))),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:e=>e.startsWith("navigation")}}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){function t(e){return{...e,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}const n=e.viewModel.entry.value;n.onOptionsDidChange&&this._dataStore.add(n.onOptionsDidChange((()=>{var e;this.editor.updateOptions(t(null!==(e=n.options)&&void 0!==e?e:{}))}))),Vj((i=>{var s,r,o,a;null===(s=this._resourceLabel)||void 0===s||s.setUri(null!==(r=e.viewModel.modifiedUri)&&void 0!==r?r:e.viewModel.originalUri,{strikethrough:void 0===e.viewModel.modifiedUri});let l=!1,c=!1,u=!1,h="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(h="R",l=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(h="A",u=!0):(h="D",c=!0),this._elements.status.classList.toggle("renamed",l),this._elements.status.classList.toggle("deleted",c),this._elements.status.classList.toggle("added",u),this._elements.status.innerText=h,null===(o=this._resourceLabel2)||void 0===o||o.setUri(l?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,i),this.editor.setModel(e.viewModel.diffEditorViewModel,i),this.editor.updateOptions(t(null!==(a=n.options)&&void 0!==a?a:{}))}))}render(e,t,n,i){this._elements.root.style.visibility="visible",this._elements.root.style.top="".concat(e.start,"px"),this._elements.root.style.height="".concat(e.length,"px"),this._elements.root.style.width="".concat(t,"px"),this._elements.root.style.position="absolute";const s=Math.max(0,Math.min(e.length-this._headerHeight,i.start-e.start));this._elements.header.style.transform="translateY(".concat(s,"px)"),Vj((n=>{this.editor.layout({width:t,height:e.length-this._outerEditorHeight})})),this.editor.getOriginalEditor().setScrollTop(n),this._elements.header.classList.toggle("shadow",s>0||n>0)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};function EK(e){return fU((t=>{const n=new Xt;return n.add(e.onDidFocusEditorWidget((()=>t(!0)))),n.add(e.onDidBlurEditorWidget((()=>t(!1)))),n}),(()=>e.hasWidgetFocus()))}xK=wK([kK(3,so)],xK);class LK{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){var t;let n;if(0===this._unused.size)n=this._create(e),this._itemData.set(n,e);else{const i=[...this._unused.values()];n=null!==(t=i.find((t=>this._itemData.get(t).getId()===e.getId())))&&void 0!==t?t:i[0],this._unused.delete(n),this._itemData.set(n,e),n.setData(e)}return this._used.add(n),{object:n,dispose:()=>{this._used.delete(n),this._unused.size>5?n.dispose():this._unused.add(n)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var DK=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},AK=function(e,t){return function(n,i){t(n,i,e)}};let TK=class extends Zt{constructor(e,t,n,i,s,r){super(),this._element=e,this._dimension=t,this._viewModel=n,this._workbenchUIElementFactory=i,this._parentContextKeyService=s,this._parentInstantiationService=r,this._elements=qu("div.monaco-component.multiDiffEditor",[qu("div@content",{style:{overflow:"hidden"}}),qu("div.monaco-editor@overflowWidgetsDomNode",{})]),this._sizeObserver=this._register(new EU(this._element,void 0)),this._objectPool=this._register(new LK((e=>{const t=this._instantiationService.createInstance(xK,this._elements.content,this._elements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return t.setData(e),t}))),this._scrollable=this._register(new vS({forceIntegerValues:!1,scheduleAtNextAnimationFrame:e=>Uc(Dc(this._element),e),smoothScrollDuration:100})),this._scrollableElement=this._register(new LS(this._elements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this.scrollTop=fU(this._scrollableElement.onScroll,(()=>this._scrollableElement.getScrollPosition().scrollTop)),this.scrollLeft=fU(this._scrollableElement.onScroll,(()=>this._scrollableElement.getScrollPosition().scrollLeft)),this._viewItems=iU(this,((e,t)=>{const n=this._viewModel.read(e);if(!n)return[];return n.items.read(e).map((e=>{var n;const i=t.add(new NK(e,this._objectPool,this.scrollLeft)),s=null===(n=this._lastDocStates)||void 0===n?void 0:n[i.getKey()];return s&&Hj((e=>{i.setViewState(s,e)})),i}))})),this._spaceBetweenPx=10,this._totalHeight=this._viewItems.map(this,((e,t)=>e.reduce(((e,n)=>e+n.contentHeight.read(t)+this._spaceBetweenPx),0))),this.activeDiffItem=nU(this,(e=>this._viewItems.read(e).find((t=>{var n;return null===(n=t.template.read(e))||void 0===n?void 0:n.isFocused.read(e)})))),this.lastActiveDiffItem=function(e){let t;return nU((n=>(t=e(n,t),t)))}(((e,t)=>{var n;return null!==(n=this.activeDiffItem.read(e))&&void 0!==n?n:t})),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._parentInstantiationService.createChild(new GT([ia,this._contextKeyService])),this._lastDocStates={},this._contextKeyService.createKey(qk.inMultiDiffEditor.key,!0),this._register(cU(((e,t)=>{const n=this._viewModel.read(e);if(n&&n.contextKeys)for(const[i,s]of Object.entries(n.contextKeys)){const e=this._contextKeyService.createKey(i,void 0);e.set(s),t.add(Qt((()=>e.reset())))}})));const o=this._parentContextKeyService.createKey(qk.multiDiffEditorAllCollapsed.key,!1);this._register(oU((e=>{const t=this._viewModel.read(e);if(t){const n=t.items.read(e).every((t=>t.collapsed.read(e)));o.set(n)}}))),this._register(oU((e=>{const t=this.lastActiveDiffItem.read(e);Hj((n=>{var i;null===(i=this._viewModel.read(e))||void 0===i||i.activeDiffItem.set(null===t||void 0===t?void 0:t.viewModel,n)}))}))),this._register(oU((e=>{const t=this._dimension.read(e);this._sizeObserver.observe(t)}))),this._elements.content.style.position="relative",this._register(oU((e=>{const t=this._sizeObserver.height.read(e);this._elements.root.style.height="".concat(t,"px");const n=this._totalHeight.read(e);this._elements.content.style.height="".concat(n,"px");const i=this._sizeObserver.width.read(e);let s=i;const r=tg(this._viewItems.read(e),(t=>t.maxScroll.read(e).maxScroll));if(r){s=i+r.maxScroll.read(e).maxScroll}this._scrollableElement.setScrollDimensions({width:i,height:t,scrollHeight:n,scrollWidth:s})}))),e.replaceChildren(this._scrollableElement.getDomNode()),this._register(Qt((()=>{e.replaceChildren()}))),this._register(this._register(oU((e=>{Vj((t=>{this.render(e)}))}))))}render(e){const t=this.scrollTop.read(e);let n=0,i=0,s=0;const r=this._sizeObserver.height.read(e),o=Gf.ofStartAndLength(t,r),a=this._sizeObserver.width.read(e);for(const l of this._viewItems.read(e)){const c=l.contentHeight.read(e),u=Math.min(c,r),h=Gf.ofStartAndLength(i,u),d=Gf.ofStartAndLength(s,c);if(d.isBefore(o))n-=c-u,l.hide();else if(d.isAfter(o))l.hide();else{const e=Math.max(0,Math.min(o.start-d.start,c-u));n-=e;const i=Gf.ofStartAndLength(t+n,r);l.render(h,e,a,i)}i+=u+this._spaceBetweenPx,s+=c+this._spaceBetweenPx}this._elements.content.style.transform="translateY(".concat(-(t+n),"px)")}};TK=DK([AK(4,ia),AK(5,so)],TK);class NK extends Zt{constructor(e,t,n){var i,s;super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=n,this._templateRef=this._register((s=void 0,"string"===typeof(i=this)?new eU(void 0,i,s):new eU(i,void 0,s))),this.contentHeight=nU(this,(e=>{var t,n,i;return null!==(i=null===(n=null===(t=this._templateRef.read(e))||void 0===t?void 0:t.object.contentHeight)||void 0===n?void 0:n.read(e))&&void 0!==i?i:this.viewModel.lastTemplateData.read(e).contentHeight})),this.maxScroll=nU(this,(e=>{var t,n;return null!==(n=null===(t=this._templateRef.read(e))||void 0===t?void 0:t.object.maxScroll.read(e))&&void 0!==n?n:{maxScroll:0,scrollWidth:0}})),this.template=nU(this,(e=>{var t;return null===(t=this._templateRef.read(e))||void 0===t?void 0:t.object})),this._isHidden=Zj(this,!1),this._register(oU((e=>{var t;const n=this._scrollLeft.read(e);null===(t=this._templateRef.read(e))||void 0===t||t.object.setScrollLeft(n)}))),this._register(oU((e=>{const t=this._templateRef.read(e);if(!t)return;if(!this._isHidden.read(e))return;t.object.isFocused.read(e)||this._clear()})))}dispose(){this._clear(),super.dispose()}toString(){var e;return"VirtualViewItem(".concat(null===(e=this.viewModel.entry.value.modified)||void 0===e?void 0:e.uri.toString(),")")}getKey(){return this.viewModel.getKey()}setViewState(e,t){var n;this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const i=this.viewModel.lastTemplateData.get(),s=null===(n=e.selections)||void 0===n?void 0:n.map(Ei.liftSelection);this.viewModel.lastTemplateData.set({...i,selections:s},t);const r=this._templateRef.get();r&&s&&r.object.editor.setSelections(s)}_updateTemplateData(e){var t;const n=this._templateRef.get();n&&this.viewModel.lastTemplateData.set({contentHeight:n.object.contentHeight.get(),selections:null!==(t=n.object.editor.getSelections())&&void 0!==t?t:void 0},e)}_clear(){const e=this._templateRef.get();e&&Hj((t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)}))}hide(){this._isHidden.set(!0,void 0)}render(e,t,n,i){this._isHidden.set(!1,void 0);let s=this._templateRef.get();if(!s){s=this._objectPool.getUnusedObj(new CK(this.viewModel)),this._templateRef.set(s,void 0);const e=this.viewModel.lastTemplateData.get().selections;e&&s.object.editor.setSelections(e)}s.object.render(e,n,t,i)}}gb("multiDiffEditor.headerBackground",{dark:"#808080",light:"#b4b4b4",hcDark:"#808080",hcLight:"#b4b4b4"},G("multiDiffEditor.headerBackground","The background color of the diff editor's header")),gb("multiDiffEditor.background",{dark:"#000000",light:"#e5e5e5",hcDark:"#000000",hcLight:"#e5e5e5"},G("multiDiffEditor.background","The background color of the multi file diff editor")),gb("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},G("multiDiffEditor.border","The border color of the multi file diff editor"));var IK=function(e,t,n,i){var s,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(r<3?s(o):r>3?s(t,n,o):s(t,n))||o);return r>3&&o&&Object.defineProperty(t,n,o),o},$K=function(e,t){return function(n,i){t(n,i,e)}};let MK=class extends Zt{constructor(e,t,n){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=n,this._dimension=Zj(this,void 0),this._viewModel=Zj(this,void 0),this._widgetImpl=iU(this,((e,t)=>(IU(xK,e),t.add(this._instantiationService.createInstance(IU(TK,e),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory))))),this._register(_U(this._widgetImpl))}};function RK(e,t,n){return $j.initialize(n||{}).createInstance(hK,e,t)}function OK(e){return $j.get(oo).onCodeEditorAdd((t=>{e(t)}))}function PK(e){return $j.get(oo).onDiffEditorAdd((t=>{e(t)}))}function FK(){return $j.get(oo).listCodeEditors()}function BK(){return $j.get(oo).listDiffEditors()}function zK(e,t,n){return $j.initialize(n||{}).createInstance(dK,e,t)}function WK(e,t){const n=$j.initialize(t||{});return new MK(e,{},n)}function HK(e){if("string"!==typeof e.id||"function"!==typeof e.run)throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return vo.registerCommand(e.id,e.run)}function VK(e){if("string"!==typeof e.id||"string"!==typeof e.label||"function"!==typeof e.run)throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const t=Oo.deserialize(e.precondition),n=new Xt;if(n.add(vo.registerCommand(e.id,(function(n){for(var i=arguments.length,s=new Array(i>1?i-1:0),r=1;r<i;r++)s[r-1]=arguments[r];return Xu.runEditorCommand(n,s,t,((t,n,i)=>Promise.resolve(e.run(n,...i))))}))),e.contextMenuGroupId){const i={command:{id:e.id,title:e.label},when:t,group:e.contextMenuGroupId,order:e.contextMenuOrder||0};n.add(Na.appendMenuItem(Da.EditorContext,i))}if(Array.isArray(e.keybindings)){const i=$j.get(tk);if(i instanceof wj){const s=Oo.and(t,Oo.deserialize(e.keybindingContext));n.add(i.addDynamicKeybindings(e.keybindings.map((t=>({keybinding:t,command:e.id,when:s})))))}else console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService")}return n}function jK(e){return UK([e])}function UK(e){const t=$j.get(tk);return t instanceof wj?t.addDynamicKeybindings(e.map((e=>({keybinding:e.keybinding,command:e.command,commandArgs:e.commandArgs,when:Oo.deserialize(e.when)})))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Zt.None)}function qK(e,t,n){const i=$j.get(dd),s=i.getLanguageIdByMimeType(t)||t;return fK($j.get(ao),i,e,s,n)}function KK(e,t){const n=$j.get(dd),i=n.getLanguageIdByMimeType(t)||t||Pd;e.setLanguage(n.createById(i))}function GK(e,t,n){if(e){$j.get(DF).changeOne(t,e.uri,n)}}function YK(e){$j.get(DF).changeAll(e,[])}function QK(e){return $j.get(DF).read(e)}function XK(e){return $j.get(DF).onMarkerChanged(e)}function ZK(e){return $j.get(ao).getModel(e)}function JK(){return $j.get(ao).getModels()}function eG(e){return $j.get(ao).onModelAdded(e)}function tG(e){return $j.get(ao).onModelRemoved(e)}function nG(e){return $j.get(ao).onModelLanguageChanged((t=>{e({model:t.model,oldLanguage:t.oldLanguageId})}))}function iG(e){return function(e,t,n){return new Tp(e,t,n)}($j.get(ao),$j.get(qd),e)}function sG(e,t){const n=$j.get(dd),i=$j.get(SV);return Nm.colorizeElement(i,n,e,t).then((()=>{i.registerEditorContainer(e)}))}function rG(e,t,n){const i=$j.get(dd);return $j.get(SV).registerEditorContainer(Ms.document.body),Nm.colorize(i,e,t,n)}function oG(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return $j.get(SV).registerEditorContainer(Ms.document.body),Nm.colorizeModelLine(e,t,n)}function aG(e,t){Ui.getOrCreate(t);const n=function(e){const t=Ui.get(e);return t||{getInitialState:()=>Ip,tokenize:(t,n,i)=>$p(e,i)}}(t),i=qs(e),s=[];let r=n.getInitialState();for(let o=0,a=i.length;o<a;o++){const e=i[o],t=n.tokenize(e,!0,r);s[o]=t.tokens,r=t.endState}return s}function lG(e,t){$j.get(SV).defineTheme(e,t)}function cG(e){$j.get(SV).setTheme(e)}function uG(){no.clearAllFontInfos()}function hG(e,t){return vo.registerCommand({id:e,handler:t})}function dG(e){return $j.get(c$).registerOpener({open:async t=>("string"===typeof t&&(t=fi.parse(t)),e.open(t))})}function fG(e){return $j.get(oo).registerCodeEditorOpenHandler((async(t,n,i)=>{var s;if(!n)return null;const r=null===(s=t.options)||void 0===s?void 0:s.selection;let o;return r&&"number"===typeof r.endLineNumber&&"number"===typeof r.endColumn?o=r:r&&(o={lineNumber:r.startLineNumber,column:r.startColumn}),await e.openCodeEditor(n,t.resource,o)?n:null}))}function gG(e,t){return"boolean"===typeof e?e:t}function pG(e,t){return"string"===typeof e?e:t}function mG(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(e=e.map((function(e){return e.toLowerCase()})));const n=function(e){const t={};for(const n of e)t[n]=!0;return t}(e);return t?function(e){return void 0!==n[e.toLowerCase()]&&n.hasOwnProperty(e.toLowerCase())}:function(e){return void 0!==n[e]&&n.hasOwnProperty(e)}}function bG(e,t){t=t.replace(/@@/g,"\x01");let n,i=0;do{n=!1,t=t.replace(/@(\w+)/g,(function(i,s){n=!0;let r="";if("string"===typeof e[s])r=e[s];else{if(!(e[s]&&e[s]instanceof RegExp))throw void 0===e[s]?pm(e,"language definition does not contain attribute '"+s+"', used at: "+t):pm(e,"attribute reference '"+s+"' must be a string, used at: "+t);r=e[s].source}return hm(r)?"":"(?:"+r+")"})),i++}while(n&&i<5);t=t.replace(/\x01/g,"@");const s=(e.ignoreCase?"i":"")+(e.unicode?"u":"");return new RegExp(t,s)}function _G(e,t,n,i){let s=-1,r=n,o=n.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(s=parseInt(o[3]),o[2]&&(s+=100)),r=o[4]);let a,l="~",c=r;if(r&&0!==r.length?/^\w*$/.test(c)?l="==":(o=r.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(l=o[1],c=o[2])):(l="!=",c=""),"~"!==l&&"!~"!==l||!/^(\w|\|)*$/.test(c))if("@"===l||"!@"===l){const n=e[c];if(!n)throw pm(e,"the @ match target '"+c+"' is not defined, in rule: "+t);if(!function(e,t){if(!t)return!1;if(!Array.isArray(t))return!1;for(const n of t)if(!e(n))return!1;return!0}((function(e){return"string"===typeof e}),n))throw pm(e,"the @ match target '"+c+"' must be an array of strings, in rule: "+t);const i=mG(n,e.ignoreCase);a=function(e){return"@"===l?i(e):!i(e)}}else if("~"===l||"!~"===l)if(c.indexOf("$")<0){const t=bG(e,"^"+c+"$");a=function(e){return"~"===l?t.test(e):!t.test(e)}}else a=function(t,n,i,s){return bG(e,"^"+mm(e,c,n,i,s)+"$").test(t)};else if(c.indexOf("$")<0){const t=dm(e,c);a=function(e){return"=="===l?e===t:e!==t}}else{const t=dm(e,c);a=function(n,i,s,r,o){const a=mm(e,t,i,s,r);return"=="===l?n===a:n!==a}}else{const t=mG(c.split("|"),e.ignoreCase);a=function(e){return"~"===l?t(e):!t(e)}}return-1===s?{name:n,value:i,test:function(e,t,n,i){return a(e,e,t,n,i)}}:{name:n,value:i,test:function(e,t,n,i){const r=function(e,t,n,i){if(i<0)return e;if(i<t.length)return t[i];if(i>=100){i-=100;const e=n.split(".");if(e.unshift(n),i<e.length)return e[i]}return null}(e,t,n,s);return a(r||"",e,t,n,i)}}}function vG(e,t,n){if(n){if("string"===typeof n)return n;if(n.token||""===n.token){if("string"!==typeof n.token)throw pm(e,"a 'token' attribute must be of type string, in rule: "+t);{const i={token:n.token};if(n.token.indexOf("$")>=0&&(i.tokenSubst=!0),"string"===typeof n.bracket)if("@open"===n.bracket)i.bracket=1;else{if("@close"!==n.bracket)throw pm(e,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+t);i.bracket=-1}if(n.next){if("string"!==typeof n.next)throw pm(e,"the next state must be a string value in rule: "+t);{let s=n.next;if(!/^(@pop|@push|@popall)$/.test(s)&&("@"===s[0]&&(s=s.substr(1)),s.indexOf("$")<0&&!function(e,t){let n=t;for(;n&&n.length>0;){if(e.stateNames[n])return!0;const t=n.lastIndexOf(".");n=t<0?null:n.substr(0,t)}return!1}(e,mm(e,s,"",[],""))))throw pm(e,"the next state '"+n.next+"' is not defined in rule: "+t);i.next=s}}return"number"===typeof n.goBack&&(i.goBack=n.goBack),"string"===typeof n.switchTo&&(i.switchTo=n.switchTo),"string"===typeof n.log&&(i.log=n.log),"string"===typeof n.nextEmbedded&&(i.nextEmbedded=n.nextEmbedded,e.usesEmbedded=!0),i}}if(Array.isArray(n)){const i=[];for(let s=0,r=n.length;s<r;s++)i[s]=vG(e,t,n[s]);return{group:i}}if(n.cases){const i=[];for(const r in n.cases)if(n.cases.hasOwnProperty(r)){const s=vG(e,t,n.cases[r]);"@default"===r||"@"===r||""===r?i.push({test:void 0,value:s,name:r}):"@eos"===r?i.push({test:function(e,t,n,i){return i},value:s,name:r}):i.push(_G(e,t,r,s))}const s=e.defaultToken;return{test:function(e,t,n,r){for(const s of i){if(!s.test||s.test(e,t,n,r))return s.value}return s}}}throw pm(e,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+t)}return{token:""}}MK=IK([$K(2,so)],MK);class yG{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if("string"===typeof t)n=t;else{if(!(t instanceof RegExp))throw pm(e,"rules must start with a match string or regular expression: "+this.name);n=t.source}this.matchOnlyAtLineStart=n.length>0&&"^"===n[0],this.name=this.name+": "+n,this.regex=bG(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")")}setAction(e,t){this.action=vG(e,this.name,t)}}function SG(e,t){if(!t||"object"!==typeof t)throw new Error("Monarch: expecting a language definition object");const n={};n.languageId=e,n.includeLF=gG(t.includeLF,!1),n.noThrow=!1,n.maxStack=100,n.start="string"===typeof t.start?t.start:null,n.ignoreCase=gG(t.ignoreCase,!1),n.unicode=gG(t.unicode,!1),n.tokenPostfix=pG(t.tokenPostfix,"."+n.languageId),n.defaultToken=pG(t.defaultToken,"source"),n.usesEmbedded=!1;const i=t;function s(e,r,o){for(const a of o){let o=a.include;if(o){if("string"!==typeof o)throw pm(n,"an 'include' attribute must be a string at: "+e);if("@"===o[0]&&(o=o.substr(1)),!t.tokenizer[o])throw pm(n,"include target '"+o+"' is not defined at: "+e);s(e+"."+o,r,t.tokenizer[o])}else{const t=new yG(e);if(Array.isArray(a)&&a.length>=1&&a.length<=3)if(t.setRegex(i,a[0]),a.length>=3)if("string"===typeof a[1])t.setAction(i,{token:a[1],next:a[2]});else{if("object"!==typeof a[1])throw pm(n,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+e);{const e=a[1];e.next=a[2],t.setAction(i,e)}}else t.setAction(i,a[1]);else{if(!a.regex)throw pm(n,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+e);a.name&&"string"===typeof a.name&&(t.name=a.name),a.matchOnlyAtStart&&(t.matchOnlyAtLineStart=gG(a.matchOnlyAtLineStart,!1)),t.setRegex(i,a.regex),t.setAction(i,a.action)}r.push(t)}}}if(i.languageId=e,i.includeLF=n.includeLF,i.ignoreCase=n.ignoreCase,i.unicode=n.unicode,i.noThrow=n.noThrow,i.usesEmbedded=n.usesEmbedded,i.stateNames=t.tokenizer,i.defaultToken=n.defaultToken,!t.tokenizer||"object"!==typeof t.tokenizer)throw pm(n,"a language definition must define the 'tokenizer' attribute as an object");n.tokenizer=[];for(const o in t.tokenizer)if(t.tokenizer.hasOwnProperty(o)){n.start||(n.start=o);const e=t.tokenizer[o];n.tokenizer[o]=new Array,s("tokenizer."+o,n.tokenizer[o],e)}if(n.usesEmbedded=i.usesEmbedded,t.brackets){if(!Array.isArray(t.brackets))throw pm(n,"the 'brackets' attribute must be defined as an array")}else t.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const r=[];for(const o of t.brackets){let e=o;if(e&&Array.isArray(e)&&3===e.length&&(e={token:e[2],open:e[0],close:e[1]}),e.open===e.close)throw pm(n,"open and close brackets in a 'brackets' attribute must be different: "+e.open+"\n hint: use the 'bracket' attribute if matching on equal brackets is required.");if("string"!==typeof e.open||"string"!==typeof e.token||"string"!==typeof e.close)throw pm(n,"every element in the 'brackets' array must be a '{open,close,token}' object or array");r.push({token:e.token+n.tokenPostfix,open:dm(n,e.open),close:dm(n,e.close)})}return n.brackets=r,n.noThrow=!0,n}function wG(e){Od.registerLanguage(e)}function kG(){let e=[];return e=e.concat(Od.getLanguages()),e}function CG(e){return $j.get(dd).languageIdCodec.encodeLanguageId(e)}function xG(e,t){return $j.withServices((()=>{const n=$j.get(dd).onDidRequestRichLanguageFeatures((i=>{i===e&&(n.dispose(),t())}));return n}))}function EG(e,t){return $j.withServices((()=>{const n=$j.get(dd).onDidRequestBasicLanguageFeatures((i=>{i===e&&(n.dispose(),t())}));return n}))}function LG(e,t){if(!$j.get(dd).isRegisteredLanguageId(e))throw new Error("Cannot set configuration for unknown language ".concat(e));return $j.get(qd).register(e,t,100)}class DG{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n){if("function"===typeof this._actual.tokenize)return AG.adaptTokenize(this._languageId,this._actual,e,n);throw new Error("Not supported!")}tokenizeEncoded(e,t,n){const i=this._actual.tokenizeEncoded(e,n);return new Mi(i.tokens,i.endState)}}class AG{constructor(e,t,n,i){this._languageId=e,this._actual=t,this._languageService=n,this._standaloneThemeService=i}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const n=[];let i=0;for(let s=0,r=e.length;s<r;s++){const r=e[s];let o=r.startIndex;0===s?o=0:o<i&&(o=i),n[s]=new Ii(o,r.scopes,t),i=o}return n}static adaptTokenize(e,t,n,i){const s=t.tokenize(n,i),r=AG._toClassicTokens(s.tokens,e);let o;return o=s.endState.equals(i)?i:s.endState,new $i(r,o)}tokenize(e,t,n){return AG.adaptTokenize(this._languageId,this._actual,e,n)}_toBinaryTokens(e,t){const n=e.encodeLanguageId(this._languageId),i=this._standaloneThemeService.getColorTheme().tokenTheme,s=[];let r=0,o=0;for(let l=0,c=t.length;l<c;l++){const e=t[l],a=1024|i.match(n,e.scopes);if(r>0&&s[r-1]===a)continue;let c=e.startIndex;0===l?c=0:c<o&&(c=o),s[r++]=c,s[r++]=a,o=c}const a=new Uint32Array(r);for(let l=0;l<r;l++)a[l]=s[l];return a}tokenizeEncoded(e,t,n){const i=this._actual.tokenize(e,n),s=this._toBinaryTokens(this._languageService.languageIdCodec,i.tokens);let r;return r=i.endState.equals(n)?n:i.endState,new Mi(s,r)}}function TG(e){return e&&"function"===typeof e.then}function NG(e){const t=$j.get(SV);if(e){const n=[null];for(let t=1,i=e.length;t<i;t++)n[t]=rp.fromHex(e[t]);t.setColorMapOverride(n)}else t.setColorMapOverride(null)}function IG(e,t){return function(e){return"tokenizeEncoded"in e}(t)?new DG(e,t):new AG(e,t,$j.get(dd),$j.get(SV))}function $G(e,t){const n=new ji((async()=>{const n=await Promise.resolve(t.create());return n?"function"===typeof n.getInitialState?IG(e,n):new Dm($j.get(dd),$j.get(SV),e,SG(e,n),$j.get(od)):null}));return Ui.registerFactory(e,n)}function MG(e,t){if(!$j.get(dd).isRegisteredLanguageId(e))throw new Error("Cannot set tokens provider for unknown language ".concat(e));return TG(t)?$G(e,{create:()=>t}):Ui.register(e,IG(e,t))}function RG(e,t){return TG(t)?$G(e,{create:()=>t}):Ui.register(e,(t=>new Dm($j.get(dd),$j.get(SV),e,SG(e,t),$j.get(od)))(t))}function OG(e,t){return $j.get(_p).referenceProvider.register(e,t)}function PG(e,t){return $j.get(_p).renameProvider.register(e,t)}function FG(e,t){return $j.get(_p).signatureHelpProvider.register(e,t)}function BG(e,t){return $j.get(_p).hoverProvider.register(e,{provideHover:(e,n,i)=>{const s=e.getWordAtPosition(n);return Promise.resolve(t.provideHover(e,n,i)).then((e=>{if(e)return!e.range&&s&&(e.range=new xi(n.lineNumber,s.startColumn,n.lineNumber,s.endColumn)),e.range||(e.range=new xi(n.lineNumber,n.column,n.lineNumber,n.column)),e}))}})}function zG(e,t){return $j.get(_p).documentSymbolProvider.register(e,t)}function WG(e,t){return $j.get(_p).documentHighlightProvider.register(e,t)}function HG(e,t){return $j.get(_p).linkedEditingRangeProvider.register(e,t)}function VG(e,t){return $j.get(_p).definitionProvider.register(e,t)}function jG(e,t){return $j.get(_p).implementationProvider.register(e,t)}function UG(e,t){return $j.get(_p).typeDefinitionProvider.register(e,t)}function qG(e,t){return $j.get(_p).codeLensProvider.register(e,t)}function KG(e,t,n){return $j.get(_p).codeActionProvider.register(e,{providedCodeActionKinds:null===n||void 0===n?void 0:n.providedCodeActionKinds,documentation:null===n||void 0===n?void 0:n.documentation,provideCodeActions:(e,n,i,s)=>{const r=$j.get(DF).read({resource:e.uri}).filter((e=>xi.areIntersectingOrTouching(e,n)));return t.provideCodeActions(e,n,{markers:r,only:i.only,trigger:i.trigger},s)},resolveCodeAction:t.resolveCodeAction})}function GG(e,t){return $j.get(_p).documentFormattingEditProvider.register(e,t)}function YG(e,t){return $j.get(_p).documentRangeFormattingEditProvider.register(e,t)}function QG(e,t){return $j.get(_p).onTypeFormattingEditProvider.register(e,t)}function XG(e,t){return $j.get(_p).linkProvider.register(e,t)}function ZG(e,t){return $j.get(_p).completionProvider.register(e,t)}function JG(e,t){return $j.get(_p).colorProvider.register(e,t)}function eY(e,t){return $j.get(_p).foldingRangeProvider.register(e,t)}function tY(e,t){return $j.get(_p).declarationProvider.register(e,t)}function nY(e,t){return $j.get(_p).selectionRangeProvider.register(e,t)}function iY(e,t){return $j.get(_p).documentSemanticTokensProvider.register(e,t)}function sY(e,t){return $j.get(_p).documentRangeSemanticTokensProvider.register(e,t)}function rY(e,t){return $j.get(_p).inlineCompletionsProvider.register(e,t)}function oY(e,t){return $j.get(_p).inlayHintsProvider.register(e,t)}const aY=ro("IEditorCancelService"),lY=new na("cancellableOperation",!1,G("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));pd(aY,class{constructor(){this._tokens=new WeakMap}add(e,t){let n,i=this._tokens.get(e);return i||(i=e.invokeWithinContext((e=>({key:lY.bindTo(e.get(ia)),tokens:new Be}))),this._tokens.set(e,i)),i.key.set(!0),n=i.tokens.push(t),()=>{n&&(n(),i.key.set(!i.tokens.isEmpty()),n=void 0)}}cancel(e){const t=this._tokens.get(e);if(!t)return;const n=t.tokens.pop();n&&(n.cancel(),t.key.set(!t.tokens.isEmpty()))}},1);Zu(new class extends Xu{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:lY})}runEditorCommand(e,t){e.get(aY).cancel(t)}});class cY{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return"string"===typeof e?e.toLowerCase():e._lower}}class uY{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(cY.toKey(e))}has(e){return this._set.has(cY.toKey(e))}}function hY(e,t,n){const i=[],s=new uY,r=e.ordered(n);for(const a of r)i.push(a),a.extensionId&&s.add(a.extensionId);const o=t.ordered(n);for(const a of o){if(a.extensionId){if(s.has(a.extensionId))continue;s.add(a.extensionId)}i.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits:(e,t,n)=>a.provideDocumentRangeFormattingEdits(e,e.getFullModelRange(),t,n)})}return i}class dY{static setFormatterSelector(e){return{dispose:dY._selectors.unshift(e)}}static async select(e,t,n,i){if(0===e.length)return;const s=Pe.first(dY._selectors);return s?await s(e,t,n,i):void 0}}dY._selectors=new Be,vo.registerCommand("_executeFormatRangeProvider",(async function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const[s,r,o]=n;O(fi.isUri(s)),O(xi.isIRange(r));const a=e.get(lo),l=e.get(xF),c=e.get(_p),u=await a.createModelReference(s);try{return async function(e,t,n,i,s,r){const o=t.documentRangeFormattingEditProvider.ordered(n);for(const a of o){const t=await Promise.resolve(a.provideDocumentRangeFormattingEdits(n,i,s,r)).catch(It);if(d(t))return await e.computeMoreMinimalEdits(n.uri,t)}}(l,c,u.object.textEditorModel,xi.lift(r),o,vn.None)}finally{u.dispose()}})),vo.registerCommand("_executeFormatDocumentProvider",(async function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const[s,r]=n;O(fi.isUri(s));const o=e.get(lo),a=e.get(xF),l=e.get(_p),c=await o.createModelReference(s);try{return async function(e,t,n,i,s){const r=hY(t.documentFormattingEditProvider,t.documentRangeFormattingEditProvider,n);for(const o of r){const t=await Promise.resolve(o.provideDocumentFormattingEdits(n,i,s)).catch(It);if(d(t))return await e.computeMoreMinimalEdits(n.uri,t)}}(a,l,c.object.textEditorModel,r,vn.None)}finally{c.dispose()}})),vo.registerCommand("_executeFormatOnTypeProvider",(async function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const[s,r,o,a]=n;O(fi.isUri(s)),O(Ci.isIPosition(r)),O("string"===typeof o);const l=e.get(lo),c=e.get(xF),u=e.get(_p),h=await l.createModelReference(s);try{return function(e,t,n,i,s,r,o){const a=t.onTypeFormattingEditProvider.ordered(n);return 0===a.length||a[0].autoFormatTriggerCharacters.indexOf(s)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(n,i,s,r,o)).catch(It).then((t=>e.computeMoreMinimalEdits(n.uri,t)))}(c,u,h.object.textEditorModel,Ci.lift(r),o,a,vn.None)}finally{h.dispose()}})),At.wrappingIndent.defaultValue=0,At.glyphMargin.defaultValue=!1,At.autoIndent.defaultValue=3,At.overviewRulerLanes.defaultValue=2,dY.setFormatterSelector(((e,t,n)=>Promise.resolve(e[0])));const fY=$s();fY.editor={create:RK,getEditors:FK,getDiffEditors:BK,onDidCreateEditor:OK,onDidCreateDiffEditor:PK,createDiffEditor:zK,addCommand:HK,addEditorAction:VK,addKeybindingRule:jK,addKeybindingRules:UK,createModel:qK,setModelLanguage:KK,setModelMarkers:GK,getModelMarkers:QK,removeAllMarkers:YK,onDidChangeMarkers:XK,getModels:JK,getModel:ZK,onDidCreateModel:eG,onWillDisposeModel:tG,onDidChangeModelLanguage:nG,createWebWorker:iG,colorizeElement:sG,colorize:rG,colorizeModelLine:oG,tokenize:aG,defineTheme:lG,setTheme:cG,remeasureFonts:uG,registerCommand:hG,registerLinkOpener:dG,registerEditorOpener:fG,AccessibilitySupport:qi,ContentWidgetPositionPreference:Zi,CursorChangeReason:Ji,DefaultEndOfLine:es,EditorAutoIndentStrategy:ns,EditorOption:is,EndOfLinePreference:ss,EndOfLineSequence:rs,MinimapPosition:gs,MouseTargetType:ps,OverlayWidgetPositionPreference:ms,OverviewRulerLane:bs,GlyphMarginLane:os,RenderLineNumbersType:vs,RenderMinimap:ys,ScrollbarVisibility:ws,ScrollType:Ss,TextEditorCursorBlinkingStyle:Ds,TextEditorCursorStyle:As,TrackedRangeStickiness:Ts,WrappingIndent:Ns,InjectedTextCursorStops:ls,PositionAffinity:_s,ShowLightbulbIconMode:Cs,ConfigurationChangedEvent:qe,BareFontInfo:Jr,FontInfo:eo,TextModelResolvedOptions:Nf,FindMatch:If,ApplyUpdateResult:Ye,EditorZoom:Xr,createMultiFileDiffEditor:WK,EditorType:Np,EditorOptions:At},fY.languages={register:wG,getLanguages:kG,onLanguage:xG,onLanguageEncountered:EG,getEncodedLanguageId:CG,setLanguageConfiguration:LG,setColorMap:NG,registerTokensProviderFactory:$G,setTokensProvider:MG,setMonarchTokensProvider:RG,registerReferenceProvider:OG,registerRenameProvider:PG,registerCompletionItemProvider:ZG,registerSignatureHelpProvider:FG,registerHoverProvider:BG,registerDocumentSymbolProvider:zG,registerDocumentHighlightProvider:WG,registerLinkedEditingRangeProvider:HG,registerDefinitionProvider:VG,registerImplementationProvider:jG,registerTypeDefinitionProvider:UG,registerCodeLensProvider:qG,registerCodeActionProvider:KG,registerDocumentFormattingEditProvider:GG,registerDocumentRangeFormattingEditProvider:YG,registerOnTypeFormattingEditProvider:QG,registerLinkProvider:XG,registerColorProvider:JG,registerFoldingRangeProvider:eY,registerDeclarationProvider:tY,registerSelectionRangeProvider:nY,registerDocumentSemanticTokensProvider:iY,registerDocumentRangeSemanticTokensProvider:sY,registerInlineCompletionsProvider:rY,registerInlayHintsProvider:oY,DocumentHighlightKind:ts,CompletionItemKind:Yi,CompletionItemTag:Qi,CompletionItemInsertTextRule:Gi,SymbolKind:Es,SymbolTag:Ls,IndentAction:as,CompletionTriggerKind:Xi,SignatureHelpTriggerKind:xs,InlayHintKind:cs,InlineCompletionTriggerKind:us,CodeActionTriggerType:Ki,FoldingRangeKind:Vi,SelectedSuggestionInfo:Bi};const gY=fY.CancellationTokenSource,pY=fY.Emitter,mY=fY.KeyCode,bY=fY.KeyMod,_Y=fY.Position,vY=fY.Range,yY=fY.Selection,SY=fY.SelectionDirection,wY=fY.MarkerSeverity,kY=fY.MarkerTag,CY=fY.Uri,xY=fY.Token,EY=fY.editor,LY=fY.languages,DY=globalThis.MonacoEnvironment;function AY(e){return/^\d+$/.test(e)?"".concat(e,"px"):e}function TY(){}((null===DY||void 0===DY?void 0:DY.globalAPI)||"function"===typeof define&&n.amdO)&&(globalThis.monaco=fY),"undefined"!==typeof globalThis.require&&"function"===typeof globalThis.require.config&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});var NY=function(){return NY=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},NY.apply(this,arguments)};function IY(e){var t=e.width,n=e.height,s=e.value,o=e.defaultValue,a=e.language,l=e.theme,c=e.options,u=e.overrideServices,h=e.editorWillMount,d=e.editorDidMount,f=e.editorWillUnmount,g=e.onChange,p=e.className,m=e.original,b=e.originalUri,_=e.modifiedUri,v=(0,r.useRef)(null),y=(0,r.useRef)(null),S=(0,r.useRef)(null),w=(0,r.useRef)(null),k=AY(t),C=AY(n),x=(0,r.useMemo)((function(){return{width:k,height:C}}),[k,C]);return(0,r.useEffect)((function(){v.current&&(h(i),y.current=EY.createDiffEditor(v.current,NY(NY(NY({},p?{extraEditorClassName:p}:{}),c),l?{theme:l}:{}),u),function(){var e=null!=s?s:o,t=null===b||void 0===b?void 0:b(i),n=null===_||void 0===_?void 0:_(i),r=t&&EY.getModel(t),l=n&&EY.getModel(n);r?(r.setValue(m),EY.setModelLanguage(r,a)):r=EY.createModel(e,a,t),l?(r.setValue(e),EY.setModelLanguage(l,a)):l=EY.createModel(e,a,n),y.current.setModel({original:r,modified:l})}(),function(){d(y.current,i);var e=y.current.getModel().modified;S.current=e.onDidChangeContent((function(t){w.current||g(e.getValue(),t)}))}())}),[]),(0,r.useEffect)((function(){y.current&&y.current.updateOptions(NY(NY({},p?{extraEditorClassName:p}:{}),c))}),[p,c]),(0,r.useEffect)((function(){y.current&&y.current.layout()}),[t,n]),(0,r.useEffect)((function(){if(y.current){var e=y.current.getModel(),t=e.original,n=e.modified;EY.setModelLanguage(t,a),EY.setModelLanguage(n,a)}}),[a]),(0,r.useEffect)((function(){if(y.current){var e=y.current.getModel().modified;w.current=!0,y.current.getModifiedEditor().pushUndoStop(),e.pushEditOperations([],[{range:e.getFullModelRange(),text:s}]),y.current.getModifiedEditor().pushUndoStop(),w.current=!1}}),[s]),(0,r.useEffect)((function(){EY.setTheme(l)}),[l]),(0,r.useEffect)((function(){if(y.current){var e=y.current.getModel().original;m!==e.getValue()&&e.setValue(m)}}),[m]),(0,r.useEffect)((function(){return function(){if(y.current){f(y.current,i),y.current.dispose();var e=y.current.getModel(),t=e.original,n=e.modified;t&&t.dispose(),n&&n.dispose()}S.current&&S.current.dispose()}}),[]),r.createElement("div",{ref:v,style:x,className:"react-monaco-editor-container"})}IY.defaultProps={width:"100%",height:"100%",original:null,value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:TY,editorDidMount:TY,editorWillUnmount:TY,onChange:TY,className:null},IY.displayName="MonacoDiffEditor";var $Y=function(){return $Y=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},$Y.apply(this,arguments)},MY=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n};function RY(e){var t=e.width,n=e.height,s=e.value,o=e.defaultValue,a=e.language,l=e.theme,c=e.options,u=e.overrideServices,h=e.editorWillMount,d=e.editorDidMount,f=e.editorWillUnmount,g=e.onChange,p=e.className,m=e.uri,b=(0,r.useRef)(null),_=(0,r.useRef)(null),v=(0,r.useRef)(null),y=(0,r.useRef)(null),S=AY(t),w=AY(n),k=(0,r.useMemo)((function(){return{width:S,height:w}}),[S,w]);return(0,r.useEffect)((function(){var e=null!==s?s:o;if(b.current){var t=$Y($Y({},c),h(i)||{}),n=null===m||void 0===m?void 0:m(i),r=n&&EY.getModel(n);r?(r.setValue(e),EY.setModelLanguage(r,a)):r=EY.createModel(e,a,n),_.current=EY.create(b.current,$Y($Y($Y({model:r},p?{extraEditorClassName:p}:{}),t),l?{theme:l}:{}),u),d(_.current,i),v.current=_.current.onDidChangeModelContent((function(e){y.current||g(_.current.getValue(),e)}))}}),[]),(0,r.useEffect)((function(){if(_.current){if(s===_.current.getValue())return;var e=_.current.getModel();y.current=!0,_.current.pushUndoStop(),e.pushEditOperations([],[{range:e.getFullModelRange(),text:s}],void 0),_.current.pushUndoStop(),y.current=!1}}),[s]),(0,r.useEffect)((function(){if(_.current){var e=_.current.getModel();EY.setModelLanguage(e,a)}}),[a]),(0,r.useEffect)((function(){if(_.current){c.model;var e=MY(c,["model"]);_.current.updateOptions($Y($Y({},p?{extraEditorClassName:p}:{}),e))}}),[p,c]),(0,r.useEffect)((function(){_.current&&_.current.layout()}),[t,n]),(0,r.useEffect)((function(){EY.setTheme(l)}),[l]),(0,r.useEffect)((function(){return function(){_.current&&(f(_.current,i),_.current.dispose()),v.current&&v.current.dispose()}}),[]),r.createElement("div",{ref:b,style:k,className:"react-monaco-editor-container"})}RY.defaultProps={width:"100%",height:"100%",value:null,defaultValue:"",language:"javascript",theme:null,options:{},overrideServices:{},editorWillMount:TY,editorDidMount:TY,editorWillUnmount:TY,onChange:TY,className:null},RY.displayName="MonacoEditor";const OY=RY;var PY=n(579);const FY=e=>{let{id:t,question:n,input:i,outPut:s,code:r,output:o,onCodeChange:a,onRunCode:l,onBackClick:c,setOutput:u}=e;return(0,PY.jsx)(PY.Fragment,{children:(0,PY.jsxs)("div",{className:"js-ide-main",children:[(0,PY.jsx)("div",{className:"js-ide-input",children:(0,PY.jsx)(OY,{width:"100%",height:"400px",language:"javascript",theme:"hc-black",value:r,options:{selectOnLineNumbers:!0,fontSize:14,automaticLayout:!0,scrollbar:{alwaysConsumeMouseWheel:!1}},onChange:a})}),(0,PY.jsx)(BY,{props:{onRunCode:l,setOutput:u,output:o}})]})})};function BY(e){let{props:t}=e;const{onRunCode:n,setOutput:i,output:s}=t;return(0,PY.jsxs)("div",{className:"js-ide-output",children:[(0,PY.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid",padding:"0 0 5px 0"},children:[(0,PY.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"3px"},children:[(0,PY.jsx)("img",{style:{width:"30px",borderRadius:"5%"},src:"https://uxwing.com/wp-content/themes/uxwing/download/brands-and-social-media/javascript-programming-language-icon.png",alt:"js"}),(0,PY.jsx)("h4",{style:{marginTop:"8px"},children:"OUTPUT"})]}),(0,PY.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"5px"},children:[(0,PY.jsx)("button",{className:"btn btn-success w-10",onClick:n,children:"Run Code"}),(0,PY.jsx)("button",{className:"ide-output-top",onClick:()=>i((()=>"")),children:"clear"})]})]}),(0,PY.jsx)("div",{style:{overflow:"auto",height:"400px"},children:s&&(0,PY.jsx)("p",{className:"pre",children:s})})]})}},619:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(43),_utils_Questionlist__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(955),_IDEjavascript__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(49),react_router_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(216),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(579);function JSmain(){const token=localStorage.getItem("rg-ide-token"),navigate=(0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.Zp)();(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{token||navigate("/login")}),[token]);const[code,setCode]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),[output,setOutput]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),handleCodeChange=e=>{setCode(e)},handleRunCode=async()=>{try{const containsFunctionKeyword=/(\bfunction\b)/.test(code);let result,capturedLogs=[];const customLog=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];capturedLogs.push(t.map((e=>JSON.stringify(e))).join(" "))},originalConsoleLog=console.log;console.log=customLog;const asyncEval=async()=>(result=containsFunctionKeyword?await eval("".concat(code)):await eval("(async function() { ".concat(code," })()")),result);result=await asyncEval(),console.log=originalConsoleLog,capturedLogs&&capturedLogs.length>0?setOutput((()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("span",{children:[" ","=>"," Output : ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("b",{children:capturedLogs.join("\n")})," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("br",{}),"[AT : ",(new Date).toLocaleTimeString(),"]"]}))):setOutput("undefined"!==typeof result&&null!==result?"=> Output : ".concat(result," \n[AT : ").concat((new Date).toLocaleTimeString(),"]"):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("span",{style:{color:"orange"},children:"Code execution result is undefined or null. \n[AT : ".concat((new Date).toLocaleTimeString(),"]")}))}catch(error){setOutput((()=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("span",{style:{color:"red"},children:["Error: ",error.message,"m"]})))}},handleBackClick=()=>{setCode(""),setOutput("")};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.Fragment,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_IDEjavascript__WEBPACK_IMPORTED_MODULE_2__.Ay,{setOutput:setOutput,code:code,output:output,onCodeChange:handleCodeChange,onRunCode:handleRunCode,onBackClick:handleBackClick})})}const __WEBPACK_DEFAULT_EXPORT__=JSmain},955:(e,t,n)=>{"use strict";n(43),n(579)},387:(e,t,n)=>{"use strict";function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(this,arguments)}var s;n.d(t,{Gh:()=>$,HS:()=>M,Oi:()=>a,Rr:()=>d,pX:()=>B,pb:()=>A,rc:()=>s,tH:()=>F,ue:()=>p,yD:()=>I,zR:()=>o}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));const r="popstate";function o(e){return void 0===e&&(e={}),f((function(e,t){let{pathname:n,search:i,hash:s}=e.location;return u("",{pathname:n,search:i,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:h(t)}),null,e)}function a(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,s){return void 0===n&&(n=null),i({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?d(t):t,{state:n,key:t&&t.key||s||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function f(e,t,n,o){void 0===o&&(o={});let{window:l=document.defaultView,v5Compat:d=!1}=o,f=l.history,g=s.Pop,p=null,m=b();function b(){return(f.state||{idx:null}).idx}function _(){g=s.Pop;let e=b(),t=null==e?null:e-m;m=e,p&&p({action:g,location:y.location,delta:t})}function v(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),a(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,f.replaceState(i({},f.state,{idx:m}),""));let y={get action(){return g},get location(){return e(l,f)},listen(e){if(p)throw new Error("A history only accepts one active listener");return l.addEventListener(r,_),p=e,()=>{l.removeEventListener(r,_),p=null}},createHref:e=>t(l,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){g=s.Push;let i=u(y.location,e,t);n&&n(i,e),m=b()+1;let r=c(i,m),o=y.createHref(i);try{f.pushState(r,"",o)}catch(a){if(a instanceof DOMException&&"DataCloneError"===a.name)throw a;l.location.assign(o)}d&&p&&p({action:g,location:y.location,delta:1})},replace:function(e,t){g=s.Replace;let i=u(y.location,e,t);n&&n(i,e),m=b();let r=c(i,m),o=y.createHref(i);f.replaceState(r,"",o),d&&p&&p({action:g,location:y.location,delta:0})},go:e=>f.go(e)};return y}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function p(e,t,n){void 0===n&&(n="/");let i=A(("string"===typeof t?d(t):t).pathname||"/",n);if(null==i)return null;let s=m(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let r=null;for(let o=0;null==r&&o<s.length;++o){let e=D(i);r=E(s[o],e)}return r}function m(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");let s=(e,s,r)=>{let o={relativePath:void 0===r?e.path||"":r,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};o.relativePath.startsWith("/")&&(a(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(i.length));let l=M([i,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(a(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),m(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:x(l,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let i of b(e.path))s(e,t,i);else s(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,s=n.endsWith("?"),r=n.replace(/\?$/,"");if(0===i.length)return s?[r,""]:[r];let o=b(i.join("/")),a=[];return a.push(...o.map((e=>""===e?r:[r,e].join("/")))),s&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:[\w-]+$/,v=3,y=2,S=1,w=10,k=-2,C=e=>"*"===e;function x(e,t){let n=e.split("/"),i=n.length;return n.some(C)&&(i+=k),t&&(i+=y),n.filter((e=>!C(e))).reduce(((e,t)=>e+(_.test(t)?v:""===t?S:w)),i)}function E(e,t){let{routesMeta:n}=e,i={},s="/",r=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===s?t:t.slice(s.length)||"/",c=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(i,c.params);let u=e.route;r.push({params:i,pathname:M([s,c.pathname]),pathnameBase:R(M([s,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(s=M([s,c.pathnameBase]))}return r}function L(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(i.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let r=new RegExp(s,t?void 0:"i");return[r,i]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce(((e,t,n)=>{let{paramName:i,isOptional:s}=t;if("*"===i){let e=a[n]||"";o=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[i]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:r,pathnameBase:o,pattern:e}}function D(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function A(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function T(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function N(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function I(e,t){let n=N(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function $(e,t,n,s){let r;void 0===s&&(s=!1),"string"===typeof e?r=d(e):(r=i({},e),a(!r.pathname||!r.pathname.includes("?"),T("?","pathname","search",r)),a(!r.pathname||!r.pathname.includes("#"),T("#","pathname","hash",r)),a(!r.search||!r.search.includes("#"),T("#","search","hash",r)));let o,l=""===e||""===r.pathname,c=l?"/":r.pathname;if(null==c)o=n;else{let e=t.length-1;if(!s&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:s=""}="string"===typeof e?d(e):e,r=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:r,search:O(i),hash:P(s)}}(r,o),h=c&&"/"!==c&&c.endsWith("/"),f=(l||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!f||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),R=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),O=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",P=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class F extends Error{}function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const z=["post","put","patch","delete"],W=(new Set(z),["get",...z]);new Set(W),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred")},603:(e,t,n)=>{e=n.nmd(e),function(){var e=function(){return this}();e||"undefined"==typeof window||(e=window);var t=function(e,n,i){"string"===typeof e?(2==arguments.length&&(i=n),t.modules[e]||(t.payloads[e]=i,t.modules[e]=null)):t.original?t.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace())};t.modules={},t.payloads={};var n=function(e,t,n){if("string"===typeof t){var s=r(e,t);if(void 0!=s)return n&&n(),s}else if("[object Array]"===Object.prototype.toString.call(t)){for(var o=[],a=0,l=t.length;a<l;++a){var c=r(e,t[a]);if(void 0==c&&i.original)return;o.push(c)}return n&&n.apply(null,o)||!0}},i=function(e,t){var s=n("",e,t);return void 0==s&&i.original?i.original.apply(this,arguments):s},s=function(e,t){if(-1!==t.indexOf("!")){var n=t.split("!");return s(e,n[0])+"!"+s(e,n[1])}if("."==t.charAt(0))for(t=e.split("/").slice(0,-1).join("/")+"/"+t;-1!==t.indexOf(".")&&i!=t;){var i=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}return t},r=function(e,i){i=s(e,i);var r=t.modules[i];if(!r){if("function"===typeof(r=t.payloads[i])){var o={},a={id:i,uri:"",exports:o,packaged:!0};o=r((function(e,t){return n(i,e,t)}),o,a)||a.exports,t.modules[i]=o,delete t.payloads[i]}r=t.modules[i]=o||r}return r};!function(n){var s=e;n&&(e[n]||(e[n]={}),s=e[n]),s.define&&s.define.packaged||(t.original=s.define,s.define=t,s.define.packaged=!0),s.require&&s.require.packaged||(i.original=s.require,s.require=i,s.require.packaged=!0)}("ace")}(),ace.define("ace/lib/es6-shim",["require","exports","module"],(function(e,t,n){function i(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||i(String.prototype,"startsWith",(function(e,t){return t=t||0,this.lastIndexOf(e,t)===t})),String.prototype.endsWith||i(String.prototype,"endsWith",(function(e,t){var n=this;(void 0===t||t>n.length)&&(t=n.length),t-=e.length;var i=n.indexOf(e,t);return-1!==i&&i===t})),String.prototype.repeat||i(String.prototype,"repeat",(function(e){for(var t="",n=this;e>0;)1&e&&(t+=n),(e>>=1)&&(n+=n);return t})),String.prototype.includes||i(String.prototype,"includes",(function(e,t){return-1!=this.indexOf(e,t)})),Object.assign||(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];void 0!==i&&null!==i&&Object.keys(i).forEach((function(e){t[e]=i[e]}))}return t}),Object.values||(Object.values=function(e){return Object.keys(e).map((function(t){return e[t]}))}),Array.prototype.find||i(Array.prototype,"find",(function(e){for(var t=this.length,n=arguments[1],i=0;i<t;i++){var s=this[i];if(e.call(n,s,i,this))return s}})),Array.prototype.findIndex||i(Array.prototype,"findIndex",(function(e){for(var t=this.length,n=arguments[1],i=0;i<t;i++){var s=this[i];if(e.call(n,s,i,this))return i}})),Array.prototype.includes||i(Array.prototype,"includes",(function(e,t){return-1!=this.indexOf(e,t)})),Array.prototype.fill||i(Array.prototype,"fill",(function(e){for(var t=this,n=t.length>>>0,i=arguments[1]>>0,s=i<0?Math.max(n+i,0):Math.min(i,n),r=arguments[2],o=void 0===r?n:r>>0,a=o<0?Math.max(n+o,0):Math.min(o,n);s<a;)t[s]=e,s++;return t})),Array.of||i(Array,"of",(function(){return Array.prototype.slice.call(arguments)}))})),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],(function(e,t,n){"use strict";e("./es6-shim")})),ace.define("ace/lib/deep_copy",["require","exports","module"],(function(e,t,n){t.deepCopy=function e(t){if("object"!==typeof t||!t)return t;var n;if(Array.isArray(t)){n=[];for(var i=0;i<t.length;i++)n[i]=e(t[i]);return n}if("[object Object]"!==Object.prototype.toString.call(t))return t;for(var i in n={},t)n[i]=e(t[i]);return n}})),ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],(function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var n="";t>0;)1&t&&(n+=e),(t>>=1)&&(e+=e);return n};var i=/^\s\s*/,s=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(i,"")},t.stringTrimRight=function(e){return e.replace(s,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){for(var t=[],n=0,i=e.length;n<i;n++)e[n]&&"object"==typeof e[n]?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=e("./deep_copy").deepCopy,t.arrayToMap=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return(""+e).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,(function(e){n.push({offset:arguments[arguments.length-2],length:e.length})})),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},i=function(e){return i.cancel(),t=setTimeout(n,e||0),i};return i.schedule=i,i.call=function(){return this.cancel(),e(),i},i.cancel=function(){return clearTimeout(t),t=null,i},i.isPending=function(){return t},i},t.delayedCall=function(e,t){var n=null,i=function(){n=null,e()},s=function(e){null==n&&(n=setTimeout(i,e||t))};return s.delay=function(e){n&&clearTimeout(n),n=setTimeout(i,e||t)},s.schedule=s,s.call=function(){this.cancel(),e()},s.cancel=function(){n&&clearTimeout(n),n=null},s.isPending=function(){return n},s},t.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch(e){return!1}return!0},t.skipEmptyMatch=function(e,t,n){return n&&e.codePointAt(t)>65535?2:1}})),ace.define("ace/lib/useragent",["require","exports","module"],(function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var i="object"==typeof navigator?navigator:{},s=(/mac|win|linux/i.exec(i.platform)||["other"])[0].toLowerCase(),r=i.userAgent||"",o=i.appName||"";t.isWin="win"==s,t.isMac="mac"==s,t.isLinux="linux"==s,t.isIE="Microsoft Internet Explorer"==o||o.indexOf("MSAppHost")>=0?parseFloat((r.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((r.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=r.match(/ Gecko\/\d+/),t.isOpera="object"==typeof opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(r.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(r.split(" Chrome/")[1])||void 0,t.isSafari=parseFloat(r.split(" Safari/")[1])&&!t.isChrome||void 0,t.isEdge=parseFloat(r.split(" Edge/")[1])||void 0,t.isAIR=r.indexOf("AdobeAIR")>=0,t.isAndroid=r.indexOf("Android")>=0,t.isChromeOS=r.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(r)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid})),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],(function(e,t,n){"use strict";var i,s=e("./useragent");t.buildDom=function e(t,n,i){if("string"==typeof t&&t){var s=document.createTextNode(t);return n&&n.appendChild(s),s}if(!Array.isArray(t))return t&&t.appendChild&&n&&n.appendChild(t),t;if("string"!=typeof t[0]||!t[0]){for(var r=[],o=0;o<t.length;o++){var a=e(t[o],n,i);a&&r.push(a)}return r}var l=document.createElement(t[0]),c=t[1],u=1;c&&"object"==typeof c&&!Array.isArray(c)&&(u=2);for(o=u;o<t.length;o++)e(t[o],l,i);return 2==u&&Object.keys(c).forEach((function(e){var t=c[e];"class"===e?l.className=Array.isArray(t)?t.join(" "):t:"function"==typeof t||"value"==e||"$"==e[0]?l[e]=t:"ref"===e?i&&(i[t]=l):"style"===e?"string"==typeof t&&(l.style.cssText=t):null!=t&&l.setAttribute(e,t)})),n&&n.appendChild(l),l},t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||"http://www.w3.org/1999/xhtml",e):document.createElement(e)},t.removeChildren=function(e){e.innerHTML=""},t.createTextNode=function(e,t){return(t?t.ownerDocument:document).createTextNode(e)},t.createFragment=function(e){return(e?e.ownerDocument:document).createDocumentFragment()},t.hasCssClass=function(e,t){return-1!==(e.className+"").split(/\s+/g).indexOf(t)},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){for(var n=e.className.split(/\s+/g);;){var i=n.indexOf(t);if(-1==i)break;n.splice(i,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){for(var n=e.className.split(/\s+/g),i=!0;;){var s=n.indexOf(t);if(-1==s)break;i=!1,n.splice(s,1)}return i&&n.push(t),e.className=n.join(" "),i},t.setCssClass=function(e,n,i){i?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n,i=0;if(n=(t=t||document).querySelectorAll("style"))for(;i<n.length;)if(n[i++].id===e)return!0},t.removeElementById=function(e,t){(t=t||document).getElementById(e)&&t.getElementById(e).remove()};var r=[];function o(){var e=r;r=null,e&&e.forEach((function(e){a(e[0],e[1])}))}function a(e,n,s){if("undefined"!=typeof document){if(r)if(s)o();else if(!1===s)return r.push([e,n]);if(!i){var a=s;s&&s.getRootNode&&(a=s.getRootNode())&&a!=s||(a=document);var l=a.ownerDocument||a;if(n&&t.hasCssString(n,a))return null;n&&(e+="\n/*# sourceURL=ace/css/"+n+" */");var c=t.createElement("style");c.appendChild(l.createTextNode(e)),n&&(c.id=n),a==l&&(a=t.getDocumentHead(l)),a.insertBefore(c,a.firstChild)}}}if(t.useStrictCSP=function(e){i=e,0==e?o():r||(r=[])},t.importCssString=a,t.importCssStylsheet=function(e,n){t.buildDom(["link",{rel:"stylesheet",href:e}],t.getDocumentHead(n))},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var i=t.createElement("ace_outer"),s=i.style;s.position="absolute",s.left="-10000px",s.overflow="hidden",s.width="200px",s.minWidth="0px",s.height="150px",s.display="block",i.appendChild(n);var r=e&&e.documentElement||document&&document.documentElement;if(!r)return 0;r.appendChild(i);var o=n.offsetWidth;s.overflow="scroll";var a=n.offsetWidth;return o===a&&(a=i.clientWidth),r.removeChild(i),o-a},t.computedStyle=function(e,t){return window.getComputedStyle(e,"")||{}},t.setStyle=function(e,t,n){e[t]!==n&&(e[t]=n)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=!s.isWin||"undefined"!==typeof window&&window.devicePixelRatio>=1.5,s.isChromeOS&&(t.HI_DPI=!1),"undefined"!==typeof document){var l=document.createElement("div");t.HI_DPI&&void 0!==l.style.transform&&(t.HAS_CSS_TRANSFORMS=!0),s.isEdge||"undefined"===typeof l.style.animationName||(t.HAS_CSS_ANIMATION=!0),l=null}t.HAS_CSS_TRANSFORMS?t.translate=function(e,t,n){e.style.transform="translate("+Math.round(t)+"px, "+Math.round(n)+"px)"}:t.translate=function(e,t,n){e.style.top=Math.round(n)+"px",e.style.left=Math.round(t)+"px"}})),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("./dom");t.get=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){4===n.readyState&&t(n.responseText)},n.send(null)},t.loadScript=function(e,t){var n=i.getDocumentHead(),s=document.createElement("script");s.src=e,n.appendChild(s),s.onload=s.onreadystatechange=function(e,n){!n&&s.readyState&&"loaded"!=s.readyState&&"complete"!=s.readyState||(s=s.onload=s.onreadystatechange=null,n||t())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}})),ace.define("ace/lib/oop",["require","exports","module"],(function(e,t,n){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}})),ace.define("ace/lib/event_emitter",["require","exports","module"],(function(e,t,n){"use strict";var i={},s=function(){this.propagationStopped=!0},r=function(){this.defaultPrevented=!0};i._emit=i._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],i=this._defaultHandlers[e];if(n.length||i){"object"==typeof t&&t||(t={}),t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=s),t.preventDefault||(t.preventDefault=r),n=n.slice();for(var o=0;o<n.length&&(n[o](t,this),!t.propagationStopped);o++);return i&&!t.defaultPrevented?i(t,this):void 0}},i._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(n){n=n.slice();for(var i=0;i<n.length;i++)n[i](t,this)}},i.once=function(e,t){var n=this;if(this.on(e,(function i(){n.off(e,i),t.apply(null,arguments)})),!t)return new Promise((function(e){t=e}))},i.setDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n||(n=this._defaultHandlers={_disabled_:{}}),n[e]){var i=n[e],s=n._disabled_[e];s||(n._disabled_[e]=s=[]),s.push(i);var r=s.indexOf(t);-1!=r&&s.splice(r,1)}n[e]=t},i.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(n){var i=n._disabled_[e];if(n[e]==t)i&&this.setDefaultHandler(e,i.pop());else if(i){var s=i.indexOf(t);-1!=s&&i.splice(s,1)}}},i.on=i.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[e];return i||(i=this._eventRegistry[e]=[]),-1==i.indexOf(t)&&i[n?"unshift":"push"](t),t},i.off=i.removeListener=i.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}},i.removeAllListeners=function(e){e||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[e]=void 0),this._defaultHandlers&&(this._defaultHandlers[e]=void 0)},t.EventEmitter=i})),ace.define("ace/lib/report_error",["require","exports","module"],(function(e,t,n){t.reportError=function(e,t){var n=new Error(e);n.data=t,"object"==typeof console&&console.error&&console.error(n),setTimeout((function(){throw n}))}})),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error"],(function(e,t,n){var i,s=e("./oop"),r=e("./event_emitter").EventEmitter,o=e("./report_error").reportError,a={setOptions:function(e){Object.keys(e).forEach((function(t){this.setOption(t,e[t])}),this)},getOptions:function(e){var t={};if(e)Array.isArray(e)||(t=e,e=Object.keys(t));else{var n=this.$options;e=Object.keys(n).filter((function(e){return!n[e].hidden}))}return e.forEach((function(e){t[e]=this.getOption(e)}),this),t},setOption:function(e,t){if(this["$"+e]!==t){var n=this.$options[e];if(!n)return l('misspelled option "'+e+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,t);n.handlesSet||(this["$"+e]=t),n&&n.set&&n.set.call(this,t)}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:l('misspelled option "'+e+'"')}};function l(e){"undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments)}var c=function(){function e(){this.$defaultOptions={}}return e.prototype.defineOptions=function(e,t,n){return e.$options||(this.$defaultOptions[t]=e.$options={}),Object.keys(n).forEach((function(t){var i=n[t];"string"==typeof i&&(i={forwardTo:i}),i.name||(i.name=t),e.$options[i.name]=i,"initialValue"in i&&(e["$"+i.name]=i.initialValue)})),s.implement(e,a),this},e.prototype.resetOptions=function(e){Object.keys(e.$options).forEach((function(t){var n=e.$options[t];"value"in n&&e.setOption(t,n.value)}))},e.prototype.setDefaultValue=function(e,t,n){if(!e){for(e in this.$defaultOptions)if(this.$defaultOptions[e][t])break;if(!this.$defaultOptions[e][t])return!1}var i=this.$defaultOptions[e]||(this.$defaultOptions[e]={});i[t]&&(i.forwardTo?this.setDefaultValue(i.forwardTo,t,n):i[t].value=n)},e.prototype.setDefaultValues=function(e,t){Object.keys(t).forEach((function(n){this.setDefaultValue(e,n,t[n])}),this)},e.prototype.setMessages=function(e){i=e},e.prototype.nls=function(e,t){i&&!i[e]&&l("No message found for '"+e+"' in the provided messages, falling back to default English message.");var n=i&&i[e]||e;return t&&(n=n.replace(/\$(\$|[\d]+)/g,(function(e,n){return"$"==n?"$":t[n]}))),n},e}();c.prototype.warn=l,c.prototype.reportError=o,s.implement(c.prototype,r),t.AppConfig=c})),ace.define("ace/theme/textmate-css",["require","exports","module"],(function(e,t,n){n.exports='.ace-tm .ace_gutter {\n  background: #f0f0f0;\n  color: #333;\n}\n\n.ace-tm .ace_print-margin {\n  width: 1px;\n  background: #e8e8e8;\n}\n\n.ace-tm .ace_fold {\n    background-color: #6B72E6;\n}\n\n.ace-tm {\n  background-color: #FFFFFF;\n  color: black;\n}\n\n.ace-tm .ace_cursor {\n  color: black;\n}\n        \n.ace-tm .ace_invisible {\n  color: rgb(191, 191, 191);\n}\n\n.ace-tm .ace_storage,\n.ace-tm .ace_keyword {\n  color: blue;\n}\n\n.ace-tm .ace_constant {\n  color: rgb(197, 6, 11);\n}\n\n.ace-tm .ace_constant.ace_buildin {\n  color: rgb(88, 72, 246);\n}\n\n.ace-tm .ace_constant.ace_language {\n  color: rgb(88, 92, 246);\n}\n\n.ace-tm .ace_constant.ace_library {\n  color: rgb(6, 150, 14);\n}\n\n.ace-tm .ace_invalid {\n  background-color: rgba(255, 0, 0, 0.1);\n  color: red;\n}\n\n.ace-tm .ace_support.ace_function {\n  color: rgb(60, 76, 114);\n}\n\n.ace-tm .ace_support.ace_constant {\n  color: rgb(6, 150, 14);\n}\n\n.ace-tm .ace_support.ace_type,\n.ace-tm .ace_support.ace_class {\n  color: rgb(109, 121, 222);\n}\n\n.ace-tm .ace_keyword.ace_operator {\n  color: rgb(104, 118, 135);\n}\n\n.ace-tm .ace_string {\n  color: rgb(3, 106, 7);\n}\n\n.ace-tm .ace_comment {\n  color: rgb(76, 136, 107);\n}\n\n.ace-tm .ace_comment.ace_doc {\n  color: rgb(0, 102, 255);\n}\n\n.ace-tm .ace_comment.ace_doc.ace_tag {\n  color: rgb(128, 159, 191);\n}\n\n.ace-tm .ace_constant.ace_numeric {\n  color: rgb(0, 0, 205);\n}\n\n.ace-tm .ace_variable {\n  color: rgb(49, 132, 149);\n}\n\n.ace-tm .ace_xml-pe {\n  color: rgb(104, 104, 91);\n}\n\n.ace-tm .ace_entity.ace_name.ace_function {\n  color: #0000A2;\n}\n\n\n.ace-tm .ace_heading {\n  color: rgb(12, 7, 255);\n}\n\n.ace-tm .ace_list {\n  color:rgb(185, 6, 144);\n}\n\n.ace-tm .ace_meta.ace_tag {\n  color:rgb(0, 22, 142);\n}\n\n.ace-tm .ace_string.ace_regex {\n  color: rgb(255, 0, 0)\n}\n\n.ace-tm .ace_marker-layer .ace_selection {\n  background: rgb(181, 213, 255);\n}\n.ace-tm.ace_multiselect .ace_selection.ace_start {\n  box-shadow: 0 0 3px 0px white;\n}\n.ace-tm .ace_marker-layer .ace_step {\n  background: rgb(252, 255, 0);\n}\n\n.ace-tm .ace_marker-layer .ace_stack {\n  background: rgb(164, 229, 101);\n}\n\n.ace-tm .ace_marker-layer .ace_bracket {\n  margin: -1px 0 0 -1px;\n  border: 1px solid rgb(192, 192, 192);\n}\n\n.ace-tm .ace_marker-layer .ace_active-line {\n  background: rgba(0, 0, 0, 0.07);\n}\n\n.ace-tm .ace_gutter-active-line {\n    background-color : #dcdcdc;\n}\n\n.ace-tm .ace_marker-layer .ace_selected-word {\n  background: rgb(250, 250, 255);\n  border: 1px solid rgb(200, 200, 250);\n}\n\n.ace-tm .ace_indent-guide {\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;\n}\n\n.ace-tm .ace_indent-guide-active {\n  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;\n}\n'})),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],(function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate-css"),t.$id="ace/theme/textmate",e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)})),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],(function(e,t,n){var i=e("./lib/lang"),s=e("./lib/net"),r=e("./lib/dom"),o=e("./lib/app_config").AppConfig;n.exports=t=new o;var a={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(e){if(!a.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return a[e]},t.set=function(e,t){if(a.hasOwnProperty(e))a[e]=t;else if(0==this.setDefaultValue("",e,t))throw new Error("Unknown config key: "+e);"useStrictCSP"==e&&r.useStrictCSP(t)},t.all=function(){return i.copyObject(a)},t.$modes={},t.moduleUrl=function(e,t){if(a.$moduleUrls[e])return a.$moduleUrls[e];var n=e.split("/"),i="snippets"==(t=t||n[n.length-2]||"")?"/":"-",s=n[n.length-1];if("worker"==t&&"-"==i){var r=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");s=s.replace(r,"")}(!s||s==t)&&n.length>1&&(s=n[n.length-2]);var o=a[t+"Path"];return null==o?o=a.basePath:"/"==i&&(t=i=""),o&&"/"!=o.slice(-1)&&(o+="/"),o+t+i+s+this.get("suffix")},t.setModuleUrl=function(e,t){return a.$moduleUrls[e]=t};var l;t.setLoader=function(e){l=e},t.dynamicModules=Object.create(null),t.$loading={},t.$loaded={},t.loadModule=function(n,i){var r;if(Array.isArray(n))var o=n[0],a=n[1];else if("string"==typeof n)a=n;var u=function(n){if(n&&!t.$loading[a])return i&&i(n);if(t.$loading[a]||(t.$loading[a]=[]),t.$loading[a].push(i),!(t.$loading[a].length>1)){var r=function(){!function(t,n){"ace/theme/textmate"===t||"./theme/textmate"===t?n(null,e("./theme/textmate")):l?l(t,n):console.error("loader is not configured")}(a,(function(e,n){n&&(t.$loaded[a]=n),t._emit("load.module",{name:a,module:n});var i=t.$loading[a];t.$loading[a]=null,i.forEach((function(e){e&&e(n)}))}))};if(!t.get("packaged"))return r();s.loadScript(t.moduleUrl(a,o),r),c()}};if(t.dynamicModules[a])t.dynamicModules[a]().then((function(e){e.default?u(e.default):u(e)}));else{try{r=this.$require(a)}catch(h){}u(r||t.$loaded[a])}},t.$require=function(e){if("function"==typeof n.require){return n.require(e)}},t.setModuleLoader=function(e,n){t.dynamicModules[e]=n};var c=function(){a.basePath||a.workerPath||a.modePath||a.themePath||Object.keys(a.$moduleUrls).length||(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),c=function(){})};t.version="1.32.6"})),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],(function(e,t,i){"use strict";e("./lib/fixoldbrowsers");var s=e("./config");s.setLoader((function(t,n){e([t],(function(e){n(null,e)}))}));var r=function(){return this||"undefined"!=typeof window&&window}();function o(t){if(r&&r.document){s.set("packaged",t||e.packaged||i.packaged||r.define&&n.amdD.packaged);var o={},a="",l=document.currentScript||document._currentScript,c=l&&l.ownerDocument||document;l&&l.src&&(a=l.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var u,h=c.getElementsByTagName("script"),d=0;d<h.length;d++){var f=h[d],g=f.src||f.getAttribute("src");if(g){for(var p=f.attributes,m=0,b=p.length;m<b;m++){var _=p[m];0===_.name.indexOf("data-ace-")&&(o[(u=_.name.replace(/^data-ace-/,""),u.replace(/-(.)/g,(function(e,t){return t.toUpperCase()})))]=_.value)}var v=g.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);v&&(a=v[1])}}for(var y in a&&(o.base=o.base||a,o.packaged=!0),o.basePath=o.base,o.workerPath=o.workerPath||o.base,o.modePath=o.modePath||o.base,o.themePath=o.themePath||o.base,delete o.base,o)"undefined"!==typeof o[y]&&s.set(y,o[y])}}i.exports=function(t){s.init=o,s.$require=e,t.require=e,t.define=n.amdD},o(!0)})),ace.define("ace/range",["require","exports","module"],(function(e,t,n){"use strict";var i=function(){function e(e,t,n,i){this.start={row:e,column:t},this.end={row:n,column:i}}return e.prototype.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},e.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},e.prototype.contains=function(e,t){return 0==this.compare(e,t)},e.prototype.compareRange=function(e){var t,n=e.end,i=e.start;return 1==(t=this.compare(n.row,n.column))?1==(t=this.compare(i.row,i.column))?2:0==t?1:0:-1==t?-2:-1==(t=this.compare(i.row,i.column))?-1:1==t?42:0},e.prototype.comparePoint=function(e){return this.compare(e.row,e.column)},e.prototype.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},e.prototype.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},e.prototype.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},e.prototype.isStart=function(e,t){return this.start.row==e&&this.start.column==t},e.prototype.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},e.prototype.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},e.prototype.inside=function(e,t){return 0==this.compare(e,t)&&(!this.isEnd(e,t)&&!this.isStart(e,t))},e.prototype.insideStart=function(e,t){return 0==this.compare(e,t)&&!this.isEnd(e,t)},e.prototype.insideEnd=function(e,t){return 0==this.compare(e,t)&&!this.isStart(e,t)},e.prototype.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},e.prototype.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},e.prototype.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},e.prototype.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},e.prototype.clipRows=function(t,n){if(this.end.row>n)var i={row:n+1,column:0};else if(this.end.row<t)i={row:t,column:0};if(this.start.row>n)var s={row:n+1,column:0};else if(this.start.row<t)s={row:t,column:0};return e.fromPoints(s||this.start,i||this.end)},e.prototype.extend=function(t,n){var i=this.compare(t,n);if(0==i)return this;if(-1==i)var s={row:t,column:n};else var r={row:t,column:n};return e.fromPoints(s||this.start,r||this.end)},e.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},e.prototype.isMultiLine=function(){return this.start.row!==this.end.row},e.prototype.clone=function(){return e.fromPoints(this.start,this.end)},e.prototype.collapseRows=function(){return 0==this.end.column?new e(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new e(this.start.row,0,this.end.row,0)},e.prototype.toScreenRange=function(t){var n=t.documentToScreenPosition(this.start),i=t.documentToScreenPosition(this.end);return new e(n.row,n.column,i.row,i.column)},e.prototype.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t},e}();i.fromPoints=function(e,t){return new i(e.row,e.column,t.row,t.column)},i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=i})),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],(function(e,t,n){"use strict";var i=e("./oop"),s=function(){var e,t,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};for(t in n.PRINTABLE_KEYS[173]="-",n.FUNCTION_KEYS)e=n.FUNCTION_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);for(t in n.PRINTABLE_KEYS)e=n.PRINTABLE_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);return i.mixin(n,n.MODIFIER_KEYS),i.mixin(n,n.PRINTABLE_KEYS),i.mixin(n,n.FUNCTION_KEYS),n.enter=n.return,n.escape=n.esc,n.del=n.delete,function(){for(var e=["cmd","ctrl","alt","shift"],t=Math.pow(2,e.length);t--;)n.KEY_MODS[t]=e.filter((function(e){return t&n.KEY_MODS[e]})).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input-",n}();i.mixin(t,s),t.default=t,t.keyCodeToString=function(e){var t=s[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t.toLowerCase()}})),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(e,t,n){"use strict";var i,s=e("./keys"),r=e("./useragent"),o=null,a=0;function l(){return void 0==i&&function(){i=!1;try{document.createComment("").addEventListener("test",(function(){}),{get passive(){return i={passive:!1},!0}})}catch(e){}}(),i}function c(e,t,n){this.elem=e,this.type=t,this.callback=n}c.prototype.destroy=function(){h(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var u=t.addListener=function(e,t,n,i){e.addEventListener(t,n,l()),i&&i.$toDestroy.push(new c(e,t,n))},h=t.removeListener=function(e,t,n){e.removeEventListener(t,n,l())};function d(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}function f(){o=Object.create(null)}if(t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation&&e.stopPropagation()},t.preventDefault=function(e){e.preventDefault&&e.preventDefault()},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||r.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.button},t.capture=function(e,t,n){var i=e&&e.ownerDocument||document;function s(e){t&&t(e),n&&n(e),h(i,"mousemove",t),h(i,"mouseup",s),h(i,"dragstart",s)}return u(i,"mousemove",t),u(i,"mouseup",s),u(i,"dragstart",s),s},t.addMouseWheelListener=function(e,t,n){u(e,"wheel",(function(e){var n=e.deltaX||0,i=e.deltaY||0;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=.15*n,e.wheelY=.15*i;break;case e.DOM_DELTA_LINE:e.wheelX=15*n,e.wheelY=15*i;break;case e.DOM_DELTA_PAGE:e.wheelX=150*n,e.wheelY=150*i}t(e)}),n)},t.addMultiMouseDownListener=function(e,n,i,s,o){var a,l,c,h=0,d={2:"dblclick",3:"tripleclick",4:"quadclick"};function f(e){if(0!==t.getButton(e)?h=0:e.detail>1?++h>4&&(h=1):h=1,r.isIE){var o=Math.abs(e.clientX-a)>5||Math.abs(e.clientY-l)>5;c&&!o||(h=1),c&&clearTimeout(c),c=setTimeout((function(){c=null}),n[h-1]||600),1==h&&(a=e.clientX,l=e.clientY)}if(e._clicks=h,i[s]("mousedown",e),h>4)h=0;else if(h>1)return i[s](d[h],e)}Array.isArray(e)||(e=[e]),e.forEach((function(e){u(e,"mousedown",f,o)}))},t.getModifierString=function(e){return s.KEY_MODS[d(e)]},t.addCommandKeyListener=function(e,n,i){var l=null;u(e,"keydown",(function(e){o[e.keyCode]=(o[e.keyCode]||0)+1;var t=function(e,t,n){var i=d(t);if(!r.isMac&&o){if(t.getModifierState&&(t.getModifierState("OS")||t.getModifierState("Win"))&&(i|=8),o.altGr){if(3==(3&i))return;o.altGr=0}if(18===n||17===n){var l=t.location;17===n&&1===l?1==o[n]&&(a=t.timeStamp):18===n&&3===i&&2===l&&t.timeStamp-a<50&&(o.altGr=!0)}}if(n in s.MODIFIER_KEYS&&(n=-1),i||13!==n||3!==t.location||(e(t,i,-n),!t.defaultPrevented)){if(r.isChromeOS&&8&i){if(e(t,i,n),t.defaultPrevented)return;i&=-9}return!!(i||n in s.FUNCTION_KEYS||n in s.PRINTABLE_KEYS)&&e(t,i,n)}}(n,e,e.keyCode);return l=e.defaultPrevented,t}),i),u(e,"keypress",(function(e){l&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),l=null)}),i),u(e,"keyup",(function(e){o[e.keyCode]=null}),i),o||(f(),u(window,"focus",f))},"object"==typeof window&&window.postMessage&&!r.isOldIE){var g=1;t.nextTick=function(e,n){n=n||window;var i="zero-timeout-message-"+g++,s=function(r){r.data==i&&(t.stopPropagation(r),h(n,"message",s),e())};u(n,"message",s),n.postMessage(i,"*")}}t.$idleBlocked=!1,t.onIdle=function(e,n){return setTimeout((function n(){t.$idleBlocked?setTimeout(n,100):e()}),n)},t.$idleBlockId=null,t.blockIdle=function(e){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout((function(){t.$idleBlocked=!1}),e||100)},t.nextFrame="object"==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}})),ace.define("ace/clipboard",["require","exports","module"],(function(e,t,n){"use strict";var i;n.exports={lineMode:!1,pasteCancelled:function(){return!!(i&&i>Date.now()-50)||(i=!1)},cancel:function(){i=Date.now()}}})),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],(function(e,t,n){"use strict";var i,s=e("../lib/event"),r=e("../config").nls,o=e("../lib/useragent"),a=e("../lib/dom"),l=e("../lib/lang"),c=e("../clipboard"),u=o.isChrome<18,h=o.isIE,d=o.isChrome>63,f=400,g=e("../lib/keys"),p=g.KEY_MODS,m=o.isIOS,b=m?/\s/:/\n/,_=o.isMobile;i=function(e,t){var n=a.createElement("textarea");n.className="ace_text-input",n.setAttribute("wrap","off"),n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck","false"),n.style.opacity="0",e.insertBefore(n,e.firstChild);var i=!1,v=!1,y=!1,S=!1,w="";_||(n.style.fontSize="1px");var k=!1,C=!1,x="",E=0,L=0,D=0,A=Number.MAX_SAFE_INTEGER,T=Number.MIN_SAFE_INTEGER,N=0;try{var I=document.activeElement===n}catch(X){}this.setNumberOfExtraLines=function(e){A=Number.MAX_SAFE_INTEGER,T=Number.MIN_SAFE_INTEGER,N=e<0?0:e},this.setAriaOptions=function(e){if(e.activeDescendant?(n.setAttribute("aria-haspopup","true"),n.setAttribute("aria-autocomplete",e.inline?"both":"list"),n.setAttribute("aria-activedescendant",e.activeDescendant)):(n.setAttribute("aria-haspopup","false"),n.setAttribute("aria-autocomplete","both"),n.removeAttribute("aria-activedescendant")),e.role&&n.setAttribute("role",e.role),e.setLabel&&(n.setAttribute("aria-roledescription",r("editor")),t.session)){var i=t.session.selection.cursor.row;n.setAttribute("aria-label",r("Cursor at row $0",[i+1]))}},this.setAriaOptions({role:"textbox"}),s.addListener(n,"blur",(function(e){C||(t.onBlur(e),I=!1)}),t),s.addListener(n,"focus",(function(e){if(!C){if(I=!0,o.isEdge)try{if(!document.hasFocus())return}catch(e){}t.onFocus(e),o.isEdge?setTimeout(M):M()}}),t),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:t.renderer.enableKeyboardAccessibility}),w||d||"browser"==this.$focusScroll)return n.focus({preventScroll:!0});var e=n.style.top;n.style.position="fixed",n.style.top="0px";try{var i=0!=n.getBoundingClientRect().top}catch(X){return}var s=[];if(i)for(var r=n.parentElement;r&&1==r.nodeType;)s.push(r),r.setAttribute("ace_nocontext","true"),r=!r.parentElement&&r.getRootNode?r.getRootNode().host:r.parentElement;n.focus({preventScroll:!0}),i&&s.forEach((function(e){e.removeAttribute("ace_nocontext")})),setTimeout((function(){n.style.position="","0px"==n.style.top&&(n.style.top=e)}),0)},this.blur=function(){n.blur()},this.isFocused=function(){return I},t.on("beforeEndOperation",(function(){var e=t.curOp,i=e&&e.command&&e.command.name;if("insertstring"!=i){var s=i&&(e.docChanged||e.selectionChanged);y&&s&&(x=n.value="",U()),M()}}));var $=function(e,n){for(var i=n,s=1;s<=e-A&&s<2*N+1;s++)i+=t.session.getLine(e-s).length+1;return i},M=m?function(e){if(I&&(!i||e)&&!S){e||(e="");var s="\n ab"+e+"cde fg\n";s!=n.value&&(n.value=x=s);var r=4+(e.length||(t.selection.isEmpty()?0:1));4==E&&L==r||n.setSelectionRange(4,r),E=4,L=r}}:function(){if(!y&&!S&&(I||O)){y=!0;var e=0,i=0,s="";if(t.session){var r=t.selection,o=r.getRange(),a=r.cursor.row;a===T+1?T=(A=T+1)+2*N:a===A-1?A=(T=A-1)-2*N:(a<A-1||a>T+1)&&(A=a>N?a-N:0,T=a>N?a+N:2*N);for(var l=[],c=A;c<=T;c++)l.push(t.session.getLine(c));if(s=l.join("\n"),e=$(o.start.row,o.start.column),i=$(o.end.row,o.end.column),o.start.row<A){var u=t.session.getLine(A-1);e=o.start.row<A-1?0:e,i+=u.length+1,s=u+"\n"+s}else if(o.end.row>T){var h=t.session.getLine(T+1);i=o.end.row>T+1?h.length:o.end.column,i+=s.length+1,s=s+"\n"+h}else _&&a>0&&(s="\n"+s,i+=1,e+=1);s.length>f&&(e<f&&i<f?s=s.slice(0,f):(s="\n",e==i?e=i=0:(e=0,i=1)));var d=s+"\n\n";d!=x&&(n.value=x=d,E=L=d.length)}if(O&&(E=n.selectionStart,L=n.selectionEnd),L!=i||E!=e||n.selectionEnd!=L)try{n.setSelectionRange(e,i),E=e,L=i}catch(X){}y=!1}};this.resetSelection=M,I&&t.onFocus();var R=null;this.setInputHandler=function(e){R=e},this.getInputHandler=function(){return R};var O=!1,P=function(e,i){if(O&&(O=!1),v)return M(),e&&t.onPaste(e),v=!1,"";for(var s=n.selectionStart,r=n.selectionEnd,a=E,l=x.length-L,c=e,u=e.length-s,h=e.length-r,d=0;a>0&&x[d]==e[d];)d++,a--;for(c=c.slice(d),d=1;l>0&&x.length-d>E-1&&x[x.length-d]==e[e.length-d];)d++,l--;u-=d-1,h-=d-1;var f=c.length-d+1;if(f<0&&(a=-f,f=0),c=c.slice(0,f),!i&&!c&&!u&&!a&&!l&&!h)return"";S=!0;var g=!1;return o.isAndroid&&". "==c&&(c="  ",g=!0),c&&!a&&!l&&!u&&!h||k?t.onTextInput(c):t.onTextInput(c,{extendLeft:a,extendRight:l,restoreStart:u,restoreEnd:h}),S=!1,x=e,E=s,L=r,D=h,g?"\n":c},F=function(e){if(y)return j();if(e&&e.inputType){if("historyUndo"==e.inputType)return t.execCommand("undo");if("historyRedo"==e.inputType)return t.execCommand("redo")}var i=n.value,s=P(i,!0);(i.length>500||b.test(s)||_&&E<1&&E==L)&&M()},B=function(e,t,n){var i=e.clipboardData||window.clipboardData;if(i&&!u){var s=h||n?"Text":"text/plain";try{return t?!1!==i.setData(s,t):i.getData(s)}catch(e){if(!n)return B(e,t,!0)}}},z=function(e,r){var o=t.getCopyText();if(!o)return s.preventDefault(e);B(e,o)?(m&&(M(o),i=o,setTimeout((function(){i=!1}),10)),r?t.onCut():t.onCopy(),s.preventDefault(e)):(i=!0,n.value=o,n.select(),setTimeout((function(){i=!1,M(),r?t.onCut():t.onCopy()})))},W=function(e){z(e,!0)},H=function(e){z(e,!1)},V=function(e){var i=B(e);c.pasteCancelled()||("string"==typeof i?(i&&t.onPaste(i,e),o.isIE&&setTimeout(M),s.preventDefault(e)):(n.value="",v=!0))};s.addCommandKeyListener(n,(function(e,n,i){if(!y)return t.onCommandKey(e,n,i)}),t),s.addListener(n,"select",(function(e){y||(i?i=!1:!function(e){return 0===e.selectionStart&&e.selectionEnd>=x.length&&e.value===x&&x&&e.selectionEnd!==L}(n)?_&&n.selectionStart!=E&&M():(t.selectAll(),M()))}),t),s.addListener(n,"input",F,t),s.addListener(n,"cut",W,t),s.addListener(n,"copy",H,t),s.addListener(n,"paste",V,t),"oncut"in n&&"oncopy"in n&&"onpaste"in n||s.addListener(e,"keydown",(function(e){if((!o.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:H(e);break;case 86:V(e);break;case 88:W(e)}}),t);var j=function(){if(y&&t.onCompositionUpdate&&!t.$readOnly){if(k)return q();if(y.useTextareaForIME)t.onCompositionUpdate(n.value);else{var e=n.value;P(e),y.markerRange&&(y.context&&(y.markerRange.start.column=y.selectionStart=y.context.compositionStartOffset),y.markerRange.end.column=y.markerRange.start.column+L-y.selectionStart+D)}}},U=function(e){t.onCompositionEnd&&!t.$readOnly&&(y=!1,t.onCompositionEnd(),t.off("mousedown",q),e&&F())};function q(){C=!0,n.blur(),n.focus(),C=!1}var K,G=l.delayedCall(j,50).schedule.bind(null,null);function Y(){clearTimeout(K),K=setTimeout((function(){w&&(n.style.cssText=w,w=""),t.renderer.$isMousePressed=!1,t.renderer.$keepTextAreaAtCursor&&t.renderer.$moveTextAreaToCursor()}),0)}s.addListener(n,"compositionstart",(function(e){if(!y&&t.onCompositionStart&&!t.$readOnly&&(y={},!k)){e.data&&(y.useTextareaForIME=!1),setTimeout(j,0),t._signal("compositionStart"),t.on("mousedown",q);var i=t.getSelectionRange();i.end.row=i.start.row,i.end.column=i.start.column,y.markerRange=i,y.selectionStart=E,t.onCompositionStart(y),y.useTextareaForIME?(x=n.value="",E=0,L=0):(n.msGetInputContext&&(y.context=n.msGetInputContext()),n.getInputContext&&(y.context=n.getInputContext()))}}),t),s.addListener(n,"compositionupdate",j,t),s.addListener(n,"keyup",(function(e){27==e.keyCode&&n.value.length<n.selectionStart&&(y||(x=n.value),E=L=-1,M()),G()}),t),s.addListener(n,"keydown",G,t),s.addListener(n,"compositionend",U,t),this.getElement=function(){return n},this.setCommandMode=function(e){k=e,n.readOnly=!1},this.setReadOnly=function(e){k||(n.readOnly=e)},this.setCopyWithEmptySelection=function(e){},this.onContextMenu=function(e){O=!0,M(),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,i){w||(w=n.style.cssText),n.style.cssText=(i?"z-index:100000;":"")+(o.isIE?"opacity:0.1;":"")+"text-indent: -"+(E+L)*t.renderer.characterWidth*.5+"px;";var r=t.container.getBoundingClientRect(),l=a.computedStyle(t.container),c=r.top+(parseInt(l.borderTopWidth)||0),u=r.left+(parseInt(r.borderLeftWidth)||0),h=r.bottom-c-n.clientHeight-2,d=function(e){a.translate(n,e.clientX-u-2,Math.min(e.clientY-c-2,h))};d(e),"mousedown"==e.type&&(t.renderer.$isMousePressed=!0,clearTimeout(K),o.isWin&&s.capture(t.container,d,Y))},this.onContextMenuClose=Y;var Q=function(e){t.textInput.onContextMenu(e),Y()};s.addListener(n,"mouseup",Q,t),s.addListener(n,"mousedown",(function(e){e.preventDefault(),Y()}),t),s.addListener(t.renderer.scroller,"contextmenu",Q,t),s.addListener(n,"contextmenu",Q,t),m&&function(e,t,n){var s=null,r=!1;n.addEventListener("keydown",(function(e){s&&clearTimeout(s),r=!0}),!0),n.addEventListener("keyup",(function(e){s=setTimeout((function(){r=!1}),100)}),!0);var o=function(e){if(document.activeElement===n&&!(r||y||t.$mouseHandler.isMousePressed)&&!i){var s=n.selectionStart,o=n.selectionEnd,a=null,l=0;if(0==s?a=g.up:1==s?a=g.home:o>L&&"\n"==x[o]?a=g.end:s<E&&" "==x[s-1]?(a=g.left,l=p.option):s<E||s==E&&L!=E&&s==o?a=g.left:o>L&&x.slice(0,o).split("\n").length>2?a=g.down:o>L&&" "==x[o-1]?(a=g.right,l=p.option):(o>L||o==L&&L!=E&&s==o)&&(a=g.right),s!==o&&(l|=p.shift),a){if(!t.onCommandKey({},l,a)&&t.commands){a=g.keyCodeToString(a);var c=t.commands.findKeyCommand(l,a);c&&t.execCommand(c)}E=s,L=o,M("")}}};document.addEventListener("selectionchange",o),t.on("destroy",(function(){document.removeEventListener("selectionchange",o)}))}(0,t,n),this.destroy=function(){n.parentElement&&n.parentElement.removeChild(n)}},t.TextInput=i,t.$setUserAgentForTests=function(e,t){_=e,m=t}})),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("../lib/useragent"),s=function(){function e(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach((function(t){e[t]=this[t]}),this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}return e.prototype.onMouseDown=function(e){var t=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var s=this.editor,r=e.getButton();return 0!==r?((s.getSelectionRange().isEmpty()||1==r)&&s.selection.moveToPosition(n),void(2==r&&(s.textInput.onContextMenu(e.domEvent),i.isMozilla||e.preventDefault()))):(this.mousedownEvent.time=Date.now(),!t||s.isFocused()||(s.focus(),!this.$focusTimeout||this.$clickSelection||s.inMultiSelectMode)?(this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()):(this.setState("focusWait"),void this.captureMouse(e)))},e.prototype.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):t||n.selection.moveToPosition(e),t||this.select(),n.setStyle("ace_selecting"),this.setState("select"))},e.prototype.select=function(){var e,t=this.editor,n=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var i=this.$clickSelection.comparePoint(n);if(-1==i)e=this.$clickSelection.end;else if(1==i)e=this.$clickSelection.start;else{var s=r(this.$clickSelection,n);n=s.cursor,e=s.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(n),t.renderer.scrollCursorIntoView()},e.prototype.extendSelectionBy=function(e){var t,n=this.editor,i=n.renderer.screenToTextCoordinates(this.x,this.y),s=n.selection[e](i.row,i.column);if(this.$clickSelection){var o=this.$clickSelection.comparePoint(s.start),a=this.$clickSelection.comparePoint(s.end);if(-1==o&&a<=0)t=this.$clickSelection.end,s.end.row==i.row&&s.end.column==i.column||(i=s.start);else if(1==a&&o>=0)t=this.$clickSelection.start,s.start.row==i.row&&s.start.column==i.column||(i=s.end);else if(-1==o&&1==a)i=s.end,t=s.start;else{var l=r(this.$clickSelection,i);i=l.cursor,t=l.anchor}n.selection.setSelectionAnchor(t.row,t.column)}n.selection.selectToPosition(i),n.renderer.scrollCursorIntoView()},e.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},e.prototype.focusWait=function(){var e,t,n,i,s=(e=this.mousedownEvent.x,t=this.mousedownEvent.y,n=this.x,i=this.y,Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))),r=Date.now();(s>0||r-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},e.prototype.onDoubleClick=function(e){var t=e.getDocumentPosition(),n=this.editor,i=n.session.getBracketRange(t);i?(i.isEmpty()&&(i.start.column--,i.end.column++),this.setState("select")):(i=n.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=i,this.select()},e.prototype.onTripleClick=function(e){var t=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var i=n.getSelectionRange();i.isMultiLine()&&i.contains(t.row,t.column)?(this.$clickSelection=n.selection.getLineRange(i.start.row),this.$clickSelection.end=n.selection.getLineRange(i.end.row).end):this.$clickSelection=n.selection.getLineRange(t.row),this.select()},e.prototype.onQuadClick=function(e){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},e.prototype.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,i=e.domEvent.timeStamp,s=i-n.t,r=s?e.wheelX/s:n.vx,o=s?e.wheelY/s:n.vy;s<550&&(r=(r+n.vx)/2,o=(o+n.vy)/2);var a=Math.abs(r/o),l=!1;if(a>=1&&t.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(l=!0),a<=1&&t.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(l=!0),l)n.allowed=i;else if(i-n.allowed<550){Math.abs(r)<=1.5*Math.abs(n.vx)&&Math.abs(o)<=1.5*Math.abs(n.vy)?(l=!0,n.allowed=i):n.allowed=0}return n.t=i,n.vx=r,n.vy=o,l?(t.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}},e}();function r(e,t){if(e.start.row==e.end.row)var n=2*t.column-e.start.column-e.end.column;else if(e.start.row!=e.end.row-1||e.start.column||e.end.column)n=2*t.row-e.start.row-e.end.row;else var n=t.column-4;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}s.prototype.selectEnd=s.prototype.selectByLinesEnd,s.prototype.selectAllEnd=s.prototype.selectByLinesEnd,s.prototype.selectByWordsEnd=s.prototype.selectByLinesEnd,t.DefaultHandlers=s})),ace.define("ace/lib/scroll",["require","exports","module"],(function(e,t,n){t.preventParentScroll=function(e){e.stopPropagation();var t=e.currentTarget;t.scrollHeight>t.clientHeight||e.preventDefault()}})),ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],(function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=e("./lib/dom"),o=(e("./lib/event"),e("./range").Range),a=e("./lib/scroll").preventParentScroll,l="ace_tooltip",c=function(){function e(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}return e.prototype.$init=function(){return this.$element=r.createElement("div"),this.$element.className=l,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},e.prototype.getElement=function(){return this.$element||this.$init()},e.prototype.setText=function(e){this.getElement().textContent=e},e.prototype.setHtml=function(e){this.getElement().innerHTML=e},e.prototype.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},e.prototype.setClassName=function(e){r.addCssClass(this.getElement(),e)},e.prototype.setTheme=function(e){this.$element.className=l+" "+(e.isDark?"ace_dark ":"")+(e.cssClass||"")},e.prototype.show=function(e,t,n){null!=e&&this.setText(e),null!=t&&null!=n&&this.setPosition(t,n),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},e.prototype.hide=function(e){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=l,this.isOpen=!1)},e.prototype.getHeight=function(){return this.getElement().offsetHeight},e.prototype.getWidth=function(){return this.getElement().offsetWidth},e.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},e}(),u=new(function(){function e(){this.popups=[]}return e.prototype.addPopup=function(e){this.popups.push(e),this.updatePopups()},e.prototype.removePopup=function(e){var t=this.popups.indexOf(e);-1!==t&&(this.popups.splice(t,1),this.updatePopups())},e.prototype.updatePopups=function(){var e,t,n,i;this.popups.sort((function(e,t){return t.priority-e.priority}));var r=[];try{for(var o=s(this.popups),a=o.next();!a.done;a=o.next()){var l=a.value,c=!0;try{for(var u=(n=void 0,s(r)),h=u.next();!h.done;h=u.next()){var d=h.value;if(this.doPopupsOverlap(d,l)){c=!1;break}}}catch(f){n={error:f}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}c?r.push(l):l.hide()}}catch(g){e={error:g}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e.prototype.doPopupsOverlap=function(e,t){var n=e.getElement().getBoundingClientRect(),i=t.getElement().getBoundingClientRect();return n.left<i.right&&n.right>i.left&&n.top<i.bottom&&n.bottom>i.top},e}());t.popupManager=u,t.Tooltip=c;var h=function(e){function t(t){void 0===t&&(t=document.body);var n=e.call(this,t)||this;n.timeout=void 0,n.lastT=0,n.idleTime=350,n.lastEvent=void 0,n.onMouseOut=n.onMouseOut.bind(n),n.onMouseMove=n.onMouseMove.bind(n),n.waitForHover=n.waitForHover.bind(n),n.hide=n.hide.bind(n);var i=n.getElement();return i.style.whiteSpace="pre-wrap",i.style.pointerEvents="auto",i.addEventListener("mouseout",n.onMouseOut),i.tabIndex=-1,i.addEventListener("blur",function(){i.contains(document.activeElement)||this.hide()}.bind(n)),i.addEventListener("wheel",a),n}return i(t,e),t.prototype.addToEditor=function(e){e.on("mousemove",this.onMouseMove),e.on("mousedown",this.hide),e.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},t.prototype.removeFromEditor=function(e){e.off("mousemove",this.onMouseMove),e.off("mousedown",this.hide),e.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},t.prototype.onMouseMove=function(e,t){this.lastEvent=e,this.lastT=Date.now();var n=t.$mouseHandler.isMousePressed;if(this.isOpen){var i=this.lastEvent&&this.lastEvent.getDocumentPosition();this.range&&this.range.contains(i.row,i.column)&&!n&&!this.isOutsideOfText(this.lastEvent)||this.hide()}this.timeout||n||(this.lastEvent=e,this.timeout=setTimeout(this.waitForHover,this.idleTime))},t.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var e=Date.now()-this.lastT;this.idleTime-e>10?this.timeout=setTimeout(this.waitForHover,this.idleTime-e):(this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor))},t.prototype.isOutsideOfText=function(e){var t=e.editor,n=e.getDocumentPosition(),i=t.session.getLine(n.row);if(n.column==i.length){var s=t.renderer.pixelToScreenCoordinates(e.clientX,e.clientY),r=t.session.documentToScreenPosition(n.row,n.column);if(r.column!=s.column||r.row!=s.row)return!0}return!1},t.prototype.setDataProvider=function(e){this.$gatherData=e},t.prototype.showForRange=function(e,t,n,i){if((!i||i==this.lastEvent)&&(!this.isOpen||document.activeElement!=this.getElement())){var s=e.renderer;this.isOpen||(u.addPopup(this),this.$registerCloseEvents(),this.setTheme(s.theme)),this.isOpen=!0,this.addMarker(t,e.session),this.range=o.fromPoints(t.start,t.end);var r=s.textToScreenCoordinates(t.start.row,t.start.column),a=s.scroller.getBoundingClientRect();r.pageX<a.left&&(r.pageX=a.left);var l=this.getElement();l.innerHTML="",l.appendChild(n),l.style.maxHeight="",l.style.display="block";var c=l.clientHeight,h=l.clientWidth,d=window.innerHeight-r.pageY-s.lineHeight,f=!0;r.pageY-c<0&&r.pageY<d&&(f=!1),l.style.maxHeight=(f?r.pageY:d)-10+"px",l.style.top=f?"":r.pageY+s.lineHeight+"px",l.style.bottom=f?window.innerHeight-r.pageY+"px":"",l.style.left=Math.min(r.pageX,window.innerWidth-h-10)+"px"}},t.prototype.addMarker=function(e,t){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=t,this.marker=t&&t.addMarker(e,"ace_highlight-marker","text")},t.prototype.hide=function(e){(e||document.activeElement!=this.getElement())&&(e&&e.target&&("keydown"!=e.type||e.ctrlKey||e.metaKey)&&this.$element.contains(e.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,u.removePopup(this))))},t.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},t.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},t.prototype.onMouseOut=function(e){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&e.relatedTarget&&!this.getElement().contains(e.relatedTarget)&&(e&&e.currentTarget.contains(e.relatedTarget)||e.relatedTarget.classList.contains("ace_content")||this.hide())},t}(c);t.HoverTooltip=h})),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],(function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},r=e("../lib/dom"),o=e("../lib/event"),a=e("../tooltip").Tooltip,l=e("../config").nls;t.GutterHandler=function(e){var t,n,i=e.editor,s=i.renderer.$gutterLayer,a=new c(i);function l(){t&&(t=clearTimeout(t)),a.isOpen&&(a.hideTooltip(),i.off("mousewheel",l))}function u(e){a.setPosition(e.x,e.y)}e.editor.setDefaultHandler("guttermousedown",(function(t){if(i.isFocused()&&0==t.getButton()&&"foldWidgets"!=s.getRegion(t)){var n=t.getDocumentPosition().row,r=i.session.selection;if(t.getShiftKey())r.selectTo(n,0);else{if(2==t.domEvent.detail)return i.selectAll(),t.preventDefault();e.$clickSelection=i.selection.getLineRange(n)}return e.setState("selectByLines"),e.captureMouse(t),t.preventDefault()}})),e.editor.setDefaultHandler("guttermousemove",(function(o){var c=o.domEvent.target||o.domEvent.srcElement;if(r.hasCssClass(c,"ace_fold-widget"))return l();a.isOpen&&e.$tooltipFollowsMouse&&u(o),n=o,t||(t=setTimeout((function(){t=null,n&&!e.isMousePressed?function(){var t=n.getDocumentPosition().row;if(t==i.session.getLength()){var r=i.renderer.pixelToScreenCoordinates(0,n.y).row,o=n.$pos;if(r>i.session.documentToScreenRow(o.row,o.column))return l()}if(a.showTooltip(t),a.isOpen)if(i.on("mousewheel",l),e.$tooltipFollowsMouse)u(n);else{var c=n.getGutterRow(),h=s.$lines.get(c);if(h){var d=h.element.querySelector(".ace_gutter_annotation").getBoundingClientRect(),f=a.getElement().style;f.left=d.right+"px",f.top=d.bottom+"px"}else u(n)}}():l()}),50))})),o.addListener(i.renderer.$gutter,"mouseout",(function(e){n=null,a.isOpen&&!t&&(t=setTimeout((function(){t=null,l()}),50))}),i),i.on("changeSession",l),i.on("input",l)};var c=function(e){function t(t){var n=e.call(this,t.container)||this;return n.editor=t,n}return i(t,e),t.prototype.setPosition=function(e,t){var n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,s=this.getWidth(),r=this.getHeight();(e+=15)+s>n&&(e-=e+s-n),(t+=15)+r>i&&(t-=20+r),a.prototype.setPosition.call(this,e,t)},Object.defineProperty(t,"annotationLabels",{get:function(){return{error:{singular:l("error"),plural:l("errors")},warning:{singular:l("warning"),plural:l("warnings")},info:{singular:l("information message"),plural:l("information messages")}}},enumerable:!1,configurable:!0}),t.prototype.showTooltip=function(e){var n,i=this.editor.renderer.$gutterLayer,s=i.$annotations[e];n=s?{text:Array.from(s.text),type:Array.from(s.type)}:{text:[],type:[]};var r=i.session.getFoldLine(e);if(r&&i.$showFoldedAnnotations){for(var o,a={error:[],warning:[],info:[]},l=e+1;l<=r.end.row;l++)if(i.$annotations[l])for(var c=0;c<i.$annotations[l].text.length;c++){var u=i.$annotations[l].type[c];a[u].push(i.$annotations[l].text[c]),"error"!==u?"warning"!==u||(o="warning_fold"):o="error_fold"}if("error_fold"===o||"warning_fold"===o){var h="".concat(t.annotationsToSummaryString(a)," in folded code.");n.text.push(h),n.type.push(o)}}if(0===n.text.length)return this.hide();var d={error:[],warning:[],info:[]},f=i.$useSvgGutterIcons?"ace_icon_svg":"ace_icon";for(l=0;l<n.text.length;l++){var g="<span class='ace_".concat(n.type[l]," ").concat(f,"' aria-label='").concat(t.annotationLabels[n.type[l].replace("_fold","")].singular,"' role=img> </span> ").concat(n.text[l]);d[n.type[l].replace("_fold","")].push(g)}var p=[].concat(d.error,d.warning,d.info).join("<br>");this.setHtml(p),this.$element.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},t.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},t.annotationsToSummaryString=function(e){var n,i,r=[];try{for(var o=s(["error","warning","info"]),a=o.next();!a.done;a=o.next()){var l=a.value;if(e[l].length){var c=1===e[l].length?t.annotationLabels[l].singular:t.annotationLabels[l].plural;r.push("".concat(e[l].length," ").concat(c))}}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return r.join(", ")},t}(a);t.GutterTooltip=c})),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("../lib/event"),s=e("../lib/useragent"),r=function(){function e(e,t){this.speed,this.wheelX,this.wheelY,this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return e.prototype.stopPropagation=function(){i.stopPropagation(this.domEvent),this.propagationStopped=!0},e.prototype.preventDefault=function(){i.preventDefault(this.domEvent),this.defaultPrevented=!0},e.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},e.prototype.getDocumentPosition=function(){return this.$pos||(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY)),this.$pos},e.prototype.getGutterRow=function(){var e=this.getDocumentPosition().row;return this.editor.session.documentToScreenRow(e,0)-this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0)},e.prototype.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor.getSelectionRange();if(e.isEmpty())this.$inSelection=!1;else{var t=this.getDocumentPosition();this.$inSelection=e.contains(t.row,t.column)}return this.$inSelection},e.prototype.getButton=function(){return i.getButton(this.domEvent)},e.prototype.getShiftKey=function(){return this.domEvent.shiftKey},e.prototype.getAccelKey=function(){return s.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},e}();t.MouseEvent=r})),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("../lib/dom"),s=e("../lib/event"),r=e("../lib/useragent");function o(e){var t=e.editor,n=i.createElement("div");n.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",n.textContent="\xa0";["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach((function(t){e[t]=this[t]}),this),t.on("mousedown",this.onMouseDown.bind(e));var o,l,c,u,h,d,f,g,p,m,b,_=t.container,v=0;function y(){var e=d;(function(e,n){var i=Date.now(),s=!n||e.row!=n.row,r=!n||e.column!=n.column;!m||s||r?(t.moveCursorToPosition(e),m=i,b={x:l,y:c}):a(b.x,b.y,l,c)>5?m=null:i-m>=200&&(t.renderer.scrollCursorIntoView(),m=null)})(d=t.renderer.screenToTextCoordinates(l,c),e),function(e,n){var i=Date.now(),s=t.renderer.layerConfig.lineHeight,r=t.renderer.layerConfig.characterWidth,o=t.renderer.scroller.getBoundingClientRect(),a={x:{left:l-o.left,right:o.right-l},y:{top:c-o.top,bottom:o.bottom-c}},u=Math.min(a.x.left,a.x.right),h=Math.min(a.y.top,a.y.bottom),d={row:e.row,column:e.column};u/r<=2&&(d.column+=a.x.left<a.x.right?-3:2),h/s<=1&&(d.row+=a.y.top<a.y.bottom?-1:1);var f=e.row!=d.row,g=e.column!=d.column,m=!n||e.row!=n.row;f||g&&!m?p?i-p>=200&&t.renderer.scrollCursorIntoView(d):p=i:p=null}(d,e)}function S(){h=t.selection.toOrientedRange(),o=t.session.addMarker(h,"ace_selection",t.getSelectionStyle()),t.clearSelection(),t.isFocused()&&t.renderer.$cursorLayer.setBlinking(!1),clearInterval(u),y(),u=setInterval(y,20),v=0,s.addListener(document,"mousemove",C)}function w(){clearInterval(u),t.session.removeMarker(o),o=null,t.selection.fromOrientedRange(h),t.isFocused()&&!g&&t.$resetCursorStyle(),h=null,d=null,v=0,p=null,m=null,s.removeListener(document,"mousemove",C)}this.onDragStart=function(e){if(this.cancelDrag||!_.draggable){var i=this;return setTimeout((function(){i.startSelect(),i.captureMouse(e)}),0),e.preventDefault()}h=t.getSelectionRange();var s=e.dataTransfer;s.effectAllowed=t.getReadOnly()?"copy":"copyMove",t.container.appendChild(n),s.setDragImage&&s.setDragImage(n,0,0),setTimeout((function(){t.container.removeChild(n)})),s.clearData(),s.setData("Text",t.session.getTextRange()),g=!0,this.setState("drag")},this.onDragEnd=function(e){if(_.draggable=!1,g=!1,this.setState(null),!t.getReadOnly()){var n=e.dataTransfer.dropEffect;f||"move"!=n||t.session.remove(t.getSelectionRange()),t.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(!t.getReadOnly()&&x(e.dataTransfer))return l=e.clientX,c=e.clientY,o||S(),v++,e.dataTransfer.dropEffect=f=E(e),s.preventDefault(e)},this.onDragOver=function(e){if(!t.getReadOnly()&&x(e.dataTransfer))return l=e.clientX,c=e.clientY,o||(S(),v++),null!==k&&(k=null),e.dataTransfer.dropEffect=f=E(e),s.preventDefault(e)},this.onDragLeave=function(e){if(--v<=0&&o)return w(),f=null,s.preventDefault(e)},this.onDrop=function(e){if(d){var n=e.dataTransfer;if(g)switch(f){case"move":h=h.contains(d.row,d.column)?{start:d,end:d}:t.moveText(h,d);break;case"copy":h=t.moveText(h,d,!0)}else{var i=n.getData("Text");h={start:d,end:t.session.insert(d,i)},t.focus(),f=null}return w(),s.preventDefault(e)}},s.addListener(_,"dragstart",this.onDragStart.bind(e),t),s.addListener(_,"dragend",this.onDragEnd.bind(e),t),s.addListener(_,"dragenter",this.onDragEnter.bind(e),t),s.addListener(_,"dragover",this.onDragOver.bind(e),t),s.addListener(_,"dragleave",this.onDragLeave.bind(e),t),s.addListener(_,"drop",this.onDrop.bind(e),t);var k=null;function C(){null==k&&(k=setTimeout((function(){null!=k&&o&&w()}),20))}function x(e){var t=e.types;return!t||Array.prototype.some.call(t,(function(e){return"text/plain"==e||"Text"==e}))}function E(e){var t=["copy","copymove","all","uninitialized"],n=r.isMac?e.altKey:e.ctrlKey,i="uninitialized";try{i=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var s="none";return n&&t.indexOf(i)>=0?s="copy":["move","copymove","linkmove","all","uninitialized"].indexOf(i)>=0?s="move":t.indexOf(i)>=0&&(s="copy"),s}}function a(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))}(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(e){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor;e.container.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var t=r.isWin?"default":"move";e.renderer.setCursorStyle(t),this.setState("dragReady")},this.onMouseDrag=function(e){var t=this.editor.container;r.isIE&&"dragReady"==this.state&&(a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>3&&t.dragDrop());"dragWait"===this.state&&(a(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)>0&&(t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition())))},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,n=e.inSelection(),i=e.getButton();if(1===(e.domEvent.detail||1)&&0===i&&n){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var s=e.domEvent.target||e.domEvent.srcElement;if("unselectable"in s&&(s.unselectable="on"),t.getDragDelay()){if(r.isWebKit)this.cancelDrag=!0,t.container.draggable=!0;this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(o.prototype),t.DragdropHandler=o})),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("./mouse_event").MouseEvent,s=e("../lib/event"),r=e("../lib/dom");t.addTouchListeners=function(e,t){var n,o,a,l,c,u,h,d,f,g="scroll",p=0,m=0,b=0,_=0;function v(){var e=window.navigator&&window.navigator.clipboard,n=!1,i=function(i){var s=i.target.getAttribute("action");if("more"==s||!n)return n=!n,function(){var i=t.getCopyText(),s=t.session.getUndoManager().hasUndo();f.replaceChild(r.buildDom(n?["span",!i&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],i&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],i&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],e&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],s&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),f.firstChild)}();"paste"==s?e.readText().then((function(e){t.execCommand(s,e)})):s&&("cut"!=s&&"copy"!=s||(e?e.writeText(t.getCopyText()):document.execCommand("copy")),t.execCommand(s)),f.firstChild.style.display="none",n=!1,"openCommandPalette"!=s&&t.focus()};f=r.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(e){g="menu",e.stopPropagation(),e.preventDefault(),t.textInput.focus()},ontouchend:function(e){e.stopPropagation(),e.preventDefault(),i(e)},onclick:i},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],t.container)}function y(){f||v();var e=t.selection.cursor,n=t.renderer.textToScreenCoordinates(e.row,e.column),i=t.renderer.textToScreenCoordinates(0,0).pageX,s=t.renderer.scrollLeft,r=t.container.getBoundingClientRect();f.style.top=n.pageY-r.top-3+"px",n.pageX-r.left<r.width-70?(f.style.left="",f.style.right="10px"):(f.style.right="",f.style.left=i+s-r.left+"px"),f.style.display="",f.firstChild.style.display="none",t.on("input",S)}function S(e){f&&(f.style.display="none"),t.off("input",S)}function w(){c=null,clearTimeout(c);var e=t.selection.getRange(),n=e.contains(h.row,h.column);!e.isEmpty()&&n||(t.selection.moveToPosition(h),t.selection.selectWord()),g="wait",y()}s.addListener(e,"contextmenu",(function(e){d&&t.textInput.getElement().focus()}),t),s.addListener(e,"touchstart",(function(e){var s=e.touches;if(c||s.length>1)return clearTimeout(c),c=null,a=-1,void(g="zoom");d=t.$mouseHandler.isMousePressed=!0;var r=t.renderer.layerConfig.lineHeight,u=t.renderer.layerConfig.lineHeight,f=e.timeStamp;l=f;var v=s[0],y=v.clientX,S=v.clientY;Math.abs(n-y)+Math.abs(o-S)>r&&(a=-1),n=e.clientX=y,o=e.clientY=S,b=_=0;var k=new i(e,t);if(h=k.getDocumentPosition(),f-a<500&&1==s.length&&!p)m++,e.preventDefault(),e.button=0,function(){c=null,clearTimeout(c),t.selection.moveToPosition(h);var e=m>=2?t.selection.getLineRange(h.row):t.session.getBracketRange(h);e&&!e.isEmpty()?t.selection.setRange(e):t.selection.selectWord(),g="wait"}();else{m=0;var C=t.selection.cursor,x=t.selection.isEmpty()?C:t.selection.anchor,E=t.renderer.$cursorLayer.getPixelPosition(C,!0),L=t.renderer.$cursorLayer.getPixelPosition(x,!0),D=t.renderer.scroller.getBoundingClientRect(),A=t.renderer.layerConfig.offset,T=t.renderer.scrollLeft,N=function(e,t){return(e/=u)*e+(t=t/r-.75)*t};if(e.clientX<D.left)return void(g="zoom");var I=N(e.clientX-D.left-E.left+T,e.clientY-D.top-E.top+A),$=N(e.clientX-D.left-L.left+T,e.clientY-D.top-L.top+A);I<3.5&&$<3.5&&(g=I>$?"cursor":"anchor"),g=$<3.5?"anchor":I<3.5?"cursor":"scroll",c=setTimeout(w,450)}a=f}),t),s.addListener(e,"touchend",(function(e){d=t.$mouseHandler.isMousePressed=!1,u&&clearInterval(u),"zoom"==g?(g="",p=0):c?(t.selection.moveToPosition(h),p=0,y()):"scroll"==g?(p+=60,u=setInterval((function(){p--<=0&&(clearInterval(u),u=null),Math.abs(b)<.01&&(b=0),Math.abs(_)<.01&&(_=0),p<20&&(b*=.9),p<20&&(_*=.9);var e=t.session.getScrollTop();t.renderer.scrollBy(10*b,10*_),e==t.session.getScrollTop()&&(p=0)}),10),S()):y(),clearTimeout(c),c=null}),t),s.addListener(e,"touchmove",(function(e){c&&(clearTimeout(c),c=null);var s=e.touches;if(!(s.length>1||"zoom"==g)){var r=s[0],a=n-r.clientX,u=o-r.clientY;if("wait"==g){if(!(a*a+u*u>4))return e.preventDefault();g="cursor"}n=r.clientX,o=r.clientY,e.clientX=r.clientX,e.clientY=r.clientY;var h=e.timeStamp,d=h-l;if(l=h,"scroll"==g){var f=new i(e,t);f.speed=1,f.wheelX=a,f.wheelY=u,10*Math.abs(a)<Math.abs(u)&&(a=0),10*Math.abs(u)<Math.abs(a)&&(u=0),0!=d&&(b=a/d,_=u/d),t._emit("mousewheel",f),f.propagationStopped||(b=_=0)}else{var p=new i(e,t).getDocumentPosition();"cursor"==g?t.selection.moveCursorToPosition(p):"anchor"==g&&t.selection.setSelectionAnchor(p.row,p.column),t.renderer.scrollCursorIntoView(p),e.preventDefault()}}}),t)}})),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],(function(e,t,n){"use strict";var i=e("../lib/event"),s=e("../lib/useragent"),r=e("./default_handlers").DefaultHandlers,o=e("./default_gutter_handler").GutterHandler,a=e("./mouse_event").MouseEvent,l=e("./dragdrop_handler").DragdropHandler,c=e("./touch_handler").addTouchListeners,u=e("../config"),h=function(){function e(e){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var t=this;this.editor=e,new r(this),new o(this),new l(this);var n=function(t){(!document.hasFocus||!document.hasFocus()||!e.isFocused()&&document.activeElement==(e.textInput&&e.textInput.getElement()))&&window.focus(),e.focus(),setTimeout((function(){e.isFocused()||e.focus()}))},a=e.renderer.getMouseEventTarget();i.addListener(a,"click",this.onMouseEvent.bind(this,"click"),e),i.addListener(a,"mousemove",this.onMouseMove.bind(this,"mousemove"),e),i.addMultiMouseDownListener([a,e.renderer.scrollBarV&&e.renderer.scrollBarV.inner,e.renderer.scrollBarH&&e.renderer.scrollBarH.inner,e.textInput&&e.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",e),i.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"),e),c(e.container,e);var u=e.renderer.$gutter;i.addListener(u,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),e),i.addListener(u,"click",this.onMouseEvent.bind(this,"gutterclick"),e),i.addListener(u,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),e),i.addListener(u,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),e),i.addListener(a,"mousedown",n,e),i.addListener(u,"mousedown",n,e),s.isIE&&e.renderer.scrollBarV&&(i.addListener(e.renderer.scrollBarV.element,"mousedown",n,e),i.addListener(e.renderer.scrollBarH.element,"mousedown",n,e)),e.on("mousemove",(function(n){if(!t.state&&!t.$dragDelay&&t.$dragEnabled){var i=e.renderer.screenToTextCoordinates(n.x,n.y),s=e.session.selection.getRange(),r=e.renderer;!s.isEmpty()&&s.insideStart(i.row,i.column)?r.setCursorStyle("default"):r.setCursorStyle("")}}),e)}return e.prototype.onMouseEvent=function(e,t){this.editor.session&&this.editor._emit(e,new a(t,this.editor))},e.prototype.onMouseMove=function(e,t){var n=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;n&&n.length&&this.editor._emit(e,new a(t,this.editor))},e.prototype.onMouseWheel=function(e,t){var n=new a(t,this.editor);n.speed=2*this.$scrollSpeed,n.wheelX=t.wheelX,n.wheelY=t.wheelY,this.editor._emit(e,n)},e.prototype.setState=function(e){this.state=e},e.prototype.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var n=this.editor,r=this.editor.renderer;r.$isMousePressed=!0;var o=this,l=function(e){if(e){if(s.isWebKit&&!e.which&&o.releaseMouse)return o.releaseMouse();o.x=e.clientX,o.y=e.clientY,t&&t(e),o.mouseEvent=new a(e,o.editor),o.$mouseMoved=!0}},c=function(e){n.off("beforeEndOperation",h),clearInterval(d),n.session&&u(),o[o.state+"End"]&&o[o.state+"End"](e),o.state="",o.isMousePressed=r.$isMousePressed=!1,r.$keepTextAreaAtCursor&&r.$moveTextAreaToCursor(),o.$onCaptureMouseMove=o.releaseMouse=null,e&&o.onMouseEvent("mouseup",e),n.endOperation()},u=function(){o[o.state]&&o[o.state](),o.$mouseMoved=!1};if(s.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout((function(){c(e)}));var h=function(e){o.releaseMouse&&n.curOp.command.name&&n.curOp.selectionChanged&&(o[o.state+"End"]&&o[o.state+"End"](),o.state="",o.releaseMouse())};n.on("beforeEndOperation",h),n.startOperation({command:{name:"mouse"}}),o.$onCaptureMouseMove=l,o.releaseMouse=i.capture(this.editor.container,l,c);var d=setInterval(u,20)},e.prototype.cancelContextMenu=function(){var e=function(t){t&&t.domEvent&&"contextmenu"!=t.domEvent.type||(this.editor.off("nativecontextmenu",e),t&&t.domEvent&&i.stopEvent(t.domEvent))}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)},e.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},e}();h.prototype.releaseMouse=null,u.defineOptions(h.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:s.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=h})),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("../lib/dom"),s=function(e){e.on("click",(function(t){var n=t.getDocumentPosition(),s=e.session,r=s.getFoldAt(n.row,n.column,1);r&&(t.getAccelKey()?s.removeFold(r):s.expandFold(r),t.stop());var o=t.domEvent&&t.domEvent.target;o&&i.hasCssClass(o,"ace_inline_button")&&i.hasCssClass(o,"ace_toggle_wrap")&&(s.setOption("wrap",!s.getUseWrapMode()),e.renderer.scrollCursorIntoView())})),e.on("gutterclick",(function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,i=e.session;i.foldWidgets&&i.foldWidgets[n]&&e.session.onFoldWidgetClick(n,t),e.isFocused()||e.focus(),t.stop()}})),e.on("gutterdblclick",(function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var n=t.getDocumentPosition().row,i=e.session,s=i.getParentFoldRangeData(n,!0),r=s.range||s.firstRange;if(r){n=r.start.row;var o=i.getFoldAt(n,i.getLine(n).length,1);o?i.removeFold(o):(i.addFold("...",r),e.renderer.scrollCursorIntoView({row:r.start.row,column:0}))}t.stop()}}))};t.FoldHandler=s})),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],(function(e,t,n){"use strict";var i=e("../lib/keys"),s=e("../lib/event"),r=function(){function e(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)}return e.prototype.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},e.prototype.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},e.prototype.addKeyboardHandler=function(e,t){if(e){"function"!=typeof e||e.handleKeyboard||(e.handleKeyboard=e);var n=this.$handlers.indexOf(e);-1!=n&&this.$handlers.splice(n,1),void 0==t?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==n&&e.attach&&e.attach(this.$editor)}},e.prototype.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1!=t&&(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},e.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},e.prototype.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map((function(n){return n.getStatusText&&n.getStatusText(t,e)||""})).filter(Boolean).join(" ")},e.prototype.$callKeyboardHandlers=function(e,t,n,i){for(var r,o=!1,a=this.$editor.commands,l=this.$handlers.length;l--&&!((r=this.$handlers[l].handleKeyboard(this.$data,e,t,n,i))&&r.command&&((o="null"==r.command||a.exec(r.command,this.$editor,r.args,i))&&i&&-1!=e&&1!=r.passEvent&&1!=r.command.passEvent&&s.stopEvent(i),o)););return o||-1!=e||(r={command:"insertstring"},o=a.exec("insertstring",this.$editor,t)),o&&this.$editor._signal&&this.$editor._signal("keyboardActivity",r),o},e.prototype.onCommandKey=function(e,t,n){var s=i.keyCodeToString(n);return this.$callKeyboardHandlers(t,s,n,e)},e.prototype.onTextInput=function(e){return this.$callKeyboardHandlers(-1,e)},e}();t.KeyBinding=r})),ace.define("ace/lib/bidiutil",["require","exports","module"],(function(e,t,n){"use strict";var i=0,s=0,r=!1,o=!1,a=!1,l=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],u=0,h=1,d=2,f=3,g=4,p=5,m=6,b=7,_=8,v=9,y=10,S=11,w=12,k=13,C=14,x=15,E=16,L=17,D=18,A=[D,D,D,D,D,D,D,D,D,m,p,m,_,p,D,D,D,D,D,D,D,D,D,D,D,D,D,D,p,p,p,m,_,g,g,S,S,S,g,g,g,g,g,y,v,y,v,v,d,d,d,d,d,d,d,d,d,d,v,g,g,g,g,g,g,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,g,g,g,g,g,g,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,u,g,g,g,g,D,D,D,D,D,D,p,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,v,g,S,S,S,S,g,g,g,g,u,g,g,D,g,g,S,S,d,d,g,u,g,g,g,d,u,g,g,g,g,g],T=[_,_,_,_,_,_,_,_,_,_,_,D,D,D,u,h,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,_,p,k,C,x,E,L,v,S,S,S,S,S,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,v,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,_];function N(e,t,n){if(!(s<e))if(1!=e||1!=i||o)for(var r,a,l,c,u=n.length,h=0;h<u;){if(t[h]>=e){for(r=h+1;r<u&&t[r]>=e;)r++;for(a=h,l=r-1;a<l;a++,l--)c=n[a],n[a]=n[l],n[l]=c;h=r}h++}else n.reverse()}function I(e,t,n,s){var l,c,A,T,N=t[s];switch(N){case u:case h:r=!1;case g:case f:return N;case d:return r?f:d;case b:return r=!0,!0,h;case _:return g;case v:return s<1||s+1>=t.length||(l=n[s-1])!=d&&l!=f||(c=t[s+1])!=d&&c!=f?g:(r&&(c=f),c==l?c:g);case y:return(l=s>0?n[s-1]:p)==d&&s+1<t.length&&t[s+1]==d?d:g;case S:if(s>0&&n[s-1]==d)return d;if(r)return g;for(T=s+1,A=t.length;T<A&&t[T]==S;)T++;return T<A&&t[T]==d?d:g;case w:for(A=t.length,T=s+1;T<A&&t[T]==w;)T++;if(T<A){var I=e[s],$=I>=1425&&I<=2303||64286==I;if(l=t[T],$&&(l==h||l==b))return h}return s<1||(l=t[s-1])==p?g:n[s-1];case p:return r=!1,o=!0,i;case m:return a=!0,g;case k:case C:case E:case L:case x:r=!1;case D:return g}}function $(e){var t=e.charCodeAt(0),n=t>>8;return 0==n?t>191?u:A[t]:5==n?/[\u0591-\u05f4]/.test(e)?h:u:6==n?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(e)?w:/[\u0660-\u0669\u066b-\u066c]/.test(e)?f:1642==t?S:/[\u06f0-\u06f9]/.test(e)?d:b:32==n&&t<=8287?T[255&t]:254==n&&t>=65136?b:g}t.L=u,t.R=h,t.EN=d,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xb7",t.doBidiReorder=function(e,n,u){if(e.length<2)return{};var d=e.split(""),v=new Array(d.length),y=new Array(d.length),S=[];i=u?1:0,function(e,t,n,u){var h=i?c:l,d=null,f=null,g=null,b=0,v=null,y=-1,S=null,w=null,k=[];if(!u)for(S=0,u=[];S<n;S++)u[S]=$(e[S]);for(s=i,r=!1,!1,o=!1,a=!1,w=0;w<n;w++){if(d=b,k[w]=f=I(e,u,k,w),v=240&(b=h[d][f]),b&=15,t[w]=g=h[b][5],v>0)if(16==v){for(S=y;S<w;S++)t[S]=1;y=-1}else y=-1;if(h[b][6])-1==y&&(y=w);else if(y>-1){for(S=y;S<w;S++)t[S]=g;y=-1}u[w]==p&&(t[w]=0),s|=g}if(a)for(S=0;S<n;S++)if(u[S]==m){t[S]=i;for(var C=S-1;C>=0&&u[C]==_;C--)t[C]=i}}(d,S,d.length,n);for(var w=0;w<v.length;v[w]=w,w++);N(2,S,v),N(1,S,v);for(w=0;w<v.length-1;w++)n[w]===f?S[w]=t.AN:S[w]===h&&(n[w]>b&&n[w]<k||n[w]===g||n[w]===D)?S[w]=t.ON_R:w>0&&"\u0644"===d[w-1]&&/\u0622|\u0623|\u0625|\u0627/.test(d[w])&&(S[w-1]=S[w]=t.R_H,w++);d[d.length-1]===t.DOT&&(S[d.length-1]=t.B),"\u202b"===d[0]&&(S[0]=t.RLE);for(w=0;w<v.length;w++)y[w]=S[v[w]];return{logicalFromVisual:v,bidiLevels:y}},t.hasBidiCharacters=function(e,t){for(var n=!1,i=0;i<e.length;i++)t[i]=$(e.charAt(i)),n||t[i]!=h&&t[i]!=b&&t[i]!=f||(n=!0);return n},t.getVisualFromLogicalIdx=function(e,t){for(var n=0;n<t.logicalFromVisual.length;n++)if(t.logicalFromVisual[n]==e)return n;return 0}})),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],(function(e,t,n){"use strict";var i=e("./lib/bidiutil"),s=e("./lib/lang"),r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,o=function(){function e(e){this.session=e,this.bidiMap={},this.currentRow=null,this.bidiUtil=i,this.charWidths=[],this.EOL="\xac",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xb6",this.RLE="\u202b",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=r.test(e.getValue())}return e.prototype.isBidiRow=function(e,t,n){return!!this.seenBidi&&(e!==this.currentRow&&(this.currentRow=e,this.updateRowLine(t,n),this.updateBidiMap()),this.bidiMap.bidiLevels)},e.prototype.onChange=function(e){this.seenBidi?this.currentRow=null:"insert"==e.action&&r.test(e.lines.join("\n"))&&(this.seenBidi=!0,this.currentRow=null)},e.prototype.getDocumentRow=function(){var e=0,t=this.session.$screenRowCache;if(t.length){var n=this.session.$getRowCacheIndex(t,this.currentRow);n>=0&&(e=this.session.$docRowCache[n])}return e},e.prototype.getSplitIndex=function(){var e=0,t=this.session.$screenRowCache;if(t.length)for(var n,i=this.session.$getRowCacheIndex(t,this.currentRow);this.currentRow-e>0&&(n=this.session.$getRowCacheIndex(t,this.currentRow-e-1))===i;)i=n,e++;else e=this.currentRow;return e},e.prototype.updateRowLine=function(e,t){void 0===e&&(e=this.getDocumentRow());var n=e===this.session.getLength()-1?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(e),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var r=this.session.$wrapData[e];r&&(void 0===t&&(t=this.getSplitIndex()),t>0&&r.length?(this.wrapIndent=r.indent,this.wrapOffset=this.wrapIndent*this.charWidths[i.L],this.line=t<r.length?this.line.substring(r[t-1],r[t]):this.line.substring(r[r.length-1])):this.line=this.line.substring(0,r[t]),t==r.length&&(this.line+=this.showInvisibles?n:i.DOT))}else this.line+=this.showInvisibles?n:i.DOT;var o,a=this.session,l=0;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,(function(e,t){return"\t"===e||a.isFullWidth(e.charCodeAt(0))?(o="\t"===e?a.getScreenTabSize(t+l):2,l+=o-1,s.stringRepeat(i.DOT,o)):e})),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==i.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},e.prototype.updateBidiMap=function(){var e=[];i.hasBidiCharacters(this.line,e)||this.isRtlDir?this.bidiMap=i.doBidiReorder(this.line,e,this.isRtlDir):this.bidiMap={}},e.prototype.markAsDirty=function(){this.currentRow=null},e.prototype.updateCharacterWidths=function(e){if(this.characterWidth!==e.$characterSize.width){this.fontMetrics=e;var t=this.characterWidth=e.$characterSize.width,n=e.$measureCharWidth("\u05d4");this.charWidths[i.L]=this.charWidths[i.EN]=this.charWidths[i.ON_R]=t,this.charWidths[i.R]=this.charWidths[i.AN]=n,this.charWidths[i.R_H]=.45*n,this.charWidths[i.B]=this.charWidths[i.RLE]=0,this.currentRow=null}},e.prototype.setShowInvisibles=function(e){this.showInvisibles=e,this.currentRow=null},e.prototype.setEolChar=function(e){this.EOL=e},e.prototype.setContentWidth=function(e){this.contentWidth=e},e.prototype.isRtlLine=function(e){return!!this.$isRtl||(void 0!=e?this.session.getLine(e).charAt(0)==this.RLE:this.isRtlDir)},e.prototype.setRtlDirection=function(e,t){for(var n=e.getCursorPosition(),i=e.selection.getSelectionAnchor().row;i<=n.row;i++)t||e.session.getLine(i).charAt(0)!==e.session.$bidiHandler.RLE?t&&e.session.getLine(i).charAt(0)!==e.session.$bidiHandler.RLE&&e.session.doc.insert({column:0,row:i},e.session.$bidiHandler.RLE):e.session.doc.removeInLine(i,0,1)},e.prototype.getPosLeft=function(e){e-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,n=e>t?this.session.getOverwrite()?e:e-1:t,s=i.getVisualFromLogicalIdx(n,this.bidiMap),r=this.bidiMap.bidiLevels,o=0;!this.session.getOverwrite()&&e<=t&&r[s]%2!==0&&s++;for(var a=0;a<s;a++)o+=this.charWidths[r[a]];return!this.session.getOverwrite()&&e>t&&r[s]%2===0&&(o+=this.charWidths[r[s]]),this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(o+=this.rtlLineOffset),o},e.prototype.getSelections=function(e,t){var n,i=this.bidiMap,s=i.bidiLevels,r=[],o=0,a=Math.min(e,t)-this.wrapIndent,l=Math.max(e,t)-this.wrapIndent,c=!1,u=!1,h=0;this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var d,f=0;f<s.length;f++)d=i.logicalFromVisual[f],n=s[f],(c=d>=a&&d<l)&&!u?h=o:!c&&u&&r.push({left:h,width:o-h}),o+=this.charWidths[n],u=c;if(c&&f===s.length&&r.push({left:h,width:o-h}),this.isRtlDir)for(var g=0;g<r.length;g++)r[g].left+=this.rtlLineOffset;return r},e.prototype.offsetToCol=function(e){this.isRtlDir&&(e-=this.rtlLineOffset);var t=0,n=(e=Math.max(e,0),0),i=0,s=this.bidiMap.bidiLevels,r=this.charWidths[s[i]];for(this.wrapIndent&&(e-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);e>n+r/2;){if(n+=r,i===s.length-1){r=0;break}r=this.charWidths[s[++i]]}return i>0&&s[i-1]%2!==0&&s[i]%2===0?(e<n&&i--,t=this.bidiMap.logicalFromVisual[i]):i>0&&s[i-1]%2===0&&s[i]%2!==0?t=1+(e>n?this.bidiMap.logicalFromVisual[i]:this.bidiMap.logicalFromVisual[i-1]):this.isRtlDir&&i===s.length-1&&0===r&&s[i-1]%2===0||!this.isRtlDir&&0===i&&s[i]%2!==0?t=1+this.bidiMap.logicalFromVisual[i]:(i>0&&s[i-1]%2!==0&&0!==r&&i--,t=this.bidiMap.logicalFromVisual[i]),0===t&&this.isRtlDir&&t++,t+this.wrapIndent},e}();t.BidiHandler=o})),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],(function(e,t,n){"use strict";var i=e("./lib/oop"),s=e("./lib/lang"),r=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,a=function(){function e(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var t=this;this.cursor.on("change",(function(e){t.$cursorChanged=!0,t.$silent||t._emit("changeCursor"),t.$isEmpty||t.$silent||t._emit("changeSelection"),t.$keepDesiredColumnOnChange||e.old.column==e.value.column||(t.$desiredColumn=null)})),this.anchor.on("change",(function(){t.$anchorChanged=!0,t.$isEmpty||t.$silent||t._emit("changeSelection")}))}return e.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},e.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},e.prototype.getCursor=function(){return this.lead.getPosition()},e.prototype.setAnchor=function(e,t){this.$isEmpty=!1,this.anchor.setPosition(e,t)},e.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},e.prototype.getSelectionLead=function(){return this.lead.getPosition()},e.prototype.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},e.prototype.getRange=function(){var e=this.anchor,t=this.lead;return this.$isEmpty?o.fromPoints(t,t):this.isBackwards()?o.fromPoints(t,e):o.fromPoints(e,t)},e.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},e.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},e.prototype.setRange=function(e,t){var n=t?e.end:e.start,i=t?e.start:e.end;this.$setSelection(n.row,n.column,i.row,i.column)},e.prototype.$setSelection=function(e,t,n,i){if(!this.$silent){var s=this.$isEmpty,r=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(e,t),this.cursor.setPosition(n,i),this.$isEmpty=!o.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||s!=this.$isEmpty||r)&&this._emit("changeSelection")}},e.prototype.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},e.prototype.selectTo=function(e,t){this.$moveSelection((function(){this.moveCursorTo(e,t)}))},e.prototype.selectToPosition=function(e){this.$moveSelection((function(){this.moveCursorToPosition(e)}))},e.prototype.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},e.prototype.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},e.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},e.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},e.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},e.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},e.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},e.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},e.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},e.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},e.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},e.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},e.prototype.getWordRange=function(e,t){if("undefined"==typeof t){var n=e||this.lead;e=n.row,t=n.column}return this.session.getWordRange(e,t)},e.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},e.prototype.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},e.prototype.getLineRange=function(e,t){var n,i="number"==typeof e?e:this.lead.row,s=this.session.getFoldLine(i);return s?(i=s.start.row,n=s.end.row):n=i,!0===t?new o(i,0,n,this.session.getLine(n).length):new o(i,0,n+1,0)},e.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},e.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},e.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},e.prototype.wouldMoveIntoSoftTab=function(e,t,n){var i=e.column,s=e.column+t;return n<0&&(i=e.column-t,s=e.column),this.session.isTabStop(e)&&this.doc.getLine(e.row).slice(i,s).split(" ").length-1==t},e.prototype.moveCursorLeft=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(e.start.row,e.start.column);else if(0===t.column)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var n=this.session.getTabSize();this.wouldMoveIntoSoftTab(t,n,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-n):this.moveCursorBy(0,-1)}},e.prototype.moveCursorRight=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(e.end.row,e.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var n=this.session.getTabSize();t=this.lead;this.wouldMoveIntoSoftTab(t,n,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,n):this.moveCursorBy(0,1)}},e.prototype.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,n=this.session.documentToScreenRow(e,t),i=this.session.screenToDocumentPosition(n,0),s=this.session.getDisplayLine(e,null,i.row,i.column).match(/^\s*/);s[0].length==t||this.session.$useEmacsStyleLineStart||(i.column+=s[0].length),this.moveCursorToPosition(i)},e.prototype.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var n=this.session.getLine(t.row);if(t.column==n.length){var i=n.search(/\s+$/);i>0&&(t.column=i)}}this.moveCursorTo(t.row,t.column)},e.prototype.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},e.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},e.prototype.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),i=n.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var s=this.session.getFoldAt(e,t,1);if(s)this.moveCursorTo(s.end.row,s.end.column);else{if(this.session.nonTokenRe.exec(i)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,i=n.substring(t)),t>=n.length)return this.moveCursorTo(e,n.length),this.moveCursorRight(),void(e<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(i)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(e,t)}},e.prototype.moveCursorLongWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))this.moveCursorTo(e.start.row,e.start.column);else{var i=this.session.getFoldStringAt(t,n,-1);null==i&&(i=this.doc.getLine(t).substring(0,n));var r=s.stringReverse(i);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(r)&&(n-=this.session.nonTokenRe.lastIndex,r=r.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),n<=0)return this.moveCursorTo(t,0),this.moveCursorLeft(),void(t>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(r)&&(n-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,n)}},e.prototype.$shortWordEndIndex=function(e){var t,n=0,i=/\s/,s=this.session.tokenRe;if(s.lastIndex=0,this.session.tokenRe.exec(e))n=this.session.tokenRe.lastIndex;else{for(;(t=e[n])&&i.test(t);)n++;if(n<1)for(s.lastIndex=0;(t=e[n])&&!s.test(t);)if(s.lastIndex=0,n++,i.test(t)){if(n>2){n--;break}for(;(t=e[n])&&i.test(t);)n++;if(n>2)break}}return s.lastIndex=0,n},e.prototype.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,n=this.doc.getLine(e),i=n.substring(t),s=this.session.getFoldAt(e,t,1);if(s)return this.moveCursorTo(s.end.row,s.end.column);if(t==n.length){var r=this.doc.getLength();do{e++,i=this.doc.getLine(e)}while(e<r&&/^\s*$/.test(i));/^\s+/.test(i)||(i=""),t=0}var o=this.$shortWordEndIndex(i);this.moveCursorTo(e,t+o)},e.prototype.moveCursorShortWordLeft=function(){var e,t=this.lead.row,n=this.lead.column;if(e=this.session.getFoldAt(t,n,-1))return this.moveCursorTo(e.start.row,e.start.column);var i=this.session.getLine(t).substring(0,n);if(0===n){do{t--,i=this.doc.getLine(t)}while(t>0&&/^\s*$/.test(i));n=i.length,/\s+$/.test(i)||(i="")}var r=s.stringReverse(i),o=this.$shortWordEndIndex(r);return this.moveCursorTo(t,n-o)},e.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},e.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},e.prototype.moveCursorBy=function(e,t){var n,i=this.session.documentToScreenPosition(this.lead.row,this.lead.column);if(0===t&&(0!==e&&(this.session.$bidiHandler.isBidiRow(i.row,this.lead.row)?(n=this.session.$bidiHandler.getPosLeft(i.column),i.column=Math.round(n/this.session.$bidiHandler.charWidths[0])):n=i.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?i.column=this.$desiredColumn:this.$desiredColumn=i.column),0!=e&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var s=this.session.lineWidgets[this.lead.row];e<0?e-=s.rowsAbove||0:e>0&&(e+=s.rowCount-(s.rowsAbove||0))}var r=this.session.screenToDocumentPosition(i.row+e,i.column,n);0!==e&&0===t&&r.row===this.lead.row&&(r.column,this.lead.column),this.moveCursorTo(r.row,r.column+t,0===t)},e.prototype.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},e.prototype.moveCursorTo=function(e,t,n){var i=this.session.getFoldAt(e,t,1);i&&(e=i.start.row,t=i.start.column),this.$keepDesiredColumnOnChange=!0;var s=this.session.getLine(e);/[\uDC00-\uDFFF]/.test(s.charAt(t))&&s.charAt(t-1)&&(this.lead.row==e&&this.lead.column==t+1?t-=1:t+=1),this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,n||(this.$desiredColumn=null)},e.prototype.moveCursorToScreen=function(e,t,n){var i=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(i.row,i.column,n)},e.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},e.prototype.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},e.prototype.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},e.prototype.getRangeOfMovements=function(e){var t=this.getCursor();try{e(this);var n=this.getCursor();return o.fromPoints(t,n)}catch(i){return o.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},e.prototype.toJSON=function(){if(this.rangeCount)var e=this.ranges.map((function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t}));else(e=this.getRange()).isBackwards=this.isBackwards();return e},e.prototype.fromJSON=function(e){if(void 0==e.start){if(this.rangeList&&e.length>1){this.toSingleRange(e[0]);for(var t=e.length;t--;){var n=o.fromPoints(e[t].start,e[t].end);e[t].isBackwards&&(n.cursor=n.start),this.addRange(n,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},e.prototype.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0},e}();a.prototype.setSelectionAnchor=a.prototype.setAnchor,a.prototype.getSelectionAnchor=a.prototype.getAnchor,a.prototype.setSelectionRange=a.prototype.setRange,i.implement(a.prototype,r),t.Selection=a})),ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],(function(e,t,n){"use strict";var i=e("./lib/report_error").reportError,s=2e3,r=function(){function e(e){for(var t in this.splitRegex,this.states=e,this.regExps={},this.matchMappings={},this.states){for(var n=this.states[t],i=[],s=0,r=this.matchMappings[t]={defaultToken:"text"},o="g",a=[],l=0;l<n.length;l++){var c=n[l];if(c.defaultToken&&(r.defaultToken=c.defaultToken),c.caseInsensitive&&-1===o.indexOf("i")&&(o+="i"),c.unicode&&-1===o.indexOf("u")&&(o+="u"),null!=c.regex){c.regex instanceof RegExp&&(c.regex=c.regex.toString().slice(1,-1));var u=c.regex,h=new RegExp("(?:("+u+")|(.))").exec("a").length-2;Array.isArray(c.token)?1==c.token.length||1==h?c.token=c.token[0]:h-1!=c.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:c,groupCount:h-1}),c.token=c.token[0]):(c.tokenArray=c.token,c.token=null,c.onMatch=this.$arrayTokens):"function"!=typeof c.token||c.onMatch||(c.onMatch=h>1?this.$applyToken:c.token),h>1&&(/\\\d/.test(c.regex)?u=c.regex.replace(/\\([0-9]+)/g,(function(e,t){return"\\"+(parseInt(t,10)+s+1)})):(h=1,u=this.removeCapturingGroups(c.regex)),c.splitRegex||"string"==typeof c.token||a.push(c)),r[s]=l,s+=h,i.push(u),c.onMatch||(c.onMatch=null)}}i.length||(r[0]=0,i.push("$")),a.forEach((function(e){e.splitRegex=this.createSplitterRegexp(e.regex,o)}),this),this.regExps[t]=new RegExp("("+i.join(")|(")+")|($)",o)}}return e.prototype.$setMaxTokenCount=function(e){s=0|e},e.prototype.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),n=this.token.apply(this,t);if("string"===typeof n)return[{type:n,value:e}];for(var i=[],s=0,r=n.length;s<r;s++)t[s]&&(i[i.length]={type:n[s],value:t[s]});return i},e.prototype.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var n=[],i=this.tokenArray,s=0,r=i.length;s<r;s++)t[s+1]&&(n[n.length]={type:i[s],value:t[s+1]});return n},e.prototype.removeCapturingGroups=function(e){return e.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,(function(e,t){return t?"(?:":e}))},e.prototype.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var n=0,i=!1,s={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,(function(e,t,r,o,a,l){return i?i="]"!=a:a?i=!0:o?(n==s.stack&&(s.end=l+1,s.stack=-1),n--):r&&(n++,1!=r.length&&(s.stack=n,s.start=l)),e})),null!=s.end&&/^\)*$/.test(e.substr(s.end))&&(e=e.substring(0,s.start)+e.substr(s.end))}return"^"!=e.charAt(0)&&(e="^"+e),"$"!=e.charAt(e.length-1)&&(e+="$"),new RegExp(e,(t||"").replace("g",""))},e.prototype.getLineTokens=function(e,t){if(t&&"string"!=typeof t){var n=t.slice(0);"#tmp"===(t=n[0])&&(n.shift(),t=n.shift())}else n=[];var i=t||"start",r=this.states[i];r||(i="start",r=this.states[i]);var o=this.matchMappings[i],a=this.regExps[i];a.lastIndex=0;for(var l,c=[],u=0,h=0,d={type:null,value:""};l=a.exec(e);){var f=o.defaultToken,g=null,p=l[0],m=a.lastIndex;if(m-p.length>u){var b=e.substring(u,m-p.length);d.type==f?d.value+=b:(d.type&&c.push(d),d={type:f,value:b})}for(var _=0;_<l.length-2;_++)if(void 0!==l[_+1]){f=(g=r[o[_]]).onMatch?g.onMatch(p,i,n,e):g.token,g.next&&(i="string"==typeof g.next?g.next:g.next(i,n),(r=this.states[i])||(this.reportError("state doesn't exist",i),i="start",r=this.states[i]),o=this.matchMappings[i],u=m,(a=this.regExps[i]).lastIndex=m),g.consumeLineEnd&&(u=m);break}if(p)if("string"===typeof f)g&&!1===g.merge||d.type!==f?(d.type&&c.push(d),d={type:f,value:p}):d.value+=p;else if(f){d.type&&c.push(d),d={type:null,value:""};for(_=0;_<f.length;_++)c.push(f[_])}if(u==e.length)break;if(u=m,h++>s){for(h>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});u<e.length;)d.type&&c.push(d),d={value:e.substring(u,u+=500),type:"overflow"};i="start",n=[];break}}return d.type&&c.push(d),n.length>1&&n[0]!==i&&n.unshift("#tmp",i),{tokens:c,state:n.length?n:i}},e}();r.prototype.reportError=i,t.Tokenizer=r})),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],(function(e,t,n){"use strict";var i,s=e("../lib/deep_copy").deepCopy;(function(){this.addRules=function(e,t){if(t)for(var n in e){for(var i=e[n],s=0;s<i.length;s++){var r=i[s];(r.next||r.onMatch)&&("string"==typeof r.next&&0!==r.next.indexOf(t)&&(r.next=t+r.next),r.nextState&&0!==r.nextState.indexOf(t)&&(r.nextState=t+r.nextState))}this.$rules[t+n]=i}else for(var n in e)this.$rules[n]=e[n]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,i,r){var o="function"==typeof e?(new e).getRules():e;if(i)for(var a=0;a<i.length;a++)i[a]=t+i[a];else for(var l in i=[],o)i.push(t+l);if(this.addRules(o,t),n){var c=Array.prototype[r?"push":"unshift"];for(a=0;a<i.length;a++)c.apply(this.$rules[i[a]],s(n))}this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return("start"!=e||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){var n=0,i=this.$rules;Object.keys(i).forEach((function s(r){var o=i[r];o.processed=!0;for(var a=0;a<o.length;a++){var l=o[a],c=null;Array.isArray(l)&&(c=l,l={}),!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token=l.token+".start",l.push=!0);var u=l.next||l.push;if(u&&Array.isArray(u)){var h=l.stateName;h||("string"!=typeof(h=l.token)&&(h=h[0]||""),i[h]&&(h+=n++)),i[h]=u,l.next=h,s(h)}else"pop"==u&&(l.next=t);if(l.push&&(l.nextState=l.next||l.push,l.next=e,delete l.push),l.rules)for(var d in l.rules)i[d]?i[d].push&&i[d].push.apply(i[d],l.rules[d]):i[d]=l.rules[d];var f="string"==typeof l?l:l.include;if(f&&("$self"===f&&(f="start"),c=Array.isArray(f)?f.map((function(e){return i[e]})):i[f]),c){var g=[a,1].concat(c);l.noEscape&&(g=g.filter((function(e){return!e.next}))),o.splice.apply(o,g),a--}l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}}),this)},this.createKeywordMapper=function(e,t,n,i){var s=Object.create(null);return this.$keywordList=[],Object.keys(e).forEach((function(t){for(var r=e[t].split(i||"|"),o=r.length;o--;){var a=r[o];this.$keywordList.push(a),n&&(a=a.toLowerCase()),s[a]=t}}),this),e=null,n?function(e){return s[e.toLowerCase()]||t}:function(e){return s[e]||t}},this.getKeywords=function(){return this.$keywords}}).call((i=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}}).prototype),t.TextHighlightRules=i})),ace.define("ace/mode/behaviour",["require","exports","module"],(function(e,t,n){"use strict";var i;(function(){this.add=function(e,t,n){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=n},this.addBehaviours=function(e){for(var t in e)for(var n in e[t])this.add(t,n,e[t][n])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"===typeof e)var n=(new e).getBehaviours(t);else n=e.getBehaviours(t);this.addBehaviours(n)},this.getBehaviours=function(e){if(e){for(var t={},n=0;n<e.length;n++)this.$behaviours[e[n]]&&(t[e[n]]=this.$behaviours[e[n]]);return t}return this.$behaviours}}).call((i=function(){this.$behaviours={}}).prototype),t.Behaviour=i})),ace.define("ace/token_iterator",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=e("./range").Range,s=function(){function e(e,t,n){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var i=e.getTokenAt(t,n);this.$tokenIndex=i?i.index:-1}return e.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},e.prototype.stepForward=function(){var e;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e||(e=this.$session.getLength()),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},e.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},e.prototype.getCurrentTokenRow=function(){return this.$row},e.prototype.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,n=e[t].start;if(void 0!==n)return n;for(n=0;t>0;)n+=e[t-=1].value.length;return n},e.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},e.prototype.getCurrentTokenRange=function(){var e=this.$rowTokens[this.$tokenIndex],t=this.getCurrentTokenColumn();return new i(this.$row,t,this.$row,t+e.value.length)},e}();t.TokenIterator=s})),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],(function(e,t,n){"use strict";var i,s,r=e("../../lib/oop"),o=e("../behaviour").Behaviour,a=e("../../token_iterator").TokenIterator,l=e("../../lib/lang"),c=["text","paren.rparen","rparen","paren","punctuation.operator"],u=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],h={},d={'"':'"',"'":"'"},f=function(e){var t=-1;if(e.multiSelect&&(t=e.selection.index,h.rangeCount!=e.multiSelect.rangeCount&&(h={rangeCount:e.multiSelect.rangeCount})),h[t])return i=h[t];i=h[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},g=function(e,t,n,i){var s=e.end.row-e.start.row;return{text:n+t+i,selection:[0,e.start.column+1,s,e.end.column+(s?0:1)]}};(s=function(e){e=e||{},this.add("braces","insertion",(function(t,n,r,o,a){var c=r.getCursorPosition(),u=o.doc.getLine(c.row);if("{"==a){f(r);var h=r.getSelectionRange(),d=o.doc.getTextRange(h);if(""!==d&&"{"!==d&&r.getWrapBehavioursEnabled())return g(h,d,"{","}");if(s.isSaneInsertion(r,o))return/[\]\}\)]/.test(u[c.column])||r.inMultiSelectMode||e.braces?(s.recordAutoInsert(r,o,"}"),{text:"{}",selection:[1,1]}):(s.recordMaybeInsert(r,o,"{"),{text:"{",selection:[1,1]})}else if("}"==a){if(f(r),"}"==u.substring(c.column,c.column+1))if(null!==o.$findOpeningBracket("}",{column:c.column+1,row:c.row})&&s.isAutoInsertedClosing(c,u,a))return s.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if("\n"==a||"\r\n"==a){f(r);var p="";if(s.isMaybeInsertedClosing(c,u)&&(p=l.stringRepeat("}",i.maybeInsertedBrackets),s.clearMaybeInsertedClosing()),"}"===u.substring(c.column,c.column+1)){var m=o.findMatchingBracket({row:c.row,column:c.column+1},"}");if(!m)return null;var b=this.$getIndent(o.getLine(m.row))}else{if(!p)return void s.clearMaybeInsertedClosing();b=this.$getIndent(u)}var _=b+o.getTabString();return{text:"\n"+_+"\n"+b+p,selection:[1,_.length,1,_.length]}}s.clearMaybeInsertedClosing()}})),this.add("braces","deletion",(function(e,t,n,s,r){var o=s.doc.getTextRange(r);if(!r.isMultiLine()&&"{"==o){if(f(n),"}"==s.doc.getLine(r.start.row).substring(r.end.column,r.end.column+1))return r.end.column++,r;i.maybeInsertedBrackets--}})),this.add("parens","insertion",(function(e,t,n,i,r){if("("==r){f(n);var o=n.getSelectionRange(),a=i.doc.getTextRange(o);if(""!==a&&n.getWrapBehavioursEnabled())return g(o,a,"(",")");if(s.isSaneInsertion(n,i))return s.recordAutoInsert(n,i,")"),{text:"()",selection:[1,1]}}else if(")"==r){f(n);var l=n.getCursorPosition(),c=i.doc.getLine(l.row);if(")"==c.substring(l.column,l.column+1))if(null!==i.$findOpeningBracket(")",{column:l.column+1,row:l.row})&&s.isAutoInsertedClosing(l,c,r))return s.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("parens","deletion",(function(e,t,n,i,s){var r=i.doc.getTextRange(s);if(!s.isMultiLine()&&"("==r&&(f(n),")"==i.doc.getLine(s.start.row).substring(s.start.column+1,s.start.column+2)))return s.end.column++,s})),this.add("brackets","insertion",(function(e,t,n,i,r){if("["==r){f(n);var o=n.getSelectionRange(),a=i.doc.getTextRange(o);if(""!==a&&n.getWrapBehavioursEnabled())return g(o,a,"[","]");if(s.isSaneInsertion(n,i))return s.recordAutoInsert(n,i,"]"),{text:"[]",selection:[1,1]}}else if("]"==r){f(n);var l=n.getCursorPosition(),c=i.doc.getLine(l.row);if("]"==c.substring(l.column,l.column+1))if(null!==i.$findOpeningBracket("]",{column:l.column+1,row:l.row})&&s.isAutoInsertedClosing(l,c,r))return s.popAutoInsertedClosing(),{text:"",selection:[1,1]}}})),this.add("brackets","deletion",(function(e,t,n,i,s){var r=i.doc.getTextRange(s);if(!s.isMultiLine()&&"["==r&&(f(n),"]"==i.doc.getLine(s.start.row).substring(s.start.column+1,s.start.column+2)))return s.end.column++,s})),this.add("string_dquotes","insertion",(function(e,t,n,i,s){var r=i.$mode.$quotes||d;if(1==s.length&&r[s]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(s))return;f(n);var o=s,a=n.getSelectionRange(),l=i.doc.getTextRange(a);if(!(""===l||1==l.length&&r[l])&&n.getWrapBehavioursEnabled())return g(a,l,o,o);if(!l){var c=n.getCursorPosition(),u=i.doc.getLine(c.row),h=u.substring(c.column-1,c.column),p=u.substring(c.column,c.column+1),m=i.getTokenAt(c.row,c.column),b=i.getTokenAt(c.row,c.column+1);if("\\"==h&&m&&/escape/.test(m.type))return null;var _,v=m&&/string|escape/.test(m.type),y=!b||/string|escape/.test(b.type);if(p==o)(_=v!==y)&&/string\.end/.test(b.type)&&(_=!1);else{if(v&&!y)return null;if(v&&y)return null;var S=i.$mode.tokenRe;S.lastIndex=0;var w=S.test(h);S.lastIndex=0;var k=S.test(p),C=i.$mode.$pairQuotesAfter;if(!(C&&C[o]&&C[o].test(h))&&w||k)return null;if(p&&!/[\s;,.})\]\\]/.test(p))return null;var x=u[c.column-2];if(h==o&&(x==o||S.test(x)))return null;_=!0}return{text:_?o+o:"",selection:[1,1]}}}})),this.add("string_dquotes","deletion",(function(e,t,n,i,s){var r=i.$mode.$quotes||d,o=i.doc.getTextRange(s);if(!s.isMultiLine()&&r.hasOwnProperty(o)&&(f(n),i.doc.getLine(s.start.row).substring(s.start.column+1,s.start.column+2)==o))return s.end.column++,s})),!1!==e.closeDocComment&&this.add("doc comment end","insertion",(function(e,t,n,i,s){if("doc-start"===e&&("\n"===s||"\r\n"===s)&&n.selection.isEmpty()){var r=n.getCursorPosition(),o=i.doc.getLine(r.row),a=i.doc.getLine(r.row+1),l=this.$getIndent(o);if(/\s*\*/.test(a))return/^\s*\*/.test(o)?{text:s+l+"* ",selection:[1,3+l.length,1,3+l.length]}:{text:s+l+" * ",selection:[1,3+l.length,1,3+l.length]};if(/\/\*\*/.test(o.substring(0,r.column)))return{text:s+l+" * "+s+" "+l+"*/",selection:[1,4+l.length,1,4+l.length]}}}))}).isSaneInsertion=function(e,t){var n=e.getCursorPosition(),i=new a(t,n.row,n.column);if(!this.$matchTokenType(i.getCurrentToken()||"text",c)){if(/[)}\]]/.test(e.session.getLine(n.row)[n.column]))return!0;var s=new a(t,n.row,n.column+1);if(!this.$matchTokenType(s.getCurrentToken()||"text",c))return!1}return i.stepForward(),i.getCurrentTokenRow()!==n.row||this.$matchTokenType(i.getCurrentToken()||"text",u)},s.$matchTokenType=function(e,t){return t.indexOf(e.type||e)>-1},s.recordAutoInsert=function(e,t,n){var s=e.getCursorPosition(),r=t.doc.getLine(s.row);this.isAutoInsertedClosing(s,r,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0),i.autoInsertedRow=s.row,i.autoInsertedLineEnd=n+r.substr(s.column),i.autoInsertedBrackets++},s.recordMaybeInsert=function(e,t,n){var s=e.getCursorPosition(),r=t.doc.getLine(s.row);this.isMaybeInsertedClosing(s,r)||(i.maybeInsertedBrackets=0),i.maybeInsertedRow=s.row,i.maybeInsertedLineStart=r.substr(0,s.column)+n,i.maybeInsertedLineEnd=r.substr(s.column),i.maybeInsertedBrackets++},s.isAutoInsertedClosing=function(e,t,n){return i.autoInsertedBrackets>0&&e.row===i.autoInsertedRow&&n===i.autoInsertedLineEnd[0]&&t.substr(e.column)===i.autoInsertedLineEnd},s.isMaybeInsertedClosing=function(e,t){return i.maybeInsertedBrackets>0&&e.row===i.maybeInsertedRow&&t.substr(e.column)===i.maybeInsertedLineEnd&&t.substr(0,e.column)==i.maybeInsertedLineStart},s.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1),i.autoInsertedBrackets--},s.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)},r.inherits(s,o),t.CstyleBehaviour=s})),ace.define("ace/unicode",["require","exports","module"],(function(e,t,n){"use strict";for(var i=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],s=0,r=[],o=0;o<i.length;o+=2)r.push(s+=i[o]),i[o+1]&&r.push(45,s+=i[o+1]);t.wordChars=String.fromCharCode.apply(null,r)})),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],(function(e,t,n){"use strict";var i,s=e("../config"),r=e("../tokenizer").Tokenizer,o=e("./text_highlight_rules").TextHighlightRules,a=e("./behaviour/cstyle").CstyleBehaviour,l=e("../unicode"),c=e("../lib/lang"),u=e("../token_iterator").TokenIterator,h=e("../range").Range;(function(){this.$defaultBehaviour=new a,this.tokenRe=new RegExp("^["+l.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+l.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new r(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,n,i){var s=t.doc,r=!0,o=!0,a=1/0,l=t.getTabSize(),u=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))p=this.lineCommentStart.map(c.escapeRegExp).join("|"),f=this.lineCommentStart[0];else p=c.escapeRegExp(this.lineCommentStart),f=this.lineCommentStart;p=new RegExp("^(\\s*)(?:"+p+") ?"),u=t.getUseSoftTabs();_=function(e,t){var n=e.match(p);if(n){var i=n[1].length,r=n[0].length;d(e,i,r)||" "!=n[0][r-1]||r--,s.removeInLine(t,i,r)}};var h=f+" ",d=(b=function(e,t){r&&!/\S/.test(e)||(d(e,a,a)?s.insertInLine({row:t,column:a},h):s.insertInLine({row:t,column:a},f))},v=function(e,t){return p.test(e)},function(e,t,n){for(var i=0;t--&&" "==e.charAt(t);)i++;if(i%l!=0)return!1;for(i=0;" "==e.charAt(n++);)i++;return l>2?i%l!=l-1:i%l==0})}else{if(!this.blockComment)return!1;var f=this.blockComment.start,g=this.blockComment.end,p=new RegExp("^(\\s*)(?:"+c.escapeRegExp(f)+")"),m=new RegExp("(?:"+c.escapeRegExp(g)+")\\s*$"),b=function(e,t){v(e,t)||r&&!/\S/.test(e)||(s.insertInLine({row:t,column:e.length},g),s.insertInLine({row:t,column:a},f))},_=function(e,t){var n;(n=e.match(m))&&s.removeInLine(t,e.length-n[0].length,e.length),(n=e.match(p))&&s.removeInLine(t,n[1].length,n[0].length)},v=function(e,n){if(p.test(e))return!0;for(var i=t.getTokens(n),s=0;s<i.length;s++)if("comment"===i[s].type)return!0}}function y(e){for(var t=n;t<=i;t++)e(s.getLine(t),t)}var S=1/0;y((function(e,t){var n=e.search(/\S/);-1!==n?(n<a&&(a=n),o&&!v(e,t)&&(o=!1)):S>e.length&&(S=e.length)})),a==1/0&&(a=S,r=!1,o=!1),u&&a%l!=0&&(a=Math.floor(a/l)*l),y(o?_:b)},this.toggleBlockComment=function(e,t,n,i){var s=this.blockComment;if(s){!s.start&&s[0]&&(s=s[0]);var r,o,a=(p=new u(t,i.row,i.column)).getCurrentToken(),l=(t.selection,t.selection.toOrientedRange());if(a&&/comment/.test(a.type)){for(var c,d;a&&/comment/.test(a.type);){if(-1!=(m=a.value.indexOf(s.start))){var f=p.getCurrentTokenRow(),g=p.getCurrentTokenColumn()+m;c=new h(f,g,f,g+s.start.length);break}a=p.stepBackward()}var p;for(a=(p=new u(t,i.row,i.column)).getCurrentToken();a&&/comment/.test(a.type);){var m;if(-1!=(m=a.value.indexOf(s.end))){f=p.getCurrentTokenRow(),g=p.getCurrentTokenColumn()+m;d=new h(f,g,f,g+s.end.length);break}a=p.stepForward()}d&&t.remove(d),c&&(t.remove(c),r=c.start.row,o=-s.start.length)}else o=s.start.length,r=n.start.row,t.insert(n.end,s.end),t.insert(n.start,s.start);l.start.row==r&&(l.start.column+=o),l.end.row==r&&(l.end.column+=o),t.selection.fromOrientedRange(l)}},this.getNextLineIndent=function(e,t,n){return this.$getIndent(t)},this.checkOutdent=function(e,t,n){return!1},this.autoOutdent=function(e,t,n){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){for(var t in this.$embeds=[],this.$modes={},e)if(e[t]){var n=e[t],i=n.prototype.$id,r=s.$modes[i];r||(s.$modes[i]=r=new n),s.$modes[t]||(s.$modes[t]=r),this.$embeds.push(t),this.$modes[t]=r}var o=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],a=function(e){!function(t){var n=o[e],i=t[n];t[o[e]]=function(){return this.$delegator(n,arguments,i)}}(l)},l=this;for(t=0;t<o.length;t++)a(t)},this.$delegator=function(e,t,n){var i=t[0]||"start";if("string"!=typeof i){if(Array.isArray(i[2])){var s=i[2][i[2].length-1];if(o=this.$modes[s])return o[e].apply(o,[i[1]].concat([].slice.call(t,1)))}i=i[0]||"start"}for(var r=0;r<this.$embeds.length;r++)if(this.$modes[this.$embeds[r]]){var o,a=i.split(this.$embeds[r]);if(!a[0]&&a[1])return t[0]=a[1],(o=this.$modes[this.$embeds[r]])[e].apply(o,t)}var l=n.apply(this,t);return n?l:void 0},this.transformAction=function(e,t,n,i,s){if(this.$behaviour){var r=this.$behaviour.getBehaviours();for(var o in r)if(r[o][t]){var a=r[o][t].apply(this,arguments);if(a)return a}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,n=[];for(var i in t)for(var s=t[i],r=0,o=s.length;r<o;r++)if("string"===typeof s[r].token)/keyword|support|storage/.test(s[r].token)&&n.push(s[r].regex);else if("object"===typeof s[r].token)for(var a=0,l=s[r].token.length;a<l;a++)if(/keyword|support|storage/.test(s[r].token[a])){i=s[r].regex.match(/\(.+?\)/g)[a];n.push(i.substr(1,i.length-2))}this.completionKeywords=n}return e?n.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,t,n,i){return(this.$keywordList||this.$createKeywordList()).map((function(e){return{name:e,value:e,score:0,meta:"keyword"}}))},this.$id="ace/mode/text"}).call((i=function(){this.HighlightRules=o}).prototype),t.Mode=i})),ace.define("ace/apply_delta",["require","exports","module"],(function(e,t,n){"use strict";t.applyDelta=function(e,t,n){var i=t.start.row,s=t.start.column,r=e[i]||"";switch(t.action){case"insert":if(1===t.lines.length)e[i]=r.substring(0,s)+t.lines[0]+r.substring(s);else{var o=[i,1].concat(t.lines);e.splice.apply(e,o),e[i]=r.substring(0,s)+e[i],e[i+t.lines.length-1]+=r.substring(s)}break;case"remove":var a=t.end.column,l=t.end.row;i===l?e[i]=r.substring(0,s)+r.substring(a):e.splice(i,l-i+1,r.substring(0,s)+e[l].substring(a))}}})),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=e("./lib/oop"),s=e("./lib/event_emitter").EventEmitter,r=function(){function e(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),"number"!=typeof t?this.setPosition(t.row,t.column):this.setPosition(t,n)}return e.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},e.prototype.getDocument=function(){return this.document},e.prototype.onChange=function(e){if((e.start.row!=e.end.row||e.start.row==this.row)&&!(e.start.row>this.row)){var t=function(e,t,n){var i="insert"==e.action,s=(i?1:-1)*(e.end.row-e.start.row),r=(i?1:-1)*(e.end.column-e.start.column),a=e.start,l=i?a:e.end;if(o(t,a,n))return{row:t.row,column:t.column};if(o(l,t,!n))return{row:t.row+s,column:t.column+(t.row==l.row?r:0)};return{row:a.row,column:a.column}}(e,{row:this.row,column:this.column},this.$insertRight);this.setPosition(t.row,t.column,!0)}},e.prototype.setPosition=function(e,t,n){var i;if(i=n?{row:e,column:t}:this.$clipPositionToDocument(e,t),this.row!=i.row||this.column!=i.column){var s={row:this.row,column:this.column};this.row=i.row,this.column=i.column,this._signal("change",{old:s,value:i})}},e.prototype.detach=function(){this.document.off("change",this.$onChange)},e.prototype.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},e.prototype.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n},e}();function o(e,t,n){var i=n?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&i}r.prototype.$insertRight=!1,i.implement(r.prototype,s),t.Anchor=r})),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],(function(e,t,n){"use strict";var i=e("./lib/oop"),s=e("./apply_delta").applyDelta,r=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,a=e("./anchor").Anchor,l=function(){function e(e){this.$lines=[""],0===e.length?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)}return e.prototype.setValue=function(e){var t=this.getLength()-1;this.remove(new o(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e||"")},e.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},e.prototype.createAnchor=function(e,t){return new a(this,e,t)},e.prototype.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},e.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},e.prototype.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},e.prototype.getNewLineMode=function(){return this.$newLineMode},e.prototype.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},e.prototype.getLine=function(e){return this.$lines[e]||""},e.prototype.getLines=function(e,t){return this.$lines.slice(e,t+1)},e.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},e.prototype.getLength=function(){return this.$lines.length},e.prototype.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},e.prototype.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{(t=this.getLines(e.start.row,e.end.row))[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},e.prototype.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},e.prototype.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},e.prototype.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},e.prototype.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},e.prototype.insertInLine=function(e,t){var n=this.clippedPos(e.row,e.column),i=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:i,action:"insert",lines:[t]},!0),this.clonePos(i)},e.prototype.clippedPos=function(e,t){var n=this.getLength();void 0===e?e=n:e<0?e=0:e>=n&&(e=n-1,t=void 0);var i=this.getLine(e);return void 0==t&&(t=i.length),{row:e,column:t=Math.min(Math.max(t,0),i.length)}},e.prototype.clonePos=function(e){return{row:e.row,column:e.column}},e.prototype.pos=function(e,t){return{row:e,column:t}},e.prototype.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},e.prototype.insertFullLines=function(e,t){var n=0;(e=Math.min(Math.max(e,0),this.getLength()))<this.getLength()?(t=t.concat([""]),n=0):(t=[""].concat(t),e--,n=this.$lines[e].length),this.insertMergedLines({row:e,column:n},t)},e.prototype.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),i={row:n.row+t.length-1,column:(1==t.length?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:i,action:"insert",lines:t}),this.clonePos(i)},e.prototype.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})}),this.clonePos(t)},e.prototype.removeInLine=function(e,t,n){var i=this.clippedPos(e,t),s=this.clippedPos(e,n);return this.applyDelta({start:i,end:s,action:"remove",lines:this.getLinesForRange({start:i,end:s})},!0),this.clonePos(i)},e.prototype.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1);var n=(t=Math.min(Math.max(0,t),this.getLength()-1))==this.getLength()-1&&e>0,i=t<this.getLength()-1,s=n?e-1:e,r=n?this.getLine(s).length:0,a=i?t+1:t,l=i?0:this.getLine(a).length,c=new o(s,r,a,l),u=this.$lines.slice(e,t+1);return this.applyDelta({start:c.start,end:c.end,action:"remove",lines:this.getLinesForRange(c)}),u},e.prototype.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},e.prototype.replace=function(e,t){return e instanceof o||(e=o.fromPoints(e.start,e.end)),0===t.length&&e.isEmpty()?e.start:t==this.getTextRange(e)?e.end:(this.remove(e),t?this.insert(e.start,t):e.start)},e.prototype.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},e.prototype.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},e.prototype.applyDelta=function(e,t){var n="insert"==e.action;(n?e.lines.length<=1&&!e.lines[0]:!o.comparePoints(e.start,e.end))||(n&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(s(this.$lines,e,t),this._signal("change",e)))},e.prototype.$safeApplyDelta=function(e){var t=this.$lines.length;("remove"==e.action&&e.start.row<t&&e.end.row<t||"insert"==e.action&&e.start.row<=t)&&this.applyDelta(e)},e.prototype.$splitAndapplyLargeDelta=function(e,t){for(var n=e.lines,i=n.length-t+1,s=e.start.row,r=e.start.column,o=0,a=0;o<i;o=a){a+=t-1;var l=n.slice(o,a);l.push(""),this.applyDelta({start:this.pos(s+o,r),end:this.pos(s+a,r=0),action:e.action,lines:l},!0)}e.lines=n.slice(o),e.start.row=s+o,e.start.column=r,this.applyDelta(e,!0)},e.prototype.revertDelta=function(e){this.$safeApplyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:"insert"==e.action?"remove":"insert",lines:e.lines.slice()})},e.prototype.indexToPosition=function(e,t){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,s=t||0,r=n.length;s<r;s++)if((e-=n[s].length+i)<0)return{row:s,column:e+n[s].length+i};return{row:r-1,column:e+n[r-1].length+i}},e.prototype.positionToIndex=function(e,t){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,s=0,r=Math.min(e.row,n.length),o=t||0;o<r;++o)s+=n[o].length+i;return s+e.column},e.prototype.$split=function(e){return e.split(/\r\n|\r|\n/)},e}();l.prototype.$autoNewLine="",l.prototype.$newLineMode="auto",i.implement(l.prototype,r),t.Document=l})),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=e("./lib/oop"),s=e("./lib/event_emitter").EventEmitter,r=function(){function e(e,t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var n=this;this.$worker=function(){if(n.running){for(var e=new Date,t=n.currentLine,i=-1,s=n.doc,r=t;n.lines[t];)t++;var o=s.getLength(),a=0;for(n.running=!1;t<o;){n.$tokenizeRow(t),i=t;do{t++}while(n.lines[t]);if(++a%5===0&&new Date-e>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,-1==i&&(i=t),r<=i&&n.fireUpdateEvent(r,i)}}}return e.prototype.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},e.prototype.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},e.prototype.fireUpdateEvent=function(e,t){var n={first:e,last:t};this._signal("update",{data:n})},e.prototype.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},e.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},e.prototype.$updateOnChange=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.lines[t]=null;else if("remove"==e.action)this.lines.splice(t,n+1,null),this.states.splice(t,n+1,null);else{var i=Array(n+1);i.unshift(t,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(t,this.currentLine,this.doc.getLength()),this.stop()},e.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},e.prototype.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},e.prototype.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},e.prototype.$tokenizeRow=function(e){var t=this.doc.getLine(e),n=this.states[e-1],i=this.tokenizer.getLineTokens(t,n,e);return this.states[e]+""!==i.state+""?(this.states[e]=i.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=i.tokens},e.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},e}();i.implement(r.prototype,s),t.BackgroundTokenizer=r})),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],(function(e,t,n){"use strict";var i=e("./lib/lang"),s=e("./range").Range,r=function(){function e(e,t,n){void 0===n&&(n="text"),this.setRegexp(e),this.clazz=t,this.type=n}return e.prototype.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},e.prototype.update=function(e,t,n,r){if(this.regExp)for(var o=r.firstRow,a=r.lastRow,l={},c=o;c<=a;c++){var u=this.cache[c];null==u&&((u=i.getMatchOffsets(n.getLine(c),this.regExp)).length>this.MAX_RANGES&&(u=u.slice(0,this.MAX_RANGES)),u=u.map((function(e){return new s(c,e.offset,c,e.offset+e.length)})),this.cache[c]=u.length?u:"");for(var h=u.length;h--;){var d=u[h].toScreenRange(n),f=d.toString();l[f]||(l[f]=!0,t.drawSingleLineMarker(e,d,this.clazz,r))}}},e}();r.prototype.MAX_RANGES=500,t.SearchHighlight=r})),ace.define("ace/undomanager",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=function(){function e(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return e.prototype.addSession=function(e){this.$session=e},e.prototype.add=function(e,t,n){if(!this.$fromUndo&&e!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),!1===t||!this.lastDeltas){this.lastDeltas=[];var i=this.$undoStack.length;i>this.$undoDepth-1&&this.$undoStack.splice(0,i-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),e.id=this.$rev=++this.$maxRev}"remove"!=e.action&&"insert"!=e.action||(this.$lastDelta=e),this.lastDeltas.push(e)}},e.prototype.addSelection=function(e,t){this.selections.push({value:e,rev:t||this.$rev})},e.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},e.prototype.markIgnored=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,i=n.length;i--;){var s=n[i][0];if(s.id<=e)break;s.id<t&&(s.ignore=!0)}this.lastDeltas=null},e.prototype.getSelection=function(e,t){for(var n=this.selections,i=n.length;i--;){var s=n[i];if(s.rev<e)return t&&(s=n[i+1]),s}},e.prototype.getRevision=function(){return this.$rev},e.prototype.getDeltas=function(e,t){null==t&&(t=this.$rev+1);for(var n=this.$undoStack,i=null,s=0,r=n.length;r--;){var o=n[r][0];if(o.id<t&&!i&&(i=r+1),o.id<=e){s=r+1;break}}return n.slice(s,i)},e.prototype.getChangedRanges=function(e,t){null==t&&(t=this.$rev+1)},e.prototype.getChangedLines=function(e,t){null==t&&(t=this.$rev+1)},e.prototype.undo=function(e,t){this.lastDeltas=null;var n=this.$undoStack;if(function(e,t){for(var n=t;n--;){var i=e[n];if(i&&!i[0].ignore){for(;n<t-1;){var s=u(e[n],e[n+1]);e[n]=s[0],e[n+1]=s[1],n++}return!0}}}(n,n.length)){e||(e=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var i=n.pop(),s=null;return i&&(s=e.undoChanges(i,t),this.$redoStack.push(i),this.$syncRev()),this.$fromUndo=!1,s}},e.prototype.redo=function(e,t){if(this.lastDeltas=null,e||(e=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var n=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);!function(e,t){for(var n=0;n<t.length;n++)for(var i=t[n],s=0;s<i.length;s++)p(e,i[s])}(this.$redoStack,n),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach((function(e){e[0].id=++this.$maxRev}),this)}var i=this.$redoStack.pop(),s=null;return i&&(s=e.redoChanges(i,t),this.$undoStack.push(i),this.$syncRev()),this.$fromUndo=!1,s},e.prototype.$syncRev=function(){var e=this.$undoStack,t=e[e.length-1],n=t&&t[0].id||0;this.$redoStackBaseRev=n,this.$rev=n},e.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},e.prototype.canUndo=function(){return this.$undoStack.length>0},e.prototype.canRedo=function(){return this.$redoStack.length>0},e.prototype.bookmark=function(e){void 0==e&&(e=this.$rev),this.mark=e},e.prototype.isAtBookmark=function(){return this.$rev===this.mark},e.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},e.prototype.fromJSON=function(e){this.reset(),this.$undoStack=e.$undoStack,this.$redoStack=e.$redoStack},e.prototype.$prettyPrint=function(e){return e?a(e):a(this.$undoStack)+"\n---\n"+a(this.$redoStack)},e}();i.prototype.hasUndo=i.prototype.canUndo,i.prototype.hasRedo=i.prototype.canRedo,i.prototype.isClean=i.prototype.isAtBookmark,i.prototype.markClean=i.prototype.bookmark;var s=e("./range").Range,r=s.comparePoints;s.comparePoints;function o(e){return{row:e.row,column:e.column}}function a(e){if(e=e||this,Array.isArray(e))return e.map(a).join("\n");var t="";return e.action?(t="insert"==e.action?"+":"-",t+="["+e.lines+"]"):e.value&&(t=Array.isArray(e.value)?e.value.map(l).join("\n"):l(e.value)),e.start&&(t+=l(e)),(e.id||e.rev)&&(t+="\t("+(e.id||e.rev)+")"),t}function l(e){return e.start.row+":"+e.start.column+"=>"+e.end.row+":"+e.end.column}function c(e,t){var n="insert"==e.action,i="insert"==t.action;if(n&&i)if(r(t.start,e.end)>=0)d(t,e,-1);else{if(!(r(t.start,e.start)<=0))return null;d(e,t,1)}else if(n&&!i)if(r(t.start,e.end)>=0)d(t,e,-1);else{if(!(r(t.end,e.start)<=0))return null;d(e,t,-1)}else if(!n&&i)if(r(t.start,e.start)>=0)d(t,e,1);else{if(!(r(t.start,e.start)<=0))return null;d(e,t,1)}else if(!n&&!i)if(r(t.start,e.start)>=0)d(t,e,1);else{if(!(r(t.end,e.start)<=0))return null;d(e,t,-1)}return[t,e]}function u(e,t){for(var n=e.length;n--;)for(var i=0;i<t.length;i++)if(!c(e[n],t[i])){for(;n<e.length;){for(;i--;)c(t[i],e[n]);i=t.length,n++}return[e,t]}return e.selectionBefore=t.selectionBefore=e.selectionAfter=t.selectionAfter=null,[t,e]}function h(e,t){var n="insert"==e.action,i="insert"==t.action;if(n&&i)r(e.start,t.start)<0?d(t,e,1):d(e,t,1);else if(n&&!i)r(e.start,t.end)>=0?d(e,t,-1):(r(e.start,t.start)<=0||d(e,s.fromPoints(t.start,e.start),-1),d(t,e,1));else if(!n&&i)r(t.start,e.end)>=0?d(t,e,-1):(r(t.start,e.start)<=0||d(t,s.fromPoints(e.start,t.start),-1),d(e,t,1));else if(!n&&!i)if(r(t.start,e.end)>=0)d(t,e,-1);else{var o,a;if(!(r(t.end,e.start)<=0))return r(e.start,t.start)<0&&(o=e,e=g(e,t.start)),r(e.end,t.end)>0&&(a=g(e,t.end)),f(t.end,e.start,e.end,-1),a&&!o&&(e.lines=a.lines,e.start=a.start,e.end=a.end,a=e),[t,o,a].filter(Boolean);d(e,t,-1)}return[t,e]}function d(e,t,n){f(e.start,t.start,t.end,n),f(e.end,t.start,t.end,n)}function f(e,t,n,i){e.row==(1==i?t:n).row&&(e.column+=i*(n.column-t.column)),e.row+=i*(n.row-t.row)}function g(e,t){var n=e.lines,i=e.end;e.end=o(t);var s=e.end.row-e.start.row,r=n.splice(s,n.length),a=s?t.column:t.column-e.start.column;return n.push(r[0].substring(0,a)),r[0]=r[0].substr(a),{start:o(t),end:i,lines:r,action:e.action}}function p(e,t){t=function(e){return{start:o(e.start),end:o(e.end),action:e.action,lines:e.lines.slice()}}(t);for(var n=e.length;n--;){for(var i=e[n],s=0;s<i.length;s++){var r=h(i[s],t);t=r[0],2!=r.length&&(r[2]?(i.splice(s+1,1,r[1],r[2]),s++):r[1]||(i.splice(s,1),s--))}i.length||e.splice(n,1)}return e}t.UndoManager=i})),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=e("../range").Range,s=function(){function e(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var n=t[t.length-1];this.range=new i(t[0].start.row,t[0].start.column,n.end.row,n.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach((function(e){e.setFoldLine(this)}),this)}return e.prototype.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach((function(t){t.start.row+=e,t.end.row+=e}))},e.prototype.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort((function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)})),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},e.prototype.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},e.prototype.walk=function(e,t,n){var i,s,r=0,o=this.folds,a=!0;null==t&&(t=this.end.row,n=this.end.column);for(var l=0;l<o.length;l++){if(-1==(s=(i=o[l]).range.compareStart(t,n)))return void e(null,t,n,r,a);if(!e(null,i.start.row,i.start.column,r,a)&&e(i.placeholder,i.start.row,i.start.column,r)||0===s)return;a=!i.sameRow,r=i.end.column}e(null,t,n,r,a)},e.prototype.getNextFoldTo=function(e,t){for(var n,i,s=0;s<this.folds.length;s++){if(-1==(i=(n=this.folds[s]).range.compareEnd(e,t)))return{fold:n,kind:"after"};if(0===i)return{fold:n,kind:"inside"}}return null},e.prototype.addRemoveChars=function(e,t,n){var i,s,r=this.getNextFoldTo(e,t);if(r)if(i=r.fold,"inside"==r.kind&&i.start.column!=t&&i.start.row!=e)window.console&&window.console.log(e,t,i);else if(i.start.row==e){var o=(s=this.folds).indexOf(i);for(0===o&&(this.start.column+=n);o<s.length;o++){if((i=s[o]).start.column+=n,!i.sameRow)return;i.end.column+=n}this.end.column+=n}},e.prototype.split=function(t,n){var i=this.getNextFoldTo(t,n);if(!i||"inside"==i.kind)return null;var s=i.fold,r=this.folds,o=this.foldData,a=r.indexOf(s),l=r[a-1];this.end.row=l.end.row,this.end.column=l.end.column;var c=new e(o,r=r.splice(a,r.length-a));return o.splice(o.indexOf(this)+1,0,c),c},e.prototype.merge=function(e){for(var t=e.folds,n=0;n<t.length;n++)this.addFold(t[n]);var i=this.foldData;i.splice(i.indexOf(e),1)},e.prototype.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach((function(t){e.push("  "+t.toString())})),e.push("]"),e.join("\n")},e.prototype.idxToPosition=function(e){for(var t=0,n=0;n<this.folds.length;n++){var i=this.folds[n];if((e-=i.start.column-t)<0)return{row:i.start.row,column:i.start.column+e};if((e-=i.placeholder.length)<0)return i.start;t=i.end.column}return{row:this.end.row,column:this.end.column+e}},e}();t.FoldLine=s})),ace.define("ace/range_list",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=e("./range").Range.comparePoints,s=function(){function e(){this.ranges=[],this.$bias=1}return e.prototype.pointIndex=function(e,t,n){for(var s=this.ranges,r=n||0;r<s.length;r++){var o=s[r],a=i(e,o.end);if(!(a>0)){var l=i(e,o.start);return 0===a?t&&0!==l?-r-2:r:l>0||0===l&&!t?r:-r-1}}return-r-1},e.prototype.add=function(e){var t=!e.isEmpty(),n=this.pointIndex(e.start,t);n<0&&(n=-n-1);var i=this.pointIndex(e.end,t,n);return i<0?i=-i-1:i++,this.ranges.splice(n,i-n,e)},e.prototype.addList=function(e){for(var t=[],n=e.length;n--;)t.push.apply(t,this.add(e[n]));return t},e.prototype.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},e.prototype.merge=function(){for(var e,t=[],n=this.ranges,s=(n=n.sort((function(e,t){return i(e.start,t.start)})))[0],r=1;r<n.length;r++){e=s,s=n[r];var o=i(e.end,s.start);o<0||(0!=o||e.isEmpty()||s.isEmpty())&&(i(e.end,s.end)<0&&(e.end.row=s.end.row,e.end.column=s.end.column),n.splice(r,1),t.push(s),s=e,r--)}return this.ranges=n,t},e.prototype.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},e.prototype.containsPoint=function(e){return this.pointIndex(e)>=0},e.prototype.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},e.prototype.clipRows=function(e,t){var n=this.ranges;if(n[0].start.row>t||n[n.length-1].start.row<e)return[];var i=this.pointIndex({row:e,column:0});i<0&&(i=-i-1);var s=this.pointIndex({row:t,column:0},i);s<0&&(s=-s-1);for(var r=[],o=i;o<s;o++)r.push(n[o]);return r},e.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},e.prototype.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},e.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},e.prototype.$onChange=function(e){for(var t=e.start,n=e.end,i=t.row,s=n.row,r=this.ranges,o=0,a=r.length;o<a;o++){if((u=r[o]).end.row>=i)break}if("insert"==e.action)for(var l=s-i,c=-t.column+n.column;o<a;o++){if((u=r[o]).start.row>i)break;if(u.start.row==i&&u.start.column>=t.column&&(u.start.column==t.column&&this.$bias<=0||(u.start.column+=c,u.start.row+=l)),u.end.row==i&&u.end.column>=t.column){if(u.end.column==t.column&&this.$bias<0)continue;u.end.column==t.column&&c>0&&o<a-1&&u.end.column>u.start.column&&u.end.column==r[o+1].start.column&&(u.end.column-=c),u.end.column+=c,u.end.row+=l}}else for(l=i-s,c=t.column-n.column;o<a;o++){if((u=r[o]).start.row>s)break;u.end.row<s&&(i<u.end.row||i==u.end.row&&t.column<u.end.column)?(u.end.row=i,u.end.column=t.column):u.end.row==s?u.end.column<=n.column?(l||u.end.column>t.column)&&(u.end.column=t.column,u.end.row=t.row):(u.end.column+=c,u.end.row+=l):u.end.row>s&&(u.end.row+=l),u.start.row<s&&(i<u.start.row||i==u.start.row&&t.column<u.start.column)?(u.start.row=i,u.start.column=t.column):u.start.row==s?u.start.column<=n.column?(l||u.start.column>t.column)&&(u.start.column=t.column,u.start.row=t.row):(u.start.column+=c,u.start.row+=l):u.start.row>s&&(u.start.row+=l)}if(0!=l&&o<a)for(;o<a;o++){var u;(u=r[o]).start.row+=l,u.end.row+=l}},e}();s.prototype.comparePoints=i,t.RangeList=s})),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],(function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=function(e){function t(t,n){var i=e.call(this)||this;return i.foldLine=null,i.placeholder=n,i.range=t,i.start=t.start,i.end=t.end,i.sameRow=t.start.row==t.end.row,i.subFolds=i.ranges=[],i}return i(t,e),t.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},t.prototype.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach((function(t){t.setFoldLine(e)}))},t.prototype.clone=function(){var e=new t(this.range.clone(),this.placeholder);return this.subFolds.forEach((function(t){e.subFolds.push(t.clone())})),e.collapseChildren=this.collapseChildren,e},t.prototype.addSubFold=function(e){if(!this.range.isEqual(e)){var t,n;t=e,n=this.start,r(t.start,n),r(t.end,n);for(var i=e.start.row,s=e.start.column,o=0,a=-1;o<this.subFolds.length&&1==(a=this.subFolds[o].range.compare(i,s));o++);var l=this.subFolds[o],c=0;if(0==a){if(l.range.containsRange(e))return l.addSubFold(e);c=1}i=e.range.end.row,s=e.range.end.column;var u=o;for(a=-1;u<this.subFolds.length&&1==(a=this.subFolds[u].range.compare(i,s));u++);0==a&&u++;for(var h=this.subFolds.splice(o,u-o,e),d=0==a?h.length-1:h.length,f=c;f<d;f++)e.addSubFold(h[f]);return e.setFoldLine(this.foldLine),e}},t.prototype.restoreRange=function(e){return function(e,t){o(e.start,t),o(e.end,t)}(e,this.start)},t}(e("../range_list").RangeList);function r(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function o(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}t.Fold=s})),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],(function(e,t,n){"use strict";var i=e("../range").Range,s=e("./fold_line").FoldLine,r=e("./fold").Fold,o=e("../token_iterator").TokenIterator,a=e("../mouse/mouse_event").MouseEvent;t.Folding=function(){this.getFoldAt=function(e,t,n){var i=this.getFoldLine(e);if(!i)return null;for(var s=i.folds,r=0;r<s.length;r++){var o=s[r].range;if(o.contains(e,t)){if(1==n&&o.isEnd(e,t)&&!o.isEmpty())continue;if(-1==n&&o.isStart(e,t)&&!o.isEmpty())continue;return s[r]}}},this.getFoldsInRange=function(e){var t=e.start,n=e.end,i=this.$foldData,s=[];t.column+=1,n.column-=1;for(var r=0;r<i.length;r++){var o=i[r].range.compareRange(e);if(2!=o){if(-2==o)break;for(var a=i[r].folds,l=0;l<a.length;l++){var c=a[l];if(-2==(o=c.range.compareRange(e)))break;if(2!=o){if(42==o)break;s.push(c)}}}}return t.column-=1,n.column+=1,s},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach((function(e){t=t.concat(this.getFoldsInRange(e))}),this)}else t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,n=0;n<t.length;n++)for(var i=0;i<t[n].folds.length;i++)e.push(t[n].folds[i]);return e},this.getFoldStringAt=function(e,t,n,i){if(!(i=i||this.getFoldLine(e)))return null;for(var s,r,o={end:{column:0}},a=0;a<i.folds.length;a++){var l=(r=i.folds[a]).range.compareEnd(e,t);if(-1==l){s=this.getLine(r.start.row).substring(o.end.column,r.start.column);break}if(0===l)return null;o=r}return s||(s=this.getLine(r.start.row).substring(o.end.column)),-1==n?s.substring(0,t-o.end.column):1==n?s.substring(t-o.end.column):s},this.getFoldLine=function(e,t){var n=this.$foldData,i=0;for(t&&(i=n.indexOf(t)),-1==i&&(i=0);i<n.length;i++){var s=n[i];if(s.start.row<=e&&s.end.row>=e)return s;if(s.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var n=this.$foldData,i=0;for(t&&(i=n.indexOf(t)),-1==i&&(i=0);i<n.length;i++){var s=n[i];if(s.end.row>=e)return s}return null},this.getFoldedRowCount=function(e,t){for(var n=this.$foldData,i=t-e+1,s=0;s<n.length;s++){var r=n[s],o=r.end.row,a=r.start.row;if(o>=t){a<t&&(a>=e?i-=t-a:i=0);break}o>=e&&(i-=a>=e?o-a:o-e+1)}return i},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort((function(e,t){return e.start.row-t.start.row})),e},this.addFold=function(e,t){var n,i=this.$foldData,o=!1;e instanceof r?n=e:(n=new r(t,e)).collapseChildren=t.collapseChildren,this.$clipRangeToDocument(n.range);var a=n.start.row,l=n.start.column,c=n.end.row,u=n.end.column,h=this.getFoldAt(a,l,1),d=this.getFoldAt(c,u,-1);if(h&&d==h)return h.addSubFold(n);h&&!h.range.isStart(a,l)&&this.removeFold(h),d&&!d.range.isEnd(c,u)&&this.removeFold(d);var f=this.getFoldsInRange(n.range);f.length>0&&(this.removeFolds(f),n.collapseChildren||f.forEach((function(e){n.addSubFold(e)})));for(var g=0;g<i.length;g++){var p=i[g];if(c==p.start.row){p.addFold(n),o=!0;break}if(a==p.end.row){if(p.addFold(n),o=!0,!n.sameRow){var m=i[g+1];if(m&&m.start.row==c){p.merge(m);break}}break}if(c<=p.start.row)break}return o||(p=this.$addFoldLine(new s(this.$foldData,n))),this.$useWrapMode?this.$updateWrapData(p.start.row,p.start.row):this.$updateRowLengthCache(p.start.row,p.start.row),this.$modified=!0,this._signal("changeFold",{data:n,action:"add"}),n},this.addFolds=function(e){e.forEach((function(e){this.addFold(e)}),this)},this.removeFold=function(e){var t=e.foldLine,n=t.start.row,i=t.end.row,s=this.$foldData,r=t.folds;if(1==r.length)s.splice(s.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))r.pop(),t.end.row=r[r.length-1].end.row,t.end.column=r[r.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))r.shift(),t.start.row=r[0].start.row,t.start.column=r[0].start.column;else if(e.sameRow)r.splice(r.indexOf(e),1);else{var o=t.split(e.start.row,e.start.column);(r=o.folds).shift(),o.start.row=r[0].start.row,o.start.column=r[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(n,i):this.$updateRowLengthCache(n,i)),this.$modified=!0,this._signal("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);t.forEach((function(e){this.removeFold(e)}),this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach((function(t){e.restoreRange(t),this.addFold(t)}),this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach((function(e){this.expandFold(e)}),this)},this.unfold=function(e,t){var n,s;if(null==e)n=new i(0,0,this.getLength(),0),null==t&&(t=!0);else if("number"==typeof e)n=new i(e,0,e,this.getLine(e).length);else if("row"in e)n=i.fromPoints(e,e);else{if(Array.isArray(e))return s=[],e.forEach((function(e){s=s.concat(this.unfold(e))}),this),s;n=e}for(var r=s=this.getFoldsInRangeList(n);1==s.length&&i.comparePoints(s[0].start,n.start)<0&&i.comparePoints(s[0].end,n.end)>0;)this.expandFolds(s),s=this.getFoldsInRangeList(n);if(0!=t?this.removeFolds(s):this.expandFolds(s),r.length)return r},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var n=this.getFoldLine(e,t);return n?n.end.row:e},this.getRowFoldStart=function(e,t){var n=this.getFoldLine(e,t);return n?n.start.row:e},this.getFoldDisplayLine=function(e,t,n,i,s){null==i&&(i=e.start.row),null==s&&(s=0),null==t&&(t=e.end.row),null==n&&(n=this.getLine(t).length);var r=this.doc,o="";return e.walk((function(e,t,n,a){if(!(t<i)){if(t==i){if(n<s)return;a=Math.max(s,a)}o+=null!=e?e:r.getLine(t).substring(a,n)}}),t,n),o},this.getDisplayLine=function(e,t,n,i){var s,r=this.getFoldLine(e);return r?this.getFoldDisplayLine(r,e,t,n,i):(s=this.doc.getLine(e)).substring(i||0,t||s.length)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map((function(t){var n=t.folds.map((function(e){return e.clone()}));return new s(e,n)}))},this.toggleFold=function(e){var t,n,i=this.selection.getRange();if(i.isEmpty()){var s=i.start;if(t=this.getFoldAt(s.row,s.column))return void this.expandFold(t);(n=this.findMatchingBracket(s))?1==i.comparePoint(n)?i.end=n:(i.start=n,i.start.column++,i.end.column--):(n=this.findMatchingBracket({row:s.row,column:s.column+1}))?(1==i.comparePoint(n)?i.end=n:i.start=n,i.start.column++):i=this.getCommentFoldRange(s.row,s.column)||i}else{var r=this.getFoldsInRange(i);if(e&&r.length)return void this.expandFolds(r);1==r.length&&(t=r[0])}if(t||(t=this.getFoldAt(i.start.row,i.start.column)),t&&t.range.toString()==i.toString())this.expandFold(t);else{var o="...";if(!i.isMultiLine()){if((o=this.getTextRange(i)).length<4)return;o=o.trim().substring(0,2)+".."}this.addFold(o,i)}},this.getCommentFoldRange=function(e,t,n){var s=new o(this,e,t),r=s.getCurrentToken(),a=r&&r.type;if(r&&/^comment|string/.test(a)){"comment"==(a=a.match(/comment|string/)[0])&&(a+="|doc-start|\\.doc");var l=new RegExp(a),c=new i;if(1!=n){do{r=s.stepBackward()}while(r&&l.test(r.type)&&!/^comment.end/.test(r.type));r=s.stepForward()}if(c.start.row=s.getCurrentTokenRow(),c.start.column=s.getCurrentTokenColumn()+(/^comment.start/.test(r.type)?r.value.length:2),s=new o(this,e,t),-1!=n){var u=-1;do{if(r=s.stepForward(),-1==u){var h=this.getState(s.$row);l.test(h)||(u=s.$row)}else if(s.$row>u)break}while(r&&l.test(r.type)&&!/^comment.start/.test(r.type));r=s.stepBackward()}else r=s.getCurrentToken();return c.end.row=s.getCurrentTokenRow(),c.end.column=s.getCurrentTokenColumn(),/^comment.end/.test(r.type)||(c.end.column+=r.value.length-2),c}},this.foldAll=function(e,t,n,i){void 0==n&&(n=1e5);var s=this.foldWidgets;if(s){t=t||this.getLength();for(var r=e=e||0;r<t;r++)if(null==s[r]&&(s[r]=this.getFoldWidget(r)),"start"==s[r]&&(!i||i(r))){var o=this.getFoldWidgetRange(r);o&&o.isMultiLine()&&o.end.row<=t&&o.start.row>=e&&(r=o.end.row,o.collapseChildren=n,this.addFold("...",o))}}},this.foldToLevel=function(e){for(this.foldAll();e-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var e=this;this.foldAll(null,null,null,(function(t){for(var n=e.getTokens(t),i=0;i<n.length;i++){var s=n[i];if("text"!=s.type||!/^\s+$/.test(s.value))return!!/comment/.test(s.type)}}))},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){this.$foldMode!=e&&(this.$foldMode=e,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),e&&"manual"!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(e,t){var n=this.foldWidgets;if(!n||t&&n[e])return{};for(var i,s=e-1;s>=0;){var r=n[s];if(null==r&&(r=n[s]=this.getFoldWidget(s)),"start"==r){var o=this.getFoldWidgetRange(s);if(i||(i=o),o&&o.end.row>=e)break}s--}return{range:-1!==s&&o,firstRange:i}},this.onFoldWidgetClick=function(e,t){t instanceof a&&(t=t.domEvent);var n={children:t.shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey};if(!this.$toggleFoldWidget(e,n)){var i=t.target||t.srcElement;i&&/ace_fold-widget/.test(i.className)&&(i.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var n=this.getFoldWidget(e),i=this.getLine(e),s="end"===n?-1:1,r=this.getFoldAt(e,-1===s?0:i.length,s);if(r)return t.children||t.all?this.removeFold(r):this.expandFold(r),r;var o=this.getFoldWidgetRange(e,!0);if(o&&!o.isMultiLine()&&(r=this.getFoldAt(o.start.row,o.start.column,1))&&o.isEqual(r.range))return this.removeFold(r),r;if(t.siblings){var a=this.getParentFoldRangeData(e);if(a.range)var l=a.range.start.row+1,c=a.range.end.row;this.foldAll(l,c,t.all?1e4:0)}else t.children?(c=o?o.end.row:this.getLength(),this.foldAll(e+1,c,t.all?1e4:0)):o&&(t.all&&(o.collapseChildren=1e4),this.addFold("...",o));return o}},this.toggleFoldWidget=function(e){var t=this.selection.getCursor().row;t=this.getRowFoldStart(t);var n=this.$toggleFoldWidget(t,{});if(!n){var i=this.getParentFoldRangeData(t,!0);if(n=i.range||i.firstRange){t=n.start.row;var s=this.getFoldAt(t,this.getLine(t).length,1);s?this.removeFold(s):this.addFold("...",n)}}},this.updateFoldWidgets=function(e){var t=e.start.row,n=e.end.row-t;if(0===n)this.foldWidgets[t]=null;else if("remove"==e.action)this.foldWidgets.splice(t,n+1,null);else{var i=Array(n+1);i.unshift(t,1),this.foldWidgets.splice.apply(this.foldWidgets,i)}},this.tokenizerUpdateFoldWidgets=function(e){var t=e.data;t.first!=t.last&&this.foldWidgets.length>t.first&&this.foldWidgets.splice(t.first,this.foldWidgets.length)}}})),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],(function(e,t,n){"use strict";var i=e("../token_iterator").TokenIterator,s=e("../range").Range;t.BracketMatch=function(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;var n=t||this.getLine(e.row).charAt(e.column-1);if(""==n)return null;var i=n.match(/([\(\[\{])|([\)\]\}])/);return i?i[1]?this.$findClosingBracket(i[1],e):this.$findOpeningBracket(i[2],e):null},this.getBracketRange=function(e){var t,n=this.getLine(e.row),i=!0,r=n.charAt(e.column-1),o=r&&r.match(/([\(\[\{])|([\)\]\}])/);if(o||(r=n.charAt(e.column),e={row:e.row,column:e.column+1},o=r&&r.match(/([\(\[\{])|([\)\]\}])/),i=!1),!o)return null;if(o[1]){if(!(a=this.$findClosingBracket(o[1],e)))return null;t=s.fromPoints(e,a),i||(t.end.column++,t.start.column--),t.cursor=t.end}else{var a;if(!(a=this.$findOpeningBracket(o[2],e)))return null;t=s.fromPoints(a,e),i||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.getMatchingBracketRanges=function(e,t){var n=this.getLine(e.row),i=/([\(\[\{])|([\)\]\}])/,r=!t&&n.charAt(e.column-1),o=r&&r.match(i);if(o||(r=(void 0===t||t)&&n.charAt(e.column),e={row:e.row,column:e.column+1},o=r&&r.match(i)),!o)return null;var a=new s(e.row,e.column-1,e.row,e.column),l=o[1]?this.$findClosingBracket(o[1],e):this.$findOpeningBracket(o[2],e);return l?[a,new s(l.row,l.column,l.row,l.column+1)]:[a]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(e,t,n){var s=this.$brackets[e],r=1,o=new i(this,t.row,t.column),a=o.getCurrentToken();if(a||(a=o.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var l=t.column-o.getCurrentTokenColumn()-2,c=a.value;;){for(;l>=0;){var u=c.charAt(l);if(u==s){if(0==(r-=1))return{row:o.getCurrentTokenRow(),column:l+o.getCurrentTokenColumn()}}else u==e&&(r+=1);l-=1}do{a=o.stepBackward()}while(a&&!n.test(a.type));if(null==a)break;l=(c=a.value).length-1}return null}},this.$findClosingBracket=function(e,t,n){var s=this.$brackets[e],r=1,o=new i(this,t.row,t.column),a=o.getCurrentToken();if(a||(a=o.stepForward()),a){n||(n=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var l=t.column-o.getCurrentTokenColumn();;){for(var c=a.value,u=c.length;l<u;){var h=c.charAt(l);if(h==s){if(0==(r-=1))return{row:o.getCurrentTokenRow(),column:l+o.getCurrentTokenColumn()}}else h==e&&(r+=1);l+=1}do{a=o.stepForward()}while(a&&!n.test(a.type));if(null==a)break;l=0}return null}},this.getMatchingTags=function(e){var t=new i(this,e.row,e.column),n=this.$findTagName(t);if(n)return"<"===t.stepBackward().value?this.$findClosingTag(t,n):this.$findOpeningTag(t,n)},this.$findTagName=function(e){var t=e.getCurrentToken(),n=!1,i=!1;if(t&&-1===t.type.indexOf("tag-name"))do{(t=i?e.stepBackward():e.stepForward())&&("/>"===t.value?i=!0:-1!==t.type.indexOf("tag-name")&&(n=!0))}while(t&&!n);return t},this.$findClosingTag=function(e,t){var n,i=t.value,r=t.value,o=0,a=new s(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1);t=e.stepForward();var l=new s(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+t.value.length),c=!1;do{if(n=t,t=e.stepForward()){if(">"===t.value&&!c){var u=new s(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1);c=!0}if(-1!==t.type.indexOf("tag-name")){if(r===(i=t.value))if("<"===n.value)o++;else if("</"===n.value&&--o<0){e.stepBackward();var h=new s(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+2);t=e.stepForward();var d=new s(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+t.value.length);if(!(t=e.stepForward())||">"!==t.value)return;var f=new s(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1)}}else if(r===i&&"/>"===t.value&&--o<0)f=d=h=new s(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+2),u=new s(l.end.row,l.end.column,l.end.row,l.end.column+1)}}while(t&&o>=0);if(a&&u&&h&&f&&l&&d)return{openTag:new s(a.start.row,a.start.column,u.end.row,u.end.column),closeTag:new s(h.start.row,h.start.column,f.end.row,f.end.column),openTagName:l,closeTagName:d}},this.$findOpeningTag=function(e,t){var n=e.getCurrentToken(),i=t.value,r=0,o=e.getCurrentTokenRow(),a=e.getCurrentTokenColumn(),l=a+2,c=new s(o,a,o,l);e.stepForward();var u=new s(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+t.value.length);if((t=e.stepForward())&&">"===t.value){var h=new s(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1);e.stepBackward(),e.stepBackward();do{if(t=n,o=e.getCurrentTokenRow(),l=(a=e.getCurrentTokenColumn())+t.value.length,n=e.stepBackward(),t)if(-1!==t.type.indexOf("tag-name")){if(i===t.value)if("<"===n.value){if(++r>0){var d=new s(o,a,o,l),f=new s(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1);do{t=e.stepForward()}while(t&&">"!==t.value);var g=new s(e.getCurrentTokenRow(),e.getCurrentTokenColumn(),e.getCurrentTokenRow(),e.getCurrentTokenColumn()+1)}}else"</"===n.value&&r--}else if("/>"===t.value){for(var p=0,m=n;m;){if(-1!==m.type.indexOf("tag-name")&&m.value===i){r--;break}if("<"===m.value)break;m=e.stepBackward(),p++}for(var b=0;b<p;b++)e.stepForward()}}while(n&&r<=0);return f&&g&&c&&h&&d&&u?{openTag:new s(f.start.row,f.start.column,g.end.row,g.end.column),closeTag:new s(c.start.row,c.start.column,h.end.row,h.end.column),openTagName:d,closeTagName:u}:void 0}}}})),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],(function(e,t,n){"use strict";var i=e("./lib/oop"),s=e("./lib/lang"),r=e("./bidihandler").BidiHandler,o=e("./config"),a=e("./lib/event_emitter").EventEmitter,l=e("./selection").Selection,c=e("./mode/text").Mode,u=e("./range").Range,h=e("./document").Document,d=e("./background_tokenizer").BackgroundTokenizer,f=e("./search_highlight").SearchHighlight,g=e("./undomanager").UndoManager,p=function(){function e(t,n){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++e.$uid,this.$foldData.toString=function(){return this.join("\n")},this.bgTokenizer=new d((new c).getTokenizer(),this);var i=this;this.bgTokenizer.on("update",(function(e){i._signal("tokenizerUpdate",e)})),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof t&&t.getLine||(t=new h(t)),this.setDocument(t),this.selection=new l(this),this.$bidiHandler=new r(this),o.resetOptions(this),this.setMode(n),o._signal("session",this),this.destroyed=!1}return e.prototype.setDocument=function(e){this.doc&&this.doc.off("change",this.$onChange),this.doc=e,e.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},e.prototype.getDocument=function(){return this.doc},e.prototype.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],void(this.$screenRowCache=[]);var t=this.$docRowCache.length,n=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>n&&(this.$docRowCache.splice(n,t),this.$screenRowCache.splice(n,t))},e.prototype.$getRowCacheIndex=function(e,t){for(var n=0,i=e.length-1;n<=i;){var s=n+i>>1,r=e[s];if(t>r)n=s+1;else{if(!(t<r))return s;i=s-1}}return n-1},e.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},e.prototype.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},e.prototype.onChange=function(e){this.$modified=!0,this.$bidiHandler.onChange(e),this.$resetRowCache(e.start.row);var t=this.$updateInternalDataOnChange(e);!this.$fromUndo&&this.$undoManager&&(t&&t.length&&(this.$undoManager.add({action:"removeFolds",folds:t},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(e,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(e),this._signal("change",e)},e.prototype.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},e.fromJSON=function(t){"string"==typeof t&&(t=JSON.parse(t));var n=new g;n.$undoStack=t.history.undo,n.$redoStack=t.history.redo,n.mark=t.history.mark,n.$rev=t.history.rev;var i=new e(t.value);return t.folds.forEach((function(e){i.addFold("...",u.fromPoints(e.start,e.end))})),i.setAnnotations(t.annotations),i.setBreakpoints(t.breakpoints),i.setMode(t.mode),i.setScrollLeft(t.scrollLeft),i.setScrollTop(t.scrollTop),i.setUndoManager(n),i.selection.fromJSON(t.selection),i},e.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map((function(e){return e.range})),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},e.prototype.toString=function(){return this.doc.getValue()},e.prototype.getSelection=function(){return this.selection},e.prototype.getState=function(e){return this.bgTokenizer.getState(e)},e.prototype.getTokens=function(e){return this.bgTokenizer.getTokens(e)},e.prototype.getTokenAt=function(e,t){var n,i=this.bgTokenizer.getTokens(e),s=0;if(null==t){var r=i.length-1;s=this.getLine(e).length}else for(r=0;r<i.length&&!((s+=i[r].value.length)>=t);r++);return(n=i[r])?(n.index=r,n.start=s-n.value.length,n):null},e.prototype.setUndoManager=function(e){if(this.$undoManager=e,this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;e.addSession(this),this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.mergeUndoDeltas=!1},this.$informUndoManager=s.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},e.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},e.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},e.prototype.getTabString=function(){return this.getUseSoftTabs()?s.stringRepeat(" ",this.getTabSize()):"\t"},e.prototype.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},e.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},e.prototype.setTabSize=function(e){this.setOption("tabSize",e)},e.prototype.getTabSize=function(){return this.$tabSize},e.prototype.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize===0},e.prototype.setNavigateWithinSoftTabs=function(e){this.setOption("navigateWithinSoftTabs",e)},e.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},e.prototype.setOverwrite=function(e){this.setOption("overwrite",e)},e.prototype.getOverwrite=function(){return this.$overwrite},e.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},e.prototype.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},e.prototype.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},e.prototype.getBreakpoints=function(){return this.$breakpoints},e.prototype.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},e.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},e.prototype.setBreakpoint=function(e,t){void 0===t&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},e.prototype.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},e.prototype.addMarker=function(e,t,n,i){var s=this.$markerId++,r={range:e,type:n||"line",renderer:"function"==typeof n?n:null,clazz:t,inFront:!!i,id:s};return i?(this.$frontMarkers[s]=r,this._signal("changeFrontMarker")):(this.$backMarkers[s]=r,this._signal("changeBackMarker")),s},e.prototype.addDynamicMarker=function(e,t){if(e.update){var n=this.$markerId++;return e.id=n,e.inFront=!!t,t?(this.$frontMarkers[n]=e,this._signal("changeFrontMarker")):(this.$backMarkers[n]=e,this._signal("changeBackMarker")),e}},e.prototype.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];t&&(delete(t.inFront?this.$frontMarkers:this.$backMarkers)[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))},e.prototype.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},e.prototype.highlight=function(e){if(!this.$searchHighlight){var t=new f(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},e.prototype.highlightLines=function(e,t,n,i){"number"!=typeof t&&(n=t,t=e),n||(n="ace_step");var s=new u(e,0,t,1/0);return s.id=this.addMarker(s,n,"fullLine",i),s},e.prototype.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},e.prototype.getAnnotations=function(){return this.$annotations||[]},e.prototype.clearAnnotations=function(){this.setAnnotations([])},e.prototype.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=t?t[1]:"\n"},e.prototype.getWordRange=function(e,t){var n=this.getLine(e),i=!1;if(t>0&&(i=!!n.charAt(t-1).match(this.tokenRe)),i||(i=!!n.charAt(t).match(this.tokenRe)),i)var s=this.tokenRe;else if(/^\s+$/.test(n.slice(t-1,t+1)))s=/\s/;else s=this.nonTokenRe;var r=t;if(r>0){do{r--}while(r>=0&&n.charAt(r).match(s));r++}for(var o=t;o<n.length&&n.charAt(o).match(s);)o++;return new u(e,r,e,o)},e.prototype.getAWordRange=function(e,t){for(var n=this.getWordRange(e,t),i=this.getLine(n.end.row);i.charAt(n.end.column).match(/[ \t]/);)n.end.column+=1;return n},e.prototype.setNewLineMode=function(e){this.doc.setNewLineMode(e)},e.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},e.prototype.setUseWorker=function(e){this.setOption("useWorker",e)},e.prototype.getUseWorker=function(){return this.$useWorker},e.prototype.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},e.prototype.setMode=function(e,t){if(e&&"object"===typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var n=e,i=n.path}else i=e||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new c),this.$modes[i]&&!n)return this.$onChangeMode(this.$modes[i]),void(t&&t());this.$modeId=i,o.loadModule(["mode",i],function(e){if(this.$modeId!==i)return t&&t();this.$modes[i]&&!n?this.$onChangeMode(this.$modes[i]):e&&e.Mode&&(e=new e.Mode(n),n||(this.$modes[i]=e,e.$id=i),this.$onChangeMode(e)),t&&t()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},e.prototype.$onChangeMode=function(e,t){if(t||(this.$modeId=e.$id),this.$mode!==e){var n=this.$mode;this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var i=e.getTokenizer();if(void 0!==i.on){var s=this.onReloadTokenizer.bind(this);i.on("update",s)}this.bgTokenizer.setTokenizer(i),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:n,mode:e}))}},e.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},e.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){o.warn("Could not load worker",e),this.$worker=null}},e.prototype.getMode=function(){return this.$mode},e.prototype.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},e.prototype.getScrollTop=function(){return this.$scrollTop},e.prototype.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},e.prototype.getScrollLeft=function(){return this.$scrollLeft},e.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},e.prototype.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach((function(t){t&&t.screenWidth>e&&(e=t.screenWidth)})),this.lineWidgetWidth=e},e.prototype.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),n=this.$rowLengthCache,i=0,s=0,r=this.$foldData[s],o=r?r.start.row:1/0,a=t.length,l=0;l<a;l++){if(l>o){if((l=r.end.row+1)>=a)break;o=(r=this.$foldData[s++])?r.start.row:1/0}null==n[l]&&(n[l]=this.$getStringScreenWidth(t[l])[0]),n[l]>i&&(i=n[l])}this.screenWidth=i}},e.prototype.getLine=function(e){return this.doc.getLine(e)},e.prototype.getLines=function(e,t){return this.doc.getLines(e,t)},e.prototype.getLength=function(){return this.doc.getLength()},e.prototype.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},e.prototype.insert=function(e,t){return this.doc.insert(e,t)},e.prototype.remove=function(e){return this.doc.remove(e)},e.prototype.removeFullLines=function(e,t){return this.doc.removeFullLines(e,t)},e.prototype.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=e.length-1;-1!=n;n--){var i=e[n];"insert"==i.action||"remove"==i.action?this.doc.revertDelta(i):i.folds&&this.addFolds(i.folds)}!t&&this.$undoSelect&&(e.selectionBefore?this.selection.fromJSON(e.selectionBefore):this.selection.setRange(this.$getUndoSelection(e,!0))),this.$fromUndo=!1}},e.prototype.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var n=0;n<e.length;n++){var i=e[n];"insert"!=i.action&&"remove"!=i.action||this.doc.$safeApplyDelta(i)}!t&&this.$undoSelect&&(e.selectionAfter?this.selection.fromJSON(e.selectionAfter):this.selection.setRange(this.$getUndoSelection(e,!1))),this.$fromUndo=!1}},e.prototype.setUndoSelect=function(e){this.$undoSelect=e},e.prototype.$getUndoSelection=function(e,t){function n(e){return t?"insert"!==e.action:"insert"===e.action}for(var i,s,r=0;r<e.length;r++){var o=e[r];o.start&&(i?n(o)?(s=o.start,-1==i.compare(s.row,s.column)&&i.setStart(s),s=o.end,1==i.compare(s.row,s.column)&&i.setEnd(s)):(s=o.start,-1==i.compare(s.row,s.column)&&(i=u.fromPoints(o.start,o.start))):i=n(o)?u.fromPoints(o.start,o.end):u.fromPoints(o.start,o.start))}return i},e.prototype.replace=function(e,t){return this.doc.replace(e,t)},e.prototype.moveText=function(e,t,n){var i=this.getTextRange(e),s=this.getFoldsInRange(e),r=u.fromPoints(t,t);if(!n){this.remove(e);var o=e.start.row-e.end.row;(c=o?-e.end.column:e.start.column-e.end.column)&&(r.start.row==e.end.row&&r.start.column>e.end.column&&(r.start.column+=c),r.end.row==e.end.row&&r.end.column>e.end.column&&(r.end.column+=c)),o&&r.start.row>=e.end.row&&(r.start.row+=o,r.end.row+=o)}if(r.end=this.insert(r.start,i),s.length){var a=e.start,l=r.start,c=(o=l.row-a.row,l.column-a.column);this.addFolds(s.map((function(e){return(e=e.clone()).start.row==a.row&&(e.start.column+=c),e.end.row==a.row&&(e.end.column+=c),e.start.row+=o,e.end.row+=o,e})))}return r},e.prototype.indentRows=function(e,t,n){n=n.replace(/\t/g,this.getTabString());for(var i=e;i<=t;i++)this.doc.insertInLine({row:i,column:0},n)},e.prototype.outdentRows=function(e){for(var t=e.collapseRows(),n=new u(0,0,0,0),i=this.getTabSize(),s=t.start.row;s<=t.end.row;++s){var r=this.getLine(s);n.start.row=s,n.end.row=s;for(var o=0;o<i&&" "==r.charAt(o);++o);o<i&&"\t"==r.charAt(o)?(n.start.column=o,n.end.column=o+1):(n.start.column=0,n.end.column=o),this.remove(n)}},e.prototype.$moveLines=function(e,t,n){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),n<0){if((s=this.getRowFoldStart(e+n))<0)return 0;var i=s-e}else if(n>0){var s;if((s=this.getRowFoldEnd(t+n))>this.doc.getLength()-1)return 0;i=s-t}else{e=this.$clipRowToDocument(e);i=(t=this.$clipRowToDocument(t))-e+1}var r=new u(e,0,t,Number.MAX_VALUE),o=this.getFoldsInRange(r).map((function(e){return(e=e.clone()).start.row+=i,e.end.row+=i,e})),a=0==n?this.doc.getLines(e,t):this.doc.removeFullLines(e,t);return this.doc.insertFullLines(e+i,a),o.length&&this.addFolds(o),i},e.prototype.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},e.prototype.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},e.prototype.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},e.prototype.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},e.prototype.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},e.prototype.$clipPositionToDocument=function(e,t){if(t=Math.max(0,t),e<0)e=0,t=0;else{var n=this.doc.getLength();e>=n?(e=n-1,t=this.doc.getLine(n-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},e.prototype.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},e.prototype.setUseWrapMode=function(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},e.prototype.getUseWrapMode=function(){return this.$useWrapMode},e.prototype.setWrapLimitRange=function(e,t){this.$wrapLimitRange.min===e&&this.$wrapLimitRange.max===t||(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},e.prototype.adjustWrapLimit=function(e,t){var n=this.$wrapLimitRange;n.max<0&&(n={min:t,max:t});var i=this.$constrainWrapLimit(e,n.min,n.max);return i!=this.$wrapLimit&&i>1&&(this.$wrapLimit=i,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},e.prototype.$constrainWrapLimit=function(e,t,n){return t&&(e=Math.max(t,e)),n&&(e=Math.min(n,e)),e},e.prototype.getWrapLimit=function(){return this.$wrapLimit},e.prototype.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},e.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},e.prototype.$updateInternalDataOnChange=function(e){var t=this.$useWrapMode,n=e.action,i=e.start,s=e.end,r=i.row,o=s.row,a=o-r,l=null;if(this.$updating=!0,0!=a)if("remove"===n){this[t?"$wrapData":"$rowLengthCache"].splice(r,a);var c=this.$foldData;l=this.getFoldsInRange(e),this.removeFolds(l);var u=0;if(p=this.getFoldLine(s.row)){p.addRemoveChars(s.row,s.column,i.column-s.column),p.shiftRow(-a);var h=this.getFoldLine(r);h&&h!==p&&(h.merge(p),p=h),u=c.indexOf(p)+1}for(;u<c.length;u++){(p=c[u]).start.row>=s.row&&p.shiftRow(-a)}o=r}else{var d=Array(a);d.unshift(r,0);var f=t?this.$wrapData:this.$rowLengthCache;f.splice.apply(f,d);c=this.$foldData,u=0;if(p=this.getFoldLine(r)){var g=p.range.compareInside(i.row,i.column);0==g?(p=p.split(i.row,i.column))&&(p.shiftRow(a),p.addRemoveChars(o,0,s.column-i.column)):-1==g&&(p.addRemoveChars(r,0,s.column-i.column),p.shiftRow(a)),u=c.indexOf(p)+1}for(;u<c.length;u++){var p;(p=c[u]).start.row>=r&&p.shiftRow(a)}}else a=Math.abs(e.start.column-e.end.column),"remove"===n&&(l=this.getFoldsInRange(e),this.removeFolds(l),a=-a),(p=this.getFoldLine(r))&&p.addRemoveChars(r,i.column,a);return t&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,t?this.$updateWrapData(r,o):this.$updateRowLengthCache(r,o),l},e.prototype.$updateRowLengthCache=function(e,t){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},e.prototype.$updateWrapData=function(e,t){var n,i,s=this.doc.getAllLines(),r=this.getTabSize(),o=this.$wrapData,a=this.$wrapLimit,l=e;for(t=Math.min(t,s.length-1);l<=t;)(i=this.getFoldLine(l,i))?(n=[],i.walk(function(e,t,i,r){var o;if(null!=e){(o=this.$getDisplayTokens(e,n.length))[0]=_;for(var a=1;a<o.length;a++)o[a]=v}else o=this.$getDisplayTokens(s[t].substring(r,i),n.length);n=n.concat(o)}.bind(this),i.end.row,s[i.end.row].length+1),o[i.start.row]=this.$computeWrapSplits(n,a,r),l=i.end.row+1):(n=this.$getDisplayTokens(s[l]),o[l]=this.$computeWrapSplits(n,a,r),l++)},e.prototype.$computeWrapSplits=function(e,t,n){if(0==e.length)return[];var i=[],s=e.length,r=0,o=0,a=this.$wrapAsCode,l=this.$indentedSoftWrap,c=t<=Math.max(2*n,8)||!1===l?0:Math.floor(t/2);function u(t){for(var s=t-r,u=r;u<t;u++){var d=e[u];12!==d&&2!==d||(s-=1)}i.length||(h=function(){var t=0;if(0===c)return t;if(l)for(var i=0;i<e.length;i++){var s=e[i];if(s==S)t+=1;else{if(s!=w){if(s==k)continue;break}t+=n}}return a&&!1!==l&&(t+=n),Math.min(t,c)}(),i.indent=h),o+=s,i.push(o),r=t}for(var h=0;s-r>t-h;){var d=r+t-h;if(e[d-1]>=S&&e[d]>=S)u(d);else if(e[d]!=_&&e[d]!=v){for(var f=Math.max(d-(t-(t>>2)),r-1);d>f&&e[d]<_;)d--;if(a){for(;d>f&&e[d]<_;)d--;for(;d>f&&e[d]==y;)d--}else for(;d>f&&e[d]<S;)d--;d>f?u(++d):(e[d=r+t]==b&&d--,u(d-h))}else{for(;d!=r-1&&e[d]!=_;d--);if(d>r){u(d);continue}for(d=r+t;d<e.length&&e[d]==v;d++);if(d==e.length)break;u(d)}}return i},e.prototype.$getDisplayTokens=function(e,t){var n,i=[];t=t||0;for(var s=0;s<e.length;s++){var r=e.charCodeAt(s);if(9==r){n=this.getScreenTabSize(i.length+t),i.push(w);for(var o=1;o<n;o++)i.push(k)}else 32==r?i.push(S):r>39&&r<48||r>57&&r<64?i.push(y):r>=4352&&C(r)?i.push(m,b):i.push(m)}return i},e.prototype.$getStringScreenWidth=function(e,t,n){if(0==t)return[0,0];var i,s;for(null==t&&(t=1/0),n=n||0,s=0;s<e.length&&(9==(i=e.charCodeAt(s))?n+=this.getScreenTabSize(n):i>=4352&&C(i)?n+=2:n+=1,!(n>t));s++);return[n,s]},e.prototype.getRowLength=function(e){var t=1;return this.lineWidgets&&(t+=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0),this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+t:t},e.prototype.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},e.prototype.getRowWrapIndent=function(e){if(this.$useWrapMode){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE),n=this.$wrapData[t.row];return n.length&&n[0]<t.column?n.indent:0}return 0},e.prototype.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},e.prototype.getDocumentLastRowColumn=function(e,t){var n=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(n)},e.prototype.getDocumentLastRowColumnPosition=function(e,t){var n=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(n,Number.MAX_VALUE/10)},e.prototype.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:void 0},e.prototype.getScreenTabSize=function(e){return this.$tabSize-(e%this.$tabSize|0)},e.prototype.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},e.prototype.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},e.prototype.screenToDocumentPosition=function(e,t,n){if(e<0)return{row:0,column:0};var i,s,r=0,o=0,a=0,l=0,c=this.$screenRowCache,u=this.$getRowCacheIndex(c,e),h=c.length;if(h&&u>=0){a=c[u],r=this.$docRowCache[u];var d=e>c[h-1]}else d=!h;for(var f=this.getLength()-1,g=this.getNextFoldLine(r),p=g?g.start.row:1/0;a<=e&&!(a+(l=this.getRowLength(r))>e||r>=f);)a+=l,++r>p&&(r=g.end.row+1,p=(g=this.getNextFoldLine(r,g))?g.start.row:1/0),d&&(this.$docRowCache.push(r),this.$screenRowCache.push(a));if(g&&g.start.row<=r)i=this.getFoldDisplayLine(g),r=g.start.row;else{if(a+l<=e||r>f)return{row:f,column:this.getLine(f).length};i=this.getLine(r),g=null}var m=0,b=Math.floor(e-a);if(this.$useWrapMode){var _=this.$wrapData[r];_&&(s=_[b],b>0&&_.length&&(m=_.indent,o=_[b-1]||_[_.length-1],i=i.substring(o)))}return void 0!==n&&this.$bidiHandler.isBidiRow(a+b,r,b)&&(t=this.$bidiHandler.offsetToCol(n)),o+=this.$getStringScreenWidth(i,t-m)[1],this.$useWrapMode&&o>=s&&(o=s-1),g?g.idxToPosition(o):{row:r,column:o}},e.prototype.documentToScreenPosition=function(e,t){if("undefined"===typeof t)var n=this.$clipPositionToDocument(e.row,e.column);else n=this.$clipPositionToDocument(e,t);e=n.row,t=n.column;var i,s=0,r=null;(i=this.getFoldAt(e,t,1))&&(e=i.start.row,t=i.start.column);var o,a=0,l=this.$docRowCache,c=this.$getRowCacheIndex(l,e),u=l.length;if(u&&c>=0){a=l[c],s=this.$screenRowCache[c];var h=e>l[u-1]}else h=!u;for(var d=this.getNextFoldLine(a),f=d?d.start.row:1/0;a<e;){if(a>=f){if((o=d.end.row+1)>e)break;f=(d=this.getNextFoldLine(o,d))?d.start.row:1/0}else o=a+1;s+=this.getRowLength(a),a=o,h&&(this.$docRowCache.push(a),this.$screenRowCache.push(s))}var g="";d&&a>=f?(g=this.getFoldDisplayLine(d,e,t),r=d.start.row):(g=this.getLine(e).substring(0,t),r=e);var p=0;if(this.$useWrapMode){var m=this.$wrapData[r];if(m){for(var b=0;g.length>=m[b];)s++,b++;g=g.substring(m[b-1]||0,g.length),p=b>0?m.indent:0}}return this.lineWidgets&&this.lineWidgets[a]&&this.lineWidgets[a].rowsAbove&&(s+=this.lineWidgets[a].rowsAbove),{row:s,column:p+this.$getStringScreenWidth(g)[0]}},e.prototype.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},e.prototype.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},e.prototype.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var n=this.$wrapData.length,i=0,s=(a=0,(t=this.$foldData[a++])?t.start.row:1/0);i<n;){var r=this.$wrapData[i];e+=r?r.length+1:1,++i>s&&(i=t.end.row+1,s=(t=this.$foldData[a++])?t.start.row:1/0)}else{e=this.getLength();for(var o=this.$foldData,a=0;a<o.length;a++)e-=(t=o[a]).end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},e.prototype.$setFontMetrics=function(e){this.$enableVarChar&&(this.$getStringScreenWidth=function(t,n,i){if(0===n)return[0,0];var s,r;for(n||(n=1/0),i=i||0,r=0;r<t.length&&!((i+="\t"===(s=t.charAt(r))?this.getScreenTabSize(i):e.getCharacterWidth(s))>n);r++);return[i,r]})},e.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},e}();p.$uid=0,p.prototype.$modes=o.$modes,p.prototype.getValue=p.prototype.toString,p.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},p.prototype.$overwrite=!1,p.prototype.$mode=null,p.prototype.$modeId=null,p.prototype.$scrollTop=0,p.prototype.$scrollLeft=0,p.prototype.$wrapLimit=80,p.prototype.$useWrapMode=!1,p.prototype.$wrapLimitRange={min:null,max:null},p.prototype.lineWidgets=null,p.prototype.isFullWidth=C,i.implement(p.prototype,a);var m=1,b=2,_=3,v=4,y=9,S=10,w=11,k=12;function C(e){return!(e<4352)&&(e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510)}e("./edit_session/folding").Folding.call(p.prototype),e("./edit_session/bracket_match").BracketMatch.call(p.prototype),o.defineOptions(p.prototype,"session",{wrap:{set:function(e){if(e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e)if(this.$wrap=e,e){var t="number"==typeof e?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){(e="auto"==e?"text"!=this.$mode.type:"text"!=e)!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){(e=parseInt(e))>0&&this.$tabSize!==e&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(e){this.setFoldStyle(e)},handlesSet:!0},overwrite:{set:function(e){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=p})),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],(function(e,t,n){"use strict";var i=e("./lib/lang"),s=e("./lib/oop"),r=e("./range").Range,o=function(){function e(){this.$options={}}return e.prototype.set=function(e){return s.mixin(this.$options,e),this},e.prototype.getOptions=function(){return i.copyObject(this.$options)},e.prototype.setOptions=function(e){this.$options=e},e.prototype.find=function(e){var t=this.$options,n=this.$matchIterator(e,t);if(!n)return!1;var i=null;return n.forEach((function(e,n,s,o){return i=new r(e,n,s,o),!(n==o&&t.start&&t.start.start&&0!=t.skipCurrent&&i.isEqual(t.start))||(i=null,!1)})),i},e.prototype.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,s=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),o=[],a=t.re;if(t.$isMultiLine){var l,c=a.length,u=s.length-c;e:for(var h=a.offset||0;h<=u;h++){for(var d=0;d<c;d++)if(-1==s[h+d].search(a[d]))continue e;var f=s[h],g=s[h+c-1],p=f.length-f.match(a[0])[0].length,m=g.match(a[c-1])[0].length;l&&l.end.row===h&&l.end.column>p||(o.push(l=new r(h,p,h+c-1,m)),c>2&&(h=h+c-2))}}else for(var b=0;b<s.length;b++){var _=i.getMatchOffsets(s[b],a);for(d=0;d<_.length;d++){var v=_[d];o.push(new r(b,v.offset,b,v.offset+v.length))}}if(n){var y=n.start.column,S=n.end.column;for(b=0,d=o.length-1;b<d&&o[b].start.column<y&&0==o[b].start.row;)b++;for(var w=n.end.row-n.start.row;b<d&&o[d].end.column>S&&o[d].end.row==w;)d--;for(o=o.slice(b,d+1),b=0,d=o.length;b<d;b++)o[b].start.row+=n.start.row,o[b].end.row+=n.start.row}return o},e.prototype.replace=function(e,t){var n=this.$options,i=this.$assembleRegExp(n);if(n.$isMultiLine)return t;if(i){var s=i.exec(e);if(!s||s[0].length!=e.length)return null;if(t=e.replace(i,t),n.preserveCase){t=t.split("");for(var r=Math.min(e.length,e.length);r--;){var o=e[r];o&&o.toLowerCase()!=o?t[r]=t[r].toUpperCase():t[r]=t[r].toLowerCase()}t=t.join("")}return t}},e.prototype.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=i.escapeRegExp(n));var s=e.caseSensitive?"gm":"gmi";try{new RegExp(n,"u"),e.$supportsUnicodeFlag=!0,s+="u"}catch(o){e.$supportsUnicodeFlag=!1}if(e.wholeWord&&(n=function(e,t){var n=i.supportsLookbehind();function s(e,i){return void 0===i&&(i=!0),(n&&t.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w")).test(e)||t.regExp?n&&t.$supportsUnicodeFlag?i?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var r=Array.from(e),o=r[0],a=r[r.length-1];return s(o)+e+s(a,!1)}(n,e)),e.$isMultiLine=!t&&/[\n\r]/.test(n),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,s);try{var r=new RegExp(n,s)}catch(o){r=!1}return e.re=r},e.prototype.$assembleMultilineRegExp=function(e,t){for(var n=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),i=[],s=0;s<n.length;s++)try{i.push(new RegExp(n[s],t))}catch(r){return!1}return i},e.prototype.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var s=1==t.backwards,r=0!=t.skipCurrent,o=n.unicode,a=t.range,l=t.start;l||(l=a?a[s?"end":"start"]:e.selection.getRange()),l.start&&(l=l[r!=s?"end":"start"]);var c=a?a.start.row:0,u=a?a.end.row:e.getLength()-1;if(s)var h=function(e){var n=l.row;if(!f(n,l.column,e)){for(n--;n>=c;n--)if(f(n,Number.MAX_VALUE,e))return;if(0!=t.wrap)for(n=u,c=l.row;n>=c;n--)if(f(n,Number.MAX_VALUE,e))return}};else h=function(e){var n=l.row;if(!f(n,l.column,e)){for(n+=1;n<=u;n++)if(f(n,0,e))return;if(0!=t.wrap)for(n=c,u=l.row;n<=u;n++)if(f(n,0,e))return}};if(t.$isMultiLine)var d=n.length,f=function(t,i,r){var o=s?t-d+1:t;if(!(o<0||o+d>e.getLength())){var a=e.getLine(o),l=a.search(n[0]);if(!(!s&&l<i||-1===l)){for(var c=1;c<d;c++)if(-1==(a=e.getLine(o+c)).search(n[c]))return;var u=a.match(n[d-1])[0].length;if(!(s&&u>i))return!!r(o,l,o+d-1,u)||void 0}}};else if(s)f=function(t,s,r){var a,l=e.getLine(t),c=[],u=0;for(n.lastIndex=0;a=n.exec(l);){var h=a[0].length;if(u=a.index,!h){if(u>=l.length)break;n.lastIndex=u+=i.skipEmptyMatch(l,u,o)}if(a.index+h>s)break;c.push(a.index,h)}for(var d=c.length-1;d>=0;d-=2){var f=c[d-1];if(r(t,f,t,f+(h=c[d])))return!0}};else f=function(t,s,r){var a,l,c=e.getLine(t);for(n.lastIndex=s;l=n.exec(c);){var u=l[0].length;if(r(t,a=l.index,t,a+u))return!0;if(!u&&(n.lastIndex=a+=i.skipEmptyMatch(c,a,o),a>=c.length))return!1}};return{forEach:h}},e}();t.Search=o})),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],(function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=e("../lib/keys"),r=e("../lib/useragent"),o=s.KEY_MODS,a=function(){function e(e,t){this.$init(e,t,!1)}return e.prototype.$init=function(e,t,n){this.platform=t||(r.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=n},e.prototype.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},e.prototype.removeCommand=function(e,t){var n=e&&("string"===typeof e?e:e.name);e=this.commands[n],t||delete this.commands[n];var i=this.commandKeyBinding;for(var s in i){var r=i[s];if(r==e)delete i[s];else if(Array.isArray(r)){var o=r.indexOf(e);-1!=o&&(r.splice(o,1),1==r.length&&(i[s]=r[0]))}}},e.prototype.bindKey=function(e,t,n){if("object"==typeof e&&e&&(void 0==n&&(n=e.position),e=e[this.platform]),e)return"function"==typeof t?this.addCommand({exec:t,bindKey:e,name:t.name||e}):void e.split("|").forEach((function(e){var i="";if(-1!=e.indexOf(" ")){var s=e.split(/\s+/);e=s.pop(),s.forEach((function(e){var t=this.parseKeys(e),n=o[t.hashId]+t.key;i+=(i?" ":"")+n,this._addCommandToBinding(i,"chainKeys")}),this),i+=" "}var r=this.parseKeys(e),a=o[r.hashId]+r.key;this._addCommandToBinding(i+a,t,n)}),this)},e.prototype._addCommandToBinding=function(e,t,n){var i,s=this.commandKeyBinding;if(t)if(!s[e]||this.$singleCommand)s[e]=t;else{Array.isArray(s[e])?-1!=(i=s[e].indexOf(t))&&s[e].splice(i,1):s[e]=[s[e]],"number"!=typeof n&&(n=l(t));var r=s[e];for(i=0;i<r.length;i++){if(l(r[i])>n)break}r.splice(i,0,t)}else delete s[e]},e.prototype.addCommands=function(e){e&&Object.keys(e).forEach((function(t){var n=e[t];if(n){if("string"===typeof n)return this.bindKey(n,t);"function"===typeof n&&(n={exec:n}),"object"===typeof n&&(n.name||(n.name=t),this.addCommand(n))}}),this)},e.prototype.removeCommands=function(e){Object.keys(e).forEach((function(t){this.removeCommand(e[t])}),this)},e.prototype.bindKeys=function(e){Object.keys(e).forEach((function(t){this.bindKey(t,e[t])}),this)},e.prototype._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},e.prototype.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter((function(e){return e})),n=t.pop(),i=s[n];if(s.FUNCTION_KEYS[i])n=s.FUNCTION_KEYS[i].toLowerCase();else{if(!t.length)return{key:n,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:n.toUpperCase(),hashId:-1}}for(var r=0,o=t.length;o--;){var a=s.KEY_MODS[t[o]];if(null==a)return"undefined"!=typeof console&&console.error("invalid modifier "+t[o]+" in "+e),!1;r|=a}return{key:n,hashId:r}},e.prototype.findKeyCommand=function(e,t){var n=o[e]+t;return this.commandKeyBinding[n]},e.prototype.handleKeyboard=function(e,t,n,i){if(!(i<0)){var s=o[t]+n,r=this.commandKeyBinding[s];return e.$keyChain&&(e.$keyChain+=" "+s,r=this.commandKeyBinding[e.$keyChain]||r),!r||"chainKeys"!=r&&"chainKeys"!=r[r.length-1]?(e.$keyChain&&(t&&4!=t||1!=n.length?(-1==t||i>0)&&(e.$keyChain=""):e.$keyChain=e.$keyChain.slice(0,-s.length-1)),{command:r}):(e.$keyChain=e.$keyChain||s,{command:"null"})}},e.prototype.getStatusText=function(e,t){return t.$keyChain||""},e}();function l(e){return"object"==typeof e&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}var c=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.$singleCommand=!0,i}return i(t,e),t}(a);c.call=function(e,t,n){a.prototype.$init.call(e,t,n,!0)},a.call=function(e,t,n){a.prototype.$init.call(e,t,n,!1)},t.HashHandler=c,t.MultiHashHandler=a})),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=e("../lib/oop"),r=e("../keyboard/hash_handler").MultiHashHandler,o=e("../lib/event_emitter").EventEmitter,a=function(e){function t(t,n){var i=e.call(this,n,t)||this;return i.byName=i.commands,i.setDefaultHandler("exec",(function(e){return e.args?e.command.exec(e.editor,e.args,e.event,!1):e.command.exec(e.editor,{},e.event,!0)})),i}return i(t,e),t.prototype.exec=function(e,t,n){if(Array.isArray(e)){for(var i=e.length;i--;)if(this.exec(e[i],t,n))return!0;return!1}if("string"===typeof e&&(e=this.commands[e]),!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;if(0!=this.$checkCommandState&&e.isAvailable&&!e.isAvailable(t))return!1;var s={editor:t,command:e,args:n};return s.returnValue=this._emit("exec",s),this._signal("afterExec",s),!1!==s.returnValue},t.prototype.toggleRecording=function(e){if(!this.$inReplay)return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},t.prototype.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach((function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])}),this)}finally{this.$inReplay=!1}}},t.prototype.trimMacro=function(e){return e.map((function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e}))},t}(r);s.implement(a.prototype,o),t.CommandManager=a})),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],(function(e,t,n){"use strict";var i=e("../lib/lang"),s=e("../config"),r=e("../range").Range;function o(e,t){return{win:e,mac:t}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:o("Ctrl-,","Command-,"),exec:function(e){s.loadModule("ace/ext/settings_menu",(function(t){t.init(e),e.showSettingsMenu()}))},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:o("Alt-E","F4"),exec:function(e){s.loadModule("ace/ext/error_marker",(function(t){t.showErrorMarker(e,1)}))},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:o("Alt-Shift-E","Shift-F4"),exec:function(e){s.loadModule("ace/ext/error_marker",(function(t){t.showErrorMarker(e,-1)}))},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:o("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:o(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:o("Ctrl-L","Command-L"),exec:function(e,t){"number"!==typeof t||isNaN(t)||e.gotoLine(t),e.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:o("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:o("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:o("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:o("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:o(null,"Ctrl-Command-Option-0"),exec:function(e){e.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:o("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:o("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:o("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:o("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:o("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:o("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:o("Ctrl-F","Command-F"),exec:function(e){s.loadModule("ace/ext/searchbox",(function(t){t.Search(e)}))},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:o("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:o("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:o("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:o("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:o("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:o("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:o("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:o("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:o("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:o("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:o("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:o("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:o("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:o("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:o("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:o("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:o("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:o("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:o("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:o("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:o(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:o("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:o(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:o("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:o("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:o("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:o("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:o("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:o("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:o("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(e){e.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:o(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(e){},readOnly:!0},{name:"cut",description:"Cut",exec:function(e){var t=e.$copyWithEmptySelection&&e.selection.isEmpty()?e.selection.getLineRange():e.selection.getRange();e._emit("cut",t),t.isEmpty()||e.session.remove(t),e.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(e,t){e.$handlePaste(t)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:o("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:o("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:o("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:o("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:o("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:o("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:o("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:o("Ctrl-H","Command-Option-F"),exec:function(e){s.loadModule("ace/ext/searchbox",(function(t){t.Search(e,!0)}))}},{name:"undo",description:"Undo",bindKey:o("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",description:"Redo",bindKey:o("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:o("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:o("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:o("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:o("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:o("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:o("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:o("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:o("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:o("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:o("Ctrl-Shift-Backspace",null),exec:function(e){var t=e.selection.getRange();t.start.column=0,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:o("Ctrl-Shift-Delete",null),exec:function(e){var t=e.selection.getRange();t.end.column=Number.MAX_VALUE,e.session.remove(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:o("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:o("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:o("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:o("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:o("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:o("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(e,t){e.insert(i.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:o(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:o("Alt-Shift-X","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:o("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:o("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:o(null,null),exec:function(e){e.autoIndent()},scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:o("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:o("Ctrl+F3","F3"),exec:function(e){e.openLink()}},{name:"joinlines",description:"Join lines",bindKey:o(null,null),exec:function(e){for(var t=e.selection.isBackwards(),n=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),s=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),o=e.session.doc.getLine(n.row).length,a=e.session.doc.getTextRange(e.selection.getRange()).replace(/\n\s*/," ").length,l=e.session.doc.getLine(n.row),c=n.row+1;c<=s.row+1;c++){var u=i.stringTrimLeft(i.stringTrimRight(e.session.doc.getLine(c)));0!==u.length&&(u=" "+u),l+=u}s.row+1<e.session.doc.getLength()-1&&(l+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new r(n.row,0,s.row+2,0),l),a>0?(e.selection.moveCursorTo(n.row,n.column),e.selection.selectTo(n.row,n.column+a)):(o=e.session.doc.getLine(n.row).length>o?o+1:o,e.selection.moveCursorTo(n.row,o))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:o(null,null),exec:function(e){var t=e.session.doc.getLength()-1,n=e.session.doc.getLine(t).length,i=e.selection.rangeList.ranges,s=[];i.length<1&&(i=[e.selection.getRange()]);for(var o=0;o<i.length;o++)o==i.length-1&&(i[o].end.row===t&&i[o].end.column===n||s.push(new r(i[o].end.row,i[o].end.column,t,n))),0===o?0===i[o].start.row&&0===i[o].start.column||s.push(new r(0,0,i[o].start.row,i[o].start.column)):s.push(new r(i[o-1].end.row,i[o-1].end.column,i[o].start.row,i[o].start.column));e.exitMultiSelectMode(),e.clearSelection();for(o=0;o<s.length;o++)e.selection.addRange(s[o],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(e){e.selection.clearSelection(),e.navigateLineEnd(),e.insert("\n")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(e){e.selection.clearSelection();var t=e.getCursorPosition();e.selection.moveTo(t.row-1,Number.MAX_VALUE),e.insert("\n"),0===t.row&&e.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(e){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),e.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:o("F1","F1"),exec:function(e){e.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:o(null,null),exec:function(e){e.prompt({$type:"modes"})},readOnly:!0}];for(var a=1;a<9;a++)t.commands.push({name:"foldToLevel"+a,description:"Fold To Level "+a,level:a,exec:function(e){e.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})})),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("./lib/dom"),s=function(){function e(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return e.prototype.getRowLength=function(e){var t;return t=this.lineWidgets&&this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0,this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},e.prototype.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach((function(t){t&&t.rowCount&&!t.hidden&&(e+=t.rowCount)})),e},e.prototype.$onChangeEditor=function(e){this.attach(e.editor)},e.prototype.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))},e.prototype.detach=function(e){var t=this.editor;if(t){this.editor=null,t.widgetManager=null,t.renderer.off("beforeRender",this.measureWidgets),t.renderer.off("afterRender",this.renderWidgets);var n=this.session.lineWidgets;n&&n.forEach((function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))}))}},e.prototype.updateOnFold=function(e,t){var n=t.lineWidgets;if(n&&e.action){for(var i=e.data,s=i.start.row,r=i.end.row,o="add"==e.action,a=s+1;a<r;a++)n[a]&&(n[a].hidden=o);n[r]&&(o?n[s]?n[r].hidden=o:n[s]=n[r]:(n[s]==n[r]&&(n[s]=void 0),n[r].hidden=o))}},e.prototype.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var n=e.start.row,i=e.end.row-n;if(0===i);else if("remove"==e.action){var s=t.splice(n+1,i);!t[n]&&s[s.length-1]&&(t[n]=s.pop()),s.forEach((function(e){e&&this.removeLineWidget(e)}),this),this.$updateRows()}else{var r=new Array(i);t[n]&&null!=t[n].column&&e.start.column>t[n].column&&n++,r.unshift(n,0),t.splice.apply(t,r),this.$updateRows()}}},e.prototype.$updateRows=function(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach((function(e,n){if(e)for(t=!1,e.row=n;e.$oldWidget;)e.$oldWidget.row=n,e=e.$oldWidget})),t&&(this.session.lineWidgets=null)}},e.prototype.$registerLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var t=this.session.lineWidgets[e.row];return t&&(e.$oldWidget=t,t.el&&t.el.parentNode&&(t.el.parentNode.removeChild(t.el),t._inDocument=!1)),this.session.lineWidgets[e.row]=e,e},e.prototype.addLineWidget=function(e){if(this.$registerLineWidget(e),e.session=this.session,!this.editor)return e;var t=this.editor.renderer;e.html&&!e.el&&(e.el=i.createElement("div"),e.el.innerHTML=e.html),e.text&&!e.el&&(e.el=i.createElement("div"),e.el.textContent=e.text),e.el&&(i.addCssClass(e.el,"ace_lineWidgetContainer"),e.className&&i.addCssClass(e.el,e.className),e.el.style.position="absolute",e.el.style.zIndex="5",t.container.appendChild(e.el),e._inDocument=!0,e.coverGutter||(e.el.style.zIndex="3"),null==e.pixelHeight&&(e.pixelHeight=e.el.offsetHeight)),null==e.rowCount&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight);var n=this.session.getFoldAt(e.row,0);if(e.$fold=n,n){var s=this.session.lineWidgets;e.row!=n.end.row||s[n.start.row]?e.hidden=!0:s[n.start.row]=e}return this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),this.onWidgetChanged(e),e},e.prototype.removeLineWidget=function(e){if(e._inDocument=!1,e.session=null,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(n){}if(this.session.lineWidgets){var t=this.session.lineWidgets[e.row];if(t==e)this.session.lineWidgets[e.row]=e.$oldWidget,e.$oldWidget&&this.onWidgetChanged(e.$oldWidget);else for(;t;){if(t.$oldWidget==e){t.$oldWidget=e.$oldWidget;break}t=t.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},e.prototype.getWidgetsAtRow=function(e){for(var t=this.session.lineWidgets,n=t&&t[e],i=[];n;)i.push(n),n=n.$oldWidget;return i},e.prototype.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},e.prototype.measureWidgets=function(e,t){var n=this.session._changedWidgets,i=t.layerConfig;if(n&&n.length){for(var s=1/0,r=0;r<n.length;r++){var o=n[r];if(o&&o.el&&o.session==this.session){if(!o._inDocument){if(this.session.lineWidgets[o.row]!=o)continue;o._inDocument=!0,t.container.appendChild(o.el)}o.h=o.el.offsetHeight,o.fixedWidth||(o.w=o.el.offsetWidth,o.screenWidth=Math.ceil(o.w/i.characterWidth));var a=o.h/i.lineHeight;o.coverLine&&(a-=this.session.getRowLineCount(o.row))<0&&(a=0),o.rowCount!=a&&(o.rowCount=a,o.row<s&&(s=o.row))}}s!=1/0&&(this.session._emit("changeFold",{data:{start:{row:s}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},e.prototype.renderWidgets=function(e,t){var n=t.layerConfig,i=this.session.lineWidgets;if(i){for(var s=Math.min(this.firstRow,n.firstRow),r=Math.max(this.lastRow,n.lastRow,i.length);s>0&&!i[s];)s--;this.firstRow=n.firstRow,this.lastRow=n.lastRow,t.$cursorLayer.config=n;for(var o=s;o<=r;o++){var a=i[o];if(a&&a.el)if(a.hidden)a.el.style.top=-100-(a.pixelHeight||0)+"px";else{a._inDocument||(a._inDocument=!0,t.container.appendChild(a.el));var l=t.$cursorLayer.getPixelPosition({row:o,column:0},!0).top;a.coverLine||(l+=n.lineHeight*this.session.getRowLineCount(a.row)),a.el.style.top=l-n.offset+"px";var c=a.coverGutter?0:t.gutterWidth;a.fixedWidth||(c-=t.scrollLeft),a.el.style.left=c+"px",a.fullWidth&&a.screenWidth&&(a.el.style.minWidth=n.width+2*n.padding+"px"),a.fixedWidth?a.el.style.right=t.scrollBar.getWidth()+"px":a.el.style.right=""}}}},e}();t.LineWidgets=s})),ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],(function(e,t,n){"use strict";var i=e("../lib/keys"),s=e("../mouse/default_gutter_handler").GutterTooltip,r=function(){function e(e){this.editor=e,this.gutterLayer=e.renderer.$gutterLayer,this.element=e.renderer.$gutter,this.lines=e.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new s(this.editor)}return e.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},e.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},e.prototype.$onGutterKeyDown=function(e){if(this.annotationTooltip.isOpen)return e.preventDefault(),void(e.keyCode===i.escape&&this.annotationTooltip.hideTooltip());if(e.target===this.element){if(e.keyCode!=i.enter)return;e.preventDefault();var t=this.editor.getCursorPosition().row;return this.editor.isRowVisible(t)||this.editor.scrollToLine(t,!0,!0),void setTimeout(function(){var e=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),t=this.$findNearestFoldWidget(e),n=this.$findNearestAnnotation(e);if(null!==t||null!==n)return null===t&&null!==n?(this.activeRowIndex=n,this.activeLane="annotation",void this.$focusAnnotation(this.activeRowIndex)):null!==t&&null===n?(this.activeRowIndex=t,this.activeLane="fold",void this.$focusFoldWidget(this.activeRowIndex)):Math.abs(n-e)<Math.abs(t-e)?(this.activeRowIndex=n,this.activeLane="annotation",void this.$focusAnnotation(this.activeRowIndex)):(this.activeRowIndex=t,this.activeLane="fold",void this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10)}this.$handleGutterKeyboardInteraction(e),setTimeout(function(){this.editor._signal("gutterkeydown",new o(e,this))}.bind(this),10)},e.prototype.$handleGutterKeyboardInteraction=function(e){if(e.keyCode!==i.tab){if(e.keyCode===i.escape)return e.preventDefault(),this.$blurGutter(),this.element.focus(),void(this.lane=null);if(e.keyCode!==i.up)if(e.keyCode!==i.down){if(e.keyCode===i.left)return e.preventDefault(),void this.$switchLane("annotation");if(e.keyCode===i.right)return e.preventDefault(),void this.$switchLane("fold");if(e.keyCode!==i.enter&&e.keyCode!==i.space);else switch(e.preventDefault(),this.activeLane){case"fold":if("start"===this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]){var t=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),e),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==t&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(t),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}if("end"===this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)])break;return;case"annotation":var n=this.lines.cells[this.activeRowIndex].element.childNodes[2].getBoundingClientRect(),s=this.annotationTooltip.getElement().style;s.left=n.right+"px",s.top=n.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex))}}else switch(e.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown()}else switch(e.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp()}}else e.preventDefault()},e.prototype.$blurGutter=function(){if(null!==this.activeRowIndex)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex)}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},e.prototype.$isFoldWidgetVisible=function(e){var t=this.editor.isRowFullyVisible(this.$rowIndexToRow(e)),n="none"!==this.$getFoldWidget(e).style.display;return t&&n},e.prototype.$isAnnotationVisible=function(e){var t=this.editor.isRowFullyVisible(this.$rowIndexToRow(e)),n="none"!==this.$getAnnotation(e).style.display;return t&&n},e.prototype.$getFoldWidget=function(e){return this.lines.get(e).element.childNodes[1]},e.prototype.$getAnnotation=function(e){return this.lines.get(e).element.childNodes[2]},e.prototype.$findNearestFoldWidget=function(e){if(this.$isFoldWidgetVisible(e))return e;for(var t=0;e-t>0||e+t<this.lines.getLength()-1;){if(e-++t>=0&&this.$isFoldWidgetVisible(e-t))return e-t;if(e+t<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(e+t))return e+t}return null},e.prototype.$findNearestAnnotation=function(e){if(this.$isAnnotationVisible(e))return e;for(var t=0;e-t>0||e+t<this.lines.getLength()-1;){if(e-++t>=0&&this.$isAnnotationVisible(e-t))return e-t;if(e+t<=this.lines.getLength()-1&&this.$isAnnotationVisible(e+t))return e+t}return null},e.prototype.$focusFoldWidget=function(e){if(null!=e){var t=this.$getFoldWidget(e);t.classList.add(this.editor.renderer.keyboardFocusClassName),t.focus()}},e.prototype.$focusAnnotation=function(e){if(null!=e){var t=this.$getAnnotation(e);t.classList.add(this.editor.renderer.keyboardFocusClassName),t.focus()}},e.prototype.$blurFoldWidget=function(e){var t=this.$getFoldWidget(e);t.classList.remove(this.editor.renderer.keyboardFocusClassName),t.blur()},e.prototype.$blurAnnotation=function(e){var t=this.$getAnnotation(e);t.classList.remove(this.editor.renderer.keyboardFocusClassName),t.blur()},e.prototype.$moveFoldWidgetUp=function(){for(var e=this.activeRowIndex;e>0;)if(e--,this.$isFoldWidgetVisible(e))return this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=e,void this.$focusFoldWidget(this.activeRowIndex)},e.prototype.$moveFoldWidgetDown=function(){for(var e=this.activeRowIndex;e<this.lines.getLength()-1;)if(e++,this.$isFoldWidgetVisible(e))return this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=e,void this.$focusFoldWidget(this.activeRowIndex)},e.prototype.$moveAnnotationUp=function(){for(var e=this.activeRowIndex;e>0;)if(e--,this.$isAnnotationVisible(e))return this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=e,void this.$focusAnnotation(this.activeRowIndex)},e.prototype.$moveAnnotationDown=function(){for(var e=this.activeRowIndex;e<this.lines.getLength()-1;)if(e++,this.$isAnnotationVisible(e))return this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=e,void this.$focusAnnotation(this.activeRowIndex)},e.prototype.$switchLane=function(e){switch(e){case"annotation":if("annotation"===this.activeLane)break;var t=this.$findNearestAnnotation(this.activeRowIndex);if(null==t)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=t,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if("fold"===this.activeLane)break;var n=this.$findNearestFoldWidget(this.activeRowIndex);if(null==n)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=n,this.$focusFoldWidget(this.activeRowIndex)}},e.prototype.$rowIndexToRow=function(e){var t=this.lines.get(e);return t?t.row:null},e.prototype.$rowToRowIndex=function(e){for(var t=0;t<this.lines.getLength();t++){if(this.lines.get(t).row==e)return t}return null},e}();t.GutterKeyboardHandler=r;var o=function(){function e(e,t){this.gutterKeyboardHandler=t,this.domEvent=e}return e.prototype.getKey=function(){return i.keyCodeToString(this.domEvent.keyCode)},e.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},e.prototype.isInAnnotationLane=function(){return"annotation"===this.gutterKeyboardHandler.activeLane},e.prototype.isInFoldLane=function(){return"fold"===this.gutterKeyboardHandler.activeLane},e}();t.GutterKeyboardEvent=o})),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],(function(e,t,n){"use strict";var i=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},s=e("./lib/oop"),r=e("./lib/dom"),o=e("./lib/lang"),a=e("./lib/useragent"),l=e("./keyboard/textinput").TextInput,c=e("./mouse/mouse_handler").MouseHandler,u=e("./mouse/fold_handler").FoldHandler,h=e("./keyboard/keybinding").KeyBinding,d=e("./edit_session").EditSession,f=e("./search").Search,g=e("./range").Range,p=e("./lib/event_emitter").EventEmitter,m=e("./commands/command_manager").CommandManager,b=e("./commands/default_commands").commands,_=e("./config"),v=e("./token_iterator").TokenIterator,y=e("./line_widgets").LineWidgets,S=e("./keyboard/gutter_handler").GutterKeyboardHandler,w=e("./config").nls,k=e("./clipboard"),C=e("./lib/keys"),x=function(){function e(t,n,i){this.session,this.$toDestroy=[];var s=t.getContainerElement();this.container=s,this.renderer=t,this.id="editor"+ ++e.$uid,this.commands=new m(a.isMac?"mac":"win",b),"object"==typeof document&&(this.textInput=new l(t.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new c(this),new u(this)),this.keyBinding=new h(this),this.$search=(new f).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=o.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",(function(e,t){t._$emitInputEvent.schedule(31)})),this.setSession(n||i&&i.session||new d("")),_.resetOptions(this),i&&this.setOptions(i),_._signal("editor",this)}return e.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=o.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},e.prototype.startOperation=function(e){if(this.curOp){if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},e.prototype.endOperation=function(e){if(this.curOp&&this.session){if(e&&!1===e.returnValue||!this.session)return this.curOp=null;if(1==e&&this.curOp.command&&"mouse"==this.curOp.command.name)return;if(this._signal("beforeEndOperation"),!this.curOp)return;var t=this.curOp.command,n=t&&t.scrollIntoView;if(n){switch(n){case"center-animate":n="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var i=this.selection.getRange(),s=this.renderer.layerConfig;(i.start.row>=s.lastRow||i.end.row<=s.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==n&&this.renderer.animateScrolling(this.curOp.scrollTop)}var r=this.selection.toJSON();this.curOp.selectionAfter=r,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(r),this.prevOp=this.curOp,this.curOp=null}},e.prototype.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,n=this.$mergeableCommands,i=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var s=e.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),i=i&&this.mergeNextCommand&&(!/\s/.test(s)||/\s/.test(t.args)),this.mergeNextCommand=!0}else i=i&&-1!==n.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(i=!1),i?this.session.mergeUndoDeltas=!0:-1!==n.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},e.prototype.setKeyboardHandler=function(e,t){if(e&&"string"===typeof e&&"ace"!=e){this.$keybindingId=e;var n=this;_.loadModule(["keybinding",e],(function(i){n.$keybindingId==e&&n.keyBinding.setKeyboardHandler(i&&i.handler),t&&t()}))}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},e.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},e.prototype.setSession=function(e){if(this.session!=e){this.curOp&&this.endOperation(),this.curOp={};var t=this.session;if(t){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var n=this.session.getSelection();n.off("changeCursor",this.$onCursorChange),n.off("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.on("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),this.curOp=null,t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this}),e&&!e.destroyed&&e.bgTokenizer.scheduleStart()}},e.prototype.getSession=function(){return this.session},e.prototype.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},e.prototype.getValue=function(){return this.session.getValue()},e.prototype.getSelection=function(){return this.selection},e.prototype.resize=function(e){this.renderer.onResize(e)},e.prototype.setTheme=function(e,t){this.renderer.setTheme(e,t)},e.prototype.getTheme=function(){return this.renderer.getTheme()},e.prototype.setStyle=function(e){this.renderer.setStyle(e)},e.prototype.unsetStyle=function(e){this.renderer.unsetStyle(e)},e.prototype.getFontSize=function(){return this.getOption("fontSize")||r.computedStyle(this.container).fontSize},e.prototype.setFontSize=function(e){this.setOption("fontSize",e)},e.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout((function(){e.$highlightPending=!1;var t=e.session;if(t&&!t.destroyed){t.$bracketHighlight&&(t.$bracketHighlight.markerIds.forEach((function(e){t.removeMarker(e)})),t.$bracketHighlight=null);var n=e.getCursorPosition(),i=e.getKeyboardHandler(),s=i&&i.$getDirectionForHighlight&&i.$getDirectionForHighlight(e),r=t.getMatchingBracketRanges(n,s);if(!r){var o=new v(t,n.row,n.column).getCurrentToken();if(o&&/\b(?:tag-open|tag-name)/.test(o.type)){var a=t.getMatchingTags(n);a&&(r=[a.openTagName,a.closeTagName])}}if(!r&&t.$mode.getMatching&&(r=t.$mode.getMatching(e.session)),r){var l="ace_bracket";Array.isArray(r)?1==r.length&&(l="ace_error_bracket"):r=[r],2==r.length&&(0==g.comparePoints(r[0].end,r[1].start)?r=[g.fromPoints(r[0].start,r[1].end)]:0==g.comparePoints(r[0].start,r[1].end)&&(r=[g.fromPoints(r[1].start,r[0].end)])),t.$bracketHighlight={ranges:r,markerIds:r.map((function(e){return t.addMarker(e,l,"text")}))},e.getHighlightIndentGuides()&&e.renderer.$textLayer.$highlightIndentGuide()}else e.getHighlightIndentGuides()&&e.renderer.$textLayer.$highlightIndentGuide()}}),50)}},e.prototype.focus=function(){this.textInput.focus()},e.prototype.isFocused=function(){return this.textInput.isFocused()},e.prototype.blur=function(){this.textInput.blur()},e.prototype.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},e.prototype.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},e.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},e.prototype.onDocumentChange=function(e){var t=this.session.$useWrapMode,n=e.start.row==e.end.row?e.end.row:1/0;this.renderer.updateLines(e.start.row,n,t),this._signal("change",e),this.$cursorChange()},e.prototype.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},e.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},e.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},e.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},e.prototype.$updateHighlightActiveLine=function(){var e,t=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(e=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(e=!1),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(e=!1)),t.$highlightLineMarker&&!e)t.removeMarker(t.$highlightLineMarker.id),t.$highlightLineMarker=null;else if(!t.$highlightLineMarker&&e){var n=new g(e.row,e.column,e.row,1/0);n.id=t.addMarker(n,"ace_active-line","screenLine"),t.$highlightLineMarker=n}else e&&(t.$highlightLineMarker.start.row=e.row,t.$highlightLineMarker.end.row=e.row,t.$highlightLineMarker.start.column=e.column,t._signal("changeBackMarker"))},e.prototype.onSelectionChange=function(e){var t=this.session;if(t.$selectionMarker&&t.removeMarker(t.$selectionMarker),t.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var n=this.selection.getRange(),i=this.getSelectionStyle();t.$selectionMarker=t.addMarker(n,"ace_selection",i)}var s=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(s),this._signal("changeSelection")},e.prototype.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var n=t.start.column,i=t.end.column,s=e.getLine(t.start.row),r=s.substring(n,i);if(!(r.length>5e3)&&/[\w\d]/.test(r)){var o=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:r}),a=s.substring(n-1,i+1);if(o.test(a))return o}}},e.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},e.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},e.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},e.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},e.prototype.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},e.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},e.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},e.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},e.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},e.prototype.getCopyText=function(){var e=this.getSelectedText(),t=this.session.doc.getNewLineCharacter(),n=!1;if(!e&&this.$copyWithEmptySelection){n=!0;for(var i=this.selection.getAllRanges(),s=0;s<i.length;s++){var r=i[s];s&&i[s-1].start.row==r.start.row||(e+=this.session.getLine(r.start.row)+t)}}var o={text:e};return this._signal("copy",o),k.lineMode=!!n&&o.text,o.text},e.prototype.onCopy=function(){this.commands.exec("copy",this)},e.prototype.onCut=function(){this.commands.exec("cut",this)},e.prototype.onPaste=function(e,t){var n={text:e,event:t};this.commands.exec("paste",this,n)},e.prototype.$handlePaste=function(e){"string"==typeof e&&(e={text:e}),this._signal("paste",e);var t=e.text,n=t===k.lineMode,i=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)n?i.insert({row:this.selection.lead.row,column:0},t):this.insert(t);else if(n)this.selection.rangeList.ranges.forEach((function(e){i.insert({row:e.start.row,column:0},t)}));else{var s=t.split(/\r\n|\r|\n/),r=this.selection.rangeList.ranges,o=2==s.length&&(!s[0]||!s[1]);if(s.length!=r.length||o)return this.commands.exec("insertstring",this,t);for(var a=r.length;a--;){var l=r[a];l.isEmpty()||i.remove(l),i.insert(l.start,s[a])}}},e.prototype.execCommand=function(e,t){return this.commands.exec(e,this,t)},e.prototype.insert=function(e,t){var n=this.session,i=n.getMode(),s=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var r=i.transformAction(n.getState(s.row),"insertion",this,n,e);r&&(e!==r.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),e=r.text)}if("\t"==e&&(e=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&-1==e.indexOf("\n")){(o=g.fromPoints(s,s)).end.column+=e.length,this.session.remove(o)}}else{var o=this.getSelectionRange();s=this.session.remove(o),this.clearSelection()}if("\n"==e||"\r\n"==e){var a=n.getLine(s.row);if(s.column>a.search(/\S|$/)){var l=a.substr(s.column).search(/\S|$/);n.doc.removeInLine(s.row,s.column,s.column+l)}}this.clearSelection();var c=s.column,u=n.getState(s.row),h=(a=n.getLine(s.row),i.checkOutdent(u,a,e));if(n.insert(s,e),r&&r.selection&&(2==r.selection.length?this.selection.setSelectionRange(new g(s.row,c+r.selection[0],s.row,c+r.selection[1])):this.selection.setSelectionRange(new g(s.row+r.selection[0],r.selection[1],s.row+r.selection[2],r.selection[3]))),this.$enableAutoIndent){if(n.getDocument().isNewLine(e)){var d=i.getNextLineIndent(u,a.slice(0,s.column),n.getTabString());n.insert({row:s.row+1,column:0},d)}h&&i.autoOutdent(u,n,s.row)}},e.prototype.autoIndent=function(){for(var e=this.session,t=e.getMode(),n=this.selection.isEmpty()?[new g(0,0,e.doc.getLength()-1,0)]:this.selection.getAllRanges(),i="",s="",r="",o=e.getTabString(),a=0;a<n.length;a++)for(var l=n[a].start.row,c=n[a].end.row,u=l;u<=c;u++){u>0&&(i=e.getState(u-1),s=e.getLine(u-1),r=t.getNextLineIndent(i,s,o));var h=e.getLine(u),d=t.$getIndent(h);if(r!==d){if(d.length>0){var f=new g(u,0,u,d.length);e.remove(f)}r.length>0&&e.insert({row:u,column:0},r)}t.autoOutdent(i,e,u)}},e.prototype.onTextInput=function(e,t){if(!t)return this.keyBinding.onTextInput(e);this.startOperation({command:{name:"insertstring"}});var n=this.applyComposition.bind(this,e,t);this.selection.rangeCount?this.forEachSelection(n):n(),this.endOperation()},e.prototype.applyComposition=function(e,t){var n;(t.extendLeft||t.extendRight)&&((n=this.selection.getRange()).start.column-=t.extendLeft,n.end.column+=t.extendRight,n.start.column<0&&(n.start.row--,n.start.column+=this.session.getLine(n.start.row).length+1),this.selection.setRange(n),e||n.isEmpty()||this.remove());(!e&&this.selection.isEmpty()||this.insert(e,!0),t.restoreStart||t.restoreEnd)&&((n=this.selection.getRange()).start.column-=t.restoreStart,n.end.column-=t.restoreEnd,this.selection.setRange(n))},e.prototype.onCommandKey=function(e,t,n){return this.keyBinding.onCommandKey(e,t,n)},e.prototype.setOverwrite=function(e){this.session.setOverwrite(e)},e.prototype.getOverwrite=function(){return this.session.getOverwrite()},e.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},e.prototype.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},e.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},e.prototype.setDragDelay=function(e){this.setOption("dragDelay",e)},e.prototype.getDragDelay=function(){return this.getOption("dragDelay")},e.prototype.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},e.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},e.prototype.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},e.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},e.prototype.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},e.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},e.prototype.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},e.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},e.prototype.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},e.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},e.prototype.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},e.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},e.prototype.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},e.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},e.prototype.setHighlightIndentGuides=function(e){this.renderer.setHighlightIndentGuides(e)},e.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},e.prototype.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},e.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},e.prototype.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},e.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},e.prototype.setReadOnly=function(e){this.setOption("readOnly",e)},e.prototype.getReadOnly=function(){return this.getOption("readOnly")},e.prototype.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},e.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},e.prototype.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},e.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},e.prototype.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},e.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},e.prototype.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},e.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},e.prototype.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var n=this.session,i=n.getState(t.start.row),s=n.getMode().transformAction(i,"deletion",this,n,t);if(0===t.end.column){var r=n.getTextRange(t);if("\n"==r[r.length-1]){var o=n.getLine(t.end.row);/^\s+$/.test(o)&&(t.end.column=o.length)}}s&&(t=s)}this.session.remove(t),this.clearSelection()},e.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},e.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},e.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},e.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},e.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},e.prototype.setGhostText=function(e,t){this.session.widgetManager||(this.session.widgetManager=new y(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(e,t)},e.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},e.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var n,i,s=this.session.getLine(e.row);t<s.length?(n=s.charAt(t)+s.charAt(t-1),i=new g(e.row,t-1,e.row,t+1)):(n=s.charAt(t-1)+s.charAt(t-2),i=new g(e.row,t-2,e.row,t)),this.session.replace(i,n),this.session.selection.moveToPosition(i.end)}}},e.prototype.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toLowerCase()),this.selection.setSelectionRange(e)},e.prototype.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),n=this.session.getTextRange(t);this.session.replace(t,n.toUpperCase()),this.selection.setSelectionRange(e)},e.prototype.indent=function(){var e=this.session,t=this.getSelectionRange();if(!(t.start.row<t.end.row)){if(t.start.column<t.end.column){var n=e.getTextRange(t);if(!/^\s+$/.test(n)){u=this.$getSelectedRows();return void e.indentRows(u.first,u.last,"\t")}}var i=e.getLine(t.start.row),s=t.start,r=e.getTabSize(),a=e.documentToScreenColumn(s.row,s.column);if(this.session.getUseSoftTabs())var l=r-a%r,c=o.stringRepeat(" ",l);else{for(l=a%r;" "==i[t.start.column-1]&&l;)t.start.column--,l--;this.selection.setSelectionRange(t),c="\t"}return this.insert(c)}var u=this.$getSelectedRows();e.indentRows(u.first,u.last,"\t")},e.prototype.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"\t")},e.prototype.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},e.prototype.sortLines=function(){for(var e=this.$getSelectedRows(),t=this.session,n=[],i=e.first;i<=e.last;i++)n.push(t.getLine(i));n.sort((function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}));var s=new g(0,0,0,0);for(i=e.first;i<=e.last;i++){var r=t.getLine(i);s.start.row=i,s.end.row=i,s.end.column=r.length,t.replace(s,n[i-e.first])}},e.prototype.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},e.prototype.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),n=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,n,e)},e.prototype.getNumberAt=function(e,t){var n=/[\-]?[0-9]+(?:\.[0-9]+)?/g;n.lastIndex=0;for(var i=this.session.getLine(e);n.lastIndex<t;){var s=n.exec(i);if(s.index<=t&&s.index+s[0].length>=t)return{value:s[0],start:s.index,end:s.index+s[0].length}}return null},e.prototype.modifyNumber=function(e){var t=this.selection.getCursor().row,n=this.selection.getCursor().column,i=new g(t,n-1,t,n),s=this.session.getTextRange(i);if(!isNaN(parseFloat(s))&&isFinite(s)){var r=this.getNumberAt(t,n);if(r){var o=r.value.indexOf(".")>=0?r.start+r.value.indexOf(".")+1:r.end,a=r.start+r.value.length-o,l=parseFloat(r.value);l*=Math.pow(10,a),o!==r.end&&n<o?e*=Math.pow(10,r.end-n-1):e*=Math.pow(10,r.end-n),l+=e;var c=(l/=Math.pow(10,a)).toFixed(a),u=new g(t,r.start,t,r.end);this.session.replace(u,c),this.moveCursorTo(t,Math.max(r.start+1,n+c.length-r.value.length))}}else this.toggleWord()},e.prototype.toggleWord=function(){var e=this.selection.getCursor().row,t=this.selection.getCursor().column;this.selection.selectWord();var n=this.getSelectedText(),i=this.selection.getWordRange().start.column,s=n.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),r=t-i-1;r<0&&(r=0);var a=0,l=0,c=this;n.match(/[A-Za-z0-9_]+/)&&s.forEach((function(t,s){l=a+t.length,r>=a&&r<=l&&(n=t,c.selection.clearSelection(),c.moveCursorTo(e,a+i),c.selection.selectTo(e,l+i)),a=l}));for(var u,h=this.$toggleWordPairs,d=0;d<h.length;d++)for(var f=h[d],g=0;g<=1;g++){var p=+!g,m=n.match(new RegExp("^\\s?_?("+o.escapeRegExp(f[g])+")\\s?$","i"));if(m)n.match(new RegExp("([_]|^|\\s)("+o.escapeRegExp(m[1])+")($|\\s)","g"))&&(u=n.replace(new RegExp(o.escapeRegExp(f[g]),"i"),(function(e){var t=f[p];return e.toUpperCase()==e?t=t.toUpperCase():e.charAt(0).toUpperCase()==e.charAt(0)&&(t=t.substr(0,0)+f[p].charAt(0).toUpperCase()+t.substr(1)),t})),this.insert(u),u="")}},e.prototype.findLinkAt=function(e,t){var n,s,r=this.session.getLine(e).split(/((?:https?|ftp):\/\/[\S]+)/),o=t;o<0&&(o=0);var a,l=0,c=0;try{for(var u=i(r),h=u.next();!h.done;h=u.next()){var d=h.value;if(c=l+d.length,o>=l&&o<=c&&d.match(/((?:https?|ftp):\/\/[\S]+)/)){a=d.replace(/[\s:.,'";}\]]+$/,"");break}l=c}}catch(f){n={error:f}}finally{try{h&&!h.done&&(s=u.return)&&s.call(u)}finally{if(n)throw n.error}}return a},e.prototype.openLink=function(){var e=this.selection.getCursor(),t=this.findLinkAt(e.row,e.column);return t&&window.open(t,"_blank"),null!=t},e.prototype.removeLines=function(){var e=this.$getSelectedRows();this.session.removeFullLines(e.first,e.last),this.clearSelection()},e.prototype.duplicateSelection=function(){var e=this.selection,t=this.session,n=e.getRange(),i=e.isBackwards();if(n.isEmpty()){var s=n.start.row;t.duplicateLines(s,s)}else{var r=i?n.start:n.end,o=t.insert(r,t.getTextRange(n));n.start=r,n.end=o,e.setSelectionRange(n,i)}},e.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},e.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},e.prototype.moveText=function(e,t,n){return this.session.moveText(e,t,n)},e.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},e.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},e.prototype.$moveLines=function(e,t){var n,i,s=this.selection;if(!s.inMultiSelectMode||this.inVirtualSelectionMode){var r=s.toOrientedRange();n=this.$getSelectedRows(r),i=this.session.$moveLines(n.first,n.last,t?0:e),t&&-1==e&&(i=0),r.moveBy(i,0),s.fromOrientedRange(r)}else{var o=s.rangeList.ranges;s.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var a=0,l=0,c=o.length,u=0;u<c;u++){var h=u;o[u].moveBy(a,0);for(var d=(n=this.$getSelectedRows(o[u])).first,f=n.last;++u<c;){l&&o[u].moveBy(l,0);var g=this.$getSelectedRows(o[u]);if(t&&g.first!=f)break;if(!t&&g.first>f+1)break;f=g.last}for(u--,a=this.session.$moveLines(d,f,t?0:e),t&&-1==e&&(h=u+1);h<=u;)o[h].moveBy(a,0),h++;t||(a=0),l+=a}s.fromOrientedRange(s.ranges[0]),s.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},e.prototype.$getSelectedRows=function(e){return e=(e||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},e.prototype.onCompositionStart=function(e){this.renderer.showComposition(e)},e.prototype.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},e.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},e.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},e.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},e.prototype.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},e.prototype.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},e.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},e.prototype.$moveByPage=function(e,t){var n=this.renderer,i=this.renderer.layerConfig,s=e*Math.floor(i.height/i.lineHeight);!0===t?this.selection.$moveSelection((function(){this.moveCursorBy(s,0)})):!1===t&&(this.selection.moveCursorBy(s,0),this.selection.clearSelection());var r=n.scrollTop;n.scrollBy(0,s*i.lineHeight),null!=t&&n.scrollCursorIntoView(null,.5),n.animateScrolling(r)},e.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},e.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},e.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},e.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},e.prototype.scrollPageDown=function(){this.$moveByPage(1)},e.prototype.scrollPageUp=function(){this.$moveByPage(-1)},e.prototype.scrollToRow=function(e){this.renderer.scrollToRow(e)},e.prototype.scrollToLine=function(e,t,n,i){this.renderer.scrollToLine(e,t,n,i)},e.prototype.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},e.prototype.getCursorPosition=function(){return this.selection.getCursor()},e.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},e.prototype.getSelectionRange=function(){return this.selection.getRange()},e.prototype.selectAll=function(){this.selection.selectAll()},e.prototype.clearSelection=function(){this.selection.clearSelection()},e.prototype.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},e.prototype.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},e.prototype.jumpToMatching=function(e,t){var n=this.getCursorPosition(),i=new v(this.session,n.row,n.column),s=i.getCurrentToken(),r=0;s&&-1!==s.type.indexOf("tag-name")&&(s=i.stepBackward());var o=s||i.stepForward();if(o){var a,l,c=!1,u={},h=n.column-o.start,d={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(o.value.match(/[{}()\[\]]/g)){for(;h<o.value.length&&!c;h++)if(d[o.value[h]])switch(l=d[o.value[h]]+"."+o.type.replace("rparen","lparen"),isNaN(u[l])&&(u[l]=0),o.value[h]){case"(":case"[":case"{":u[l]++;break;case")":case"]":case"}":u[l]--,-1===u[l]&&(a="bracket",c=!0)}}else-1!==o.type.indexOf("tag-name")&&(isNaN(u[o.value])&&(u[o.value]=0),"<"===s.value&&r>1?u[o.value]++:"</"===s.value&&u[o.value]--,-1===u[o.value]&&(a="tag",c=!0));c||(s=o,r++,o=i.stepForward(),h=0)}while(o&&!c);if(a){var f,p;if("bracket"===a)(f=this.session.getBracketRange(n))||(p=(f=new g(i.getCurrentTokenRow(),i.getCurrentTokenColumn()+h-1,i.getCurrentTokenRow(),i.getCurrentTokenColumn()+h-1)).start,(t||p.row===n.row&&Math.abs(p.column-n.column)<2)&&(f=this.session.getBracketRange(p)));else if("tag"===a){if(!o||-1===o.type.indexOf("tag-name"))return;if(0===(f=new g(i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2,i.getCurrentTokenRow(),i.getCurrentTokenColumn()-2)).compare(n.row,n.column)){var m=this.session.getMatchingTags(n);m&&(m.openTag.contains(n.row,n.column)?p=(f=m.closeTag).start:(f=m.openTag,p=m.closeTag.start.row===n.row&&m.closeTag.start.column===n.column?f.end:f.start))}p=p||f.start}(p=f&&f.cursor||p)&&(e?f&&t?this.selection.setRange(f):f&&f.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(p.row,p.column):this.selection.moveTo(p.row,p.column))}}},e.prototype.gotoLine=function(e,t,n){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,n)},e.prototype.navigateTo=function(e,t){this.selection.moveTo(e,t)},e.prototype.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},e.prototype.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},e.prototype.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},e.prototype.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},e.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},e.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},e.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},e.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},e.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},e.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},e.prototype.replace=function(e,t){t&&this.$search.set(t);var n=this.$search.find(this.session),i=0;return n?(this.$tryReplace(n,e)&&(i=1),this.selection.setSelectionRange(n),this.renderer.scrollSelectionIntoView(n.start,n.end),i):i},e.prototype.replaceAll=function(e,t){t&&this.$search.set(t);var n=this.$search.findAll(this.session),i=0;if(!n.length)return i;var s=this.getSelectionRange();this.selection.moveTo(0,0);for(var r=n.length-1;r>=0;--r)this.$tryReplace(n[r],e)&&i++;return this.selection.setSelectionRange(s),i},e.prototype.$tryReplace=function(e,t){var n=this.session.getTextRange(e);return null!==(t=this.$search.replace(n,t))?(e.end=this.session.replace(e,t),e):null},e.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},e.prototype.find=function(e,t,n){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&s.mixin(t,e);var i=this.selection.getRange();null==t.needle&&((e=this.session.getTextRange(i)||this.$search.$options.needle)||(i=this.session.getWordRange(i.start.row,i.start.column),e=this.session.getTextRange(i)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:i});var r=this.$search.find(this.session);return t.preventScroll?r:r?(this.revealRange(r,n),r):(t.backwards?i.start=i.end:i.end=i.start,void this.selection.setRange(i))},e.prototype.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},e.prototype.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},e.prototype.revealRange=function(e,t){this.session.unfold(e),this.selection.setSelectionRange(e);var n=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),!1!==t&&this.renderer.animateScrolling(n)},e.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},e.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},e.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach((function(e){e.destroy()})),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},e.prototype.setAutoScrollEditorIntoView=function(e){if(e){var t,n=this,i=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var s=this.$scrollAnchor;s.style.cssText="position:absolute",this.container.insertBefore(s,this.container.firstChild);var r=this.on("changeSelection",(function(){i=!0})),o=this.renderer.on("beforeRender",(function(){i&&(t=n.renderer.container.getBoundingClientRect())})),a=this.renderer.on("afterRender",(function(){if(i&&t&&(n.isFocused()||n.searchBox&&n.searchBox.isFocused())){var e=n.renderer,r=e.$cursorLayer.$pixelPos,o=e.layerConfig,a=r.top-o.offset;null!=(i=r.top>=0&&a+t.top<0||!(r.top<o.height&&r.top+t.top+o.lineHeight>window.innerHeight)&&null)&&(s.style.top=a+"px",s.style.left=r.left+"px",s.style.height=o.lineHeight+"px",s.scrollIntoView(i)),i=t=null}}));this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",r),this.renderer.off("afterRender",a),this.renderer.off("beforeRender",o))}}},e.prototype.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,r.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))},e.prototype.prompt=function(e,t,n){var i=this;_.loadModule("ace/ext/prompt",(function(s){s.prompt(i,e,t,n)}))},e}();x.$uid=0,x.prototype.curOp=null,x.prototype.prevOp={},x.prototype.$mergeableCommands=["backspace","del","insertstring"],x.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],s.implement(x.prototype,p),_.defineOptions(x.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(e){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(e){this.textInput.setReadOnly(e),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(e){this.textInput.setCopyWithEmptySelection(e)},initialValue:!1},cursorStyle:{set:function(e){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},keyboardHandler:{set:function(e){this.setKeyboardHandler(e)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(e){this.session.setValue(e)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(e){this.setSession(e)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(e){this.renderer.$gutterLayer.setShowLineNumbers(e),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),e&&this.$relativeLineNumbers?E.attach(this):E.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(e){this.$showLineNumbers&&e?E.attach(this):E.detach(this)}},placeholder:{set:function(e){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var e=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(e&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),r.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(e||this.renderer.placeholderNode)!e&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"");else{this.renderer.on("afterRender",this.$updatePlaceholder),r.addCssClass(this.container,"ace_hasPlaceholder");var t=r.createElement("div");t.className="ace_placeholder",t.textContent=this.$placeholder||"",this.renderer.placeholderNode=t,this.renderer.content.appendChild(this.renderer.placeholderNode)}}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(e){var t,n={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(e){e.blur(),e.renderer.scroller.focus()},readOnly:!0},i=function(e){if(e.target==this.renderer.scroller&&e.keyCode===C.enter){e.preventDefault();var t=this.getCursorPosition().row;this.isRowVisible(t)||this.scrollToLine(t,!0,!0),this.focus()}};e?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(a.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",w("editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",w("Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",i.bind(this)),this.commands.addCommand(n),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",w("editor")),this.renderer.$gutter.setAttribute("aria-label",w("Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),t||(t=new S(this)),t.addListener()):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",i.bind(this)),this.commands.removeCommand(n),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),t&&t.removeListener())},initialValue:!1},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var E={getText:function(e,t){return(Math.abs(e.selection.lead.row-t)||t+1+(t<9?"\xb7":""))+""},getWidth:function(e,t,n){return Math.max(t.toString().length,(n.lastRow+1).toString().length,2)*n.characterWidth},update:function(e,t){t.renderer.$loop.schedule(t.renderer.CHANGE_GUTTER)},attach:function(e){e.renderer.$gutterLayer.$renderer=this,e.on("changeSelection",this.update),this.update(null,e)},detach:function(e){e.renderer.$gutterLayer.$renderer==this&&(e.renderer.$gutterLayer.$renderer=null),e.off("changeSelection",this.update),this.update(null,e)}};t.Editor=x})),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("../lib/dom"),s=function(){function e(e,t){this.element=e,this.canvasHeight=t||5e5,this.element.style.height=2*this.canvasHeight+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return e.prototype.moveContainer=function(e){i.translate(this.element,0,-e.firstRowScreen*e.lineHeight%this.canvasHeight-e.offset*this.$offsetCoefficient)},e.prototype.pageChanged=function(e,t){return Math.floor(e.firstRowScreen*e.lineHeight/this.canvasHeight)!==Math.floor(t.firstRowScreen*t.lineHeight/this.canvasHeight)},e.prototype.computeLineTop=function(e,t,n){var i=t.firstRowScreen*t.lineHeight,s=Math.floor(i/this.canvasHeight);return n.documentToScreenRow(e,0)*t.lineHeight-s*this.canvasHeight},e.prototype.computeLineHeight=function(e,t,n){return t.lineHeight*n.getRowLineCount(e)},e.prototype.getLength=function(){return this.cells.length},e.prototype.get=function(e){return this.cells[e]},e.prototype.shift=function(){this.$cacheCell(this.cells.shift())},e.prototype.pop=function(){this.$cacheCell(this.cells.pop())},e.prototype.push=function(e){if(Array.isArray(e)){this.cells.push.apply(this.cells,e);for(var t=i.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.appendChild(t)}else this.cells.push(e),this.element.appendChild(e.element)},e.prototype.unshift=function(e){if(Array.isArray(e)){this.cells.unshift.apply(this.cells,e);for(var t=i.createFragment(this.element),n=0;n<e.length;n++)t.appendChild(e[n].element);this.element.firstChild?this.element.insertBefore(t,this.element.firstChild):this.element.appendChild(t)}else this.cells.unshift(e),this.element.insertAdjacentElement("afterbegin",e.element)},e.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},e.prototype.$cacheCell=function(e){e&&(e.element.remove(),this.cellCache.push(e))},e.prototype.createCell=function(e,t,n,s){var r=this.cellCache.pop();if(!r){var o=i.createElement("div");s&&s(o),this.element.appendChild(o),r={element:o,text:"",row:e}}return r.row=e,r},e}();t.Lines=s})),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],(function(e,t,n){"use strict";var i=e("../lib/dom"),s=e("../lib/oop"),r=e("../lib/lang"),o=e("../lib/event_emitter").EventEmitter,a=e("./lines").Lines,l=e("../config").nls,c=function(){function e(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new a(this.element),this.$lines.$offsetCoefficient=1}return e.prototype.setSession=function(e){this.session&&this.session.off("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},e.prototype.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},e.prototype.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},e.prototype.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var n=e[t],i=n.row,s=this.$annotations[i];s||(s=this.$annotations[i]={text:[],type:[]});var o=n.text,a=n.type;o=o?r.escapeHTML(o):n.html||"",-1===s.text.indexOf(o)&&(s.text.push(o),s.type.push(a));var l=n.className;l?s.className=l:"error"==a?s.className=" ace_error":"warning"==a&&" ace_error"!=s.className?s.className=" ace_warning":"info"!=a||s.className||(s.className=" ace_info")}},e.prototype.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.start.row,n=e.end.row-t;if(0===n);else if("remove"==e.action)this.$annotations.splice(t,n+1,null);else{var i=new Array(n+1);i.unshift(t,1),this.$annotations.splice.apply(this.$annotations,i)}}},e.prototype.update=function(e){this.config=e;var t=this.session,n=e.firstRow,i=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1);this.oldLastRow=i,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();for(var s=t.getNextFoldLine(n),r=s?s.start.row:1/0,o=null,a=-1,l=n;;){if(l>r&&(l=s.end.row+1,r=(s=t.getNextFoldLine(l,s))?s.start.row:1/0),l>i){for(;this.$lines.getLength()>a+1;)this.$lines.pop();break}(o=this.$lines.get(++a))?o.row=l:(o=this.$lines.createCell(l,e,this.session,u),this.$lines.push(o)),this.$renderCell(o,e,s,l),l++}this._signal("afterRender"),this.$updateGutterWidth(e)},e.prototype.$updateGutterWidth=function(e){var t=this.session,n=t.gutterRenderer||this.$renderer,i=t.$firstLineNumber,s=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||t.$useWrapMode)&&(s=t.getLength()+i-1);var r=n?n.getWidth(t,s,e):s.toString().length*e.characterWidth,o=this.$padding||this.$computePadding();(r+=o.left+o.right)===this.gutterWidth||isNaN(r)||(this.gutterWidth=r,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",r))},e.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var e=this.session.selection.getCursor();this.$cursorRow!==e.row&&(this.$cursorRow=e.row)}},e.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var e=this.session.selection.cursor.row;if(this.$cursorRow=e,!this.$cursorCell||this.$cursorCell.row!=e){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var t=this.$lines.cells;this.$cursorCell=null;for(var n=0;n<t.length;n++){var i=t[n];if(i.row>=this.$cursorRow){if(i.row>this.$cursorRow){var s=this.session.getFoldLine(this.$cursorRow);if(!(n>0&&s&&s.start.row==t[n-1].row))break;i=t[n-1]}i.element.className="ace_gutter-active-line "+i.element.className,this.$cursorCell=i;break}}}}},e.prototype.scrollLines=function(e){var t=this.config;if(this.config=e,this.$updateCursorRow(),this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),i=this.oldLastRow;if(this.oldLastRow=n,!t||i<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var s=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);s>0;s--)this.$lines.shift();if(i>n)for(s=this.session.getFoldedRowCount(n+1,i);s>0;s--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,t.firstRow-1)),n>i&&this.$lines.push(this.$renderLines(e,i+1,n)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)},e.prototype.$renderLines=function(e,t,n){for(var i=[],s=t,r=this.session.getNextFoldLine(s),o=r?r.start.row:1/0;s>o&&(s=r.end.row+1,o=(r=this.session.getNextFoldLine(s,r))?r.start.row:1/0),!(s>n);){var a=this.$lines.createCell(s,e,this.session,u);this.$renderCell(a,e,r,s),i.push(a),s++}return i},e.prototype.$renderCell=function(e,t,n,s){var r=e.element,o=this.session,a=r.childNodes[0],c=r.childNodes[1],u=r.childNodes[2],h=u.firstChild,d=o.$firstLineNumber,f=o.$breakpoints,g=o.$decorations,p=o.gutterRenderer||this.$renderer,m=this.$showFoldWidgets&&o.foldWidgets,b=n?n.start.row:Number.MAX_VALUE,_=t.lineHeight+"px",v=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",y=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",S=(p?p.getText(o,s):s+d).toString();if(this.$highlightGutterLine&&(s==this.$cursorRow||n&&s<this.$cursorRow&&s>=b&&this.$cursorRow<=n.end.row)&&(v+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),f[s]&&(v+=f[s]),g[s]&&(v+=g[s]),this.$annotations[s]&&s!==b&&(v+=this.$annotations[s].className),m){var w=m[s];null==w&&(w=m[s]=o.getFoldWidget(s))}if(w){var k="ace_fold-widget ace_"+w,C="start"==w&&s==b&&s<n.end.row;if(C){k+=" ace_closed";for(var x="",E=!1,L=s+1;L<=n.end.row;L++)if(this.$annotations[L]){if(" ace_error"===this.$annotations[L].className){E=!0,x=" ace_error_fold";break}" ace_warning"!==this.$annotations[L].className||(E=!0,x=" ace_warning_fold")}v+=x}else k+=" ace_open";c.className!=k&&(c.className=k),i.setStyle(c.style,"height",_),i.setStyle(c.style,"display","inline-block"),c.setAttribute("role","button"),c.setAttribute("tabindex","-1");var D=o.getFoldWidgetRange(s);D?c.setAttribute("aria-label",l("Toggle code folding, rows $0 through $1",[D.start.row+1,D.end.row+1])):n?c.setAttribute("aria-label",l("Toggle code folding, rows $0 through $1",[n.start.row+1,n.end.row+1])):c.setAttribute("aria-label",l("Toggle code folding, row $0",[s+1])),C?(c.setAttribute("aria-expanded","false"),c.setAttribute("title",l("Unfold code"))):(c.setAttribute("aria-expanded","true"),c.setAttribute("title",l("Fold code")))}else c&&(i.setStyle(c.style,"display","none"),c.setAttribute("tabindex","0"),c.removeAttribute("role"),c.removeAttribute("aria-label"));return E&&this.$showFoldedAnnotations?(u.className="ace_gutter_annotation",h.className=y,h.className+=x,i.setStyle(h.style,"height",_),i.setStyle(u.style,"display","block"),i.setStyle(u.style,"height",_),u.setAttribute("aria-label",l("Read annotations row $0",[S])),u.setAttribute("tabindex","-1"),u.setAttribute("role","button")):this.$annotations[s]?(u.className="ace_gutter_annotation",h.className=y,this.$useSvgGutterIcons?h.className+=this.$annotations[s].className:r.classList.add(this.$annotations[s].className.replace(" ","")),i.setStyle(h.style,"height",_),i.setStyle(u.style,"display","block"),i.setStyle(u.style,"height",_),u.setAttribute("aria-label",l("Read annotations row $0",[S])),u.setAttribute("tabindex","-1"),u.setAttribute("role","button")):(i.setStyle(u.style,"display","none"),u.removeAttribute("aria-label"),u.removeAttribute("role"),u.setAttribute("tabindex","0")),S!==a.data&&(a.data=S),r.className!=v&&(r.className=v),i.setStyle(e.element.style,"height",this.$lines.computeLineHeight(s,t,o)+"px"),i.setStyle(e.element.style,"top",this.$lines.computeLineTop(s,t,o)+"px"),e.text=S,"none"===u.style.display&&"none"===c.style.display?e.element.setAttribute("aria-hidden",!0):e.element.setAttribute("aria-hidden",!1),e},e.prototype.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},e.prototype.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}},e.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},e.prototype.setShowFoldWidgets=function(e){e?i.addCssClass(this.element,"ace_folding-enabled"):i.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},e.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},e.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=i.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},e.prototype.getRegion=function(e){var t=this.$padding||this.$computePadding(),n=this.element.getBoundingClientRect();return e.x<t.left+n.left?"markers":this.$showFoldWidgets&&e.x>n.right-t.right?"foldWidgets":void 0},e}();function u(e){var t=document.createTextNode("");e.appendChild(t);var n=i.createElement("span");e.appendChild(n);var s=i.createElement("span");e.appendChild(s);var r=i.createElement("span");return s.appendChild(r),e}c.prototype.$fixedWidth=!1,c.prototype.$highlightGutterLine=!0,c.prototype.$renderer="",c.prototype.$showLineNumbers=!0,c.prototype.$showFoldWidgets=!0,s.implement(c.prototype,o),t.Gutter=c})),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("../range").Range,s=e("../lib/dom"),r=function(){function e(e){this.element=s.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)}return e.prototype.setPadding=function(e){this.$padding=e},e.prototype.setSession=function(e){this.session=e},e.prototype.setMarkers=function(e){this.markers=e},e.prototype.elt=function(e,t){var n=-1!=this.i&&this.element.childNodes[this.i];n?this.i++:(n=document.createElement("div"),this.element.appendChild(n),this.i=-1),n.style.cssText=t,n.className=e},e.prototype.update=function(e){if(e){var t;for(var n in this.config=e,this.i=0,this.markers){var i=this.markers[n];if(i.range){var s=i.range.clipRows(e.firstRow,e.lastRow);if(!s.isEmpty())if(s=s.toScreenRange(this.session),i.renderer){var r=this.$getTop(s.start.row,e),o=this.$padding+s.start.column*e.characterWidth;i.renderer(t,s,o,r,e)}else"fullLine"==i.type?this.drawFullLineMarker(t,s,i.clazz,e):"screenLine"==i.type?this.drawScreenLineMarker(t,s,i.clazz,e):s.isMultiLine()?"text"==i.type?this.drawTextMarker(t,s,i.clazz,e):this.drawMultiLineMarker(t,s,i.clazz,e):this.drawSingleLineMarker(t,s,i.clazz+" ace_start ace_br15",e)}else i.update(t,this,this.session,e)}if(-1!=this.i)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},e.prototype.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},e.prototype.drawTextMarker=function(e,t,n,s,r){for(var o=this.session,a=t.start.row,l=t.end.row,c=a,u=0,h=0,d=o.getScreenLastRowColumn(c),f=new i(c,t.start.column,c,h);c<=l;c++)f.start.row=f.end.row=c,f.start.column=c==a?t.start.column:o.getRowWrapIndent(c),f.end.column=d,u=h,h=d,d=c+1<l?o.getScreenLastRowColumn(c+1):c==l?0:t.end.column,this.drawSingleLineMarker(e,f,n+(c==a?" ace_start":"")+" ace_br"+((c==a||c==a+1&&t.start.column?1:0)|(u<h?2:0)|(h>d?4:0)|(c==l?8:0)),s,c==l?0:1,r)},e.prototype.drawMultiLineMarker=function(e,t,n,i,s){var r=this.$padding,o=i.lineHeight,a=this.$getTop(t.start.row,i),l=r+t.start.column*i.characterWidth;(s=s||"",this.session.$bidiHandler.isBidiRow(t.start.row))?((c=t.clone()).end.row=c.start.row,c.end.column=this.session.getLine(c.start.row).length,this.drawBidiSingleLineMarker(e,c,n+" ace_br1 ace_start",i,null,s)):this.elt(n+" ace_br1 ace_start","height:"+o+"px;right:0;top:"+a+"px;left:"+l+"px;"+(s||""));if(this.session.$bidiHandler.isBidiRow(t.end.row)){var c;(c=t.clone()).start.row=c.end.row,c.start.column=0,this.drawBidiSingleLineMarker(e,c,n+" ace_br12",i,null,s)}else{a=this.$getTop(t.end.row,i);var u=t.end.column*i.characterWidth;this.elt(n+" ace_br12","height:"+o+"px;width:"+u+"px;top:"+a+"px;left:"+r+"px;"+(s||""))}if(!((o=(t.end.row-t.start.row-1)*i.lineHeight)<=0)){a=this.$getTop(t.start.row+1,i);var h=(t.start.column?1:0)|(t.end.column?0:8);this.elt(n+(h?" ace_br"+h:""),"height:"+o+"px;right:0;top:"+a+"px;left:"+r+"px;"+(s||""))}},e.prototype.drawSingleLineMarker=function(e,t,n,i,s,r){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(e,t,n,i,s,r);var o=i.lineHeight,a=(t.end.column+(s||0)-t.start.column)*i.characterWidth,l=this.$getTop(t.start.row,i),c=this.$padding+t.start.column*i.characterWidth;this.elt(n,"height:"+o+"px;width:"+a+"px;top:"+l+"px;left:"+c+"px;"+(r||""))},e.prototype.drawBidiSingleLineMarker=function(e,t,n,i,s,r){var o=i.lineHeight,a=this.$getTop(t.start.row,i),l=this.$padding;this.session.$bidiHandler.getSelections(t.start.column,t.end.column).forEach((function(e){this.elt(n,"height:"+o+"px;width:"+(e.width+(s||0))+"px;top:"+a+"px;left:"+(l+e.left)+"px;"+(r||""))}),this)},e.prototype.drawFullLineMarker=function(e,t,n,i,s){var r=this.$getTop(t.start.row,i),o=i.lineHeight;t.start.row!=t.end.row&&(o+=this.$getTop(t.end.row,i)-r),this.elt(n,"height:"+o+"px;top:"+r+"px;left:0;right:0;"+(s||""))},e.prototype.drawScreenLineMarker=function(e,t,n,i,s){var r=this.$getTop(t.start.row,i),o=i.lineHeight;this.elt(n,"height:"+o+"px;top:"+r+"px;left:0;right:0;"+(s||""))},e}();r.prototype.$padding=0,t.Marker=r})),ace.define("ace/layer/text_util",["require","exports","module"],(function(e,t,n){var i=new Set(["text","rparen","lparen"]);t.isTextToken=function(e){return i.has(e)}})),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],(function(e,t,n){"use strict";var i=e("../lib/oop"),s=e("../lib/dom"),r=e("../lib/lang"),o=e("./lines").Lines,a=e("../lib/event_emitter").EventEmitter,l=e("../config").nls,c=e("./text_util").isTextToken,u=function(){function e(e){this.dom=s,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new o(this.element)}return e.prototype.$updateEolChar=function(){var e=this.session.doc,t="\n"==e.getNewLineCharacter()&&"windows"!=e.getNewLineMode()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=t)return this.EOL_CHAR=t,!0},e.prototype.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},e.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},e.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},e.prototype.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},e.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},e.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},e.prototype.setSession=function(e){this.session=e,e&&this.$computeTabString()},e.prototype.setShowInvisibles=function(e){return this.showInvisibles!=e&&(this.showInvisibles=e,"string"==typeof e?(this.showSpaces=/tab/i.test(e),this.showTabs=/space/i.test(e),this.showEOL=/eol/i.test(e)):this.showSpaces=this.showTabs=this.showEOL=e,this.$computeTabString(),!0)},e.prototype.setDisplayIndentGuides=function(e){return this.displayIndentGuides!=e&&(this.displayIndentGuides=e,this.$computeTabString(),!0)},e.prototype.setHighlightIndentGuides=function(e){return this.$highlightIndentGuides!==e&&(this.$highlightIndentGuides=e,e)},e.prototype.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],n=1;n<e+1;n++){if(this.showTabs)(i=this.dom.createElement("span")).className="ace_invisible ace_invisible_tab",i.textContent=r.stringRepeat(this.TAB_CHAR,n),t.push(i);else t.push(this.dom.createTextNode(r.stringRepeat(" ",n),this.element))}if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var i,s="ace_indent-guide",o=this.showSpaces?" ace_invisible ace_invisible_space":"",a=this.showSpaces?r.stringRepeat(this.SPACE_CHAR,this.tabSize):r.stringRepeat(" ",this.tabSize),l=this.showTabs?" ace_invisible ace_invisible_tab":"",c=this.showTabs?r.stringRepeat(this.TAB_CHAR,this.tabSize):a;(i=this.dom.createElement("span")).className=s+o,i.textContent=a,this.$tabStrings[" "]=i,(i=this.dom.createElement("span")).className=s+l,i.textContent=c,this.$tabStrings["\t"]=i}},e.prototype.updateLines=function(e,t,n){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;for(var i=Math.max(t,e.firstRow),s=Math.min(n,e.lastRow),r=this.element.childNodes,o=0,a=e.firstRow;a<i;a++){if(l=this.session.getFoldLine(a)){if(l.containsRow(i)){i=l.start.row;break}a=l.end.row}o++}for(var l,c=!1,u=(a=i,(l=this.session.getNextFoldLine(a))?l.start.row:1/0);a>u&&(a=l.end.row+1,u=(l=this.session.getNextFoldLine(a,l))?l.start.row:1/0),!(a>s);){var h=r[o++];if(h){this.dom.removeChildren(h),this.$renderLine(h,a,a==u&&l),c&&(h.style.top=this.$lines.computeLineTop(a,e,this.session)+"px");var d=e.lineHeight*this.session.getRowLength(a)+"px";h.style.height!=d&&(c=!0,h.style.height=d)}a++}if(c)for(;o<this.$lines.cells.length;){var f=this.$lines.cells[o++];f.element.style.top=this.$lines.computeLineTop(f.row,e,this.session)+"px"}},e.prototype.scrollLines=function(e){var t=this.config;if(this.config=e,this.$lines.pageChanged(t,e))return this.update(e);this.$lines.moveContainer(e);var n=e.lastRow,i=t?t.lastRow:-1;if(!t||i<e.firstRow)return this.update(e);if(n<t.firstRow)return this.update(e);if(!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);if(t.firstRow<e.firstRow)for(var s=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);s>0;s--)this.$lines.shift();if(t.lastRow>e.lastRow)for(s=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);s>0;s--)this.$lines.pop();e.firstRow<t.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,t.firstRow-1)),e.lastRow>t.lastRow&&this.$lines.push(this.$renderLinesFragment(e,t.lastRow+1,e.lastRow)),this.$highlightIndentGuide()},e.prototype.$renderLinesFragment=function(e,t,n){for(var i=[],r=t,o=this.session.getNextFoldLine(r),a=o?o.start.row:1/0;r>a&&(r=o.end.row+1,a=(o=this.session.getNextFoldLine(r,o))?o.start.row:1/0),!(r>n);){var l=this.$lines.createCell(r,e,this.session),c=l.element;this.dom.removeChildren(c),s.setStyle(c.style,"height",this.$lines.computeLineHeight(r,e,this.session)+"px"),s.setStyle(c.style,"top",this.$lines.computeLineTop(r,e,this.session)+"px"),this.$renderLine(c,r,r==a&&o),this.$useLineGroups()?c.className="ace_line_group":c.className="ace_line",i.push(l),r++}return i},e.prototype.update=function(e){this.$lines.moveContainer(e),this.config=e;for(var t=e.firstRow,n=e.lastRow,i=this.$lines;i.getLength();)i.pop();i.push(this.$renderLinesFragment(e,t,n))},e.prototype.$renderToken=function(e,t,n,i){for(var s,o=this,a=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,u=this.dom.createFragment(this.element),h=0;s=a.exec(i);){var d=s[1],f=s[2],g=s[3],p=s[4],m=s[5];if(o.showSpaces||!f){var b=h!=s.index?i.slice(h,s.index):"";if(h=s.index+s[0].length,b&&u.appendChild(this.dom.createTextNode(b,this.element)),d){var _=o.session.getScreenTabSize(t+s.index);u.appendChild(o.$tabStrings[_].cloneNode(!0)),t+=_-1}else if(f){if(o.showSpaces)(y=this.dom.createElement("span")).className="ace_invisible ace_invisible_space",y.textContent=r.stringRepeat(o.SPACE_CHAR,f.length),u.appendChild(y);else u.appendChild(this.dom.createTextNode(f,this.element))}else if(g){(y=this.dom.createElement("span")).className="ace_invisible ace_invisible_space ace_invalid",y.textContent=r.stringRepeat(o.SPACE_CHAR,g.length),u.appendChild(y)}else if(p){t+=1,(y=this.dom.createElement("span")).style.width=2*o.config.characterWidth+"px",y.className=o.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",y.textContent=o.showSpaces?o.SPACE_CHAR:p,u.appendChild(y)}else if(m){t+=1,(y=this.dom.createElement("span")).style.width=2*o.config.characterWidth+"px",y.className="ace_cjk",y.textContent=m,u.appendChild(y)}}}if(u.appendChild(this.dom.createTextNode(h?i.slice(h):i,this.element)),c(n.type))e.appendChild(u);else{var v="ace_"+n.type.replace(/\./g," ace_"),y=this.dom.createElement("span");"fold"==n.type&&(y.style.width=n.value.length*this.config.characterWidth+"px",y.setAttribute("title",l("Unfold code"))),y.className=v,y.appendChild(u),e.appendChild(y)}return t+i.length},e.prototype.renderIndentGuide=function(e,t,n){var i=t.search(this.$indentGuideRe);if(i<=0||i>=n)return t;if(" "==t[0]){for(var s=(i-=i%this.tabSize)/this.tabSize,r=0;r<s;r++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),t.substr(i)}if("\t"==t[0]){for(r=0;r<i;r++)e.appendChild(this.$tabStrings["\t"].cloneNode(!0));return this.$highlightIndentGuide(),t.substr(i)}return this.$highlightIndentGuide(),t},e.prototype.$highlightIndentGuide=function(){if(this.$highlightIndentGuides&&this.displayIndentGuides){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var e=this.session.doc.$lines;if(e){var t=this.session.selection.getCursor(),n=/^\s*/.exec(this.session.doc.getLine(t.row))[0].length,i=Math.floor(n/this.tabSize);if(this.$highlightIndentGuideMarker={indentLevel:i,start:t.row},this.session.$bracketHighlight)for(var s=this.session.$bracketHighlight.ranges,r=0;r<s.length;r++)if(t.row!==s[r].start.row){this.$highlightIndentGuideMarker.end=s[r].start.row,t.row>s[r].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}if(!this.$highlightIndentGuideMarker.end&&""!==e[t.row]&&t.column===e[t.row].length){this.$highlightIndentGuideMarker.dir=1;for(r=t.row+1;r<e.length;r++){var o=e[r],a=/^\s*/.exec(o)[0].length;if(""!==o&&(this.$highlightIndentGuideMarker.end=r,a<=n))break}}this.$renderHighlightIndentGuide()}}},e.prototype.$clearActiveIndentGuide=function(){for(var e=this.$lines.cells,t=0;t<e.length;t++){var n=e[t].element.childNodes;if(n.length>0)for(var i=0;i<n.length;i++)if(n[i].classList&&n[i].classList.contains("ace_indent-guide-active")){n[i].classList.remove("ace_indent-guide-active");break}}},e.prototype.$setIndentGuideActive=function(e,t){if(""!==this.session.doc.getLine(e.row)){var n=e.element.childNodes;if(n){var i=n[t-1];i&&i.classList&&i.classList.contains("ace_indent-guide")&&i.classList.add("ace_indent-guide-active")}}},e.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var e=this.$lines.cells;this.$clearActiveIndentGuide();var t=this.$highlightIndentGuideMarker.indentLevel;if(0!==t)if(1===this.$highlightIndentGuideMarker.dir)for(var n=0;n<e.length;n++){var i=e[n];if(this.$highlightIndentGuideMarker.end&&i.row>=this.$highlightIndentGuideMarker.start+1){if(i.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(i,t)}}else for(n=e.length-1;n>=0;n--){i=e[n];if(this.$highlightIndentGuideMarker.end&&i.row<this.$highlightIndentGuideMarker.start){if(i.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(i,t)}}}},e.prototype.$createLineElement=function(e){var t=this.dom.createElement("div");return t.className="ace_line",t.style.height=this.config.lineHeight+"px",t},e.prototype.$renderWrappedLine=function(e,t,n){var i=0,s=0,o=n[0],a=0,l=this.$createLineElement();e.appendChild(l);for(var c=0;c<t.length;c++){var u=t[c],h=u.value;if(0==c&&this.displayIndentGuides){if(i=h.length,!(h=this.renderIndentGuide(l,h,o)))continue;i-=h.length}if(i+h.length<o)a=this.$renderToken(l,a,u,h),i+=h.length;else{for(;i+h.length>=o;)a=this.$renderToken(l,a,u,h.substring(0,o-i)),h=h.substring(o-i),i=o,l=this.$createLineElement(),e.appendChild(l),l.appendChild(this.dom.createTextNode(r.stringRepeat("\xa0",n.indent),this.element)),a=0,o=n[++s]||Number.MAX_VALUE;0!=h.length&&(i+=h.length,a=this.$renderToken(l,a,u,h))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(l,a,null,"",!0)},e.prototype.$renderSimpleLine=function(e,t){for(var n=0,i=0;i<t.length;i++){var s=t[i],r=s.value;if(0!=i||!this.displayIndentGuides||(r=this.renderIndentGuide(e,r))){if(n+r.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,n,s,r);n=this.$renderToken(e,n,s,r)}}},e.prototype.$renderOverflowMessage=function(e,t,n,i,s){n&&this.$renderToken(e,t,n,i.slice(0,this.MAX_LINE_LENGTH-t));var r=this.dom.createElement("span");r.className="ace_inline_button ace_keyword ace_toggle_wrap",r.textContent=s?"<hide>":"<click to see more...>",e.appendChild(r)},e.prototype.$renderLine=function(e,t,n){if(n||0==n||(n=this.session.getFoldLine(t)),n)var i=this.$getFoldLineTokens(t,n);else i=this.session.getTokens(t);var s=e;if(i.length){var r=this.session.getRowSplitData(t);if(r&&r.length){this.$renderWrappedLine(e,i,r);s=e.lastChild}else{s=e;this.$useLineGroups()&&(s=this.$createLineElement(),e.appendChild(s)),this.$renderSimpleLine(s,i)}}else this.$useLineGroups()&&(s=this.$createLineElement(),e.appendChild(s));if(this.showEOL&&s){n&&(t=n.end.row);var o=this.dom.createElement("span");o.className="ace_invisible ace_invisible_eol",o.textContent=t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,s.appendChild(o)}},e.prototype.$getFoldLineTokens=function(e,t){var n=this.session,i=[];var s=n.getTokens(e);return t.walk((function(e,t,r,o,a){null!=e?i.push({type:"fold",value:e}):(a&&(s=n.getTokens(t)),s.length&&function(e,t,n){for(var s=0,r=0;r+e[s].value.length<t;)if(r+=e[s].value.length,++s==e.length)return;for(r!=t&&((o=e[s].value.substring(t-r)).length>n-t&&(o=o.substring(0,n-t)),i.push({type:e[s].type,value:o}),r=t+o.length,s+=1);r<n&&s<e.length;){var o;(o=e[s].value).length+r>n?i.push({type:e[s].type,value:o.substring(0,n-r)}):i.push(e[s]),r+=o.length,s+=1}}(s,o,r))}),t.end.row,this.session.getLine(t.end.row).length),i},e.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},e}();u.prototype.EOF_CHAR="\xb6",u.prototype.EOL_CHAR_LF="\xac",u.prototype.EOL_CHAR_CRLF="\xa4",u.prototype.EOL_CHAR=u.prototype.EOL_CHAR_LF,u.prototype.TAB_CHAR="\u2014",u.prototype.SPACE_CHAR="\xb7",u.prototype.$padding=0,u.prototype.MAX_LINE_LENGTH=1e4,u.prototype.showInvisibles=!1,u.prototype.showSpaces=!1,u.prototype.showTabs=!1,u.prototype.showEOL=!1,u.prototype.displayIndentGuides=!0,u.prototype.$highlightIndentGuides=!0,u.prototype.$tabStrings=[],u.prototype.destroy={},u.prototype.onChangeTabSize=u.prototype.$computeTabString,i.implement(u.prototype,a),t.Text=u})),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],(function(e,t,n){"use strict";var i=e("../lib/dom"),s=function(){function e(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),i.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return e.prototype.$updateOpacity=function(e){for(var t=this.cursors,n=t.length;n--;)i.setStyle(t[n].style,"opacity",e?"":"0")},e.prototype.$startCssAnimation=function(){for(var e=this.cursors,t=e.length;t--;)e[t].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&i.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},e.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,i.removeCssClass(this.element,"ace_animate-blinking")},e.prototype.setPadding=function(e){this.$padding=e},e.prototype.setSession=function(e){this.session=e},e.prototype.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},e.prototype.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},e.prototype.setSmoothBlinking=function(e){e!=this.smoothBlinking&&(this.smoothBlinking=e,i.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.restartTimer())},e.prototype.addCursor=function(){var e=i.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},e.prototype.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},e.prototype.hideCursor=function(){this.isVisible=!1,i.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},e.prototype.showCursor=function(){this.isVisible=!0,i.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},e.prototype.restartTimer=function(){var e=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,i.removeCssClass(this.element,"ace_smooth-blinking")),e(!0),this.isBlinking&&this.blinkInterval&&this.isVisible)if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&i.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),i.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var t=function(){this.timeoutId=setTimeout((function(){e(!1)}),.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval((function(){e(!0),t()}),this.blinkInterval),t()}else this.$stopCssAnimation()},e.prototype.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var n=this.session.documentToScreenPosition(e);return{left:this.$padding+(this.session.$bidiHandler.isBidiRow(n.row,e.row)?this.session.$bidiHandler.getPosLeft(n.column):n.column*this.config.characterWidth),top:(n.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight}},e.prototype.isCursorInView=function(e,t){return e.top>=0&&e.top<t.maxHeight},e.prototype.update=function(e){this.config=e;var t=this.session.$selectionMarkers,n=0,s=0;void 0!==t&&0!==t.length||(t=[{cursor:null}]);n=0;for(var r=t.length;n<r;n++){var o=this.getPixelPosition(t[n].cursor,!0);if(!((o.top>e.height+e.offset||o.top<0)&&n>1)){var a=this.cursors[s++]||this.addCursor(),l=a.style;this.drawCursor?this.drawCursor(a,o,e,t[n],this.session):this.isCursorInView(o,e)?(i.setStyle(l,"display","block"),i.translate(a,o.left,o.top),i.setStyle(l,"width",Math.round(e.characterWidth)+"px"),i.setStyle(l,"height",e.lineHeight+"px")):i.setStyle(l,"display","none")}}for(;this.cursors.length>s;)this.removeCursor();var c=this.session.getOverwrite();this.$setOverwrite(c),this.$pixelPos=o,this.restartTimer()},e.prototype.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?i.addCssClass(this.element,"ace_overwrite-cursors"):i.removeCssClass(this.element,"ace_overwrite-cursors"))},e.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},e}();s.prototype.$padding=0,s.prototype.drawCursor=null,t.Cursor=s})),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=e("./lib/oop"),r=e("./lib/dom"),o=e("./lib/event"),a=e("./lib/event_emitter").EventEmitter,l=32768,c=function(){function e(e,t){this.element=r.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+t,this.inner=r.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xa0",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addListener(this.element,"scroll",this.onScroll.bind(this)),o.addListener(this.element,"mousedown",o.preventDefault)}return e.prototype.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1},e}();s.implement(c.prototype,a);var u=function(e){function t(t,n){var i=e.call(this,t,"-v")||this;return i.scrollTop=0,i.scrollHeight=0,n.$scrollbarWidth=i.width=r.scrollbarWidth(t.ownerDocument),i.inner.style.width=i.element.style.width=(i.width||15)+5+"px",i.$minWidth=0,i}return i(t,e),t.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var e=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-e)/(this.coeff-e)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},t.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},t.prototype.setHeight=function(e){this.element.style.height=e+"px"},t.prototype.setScrollHeight=function(e){this.scrollHeight=e,e>l?(this.coeff=l/e,e=l):1!=this.coeff&&(this.coeff=1),this.inner.style.height=e+"px"},t.prototype.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=e,this.element.scrollTop=e*this.coeff)},t}(c);u.prototype.setInnerHeight=u.prototype.setScrollHeight;var h=function(e){function t(t,n){var i=e.call(this,t,"-h")||this;return i.scrollLeft=0,i.height=n.$scrollbarWidth,i.inner.style.height=i.element.style.height=(i.height||15)+5+"px",i}return i(t,e),t.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},t.prototype.getHeight=function(){return this.isVisible?this.height:0},t.prototype.setWidth=function(e){this.element.style.width=e+"px"},t.prototype.setInnerWidth=function(e){this.inner.style.width=e+"px"},t.prototype.setScrollWidth=function(e){this.inner.style.width=e+"px"},t.prototype.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)},t}(c);t.ScrollBar=u,t.ScrollBarV=u,t.ScrollBarH=h,t.VScrollBar=u,t.HScrollBar=h})),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=e("./lib/oop"),r=e("./lib/dom"),o=e("./lib/event"),a=e("./lib/event_emitter").EventEmitter;r.importCssString(".ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{\n  position: absolute;\n  background: rgba(128, 128, 128, 0.6);\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  border: 1px solid #bbb;\n  border-radius: 2px;\n  z-index: 8;\n}\n.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {\n  position: absolute;\n  z-index: 6;\n  background: none;\n  overflow: hidden!important;\n}\n.ace_editor>.ace_sb-v {\n  z-index: 6;\n  right: 0;\n  top: 0;\n  width: 12px;\n}\n.ace_editor>.ace_sb-v div {\n  z-index: 8;\n  right: 0;\n  width: 100%;\n}\n.ace_editor>.ace_sb-h {\n  bottom: 0;\n  left: 0;\n  height: 12px;\n}\n.ace_editor>.ace_sb-h div {\n  bottom: 0;\n  height: 100%;\n}\n.ace_editor>.ace_sb_grabbed {\n  z-index: 8;\n  background: #000;\n}","ace_scrollbar.css",!1);var l=function(){function e(e,t){this.element=r.createElement("div"),this.element.className="ace_sb"+t,this.inner=r.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,o.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return e.prototype.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1},e}();s.implement(l.prototype,a);var c=function(e){function t(t,n){var i=e.call(this,t,"-v")||this;return i.scrollTop=0,i.scrollHeight=0,i.parent=t,i.width=i.VScrollWidth,i.renderer=n,i.inner.style.width=i.element.style.width=(i.width||15)+"px",i.$minWidth=0,i}return i(t,e),t.prototype.onMouseDown=function(e,t){if("mousedown"===e&&0===o.getButton(t)&&2!==t.detail){if(t.target===this.inner){var n=this,i=t.clientY,s=t.clientY,r=this.thumbTop;o.capture(this.inner,(function(e){i=e.clientY}),(function(){clearInterval(a)}));var a=setInterval((function(){if(void 0!==i){var e=n.scrollTopFromThumbTop(r+i-s);e!==n.scrollTop&&n._emit("scroll",{data:e})}}),20);return o.preventDefault(t)}var l=t.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(l)}),o.preventDefault(t)}},t.prototype.getHeight=function(){return this.height},t.prototype.scrollTopFromThumbTop=function(e){var t=e*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return(t>>=0)<0?t=0:t>this.pageHeight-this.viewHeight&&(t=this.pageHeight-this.viewHeight),t},t.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},t.prototype.setHeight=function(e){this.height=Math.max(0,e),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},t.prototype.setScrollHeight=function(e,t){(this.pageHeight!==e||t)&&(this.pageHeight=e,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},t.prototype.setScrollTop=function(e){this.scrollTop=e,e<0&&(e=0),this.thumbTop=e*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},t}(l);c.prototype.setInnerHeight=c.prototype.setScrollHeight;var u=function(e){function t(t,n){var i=e.call(this,t,"-h")||this;return i.scrollLeft=0,i.scrollWidth=0,i.height=i.HScrollHeight,i.inner.style.height=i.element.style.height=(i.height||12)+"px",i.renderer=n,i}return i(t,e),t.prototype.onMouseDown=function(e,t){if("mousedown"===e&&0===o.getButton(t)&&2!==t.detail){if(t.target===this.inner){var n=this,i=t.clientX,s=t.clientX,r=this.thumbLeft;o.capture(this.inner,(function(e){i=e.clientX}),(function(){clearInterval(a)}));var a=setInterval((function(){if(void 0!==i){var e=n.scrollLeftFromThumbLeft(r+i-s);e!==n.scrollLeft&&n._emit("scroll",{data:e})}}),20);return o.preventDefault(t)}var l=t.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(l)}),o.preventDefault(t)}},t.prototype.getHeight=function(){return this.isVisible?this.height:0},t.prototype.scrollLeftFromThumbLeft=function(e){var t=e*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return(t>>=0)<0?t=0:t>this.pageWidth-this.viewWidth&&(t=this.pageWidth-this.viewWidth),t},t.prototype.setWidth=function(e){this.width=Math.max(0,e),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},t.prototype.setScrollWidth=function(e,t){(this.pageWidth!==e||t)&&(this.pageWidth=e,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},t.prototype.setScrollLeft=function(e){this.scrollLeft=e,e<0&&(e=0),this.thumbLeft=e*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},t}(l);u.prototype.setInnerWidth=u.prototype.setScrollWidth,t.ScrollBar=c,t.ScrollBarV=c,t.ScrollBarH=u,t.VScrollBar=c,t.HScrollBar=u})),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],(function(e,t,n){"use strict";var i=e("./lib/event"),s=function(){function e(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=t||window;var n=this;this._flush=function(e){n.pending=!1;var t=n.changes;if(t&&(i.blockIdle(100),n.changes=0,n.onRender(t)),n.changes){if(n.$recursionLimit--<0)return;n.schedule()}else n.$recursionLimit=2}}return e.prototype.schedule=function(e){this.changes=this.changes|e,this.changes&&!this.pending&&(i.nextFrame(this._flush),this.pending=!0)},e.prototype.clear=function(e){var t=this.changes;return this.changes=0,t},e}();t.RenderLoop=s})),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],(function(e,t,n){var i=e("../lib/oop"),s=e("../lib/dom"),r=e("../lib/lang"),o=e("../lib/event"),a=e("../lib/useragent"),l=e("../lib/event_emitter").EventEmitter,c=512,u="function"==typeof ResizeObserver,h=200,d=function(){function e(e){this.el=s.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=s.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=s.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),this.$measureNode.textContent=r.stringRepeat("X",c),this.$characterSize={width:0,height:0},u?this.$addObserver():this.checkForSizeChanges()}return e.prototype.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="0px",e.visibility="hidden",e.position="absolute",e.whiteSpace="pre",a.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},e.prototype.checkForSizeChanges=function(e){if(void 0===e&&(e=this.$measureSizes()),e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},e.prototype.$addObserver=function(){var e=this;this.$observer=new window.ResizeObserver((function(t){e.checkForSizeChanges()})),this.$observer.observe(this.$measureNode)},e.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=o.onIdle((function t(){e.checkForSizeChanges(),o.onIdle(t,500)}),500)},e.prototype.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},e.prototype.$measureSizes=function(e){var t={height:(e||this.$measureNode).clientHeight,width:(e||this.$measureNode).clientWidth/c};return 0===t.width||0===t.height?null:t},e.prototype.$measureCharWidth=function(e){return this.$main.textContent=r.stringRepeat(e,c),this.$main.getBoundingClientRect().width/c},e.prototype.getCharacterWidth=function(e){var t=this.charSizes[e];return void 0===t&&(t=this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},e.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},e.prototype.$getZoom=function(e){return e&&e.parentElement?(window.getComputedStyle(e).zoom||1)*this.$getZoom(e.parentElement):1},e.prototype.$initTransformMeasureNodes=function(){var e=function(e,t){return["div",{style:"position: absolute;top:"+e+"px;left:"+t+"px;"}]};this.els=s.buildDom([e(0,0),e(h,0),e(0,h),e(h,h)],this.el)},e.prototype.transformCoordinates=function(e,t){e&&(e=r(1/this.$getZoom(this.el),e));function n(e,t,n){var i=e[1]*t[0]-e[0]*t[1];return[(-t[1]*n[0]+t[0]*n[1])/i,(+e[1]*n[0]-e[0]*n[1])/i]}function i(e,t){return[e[0]-t[0],e[1]-t[1]]}function s(e,t){return[e[0]+t[0],e[1]+t[1]]}function r(e,t){return[e*t[0],e*t[1]]}function o(e){var t=e.getBoundingClientRect();return[t.left,t.top]}this.els||this.$initTransformMeasureNodes();var a=o(this.els[0]),l=o(this.els[1]),c=o(this.els[2]),u=o(this.els[3]),d=n(i(u,l),i(u,c),i(s(l,c),s(u,a))),f=r(1+d[0],i(l,a)),g=r(1+d[1],i(c,a));if(t){var p=t,m=d[0]*p[0]/h+d[1]*p[1]/h+1,b=s(r(p[0],f),r(p[1],g));return s(r(1/m/h,b),a)}var _=i(e,a),v=n(i(f,r(d[0],_)),i(g,r(d[1],_)),_);return r(h,v)},e}();d.prototype.$characterSize={width:0,height:0},i.implement(d.prototype,l),t.FontMetrics=d})),ace.define("ace/css/editor-css",["require","exports","module"],(function(e,t,n){n.exports='\n.ace_br1 {border-top-left-radius    : 3px;}\n.ace_br2 {border-top-right-radius   : 3px;}\n.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\n.ace_br4 {border-bottom-right-radius: 3px;}\n.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\n.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\n.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\n.ace_br8 {border-bottom-left-radius : 3px;}\n.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\n.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\n.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\n.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\n\n\n.ace_editor {\n    position: relative;\n    overflow: hidden;\n    padding: 0;\n    font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'Source Code Pro\', \'source-code-pro\', monospace;\n    direction: ltr;\n    text-align: left;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.ace_scroller {\n    position: absolute;\n    overflow: hidden;\n    top: 0;\n    bottom: 0;\n    background-color: inherit;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    cursor: text;\n}\n\n.ace_content {\n    position: absolute;\n    box-sizing: border-box;\n    min-width: 100%;\n    contain: style size layout;\n    font-variant-ligatures: no-common-ligatures;\n}\n\n.ace_keyboard-focus:focus {\n    box-shadow: inset 0 0 0 2px #5E9ED6;\n    outline: none;\n}\n\n.ace_dragging .ace_scroller:before{\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    content: \'\';\n    background: rgba(250, 250, 250, 0.01);\n    z-index: 1000;\n}\n.ace_dragging.ace_dark .ace_scroller:before{\n    background: rgba(0, 0, 0, 0.01);\n}\n\n.ace_gutter {\n    position: absolute;\n    overflow : hidden;\n    width: auto;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    cursor: default;\n    z-index: 4;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    contain: style size layout;\n}\n\n.ace_gutter-active-line {\n    position: absolute;\n    left: 0;\n    right: 0;\n}\n\n.ace_scroller.ace_scroll-left:after {\n    content: "";\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\n    pointer-events: none;\n}\n\n.ace_gutter-cell, .ace_gutter-cell_svg-icons {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    padding-left: 19px;\n    padding-right: 6px;\n    background-repeat: no-repeat;\n}\n\n.ace_gutter-cell_svg-icons .ace_gutter_annotation {\n    margin-left: -14px;\n    float: left;\n}\n\n.ace_gutter-cell .ace_gutter_annotation {\n    margin-left: -19px;\n    float: left;\n}\n\n.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_info, .ace_icon.ace_info {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");\n}\n\n.ace_icon_svg.ace_error {\n    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");\n    background-color: crimson;\n}\n.ace_icon_svg.ace_warning {\n    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");\n    background-color: darkorange;\n}\n.ace_icon_svg.ace_info {\n    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");\n    background-color: royalblue;\n}\n\n.ace_icon_svg.ace_error_fold {\n    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");\n    background-color: crimson;\n}\n.ace_icon_svg.ace_warning_fold {\n    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");\n    background-color: darkorange;\n}\n\n.ace_scrollbar {\n    contain: strict;\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    z-index: 6;\n}\n\n.ace_scrollbar-inner {\n    position: absolute;\n    cursor: text;\n    left: 0;\n    top: 0;\n}\n\n.ace_scrollbar-v{\n    overflow-x: hidden;\n    overflow-y: scroll;\n    top: 0;\n}\n\n.ace_scrollbar-h {\n    overflow-x: scroll;\n    overflow-y: hidden;\n    left: 0;\n}\n\n.ace_print-margin {\n    position: absolute;\n    height: 100%;\n}\n\n.ace_text-input {\n    position: absolute;\n    z-index: 0;\n    width: 0.5em;\n    height: 1em;\n    opacity: 0;\n    background: transparent;\n    -moz-appearance: none;\n    appearance: none;\n    border: none;\n    resize: none;\n    outline: none;\n    overflow: hidden;\n    font: inherit;\n    padding: 0 1px;\n    margin: 0 -1px;\n    contain: strict;\n    -ms-user-select: text;\n    -moz-user-select: text;\n    -webkit-user-select: text;\n    user-select: text;\n    /*with `pre-line` chrome inserts &nbsp; instead of space*/\n    white-space: pre!important;\n}\n.ace_text-input.ace_composition {\n    background: transparent;\n    color: inherit;\n    z-index: 1000;\n    opacity: 1;\n}\n.ace_composition_placeholder { color: transparent }\n.ace_composition_marker { \n    border-bottom: 1px solid;\n    position: absolute;\n    border-radius: 0;\n    margin-top: 1px;\n}\n\n[ace_nocontext=true] {\n    transform: none!important;\n    filter: none!important;\n    clip-path: none!important;\n    mask : none!important;\n    contain: none!important;\n    perspective: none!important;\n    mix-blend-mode: initial!important;\n    z-index: auto;\n}\n\n.ace_layer {\n    z-index: 1;\n    position: absolute;\n    overflow: hidden;\n    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/\n    word-wrap: normal;\n    white-space: pre;\n    height: 100%;\n    width: 100%;\n    box-sizing: border-box;\n    /* setting pointer-events: auto; on node under the mouse, which changes\n        during scroll, will break mouse wheel scrolling in Safari */\n    pointer-events: none;\n}\n\n.ace_gutter-layer {\n    position: relative;\n    width: auto;\n    text-align: right;\n    pointer-events: auto;\n    height: 1000000px;\n    contain: style size layout;\n}\n\n.ace_text-layer {\n    font: inherit !important;\n    position: absolute;\n    height: 1000000px;\n    width: 1000000px;\n    contain: style size layout;\n}\n\n.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {\n    contain: style size layout;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n}\n\n.ace_hidpi .ace_text-layer,\n.ace_hidpi .ace_gutter-layer,\n.ace_hidpi .ace_content,\n.ace_hidpi .ace_gutter {\n    contain: strict;\n}\n.ace_hidpi .ace_text-layer > .ace_line, \n.ace_hidpi .ace_text-layer > .ace_line_group {\n    contain: strict;\n}\n\n.ace_cjk {\n    display: inline-block;\n    text-align: center;\n}\n\n.ace_cursor-layer {\n    z-index: 4;\n}\n\n.ace_cursor {\n    z-index: 4;\n    position: absolute;\n    box-sizing: border-box;\n    border-left: 2px solid;\n    /* workaround for smooth cursor repaintng whole screen in chrome */\n    transform: translatez(0);\n}\n\n.ace_multiselect .ace_cursor {\n    border-left-width: 1px;\n}\n\n.ace_slim-cursors .ace_cursor {\n    border-left-width: 1px;\n}\n\n.ace_overwrite-cursors .ace_cursor {\n    border-left-width: 0;\n    border-bottom: 1px solid;\n}\n\n.ace_hidden-cursors .ace_cursor {\n    opacity: 0.2;\n}\n\n.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {\n    opacity: 0;\n}\n\n.ace_smooth-blinking .ace_cursor {\n    transition: opacity 0.18s;\n}\n\n.ace_animate-blinking .ace_cursor {\n    animation-duration: 1000ms;\n    animation-timing-function: step-end;\n    animation-name: blink-ace-animate;\n    animation-iteration-count: infinite;\n}\n\n.ace_animate-blinking.ace_smooth-blinking .ace_cursor {\n    animation-duration: 1000ms;\n    animation-timing-function: ease-in-out;\n    animation-name: blink-ace-animate-smooth;\n}\n    \n@keyframes blink-ace-animate {\n    from, to { opacity: 1; }\n    60% { opacity: 0; }\n}\n\n@keyframes blink-ace-animate-smooth {\n    from, to { opacity: 1; }\n    45% { opacity: 1; }\n    60% { opacity: 0; }\n    85% { opacity: 0; }\n}\n\n.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\n    position: absolute;\n    z-index: 3;\n}\n\n.ace_marker-layer .ace_selection {\n    position: absolute;\n    z-index: 5;\n}\n\n.ace_marker-layer .ace_bracket {\n    position: absolute;\n    z-index: 6;\n}\n\n.ace_marker-layer .ace_error_bracket {\n    position: absolute;\n    border-bottom: 1px solid #DE5555;\n    border-radius: 0;\n}\n\n.ace_marker-layer .ace_active-line {\n    position: absolute;\n    z-index: 2;\n}\n\n.ace_marker-layer .ace_selected-word {\n    position: absolute;\n    z-index: 4;\n    box-sizing: border-box;\n}\n\n.ace_line .ace_fold {\n    box-sizing: border-box;\n\n    display: inline-block;\n    height: 11px;\n    margin-top: -2px;\n    vertical-align: middle;\n\n    background-image:\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");\n    background-repeat: no-repeat, repeat-x;\n    background-position: center center, top left;\n    color: transparent;\n\n    border: 1px solid black;\n    border-radius: 2px;\n\n    cursor: pointer;\n    pointer-events: auto;\n}\n\n.ace_dark .ace_fold {\n}\n\n.ace_fold:hover{\n    background-image:\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),\n        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");\n}\n\n.ace_tooltip {\n    background-color: #f5f5f5;\n    border: 1px solid gray;\n    border-radius: 1px;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n    color: black;\n    max-width: 100%;\n    padding: 3px 4px;\n    position: fixed;\n    z-index: 999999;\n    box-sizing: border-box;\n    cursor: default;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n    line-height: normal;\n    font-style: normal;\n    font-weight: normal;\n    letter-spacing: normal;\n    pointer-events: none;\n    overflow: auto;\n    max-width: min(60em, 66vw);\n    overscroll-behavior: contain;\n}\n.ace_tooltip pre {\n    white-space: pre-wrap;\n}\n\n.ace_tooltip.ace_dark {\n    background-color: #636363;\n    color: #fff;\n}\n\n.ace_tooltip:focus {\n    outline: 1px solid #5E9ED6;\n}\n\n.ace_icon {\n    display: inline-block;\n    width: 18px;\n    vertical-align: top;\n}\n\n.ace_icon_svg {\n    display: inline-block;\n    width: 12px;\n    vertical-align: top;\n    -webkit-mask-repeat: no-repeat;\n    -webkit-mask-size: 12px;\n    -webkit-mask-position: center;\n}\n\n.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {\n    padding-right: 13px;\n}\n\n.ace_fold-widget {\n    box-sizing: border-box;\n\n    margin: 0 -12px 0 1px;\n    display: none;\n    width: 11px;\n    vertical-align: top;\n\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");\n    background-repeat: no-repeat;\n    background-position: center;\n\n    border-radius: 3px;\n    \n    border: 1px solid transparent;\n    cursor: pointer;\n}\n\n.ace_folding-enabled .ace_fold-widget {\n    display: inline-block;   \n}\n\n.ace_fold-widget.ace_end {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");\n}\n\n.ace_fold-widget.ace_closed {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");\n}\n\n.ace_fold-widget:hover {\n    border: 1px solid rgba(0, 0, 0, 0.3);\n    background-color: rgba(255, 255, 255, 0.2);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n}\n\n.ace_fold-widget:active {\n    border: 1px solid rgba(0, 0, 0, 0.4);\n    background-color: rgba(0, 0, 0, 0.05);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n}\n/**\n * Dark version for fold widgets\n */\n.ace_dark .ace_fold-widget {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");\n}\n.ace_dark .ace_fold-widget.ace_end {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");\n}\n.ace_dark .ace_fold-widget.ace_closed {\n    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");\n}\n.ace_dark .ace_fold-widget:hover {\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n    background-color: rgba(255, 255, 255, 0.1);\n}\n.ace_dark .ace_fold-widget:active {\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n}\n\n.ace_inline_button {\n    border: 1px solid lightgray;\n    display: inline-block;\n    margin: -1px 8px;\n    padding: 0 5px;\n    pointer-events: auto;\n    cursor: pointer;\n}\n.ace_inline_button:hover {\n    border-color: gray;\n    background: rgba(200,200,200,0.2);\n    display: inline-block;\n    pointer-events: auto;\n}\n\n.ace_fold-widget.ace_invalid {\n    background-color: #FFB4B4;\n    border-color: #DE5555;\n}\n\n.ace_fade-fold-widgets .ace_fold-widget {\n    transition: opacity 0.4s ease 0.05s;\n    opacity: 0;\n}\n\n.ace_fade-fold-widgets:hover .ace_fold-widget {\n    transition: opacity 0.05s ease 0.05s;\n    opacity:1;\n}\n\n.ace_underline {\n    text-decoration: underline;\n}\n\n.ace_bold {\n    font-weight: bold;\n}\n\n.ace_nobold .ace_bold {\n    font-weight: normal;\n}\n\n.ace_italic {\n    font-style: italic;\n}\n\n\n.ace_error-marker {\n    background-color: rgba(255, 0, 0,0.2);\n    position: absolute;\n    z-index: 9;\n}\n\n.ace_highlight-marker {\n    background-color: rgba(255, 255, 0,0.2);\n    position: absolute;\n    z-index: 8;\n}\n\n.ace_mobile-menu {\n    position: absolute;\n    line-height: 1.5;\n    border-radius: 4px;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    background: white;\n    box-shadow: 1px 3px 2px grey;\n    border: 1px solid #dcdcdc;\n    color: black;\n}\n.ace_dark > .ace_mobile-menu {\n    background: #333;\n    color: #ccc;\n    box-shadow: 1px 3px 2px grey;\n    border: 1px solid #444;\n\n}\n.ace_mobile-button {\n    padding: 2px;\n    cursor: pointer;\n    overflow: hidden;\n}\n.ace_mobile-button:hover {\n    background-color: #eee;\n    opacity:1;\n}\n.ace_mobile-button:active {\n    background-color: #ddd;\n}\n\n.ace_placeholder {\n    font-family: arial;\n    transform: scale(0.9);\n    transform-origin: left;\n    white-space: pre;\n    opacity: 0.7;\n    margin: 0 10px;\n}\n\n.ace_ghost_text {\n    opacity: 0.5;\n    font-style: italic;\n    white-space: pre;\n}\n\n.ace_screenreader-only {\n    position:absolute;\n    left:-10000px;\n    top:auto;\n    width:1px;\n    height:1px;\n    overflow:hidden;\n}'})),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],(function(e,t,n){"use strict";var i=e("../lib/dom"),s=e("../lib/oop"),r=e("../lib/event_emitter").EventEmitter,o=function(){function e(e,t){this.canvas=i.createElement("canvas"),this.renderer=t,this.pixelRatio=1,this.maxHeight=t.layerConfig.maxHeight,this.lineHeight=t.layerConfig.lineHeight,this.canvasHeight=e.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=e.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},e.element.appendChild(this.canvas)}return e.prototype.$updateDecorators=function(e){var t=!0===this.renderer.theme.isDark?this.colors.dark:this.colors.light;e&&(this.maxHeight=e.maxHeight,this.lineHeight=e.lineHeight,this.canvasHeight=e.height,(e.lastRow+1)*this.lineHeight<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight);var n=this.canvas.getContext("2d");var i=this.renderer.session.$annotations;if(n.clearRect(0,0,this.canvas.width,this.canvas.height),i){var s={info:1,warning:2,error:3};i.forEach((function(e){e.priority=s[e.type]||null})),i=i.sort((function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0}));for(var r=this.renderer.session.$foldData,o=0;o<i.length;o++){var a=i[o].row,l=this.compensateFoldRows(a,r),c=Math.round((a-l)*this.lineHeight*this.heightRatio),u=Math.round((a-l)*this.lineHeight*this.heightRatio),h=Math.round(((a-l)*this.lineHeight+this.lineHeight)*this.heightRatio);if(h-u<this.minDecorationHeight){var d=(u+h)/2|0;d<this.halfMinDecorationHeight?d=this.halfMinDecorationHeight:d+this.halfMinDecorationHeight>this.canvasHeight&&(d=this.canvasHeight-this.halfMinDecorationHeight),u=Math.round(d-this.halfMinDecorationHeight),h=Math.round(d+this.halfMinDecorationHeight)}n.fillStyle=t[i[o].type]||null,n.fillRect(0,c,this.canvasWidth,h-u)}}var f=this.renderer.session.selection.getCursor();if(f){l=this.compensateFoldRows(f.row,r),c=Math.round((f.row-l)*this.lineHeight*this.heightRatio);n.fillStyle="rgba(0, 0, 0, 0.5)",n.fillRect(0,c,this.canvasWidth,2)}},e.prototype.compensateFoldRows=function(e,t){var n=0;if(t&&t.length>0)for(var i=0;i<t.length;i++)e>t[i].start.row&&e<t[i].end.row?n+=e-t[i].start.row:e>=t[i].end.row&&(n+=t[i].end.row-t[i].start.row);return n},e}();s.implement(o.prototype,r),t.Decorator=o})),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent"],(function(e,t,n){"use strict";var i=e("./lib/oop"),s=e("./lib/dom"),r=e("./lib/lang"),o=e("./config"),a=e("./layer/gutter").Gutter,l=e("./layer/marker").Marker,c=e("./layer/text").Text,u=e("./layer/cursor").Cursor,h=e("./scrollbar").HScrollBar,d=e("./scrollbar").VScrollBar,f=e("./scrollbar_custom").HScrollBar,g=e("./scrollbar_custom").VScrollBar,p=e("./renderloop").RenderLoop,m=e("./layer/font_metrics").FontMetrics,b=e("./lib/event_emitter").EventEmitter,_=e("./css/editor-css"),v=e("./layer/decorators").Decorator,y=e("./lib/useragent");s.importCssString(_,"ace_editor.css",!1);var S=function(){function e(e,t){var n=this;this.container=e||s.createElement("div"),s.addCssClass(this.container,"ace_editor"),s.HI_DPI&&s.addCssClass(this.container,"ace_hidpi"),this.setTheme(t),null==o.get("useStrictCSP")&&o.set("useStrictCSP",!1),this.$gutter=s.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=s.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=s.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new a(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new l(this.content);var i=this.$textLayer=new c(this.content);this.canvas=i.element,this.$markerFront=new l(this.content),this.$cursorLayer=new u(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new d(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.on("scroll",(function(e){n.$scrollAnimation||n.session.setScrollTop(e.data-n.scrollMargin.top)})),this.scrollBarH.on("scroll",(function(e){n.$scrollAnimation||n.session.setScrollLeft(e.data-n.scrollMargin.left)})),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new m(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",(function(e){n.updateCharacterSize(),n.onResize(!0,n.gutterWidth,n.$size.width,n.$size.height),n._signal("changeCharacterSize",e)})),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!y.isIOS,this.$loop=new p(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),o.resetOptions(this),o._signal("renderer",this)}return e.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),s.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},e.prototype.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},e.prototype.updateLines=function(e,t,n){if(void 0===t&&(t=1/0),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!n)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},e.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},e.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},e.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},e.prototype.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},e.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},e.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},e.prototype.onResize=function(e,t,n,i){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var s=this.container;i||(i=s.clientHeight||s.scrollHeight),n||(n=s.clientWidth||s.scrollWidth);var r=this.$updateCachedSize(e,t,n,i);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!n&&!i)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(r|this.$changes,!0):this.$loop.schedule(r|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},e.prototype.$updateCachedSize=function(e,t,n,i){i-=this.$extraHeight||0;var r=0,o=this.$size,a={width:o.width,height:o.height,scrollerHeight:o.scrollerHeight,scrollerWidth:o.scrollerWidth};if(i&&(e||o.height!=i)&&(o.height=i,r|=this.CHANGE_SIZE,o.scrollerHeight=o.height,this.$horizScroll&&(o.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(o.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",r|=this.CHANGE_SCROLL),n&&(e||o.width!=n)){r|=this.CHANGE_SIZE,o.width=n,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,s.setStyle(this.scrollBarH.element.style,"left",t+"px"),s.setStyle(this.scroller.style,"left",t+this.margin.left+"px"),o.scrollerWidth=Math.max(0,n-t-this.scrollBarV.getWidth()-this.margin.h),s.setStyle(this.$gutter.style,"left",this.margin.left+"px");var l=this.scrollBarV.getWidth()+"px";s.setStyle(this.scrollBarH.element.style,"right",l),s.setStyle(this.scroller.style,"right",l),s.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(o.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(r|=this.CHANGE_FULL)}return o.$dirty=!n||!i,r&&this._signal("resize",a),r},e.prototype.onGutterResize=function(e){var t=this.$showGutter?e:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()||this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},e.prototype.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},e.prototype.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},e.prototype.getAnimatedScroll=function(){return this.$animatedScroll},e.prototype.setShowInvisibles=function(e){this.setOption("showInvisibles",e),this.session.$bidiHandler.setShowInvisibles(e)},e.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},e.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},e.prototype.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},e.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},e.prototype.setHighlightIndentGuides=function(e){this.setOption("highlightIndentGuides",e)},e.prototype.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},e.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},e.prototype.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},e.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},e.prototype.getShowGutter=function(){return this.getOption("showGutter")},e.prototype.setShowGutter=function(e){return this.setOption("showGutter",e)},e.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},e.prototype.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},e.prototype.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},e.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},e.prototype.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=s.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=s.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},e.prototype.getContainerElement=function(){return this.container},e.prototype.getMouseEventTarget=function(){return this.scroller},e.prototype.getTextAreaContainer=function(){return this.container},e.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var e=this.textarea.style,t=this.$composition;if(this.$keepTextAreaAtCursor||t){var n=this.$cursorLayer.$pixelPos;if(n){t&&t.markerRange&&(n=this.$cursorLayer.getPixelPosition(t.markerRange.start,!0));var i=this.layerConfig,r=n.top,o=n.left;r-=i.offset;var a=t&&t.useTextareaForIME||y.isMobile?this.lineHeight:1;if(r<0||r>i.height-a)s.translate(this.textarea,0,0);else{var l=1,c=this.$size.height-a;if(t)if(t.useTextareaForIME){var u=this.textarea.value;l=this.characterWidth*this.session.$getStringScreenWidth(u)[0]}else r+=this.lineHeight+2;else r+=this.lineHeight;(o-=this.scrollLeft)>this.$size.scrollerWidth-l&&(o=this.$size.scrollerWidth-l),o+=this.gutterWidth+this.margin.left,s.setStyle(e,"height",a+"px"),s.setStyle(e,"width",l+"px"),s.translate(this.textarea,Math.min(o,this.$size.scrollerWidth-l),Math.min(r,c))}}}else s.translate(this.textarea,-100,0)}},e.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},e.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},e.prototype.getLastFullyVisibleRow=function(){var e=this.layerConfig,t=e.lastRow;return this.session.documentToScreenRow(t,0)*e.lineHeight-this.session.getScrollTop()>e.height-e.lineHeight?t-1:t},e.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},e.prototype.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},e.prototype.setScrollMargin=function(e,t,n,i){var s=this.scrollMargin;s.top=0|e,s.bottom=0|t,s.right=0|i,s.left=0|n,s.v=s.top+s.bottom,s.h=s.left+s.right,s.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-s.top),this.updateFull()},e.prototype.setMargin=function(e,t,n,i){var s=this.margin;s.top=0|e,s.bottom=0|t,s.right=0|i,s.left=0|n,s.v=s.top+s.bottom,s.h=s.left+s.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},e.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},e.prototype.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},e.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},e.prototype.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},e.prototype.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},e.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},e.prototype.freeze=function(){this.$frozen=!0},e.prototype.unfreeze=function(){this.$frozen=!1},e.prototype.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(e||t)){if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",e),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var n=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){if(e|=this.$computeLayerConfig()|this.$loop.clear(),n.firstRow!=this.layerConfig.firstRow&&n.firstRowScreen==this.layerConfig.firstRowScreen){var i=this.scrollTop+(n.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;i>0&&(this.scrollTop=i,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig()|this.$loop.clear())}n=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),s.translate(this.content,-this.scrollLeft,-n.offset);var r=n.width+2*this.$padding+"px",o=n.minHeight+"px";s.setStyle(this.content.style,"width",r),s.setStyle(this.content.style,"height",o)}if(e&this.CHANGE_H_SCROLL&&(s.translate(this.content,-this.scrollLeft,-n.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),e&this.CHANGE_FULL)return this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender",e);if(e&this.CHANGE_SCROLL)return this.$changedLines=null,e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(n):this.$textLayer.scrollLines(n),this.$showGutter&&(e&this.CHANGE_GUTTER||e&this.CHANGE_LINES?this.$gutterLayer.update(n):this.$gutterLayer.scrollLines(n)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n),this.$markerBack.update(n),this.$markerFront.update(n),this.$cursorLayer.update(n),this.$moveTextAreaToCursor(),void this._signal("afterRender",e);e&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(n),this.$showGutter&&this.$gutterLayer.update(n),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n)):e&this.CHANGE_LINES?((this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(n),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n)):e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(n),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n)):e&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(n),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(n)),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(n),this.$moveTextAreaToCursor()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(n),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(n),this._signal("afterRender",e)}else this.$changes|=e},e.prototype.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,n=Math.min(t,Math.max((this.$minLines||1)*this.lineHeight,e))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(n+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&n>this.$maxPixelHeight&&(n=this.$maxPixelHeight);var i=!(n<=2*this.lineHeight)&&e>t;if(n!=this.desiredHeight||this.$size.height!=this.desiredHeight||i!=this.$vScroll){i!=this.$vScroll&&(this.$vScroll=i,this.scrollBarV.setVisible(i));var s=this.container.clientWidth;this.container.style.height=n+"px",this.$updateCachedSize(!0,this.$gutterWidth,s,n),this.desiredHeight=n,this._signal("autosize")}},e.prototype.$computeLayerConfig=function(){var e=this.session,t=this.$size,n=t.height<=2*this.lineHeight,i=this.session.getScreenLength()*this.lineHeight,s=this.$getLongestLine(),r=!n&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-s-2*this.$padding<0),o=this.$horizScroll!==r;o&&(this.$horizScroll=r,this.scrollBarH.setVisible(r));var a=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var l=t.scrollerHeight+this.lineHeight,c=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;i+=c;var u=this.scrollMargin;this.session.setScrollTop(Math.max(-u.top,Math.min(this.scrollTop,i-t.scrollerHeight+u.bottom))),this.session.setScrollLeft(Math.max(-u.left,Math.min(this.scrollLeft,s+2*this.$padding-t.scrollerWidth+u.right)));var h=!n&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-i+c<0||this.scrollTop>u.top),d=a!==h;d&&(this.$vScroll=h,this.scrollBarV.setVisible(h));var f,g,p=this.scrollTop%this.lineHeight,m=Math.ceil(l/this.lineHeight)-1,b=Math.max(0,Math.round((this.scrollTop-p)/this.lineHeight)),_=b+m,v=this.lineHeight;b=e.screenToDocumentRow(b,0);var y=e.getFoldLine(b);y&&(b=y.start.row),f=e.documentToScreenRow(b,0),g=e.getRowLength(b)*v,_=Math.min(e.screenToDocumentRow(_,0),e.getLength()-1),l=t.scrollerHeight+e.getRowLength(_)*v+g,p=this.scrollTop-f*v;var S=0;return(this.layerConfig.width!=s||o)&&(S=this.CHANGE_H_SCROLL),(o||d)&&(S|=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),d&&(s=this.$getLongestLine())),this.layerConfig={width:s,padding:this.$padding,firstRow:b,firstRowScreen:f,lastRow:_,lineHeight:v,characterWidth:this.characterWidth,minHeight:l,maxHeight:i,offset:p,gutterOffset:v?Math.max(0,Math.ceil((p+t.height-t.scrollerHeight)/v)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(s-this.$padding),S},e.prototype.$updateLines=function(){if(this.$changedLines){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var n=this.layerConfig;if(!(e>n.lastRow+1)&&!(t<n.firstRow))return t===1/0?(this.$showGutter&&this.$gutterLayer.update(n),void this.$textLayer.update(n)):(this.$textLayer.updateLines(n,e,t),!0)}},e.prototype.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),this.$textLayer&&e>this.$textLayer.MAX_LINE_LENGTH&&(e=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},e.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},e.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},e.prototype.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},e.prototype.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},e.prototype.updateBreakpoints=function(e){this._rows=e,this.$loop.schedule(this.CHANGE_GUTTER)},e.prototype.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},e.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},e.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},e.prototype.showCursor=function(){this.$cursorLayer.showCursor()},e.prototype.scrollSelectionIntoView=function(e,t,n){this.scrollCursorIntoView(e,n),this.scrollCursorIntoView(t,n)},e.prototype.scrollCursorIntoView=function(e,t,n){if(0!==this.$size.scrollerHeight){var i=this.$cursorLayer.getPixelPosition(e),s=i.left,r=i.top,o=n&&n.top||0,a=n&&n.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var l=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;l+o>r?(t&&l+o>r+this.lineHeight&&(r-=t*this.$size.scrollerHeight),0===r&&(r=-this.scrollMargin.top),this.session.setScrollTop(r)):l+this.$size.scrollerHeight-a<r+this.lineHeight&&(t&&l+this.$size.scrollerHeight-a<r-this.lineHeight&&(r+=t*this.$size.scrollerHeight),this.session.setScrollTop(r+this.lineHeight+a-this.$size.scrollerHeight));var c=this.scrollLeft,u=2*this.layerConfig.characterWidth;s-u<c?((s-=u)<this.$padding+u&&(s=-this.scrollMargin.left),this.session.setScrollLeft(s)):(s+=u,c+this.$size.scrollerWidth<s+this.characterWidth?this.session.setScrollLeft(Math.round(s+this.characterWidth-this.$size.scrollerWidth)):c<=this.$padding&&s-c<this.characterWidth&&this.session.setScrollLeft(0))}},e.prototype.getScrollTop=function(){return this.session.getScrollTop()},e.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},e.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},e.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},e.prototype.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},e.prototype.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var n=this.$cursorLayer.getPixelPosition(e),i=this.$size.scrollerHeight-this.lineHeight,s=n.top-i*(t||0);return this.session.setScrollTop(s),s},e.prototype.$calcSteps=function(e,t){var n,i,s=0,r=this.STEPS,o=[];for(s=0;s<r;++s)o.push((n=s/this.STEPS,i=e,(t-e)*(Math.pow(n-1,3)+1)+i));return o},e.prototype.scrollToLine=function(e,t,n,i){var s=this.$cursorLayer.getPixelPosition({row:e,column:0}).top;t&&(s-=this.$size.scrollerHeight/2);var r=this.scrollTop;this.session.setScrollTop(s),!1!==n&&this.animateScrolling(r,i)},e.prototype.animateScrolling=function(e,t){var n=this.scrollTop;if(this.$animatedScroll){var i=this;if(e!=n){if(this.$scrollAnimation){var s=this.$scrollAnimation.steps;if(s.length&&(e=s[0])==n)return}var r=i.$calcSteps(e,n);this.$scrollAnimation={from:e,to:n,steps:r},clearInterval(this.$timer),i.session.setScrollTop(r.shift()),i.session.$scrollTop=n,this.$timer=setInterval((function(){if(!i.$stopAnimation)return i.session?void(r.length?(i.session.setScrollTop(r.shift()),i.session.$scrollTop=n):null!=n?(i.session.$scrollTop=-1,i.session.setScrollTop(n),n=null):o()):clearInterval(i.$timer);o()}),10)}}function o(){i.$timer=clearInterval(i.$timer),i.$scrollAnimation=null,i.$stopAnimation=!1,t&&t()}},e.prototype.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},e.prototype.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},e.prototype.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(e)},e.prototype.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},e.prototype.isScrollableBy=function(e,t){return t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},e.prototype.pixelToScreenCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var i=this.$fontMetrics.transformCoordinates([e,t]);e=i[1]-this.gutterWidth-this.margin.left,t=i[0]}else n=this.scroller.getBoundingClientRect();var s=e+this.scrollLeft-n.left-this.$padding,r=s/this.characterWidth,o=Math.floor((t+this.scrollTop-n.top)/this.lineHeight),a=this.$blockCursor?Math.floor(r):Math.round(r);return{row:o,column:a,side:r-a>0?1:-1,offsetX:s}},e.prototype.screenToTextCoordinates=function(e,t){var n;if(this.$hasCssTransforms){n={top:0,left:0};var i=this.$fontMetrics.transformCoordinates([e,t]);e=i[1]-this.gutterWidth-this.margin.left,t=i[0]}else n=this.scroller.getBoundingClientRect();var s=e+this.scrollLeft-n.left-this.$padding,r=s/this.characterWidth,o=this.$blockCursor?Math.floor(r):Math.round(r),a=Math.floor((t+this.scrollTop-n.top)/this.lineHeight);return this.session.screenToDocumentPosition(a,Math.max(o,0),s)},e.prototype.textToScreenCoordinates=function(e,t){var n=this.scroller.getBoundingClientRect(),i=this.session.documentToScreenPosition(e,t),s=this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,e)?this.session.$bidiHandler.getPosLeft(i.column):Math.round(i.column*this.characterWidth)),r=i.row*this.lineHeight;return{pageX:n.left+s-this.scrollLeft,pageY:n.top+r-this.scrollTop}},e.prototype.visualizeFocus=function(){s.addCssClass(this.container,"ace_focus")},e.prototype.visualizeBlur=function(){s.removeCssClass(this.container,"ace_focus")},e.prototype.showComposition=function(e){this.$composition=e,e.cssText||(e.cssText=this.textarea.style.cssText),void 0==e.useTextareaForIME&&(e.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(s.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):e.markerId=this.session.addMarker(e.markerRange,"ace_composition_marker","text")},e.prototype.setCompositionText=function(e){var t=this.session.selection.cursor;this.addToken(e,"composition_placeholder",t.row,t.column),this.$moveTextAreaToCursor()},e.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),s.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var e=this.session.selection.cursor;this.removeExtraToken(e.row,e.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},e.prototype.setGhostText=function(e,t){var n=this.session.selection.cursor,i=t||{row:n.row,column:n.column};this.removeGhostText();var s=e.split("\n");if(this.addToken(s[0],"ghost_text",i.row,i.column),this.$ghostText={text:e,position:{row:i.row,column:i.column}},s.length>1){this.$ghostTextWidget={text:s.slice(1).join("\n"),row:i.row,column:i.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var r=this.$cursorLayer.getPixelPosition(i,!0),o=this.container.getBoundingClientRect().height,a=s.length*this.lineHeight;if(a<o-r.top)return;a<o?this.scrollBy(0,(s.length-1)*this.lineHeight):this.scrollBy(0,r.top)}},e.prototype.removeGhostText=function(){if(this.$ghostText){var e=this.$ghostText.position;this.removeExtraToken(e.row,e.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},e.prototype.addToken=function(e,t,n,i){var s=this.session;s.bgTokenizer.lines[n]=null;var r={type:t,value:e},o=s.getTokens(n);if(null!=i&&o.length)for(var a=0,l=0;l<o.length;l++){var c=o[l];if(i<=(a+=c.value.length)){var u=c.value.length-(a-i),h=c.value.slice(0,u),d=c.value.slice(u);o.splice(l,1,{type:c.type,value:h},r,{type:c.type,value:d});break}}else o.push(r);this.updateLines(n,n)},e.prototype.removeExtraToken=function(e,t){this.session.bgTokenizer.lines[e]=null,this.updateLines(e,e)},e.prototype.setTheme=function(e,t){var n=this;if(this.$themeId=e,n._dispatchEvent("themeChange",{theme:e}),e&&"string"!=typeof e)r(e);else{var i=e||this.$options.theme.initialValue;o.loadModule(["theme",i],r)}function r(i){if(n.$themeId!=e)return t&&t();if(!i||!i.cssClass)throw new Error("couldn't load module "+e+" or it didn't call define");i.$id&&(n.$themeId=i.$id),s.importCssString(i.cssText,i.cssClass,n.container),n.theme&&s.removeCssClass(n.container,n.theme.cssClass);var r="padding"in i?i.padding:"padding"in(n.theme||{})?4:n.$padding;n.$padding&&r!=n.$padding&&n.setPadding(r),n.$theme=i.cssClass,n.theme=i,s.addCssClass(n.container,i.cssClass),s.setCssClass(n.container,"ace_dark",i.isDark),n.$size&&(n.$size.width=0,n.$updateSizeAsync()),n._dispatchEvent("themeLoaded",{theme:i}),t&&t()}},e.prototype.getTheme=function(){return this.$themeId},e.prototype.setStyle=function(e,t){s.setCssClass(this.container,e,!1!==t)},e.prototype.unsetStyle=function(e){s.removeCssClass(this.container,e)},e.prototype.setCursorStyle=function(e){s.setStyle(this.scroller.style,"cursor",e)},e.prototype.setMouseCursor=function(e){s.setStyle(this.scroller.style,"cursor",e)},e.prototype.attachToShadowRoot=function(){s.importCssString(_,"ace_editor.css",this.container)},e.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},e.prototype.$updateCustomScrollbar=function(e){var t=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,!0===e?(this.scrollBarV=new g(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",(function(e){t.$scrollAnimation||t.session.setScrollTop(e.data-t.scrollMargin.top)})),this.scrollBarH.addEventListener("scroll",(function(e){t.$scrollAnimation||t.session.setScrollLeft(e.data-t.scrollMargin.left)})),this.$scrollDecorator=new v(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new d(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.addEventListener("scroll",(function(e){t.$scrollAnimation||t.session.setScrollTop(e.data-t.scrollMargin.top)})),this.scrollBarH.addEventListener("scroll",(function(e){t.$scrollAnimation||t.session.setScrollLeft(e.data-t.scrollMargin.left)})))},e.prototype.$addResizeObserver=function(){if(window.ResizeObserver&&!this.$resizeObserver){var e=this;this.$resizeTimer=r.delayedCall((function(){e.destroyed||e.onResize()}),50),this.$resizeObserver=new window.ResizeObserver((function(t){var n=t[0].contentRect.width,i=t[0].contentRect.height;Math.abs(e.$size.width-n)>1||Math.abs(e.$size.height-i)>1?e.$resizeTimer.delay():e.$resizeTimer.cancel()})),this.$resizeObserver.observe(this.container)}},e}();S.prototype.CHANGE_CURSOR=1,S.prototype.CHANGE_MARKER=2,S.prototype.CHANGE_GUTTER=4,S.prototype.CHANGE_SCROLL=8,S.prototype.CHANGE_LINES=16,S.prototype.CHANGE_TEXT=32,S.prototype.CHANGE_SIZE=64,S.prototype.CHANGE_MARKER_BACK=128,S.prototype.CHANGE_MARKER_FRONT=256,S.prototype.CHANGE_FULL=512,S.prototype.CHANGE_H_SCROLL=1024,S.prototype.$changes=0,S.prototype.$padding=null,S.prototype.$frozen=!1,S.prototype.STEPS=8,i.implement(S.prototype,b),o.defineOptions(S.prototype,"renderer",{useResizeObserver:{set:function(e){!e&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):e&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(e){this.$gutterLayer.$useSvgGutterIcons=e},initialValue:!1},showFoldedAnnotations:{set:function(e){this.$gutterLayer.$showFoldedAnnotations=e},initialValue:!1},fadeFoldWidgets:{set:function(e){s.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(e){1==this.$textLayer.setHighlightIndentGuides(e)?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(e){this.$gutterLayer.setHighlightGutterLine(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(e){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(e){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(e){this.updateFull()}},minLines:{set:function(e){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(e){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(e){e=+e||0,this.$scrollPastEnd!=e&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(e){this.$updateCustomScrollbar(e)},initialValue:!1},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!y.isMobile&&!y.isIE}}),t.VirtualRenderer=S})),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],(function(e,t,n){"use strict";var i=e("../lib/oop"),s=e("../lib/net"),r=e("../lib/event_emitter").EventEmitter,o=e("../config");function a(e){if("undefined"==typeof Worker)return{postMessage:function(){},terminate:function(){}};if(o.get("loadWorkerFromBlob")){var t=function(e){var t="importScripts('"+s.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(i){var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return n.append(t),n.getBlob("application/javascript")}}(e),n=(window.URL||window.webkitURL).createObjectURL(t);return new Worker(n)}return new Worker(e)}var l=function(e){e.postMessage||(e=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=e,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){i.implement(this,r),this.$createWorkerFromOldConfig=function(t,n,i,s,r){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),o.get("packaged")||!e.toUrl)s=s||o.moduleUrl(n,"worker");else{var l=this.$normalizePath;s=s||l(e.toUrl("ace/worker/worker.js",null,"_"));var c={};t.forEach((function(t){c[t]=l(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))}))}return this.$worker=a(s),r&&this.send("importScripts",r),this.$worker.postMessage({init:!0,tlns:c,module:n,classname:i}),this.$worker},this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var n=this.callbacks[t.id];n&&(n(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return s.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(e){e.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,n){if(n){var i=this.callbackId++;this.callbacks[i]=n,t.push(i)}this.send(e,t)},this.emit=function(e,t){try{t.data&&t.data.err&&(t.data.err={message:t.data.err.message,stack:t.data.err.stack,code:t.data.err.code}),this.$worker&&this.$worker.postMessage({event:e,data:{data:t.data}})}catch(n){console.error(n.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener,!0)},this.changeListener=function(e){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),"insert"==e.action?this.deltaQueue.push(e.start,e.lines):this.deltaQueue.push(e.start,e.end)},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>50&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))}}).call(l.prototype);t.UIWorkerClient=function(e,t,n){var i=null,s=!1,a=Object.create(r),c=[],u=new l({messageBuffer:c,terminate:function(){},postMessage:function(e){c.push(e),i&&(s?setTimeout(h):h())}});u.setEmitSync=function(e){s=e};var h=function(){var e=c.shift();e.command?i[e.command].apply(i,e.args):e.event&&a._signal(e.event,e.data)};return a.postMessage=function(e){u.onMessage({data:e})},a.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},a.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},o.loadModule(["worker",t],(function(e){for(i=new e[n](a);c.length;)h()})),u},t.WorkerClient=l,t.createWorker=a})),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],(function(e,t,n){"use strict";var i=e("./range").Range,s=e("./lib/event_emitter").EventEmitter,r=e("./lib/oop"),o=function(){function e(e,t,n,i,s,r){var o=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=s,this.othersClass=r,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=i,this.$onCursorChange=function(){setTimeout((function(){o.onCursorChange()}))},this.$pos=n;var a=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)}return e.prototype.setup=function(){var e=this,t=this.doc,n=this.session;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var s=this.pos;s.$insertRight=!0,s.detach(),s.markerId=n.addMarker(new i(s.row,s.column,s.row,s.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach((function(n){var i=t.createAnchor(n.row,n.column);i.$insertRight=!0,i.detach(),e.others.push(i)})),n.setUndoSelect(!1)},e.prototype.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach((function(n){n.markerId=e.addMarker(new i(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1)}))}},e.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},e.prototype.onUpdate=function(e){if(this.$updating)return this.updateAnchors(e);var t=e;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var n="insert"===e.action?t.end.column-t.start.column:t.start.column-t.end.column,s=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,r=t.start.column-this.pos.column;if(this.updateAnchors(e),s&&(this.length+=n),s&&!this.session.$fromUndo)if("insert"===e.action)for(var o=this.others.length-1;o>=0;o--){var a={row:(l=this.others[o]).row,column:l.column+r};this.doc.insertMergedLines(a,e.lines)}else if("remove"===e.action)for(o=this.others.length-1;o>=0;o--){var l;a={row:(l=this.others[o]).row,column:l.column+r};this.doc.remove(new i(a.row,a.column,a.row,a.column-n))}this.$updating=!1,this.updateMarkers()}},e.prototype.updateAnchors=function(e){this.pos.onChange(e);for(var t=this.others.length;t--;)this.others[t].onChange(e);this.updateMarkers()},e.prototype.updateMarkers=function(){if(!this.$updating){var e=this,t=this.session,n=function(n,s){t.removeMarker(n.markerId),n.markerId=t.addMarker(new i(n.row,n.column,n.row,n.column+e.length),s,null,!1)};n(this.pos,this.mainClass);for(var s=this.others.length;s--;)n(this.others[s],this.othersClass)}},e.prototype.onCursorChange=function(e){if(!this.$updating&&this.session){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},e.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},e.prototype.cancel=function(){if(-1!==this.$undoStackDepth){for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,n=0;n<t;n++)e.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},e}();r.implement(o.prototype,s),t.PlaceHolder=o})),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],(function(e,t,n){var i=e("../lib/event"),s=e("../lib/useragent");function r(e,t){return e.row==t.row&&e.column==t.column}t.onMouseDown=function(e){var t=e.domEvent,n=t.altKey,o=t.shiftKey,a=t.ctrlKey,l=e.getAccelKey(),c=e.getButton();if(a&&s.isMac&&(c=t.button),e.editor.inMultiSelectMode&&2==c)e.editor.textInput.onContextMenu(e.domEvent);else if(a||n||l){if(0===c){var u,h=e.editor,d=h.selection,f=h.inMultiSelectMode,g=e.getDocumentPosition(),p=d.getCursor(),m=e.inSelection()||d.isEmpty()&&r(g,p),b=e.x,_=e.y,v=h.session,y=h.renderer.pixelToScreenCoordinates(b,_),S=y;if(h.$mouseHandler.$enableJumpToDef)a&&n||l&&n?u=o?"block":"add":n&&h.$blockSelectEnabled&&(u="block");else if(l&&!n){if(u="add",!f&&o)return}else n&&h.$blockSelectEnabled&&(u="block");if(u&&s.isMac&&t.ctrlKey&&h.$mouseHandler.cancelContextMenu(),"add"==u){if(!f&&m)return;if(!f){var w=d.toOrientedRange();h.addSelectionMarker(w)}var k=d.rangeList.rangeAtPoint(g);h.inVirtualSelectionMode=!0,o&&(k=null,w=d.ranges[0]||w,h.removeSelectionMarker(w)),h.once("mouseup",(function(){var e=d.toOrientedRange();k&&e.isEmpty()&&r(k.cursor,e.cursor)?d.substractPoint(e.cursor):(o?d.substractPoint(w.cursor):w&&(h.removeSelectionMarker(w),d.addRange(w)),d.addRange(e)),h.inVirtualSelectionMode=!1}))}else if("block"==u){var C;e.stop(),h.inVirtualSelectionMode=!0;var x=[],E=function(){var e=h.renderer.pixelToScreenCoordinates(b,_),t=v.screenToDocumentPosition(e.row,e.column,e.offsetX);r(S,e)&&r(t,d.lead)||(S=e,h.selection.moveToPosition(t),h.renderer.scrollCursorIntoView(),h.removeSelectionMarkers(x),x=d.rectangularRangeBlock(S,y),h.$mouseHandler.$clickSelection&&1==x.length&&x[0].isEmpty()&&(x[0]=h.$mouseHandler.$clickSelection.clone()),x.forEach(h.addSelectionMarker,h),h.updateSelectionMarkers())};f&&!l?d.toSingleRange():!f&&l&&(C=d.toOrientedRange(),h.addSelectionMarker(C)),o?y=v.documentToScreenPosition(d.lead):d.moveToPosition(g),S={row:-1,column:-1};var L=E;i.capture(h.container,(function(e){b=e.clientX,_=e.clientY}),(function(e){E(),clearInterval(D),h.removeSelectionMarkers(x),x.length||(x=[d.toOrientedRange()]),C&&(h.removeSelectionMarker(C),d.toSingleRange(C));for(var t=0;t<x.length;t++)d.addRange(x[t]);h.inVirtualSelectionMode=!1,h.$mouseHandler.$clickSelection=null}));var D=setInterval((function(){L()}),20);return e.preventDefault()}}}else 0===c&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode()}})),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],(function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(e){e.multiSelect.rangeCount>1?e.multiSelect.joinSelections():e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(e){e.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var i=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new i(t.multiSelectCommands)})),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],(function(e,t,n){var i=e("./range_list").RangeList,s=e("./range").Range,r=e("./selection").Selection,o=e("./mouse/multi_select_handler").onMouseDown,a=e("./lib/event"),l=e("./lib/lang"),c=e("./commands/multi_select_commands");t.commands=c.defaultCommands.concat(c.multiSelectCommands);var u=new(0,e("./search").Search);var h=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(h.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var n=this.toOrientedRange();if(this.rangeList.add(n),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(n),this.$onAddRange(n)}e.cursor||(e.cursor=e.end);var i=this.rangeList.add(e);return this.$onAddRange(e),i.length&&this.$onRemoveRange(i),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length&&this.$onRemoveRange(e)},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var n=e.length;n--;){var i=this.ranges.indexOf(e[n]);this.ranges.splice(i,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(t=t||this.ranges[0])&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new i,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var e=this.ranges.length?this.ranges:[this.getRange()],t=[],n=0;n<e.length;n++){var i=e[n],r=i.start.row,o=i.end.row;if(r===o)t.push(i.clone());else{for(t.push(new s(r,i.start.column,r,this.session.getLine(r).length));++r<o;)t.push(this.getLineRange(r,!0));t.push(new s(o,0,o,i.end.column))}0!=n||this.isBackwards()||(t=t.reverse())}this.toSingleRange();for(n=t.length;n--;)this.addRange(t[n])},this.joinSelections=function(){var e=this.rangeList.ranges,t=e[e.length-1],n=s.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],n=s.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(n,t.cursor==t.start)}else{var i=this.session.documentToScreenPosition(this.cursor),r=this.session.documentToScreenPosition(this.anchor);this.rectangularRangeBlock(i,r).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,n){var i=[],r=e.column<t.column;if(r)var o=e.column,a=t.column,l=e.offsetX,c=t.offsetX;else o=t.column,a=e.column,l=t.offsetX,c=e.offsetX;var u,h,d,f=e.row<t.row;if(f)var g=e.row,p=t.row;else g=t.row,p=e.row;o<0&&(o=0),g<0&&(g=0),g==p&&(n=!0);for(var m=g;m<=p;m++){var b=s.fromPoints(this.session.screenToDocumentPosition(m,o,l),this.session.screenToDocumentPosition(m,a,c));if(b.isEmpty()){if(u&&(h=b.end,d=u,h.row==d.row&&h.column==d.column))break;u=b.end}b.cursor=r?b.start:b.end,i.push(b)}if(f&&i.reverse(),!n){for(var _=i.length-1;i[_].isEmpty()&&_>0;)_--;if(_>0)for(var v=0;i[v].isEmpty();)v++;for(var y=_;y>=v;y--)i[y].isEmpty()&&i.splice(y,1)}return i}}.call(r.prototype);var d=e("./editor").Editor;function f(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",o),e.commands.addCommands(c.defaultCommands),function(e){if(!e.textInput)return;var t=e.textInput.getElement(),n=!1;function i(t){n&&(e.renderer.setMouseCursor(""),n=!1)}a.addListener(t,"keydown",(function(t){var s=18==t.keyCode&&!(t.ctrlKey||t.shiftKey||t.metaKey);e.$blockSelectEnabled&&s?n||(e.renderer.setMouseCursor("crosshair"),n=!0):n&&i()}),e),a.addListener(t,"keyup",i,e),a.addListener(t,"blur",i,e)}(e))}(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,n=e.length;n--;){var i=e[n];if(i.marker){this.session.removeMarker(i.marker);var s=t.indexOf(i);-1!=s&&t.splice(s,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(e){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(c.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(e){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(c.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t=e.command,n=e.editor;if(n.multiSelect){if(t.multiSelectAction)"forEach"==t.multiSelectAction?i=n.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?i=n.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(n.exitMultiSelectMode(),i=t.exec(n,e.args||{})):i=t.multiSelectAction(n,e.args||{});else{var i=t.exec(n,e.args||{});n.multiSelect.addRange(n.multiSelect.toOrientedRange()),n.multiSelect.mergeOverlappingRanges()}return i}},this.forEachSelection=function(e,t,n){if(!this.inVirtualSelectionMode){var i,s=n&&n.keepOrder,o=1==n||n&&n.$byLines,a=this.session,l=this.selection,c=l.rangeList,u=(s?l:c).ranges;if(!u.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var h=l._eventRegistry;l._eventRegistry={};var d=new r(a);this.inVirtualSelectionMode=!0;for(var f=u.length;f--;){if(o)for(;f>0&&u[f].start.row==u[f-1].end.row;)f--;d.fromOrientedRange(u[f]),d.index=f,this.selection=a.selection=d;var g=e.exec?e.exec(this,t||{}):e(this,t||{});i||void 0===g||(i=g),d.toOrientedRange(u[f])}d.detach(),this.selection=a.selection=l,this.inVirtualSelectionMode=!1,l._eventRegistry=h,l.mergeOverlappingRanges(),l.ranges[0]&&l.fromOrientedRange(l.ranges[0]);var p=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),p&&p.from==p.to&&this.renderer.animateScrolling(p.from),i}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,n=[],i=0;i<t.length;i++)n.push(this.session.getTextRange(t[i]));var s=this.session.getDocument().getNewLineCharacter();(e=n.join(s)).length==(n.length-1)*s.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var n=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;var i=t==this.multiSelect.anchor?n.cursor==n.start?n.end:n.start:n.cursor;i.row!=t.row||this.session.$clipPositionToDocument(i.row,i.column).column!=t.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(e,t,n){if((t=t||{}).needle=e||t.needle,void 0==t.needle){var i=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(i)}this.$search.set(t);var s=this.$search.findAll(this.session);if(!s.length)return 0;var r=this.multiSelect;n||r.toSingleRange(s[0]);for(var o=s.length;o--;)r.addRange(s[o],!0);return i&&r.rangeList.rangeAtPoint(i.start)&&r.addRange(i,!0),s.length},this.selectMoreLines=function(e,t){var n=this.selection.toOrientedRange(),i=n.cursor==n.end,r=this.session.documentToScreenPosition(n.cursor);this.selection.$desiredColumn&&(r.column=this.selection.$desiredColumn);var o,a=this.session.screenToDocumentPosition(r.row+e,r.column);if(n.isEmpty())c=a;else var l=this.session.documentToScreenPosition(i?n.end:n.start),c=this.session.screenToDocumentPosition(l.row+e,l.column);i?(o=s.fromPoints(a,c)).cursor=o.start:(o=s.fromPoints(c,a)).cursor=o.end;if(o.desiredColumn=r.column,this.selection.inMultiSelectMode){if(t)var u=n.cursor}else this.selection.addRange(n);this.selection.addRange(o),u&&this.selection.substractPoint(u)},this.transposeSelections=function(e){for(var t=this.session,n=t.multiSelect,i=n.ranges,s=i.length;s--;){if((a=i[s]).isEmpty()){var r=t.getWordRange(a.start.row,a.start.column);a.start.row=r.start.row,a.start.column=r.start.column,a.end.row=r.end.row,a.end.column=r.end.column}}n.mergeOverlappingRanges();var o=[];for(s=i.length;s--;){var a=i[s];o.unshift(t.getTextRange(a))}e<0?o.unshift(o.pop()):o.push(o.shift());for(s=i.length;s--;){var l=(a=i[s]).clone();t.replace(a,o[s]),a.start.row=l.start.row,a.start.column=l.start.column}n.fromOrientedRange(n.ranges[0])},this.selectMore=function(e,t,n){var i=this.session,s=i.multiSelect.toOrientedRange();if(!s.isEmpty()||((s=i.getWordRange(s.start.row,s.start.column)).cursor=-1==e?s.start:s.end,this.multiSelect.addRange(s),!n)){var r=i.getTextRange(s),o=function(e,t,n){return u.$options.wrap=!0,u.$options.needle=t,u.$options.backwards=-1==n,u.find(e)}(i,r,e);o&&(o.cursor=-1==e?o.start:o.end,this.session.unfold(o),this.multiSelect.addRange(o),this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(s.cursor)}},this.alignCursors=function(){var e=this.session,t=e.multiSelect,n=t.ranges,i=-1,r=n.filter((function(e){if(e.cursor.row==i)return!0;i=e.cursor.row}));if(n.length&&r.length!=n.length-1){r.forEach((function(e){t.substractPoint(e.cursor)}));var o=0,a=1/0,c=n.map((function(t){var n=t.cursor,i=e.getLine(n.row).substr(n.column).search(/\S/g);return-1==i&&(i=0),n.column>o&&(o=n.column),i<a&&(a=i),i}));n.forEach((function(t,n){var i=t.cursor,r=o-i.column,u=c[n]-a;r>u?e.insert(i,l.stringRepeat(" ",r-u)):e.remove(new s(i.row,i.column,i.row,i.column-r+u)),t.start.column=t.end.column=o,t.start.row=t.end.row=i.row,t.cursor=t.end})),t.fromOrientedRange(n[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var u=this.selection.getRange(),h=u.start.row,d=u.end.row,f=h==d;if(f){var g,p=this.session.getLength();do{g=this.session.getLine(d)}while(/[=:]/.test(g)&&++d<p);do{g=this.session.getLine(h)}while(/[=:]/.test(g)&&--h>0);h<0&&(h=0),d>=p&&(d=p-1)}var m=this.session.removeFullLines(h,d);m=this.$reAlignText(m,f),this.session.insert({row:h,column:0},m.join("\n")+"\n"),f||(u.start.column=0,u.end.column=m[m.length-1].length),this.selection.setRange(u)}},this.$reAlignText=function(e,t){var n,i,s,r=!0,o=!0;return e.map((function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==n?(n=t[1].length,i=t[2].length,s=t[3].length,t):(n+i+s!=t[1].length+t[2].length+t[3].length&&(o=!1),n!=t[1].length&&(r=!1),n>t[1].length&&(n=t[1].length),i<t[2].length&&(i=t[2].length),s>t[3].length&&(s=t[3].length),t):[e]})).map(t?c:r?o?function(e){return e[2]?a(n+i-e[2].length)+e[2]+a(s)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}:c:function(e){return e[2]?a(n)+e[2]+a(s)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]});function a(e){return l.stringRepeat(" ",e)}function c(e){return e[2]?a(n)+e[2]+a(i-e[2].length+s)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}}}).call(d.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var n=e.oldSession;n&&(n.multiSelect.off("addRange",this.$onAddRange),n.multiSelect.off("removeRange",this.$onRemoveRange),n.multiSelect.off("multiSelect",this.$onMultiSelect),n.multiSelect.off("singleSelect",this.$onSingleSelect),n.multiSelect.lead.off("change",this.$checkMultiselectChange),n.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=f,e("./config").defineOptions(d.prototype,"editor",{enableMultiselect:{set:function(e){f(this),e?this.on("mousedown",o):this.off("mousedown",o)},value:!0},enableBlockSelect:{set:function(e){this.$blockSelectEnabled=e},value:!0}})})),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],(function(e,t,n){"use strict";var i=e("../../range").Range,s=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,n){var i=e.getLine(n);return this.foldingStartMarker.test(i)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(e,t,n){return null},this.indentationBlock=function(e,t,n){var s=/\S/,r=e.getLine(t),o=r.search(s);if(-1!=o){for(var a=n||r.length,l=e.getLength(),c=t,u=t;++t<l;){var h=e.getLine(t).search(s);if(-1!=h){if(h<=o){var d=e.getTokenAt(t,0);if(!d||"string"!==d.type)break}u=t}}if(u>c){var f=e.getLine(u).length;return new i(c,a,u,f)}}},this.openingBracketBlock=function(e,t,n,s,r){var o={row:n,column:s+1},a=e.$findClosingBracket(t,o,r);if(a){var l=e.foldWidgets[a.row];return null==l&&(l=e.getFoldWidget(a.row)),"start"==l&&a.row>o.row&&(a.row--,a.column=e.getLine(a.row).length),i.fromPoints(o,a)}},this.closingBracketBlock=function(e,t,n,s,r){var o={row:n,column:s},a=e.$findOpeningBracket(t,o);if(a)return a.column++,o.column--,i.fromPoints(a,o)}}).call(s.prototype)})),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],(function(e,t,n){"use strict";var i=e("../line_widgets").LineWidgets,s=e("../lib/dom"),r=e("../range").Range,o=e("../config").nls;t.showErrorMarker=function(e,t){var n=e.session;n.widgetManager||(n.widgetManager=new i(n),n.widgetManager.attach(e));var a=e.getCursorPosition(),l=a.row,c=n.widgetManager.getWidgetsAtRow(l).filter((function(e){return"errorMarker"==e.type}))[0];c?c.destroy():l-=t;var u,h=function(e,t,n){var i=e.getAnnotations().sort(r.comparePoints);if(i.length){var s=function(e,t,n){for(var i=0,s=e.length-1;i<=s;){var r=i+s>>1,o=n(t,e[r]);if(o>0)i=r+1;else{if(!(o<0))return r;s=r-1}}return-(i+1)}(i,{row:t,column:-1},r.comparePoints);s<0&&(s=-s-1),s>=i.length?s=n>0?0:i.length-1:0===s&&n<0&&(s=i.length-1);var o=i[s];if(o&&n){if(o.row===t){do{o=i[s+=n]}while(o&&o.row===t);if(!o)return i.slice()}var a=[];t=o.row;do{a[n<0?"unshift":"push"](o),o=i[s+=n]}while(o&&o.row==t);return a.length&&a}}}(n,l,t);if(h){var d=h[0];a.column=(d.pos&&"number"!=typeof d.column?d.pos.sc:d.column)||0,a.row=d.row,u=e.renderer.$gutterLayer.$annotations[a.row]}else{if(c)return;u={text:[o("Looks good!")],className:"ace_ok"}}e.session.unfold(a.row),e.selection.moveToPosition(a);var f={row:a.row,fixedWidth:!0,coverGutter:!0,el:s.createElement("div"),type:"errorMarker"},g=f.el.appendChild(s.createElement("div")),p=f.el.appendChild(s.createElement("div"));p.className="error_widget_arrow "+u.className;var m=e.renderer.$cursorLayer.getPixelPosition(a).left;p.style.left=m+e.renderer.gutterWidth-5+"px",f.el.className="error_widget_wrapper",g.className="error_widget "+u.className,g.innerHTML=u.text.join("<br>"),g.appendChild(s.createElement("div"));var b=function(e,t,n){if(0===t&&("esc"===n||"return"===n))return f.destroy(),{command:"null"}};f.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(b),n.widgetManager.removeLineWidget(f),e.off("changeSelection",f.destroy),e.off("changeSession",f.destroy),e.off("mouseup",f.destroy),e.off("change",f.destroy))},e.keyBinding.addKeyboardHandler(b),e.on("changeSelection",f.destroy),e.on("changeSession",f.destroy),e.on("mouseup",f.destroy),e.on("change",f.destroy),e.session.widgetManager.addLineWidget(f),f.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:f.el.offsetHeight})},s.importCssString("\n    .error_widget_wrapper {\n        background: inherit;\n        color: inherit;\n        border:none\n    }\n    .error_widget {\n        border-top: solid 2px;\n        border-bottom: solid 2px;\n        margin: 5px 0;\n        padding: 10px 40px;\n        white-space: pre-wrap;\n    }\n    .error_widget.ace_error, .error_widget_arrow.ace_error{\n        border-color: #ff5a5a\n    }\n    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\n        border-color: #F1D817\n    }\n    .error_widget.ace_info, .error_widget_arrow.ace_info{\n        border-color: #5a5a5a\n    }\n    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\n        border-color: #5aaa5a\n    }\n    .error_widget_arrow {\n        position: absolute;\n        border: solid 5px;\n        border-top-color: transparent!important;\n        border-right-color: transparent!important;\n        border-left-color: transparent!important;\n        top: -5px;\n    }\n","error_marker.css",!1)})),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],(function(e,t,n){"use strict";e("./loader_build")(t);var i=e("./lib/dom"),s=e("./range").Range,r=e("./editor").Editor,o=e("./edit_session").EditSession,a=e("./undomanager").UndoManager,l=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(e,n){if("string"==typeof e){var s=e;if(!(e=document.getElementById(s)))throw new Error("ace.edit can't find div #"+s)}if(e&&e.env&&e.env.editor instanceof r)return e.env.editor;var o="";if(e&&/input|textarea/i.test(e.tagName)){var a=e;o=a.value,e=i.createElement("pre"),a.parentNode.replaceChild(e,a)}else e&&(o=e.textContent,e.innerHTML="");var c=t.createEditSession(o),u=new r(new l(e),c,n),h={document:c,editor:u,onResize:u.resize.bind(u,null)};return a&&(h.textarea=a),u.on("destroy",(function(){h.editor.container.env=null})),u.container.env=u.env=h,u},t.createEditSession=function(e,t){var n=new o(e,t);return n.setUndoManager(new a),n},t.Range=s,t.Editor=r,t.EditSession=o,t.UndoManager=a,t.VirtualRenderer=l,t.version=t.config.version})),ace.require(["ace/ace"],(function(t){t&&(t.config.init(!0),t.define=ace.define);var n=function(){return this}();for(var i in n||"undefined"==typeof window||(n=window),n||"undefined"==typeof self||(n=self),n.ace||(n.ace=t),t)t.hasOwnProperty(i)&&(n.ace[i]=t[i]);n.ace.default=n.ace,e&&(e.exports=n.ace)}))},878:(e,t,n)=>{e=n.nmd(e),ace.define("ace/split",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/editor","ace/virtual_renderer","ace/edit_session"],(function(e,t,n){"use strict";var i,s=e("./lib/oop"),r=(e("./lib/lang"),e("./lib/event_emitter").EventEmitter),o=e("./editor").Editor,a=e("./virtual_renderer").VirtualRenderer,l=e("./edit_session").EditSession;(function(){s.implement(this,r),this.$createEditor=function(){var e=document.createElement("div");e.className=this.$editorCSS,e.style.cssText="position: absolute; top:0px; bottom:0px",this.$container.appendChild(e);var t=new o(new a(e,this.$theme));return t.on("focus",function(){this._emit("focus",t)}.bind(this)),this.$editors.push(t),t.setFontSize(this.$fontSize),t},this.setSplits=function(e){var t;if(e<1)throw"The number of splits have to be > 0!";if(e!=this.$splits){if(e>this.$splits){for(;this.$splits<this.$editors.length&&this.$splits<e;)t=this.$editors[this.$splits],this.$container.appendChild(t.container),t.setFontSize(this.$fontSize),this.$splits++;for(;this.$splits<e;)this.$createEditor(),this.$splits++}else for(;this.$splits>e;)t=this.$editors[this.$splits-1],this.$container.removeChild(t.container),this.$splits--;this.resize()}},this.getSplits=function(){return this.$splits},this.getEditor=function(e){return this.$editors[e]},this.getCurrentEditor=function(){return this.$cEditor},this.focus=function(){this.$cEditor.focus()},this.blur=function(){this.$cEditor.blur()},this.setTheme=function(e){this.$editors.forEach((function(t){t.setTheme(e)}))},this.setKeyboardHandler=function(e){this.$editors.forEach((function(t){t.setKeyboardHandler(e)}))},this.forEach=function(e,t){this.$editors.forEach(e,t)},this.$fontSize="",this.setFontSize=function(e){this.$fontSize=e,this.forEach((function(t){t.setFontSize(e)}))},this.$cloneSession=function(e){var t=new l(e.getDocument(),e.getMode()),n=e.getUndoManager();return t.setUndoManager(n),t.setTabSize(e.getTabSize()),t.setUseSoftTabs(e.getUseSoftTabs()),t.setOverwrite(e.getOverwrite()),t.setBreakpoints(e.getBreakpoints()),t.setUseWrapMode(e.getUseWrapMode()),t.setUseWorker(e.getUseWorker()),t.setWrapLimitRange(e.$wrapLimitRange.min,e.$wrapLimitRange.max),t.$foldData=e.$cloneFoldData(),t},this.setSession=function(e,t){var n;n=null==t?this.$cEditor:this.$editors[t];var i=this.$editors.some((function(t){return t.session===e}));return i&&(e=this.$cloneSession(e)),n.setSession(e),e},this.getOrientation=function(){return this.$orientation},this.setOrientation=function(e){this.$orientation!=e&&(this.$orientation=e,this.resize())},this.resize=function(){var e,t=this.$container.clientWidth,n=this.$container.clientHeight;if(this.$orientation==this.BESIDE)for(var i=t/this.$splits,s=0;s<this.$splits;s++)(e=this.$editors[s]).container.style.width=i+"px",e.container.style.top="0px",e.container.style.left=s*i+"px",e.container.style.height=n+"px",e.resize();else{var r=n/this.$splits;for(s=0;s<this.$splits;s++)(e=this.$editors[s]).container.style.width=t+"px",e.container.style.top=s*r+"px",e.container.style.left="0px",e.container.style.height=r+"px",e.resize()}}}).call((i=function(e,t,n){this.BELOW=1,this.BESIDE=0,this.$container=e,this.$theme=t,this.$splits=0,this.$editorCSS="",this.$editors=[],this.$orientation=this.BESIDE,this.setSplits(n||1),this.$cEditor=this.$editors[0],this.on("focus",function(e){this.$cEditor=e}.bind(this))}).prototype),t.Split=i})),ace.define("ace/ext/split",["require","exports","module","ace/split"],(function(e,t,n){"use strict";n.exports=e("../split")})),ace.require(["ace/ext/split"],(function(t){e&&(e.exports=t)}))},960:(e,t,n)=>{e=n.nmd(e),ace.define("ace/mode/python_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){"use strict";var i=e("../lib/oop"),s=e("./text_highlight_rules").TextHighlightRules,r=function(){var e=this.createKeywordMapper({"invalid.deprecated":"debugger","support.function":"abs|divmod|input|open|staticmethod|all|enumerate|int|ord|str|any|eval|isinstance|pow|sum|basestring|execfile|issubclass|print|super|binfile|bin|iter|property|tuple|bool|filter|len|range|type|bytearray|float|list|raw_input|unichr|callable|format|locals|reduce|unicode|chr|frozenset|long|reload|vars|classmethod|getattr|map|repr|xrange|cmp|globals|max|reversed|zip|compile|hasattr|memoryview|round|__import__|complex|hash|min|apply|delattr|help|next|setattr|set|buffer|dict|hex|object|slice|coerce|dir|id|oct|sorted|intern|ascii|breakpoint|bytes","variable.language":"self|cls","constant.language":"True|False|None|NotImplemented|Ellipsis|__debug__",keyword:"and|as|assert|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|not|or|pass|print|raise|return|try|while|with|yield|async|await|nonlocal"},"identifier"),t="[uU]?",n="[rR]",i="[fF]",s="(?:[rR][fF]|[fF][rR])",r="(?:(?:(?:[1-9]\\d*)|(?:0))|(?:0[oO]?[0-7]+)|(?:0[xX][\\dA-Fa-f]+)|(?:0[bB][01]+))",o="(?:\\d+)",a="(?:(?:"+o+"?(?:\\.\\d+))|(?:"+o+"\\.))",l="(?:"+("(?:(?:"+a+"|"+o+")(?:[eE][+-]?\\d+))")+"|"+a+")",c="\\\\(x[0-9A-Fa-f]{2}|[0-7]{3}|[\\\\abfnrtv'\"]|U[0-9A-Fa-f]{8}|u[0-9A-Fa-f]{4})";this.$rules={start:[{token:"comment",regex:"#.*$"},{token:"string",regex:t+'"{3}',next:"qqstring3"},{token:"string",regex:t+'"(?=.)',next:"qqstring"},{token:"string",regex:t+"'{3}",next:"qstring3"},{token:"string",regex:t+"'(?=.)",next:"qstring"},{token:"string",regex:n+'"{3}',next:"rawqqstring3"},{token:"string",regex:n+'"(?=.)',next:"rawqqstring"},{token:"string",regex:n+"'{3}",next:"rawqstring3"},{token:"string",regex:n+"'(?=.)",next:"rawqstring"},{token:"string",regex:i+'"{3}',next:"fqqstring3"},{token:"string",regex:i+'"(?=.)',next:"fqqstring"},{token:"string",regex:i+"'{3}",next:"fqstring3"},{token:"string",regex:i+"'(?=.)",next:"fqstring"},{token:"string",regex:s+'"{3}',next:"rfqqstring3"},{token:"string",regex:s+'"(?=.)',next:"rfqqstring"},{token:"string",regex:s+"'{3}",next:"rfqstring3"},{token:"string",regex:s+"'(?=.)",next:"rfqstring"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|%|@|<<|>>|&|\\||\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"punctuation",regex:",|:|;|\\->|\\+=|\\-=|\\*=|\\/=|\\/\\/=|%=|@=|&=|\\|=|^=|>>=|<<=|\\*\\*="},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]\\)\\}]"},{token:["keyword","text","entity.name.function"],regex:"(def|class)(\\s+)([\\u00BF-\\u1FFF\\u2C00-\\uD7FF\\w]+)"},{token:"text",regex:"\\s+"},{include:"constants"}],qqstring3:[{token:"constant.language.escape",regex:c},{token:"string",regex:'"{3}',next:"start"},{defaultToken:"string"}],qstring3:[{token:"constant.language.escape",regex:c},{token:"string",regex:"'{3}",next:"start"},{defaultToken:"string"}],qqstring:[{token:"constant.language.escape",regex:c},{token:"string",regex:"\\\\$",next:"qqstring"},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:c},{token:"string",regex:"\\\\$",next:"qstring"},{token:"string",regex:"'|$",next:"start"},{defaultToken:"string"}],rawqqstring3:[{token:"string",regex:'"{3}',next:"start"},{defaultToken:"string"}],rawqstring3:[{token:"string",regex:"'{3}",next:"start"},{defaultToken:"string"}],rawqqstring:[{token:"string",regex:"\\\\$",next:"rawqqstring"},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],rawqstring:[{token:"string",regex:"\\\\$",next:"rawqstring"},{token:"string",regex:"'|$",next:"start"},{defaultToken:"string"}],fqqstring3:[{token:"constant.language.escape",regex:c},{token:"string",regex:'"{3}',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstring3:[{token:"constant.language.escape",regex:c},{token:"string",regex:"'{3}",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqqstring:[{token:"constant.language.escape",regex:c},{token:"string",regex:"\\\\$",next:"fqqstring"},{token:"string",regex:'"|$',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstring:[{token:"constant.language.escape",regex:c},{token:"string",regex:"'|$",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqqstring3:[{token:"string",regex:'"{3}',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqstring3:[{token:"string",regex:"'{3}",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqqstring:[{token:"string",regex:"\\\\$",next:"rfqqstring"},{token:"string",regex:'"|$',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqstring:[{token:"string",regex:"'|$",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstringParRules:[{token:"paren.lparen",regex:"[\\[\\(]"},{token:"paren.rparen",regex:"[\\]\\)]"},{token:"string",regex:"\\s+"},{token:"string",regex:"'[^']*'"},{token:"string",regex:'"[^"]*"'},{token:"function.support",regex:"(!s|!r|!a)"},{include:"constants"},{token:"paren.rparen",regex:"}",next:"pop"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"}],constants:[{token:"constant.numeric",regex:"(?:"+l+"|\\d+)[jJ]\\b"},{token:"constant.numeric",regex:l},{token:"constant.numeric",regex:r+"[lL]\\b"},{token:"constant.numeric",regex:r+"\\b"},{token:["punctuation","function.support"],regex:"(\\.)([a-zA-Z_]+)\\b"},{token:e,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"}]},this.normalizeRules()};i.inherits(r,s),t.PythonHighlightRules=r})),ace.define("ace/mode/folding/pythonic",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode"],(function(e,t,n){"use strict";var i=e("../../lib/oop"),s=e("./fold_mode").FoldMode,r=t.FoldMode=function(e){this.foldingStartMarker=new RegExp("([\\[{])(?:\\s*)$|("+e+")(?:\\s*)(?:#.*)?$")};i.inherits(r,s),function(){this.getFoldWidgetRange=function(e,t,n){var i=e.getLine(n).match(this.foldingStartMarker);if(i)return i[1]?this.openingBracketBlock(e,i[1],n,i.index):i[2]?this.indentationBlock(e,n,i.index+i[2].length):this.indentationBlock(e,n)}}.call(r.prototype)})),ace.define("ace/mode/python",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/python_highlight_rules","ace/mode/folding/pythonic","ace/range"],(function(e,t,n){"use strict";var i=e("../lib/oop"),s=e("./text").Mode,r=e("./python_highlight_rules").PythonHighlightRules,o=e("./folding/pythonic").FoldMode,a=e("../range").Range,l=function(){this.HighlightRules=r,this.foldingRules=new o("\\:"),this.$behaviour=this.$defaultBehaviour};i.inherits(l,s),function(){this.lineCommentStart="#",this.$pairQuotesAfter={"'":/[ruf]/i,'"':/[ruf]/i},this.getNextLineIndent=function(e,t,n){var i=this.$getIndent(t),s=this.getTokenizer().getLineTokens(t,e).tokens;if(s.length&&"comment"==s[s.length-1].type)return i;"start"==e&&(t.match(/^.*[\{\(\[:]\s*$/)&&(i+=n));return i};var e={pass:1,return:1,raise:1,break:1,continue:1};this.checkOutdent=function(t,n,i){if("\r\n"!==i&&"\r"!==i&&"\n"!==i)return!1;var s=this.getTokenizer().getLineTokens(n.trim(),t).tokens;if(!s)return!1;do{var r=s.pop()}while(r&&("comment"==r.type||"text"==r.type&&r.value.match(/^\s+$/)));return!!r&&("keyword"==r.type&&e[r.value])},this.autoOutdent=function(e,t,n){n+=1;var i=this.$getIndent(t.getLine(n)),s=t.getTabString();i.slice(-s.length)==s&&t.remove(new a(n,i.length-s.length,n,i.length))},this.$id="ace/mode/python",this.snippetFileId="ace/snippets/python"}.call(l.prototype),t.Mode=l})),ace.require(["ace/mode/python"],(function(t){e&&(e.exports=t)}))},576:(e,t,n)=>{e=n.nmd(e),ace.define("ace/mode/sql_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t,n){"use strict";var i=e("../lib/oop"),s=e("./text_highlight_rules").TextHighlightRules,r=function(){var e=this.createKeywordMapper({"support.function":"avg|count|first|last|max|min|sum|ucase|lcase|mid|len|round|rank|now|format|coalesce|ifnull|isnull|nvl",keyword:"select|insert|update|delete|from|where|and|or|group|by|order|limit|offset|having|as|case|when|then|else|end|type|left|right|join|on|outer|desc|asc|union|create|table|primary|key|if|foreign|not|references|default|null|inner|cross|natural|database|drop|grant|distinct|is|in|all|alter|any|array|at|authorization|between|both|cast|check|collate|column|commit|constraint|cube|current|current_date|current_time|current_timestamp|current_user|describe|escape|except|exists|external|extract|fetch|filter|for|full|function|global|grouping|intersect|interval|into|leading|like|local|no|of|only|out|overlaps|partition|position|range|revoke|rollback|rollup|row|rows|session_user|set|some|start|tablesample|time|to|trailing|truncate|unique|unknown|user|using|values|window|with","constant.language":"true|false","storage.type":"int|numeric|decimal|date|varchar|char|bigint|float|double|bit|binary|text|set|timestamp|money|real|number|integer|string"},"identifier",!0);this.$rules={start:[{token:"comment",regex:"--.*$"},{token:"comment",start:"/\\*",end:"\\*/"},{token:"string",regex:'".*?"'},{token:"string",regex:"'.*?'"},{token:"string",regex:"`.*?`"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:e,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\/|\\/\\/|%|<@>|@>|<@|&|\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"paren.lparen",regex:"[\\(]"},{token:"paren.rparen",regex:"[\\)]"},{token:"text",regex:"\\s+"}]},this.normalizeRules()};i.inherits(r,s),t.SqlHighlightRules=r})),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],(function(e,t,n){"use strict";var i=e("../../lib/oop"),s=e("../../range").Range,r=e("./fold_mode").FoldMode,o=t.FoldMode=function(e){e&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+e.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+e.end)))};i.inherits(o,r),function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(e,t,n){var i=e.getLine(n);if(this.singleLineBlockCommentRe.test(i)&&!this.startRegionRe.test(i)&&!this.tripleStarBlockCommentRe.test(i))return"";var s=this._getFoldWidgetBase(e,t,n);return!s&&this.startRegionRe.test(i)?"start":s},this.getFoldWidgetRange=function(e,t,n,i){var s,r=e.getLine(n);if(this.startRegionRe.test(r))return this.getCommentRegionBlock(e,r,n);if(s=r.match(this.foldingStartMarker)){var o=s.index;if(s[1])return this.openingBracketBlock(e,s[1],n,o);var a=e.getCommentFoldRange(n,o+s[0].length,1);return a&&!a.isMultiLine()&&(i?a=this.getSectionRange(e,n):"all"!=t&&(a=null)),a}if("markbegin"!==t&&(s=r.match(this.foldingStopMarker))){o=s.index+s[0].length;return s[1]?this.closingBracketBlock(e,s[1],n,o):e.getCommentFoldRange(n,o,-1)}},this.getSectionRange=function(e,t){for(var n=e.getLine(t),i=n.search(/\S/),r=t,o=n.length,a=t+=1,l=e.getLength();++t<l;){var c=(n=e.getLine(t)).search(/\S/);if(-1!==c){if(i>c)break;var u=this.getFoldWidgetRange(e,"all",t);if(u){if(u.start.row<=r)break;if(u.isMultiLine())t=u.end.row;else if(i==c)break}a=t}}return new s(r,o,a,e.getLine(a).length)},this.getCommentRegionBlock=function(e,t,n){for(var i=t.search(/\s*$/),r=e.getLength(),o=n,a=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,l=1;++n<r;){t=e.getLine(n);var c=a.exec(t);if(c&&(c[1]?l--:l++,!l))break}if(n>o)return new s(o,i,n,t.length)}}.call(o.prototype)})),ace.define("ace/mode/folding/sql",["require","exports","module","ace/lib/oop","ace/mode/folding/cstyle"],(function(e,t,n){"use strict";var i=e("../../lib/oop"),s=e("./cstyle").FoldMode,r=t.FoldMode=function(){};i.inherits(r,s),function(){}.call(r.prototype)})),ace.define("ace/mode/sql",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/sql_highlight_rules","ace/mode/folding/sql"],(function(e,t,n){"use strict";var i=e("../lib/oop"),s=e("./text").Mode,r=e("./sql_highlight_rules").SqlHighlightRules,o=e("./folding/sql").FoldMode,a=function(){this.HighlightRules=r,this.foldingRules=new o,this.$behaviour=this.$defaultBehaviour};i.inherits(a,s),function(){this.lineCommentStart="--",this.blockComment={start:"/*",end:"*/"},this.$id="ace/mode/sql",this.snippetFileId="ace/snippets/sql"}.call(a.prototype),t.Mode=a})),ace.require(["ace/mode/sql"],(function(t){e&&(e.exports=t)}))},698:(e,t,n)=>{e=n.nmd(e),ace.define("ace/theme/monokai-css",["require","exports","module"],(function(e,t,n){n.exports=".ace-monokai .ace_gutter {\n  background: #2F3129;\n  color: #8F908A\n}\n\n.ace-monokai .ace_print-margin {\n  width: 1px;\n  background: #555651\n}\n\n.ace-monokai {\n  background-color: #272822;\n  color: #F8F8F2\n}\n\n.ace-monokai .ace_cursor {\n  color: #F8F8F0\n}\n\n.ace-monokai .ace_marker-layer .ace_selection {\n  background: #49483E\n}\n\n.ace-monokai.ace_multiselect .ace_selection.ace_start {\n  box-shadow: 0 0 3px 0px #272822;\n}\n\n.ace-monokai .ace_marker-layer .ace_step {\n  background: rgb(102, 82, 0)\n}\n\n.ace-monokai .ace_marker-layer .ace_bracket {\n  margin: -1px 0 0 -1px;\n  border: 1px solid #49483E\n}\n\n.ace-monokai .ace_marker-layer .ace_active-line {\n  background: #202020\n}\n\n.ace-monokai .ace_gutter-active-line {\n  background-color: #272727\n}\n\n.ace-monokai .ace_marker-layer .ace_selected-word {\n  border: 1px solid #49483E\n}\n\n.ace-monokai .ace_invisible {\n  color: #52524d\n}\n\n.ace-monokai .ace_entity.ace_name.ace_tag,\n.ace-monokai .ace_keyword,\n.ace-monokai .ace_meta.ace_tag,\n.ace-monokai .ace_storage {\n  color: #F92672\n}\n\n.ace-monokai .ace_punctuation,\n.ace-monokai .ace_punctuation.ace_tag {\n  color: #fff\n}\n\n.ace-monokai .ace_constant.ace_character,\n.ace-monokai .ace_constant.ace_language,\n.ace-monokai .ace_constant.ace_numeric,\n.ace-monokai .ace_constant.ace_other {\n  color: #AE81FF\n}\n\n.ace-monokai .ace_invalid {\n  color: #F8F8F0;\n  background-color: #F92672\n}\n\n.ace-monokai .ace_invalid.ace_deprecated {\n  color: #F8F8F0;\n  background-color: #AE81FF\n}\n\n.ace-monokai .ace_support.ace_constant,\n.ace-monokai .ace_support.ace_function {\n  color: #66D9EF\n}\n\n.ace-monokai .ace_fold {\n  background-color: #A6E22E;\n  border-color: #F8F8F2\n}\n\n.ace-monokai .ace_storage.ace_type,\n.ace-monokai .ace_support.ace_class,\n.ace-monokai .ace_support.ace_type {\n  font-style: italic;\n  color: #66D9EF\n}\n\n.ace-monokai .ace_entity.ace_name.ace_function,\n.ace-monokai .ace_entity.ace_other,\n.ace-monokai .ace_entity.ace_other.ace_attribute-name,\n.ace-monokai .ace_variable {\n  color: #A6E22E\n}\n\n.ace-monokai .ace_variable.ace_parameter {\n  font-style: italic;\n  color: #FD971F\n}\n\n.ace-monokai .ace_string {\n  color: #E6DB74\n}\n\n.ace-monokai .ace_comment {\n  color: #75715E\n}\n\n.ace-monokai .ace_indent-guide {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y\n}\n\n.ace-monokai .ace_indent-guide-active {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQIW2PQ1dX9zzBz5sz/ABCcBFFentLlAAAAAElFTkSuQmCC) right repeat-y;\n}\n"})),ace.define("ace/theme/monokai",["require","exports","module","ace/theme/monokai-css","ace/lib/dom"],(function(e,t,n){t.isDark=!0,t.cssClass="ace-monokai",t.cssText=e("./monokai-css"),e("../lib/dom").importCssString(t.cssText,t.cssClass,!1)})),ace.require(["ace/theme/monokai"],(function(t){e&&(e.exports=t)}))},388:e=>{var t=function(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32},n=-1;t.Diff=function(e,t){return[e,t]},t.prototype.diff_main=function(e,n,i,s){"undefined"==typeof s&&(s=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var r=s;if(null==e||null==n)throw new Error("Null input. (diff_main)");if(e==n)return e?[new t.Diff(0,e)]:[];"undefined"==typeof i&&(i=!0);var o=i,a=this.diff_commonPrefix(e,n),l=e.substring(0,a);e=e.substring(a),n=n.substring(a),a=this.diff_commonSuffix(e,n);var c=e.substring(e.length-a);e=e.substring(0,e.length-a),n=n.substring(0,n.length-a);var u=this.diff_compute_(e,n,o,r);return l&&u.unshift(new t.Diff(0,l)),c&&u.push(new t.Diff(0,c)),this.diff_cleanupMerge(u),u},t.prototype.diff_compute_=function(e,i,s,r){var o;if(!e)return[new t.Diff(1,i)];if(!i)return[new t.Diff(n,e)];var a=e.length>i.length?e:i,l=e.length>i.length?i:e,c=a.indexOf(l);if(-1!=c)return o=[new t.Diff(1,a.substring(0,c)),new t.Diff(0,l),new t.Diff(1,a.substring(c+l.length))],e.length>i.length&&(o[0][0]=o[2][0]=n),o;if(1==l.length)return[new t.Diff(n,e),new t.Diff(1,i)];var u=this.diff_halfMatch_(e,i);if(u){var h=u[0],d=u[1],f=u[2],g=u[3],p=u[4],m=this.diff_main(h,f,s,r),b=this.diff_main(d,g,s,r);return m.concat([new t.Diff(0,p)],b)}return s&&e.length>100&&i.length>100?this.diff_lineMode_(e,i,r):this.diff_bisect_(e,i,r)},t.prototype.diff_lineMode_=function(e,i,s){var r=this.diff_linesToChars_(e,i);e=r.chars1,i=r.chars2;var o=r.lineArray,a=this.diff_main(e,i,!1,s);this.diff_charsToLines_(a,o),this.diff_cleanupSemantic(a),a.push(new t.Diff(0,""));for(var l=0,c=0,u=0,h="",d="";l<a.length;){switch(a[l][0]){case 1:u++,d+=a[l][1];break;case n:c++,h+=a[l][1];break;case 0:if(c>=1&&u>=1){a.splice(l-c-u,c+u),l=l-c-u;for(var f=this.diff_main(h,d,!1,s),g=f.length-1;g>=0;g--)a.splice(l,0,f[g]);l+=f.length}u=0,c=0,h="",d=""}l++}return a.pop(),a},t.prototype.diff_bisect_=function(e,i,s){for(var r=e.length,o=i.length,a=Math.ceil((r+o)/2),l=a,c=2*a,u=new Array(c),h=new Array(c),d=0;d<c;d++)u[d]=-1,h[d]=-1;u[l+1]=0,h[l+1]=0;for(var f=r-o,g=f%2!=0,p=0,m=0,b=0,_=0,v=0;v<a&&!((new Date).getTime()>s);v++){for(var y=-v+p;y<=v-m;y+=2){for(var S=l+y,w=(L=y==-v||y!=v&&u[S-1]<u[S+1]?u[S+1]:u[S-1]+1)-y;L<r&&w<o&&e.charAt(L)==i.charAt(w);)L++,w++;if(u[S]=L,L>r)m+=2;else if(w>o)p+=2;else if(g){if((x=l+f-y)>=0&&x<c&&-1!=h[x])if(L>=(C=r-h[x]))return this.diff_bisectSplit_(e,i,L,w,s)}}for(var k=-v+b;k<=v-_;k+=2){for(var C,x=l+k,E=(C=k==-v||k!=v&&h[x-1]<h[x+1]?h[x+1]:h[x-1]+1)-k;C<r&&E<o&&e.charAt(r-C-1)==i.charAt(o-E-1);)C++,E++;if(h[x]=C,C>r)_+=2;else if(E>o)b+=2;else if(!g){if((S=l+f-k)>=0&&S<c&&-1!=u[S]){var L;w=l+(L=u[S])-S;if(L>=(C=r-C))return this.diff_bisectSplit_(e,i,L,w,s)}}}}return[new t.Diff(n,e),new t.Diff(1,i)]},t.prototype.diff_bisectSplit_=function(e,t,n,i,s){var r=e.substring(0,n),o=t.substring(0,i),a=e.substring(n),l=t.substring(i),c=this.diff_main(r,o,!1,s),u=this.diff_main(a,l,!1,s);return c.concat(u)},t.prototype.diff_linesToChars_=function(e,t){var n=[],i={};function s(e){for(var t="",s=0,o=-1,a=n.length;o<e.length-1;){-1==(o=e.indexOf("\n",s))&&(o=e.length-1);var l=e.substring(s,o+1);(i.hasOwnProperty?i.hasOwnProperty(l):void 0!==i[l])?t+=String.fromCharCode(i[l]):(a==r&&(l=e.substring(s),o=e.length),t+=String.fromCharCode(a),i[l]=a,n[a++]=l),s=o+1}return t}n[0]="";var r=4e4,o=s(e);return r=65535,{chars1:o,chars2:s(t),lineArray:n}},t.prototype.diff_charsToLines_=function(e,t){for(var n=0;n<e.length;n++){for(var i=e[n][1],s=[],r=0;r<i.length;r++)s[r]=t[i.charCodeAt(r)];e[n][1]=s.join("")}},t.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,i=Math.min(e.length,t.length),s=i,r=0;n<s;)e.substring(r,s)==t.substring(r,s)?r=n=s:i=s,s=Math.floor((i-n)/2+n);return s},t.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,i=Math.min(e.length,t.length),s=i,r=0;n<s;)e.substring(e.length-s,e.length-r)==t.substring(t.length-s,t.length-r)?r=n=s:i=s,s=Math.floor((i-n)/2+n);return s},t.prototype.diff_commonOverlap_=function(e,t){var n=e.length,i=t.length;if(0==n||0==i)return 0;n>i?e=e.substring(n-i):n<i&&(t=t.substring(0,n));var s=Math.min(n,i);if(e==t)return s;for(var r=0,o=1;;){var a=e.substring(s-o),l=t.indexOf(a);if(-1==l)return r;o+=l,0!=l&&e.substring(s-o)!=t.substring(0,o)||(r=o,o++)}},t.prototype.diff_halfMatch_=function(e,t){if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,i=e.length>t.length?t:e;if(n.length<4||2*i.length<n.length)return null;var s=this;function r(e,t,n){for(var i,r,o,a,l=e.substring(n,n+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(l,c+1));){var h=s.diff_commonPrefix(e.substring(n),t.substring(c)),d=s.diff_commonSuffix(e.substring(0,n),t.substring(0,c));u.length<d+h&&(u=t.substring(c-d,c)+t.substring(c,c+h),i=e.substring(0,n-d),r=e.substring(n+h),o=t.substring(0,c-d),a=t.substring(c+h))}return 2*u.length>=e.length?[i,r,o,a,u]:null}var o,a,l,c,u,h=r(n,i,Math.ceil(n.length/4)),d=r(n,i,Math.ceil(n.length/2));return h||d?(o=d?h&&h[4].length>d[4].length?h:d:h,e.length>t.length?(a=o[0],l=o[1],c=o[2],u=o[3]):(c=o[0],u=o[1],a=o[2],l=o[3]),[a,l,c,u,o[4]]):null},t.prototype.diff_cleanupSemantic=function(e){for(var i=!1,s=[],r=0,o=null,a=0,l=0,c=0,u=0,h=0;a<e.length;)0==e[a][0]?(s[r++]=a,l=u,c=h,u=0,h=0,o=e[a][1]):(1==e[a][0]?u+=e[a][1].length:h+=e[a][1].length,o&&o.length<=Math.max(l,c)&&o.length<=Math.max(u,h)&&(e.splice(s[r-1],0,new t.Diff(n,o)),e[s[r-1]+1][0]=1,r--,a=--r>0?s[r-1]:-1,l=0,c=0,u=0,h=0,o=null,i=!0)),a++;for(i&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),a=1;a<e.length;){if(e[a-1][0]==n&&1==e[a][0]){var d=e[a-1][1],f=e[a][1],g=this.diff_commonOverlap_(d,f),p=this.diff_commonOverlap_(f,d);g>=p?(g>=d.length/2||g>=f.length/2)&&(e.splice(a,0,new t.Diff(0,f.substring(0,g))),e[a-1][1]=d.substring(0,d.length-g),e[a+1][1]=f.substring(g),a++):(p>=d.length/2||p>=f.length/2)&&(e.splice(a,0,new t.Diff(0,d.substring(0,p))),e[a-1][0]=1,e[a-1][1]=f.substring(0,f.length-p),e[a+1][0]=n,e[a+1][1]=d.substring(p),a++),a++}a++}},t.prototype.diff_cleanupSemanticLossless=function(e){function n(e,n){if(!e||!n)return 6;var i=e.charAt(e.length-1),s=n.charAt(0),r=i.match(t.nonAlphaNumericRegex_),o=s.match(t.nonAlphaNumericRegex_),a=r&&i.match(t.whitespaceRegex_),l=o&&s.match(t.whitespaceRegex_),c=a&&i.match(t.linebreakRegex_),u=l&&s.match(t.linebreakRegex_),h=c&&e.match(t.blanklineEndRegex_),d=u&&n.match(t.blanklineStartRegex_);return h||d?5:c||u?4:r&&!a&&l?3:a||l?2:r||o?1:0}for(var i=1;i<e.length-1;){if(0==e[i-1][0]&&0==e[i+1][0]){var s=e[i-1][1],r=e[i][1],o=e[i+1][1],a=this.diff_commonSuffix(s,r);if(a){var l=r.substring(r.length-a);s=s.substring(0,s.length-a),r=l+r.substring(0,r.length-a),o=l+o}for(var c=s,u=r,h=o,d=n(s,r)+n(r,o);r.charAt(0)===o.charAt(0);){s+=r.charAt(0),r=r.substring(1)+o.charAt(0),o=o.substring(1);var f=n(s,r)+n(r,o);f>=d&&(d=f,c=s,u=r,h=o)}e[i-1][1]!=c&&(c?e[i-1][1]=c:(e.splice(i-1,1),i--),e[i][1]=u,h?e[i+1][1]=h:(e.splice(i+1,1),i--))}i++}},t.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,t.whitespaceRegex_=/\s/,t.linebreakRegex_=/[\r\n]/,t.blanklineEndRegex_=/\n\r?\n$/,t.blanklineStartRegex_=/^\r?\n\r?\n/,t.prototype.diff_cleanupEfficiency=function(e){for(var i=!1,s=[],r=0,o=null,a=0,l=!1,c=!1,u=!1,h=!1;a<e.length;)0==e[a][0]?(e[a][1].length<this.Diff_EditCost&&(u||h)?(s[r++]=a,l=u,c=h,o=e[a][1]):(r=0,o=null),u=h=!1):(e[a][0]==n?h=!0:u=!0,o&&(l&&c&&u&&h||o.length<this.Diff_EditCost/2&&l+c+u+h==3)&&(e.splice(s[r-1],0,new t.Diff(n,o)),e[s[r-1]+1][0]=1,r--,o=null,l&&c?(u=h=!0,r=0):(a=--r>0?s[r-1]:-1,u=h=!1),i=!0)),a++;i&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push(new t.Diff(0,""));for(var i,s=0,r=0,o=0,a="",l="";s<e.length;)switch(e[s][0]){case 1:o++,l+=e[s][1],s++;break;case n:r++,a+=e[s][1],s++;break;case 0:r+o>1?(0!==r&&0!==o&&(0!==(i=this.diff_commonPrefix(l,a))&&(s-r-o>0&&0==e[s-r-o-1][0]?e[s-r-o-1][1]+=l.substring(0,i):(e.splice(0,0,new t.Diff(0,l.substring(0,i))),s++),l=l.substring(i),a=a.substring(i)),0!==(i=this.diff_commonSuffix(l,a))&&(e[s][1]=l.substring(l.length-i)+e[s][1],l=l.substring(0,l.length-i),a=a.substring(0,a.length-i))),s-=r+o,e.splice(s,r+o),a.length&&(e.splice(s,0,new t.Diff(n,a)),s++),l.length&&(e.splice(s,0,new t.Diff(1,l)),s++),s++):0!==s&&0==e[s-1][0]?(e[s-1][1]+=e[s][1],e.splice(s,1)):s++,o=0,r=0,a="",l=""}""===e[e.length-1][1]&&e.pop();var c=!1;for(s=1;s<e.length-1;)0==e[s-1][0]&&0==e[s+1][0]&&(e[s][1].substring(e[s][1].length-e[s-1][1].length)==e[s-1][1]?(e[s][1]=e[s-1][1]+e[s][1].substring(0,e[s][1].length-e[s-1][1].length),e[s+1][1]=e[s-1][1]+e[s+1][1],e.splice(s-1,1),c=!0):e[s][1].substring(0,e[s+1][1].length)==e[s+1][1]&&(e[s-1][1]+=e[s+1][1],e[s][1]=e[s][1].substring(e[s+1][1].length)+e[s+1][1],e.splice(s+1,1),c=!0)),s++;c&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,t){var i,s=0,r=0,o=0,a=0;for(i=0;i<e.length&&(1!==e[i][0]&&(s+=e[i][1].length),e[i][0]!==n&&(r+=e[i][1].length),!(s>t));i++)o=s,a=r;return e.length!=i&&e[i][0]===n?a:a+(t-o)},t.prototype.diff_prettyHtml=function(e){for(var t=[],i=/&/g,s=/</g,r=/>/g,o=/\n/g,a=0;a<e.length;a++){var l=e[a][0],c=e[a][1].replace(i,"&amp;").replace(s,"&lt;").replace(r,"&gt;").replace(o,"&para;<br>");switch(l){case 1:t[a]='<ins style="background:#e6ffe6;">'+c+"</ins>";break;case n:t[a]='<del style="background:#ffe6e6;">'+c+"</del>";break;case 0:t[a]="<span>"+c+"</span>"}}return t.join("")},t.prototype.diff_text1=function(e){for(var t=[],n=0;n<e.length;n++)1!==e[n][0]&&(t[n]=e[n][1]);return t.join("")},t.prototype.diff_text2=function(e){for(var t=[],i=0;i<e.length;i++)e[i][0]!==n&&(t[i]=e[i][1]);return t.join("")},t.prototype.diff_levenshtein=function(e){for(var t=0,i=0,s=0,r=0;r<e.length;r++){var o=e[r][0],a=e[r][1];switch(o){case 1:i+=a.length;break;case n:s+=a.length;break;case 0:t+=Math.max(i,s),i=0,s=0}}return t+=Math.max(i,s)},t.prototype.diff_toDelta=function(e){for(var t=[],i=0;i<e.length;i++)switch(e[i][0]){case 1:t[i]="+"+encodeURI(e[i][1]);break;case n:t[i]="-"+e[i][1].length;break;case 0:t[i]="="+e[i][1].length}return t.join("\t").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,i){for(var s=[],r=0,o=0,a=i.split(/\t/g),l=0;l<a.length;l++){var c=a[l].substring(1);switch(a[l].charAt(0)){case"+":try{s[r++]=new t.Diff(1,decodeURI(c))}catch(d){throw new Error("Illegal escape in diff_fromDelta: "+c)}break;case"-":case"=":var u=parseInt(c,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+c);var h=e.substring(o,o+=u);"="==a[l].charAt(0)?s[r++]=new t.Diff(0,h):s[r++]=new t.Diff(n,h);break;default:if(a[l])throw new Error("Invalid diff operation in diff_fromDelta: "+a[l])}}if(o!=e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+").");return s},t.prototype.match_main=function(e,t,n){if(null==e||null==t||null==n)throw new Error("Null input. (match_main)");return n=Math.max(0,Math.min(n,e.length)),e==t?0:e.length?e.substring(n,n+t.length)==t?n:this.match_bitap_(e,t,n):-1},t.prototype.match_bitap_=function(e,t,n){if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var i=this.match_alphabet_(t),s=this;function r(e,i){var r=e/t.length,o=Math.abs(n-i);return s.Match_Distance?r+o/s.Match_Distance:o?1:r}var o=this.Match_Threshold,a=e.indexOf(t,n);-1!=a&&(o=Math.min(r(0,a),o),-1!=(a=e.lastIndexOf(t,n+t.length))&&(o=Math.min(r(0,a),o)));var l,c,u=1<<t.length-1;a=-1;for(var h,d=t.length+e.length,f=0;f<t.length;f++){for(l=0,c=d;l<c;)r(f,n+c)<=o?l=c:d=c,c=Math.floor((d-l)/2+l);d=c;var g=Math.max(1,n-c+1),p=Math.min(n+c,e.length)+t.length,m=Array(p+2);m[p+1]=(1<<f)-1;for(var b=p;b>=g;b--){var _=i[e.charAt(b-1)];if(m[b]=0===f?(m[b+1]<<1|1)&_:(m[b+1]<<1|1)&_|(h[b+1]|h[b])<<1|1|h[b+1],m[b]&u){var v=r(f,b-1);if(v<=o){if(o=v,!((a=b-1)>n))break;g=Math.max(1,2*n-a)}}}if(r(f+1,n)>o)break;h=m}return a},t.prototype.match_alphabet_=function(e){for(var t={},n=0;n<e.length;n++)t[e.charAt(n)]=0;for(n=0;n<e.length;n++)t[e.charAt(n)]|=1<<e.length-n-1;return t},t.prototype.patch_addContext_=function(e,n){if(0!=n.length){if(null===e.start2)throw Error("patch not initialized");for(var i=n.substring(e.start2,e.start2+e.length1),s=0;n.indexOf(i)!=n.lastIndexOf(i)&&i.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)s+=this.Patch_Margin,i=n.substring(e.start2-s,e.start2+e.length1+s);s+=this.Patch_Margin;var r=n.substring(e.start2-s,e.start2);r&&e.diffs.unshift(new t.Diff(0,r));var o=n.substring(e.start2+e.length1,e.start2+e.length1+s);o&&e.diffs.push(new t.Diff(0,o)),e.start1-=r.length,e.start2-=r.length,e.length1+=r.length+o.length,e.length2+=r.length+o.length}},t.prototype.patch_make=function(e,i,s){var r,o;if("string"==typeof e&&"string"==typeof i&&"undefined"==typeof s)r=e,(o=this.diff_main(r,i,!0)).length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&"object"==typeof e&&"undefined"==typeof i&&"undefined"==typeof s)o=e,r=this.diff_text1(o);else if("string"==typeof e&&i&&"object"==typeof i&&"undefined"==typeof s)r=e,o=i;else{if("string"!=typeof e||"string"!=typeof i||!s||"object"!=typeof s)throw new Error("Unknown call format to patch_make.");r=e,o=s}if(0===o.length)return[];for(var a=[],l=new t.patch_obj,c=0,u=0,h=0,d=r,f=r,g=0;g<o.length;g++){var p=o[g][0],m=o[g][1];switch(c||0===p||(l.start1=u,l.start2=h),p){case 1:l.diffs[c++]=o[g],l.length2+=m.length,f=f.substring(0,h)+m+f.substring(h);break;case n:l.length1+=m.length,l.diffs[c++]=o[g],f=f.substring(0,h)+f.substring(h+m.length);break;case 0:m.length<=2*this.Patch_Margin&&c&&o.length!=g+1?(l.diffs[c++]=o[g],l.length1+=m.length,l.length2+=m.length):m.length>=2*this.Patch_Margin&&c&&(this.patch_addContext_(l,d),a.push(l),l=new t.patch_obj,c=0,d=f,u=h)}1!==p&&(u+=m.length),p!==n&&(h+=m.length)}return c&&(this.patch_addContext_(l,d),a.push(l)),a},t.prototype.patch_deepCopy=function(e){for(var n=[],i=0;i<e.length;i++){var s=e[i],r=new t.patch_obj;r.diffs=[];for(var o=0;o<s.diffs.length;o++)r.diffs[o]=new t.Diff(s.diffs[o][0],s.diffs[o][1]);r.start1=s.start1,r.start2=s.start2,r.length1=s.length1,r.length2=s.length2,n[i]=r}return n},t.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var i=this.patch_addPadding(e);t=i+t+i,this.patch_splitMax(e);for(var s=0,r=[],o=0;o<e.length;o++){var a,l,c=e[o].start2+s,u=this.diff_text1(e[o].diffs),h=-1;if(u.length>this.Match_MaxBits?-1!=(a=this.match_main(t,u.substring(0,this.Match_MaxBits),c))&&(-1==(h=this.match_main(t,u.substring(u.length-this.Match_MaxBits),c+u.length-this.Match_MaxBits))||a>=h)&&(a=-1):a=this.match_main(t,u,c),-1==a)r[o]=!1,s-=e[o].length2-e[o].length1;else if(r[o]=!0,s=a-c,u==(l=-1==h?t.substring(a,a+u.length):t.substring(a,h+this.Match_MaxBits)))t=t.substring(0,a)+this.diff_text2(e[o].diffs)+t.substring(a+u.length);else{var d=this.diff_main(u,l,!1);if(u.length>this.Match_MaxBits&&this.diff_levenshtein(d)/u.length>this.Patch_DeleteThreshold)r[o]=!1;else{this.diff_cleanupSemanticLossless(d);for(var f,g=0,p=0;p<e[o].diffs.length;p++){var m=e[o].diffs[p];0!==m[0]&&(f=this.diff_xIndex(d,g)),1===m[0]?t=t.substring(0,a+f)+m[1]+t.substring(a+f):m[0]===n&&(t=t.substring(0,a+f)+t.substring(a+this.diff_xIndex(d,g+m[1].length))),m[0]!==n&&(g+=m[1].length)}}}}return[t=t.substring(i.length,t.length-i.length),r]},t.prototype.patch_addPadding=function(e){for(var n=this.Patch_Margin,i="",s=1;s<=n;s++)i+=String.fromCharCode(s);for(s=0;s<e.length;s++)e[s].start1+=n,e[s].start2+=n;var r=e[0],o=r.diffs;if(0==o.length||0!=o[0][0])o.unshift(new t.Diff(0,i)),r.start1-=n,r.start2-=n,r.length1+=n,r.length2+=n;else if(n>o[0][1].length){var a=n-o[0][1].length;o[0][1]=i.substring(o[0][1].length)+o[0][1],r.start1-=a,r.start2-=a,r.length1+=a,r.length2+=a}if(0==(o=(r=e[e.length-1]).diffs).length||0!=o[o.length-1][0])o.push(new t.Diff(0,i)),r.length1+=n,r.length2+=n;else if(n>o[o.length-1][1].length){a=n-o[o.length-1][1].length;o[o.length-1][1]+=i.substring(0,a),r.length1+=a,r.length2+=a}return i},t.prototype.patch_splitMax=function(e){for(var i=this.Match_MaxBits,s=0;s<e.length;s++)if(!(e[s].length1<=i)){var r=e[s];e.splice(s--,1);for(var o=r.start1,a=r.start2,l="";0!==r.diffs.length;){var c=new t.patch_obj,u=!0;for(c.start1=o-l.length,c.start2=a-l.length,""!==l&&(c.length1=c.length2=l.length,c.diffs.push(new t.Diff(0,l)));0!==r.diffs.length&&c.length1<i-this.Patch_Margin;){var h=r.diffs[0][0],d=r.diffs[0][1];1===h?(c.length2+=d.length,a+=d.length,c.diffs.push(r.diffs.shift()),u=!1):h===n&&1==c.diffs.length&&0==c.diffs[0][0]&&d.length>2*i?(c.length1+=d.length,o+=d.length,u=!1,c.diffs.push(new t.Diff(h,d)),r.diffs.shift()):(d=d.substring(0,i-c.length1-this.Patch_Margin),c.length1+=d.length,o+=d.length,0===h?(c.length2+=d.length,a+=d.length):u=!1,c.diffs.push(new t.Diff(h,d)),d==r.diffs[0][1]?r.diffs.shift():r.diffs[0][1]=r.diffs[0][1].substring(d.length))}l=(l=this.diff_text2(c.diffs)).substring(l.length-this.Patch_Margin);var f=this.diff_text1(r.diffs).substring(0,this.Patch_Margin);""!==f&&(c.length1+=f.length,c.length2+=f.length,0!==c.diffs.length&&0===c.diffs[c.diffs.length-1][0]?c.diffs[c.diffs.length-1][1]+=f:c.diffs.push(new t.Diff(0,f))),u||e.splice(++s,0,c)}}},t.prototype.patch_toText=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t.join("")},t.prototype.patch_fromText=function(e){var i=[];if(!e)return i;for(var s=e.split("\n"),r=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;r<s.length;){var a=s[r].match(o);if(!a)throw new Error("Invalid patch string: "+s[r]);var l=new t.patch_obj;for(i.push(l),l.start1=parseInt(a[1],10),""===a[2]?(l.start1--,l.length1=1):"0"==a[2]?l.length1=0:(l.start1--,l.length1=parseInt(a[2],10)),l.start2=parseInt(a[3],10),""===a[4]?(l.start2--,l.length2=1):"0"==a[4]?l.length2=0:(l.start2--,l.length2=parseInt(a[4],10)),r++;r<s.length;){var c=s[r].charAt(0);try{var u=decodeURI(s[r].substring(1))}catch(h){throw new Error("Illegal escape in patch_fromText: "+u)}if("-"==c)l.diffs.push(new t.Diff(n,u));else if("+"==c)l.diffs.push(new t.Diff(1,u));else if(" "==c)l.diffs.push(new t.Diff(0,u));else{if("@"==c)break;if(""!==c)throw new Error('Invalid patch mode "'+c+'" in: '+u)}r++}}return i},(t.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0}).prototype.toString=function(){for(var e,t=["@@ -"+(0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1)+" +"+(0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2)+" @@\n"],i=0;i<this.diffs.length;i++){switch(this.diffs[i][0]){case 1:e="+";break;case n:e="-";break;case 0:e=" "}t[i+1]=e+encodeURI(this.diffs[i][1])+"\n"}return t.join("").replace(/%20/g," ")},e.exports=t,e.exports.diff_match_patch=t,e.exports.DIFF_DELETE=n,e.exports.DIFF_INSERT=1,e.exports.DIFF_EQUAL=0},424:(e,t,n)=>{var i="__lodash_hash_undefined__",s=1/0,r="[object Function]",o="[object GeneratorFunction]",a="[object Symbol]",l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c=/^\w*$/,u=/^\./,h=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,f=/^\[object .+?Constructor\]$/,g="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,p="object"==typeof self&&self&&self.Object===Object&&self,m=g||p||Function("return this")();var b=Array.prototype,_=Function.prototype,v=Object.prototype,y=m["__core-js_shared__"],S=function(){var e=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),w=_.toString,k=v.hasOwnProperty,C=v.toString,x=RegExp("^"+w.call(k).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),E=m.Symbol,L=b.splice,D=B(m,"Map"),A=B(Object,"create"),T=E?E.prototype:void 0,N=T?T.toString:void 0;function I(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function $(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function M(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function R(e,t){for(var n,i,s=e.length;s--;)if((n=e[s][0])===(i=t)||n!==n&&i!==i)return s;return-1}function O(e,t){var n;t=function(e,t){if(V(e))return!1;var n=typeof e;if("number"==n||"symbol"==n||"boolean"==n||null==e||U(e))return!0;return c.test(e)||!l.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:V(n=t)?n:z(n);for(var i=0,s=t.length;null!=e&&i<s;)e=e[W(t[i++])];return i&&i==s?e:void 0}function P(e){if(!j(e)||(t=e,S&&S in t))return!1;var t,n=function(e){var t=j(e)?C.call(e):"";return t==r||t==o}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}(e)?x:f;return n.test(function(e){if(null!=e){try{return w.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function F(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function B(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return P(n)?n:void 0}I.prototype.clear=function(){this.__data__=A?A(null):{}},I.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},I.prototype.get=function(e){var t=this.__data__;if(A){var n=t[e];return n===i?void 0:n}return k.call(t,e)?t[e]:void 0},I.prototype.has=function(e){var t=this.__data__;return A?void 0!==t[e]:k.call(t,e)},I.prototype.set=function(e,t){return this.__data__[e]=A&&void 0===t?i:t,this},$.prototype.clear=function(){this.__data__=[]},$.prototype.delete=function(e){var t=this.__data__,n=R(t,e);return!(n<0)&&(n==t.length-1?t.pop():L.call(t,n,1),!0)},$.prototype.get=function(e){var t=this.__data__,n=R(t,e);return n<0?void 0:t[n][1]},$.prototype.has=function(e){return R(this.__data__,e)>-1},$.prototype.set=function(e,t){var n=this.__data__,i=R(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},M.prototype.clear=function(){this.__data__={hash:new I,map:new(D||$),string:new I}},M.prototype.delete=function(e){return F(this,e).delete(e)},M.prototype.get=function(e){return F(this,e).get(e)},M.prototype.has=function(e){return F(this,e).has(e)},M.prototype.set=function(e,t){return F(this,e).set(e,t),this};var z=H((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(U(e))return N?N.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}(t);var n=[];return u.test(e)&&n.push(""),e.replace(h,(function(e,t,i,s){n.push(i?s.replace(d,"$1"):t||e)})),n}));function W(e){if("string"==typeof e||U(e))return e;var t=e+"";return"0"==t&&1/e==-s?"-0":t}function H(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,s=t?t.apply(this,i):i[0],r=n.cache;if(r.has(s))return r.get(s);var o=e.apply(this,i);return n.cache=r.set(s,o),o};return n.cache=new(H.Cache||M),n}H.Cache=M;var V=Array.isArray;function j(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function U(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&C.call(e)==a}e.exports=function(e,t,n){var i=null==e?void 0:O(e,t);return void 0===i?n:i}},67:(e,t,n)=>{e=n.nmd(e);var i="__lodash_hash_undefined__",s=1,r=2,o=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",h="[object Date]",d="[object Error]",f="[object Function]",g="[object GeneratorFunction]",p="[object Map]",m="[object Number]",b="[object Null]",_="[object Object]",v="[object Promise]",y="[object Proxy]",S="[object RegExp]",w="[object Set]",k="[object String]",C="[object Symbol]",x="[object Undefined]",E="[object WeakMap]",L="[object ArrayBuffer]",D="[object DataView]",A=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,N={};N["[object Float32Array]"]=N["[object Float64Array]"]=N["[object Int8Array]"]=N["[object Int16Array]"]=N["[object Int32Array]"]=N["[object Uint8Array]"]=N["[object Uint8ClampedArray]"]=N["[object Uint16Array]"]=N["[object Uint32Array]"]=!0,N[a]=N[l]=N[L]=N[u]=N[D]=N[h]=N[d]=N[f]=N[p]=N[m]=N[_]=N[S]=N[w]=N[k]=N[E]=!1;var I="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,$="object"==typeof self&&self&&self.Object===Object&&self,M=I||$||Function("return this")(),R=t&&!t.nodeType&&t,O=R&&e&&!e.nodeType&&e,P=O&&O.exports===R,F=P&&I.process,B=function(){try{return F&&F.binding&&F.binding("util")}catch(e){}}(),z=B&&B.isTypedArray;function W(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function H(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function V(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var j,U,q=Array.prototype,K=Function.prototype,G=Object.prototype,Y=M["__core-js_shared__"],Q=K.toString,X=G.hasOwnProperty,Z=function(){var e=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),J=G.toString,ee=RegExp("^"+Q.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=P?M.Buffer:void 0,ne=M.Symbol,ie=M.Uint8Array,se=G.propertyIsEnumerable,re=q.splice,oe=ne?ne.toStringTag:void 0,ae=Object.getOwnPropertySymbols,le=te?te.isBuffer:void 0,ce=(j=Object.keys,U=Object,function(e){return j(U(e))}),ue=Fe(M,"DataView"),he=Fe(M,"Map"),de=Fe(M,"Promise"),fe=Fe(M,"Set"),ge=Fe(M,"WeakMap"),pe=Fe(Object,"create"),me=He(ue),be=He(he),_e=He(de),ve=He(fe),ye=He(ge),Se=ne?ne.prototype:void 0,we=Se?Se.valueOf:void 0;function ke(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Ce(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function xe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Ee(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new xe;++t<n;)this.add(e[t])}function Le(e){var t=this.__data__=new Ce(e);this.size=t.size}function De(e,t){var n=Ue(e),i=!n&&je(e),s=!n&&!i&&qe(e),r=!n&&!i&&!s&&Xe(e),o=n||i||s||r,a=o?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],l=a.length;for(var c in e)!t&&!X.call(e,c)||o&&("length"==c||s&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||We(c,l))||a.push(c);return a}function Ae(e,t){for(var n=e.length;n--;)if(Ve(e[n][0],t))return n;return-1}function Te(e){return null==e?void 0===e?x:b:oe&&oe in Object(e)?function(e){var t=X.call(e,oe),n=e[oe];try{e[oe]=void 0;var i=!0}catch(r){}var s=J.call(e);i&&(t?e[oe]=n:delete e[oe]);return s}(e):function(e){return J.call(e)}(e)}function Ne(e){return Qe(e)&&Te(e)==a}function Ie(e,t,n,i,o){return e===t||(null==e||null==t||!Qe(e)&&!Qe(t)?e!==e&&t!==t:function(e,t,n,i,o,c){var f=Ue(e),g=Ue(t),b=f?l:ze(e),v=g?l:ze(t),y=(b=b==a?_:b)==_,x=(v=v==a?_:v)==_,E=b==v;if(E&&qe(e)){if(!qe(t))return!1;f=!0,y=!1}if(E&&!y)return c||(c=new Le),f||Xe(e)?Re(e,t,n,i,o,c):function(e,t,n,i,o,a,l){switch(n){case D:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case L:return!(e.byteLength!=t.byteLength||!a(new ie(e),new ie(t)));case u:case h:case m:return Ve(+e,+t);case d:return e.name==t.name&&e.message==t.message;case S:case k:return e==t+"";case p:var c=H;case w:var f=i&s;if(c||(c=V),e.size!=t.size&&!f)return!1;var g=l.get(e);if(g)return g==t;i|=r,l.set(e,t);var b=Re(c(e),c(t),i,o,a,l);return l.delete(e),b;case C:if(we)return we.call(e)==we.call(t)}return!1}(e,t,b,n,i,o,c);if(!(n&s)){var A=y&&X.call(e,"__wrapped__"),T=x&&X.call(t,"__wrapped__");if(A||T){var N=A?e.value():e,I=T?t.value():t;return c||(c=new Le),o(N,I,n,i,c)}}if(!E)return!1;return c||(c=new Le),function(e,t,n,i,r,o){var a=n&s,l=Oe(e),c=l.length,u=Oe(t),h=u.length;if(c!=h&&!a)return!1;var d=c;for(;d--;){var f=l[d];if(!(a?f in t:X.call(t,f)))return!1}var g=o.get(e);if(g&&o.get(t))return g==t;var p=!0;o.set(e,t),o.set(t,e);var m=a;for(;++d<c;){var b=e[f=l[d]],_=t[f];if(i)var v=a?i(_,b,f,t,e,o):i(b,_,f,e,t,o);if(!(void 0===v?b===_||r(b,_,n,i,o):v)){p=!1;break}m||(m="constructor"==f)}if(p&&!m){var y=e.constructor,S=t.constructor;y==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof S&&S instanceof S||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,i,o,c)}(e,t,n,i,Ie,o))}function $e(e){return!(!Ye(e)||function(e){return!!Z&&Z in e}(e))&&(Ke(e)?ee:A).test(He(e))}function Me(e){if(!function(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||G;return e===n}(e))return ce(e);var t=[];for(var n in Object(e))X.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Re(e,t,n,i,o,a){var l=n&s,c=e.length,u=t.length;if(c!=u&&!(l&&u>c))return!1;var h=a.get(e);if(h&&a.get(t))return h==t;var d=-1,f=!0,g=n&r?new Ee:void 0;for(a.set(e,t),a.set(t,e);++d<c;){var p=e[d],m=t[d];if(i)var b=l?i(m,p,d,t,e,a):i(p,m,d,e,t,a);if(void 0!==b){if(b)continue;f=!1;break}if(g){if(!W(t,(function(e,t){if(s=t,!g.has(s)&&(p===e||o(p,e,n,i,a)))return g.push(t);var s}))){f=!1;break}}else if(p!==m&&!o(p,m,n,i,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function Oe(e){return function(e,t,n){var i=t(e);return Ue(e)?i:function(e,t){for(var n=-1,i=t.length,s=e.length;++n<i;)e[s+n]=t[n];return e}(i,n(e))}(e,Ze,Be)}function Pe(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function Fe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return $e(n)?n:void 0}ke.prototype.clear=function(){this.__data__=pe?pe(null):{},this.size=0},ke.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ke.prototype.get=function(e){var t=this.__data__;if(pe){var n=t[e];return n===i?void 0:n}return X.call(t,e)?t[e]:void 0},ke.prototype.has=function(e){var t=this.__data__;return pe?void 0!==t[e]:X.call(t,e)},ke.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=pe&&void 0===t?i:t,this},Ce.prototype.clear=function(){this.__data__=[],this.size=0},Ce.prototype.delete=function(e){var t=this.__data__,n=Ae(t,e);return!(n<0)&&(n==t.length-1?t.pop():re.call(t,n,1),--this.size,!0)},Ce.prototype.get=function(e){var t=this.__data__,n=Ae(t,e);return n<0?void 0:t[n][1]},Ce.prototype.has=function(e){return Ae(this.__data__,e)>-1},Ce.prototype.set=function(e,t){var n=this.__data__,i=Ae(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},xe.prototype.clear=function(){this.size=0,this.__data__={hash:new ke,map:new(he||Ce),string:new ke}},xe.prototype.delete=function(e){var t=Pe(this,e).delete(e);return this.size-=t?1:0,t},xe.prototype.get=function(e){return Pe(this,e).get(e)},xe.prototype.has=function(e){return Pe(this,e).has(e)},xe.prototype.set=function(e,t){var n=Pe(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Ee.prototype.add=Ee.prototype.push=function(e){return this.__data__.set(e,i),this},Ee.prototype.has=function(e){return this.__data__.has(e)},Le.prototype.clear=function(){this.__data__=new Ce,this.size=0},Le.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Le.prototype.get=function(e){return this.__data__.get(e)},Le.prototype.has=function(e){return this.__data__.has(e)},Le.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Ce){var i=n.__data__;if(!he||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new xe(i)}return n.set(e,t),this.size=n.size,this};var Be=ae?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,i=null==e?0:e.length,s=0,r=[];++n<i;){var o=e[n];t(o,n,e)&&(r[s++]=o)}return r}(ae(e),(function(t){return se.call(e,t)})))}:function(){return[]},ze=Te;function We(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||T.test(e))&&e>-1&&e%1==0&&e<t}function He(e){if(null!=e){try{return Q.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ve(e,t){return e===t||e!==e&&t!==t}(ue&&ze(new ue(new ArrayBuffer(1)))!=D||he&&ze(new he)!=p||de&&ze(de.resolve())!=v||fe&&ze(new fe)!=w||ge&&ze(new ge)!=E)&&(ze=function(e){var t=Te(e),n=t==_?e.constructor:void 0,i=n?He(n):"";if(i)switch(i){case me:return D;case be:return p;case _e:return v;case ve:return w;case ye:return E}return t});var je=Ne(function(){return arguments}())?Ne:function(e){return Qe(e)&&X.call(e,"callee")&&!se.call(e,"callee")},Ue=Array.isArray;var qe=le||function(){return!1};function Ke(e){if(!Ye(e))return!1;var t=Te(e);return t==f||t==g||t==c||t==y}function Ge(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function Ye(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Qe(e){return null!=e&&"object"==typeof e}var Xe=z?function(e){return function(t){return e(t)}}(z):function(e){return Qe(e)&&Ge(e.length)&&!!N[Te(e)]};function Ze(e){return null!=(t=e)&&Ge(t.length)&&!Ke(t)?De(e):Me(e);var t}e.exports=function(e,t){return Ie(e,t)}},497:(e,t,n)=>{"use strict";var i=n(218);function s(){}function r(){}r.resetWarningCache=s,e.exports=function(){function e(e,t,n,s,r,o){if(o!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:s};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},494:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(603),o=n(173),a=n(43),l=n(67),c=n(288),u=(0,c.getAceInstance)(),h=function(e){function t(t){var n=e.call(this,t)||this;return c.editorEvents.forEach((function(e){n[e]=n[e].bind(n)})),n.debounce=c.debounce,n}return i(t,e),t.prototype.isInShadow=function(e){for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1},t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.className,i=t.onBeforeLoad,s=t.onValidate,r=t.mode,o=t.focus,a=t.theme,l=t.fontSize,h=t.value,d=t.defaultValue,f=t.showGutter,g=t.wrapEnabled,p=t.showPrintMargin,m=t.scrollMargin,b=void 0===m?[0,0,0,0]:m,_=t.keyboardHandler,v=t.onLoad,y=t.commands,S=t.annotations,w=t.markers,k=t.placeholder;this.editor=u.edit(this.refEditor),i&&i(u);for(var C=Object.keys(this.props.editorProps),x=0;x<C.length;x++)this.editor[C[x]]=this.props.editorProps[C[x]];this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),this.editor.renderer.setScrollMargin(b[0],b[1],b[2],b[3]),this.isInShadow(this.refEditor)&&this.editor.renderer.attachToShadowRoot(),this.editor.getSession().setMode("string"===typeof r?"ace/mode/".concat(r):r),a&&""!==a&&this.editor.setTheme("ace/theme/".concat(a)),this.editor.setFontSize("number"===typeof l?"".concat(l,"px"):l),this.editor.getSession().setValue(d||(h||"")),this.props.navigateToFileEnd&&this.editor.navigateFileEnd(),this.editor.renderer.setShowGutter(f),this.editor.getSession().setUseWrapMode(g),this.editor.setShowPrintMargin(p),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),this.editor.on("copy",this.onCopy),this.editor.on("paste",this.onPaste),this.editor.on("change",this.onChange),this.editor.on("input",this.onInput),k&&this.updatePlaceholder(),this.editor.getSession().selection.on("changeSelection",this.onSelectionChange),this.editor.getSession().selection.on("changeCursor",this.onCursorChange),s&&this.editor.getSession().on("changeAnnotation",(function(){var t=e.editor.getSession().getAnnotations();e.props.onValidate(t)})),this.editor.session.on("changeScrollTop",this.onScroll),this.editor.getSession().setAnnotations(S||[]),w&&w.length>0&&this.handleMarkers(w);var E=this.editor.$options;c.editorOptions.forEach((function(t){E.hasOwnProperty(t)?e.editor.setOption(t,e.props[t]):e.props[t]&&console.warn("ReactAce: editor option ".concat(t," was activated but not found. Did you need to import a related tool or did you possibly mispell the option?"))})),this.handleOptions(this.props),Array.isArray(y)&&y.forEach((function(t){"string"===typeof t.exec?e.editor.commands.bindKey(t.bindKey,t.exec):e.editor.commands.addCommand(t)})),_&&this.editor.setKeyboardHandler("ace/keyboard/"+_),n&&(this.refEditor.className+=" "+n),v&&v(this.editor),this.editor.resize(),o&&this.editor.focus()},t.prototype.componentDidUpdate=function(e){for(var t=e,n=this.props,i=0;i<c.editorOptions.length;i++){var s=c.editorOptions[i];n[s]!==t[s]&&this.editor.setOption(s,n[s])}if(n.className!==t.className){var r=this.refEditor.className.trim().split(" ");t.className.trim().split(" ").forEach((function(e){var t=r.indexOf(e);r.splice(t,1)})),this.refEditor.className=" "+n.className+" "+r.join(" ")}var o=this.editor&&null!=n.value&&this.editor.getValue()!==n.value;if(o){this.silent=!0;var a=this.editor.session.selection.toJSON();this.editor.setValue(n.value,n.cursorStart),this.editor.session.selection.fromJSON(a),this.silent=!1}n.placeholder!==t.placeholder&&this.updatePlaceholder(),n.mode!==t.mode&&this.editor.getSession().setMode("string"===typeof n.mode?"ace/mode/".concat(n.mode):n.mode),n.theme!==t.theme&&this.editor.setTheme("ace/theme/"+n.theme),n.keyboardHandler!==t.keyboardHandler&&(n.keyboardHandler?this.editor.setKeyboardHandler("ace/keyboard/"+n.keyboardHandler):this.editor.setKeyboardHandler(null)),n.fontSize!==t.fontSize&&this.editor.setFontSize("number"===typeof n.fontSize?"".concat(n.fontSize,"px"):n.fontSize),n.wrapEnabled!==t.wrapEnabled&&this.editor.getSession().setUseWrapMode(n.wrapEnabled),n.showPrintMargin!==t.showPrintMargin&&this.editor.setShowPrintMargin(n.showPrintMargin),n.showGutter!==t.showGutter&&this.editor.renderer.setShowGutter(n.showGutter),l(n.setOptions,t.setOptions)||this.handleOptions(n),!o&&l(n.annotations,t.annotations)||this.editor.getSession().setAnnotations(n.annotations||[]),!l(n.markers,t.markers)&&Array.isArray(n.markers)&&this.handleMarkers(n.markers),l(n.scrollMargin,t.scrollMargin)||this.handleScrollMargins(n.scrollMargin),e.height===this.props.height&&e.width===this.props.width||this.editor.resize(),this.props.focus&&!e.focus&&this.editor.focus()},t.prototype.handleScrollMargins=function(e){void 0===e&&(e=[0,0,0,0]),this.editor.renderer.setScrollMargin(e[0],e[1],e[2],e[3])},t.prototype.componentWillUnmount=function(){this.editor&&(this.editor.destroy(),this.editor=null)},t.prototype.onChange=function(e){if(this.props.onChange&&!this.silent){var t=this.editor.getValue();this.props.onChange(t,e)}},t.prototype.onSelectionChange=function(e){if(this.props.onSelectionChange){var t=this.editor.getSelection();this.props.onSelectionChange(t,e)}},t.prototype.onCursorChange=function(e){if(this.props.onCursorChange){var t=this.editor.getSelection();this.props.onCursorChange(t,e)}},t.prototype.onInput=function(e){this.props.onInput&&this.props.onInput(e),this.props.placeholder&&this.updatePlaceholder()},t.prototype.onFocus=function(e){this.props.onFocus&&this.props.onFocus(e,this.editor)},t.prototype.onBlur=function(e){this.props.onBlur&&this.props.onBlur(e,this.editor)},t.prototype.onCopy=function(e){var t=e.text;this.props.onCopy&&this.props.onCopy(t)},t.prototype.onPaste=function(e){var t=e.text;this.props.onPaste&&this.props.onPaste(t)},t.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},t.prototype.handleOptions=function(e){for(var t=Object.keys(e.setOptions),n=0;n<t.length;n++)this.editor.setOption(t[n],e.setOptions[t[n]])},t.prototype.handleMarkers=function(e){var t=this,n=this.editor.getSession().getMarkers(!0);for(var i in n)n.hasOwnProperty(i)&&this.editor.getSession().removeMarker(n[i].id);for(var i in n=this.editor.getSession().getMarkers(!1))n.hasOwnProperty(i)&&"ace_active-line"!==n[i].clazz&&"ace_selected-word"!==n[i].clazz&&this.editor.getSession().removeMarker(n[i].id);e.forEach((function(e){var n=e.startRow,i=e.startCol,s=e.endRow,o=e.endCol,a=e.className,l=e.type,c=e.inFront,u=void 0!==c&&c,h=new r.Range(n,i,s,o);t.editor.getSession().addMarker(h,a,l,u)}))},t.prototype.updatePlaceholder=function(){var e=this.editor,t=this.props.placeholder,n=!e.session.getValue().length,i=e.renderer.placeholderNode;!n&&i?(e.renderer.scroller.removeChild(e.renderer.placeholderNode),e.renderer.placeholderNode=null):n&&!i?((i=e.renderer.placeholderNode=document.createElement("div")).textContent=t||"",i.className="ace_comment ace_placeholder",i.style.padding="0 9px",i.style.position="absolute",i.style.zIndex="3",e.renderer.scroller.appendChild(i)):n&&i&&(i.textContent=t)},t.prototype.updateRef=function(e){this.refEditor=e},t.prototype.render=function(){var e=this.props,t=e.name,n=e.width,i=e.height,r=e.style,o=s({width:n,height:i},r);return a.createElement("div",{ref:this.updateRef,id:t,style:o})},t.propTypes={mode:o.oneOfType([o.string,o.object]),focus:o.bool,theme:o.string,name:o.string,className:o.string,height:o.string,width:o.string,fontSize:o.oneOfType([o.number,o.string]),showGutter:o.bool,onChange:o.func,onCopy:o.func,onPaste:o.func,onFocus:o.func,onInput:o.func,onBlur:o.func,onScroll:o.func,value:o.string,defaultValue:o.string,onLoad:o.func,onSelectionChange:o.func,onCursorChange:o.func,onBeforeLoad:o.func,onValidate:o.func,minLines:o.number,maxLines:o.number,readOnly:o.bool,highlightActiveLine:o.bool,tabSize:o.number,showPrintMargin:o.bool,cursorStart:o.number,debounceChangePeriod:o.number,editorProps:o.object,setOptions:o.object,style:o.object,scrollMargin:o.array,annotations:o.array,markers:o.array,keyboardHandler:o.string,wrapEnabled:o.bool,enableSnippets:o.bool,enableBasicAutocompletion:o.oneOfType([o.bool,o.array]),enableLiveAutocompletion:o.oneOfType([o.bool,o.array]),navigateToFileEnd:o.bool,commands:o.array,placeholder:o.string},t.defaultProps={name:"ace-editor",focus:!1,mode:"",theme:"",height:"500px",width:"500px",fontSize:12,enableSnippets:!1,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,placeholder:null,navigateToFileEnd:!0},t}(a.Component);t.default=h},734:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=n(173),r=n(43),o=n(225),a=n(388),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={value:n.props.value},n.onChange=n.onChange.bind(n),n.diff=n.diff.bind(n),n}return i(t,e),t.prototype.componentDidUpdate=function(){var e=this.props.value;e!==this.state.value&&this.setState({value:e})},t.prototype.onChange=function(e){this.setState({value:e}),this.props.onChange&&this.props.onChange(e)},t.prototype.diff=function(){var e=new a,t=this.state.value[0],n=this.state.value[1];if(0===t.length&&0===n.length)return[];var i=e.diff_main(t,n);e.diff_cleanupSemantic(i);var s=this.generateDiffedLines(i);return this.setCodeMarkers(s)},t.prototype.generateDiffedLines=function(e){var t=0,n=-1,i=1,s={left:[],right:[]},r={left:1,right:1};return e.forEach((function(e){var o=e[0],a=e[1],l=a.split("\n").length-1;if(0!==a.length){var c=a[0],u=a[a.length-1],h=0;switch(o){case t:r.left+=l,r.right+=l;break;case n:"\n"===c&&(r.left++,l--),0===(h=l)&&s.right.push({startLine:r.right,endLine:r.right}),"\n"===u&&(h-=1),s.left.push({startLine:r.left,endLine:r.left+h}),r.left+=l;break;case i:"\n"===c&&(r.right++,l--),0===(h=l)&&s.left.push({startLine:r.left,endLine:r.left}),"\n"===u&&(h-=1),s.right.push({startLine:r.right,endLine:r.right+h}),r.right+=l;break;default:throw new Error("Diff type was not defined.")}}})),s},t.prototype.setCodeMarkers=function(e){void 0===e&&(e={left:[],right:[]});for(var t=[],n={left:[],right:[]},i=0;i<e.left.length;i++){var s={startRow:e.left[i].startLine-1,endRow:e.left[i].endLine,type:"text",className:"codeMarker"};n.left.push(s)}for(i=0;i<e.right.length;i++){s={startRow:e.right[i].startLine-1,endRow:e.right[i].endLine,type:"text",className:"codeMarker"};n.right.push(s)}return t[0]=n.left,t[1]=n.right,t},t.prototype.render=function(){var e=this.diff();return r.createElement(o.default,{name:this.props.name,className:this.props.className,focus:this.props.focus,orientation:this.props.orientation,splits:this.props.splits,mode:this.props.mode,theme:this.props.theme,height:this.props.height,width:this.props.width,fontSize:this.props.fontSize,showGutter:this.props.showGutter,onChange:this.onChange,onPaste:this.props.onPaste,onLoad:this.props.onLoad,onScroll:this.props.onScroll,minLines:this.props.minLines,maxLines:this.props.maxLines,readOnly:this.props.readOnly,highlightActiveLine:this.props.highlightActiveLine,showPrintMargin:this.props.showPrintMargin,tabSize:this.props.tabSize,cursorStart:this.props.cursorStart,editorProps:this.props.editorProps,style:this.props.style,scrollMargin:this.props.scrollMargin,setOptions:this.props.setOptions,wrapEnabled:this.props.wrapEnabled,enableBasicAutocompletion:this.props.enableBasicAutocompletion,enableLiveAutocompletion:this.props.enableLiveAutocompletion,value:this.state.value,markers:e})},t.propTypes={cursorStart:s.number,editorProps:s.object,enableBasicAutocompletion:s.bool,enableLiveAutocompletion:s.bool,focus:s.bool,fontSize:s.number,height:s.string,highlightActiveLine:s.bool,maxLines:s.number,minLines:s.number,mode:s.string,name:s.string,className:s.string,onLoad:s.func,onPaste:s.func,onScroll:s.func,onChange:s.func,orientation:s.string,readOnly:s.bool,scrollMargin:s.array,setOptions:s.object,showGutter:s.bool,showPrintMargin:s.bool,splits:s.number,style:s.object,tabSize:s.number,theme:s.string,value:s.array,width:s.string,wrapEnabled:s.bool},t.defaultProps={cursorStart:1,editorProps:{},enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,focus:!1,fontSize:12,height:"500px",highlightActiveLine:!0,maxLines:null,minLines:null,mode:"",name:"ace-editor",onLoad:null,onScroll:null,onPaste:null,onChange:null,orientation:"beside",readOnly:!1,scrollMargin:[0,0,0,0],setOptions:{},showGutter:!0,showPrintMargin:!0,splits:2,style:{},tabSize:4,theme:"github",value:["",""],width:"500px",wrapEnabled:!0},t}(r.Component);t.default=l},288:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAceInstance=t.debounce=t.editorEvents=t.editorOptions=void 0;t.editorOptions=["minLines","maxLines","readOnly","highlightActiveLine","tabSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"];t.editorEvents=["onChange","onFocus","onInput","onBlur","onCopy","onPaste","onSelectionChange","onCursorChange","onScroll","handleOptions","updateRef"];t.getAceInstance=function(){var e;return"undefined"===typeof window?(n.g.window={},e=n(603),delete n.g.window):window.ace?(e=window.ace).acequire=window.ace.require||window.ace.acequire:e=n(603),e};t.debounce=function(e,t){var n=null;return function(){var i=this,s=arguments;clearTimeout(n),n=setTimeout((function(){e.apply(i,s)}),t)}}},869:(e,t,n)=>{"use strict";var i=n(494);n(734).default,n(225).default,t.Ay=i.default},225:function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var s in t=arguments[n])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var r=n(288),o=(0,r.getAceInstance)(),a=n(603),l=n(878),c=n(173),u=n(43),h=n(67),d=n(424),f=function(e){function t(t){var n=e.call(this,t)||this;return r.editorEvents.forEach((function(e){n[e]=n[e].bind(n)})),n.debounce=r.debounce,n}return i(t,e),t.prototype.isInShadow=function(e){for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1},t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.className,i=t.onBeforeLoad,s=t.mode,a=t.focus,c=t.theme,u=t.fontSize,h=t.value,f=t.defaultValue,g=t.cursorStart,p=t.showGutter,m=t.wrapEnabled,b=t.showPrintMargin,_=t.scrollMargin,v=void 0===_?[0,0,0,0]:_,y=t.keyboardHandler,S=t.onLoad,w=t.commands,k=t.annotations,C=t.markers,x=t.splits;this.editor=o.edit(this.refEditor),this.isInShadow(this.refEditor)&&this.editor.renderer.attachToShadowRoot(),this.editor.setTheme("ace/theme/".concat(c)),i&&i(o);var E=Object.keys(this.props.editorProps),L=new l.Split(this.editor.container,"ace/theme/".concat(c),x);this.editor.env.split=L,this.splitEditor=L.getEditor(0),this.split=L,this.editor.setShowPrintMargin(!1),this.editor.renderer.setShowGutter(!1);var D=this.splitEditor.$options;this.props.debounceChangePeriod&&(this.onChange=this.debounce(this.onChange,this.props.debounceChangePeriod)),L.forEach((function(t,n){for(var i=0;i<E.length;i++)t[E[i]]=e.props.editorProps[E[i]];var a=d(f,n),l=d(h,n,"");t.session.setUndoManager(new o.UndoManager),t.setTheme("ace/theme/".concat(c)),t.renderer.setScrollMargin(v[0],v[1],v[2],v[3]),t.getSession().setMode("ace/mode/".concat(s)),t.setFontSize(u),t.renderer.setShowGutter(p),t.getSession().setUseWrapMode(m),t.setShowPrintMargin(b),t.on("focus",e.onFocus),t.on("blur",e.onBlur),t.on("input",e.onInput),t.on("copy",e.onCopy),t.on("paste",e.onPaste),t.on("change",e.onChange),t.getSession().selection.on("changeSelection",e.onSelectionChange),t.getSession().selection.on("changeCursor",e.onCursorChange),t.session.on("changeScrollTop",e.onScroll),t.setValue(void 0===a?l:a,g);var _=d(k,n,[]),S=d(C,n,[]);t.getSession().setAnnotations(_),S&&S.length>0&&e.handleMarkers(S,t);for(i=0;i<r.editorOptions.length;i++){var x=r.editorOptions[i];D.hasOwnProperty(x)?t.setOption(x,e.props[x]):e.props[x]&&console.warn("ReaceAce: editor option ".concat(x," was activated but not found. Did you need to import a related tool or did you possibly mispell the option?"))}e.handleOptions(e.props,t),Array.isArray(w)&&w.forEach((function(e){"string"===typeof e.exec?t.commands.bindKey(e.bindKey,e.exec):t.commands.addCommand(e)})),y&&t.setKeyboardHandler("ace/keyboard/"+y)})),n&&(this.refEditor.className+=" "+n),a&&this.splitEditor.focus();var A=this.editor.env.split;A.setOrientation("below"===this.props.orientation?A.BELOW:A.BESIDE),A.resize(!0),S&&S(A)},t.prototype.componentDidUpdate=function(e){var t=this,n=e,i=this.props,s=this.editor.env.split;if(i.splits!==n.splits&&s.setSplits(i.splits),i.orientation!==n.orientation&&s.setOrientation("below"===i.orientation?s.BELOW:s.BESIDE),s.forEach((function(e,s){i.mode!==n.mode&&e.getSession().setMode("ace/mode/"+i.mode),i.keyboardHandler!==n.keyboardHandler&&(i.keyboardHandler?e.setKeyboardHandler("ace/keyboard/"+i.keyboardHandler):e.setKeyboardHandler(null)),i.fontSize!==n.fontSize&&e.setFontSize(i.fontSize),i.wrapEnabled!==n.wrapEnabled&&e.getSession().setUseWrapMode(i.wrapEnabled),i.showPrintMargin!==n.showPrintMargin&&e.setShowPrintMargin(i.showPrintMargin),i.showGutter!==n.showGutter&&e.renderer.setShowGutter(i.showGutter);for(var o=0;o<r.editorOptions.length;o++){var a=r.editorOptions[o];i[a]!==n[a]&&e.setOption(a,i[a])}h(i.setOptions,n.setOptions)||t.handleOptions(i,e);var l=d(i.value,s,"");if(e.getValue()!==l){t.silent=!0;var c=e.session.selection.toJSON();e.setValue(l,i.cursorStart),e.session.selection.fromJSON(c),t.silent=!1}var u=d(i.annotations,s,[]),f=d(n.annotations,s,[]);h(u,f)||e.getSession().setAnnotations(u);var g=d(i.markers,s,[]),p=d(n.markers,s,[]);!h(g,p)&&Array.isArray(g)&&t.handleMarkers(g,e)})),i.className!==n.className){var o=this.refEditor.className.trim().split(" ");n.className.trim().split(" ").forEach((function(e){var t=o.indexOf(e);o.splice(t,1)})),this.refEditor.className=" "+i.className+" "+o.join(" ")}i.theme!==n.theme&&s.setTheme("ace/theme/"+i.theme),i.focus&&!n.focus&&this.splitEditor.focus(),i.height===this.props.height&&i.width===this.props.width||this.editor.resize()},t.prototype.componentWillUnmount=function(){this.editor.destroy(),this.editor=null},t.prototype.onChange=function(e){if(this.props.onChange&&!this.silent){var t=[];this.editor.env.split.forEach((function(e){t.push(e.getValue())})),this.props.onChange(t,e)}},t.prototype.onSelectionChange=function(e){if(this.props.onSelectionChange){var t=[];this.editor.env.split.forEach((function(e){t.push(e.getSelection())})),this.props.onSelectionChange(t,e)}},t.prototype.onCursorChange=function(e){if(this.props.onCursorChange){var t=[];this.editor.env.split.forEach((function(e){t.push(e.getSelection())})),this.props.onCursorChange(t,e)}},t.prototype.onFocus=function(e){this.props.onFocus&&this.props.onFocus(e)},t.prototype.onInput=function(e){this.props.onInput&&this.props.onInput(e)},t.prototype.onBlur=function(e){this.props.onBlur&&this.props.onBlur(e)},t.prototype.onCopy=function(e){this.props.onCopy&&this.props.onCopy(e)},t.prototype.onPaste=function(e){this.props.onPaste&&this.props.onPaste(e)},t.prototype.onScroll=function(){this.props.onScroll&&this.props.onScroll(this.editor)},t.prototype.handleOptions=function(e,t){for(var n=Object.keys(e.setOptions),i=0;i<n.length;i++)t.setOption(n[i],e.setOptions[n[i]])},t.prototype.handleMarkers=function(e,t){var n=t.getSession().getMarkers(!0);for(var i in n)n.hasOwnProperty(i)&&t.getSession().removeMarker(n[i].id);for(var i in n=t.getSession().getMarkers(!1))n.hasOwnProperty(i)&&t.getSession().removeMarker(n[i].id);e.forEach((function(e){var n=e.startRow,i=e.startCol,s=e.endRow,r=e.endCol,o=e.className,l=e.type,c=e.inFront,u=void 0!==c&&c,h=new a.Range(n,i,s,r);t.getSession().addMarker(h,o,l,u)}))},t.prototype.updateRef=function(e){this.refEditor=e},t.prototype.render=function(){var e=this.props,t=e.name,n=e.width,i=e.height,r=e.style,o=s({width:n,height:i},r);return u.createElement("div",{ref:this.updateRef,id:t,style:o})},t.propTypes={className:c.string,debounceChangePeriod:c.number,defaultValue:c.arrayOf(c.string),focus:c.bool,fontSize:c.oneOfType([c.number,c.string]),height:c.string,mode:c.string,name:c.string,onBlur:c.func,onChange:c.func,onCopy:c.func,onFocus:c.func,onInput:c.func,onLoad:c.func,onPaste:c.func,onScroll:c.func,orientation:c.string,showGutter:c.bool,splits:c.number,theme:c.string,value:c.arrayOf(c.string),width:c.string,onSelectionChange:c.func,onCursorChange:c.func,onBeforeLoad:c.func,minLines:c.number,maxLines:c.number,readOnly:c.bool,highlightActiveLine:c.bool,tabSize:c.number,showPrintMargin:c.bool,cursorStart:c.number,editorProps:c.object,setOptions:c.object,style:c.object,scrollMargin:c.array,annotations:c.array,markers:c.array,keyboardHandler:c.string,wrapEnabled:c.bool,enableBasicAutocompletion:c.oneOfType([c.bool,c.array]),enableLiveAutocompletion:c.oneOfType([c.bool,c.array]),commands:c.array},t.defaultProps={name:"ace-editor",focus:!1,orientation:"beside",splits:2,mode:"",theme:"",height:"500px",width:"500px",value:[],fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},style:{},scrollMargin:[0,0,0,0],setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1},t}(u.Component);t.default=f},730:(e,t,n)=>{"use strict";var i=n(43),s=n(853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},g={};function p(e,t,n,i,s,r,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function v(e,t,n,i){var s=m.hasOwnProperty(t)?m[t]:null;(null!==s?0!==s.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,i)&&(n=null),i||null===s?function(e){return!!h.call(g,e)||!h.call(f,e)&&(d.test(e)?g[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,i=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(b,_);m[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(b,_);m[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(b,_);m[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var y=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),L=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var $=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var O,P=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var B=!1;function z(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var s=c.stack.split("\n"),r=i.stack.split("\n"),o=s.length-1,a=r.length-1;1<=o&&0<=a&&s[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==r[a]){if(1!==o||1!==a)do{if(o--,0>--a||s[o]!==r[a]){var l="\n"+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function W(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case x:return"Profiler";case C:return"StrictMode";case A:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case L:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case D:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function j(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function U(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=U(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,r=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){i=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=U(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return P({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=j(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=j(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,j(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&i&&(e[n].defaultSelected=!0)}else{for(n=""+j(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(i&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return P({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(r(92));if(te(n)){if(1<n.length)throw Error(r(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:j(n)}}function re(e,t){var n=j(t.value),i=j(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ge=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),s=pe(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach((function(e){ge.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var be=P({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(be[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,ke=null,Ce=null;function xe(e){if(e=vs(e)){if("function"!==typeof we)throw Error(r(280));var t=e.stateNode;t&&(t=Ss(t),we(e.stateNode,e.type,t))}}function Ee(e){ke?Ce?Ce.push(e):Ce=[e]:ke=e}function Le(){if(ke){var e=ke,t=Ce;if(Ce=ke=null,xe(e),t)for(e=0;e<t.length;e++)xe(t[e])}}function De(e,t){return e(t)}function Ae(){}var Te=!1;function Ne(e,t,n){if(Te)return e(t,n);Te=!0;try{return De(e,t,n)}finally{Te=!1,(null!==ke||null!==Ce)&&(Ae(),Le())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var i=Ss(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(r(231,t,typeof n));return n}var $e=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){$e=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){$e=!1}function Re(e,t,n,i,s,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Pe=null,Fe=!1,Be=null,ze={onError:function(e){Oe=!0,Pe=e}};function We(e,t,n,i,s,r,o,a,l){Oe=!1,Pe=null,Re.apply(ze,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function je(e){if(He(e)!==e)throw Error(r(188))}function Ue(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var s=n.return;if(null===s)break;var o=s.alternate;if(null===o){if(null!==(i=s.return)){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return je(s),e;if(o===i)return je(s),t;o=o.sibling}throw Error(r(188))}if(n.return!==i.return)n=s,i=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,i=o;break}if(l===i){a=!0,i=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=s;break}if(l===i){a=!0,i=o,n=s;break}l=l.sibling}if(!a)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Ke=s.unstable_scheduleCallback,Ge=s.unstable_cancelCallback,Ye=s.unstable_shouldYield,Qe=s.unstable_requestPaint,Xe=s.unstable_now,Ze=s.unstable_getCurrentPriorityLevel,Je=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,it=s.unstable_IdlePriority,st=null,rt=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,s=e.suspendedLanes,r=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~s;0!==a?i=ht(a):0!==(r&=o)&&(i=ht(r))}else 0!==(o=n&~s)?i=ht(o):0!==r&&(i=ht(r));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(r=t&-t)||16===s&&0!==(4194240&r)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)s=1<<(n=31-ot(t)),i|=e[n],t&=~s;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function gt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function _t(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),s=1<<i;s&t|e[i]&t&&(e[i]|=t),n&=~s}}var vt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var St,wt,kt,Ct,xt,Et=!1,Lt=[],Dt=null,At=null,Tt=null,Nt=new Map,It=new Map,$t=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Dt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Ot(e,t,n,i,s,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},null!==t&&(null!==(t=vs(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Pt(e){var t=_s(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void xt(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vs(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);ye=i,n.target.dispatchEvent(i),ye=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function zt(){Et=!1,null!==Dt&&Ft(Dt)&&(Dt=null),null!==At&&Ft(At)&&(At=null),null!==Tt&&Ft(Tt)&&(Tt=null),Nt.forEach(Bt),It.forEach(Bt)}function Wt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,zt)))}function Ht(e){function t(t){return Wt(t,e)}if(0<Lt.length){Wt(Lt[0],e);for(var n=1;n<Lt.length;n++){var i=Lt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Dt&&Wt(Dt,e),null!==At&&Wt(At,e),null!==Tt&&Wt(Tt,e),Nt.forEach(t),It.forEach(t),n=0;n<$t.length;n++)(i=$t[n]).blockedOn===e&&(i.blockedOn=null);for(;0<$t.length&&null===(n=$t[0]).blockedOn;)Pt(n),null===n.blockedOn&&$t.shift()}var Vt=y.ReactCurrentBatchConfig,jt=!0;function Ut(e,t,n,i){var s=vt,r=Vt.transition;Vt.transition=null;try{vt=1,Kt(e,t,n,i)}finally{vt=s,Vt.transition=r}}function qt(e,t,n,i){var s=vt,r=Vt.transition;Vt.transition=null;try{vt=4,Kt(e,t,n,i)}finally{vt=s,Vt.transition=r}}function Kt(e,t,n,i){if(jt){var s=Yt(e,t,n,i);if(null===s)ji(e,t,i,Gt,n),Rt(e,i);else if(function(e,t,n,i,s){switch(t){case"focusin":return Dt=Ot(Dt,e,t,n,i,s),!0;case"dragenter":return At=Ot(At,e,t,n,i,s),!0;case"mouseover":return Tt=Ot(Tt,e,t,n,i,s),!0;case"pointerover":var r=s.pointerId;return Nt.set(r,Ot(Nt.get(r)||null,e,t,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,It.set(r,Ot(It.get(r)||null,e,t,n,i,s)),!0}return!1}(s,e,t,n,i))i.stopPropagation();else if(Rt(e,i),4&t&&-1<Mt.indexOf(e)){for(;null!==s;){var r=vs(s);if(null!==r&&St(r),null===(r=Yt(e,t,n,i))&&ji(e,t,i,Gt,n),r===s)break;s=r}null!==s&&i.stopPropagation()}else ji(e,t,i,null,n)}}var Gt=null;function Yt(e,t,n,i){if(Gt=null,null!==(e=_s(e=Se(i))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Zt,i=n.length,s="value"in Xt?Xt.value:Xt.textContent,r=s.length;for(e=0;e<i&&n[e]===s[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===s[r-t];t++);return Jt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function sn(){return!1}function rn(e){function t(t,n,i,s,r){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:sn,this.isPropagationStopped=sn,this}return P(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=rn(cn),hn=P({},cn,{view:0,detail:0}),dn=rn(hn),fn=P({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),gn=rn(fn),pn=rn(P({},fn,{dataTransfer:0})),mn=rn(P({},hn,{relatedTarget:0})),bn=rn(P({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),_n=P({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=rn(_n),yn=rn(P({},cn,{data:0})),Sn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function xn(){return Cn}var En=P({},hn,{key:function(e){if(e.key){var t=Sn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ln=rn(En),Dn=rn(P({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=rn(P({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xn})),Tn=rn(P({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=P({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=rn(Nn),$n=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var On=u&&"TextEvent"in window&&!Rn,Pn=u&&(!Mn||Rn&&8<Rn&&11>=Rn),Fn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==$n.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Un(e,t,n,i){Ee(i),0<(t=qi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var qn=null,Kn=null;function Gn(e){Fi(e,0)}function Yn(e){if(K(ys(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Zn;if(u){var Jn="oninput"in document;if(!Jn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Jn="function"===typeof ei.oninput}Zn=Jn}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function ti(){qn&&(qn.detachEvent("onpropertychange",ni),Kn=qn=null)}function ni(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Un(t,Kn,e,Se(e)),Ne(Gn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Kn=n,(qn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function si(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function ri(e,t){if("click"===e)return Yn(t)}function oi(e,t){if("input"===e||"change"===e)return Yn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!h.call(t,s)||!ai(e[s],t[s]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,r=Math.min(i.start,s);i=void 0===i.end?r:Math.min(i.end,s),!e.extend&&r>i&&(s=i,i=r,r=s),s=ui(n,r);var o=ui(n,i);s&&o&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),r>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,bi=null,_i=null,vi=!1;function yi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vi||null==mi||mi!==G(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},_i&&li(_i,i)||(_i=i,0<(i=qi(bi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function Si(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:Si("Animation","AnimationEnd"),animationiteration:Si("Animation","AnimationIteration"),animationstart:Si("Animation","AnimationStart"),transitionend:Si("Transition","TransitionEnd")},ki={},Ci={};function xi(e){if(ki[e])return ki[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ci)return ki[e]=n[t];return e}u&&(Ci=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ei=xi("animationend"),Li=xi("animationiteration"),Di=xi("animationstart"),Ai=xi("transitionend"),Ti=new Map,Ni="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(e,t){Ti.set(e,t),l(t,[e])}for(var $i=0;$i<Ni.length;$i++){var Mi=Ni[$i];Ii(Mi.toLowerCase(),"on"+(Mi[0].toUpperCase()+Mi.slice(1)))}Ii(Ei,"onAnimationEnd"),Ii(Li,"onAnimationIteration"),Ii(Di,"onAnimationStart"),Ii("dblclick","onDoubleClick"),Ii("focusin","onFocus"),Ii("focusout","onBlur"),Ii(Ai,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ri));function Pi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,s,o,a,l,c){if(We.apply(this,arguments),Oe){if(!Oe)throw Error(r(198));var u=Pe;Oe=!1,Pe=null,Fe||(Fe=!0,Be=u)}}(i,t,void 0,e),e.currentTarget=null}function Fi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],s=i.event;i=i.listeners;e:{var r=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;Pi(s,a,c),r=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;Pi(s,a,c),r=l}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Bi(e,t){var n=t[ps];void 0===n&&(n=t[ps]=new Set);var i=e+"__bubble";n.has(i)||(Vi(t,e,2,!1),n.add(i))}function zi(e,t,n){var i=0;t&&(i|=4),Vi(n,e,i,t)}var Wi="_reactListening"+Math.random().toString(36).slice(2);function Hi(e){if(!e[Wi]){e[Wi]=!0,o.forEach((function(t){"selectionchange"!==t&&(Oi.has(t)||zi(t,!1,e),zi(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wi]||(t[Wi]=!0,zi("selectionchange",!1,t))}}function Vi(e,t,n,i){switch(Qt(t)){case 1:var s=Ut;break;case 4:s=qt;break;default:s=Kt}n=s.bind(null,t,n,e),s=void 0,!$e||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),i?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function ji(e,t,n,i,s){var r=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;o=o.return}for(;null!==a;){if(null===(o=_s(a)))return;if(5===(l=o.tag)||6===l){i=r=o;continue e}a=a.parentNode}}i=i.return}Ne((function(){var i=r,s=Se(n),o=[];e:{var a=Ti.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Ln;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ei:case Li:case Di:l=bn;break;case Ai:l=Tn;break;case"scroll":l=dn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Dn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,g=i;null!==g;){var p=(f=g).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==d&&(null!=(p=Ie(g,d))&&u.push(Ui(g,p,f)))),h)break;g=g.return}0<u.length&&(a=new l(a,c,null,n,s),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===ye||!(c=n.relatedTarget||n.fromElement)||!_s(c)&&!c[gs])&&(l||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?_s(c):null)&&(c!==(h=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=gn,p="onMouseLeave",d="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(u=Dn,p="onPointerLeave",d="onPointerEnter",g="pointer"),h=null==l?a:ys(l),f=null==c?a:ys(c),(a=new u(p,g+"leave",l,n,s)).target=h,a.relatedTarget=f,p=null,_s(s)===i&&((u=new u(d,g+"enter",c,n,s)).target=f,u.relatedTarget=h,p=u),h=p,l&&c)e:{for(d=c,g=0,f=u=l;f;f=Ki(f))g++;for(f=0,p=d;p;p=Ki(p))f++;for(;0<g-f;)u=Ki(u),g--;for(;0<f-g;)d=Ki(d),f--;for(;g--;){if(u===d||null!==d&&u===d.alternate)break e;u=Ki(u),d=Ki(d)}u=null}else u=null;null!==l&&Gi(o,a,l,u,!1),null!==c&&null!==h&&Gi(o,h,c,u,!0)}if("select"===(l=(a=i?ys(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Qn;else if(jn(a))if(Xn)m=oi;else{m=si;var b=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=ri);switch(m&&(m=m(e,i))?Un(o,m,n,s):(b&&b(e,a,i),"focusout"===e&&(b=a._wrapperState)&&b.controlled&&"number"===a.type&&ee(a,"number",a.value)),b=i?ys(i):window,e){case"focusin":(jn(b)||"true"===b.contentEditable)&&(mi=b,bi=i,_i=null);break;case"focusout":_i=bi=mi=null;break;case"mousedown":vi=!0;break;case"contextmenu":case"mouseup":case"dragend":vi=!1,yi(o,n,s);break;case"selectionchange":if(pi)break;case"keydown":case"keyup":yi(o,n,s)}var _;if(Mn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Hn?zn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Pn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Hn&&(_=en()):(Zt="value"in(Xt=s)?Xt.value:Xt.textContent,Hn=!0)),0<(b=qi(i,v)).length&&(v=new yn(v,e,null,n,s),o.push({event:v,listeners:b}),_?v.data=_:null!==(_=Wn(n))&&(v.data=_))),(_=On?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Mn&&zn(e,t)?(e=en(),Jt=Zt=Xt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=qi(i,"onBeforeInput")).length&&(s=new yn("onBeforeInput","beforeinput",null,n,s),o.push({event:s,listeners:i}),s.data=_))}Fi(o,t)}))}function Ui(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",i=[];null!==e;){var s=e,r=s.stateNode;5===s.tag&&null!==r&&(s=r,null!=(r=Ie(e,n))&&i.unshift(Ui(e,r,s)),null!=(r=Ie(e,t))&&i.push(Ui(e,r,s))),e=e.return}return i}function Ki(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gi(e,t,n,i,s){for(var r=t._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,s?null!=(l=Ie(n,r))&&o.unshift(Ui(n,l,a)):s||null!=(l=Ie(n,r))&&o.push(Ui(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yi=/\r\n?/g,Qi=/\u0000|\uFFFD/g;function Xi(e){return("string"===typeof e?e:""+e).replace(Yi,"\n").replace(Qi,"")}function Zi(e,t,n){if(t=Xi(t),Xi(e)!==t&&n)throw Error(r(425))}function Ji(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var is="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,rs="function"===typeof Promise?Promise:void 0,os="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof rs?function(e){return rs.resolve(null).then(e).catch(as)}:is;function as(e){setTimeout((function(){throw e}))}function ls(e,t){var n=t,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===i)return e.removeChild(s),void Ht(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=s}while(n);Ht(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),ds="__reactFiber$"+hs,fs="__reactProps$"+hs,gs="__reactContainer$"+hs,ps="__reactEvents$"+hs,ms="__reactListeners$"+hs,bs="__reactHandles$"+hs;function _s(e){var t=e[ds];if(t)return t;for(var n=e.parentNode;n;){if(t=n[gs]||n[ds]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[ds])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function vs(e){return!(e=e[ds]||e[gs])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ys(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function Ss(e){return e[fs]||null}var ws=[],ks=-1;function Cs(e){return{current:e}}function xs(e){0>ks||(e.current=ws[ks],ws[ks]=null,ks--)}function Es(e,t){ks++,ws[ks]=e.current,e.current=t}var Ls={},Ds=Cs(Ls),As=Cs(!1),Ts=Ls;function Ns(e,t){var n=e.type.contextTypes;if(!n)return Ls;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s,r={};for(s in n)r[s]=t[s];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Is(e){return null!==(e=e.childContextTypes)&&void 0!==e}function $s(){xs(As),xs(Ds)}function Ms(e,t,n){if(Ds.current!==Ls)throw Error(r(168));Es(Ds,t),Es(As,n)}function Rs(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var s in i=i.getChildContext())if(!(s in t))throw Error(r(108,V(e)||"Unknown",s));return P({},n,i)}function Os(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ls,Ts=Ds.current,Es(Ds,e),Es(As,As.current),!0}function Ps(e,t,n){var i=e.stateNode;if(!i)throw Error(r(169));n?(e=Rs(e,t,Ts),i.__reactInternalMemoizedMergedChildContext=e,xs(As),xs(Ds),Es(Ds,e)):xs(As),Es(As,n)}var Fs=null,Bs=!1,zs=!1;function Ws(e){null===Fs?Fs=[e]:Fs.push(e)}function Hs(){if(!zs&&null!==Fs){zs=!0;var e=0,t=vt;try{var n=Fs;for(vt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Fs=null,Bs=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),Ke(Je,Hs),s}finally{vt=t,zs=!1}}return null}var Vs=[],js=0,Us=null,qs=0,Ks=[],Gs=0,Ys=null,Qs=1,Xs="";function Zs(e,t){Vs[js++]=qs,Vs[js++]=Us,Us=e,qs=t}function Js(e,t,n){Ks[Gs++]=Qs,Ks[Gs++]=Xs,Ks[Gs++]=Ys,Ys=e;var i=Qs;e=Xs;var s=32-ot(i)-1;i&=~(1<<s),n+=1;var r=32-ot(t)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Qs=1<<32-ot(t)+s|n<<s|i,Xs=r+e}else Qs=1<<r|n<<s|i,Xs=e}function er(e){null!==e.return&&(Zs(e,1),Js(e,1,0))}function tr(e){for(;e===Us;)Us=Vs[--js],Vs[js]=null,qs=Vs[--js],Vs[js]=null;for(;e===Ys;)Ys=Ks[--Gs],Ks[Gs]=null,Xs=Ks[--Gs],Ks[Gs]=null,Qs=Ks[--Gs],Ks[Gs]=null}var nr=null,ir=null,sr=!1,rr=null;function or(e,t){var n=Ic(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ar(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,nr=e,ir=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,nr=e,ir=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ys?{id:Qs,overflow:Xs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ic(18,null,null,0)).stateNode=t,n.return=e,e.child=n,nr=e,ir=null,!0);default:return!1}}function lr(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cr(e){if(sr){var t=ir;if(t){var n=t;if(!ar(e,t)){if(lr(e))throw Error(r(418));t=cs(n.nextSibling);var i=nr;t&&ar(e,t)?or(i,n):(e.flags=-4097&e.flags|2,sr=!1,nr=e)}}else{if(lr(e))throw Error(r(418));e.flags=-4097&e.flags|2,sr=!1,nr=e}}}function ur(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;nr=e}function hr(e){if(e!==nr)return!1;if(!sr)return ur(e),sr=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ir)){if(lr(e))throw dr(),Error(r(418));for(;t;)or(e,t),t=cs(t.nextSibling)}if(ur(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ir=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ir=null}}else ir=nr?cs(e.stateNode.nextSibling):null;return!0}function dr(){for(var e=ir;e;)e=cs(e.nextSibling)}function fr(){ir=nr=null,sr=!1}function gr(e){null===rr?rr=[e]:rr.push(e)}var pr=y.ReactCurrentBatchConfig;function mr(e,t){if(e&&e.defaultProps){for(var n in t=P({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var br=Cs(null),_r=null,vr=null,yr=null;function Sr(){yr=vr=_r=null}function wr(e){var t=br.current;xs(br),e._currentValue=t}function kr(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Cr(e,t){_r=e,yr=vr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ya=!0),e.firstContext=null)}function xr(e){var t=e._currentValue;if(yr!==e)if(e={context:e,memoizedValue:t,next:null},null===vr){if(null===_r)throw Error(r(308));vr=e,_r.dependencies={lanes:0,firstContext:e}}else vr=vr.next=e;return t}var Er=null;function Lr(e){null===Er?Er=[e]:Er.push(e)}function Dr(e,t,n,i){var s=t.interleaved;return null===s?(n.next=n,Lr(t)):(n.next=s.next,s.next=n),t.interleaved=n,Ar(e,i)}function Ar(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Tr=!1;function Nr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ir(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $r(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mr(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Al)){var s=i.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),i.pending=t,Ar(e,n)}return null===(s=i.interleaved)?(t.next=t,Lr(i)):(t.next=s.next,s.next=t),i.interleaved=t,Ar(e,n)}function Rr(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,_t(e,n)}}function Or(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var s=null,r=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===r?s=r=o:r=r.next=o,n=n.next}while(null!==n);null===r?s=r=t:r=r.next=t}else s=r=t;return n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Pr(e,t,n,i){var s=e.updateQueue;Tr=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?r=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==r){var h=s.baseState;for(o=0,u=c=l=null,a=r;;){var d=a.lane,f=a.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,p=a;switch(d=t,f=n,p.tag){case 1:if("function"===typeof(g=p.payload)){h=g.call(f,h,d);break e}h=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(d="function"===typeof(g=p.payload)?g.call(f,h,d):g)||void 0===d)break e;h=P({},h,d);break e;case 2:Tr=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=s.effects)?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(d=a).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===u&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{o|=s.lane,s=s.next}while(s!==t)}else null===r&&(s.shared.lanes=0);Pl|=o,e.lanes=o,e.memoizedState=h}}function Fr(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(null!==s){if(i.callback=null,i=n,"function"!==typeof s)throw Error(r(191,s));s.call(i)}}}var Br=(new i.Component).refs;function zr(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:P({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Wr={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tc(),s=nc(e),r=$r(i,s);r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Mr(e,r,s))&&(ic(t,e,s,i),Rr(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tc(),s=nc(e),r=$r(i,s);r.tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),null!==(t=Mr(e,r,s))&&(ic(t,e,s,i),Rr(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),i=nc(e),s=$r(n,i);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Mr(e,s,i))&&(ic(t,e,i,n),Rr(t,e,i))}};function Hr(e,t,n,i,s,r,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,r,o):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(s,r))}function Vr(e,t,n){var i=!1,s=Ls,r=t.contextType;return"object"===typeof r&&null!==r?r=xr(r):(s=Is(t)?Ts:Ds.current,r=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ns(e,s):Ls),t=new t(n,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Wr,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=r),t}function jr(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Wr.enqueueReplaceState(t,t.state,null)}function Ur(e,t,n,i){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs=Br,Nr(e);var r=t.contextType;"object"===typeof r&&null!==r?s.context=xr(r):(r=Is(t)?Ts:Ds.current,s.context=Ns(e,r)),s.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(zr(e,t,r,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&Wr.enqueueReplaceState(s,s.state,null),Pr(e,n,s,i),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function qr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(r(309));var i=n.stateNode}if(!i)throw Error(r(147,e));var s=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=s.refs;t===Br&&(t=s.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(r(284));if(!n._owner)throw Error(r(290,e))}return e}function Kr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gr(e){return(0,e._init)(e._payload)}function Yr(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Fc(n,e.mode,i)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,i){var r=n.type;return r===k?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===I&&Gr(r)===t.type)?((i=s(t,n.props)).ref=qr(e,t,n),i.return=e,i):((i=Rc(n.type,n.key,n.props,null,e.mode,i)).ref=qr(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,i)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function h(e,t,n,i,r){return null===t||7!==t.tag?((t=Oc(n,e.mode,i,r)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=qr(e,null,t),n.return=e,n;case w:return(t=Bc(t,e.mode,n)).return=e,t;case I:return d(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Oc(t,e.mode,n,null)).return=e,t;Kr(e,t)}return null}function f(e,t,n,i){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return n.key===s?c(e,t,n,i):null;case w:return n.key===s?u(e,t,n,i):null;case I:return f(e,t,(s=n._init)(n._payload),i)}if(te(n)||R(n))return null!==s?null:h(e,t,n,i,null);Kr(e,n)}return null}function g(e,t,n,i,s){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,s);if("object"===typeof i&&null!==i){switch(i.$$typeof){case S:return c(t,e=e.get(null===i.key?n:i.key)||null,i,s);case w:return u(t,e=e.get(null===i.key?n:i.key)||null,i,s);case I:return g(e,t,n,(0,i._init)(i._payload),s)}if(te(i)||R(i))return h(t,e=e.get(n)||null,i,s,null);Kr(t,i)}return null}function p(s,r,a,l){for(var c=null,u=null,h=r,p=r=0,m=null;null!==h&&p<a.length;p++){h.index>p?(m=h,h=null):m=h.sibling;var b=f(s,h,a[p],l);if(null===b){null===h&&(h=m);break}e&&h&&null===b.alternate&&t(s,h),r=o(b,r,p),null===u?c=b:u.sibling=b,u=b,h=m}if(p===a.length)return n(s,h),sr&&Zs(s,p),c;if(null===h){for(;p<a.length;p++)null!==(h=d(s,a[p],l))&&(r=o(h,r,p),null===u?c=h:u.sibling=h,u=h);return sr&&Zs(s,p),c}for(h=i(s,h);p<a.length;p++)null!==(m=g(h,s,p,a[p],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?p:m.key),r=o(m,r,p),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(s,e)})),sr&&Zs(s,p),c}function m(s,a,l,c){var u=R(l);if("function"!==typeof u)throw Error(r(150));if(null==(l=u.call(l)))throw Error(r(151));for(var h=u=null,p=a,m=a=0,b=null,_=l.next();null!==p&&!_.done;m++,_=l.next()){p.index>m?(b=p,p=null):b=p.sibling;var v=f(s,p,_.value,c);if(null===v){null===p&&(p=b);break}e&&p&&null===v.alternate&&t(s,p),a=o(v,a,m),null===h?u=v:h.sibling=v,h=v,p=b}if(_.done)return n(s,p),sr&&Zs(s,m),u;if(null===p){for(;!_.done;m++,_=l.next())null!==(_=d(s,_.value,c))&&(a=o(_,a,m),null===h?u=_:h.sibling=_,h=_);return sr&&Zs(s,m),u}for(p=i(s,p);!_.done;m++,_=l.next())null!==(_=g(p,s,m,_.value,c))&&(e&&null!==_.alternate&&p.delete(null===_.key?m:_.key),a=o(_,a,m),null===h?u=_:h.sibling=_,h=_);return e&&p.forEach((function(e){return t(s,e)})),sr&&Zs(s,m),u}return function e(i,r,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case S:e:{for(var c=o.key,u=r;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){n(i,u.sibling),(r=s(u,o.props.children)).return=i,i=r;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&Gr(c)===u.type){n(i,u.sibling),(r=s(u,o.props)).ref=qr(i,u,o),r.return=i,i=r;break e}n(i,u);break}t(i,u),u=u.sibling}o.type===k?((r=Oc(o.props.children,i.mode,l,o.key)).return=i,i=r):((l=Rc(o.type,o.key,o.props,null,i.mode,l)).ref=qr(i,r,o),l.return=i,i=l)}return a(i);case w:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(i,r.sibling),(r=s(r,o.children||[])).return=i,i=r;break e}n(i,r);break}t(i,r),r=r.sibling}(r=Bc(o,i.mode,l)).return=i,i=r}return a(i);case I:return e(i,r,(u=o._init)(o._payload),l)}if(te(o))return p(i,r,o,l);if(R(o))return m(i,r,o,l);Kr(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==r&&6===r.tag?(n(i,r.sibling),(r=s(r,o)).return=i,i=r):(n(i,r),(r=Fc(o,i.mode,l)).return=i,i=r),a(i)):n(i,r)}}var Qr=Yr(!0),Xr=Yr(!1),Zr={},Jr=Cs(Zr),eo=Cs(Zr),to=Cs(Zr);function no(e){if(e===Zr)throw Error(r(174));return e}function io(e,t){switch(Es(to,t),Es(eo,e),Es(Jr,Zr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}xs(Jr),Es(Jr,t)}function so(){xs(Jr),xs(eo),xs(to)}function ro(e){no(to.current);var t=no(Jr.current),n=le(t,e.type);t!==n&&(Es(eo,e),Es(Jr,n))}function oo(e){eo.current===e&&(xs(Jr),xs(eo))}var ao=Cs(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=y.ReactCurrentDispatcher,fo=y.ReactCurrentBatchConfig,go=0,po=null,mo=null,bo=null,_o=!1,vo=!1,yo=0,So=0;function wo(){throw Error(r(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function Co(e,t,n,i,s,o){if(go=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(i,s),vo){o=0;do{if(vo=!1,yo=0,25<=o)throw Error(r(301));o+=1,bo=mo=null,t.updateQueue=null,ho.current=ca,e=n(i,s)}while(vo)}if(ho.current=oa,t=null!==mo&&null!==mo.next,go=0,bo=mo=po=null,_o=!1,t)throw Error(r(300));return e}function xo(){var e=0!==yo;return yo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===bo?po.memoizedState=bo=e:bo=bo.next=e,bo}function Lo(){if(null===mo){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===bo?po.memoizedState:bo.next;if(null!==t)bo=t,mo=e;else{if(null===e)throw Error(r(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===bo?po.memoizedState=bo=e:bo=bo.next=e}return bo}function Do(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Lo(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=mo,s=i.baseQueue,o=n.pending;if(null!==o){if(null!==s){var a=s.next;s.next=o.next,o.next=a}i.baseQueue=s=o,n.pending=null}if(null!==s){o=s.next,i=i.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((go&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=i):c=c.next=d,po.lanes|=h,Pl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=i:c.next=l,ai(i,t.memoizedState)||(ya=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){s=e;do{o=s.lane,po.lanes|=o,Pl|=o,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function To(e){var t=Lo(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,s=n.pending,o=t.memoizedState;if(null!==s){n.pending=null;var a=s=s.next;do{o=e(o,a.action),a=a.next}while(a!==s);ai(o,t.memoizedState)||(ya=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function No(){}function Io(e,t){var n=po,i=Lo(),s=t(),o=!ai(i.memoizedState,s);if(o&&(i.memoizedState=s,ya=!0),i=i.queue,jo(Ro.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==bo&&1&bo.memoizedState.tag){if(n.flags|=2048,Bo(9,Mo.bind(null,n,i,s,t),void 0,null),null===Tl)throw Error(r(349));0!==(30&go)||$o(n,t,s)}return s}function $o(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Mo(e,t,n,i){t.value=n,t.getSnapshot=i,Oo(t)&&Po(e)}function Ro(e,t,n){return n((function(){Oo(t)&&Po(e)}))}function Oo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Po(e){var t=Ar(e,1);null!==t&&ic(t,e,1,-1)}function Fo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Do,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,po,e),[t.memoizedState,e]}function Bo(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function zo(){return Lo().memoizedState}function Wo(e,t,n,i){var s=Eo();po.flags|=e,s.memoizedState=Bo(1|t,n,void 0,void 0===i?null:i)}function Ho(e,t,n,i){var s=Lo();i=void 0===i?null:i;var r=void 0;if(null!==mo){var o=mo.memoizedState;if(r=o.destroy,null!==i&&ko(i,o.deps))return void(s.memoizedState=Bo(t,n,r,i))}po.flags|=e,s.memoizedState=Bo(1|t,n,r,i)}function Vo(e,t){return Wo(8390656,8,e,t)}function jo(e,t){return Ho(2048,8,e,t)}function Uo(e,t){return Ho(4,2,e,t)}function qo(e,t){return Ho(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ho(4,4,Ko.bind(null,t,e),n)}function Yo(){}function Qo(e,t){var n=Lo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ko(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=Lo();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ko(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0===(21&go)?(e.baseState&&(e.baseState=!1,ya=!0),e.memoizedState=n):(ai(n,t)||(n=pt(),po.lanes|=n,Pl|=n,e.baseState=!0),t)}function Jo(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var i=fo.transition;fo.transition={};try{e(!1),t()}finally{vt=n,fo.transition=i}}function ea(){return Lo().memoizedState}function ta(e,t,n){var i=nc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ia(e))sa(t,n);else if(null!==(n=Dr(e,t,n,i))){ic(n,e,i,tc()),ra(n,t,i)}}function na(e,t,n){var i=nc(e),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ia(e))sa(t,s);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,ai(a,o)){var l=t.interleaved;return null===l?(s.next=s,Lr(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(c){}null!==(n=Dr(e,t,s,i))&&(ic(n,e,i,s=tc()),ra(n,t,i))}}function ia(e){var t=e.alternate;return e===po||null!==t&&t===po}function sa(e,t){vo=_o=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ra(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,_t(e,n)}}var oa={readContext:xr,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},aa={readContext:xr,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:xr,useEffect:Vo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Wo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Wo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Eo();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ta.bind(null,po,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Fo,useDebugValue:Yo,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Fo(!1),t=e[0];return e=Jo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=po,s=Eo();if(sr){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===Tl)throw Error(r(349));0!==(30&go)||$o(i,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Vo(Ro.bind(null,i,o,e),[e]),i.flags|=2048,Bo(9,Mo.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Tl.identifierPrefix;if(sr){var n=Xs;t=":"+t+"R"+(n=(Qs&~(1<<32-ot(Qs)-1)).toString(32)+n),0<(n=yo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=So++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:xr,useCallback:Qo,useContext:xr,useEffect:jo,useImperativeHandle:Go,useInsertionEffect:Uo,useLayoutEffect:qo,useMemo:Xo,useReducer:Ao,useRef:zo,useState:function(){return Ao(Do)},useDebugValue:Yo,useDeferredValue:function(e){return Zo(Lo(),mo.memoizedState,e)},useTransition:function(){return[Ao(Do)[0],Lo().memoizedState]},useMutableSource:No,useSyncExternalStore:Io,useId:ea,unstable_isNewReconciler:!1},ca={readContext:xr,useCallback:Qo,useContext:xr,useEffect:jo,useImperativeHandle:Go,useInsertionEffect:Uo,useLayoutEffect:qo,useMemo:Xo,useReducer:To,useRef:zo,useState:function(){return To(Do)},useDebugValue:Yo,useDeferredValue:function(e){var t=Lo();return null===mo?t.memoizedState=e:Zo(t,mo.memoizedState,e)},useTransition:function(){return[To(Do)[0],Lo().memoizedState]},useMutableSource:No,useSyncExternalStore:Io,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",i=t;do{n+=W(i),i=i.return}while(i);var s=n}catch(r){s="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:t,stack:s,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function ga(e,t,n){(n=$r(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Ul||(Ul=!0,ql=i),da(0,t)},n}function pa(e,t,n){(n=$r(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var s=t.value;n.payload=function(){return i(s)},n.callback=function(){da(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof i&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new fa;var s=new Set;i.set(t,s)}else void 0===(s=i.get(t))&&(s=new Set,i.set(t,s));s.has(n)||(s.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ba(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function _a(e,t,n,i,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=$r(-1,1)).tag=2,Mr(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var va=y.ReactCurrentOwner,ya=!1;function Sa(e,t,n,i){t.child=null===e?Xr(t,null,n,i):Qr(t,e.child,n,i)}function wa(e,t,n,i,s){n=n.render;var r=t.ref;return Cr(t,s),i=Co(e,t,n,i,r,s),n=xo(),null===e||ya?(sr&&n&&er(t),t.flags|=1,Sa(e,t,i,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ua(e,t,s))}function ka(e,t,n,i,s){if(null===e){var r=n.type;return"function"!==typeof r||$c(r)||void 0!==r.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,i,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Ca(e,t,r,i,s))}if(r=e.child,0===(e.lanes&s)){var o=r.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&e.ref===t.ref)return Ua(e,t,s)}return t.flags|=1,(e=Mc(r,i)).ref=t.ref,e.return=t,t.child=e}function Ca(e,t,n,i,s){if(null!==e){var r=e.memoizedProps;if(li(r,i)&&e.ref===t.ref){if(ya=!1,t.pendingProps=i=r,0===(e.lanes&s))return t.lanes=e.lanes,Ua(e,t,s);0!==(131072&e.flags)&&(ya=!0)}}return La(e,t,n,i,s)}function xa(e,t,n){var i=t.pendingProps,s=i.children,r=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Es(Ml,$l),$l|=n;else{if(0===(1073741824&n))return e=null!==r?r.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Es(Ml,$l),$l|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==r?r.baseLanes:n,Es(Ml,$l),$l|=i}else null!==r?(i=r.baseLanes|n,t.memoizedState=null):i=n,Es(Ml,$l),$l|=i;return Sa(e,t,s,n),t.child}function Ea(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function La(e,t,n,i,s){var r=Is(n)?Ts:Ds.current;return r=Ns(t,r),Cr(t,s),n=Co(e,t,n,i,r,s),i=xo(),null===e||ya?(sr&&i&&er(t),t.flags|=1,Sa(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ua(e,t,s))}function Da(e,t,n,i,s){if(Is(n)){var r=!0;Os(t)}else r=!1;if(Cr(t,s),null===t.stateNode)ja(e,t),Vr(t,n,i),Ur(t,n,i,s),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=xr(c):c=Ns(t,c=Is(n)?Ts:Ds.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==c)&&jr(t,o,i,c),Tr=!1;var d=t.memoizedState;o.state=d,Pr(t,i,o,s),l=t.memoizedState,a!==i||d!==l||As.current||Tr?("function"===typeof u&&(zr(t,n,u,i),l=t.memoizedState),(a=Tr||Hr(t,n,a,i,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Ir(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:mr(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=xr(l):l=Ns(t,l=Is(n)?Ts:Ds.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&jr(t,o,i,l),Tr=!1,d=t.memoizedState,o.state=d,Pr(t,i,o,s);var g=t.memoizedState;a!==h||d!==g||As.current||Tr?("function"===typeof f&&(zr(t,n,f,i),g=t.memoizedState),(c=Tr||Hr(t,n,c,i,d,g,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,g,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,g,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),o.props=i,o.state=g,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Aa(e,t,n,i,r,s)}function Aa(e,t,n,i,s,r){Ea(e,t);var o=0!==(128&t.flags);if(!i&&!o)return s&&Ps(t,n,!1),Ua(e,t,r);i=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=Qr(t,e.child,null,r),t.child=Qr(t,null,a,r)):Sa(e,t,a,r),t.memoizedState=i.state,s&&Ps(t,n,!0),t.child}function Ta(e){var t=e.stateNode;t.pendingContext?Ms(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ms(0,t.context,!1),io(e,t.containerInfo)}function Na(e,t,n,i,s){return fr(),gr(s),t.flags|=256,Sa(e,t,n,i),t.child}var Ia,$a,Ma,Ra,Oa={dehydrated:null,treeContext:null,retryLane:0};function Pa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var i,s=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Es(ao,1&o),null===e)return cr(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,a?(s=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Pc(l,s,0,null),e=Oc(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Pa(n),t.memoizedState=Oa,e):Ba(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,s,o,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,i=ha(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,s=t.mode,i=Pc({mode:"visible",children:i.children},s,0,null),(o=Oc(o,s,a,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&Qr(t,e.child,null,a),t.child.memoizedState=Pa(a),t.memoizedState=Oa,o);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===s.data){if(i=s.nextSibling&&s.nextSibling.dataset)var l=i.dgst;return i=l,za(e,t,a,i=ha(o=Error(r(419)),i,void 0))}if(l=0!==(a&e.childLanes),ya||l){if(null!==(i=Tl)){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(i.suspendedLanes|a))?0:s)&&s!==o.retryLane&&(o.retryLane=s,Ar(e,s),ic(i,e,s,-1))}return mc(),za(e,t,a,i=ha(Error(r(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Dc.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,ir=cs(s.nextSibling),nr=t,sr=!0,rr=null,null!==e&&(Ks[Gs++]=Qs,Ks[Gs++]=Xs,Ks[Gs++]=Ys,Qs=e.id,Xs=e.overflow,Ys=t),t=Ba(t,i.children),t.flags|=4096,t)}(e,t,l,s,i,o,n);if(a){a=s.fallback,l=t.mode,i=(o=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==o?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Mc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=Mc(i,a):(a=Oc(a,l,n,null)).flags|=2,a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=null===(l=e.child.memoizedState)?Pa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Oa,s}return e=(a=e.child).sibling,s=Mc(a,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Ba(e,t){return(t=Pc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,i){return null!==i&&gr(i),Qr(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wa(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),kr(e.return,t,n)}function Ha(e,t,n,i,s){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=s)}function Va(e,t,n){var i=t.pendingProps,s=i.revealOrder,r=i.tail;if(Sa(e,t,i.children,n),0!==(2&(i=ao.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wa(e,n,t);else if(19===e.tag)Wa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Es(ao,i),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ha(t,!1,s,n,r);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===lo(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ha(t,!0,n,null,r);break;case"together":Ha(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ja(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ua(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Pl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qa(e,t){if(!sr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=14680064&s.subtreeFlags,i|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ga(e,t,n){var i=t.pendingProps;switch(tr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Is(t.type)&&$s(),Ka(t),null;case 3:return i=t.stateNode,so(),xs(As),xs(Ds),uo(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(hr(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rr&&(ac(rr),rr=null))),$a(e,t),Ka(t),null;case 5:oo(t);var s=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ma(e,t,n,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(r(166));return Ka(t),null}if(e=no(Jr.current),hr(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[ds]=t,i[fs]=o,e=0!==(1&t.mode),n){case"dialog":Bi("cancel",i),Bi("close",i);break;case"iframe":case"object":case"embed":Bi("load",i);break;case"video":case"audio":for(s=0;s<Ri.length;s++)Bi(Ri[s],i);break;case"source":Bi("error",i);break;case"img":case"image":case"link":Bi("error",i),Bi("load",i);break;case"details":Bi("toggle",i);break;case"input":Q(i,o),Bi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Bi("invalid",i);break;case"textarea":se(i,o),Bi("invalid",i)}for(var l in _e(n,o),s=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zi(i.textContent,c,e),s=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zi(i.textContent,c,e),s=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bi("scroll",i)}switch(n){case"input":q(i),J(i,o,!0);break;case"textarea":q(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Ji)}i=s,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[ds]=t,e[fs]=i,Ia(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,i),n){case"dialog":Bi("cancel",e),Bi("close",e),s=i;break;case"iframe":case"object":case"embed":Bi("load",e),s=i;break;case"video":case"audio":for(s=0;s<Ri.length;s++)Bi(Ri[s],e);s=i;break;case"source":Bi("error",e),s=i;break;case"img":case"image":case"link":Bi("error",e),Bi("load",e),s=i;break;case"details":Bi("toggle",e),s=i;break;case"input":Q(e,i),s=Y(e,i),Bi("invalid",e);break;case"option":default:s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=P({},i,{value:void 0}),Bi("invalid",e);break;case"textarea":se(e,i),s=ie(e,i),Bi("invalid",e)}for(o in _e(n,s),c=s)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Bi("scroll",e):null!=u&&v(e,o,u,l))}switch(n){case"input":q(e),J(e,i,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+j(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Ji)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Ra(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(r(166));if(n=no(to.current),no(Jr.current),hr(t)){if(i=t.stateNode,n=t.memoizedProps,i[ds]=t,(o=i.nodeValue!==n)&&null!==(e=nr))switch(e.tag){case 3:Zi(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zi(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[ds]=t,t.stateNode=i}return Ka(t),null;case 13:if(xs(ao),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(sr&&null!==ir&&0!==(1&t.mode)&&0===(128&t.flags))dr(),fr(),t.flags|=98560,o=!1;else if(o=hr(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));o[ds]=t}else fr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==rr&&(ac(rr),rr=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Rl&&(Rl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return so(),$a(e,t),null===e&&Hi(t.stateNode.containerInfo),Ka(t),null;case 10:return wr(t.type._context),Ka(t),null;case 19:if(xs(ao),null===(o=t.memoizedState))return Ka(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)qa(o,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,qa(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Es(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Vl&&(t.flags|=128,i=!0,qa(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=lo(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!sr)return Ka(t),null}else 2*Xe()-o.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,i=!0,qa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ao.current,Es(ao,i?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&$l)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function Ya(e,t){switch(tr(t),t.tag){case 1:return Is(t.type)&&$s(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return so(),xs(As),xs(Ds),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(xs(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));fr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return xs(ao),null;case 4:return so(),null;case 10:return wr(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ia=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},$a=function(){},Ma=function(e,t,n,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,no(Jr.current);var r,o=null;switch(n){case"input":s=Y(e,s),i=Y(e,i),o=[];break;case"select":s=P({},s,{value:void 0}),i=P({},i,{value:void 0}),o=[];break;case"textarea":s=ie(e,s),i=ie(e,i),o=[];break;default:"function"!==typeof s.onClick&&"function"===typeof i.onClick&&(e.onclick=Ji)}for(u in _e(n,i),n=null,s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(r in l)l.hasOwnProperty(r)&&(n||(n={}),n[r]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=s?s[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(r in l)!l.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(n||(n={}),n[r]="");for(r in c)c.hasOwnProperty(r)&&l[r]!==c[r]&&(n||(n={}),n[r]=c[r])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Bi("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ra=function(e,t,n,i){n!==i&&(t.flags|=4)};var Qa=!1,Xa=!1,Za="function"===typeof WeakSet?WeakSet:Set,Ja=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){xc(e,t,i)}else n.current=null}function tl(e,t,n){try{n()}catch(i){xc(e,t,i)}}var nl=!1;function il(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var s=i=i.next;do{if((s.tag&e)===e){var r=s.destroy;s.destroy=void 0,void 0!==r&&tl(t,n,r)}s=s.next}while(s!==i)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ds],delete t[fs],delete t[ps],delete t[ms],delete t[bs])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ji));else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)gl(e,t,n),n=n.sibling}function gl(e,t,n){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(st,n)}catch(a){}switch(n.tag){case 5:Xa||el(n,t);case 6:var i=hl,s=dl;hl=null,fl(e,t,n),dl=s,null!==(hl=i)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Ht(e)):ls(hl,n.stateNode));break;case 4:i=hl,s=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=i,dl=s;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,void 0!==o&&(0!==(2&r)||0!==(4&r))&&tl(n,t,o),s=s.next}while(s!==i)}fl(e,t,n);break;case 1:if(!Xa&&(el(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){xc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xa=(i=Xa)||null!==n.memoizedState,fl(e,t,n),Xa=i):fl(e,t,n);break;default:fl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach((function(t){var i=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var s=n[i];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(r(160));gl(o,a,s),hl=null,dl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(u){xc(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)bl(t,e),t=t.sibling}function bl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),_l(e),4&i){try{il(3,e,e.return),sl(3,e)}catch(m){xc(e,e.return,m)}try{il(5,e,e.return)}catch(m){xc(e,e.return,m)}}break;case 1:ml(t,e),_l(e),512&i&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),_l(e),512&i&&null!==n&&el(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(m){xc(e,e.return,m)}}if(4&i&&null!=(s=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(s,o),ve(l,a);var u=ve(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?me(s,d):"dangerouslySetInnerHTML"===h?he(s,d):"children"===h?de(s,d):v(s,h,d,u)}switch(l){case"input":Z(s,o);break;case"textarea":re(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var g=o.value;null!=g?ne(s,!!o.multiple,g,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(s,!!o.multiple,o.defaultValue,!0):ne(s,!!o.multiple,o.multiple?[]:"",!1))}s[fs]=o}catch(m){xc(e,e.return,m)}}break;case 6:if(ml(t,e),_l(e),4&i){if(null===e.stateNode)throw Error(r(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(m){xc(e,e.return,m)}}break;case 3:if(ml(t,e),_l(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(m){xc(e,e.return,m)}break;case 4:default:ml(t,e),_l(e);break;case 13:ml(t,e),_l(e),8192&(s=e.child).flags&&(o=null!==s.memoizedState,s.stateNode.isHidden=o,!o||null!==s.alternate&&null!==s.alternate.memoizedState||(Hl=Xe())),4&i&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(u=Xa)||h,ml(t,e),Xa=u):ml(t,e),_l(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Ja=e,h=e.child;null!==h;){for(d=Ja=h;null!==Ja;){switch(g=(f=Ja).child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:el(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){i=f,n=f.return;try{t=i,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){xc(i,n,m)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){wl(d);continue}}null!==g?(g.return=f,Ja=g):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{s=d.stateNode,u?"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",a))}catch(m){xc(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){xc(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),_l(e),4&i&&pl(e);case 21:}}function _l(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var i=n;break e}n=n.return}throw Error(r(160))}switch(i.tag){case 5:var s=i.stateNode;32&i.flags&&(de(s,""),i.flags&=-33),ul(e,ll(e),s);break;case 3:case 4:var o=i.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(r(161))}}catch(a){xc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Ja=e,yl(e,t,n)}function yl(e,t,n){for(var i=0!==(1&e.mode);null!==Ja;){var s=Ja,r=s.child;if(22===s.tag&&i){var o=null!==s.memoizedState||Qa;if(!o){var a=s.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Qa;var c=Xa;if(Qa=o,(Xa=l)&&!c)for(Ja=s;null!==Ja;)l=(o=Ja).child,22===o.tag&&null!==o.memoizedState?kl(s):null!==l?(l.return=o,Ja=l):kl(s);for(;null!==r;)Ja=r,yl(r,t,n),r=r.sibling;Ja=s,Qa=a,Xa=c}Sl(e)}else 0!==(8772&s.subtreeFlags)&&null!==r?(r.return=s,Ja=r):Sl(e)}}function Sl(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||sl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Xa)if(null===n)i.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:mr(t.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fr(t,o,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fr(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ht(d)}}}break;default:throw Error(r(163))}Xa||512&t.flags&&rl(t)}catch(f){xc(t,t.return,f)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function wl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function kl(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(l){xc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var s=t.return;try{i.componentDidMount()}catch(l){xc(t,s,l)}}var r=t.return;try{rl(t)}catch(l){xc(t,r,l)}break;case 5:var o=t.return;try{rl(t)}catch(l){xc(t,o,l)}}}catch(l){xc(t,t.return,l)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var Cl,xl=Math.ceil,El=y.ReactCurrentDispatcher,Ll=y.ReactCurrentOwner,Dl=y.ReactCurrentBatchConfig,Al=0,Tl=null,Nl=null,Il=0,$l=0,Ml=Cs(0),Rl=0,Ol=null,Pl=0,Fl=0,Bl=0,zl=null,Wl=null,Hl=0,Vl=1/0,jl=null,Ul=!1,ql=null,Kl=null,Gl=!1,Yl=null,Ql=0,Xl=0,Zl=null,Jl=-1,ec=0;function tc(){return 0!==(6&Al)?Xe():-1!==Jl?Jl:Jl=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Il?Il&-Il:null!==pr.transition?(0===ec&&(ec=pt()),ec):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function ic(e,t,n,i){if(50<Xl)throw Xl=0,Zl=null,Error(r(185));bt(e,n,i),0!==(2&Al)&&e===Tl||(e===Tl&&(0===(2&Al)&&(Fl|=n),4===Rl&&lc(e,Il)),sc(e,i),1===n&&0===Al&&0===(1&t.mode)&&(Vl=Xe()+500,Bs&&Hs()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,r=e.pendingLanes;0<r;){var o=31-ot(r),a=1<<o,l=s[o];-1===l?0!==(a&n)&&0===(a&i)||(s[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),r&=~a}}(e,t);var i=dt(e,e===Tl?Il:0);if(0===i)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Bs=!0,Ws(e)}(cc.bind(null,e)):Ws(cc.bind(null,e)),os((function(){0===(6&Al)&&Hs()})),n=null;else{switch(yt(i)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Tc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Jl=-1,ec=0,0!==(6&Al))throw Error(r(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var i=dt(e,e===Tl?Il:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=bc(e,i);else{t=i;var s=Al;Al|=2;var o=pc();for(Tl===e&&Il===t||(jl=null,Vl=Xe()+500,fc(e,t));;)try{vc();break}catch(l){gc(e,l)}Sr(),El.current=o,Al=s,null!==Nl?t=0:(Tl=null,Il=0,t=Rl)}if(0!==t){if(2===t&&(0!==(s=gt(e))&&(i=s,t=oc(e,s))),1===t)throw n=Ol,fc(e,0),lc(e,i),sc(e,Xe()),n;if(6===t)lc(e,i);else{if(s=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!ai(r(),s))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=bc(e,i))&&(0!==(o=gt(e))&&(i=o,t=oc(e,o))),1===t))throw n=Ol,fc(e,0),lc(e,i),sc(e,Xe()),n;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(r(345));case 2:case 5:wc(e,Wl,jl);break;case 3:if(lc(e,i),(130023424&i)===i&&10<(t=Hl+500-Xe())){if(0!==dt(e,0))break;if(((s=e.suspendedLanes)&i)!==i){tc(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=is(wc.bind(null,e,Wl,jl),t);break}wc(e,Wl,jl);break;case 4:if(lc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,s=-1;0<i;){var a=31-ot(i);o=1<<a,(a=t[a])>s&&(s=a),i&=~o}if(i=s,10<(i=(120>(i=Xe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*xl(i/1960))-i)){e.timeoutHandle=is(wc.bind(null,e,Wl,jl),i);break}wc(e,Wl,jl);break;default:throw Error(r(329))}}}return sc(e,Xe()),e.callbackNode===n?rc.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=bc(e,t))&&(t=Wl,Wl=n,null!==t&&ac(t)),e}function ac(e){null===Wl?Wl=e:Wl.push.apply(Wl,e)}function lc(e,t){for(t&=~Bl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function cc(e){if(0!==(6&Al))throw Error(r(327));kc();var t=dt(e,0);if(0===(1&t))return sc(e,Xe()),null;var n=bc(e,t);if(0!==e.tag&&2===n){var i=gt(e);0!==i&&(t=i,n=oc(e,i))}if(1===n)throw n=Ol,fc(e,0),lc(e,t),sc(e,Xe()),n;if(6===n)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Wl,jl),sc(e,Xe()),null}function uc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Vl=Xe()+500,Bs&&Hs())}}function hc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&kc();var t=Al;Al|=1;var n=Dl.transition,i=vt;try{if(Dl.transition=null,vt=1,e)return e()}finally{vt=i,Dl.transition=n,0===(6&(Al=t))&&Hs()}}function dc(){$l=Ml.current,xs(Ml)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Nl)for(n=Nl.return;null!==n;){var i=n;switch(tr(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&$s();break;case 3:so(),xs(As),xs(Ds),uo();break;case 5:oo(i);break;case 4:so();break;case 13:case 19:xs(ao);break;case 10:wr(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Tl=e,Nl=e=Mc(e.current,null),Il=$l=t,Rl=0,Ol=null,Bl=Fl=Pl=0,Wl=zl=null,null!==Er){for(t=0;t<Er.length;t++)if(null!==(i=(n=Er[t]).interleaved)){n.interleaved=null;var s=i.next,r=n.pending;if(null!==r){var o=r.next;r.next=s,i.next=o}n.pending=i}Er=null}return e}function gc(e,t){for(;;){var n=Nl;try{if(Sr(),ho.current=oa,_o){for(var i=po.memoizedState;null!==i;){var s=i.queue;null!==s&&(s.pending=null),i=i.next}_o=!1}if(go=0,bo=mo=po=null,vo=!1,yo=0,Ll.current=null,null===n||null===n.return){Rl=1,Ol=t,Nl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Il,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=ba(a);if(null!==g){g.flags&=-257,_a(g,a,l,0,t),1&g.mode&&ma(o,u,t),c=u;var p=(t=g).updateQueue;if(null===p){var m=new Set;m.add(c),t.updateQueue=m}else p.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(r(426))}else if(sr&&1&l.mode){var b=ba(a);if(null!==b){0===(65536&b.flags)&&(b.flags|=256),_a(b,a,l,0,t),gr(ua(c,l));break e}}o=c=ua(c,l),4!==Rl&&(Rl=2),null===zl?zl=[o]:zl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Or(o,ga(0,c,t));break e;case 1:l=c;var _=o.type,v=o.stateNode;if(0===(128&o.flags)&&("function"===typeof _.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Kl||!Kl.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t,Or(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}Sc(n)}catch(y){t=y,Nl===n&&null!==n&&(Nl=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=oa,null===e?oa:e}function mc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Tl||0===(268435455&Pl)&&0===(268435455&Fl)||lc(Tl,Il)}function bc(e,t){var n=Al;Al|=2;var i=pc();for(Tl===e&&Il===t||(jl=null,fc(e,t));;)try{_c();break}catch(s){gc(e,s)}if(Sr(),Al=n,El.current=i,null!==Nl)throw Error(r(261));return Tl=null,Il=0,Rl}function _c(){for(;null!==Nl;)yc(Nl)}function vc(){for(;null!==Nl&&!Ye();)yc(Nl)}function yc(e){var t=Cl(e.alternate,e,$l);e.memoizedProps=e.pendingProps,null===t?Sc(e):Nl=t,Ll.current=null}function Sc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,$l)))return void(Nl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Nl=n);if(null===e)return Rl=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nl=t);Nl=t=e}while(null!==t);0===Rl&&(Rl=5)}function wc(e,t,n){var i=vt,s=Dl.transition;try{Dl.transition=null,vt=1,function(e,t,n,i){do{kc()}while(null!==Yl);if(0!==(6&Al))throw Error(r(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ot(n),r=1<<s;t[s]=0,i[s]=-1,e[s]=-1,n&=~r}}(e,o),e===Tl&&(Nl=Tl=null,Il=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Tc(tt,(function(){return kc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Dl.transition,Dl.transition=null;var a=vt;vt=1;var l=Al;Al|=4,Ll.current=null,function(e,t){if(es=jt,fi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(S){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var g;d!==n||0!==s&&3!==d.nodeType||(l=a+s),d!==o||0!==i&&3!==d.nodeType||(c=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(g=d.firstChild);)f=d,d=g;for(;;){if(d===e)break t;if(f===n&&++u===s&&(l=a),f===o&&++h===i&&(c=a),null!==(g=d.nextSibling))break;f=(d=f).parentNode}d=g}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},jt=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,b=p.memoizedState,_=t.stateNode,v=_.getSnapshotBeforeUpdate(t.elementType===t.type?m:mr(t.type,m),b);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(r(163))}}catch(S){xc(t,t.return,S)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}p=nl,nl=!1}(e,n),bl(n,e),gi(ts),jt=!!es,ts=es=null,e.current=n,vl(n,e,s),Qe(),Al=l,vt=a,Dl.transition=o}else e.current=n;if(Gl&&(Gl=!1,Yl=e,Ql=s),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,Xe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Ul)throw Ul=!1,e=ql,ql=null,e;0!==(1&Ql)&&0!==e.tag&&kc(),o=e.pendingLanes,0!==(1&o)?e===Zl?Xl++:(Xl=0,Zl=e):Xl=0,Hs()}(e,t,n,i)}finally{Dl.transition=s,vt=i}return null}function kc(){if(null!==Yl){var e=yt(Ql),t=Dl.transition,n=vt;try{if(Dl.transition=null,vt=16>e?16:e,null===Yl)var i=!1;else{if(e=Yl,Yl=null,Ql=0,0!==(6&Al))throw Error(r(331));var s=Al;for(Al|=4,Ja=e.current;null!==Ja;){var o=Ja,a=o.child;if(0!==(16&Ja.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var h=Ja;switch(h.tag){case 0:case 11:case 15:il(8,h,o)}var d=h.child;if(null!==d)d.return=h,Ja=d;else for(;null!==Ja;){var f=(h=Ja).sibling,g=h.return;if(ol(h),h===u){Ja=null;break}if(null!==f){f.return=g,Ja=f;break}Ja=g}}}var p=o.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var b=m.sibling;m.sibling=null,m=b}while(null!==m)}}Ja=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(o=Ja).flags))switch(o.tag){case 0:case 11:case 15:il(9,o,o.return)}var _=o.sibling;if(null!==_){_.return=o.return,Ja=_;break e}Ja=o.return}}var v=e.current;for(Ja=v;null!==Ja;){var y=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==y)y.return=a,Ja=y;else e:for(a=v;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(w){xc(l,l.return,w)}if(l===a){Ja=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,Ja=S;break e}Ja=l.return}}if(Al=s,Hs(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(st,e)}catch(w){}i=!0}return i}finally{vt=n,Dl.transition=t}}return!1}function Cc(e,t,n){e=Mr(e,t=ga(0,t=ua(n,t),1),1),t=tc(),null!==e&&(bt(e,1,t),sc(e,t))}function xc(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Kl||!Kl.has(i))){t=Mr(t,e=pa(t,e=ua(n,e),1),1),e=tc(),null!==t&&(bt(t,1,e),sc(t,e));break}}t=t.return}}function Ec(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Tl===e&&(Il&n)===n&&(4===Rl||3===Rl&&(130023424&Il)===Il&&500>Xe()-Hl?fc(e,0):Bl|=n),sc(e,t)}function Lc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Ar(e,t))&&(bt(e,t,n),sc(e,n))}function Dc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Lc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(r(314))}null!==i&&i.delete(t),Lc(e,n)}function Tc(e,t){return Ke(e,t)}function Nc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ic(e,t,n,i){return new Nc(e,t,n,i)}function $c(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Ic(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,i,s,o){var a=2;if(i=e,"function"===typeof e)$c(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Oc(n.children,s,o,t);case C:a=8,s|=8;break;case x:return(e=Ic(12,n,t,2|s)).elementType=x,e.lanes=o,e;case A:return(e=Ic(13,n,t,s)).elementType=A,e.lanes=o,e;case T:return(e=Ic(19,n,t,s)).elementType=T,e.lanes=o,e;case $:return Pc(n,s,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:a=10;break e;case L:a=9;break e;case D:a=11;break e;case N:a=14;break e;case I:a=16,i=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Ic(a,n,t,s)).elementType=e,t.type=i,t.lanes=o,t}function Oc(e,t,n,i){return(e=Ic(7,e,i,t)).lanes=n,e}function Pc(e,t,n,i){return(e=Ic(22,e,i,t)).elementType=$,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Ic(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Ic(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wc(e,t,n,i,s,r,o,a,l){return e=new zc(e,t,n,a,l),1===t?(t=1,!0===r&&(t|=8)):t=0,r=Ic(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nr(r),e}function Hc(e){if(!e)return Ls;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Is(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var n=e.type;if(Is(n))return Rs(e,n,t)}return t}function Vc(e,t,n,i,s,r,o,a,l){return(e=Wc(n,i,!0,e,0,r,0,a,l)).context=Hc(null),n=e.current,(r=$r(i=tc(),s=nc(n))).callback=void 0!==t&&null!==t?t:null,Mr(n,r,s),e.current.lanes=s,bt(e,s,i),sc(e,i),e}function jc(e,t,n,i){var s=t.current,r=tc(),o=nc(s);return n=Hc(n),null===t.context?t.context=n:t.pendingContext=n,(t=$r(r,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Mr(s,t,o))&&(ic(e,s,o,r),Rr(e,s,o)),o}function Uc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||As.current)ya=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ya=!1,function(e,t,n){switch(t.tag){case 3:Ta(t),fr();break;case 5:ro(t);break;case 1:Is(t.type)&&Os(t);break;case 4:io(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;Es(br,i._currentValue),i._currentValue=s;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Es(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Es(ao,1&ao.current),null!==(e=Ua(e,t,n))?e.sibling:null);Es(ao,1&ao.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Va(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Es(ao,ao.current),i)break;return null;case 22:case 23:return t.lanes=0,xa(e,t,n)}return Ua(e,t,n)}(e,t,n);ya=0!==(131072&e.flags)}else ya=!1,sr&&0!==(1048576&t.flags)&&Js(t,qs,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;ja(e,t),e=t.pendingProps;var s=Ns(t,Ds.current);Cr(t,n),s=Co(null,t,i,e,s,n);var o=xo();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Is(i)?(o=!0,Os(t)):o=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Nr(t),s.updater=Wr,t.stateNode=s,s._reactInternals=t,Ur(t,i,e,n),t=Aa(null,t,i,!0,o,n)):(t.tag=0,sr&&o&&er(t),Sa(null,t,s,n),t=t.child),t;case 16:i=t.elementType;e:{switch(ja(e,t),e=t.pendingProps,i=(s=i._init)(i._payload),t.type=i,s=t.tag=function(e){if("function"===typeof e)return $c(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===D)return 11;if(e===N)return 14}return 2}(i),e=mr(i,e),s){case 0:t=La(null,t,i,e,n);break e;case 1:t=Da(null,t,i,e,n);break e;case 11:t=wa(null,t,i,e,n);break e;case 14:t=ka(null,t,i,mr(i.type,e),n);break e}throw Error(r(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,La(e,t,i,s=t.elementType===i?s:mr(i,s),n);case 1:return i=t.type,s=t.pendingProps,Da(e,t,i,s=t.elementType===i?s:mr(i,s),n);case 3:e:{if(Ta(t),null===e)throw Error(r(387));i=t.pendingProps,s=(o=t.memoizedState).element,Ir(e,t),Pr(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Na(e,t,i,n,s=ua(Error(r(423)),t));break e}if(i!==s){t=Na(e,t,i,n,s=ua(Error(r(424)),t));break e}for(ir=cs(t.stateNode.containerInfo.firstChild),nr=t,sr=!0,rr=null,n=Xr(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fr(),i===s){t=Ua(e,t,n);break e}Sa(e,t,i,n)}t=t.child}return t;case 5:return ro(t),null===e&&cr(t),i=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,a=s.children,ns(i,s)?a=null:null!==o&&ns(i,o)&&(t.flags|=32),Ea(e,t),Sa(e,t,a,n),t.child;case 6:return null===e&&cr(t),null;case 13:return Fa(e,t,n);case 4:return io(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Qr(t,null,i,n):Sa(e,t,i,n),t.child;case 11:return i=t.type,s=t.pendingProps,wa(e,t,i,s=t.elementType===i?s:mr(i,s),n);case 7:return Sa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Sa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Es(br,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===s.children&&!As.current){t=Ua(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=$r(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),kr(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(r(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),kr(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Sa(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,Cr(t,n),i=i(s=xr(s)),t.flags|=1,Sa(e,t,i,n),t.child;case 14:return s=mr(i=t.type,t.pendingProps),ka(e,t,i,s=mr(i.type,s),n);case 15:return Ca(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:mr(i,s),ja(e,t),t.tag=1,Is(i)?(e=!0,Os(t)):e=!1,Cr(t,n),Vr(t,i,s),Ur(t,i,s,n),Aa(null,t,i,!0,e,n);case 19:return Va(e,t,n);case 22:return xa(e,t,n)}throw Error(r(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function eu(e,t,n,i,s){var r=n._reactRootContainer;if(r){var o=r;if("function"===typeof s){var a=s;s=function(){var e=Uc(o);a.call(e)}}jc(t,o,e,s)}else o=function(e,t,n,i,s){if(s){if("function"===typeof i){var r=i;i=function(){var e=Uc(o);r.call(e)}}var o=Vc(t,i,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[gs]=o.current,Hi(8===e.nodeType?e.parentNode:e),hc(),o}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof i){var a=i;i=function(){var e=Uc(l);a.call(e)}}var l=Wc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[gs]=l.current,Hi(8===e.nodeType?e.parentNode:e),hc((function(){jc(t,l,n,i)})),l}(n,t,e,s,i);return Uc(o)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));jc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){jc(null,e,null,null)})),t[gs]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<$t.length&&0!==t&&t<$t[n].priority;n++);$t.splice(n,0,e),0===n&&Pt(e)}},St=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(_t(t,1|n),sc(t,Xe()),0===(6&Al)&&(Vl=Xe()+500,Hs()))}break;case 13:hc((function(){var t=Ar(e,1);if(null!==t){var n=tc();ic(t,e,1,n)}})),Kc(e,1)}},wt=function(e){if(13===e.tag){var t=Ar(e,134217728);if(null!==t)ic(t,e,134217728,tc());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=nc(e),n=Ar(e,t);if(null!==n)ic(n,e,t,tc());Kc(e,t)}},Ct=function(){return vt},xt=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},we=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var s=Ss(i);if(!s)throw Error(r(90));K(i),Z(i,s)}}}break;case"textarea":re(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},De=uc,Ae=hc;var tu={usingClientEntryPoint:!1,Events:[vs,ys,Ss,Ee,Le,uc]},nu={findFiberByHostInstance:_s,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ue(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var su=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!su.isDisabled&&su.supportsFiber)try{st=su.inject(iu),rt=su}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(r(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(r(299));var n=!1,i="",s=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Wc(e,1,!1,null,0,n,0,i,s),e[gs]=t.current,Hi(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=Ue(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(r(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(r(405));var i=null!=n&&n.hydratedSources||null,s=!1,o="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Vc(t,null,e,1,null!=n?n:null,s,0,o,a),e[gs]=t.current,Hi(e),i)for(e=0;e<i.length;e++)s=(s=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Qc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(r(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(r(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[gs]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Zc(n))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return eu(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{"use strict";var i=n(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},216:(e,t,n)=>{"use strict";var i;n.d(t,{BV:()=>N,Ix:()=>T,Zp:()=>m,qh:()=>A});var s=n(43),r=n(387);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o.apply(this,arguments)}const a=s.createContext(null);const l=s.createContext(null);const c=s.createContext(null);const u=s.createContext(null);const h=s.createContext({outlet:null,matches:[],isDataRoute:!1});const d=s.createContext(null);function f(){return null!=s.useContext(u)}function g(){return f()||(0,r.Oi)(!1),s.useContext(u).location}function p(e){s.useContext(c).static||s.useLayoutEffect(e)}function m(){let{isDataRoute:e}=s.useContext(h);return e?function(){let{router:e}=x(k.UseNavigateStable),t=L(C.UseNavigateStable),n=s.useRef(!1);return p((()=>{n.current=!0})),s.useCallback((function(i,s){void 0===s&&(s={}),n.current&&("number"===typeof i?e.navigate(i):e.navigate(i,o({fromRouteId:t},s)))}),[e,t])}():function(){f()||(0,r.Oi)(!1);let e=s.useContext(a),{basename:t,future:n,navigator:i}=s.useContext(c),{matches:o}=s.useContext(h),{pathname:l}=g(),u=JSON.stringify((0,r.yD)(o,n.v7_relativeSplatPath)),d=s.useRef(!1);return p((()=>{d.current=!0})),s.useCallback((function(n,s){if(void 0===s&&(s={}),!d.current)return;if("number"===typeof n)return void i.go(n);let o=(0,r.Gh)(n,JSON.parse(u),l,"path"===s.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:(0,r.HS)([t,o.pathname])),(s.replace?i.replace:i.push)(o,s.state,s)}),[t,i,u,l,e])}()}function b(e,t,n,i){f()||(0,r.Oi)(!1);let{navigator:a}=s.useContext(c),{matches:l}=s.useContext(h),d=l[l.length-1],p=d?d.params:{},m=(d&&d.pathname,d?d.pathnameBase:"/");d&&d.route;let b,_=g();if(t){var v;let e="string"===typeof t?(0,r.Rr)(t):t;"/"===m||(null==(v=e.pathname)?void 0:v.startsWith(m))||(0,r.Oi)(!1),b=e}else b=_;let y=b.pathname||"/",S=y;if("/"!==m){let e=m.replace(/^\//,"").split("/");S="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let k=(0,r.ue)(e,{pathname:S});let C=w(k&&k.map((e=>Object.assign({},e,{params:Object.assign({},p,e.params),pathname:(0,r.HS)([m,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?m:(0,r.HS)([m,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),l,n,i);return t&&C?s.createElement(u.Provider,{value:{location:o({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:r.rc.Pop}},C):C}function _(){let e=function(){var e;let t=s.useContext(d),n=E(C.UseRouteError),i=L(C.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=(0,r.pX)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:o},n):null,null)}const v=s.createElement(_,null);class y extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(h.Provider,{value:this.props.routeContext},s.createElement(d.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function S(e){let{routeContext:t,match:n,children:i}=e,r=s.useContext(a);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(h.Provider,{value:t},i)}function w(e,t,n,i){var o;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var a;if(null==(a=n)||!a.errors)return null;e=n.matches}let l=e,c=null==(o=n)?void 0:o.errors;if(null!=c){let e=l.findIndex((e=>e.route.id&&(null==c?void 0:c[e.route.id])));e>=0||(0,r.Oi)(!1),l=l.slice(0,Math.min(l.length,e+1))}let u=!1,h=-1;if(n&&i&&i.v7_partialHydration)for(let s=0;s<l.length;s++){let e=l[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=s),e.route.id){let{loaderData:t,errors:i}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!i||void 0===i[e.route.id]);if(e.route.lazy||s){u=!0,l=h>=0?l.slice(0,h+1):[l[0]];break}}}return l.reduceRight(((e,i,r)=>{let o,a=!1,d=null,f=null;var g;n&&(o=c&&i.route.id?c[i.route.id]:void 0,d=i.route.errorElement||v,u&&(h<0&&0===r?(g="route-fallback",!1||D[g]||(D[g]=!0),a=!0,f=null):h===r&&(a=!0,f=i.route.hydrateFallbackElement||null)));let p=t.concat(l.slice(0,r+1)),m=()=>{let t;return t=o?d:a?f:i.route.Component?s.createElement(i.route.Component,null):i.route.element?i.route.element:e,s.createElement(S,{match:i,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===r)?s.createElement(y,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()}),null)}var k=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(k||{}),C=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(C||{});function x(e){let t=s.useContext(a);return t||(0,r.Oi)(!1),t}function E(e){let t=s.useContext(l);return t||(0,r.Oi)(!1),t}function L(e){let t=function(e){let t=s.useContext(h);return t||(0,r.Oi)(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||(0,r.Oi)(!1),n.route.id}const D={};(i||(i=n.t(s,2))).startTransition;function A(e){(0,r.Oi)(!1)}function T(e){let{basename:t="/",children:n=null,location:i,navigationType:a=r.rc.Pop,navigator:l,static:h=!1,future:d}=e;f()&&(0,r.Oi)(!1);let g=t.replace(/^\/*/,"/"),p=s.useMemo((()=>({basename:g,navigator:l,static:h,future:o({v7_relativeSplatPath:!1},d)})),[g,d,l,h]);"string"===typeof i&&(i=(0,r.Rr)(i));let{pathname:m="/",search:b="",hash:_="",state:v=null,key:y="default"}=i,S=s.useMemo((()=>{let e=(0,r.pb)(m,g);return null==e?null:{location:{pathname:e,search:b,hash:_,state:v,key:y},navigationType:a}}),[g,m,b,_,v,y,a]);return null==S?null:s.createElement(c.Provider,{value:p},s.createElement(u.Provider,{children:n,value:S}))}function N(e){let{children:t,location:n}=e;return b(I(t),n)}new Promise((()=>{}));s.Component;function I(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,((e,i)=>{if(!s.isValidElement(e))return;let o=[...t,i];if(e.type===s.Fragment)return void n.push.apply(n,I(e.props.children,o));e.type!==A&&(0,r.Oi)(!1),e.props.index&&e.props.children&&(0,r.Oi)(!1);let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=I(e.props.children,o)),n.push(a)})),n}},153:(e,t,n)=>{"use strict";var i=n(43),s=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,r={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===r[i]&&(r[i]=t[i]);return{$$typeof:s,type:e,key:c,ref:u,props:r,_owner:a.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}function _(){}function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=b.prototype;var y=v.prototype=new _;y.constructor=v,p(y,b.prototype),y.isPureReactComponent=!0;var S=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,i){var s,r={},o=null,a=null;if(null!=t)for(s in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,s)&&!C.hasOwnProperty(s)&&(r[s]=t[s]);var l=arguments.length-2;if(1===l)r.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===r[s]&&(r[s]=l[s]);return{$$typeof:n,type:e,key:o,ref:a,props:r,_owner:k.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var L=/\/+/g;function D(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,s,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===r?"."+D(l,0):r,S(o)?(s="",null!=e&&(s=e.replace(L,"$&/")+"/"),A(o,t,s,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,s+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(L,"$&/")+"/")+e)),t.push(o)),1;if(l=0,r=""===r?".":r+":",S(e))for(var c=0;c<e.length;c++){var u=r+D(a=e[c],c);l+=A(a,t,s,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,s,u=r+D(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var i=[],s=0;return A(e,i,"","",(function(e){return t.call(n,e,s++)})),i}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},$={transition:null},M={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:$,ReactCurrentOwner:k};t.Children={map:T,forEach:function(e,t,n){T(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return T(e,(function(){t++})),t},toArray:function(e){return T(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=s,t.Profiler=o,t.PureComponent=v,t.StrictMode=r,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=p({},e.props),r=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!C.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:r,ref:o,props:s,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=x,t.createFactory=function(e){var t=x.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=$.transition;$.transition={};try{e()}finally{$.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,s=e[i];if(!(0<r(s,t)))break e;e[i]=t,e[n]=s,n=i}}function i(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,s=e.length,o=s>>>1;i<o;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>r(l,n))c<s&&0>r(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<s&&0>r(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function r(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,g=!1,p=!1,m=!1,b="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=i(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function S(e){if(m=!1,y(e),!p)if(null!==i(c))p=!0,$(w);else{var t=i(u);null!==t&&M(S,t.startTime-e)}}function w(e,n){p=!1,m&&(m=!1,_(E),E=-1),g=!0;var r=f;try{for(y(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===i(c)&&s(c),y(n)}else s(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&M(S,h.startTime-n),l=!1}return l}finally{d=null,f=r,g=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,C=!1,x=null,E=-1,L=5,D=-1;function A(){return!(t.unstable_now()-D<L)}function T(){if(null!==x){var e=t.unstable_now();D=e;var n=!0;try{n=x(!0,e)}finally{n?k():(C=!1,x=null)}}else C=!1}if("function"===typeof v)k=function(){v(T)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,I=N.port2;N.port1.onmessage=T,k=function(){I.postMessage(null)}}else k=function(){b(T,0)};function $(e){x=e,C||(C=!0,k())}function M(e,n){E=b((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,$(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,r){var o=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?o+r:o:r=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:s,priorityLevel:e,startTime:r,expirationTime:a=r+a,sortIndex:-1},r>o?(e.sortIndex=r,n(u,e),null===i(c)&&e===i(u)&&(m?(_(E),E=-1):m=!0,M(S,r-o))):(e.sortIndex=a,n(c,e),p||g||(p=!0,$(w))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},938:()=>{Sk.builtinFiles={files:{"src/builtin/sys.js":'var $builtinmodule=function(){var b,a=Math.pow,c={},d=[],e=Sk.getSysArgv();for(b=0;b<e.length;++b)d.push(new Sk.builtin.str(e[b]));return c.argv=new Sk.builtins.list(d),c.copyright=new Sk.builtin.str("Copyright 2009-2010 Scott Graham.\\nAll Rights Reserved.\\n"),Sk.__future__.python3?(c.version="3.7(ish) [Skulpt]",c.version_info=new Sk.builtin.tuple([new Sk.builtin.int_(3),new Sk.builtin.int_(7)])):(c.version="2.7(ish) [Skulpt]",c.version_info=new Sk.builtin.tuple([new Sk.builtin.int_(2),new Sk.builtin.int_(7)])),c.maxint=new Sk.builtin.int_(a(2,53)-1),c.maxsize=new Sk.builtin.int_(a(2,53)-1),c.modules=Sk.sysmodules,c.path=Sk.realsyspath,c.getExecutionLimit=new Sk.builtin.func(function(){return null===Sk.execLimit?Sk.builtin.none.none$:new Sk.builtin.int_(Sk.execLimit)}),c.setExecutionLimit=new Sk.builtin.func(function(a){if(null===Sk.execLimit)throw new Sk.builtin.NotImplementedError("Execution limiting is not enabled");void 0!==a&&(Sk.execLimit=Sk.builtin.asnum$(a))}),c.resetTimeout=new Sk.builtin.func(function(){Sk.execStart=new Date}),c.getYieldLimit=new Sk.builtin.func(function(){return null===Sk.yieldLimit?Sk.builtin.none.none$:new Sk.builtin.int_(Sk.yieldLimit)}),c.setYieldLimit=new Sk.builtin.func(function(a){if(null===Sk.yieldLimit)throw new Sk.builtin.NotImplementedError("Yielding is not enabled");void 0!==a&&(Sk.yieldLimit=Sk.builtin.asnum$(a))}),c.debug=new Sk.builtin.func(function(){return Sk.builtin.none.none$}),c.__stdout__=new Sk.builtin.file(new Sk.builtin.str("/dev/stdout"),new Sk.builtin.str("w")),c.__stdin__=new Sk.builtin.file(new Sk.builtin.str("/dev/stdin"),new Sk.builtin.str("r")),c.stdout=c.__stdout__,c.stdin=c.__stdin__,c};',"src/builtin/this.py":'s = """Gur Mra bs Clguba, ol Gvz Crgref\n\nOrnhgvshy vf orggre guna htyl.\nRkcyvpvg vf orggre guna vzcyvpvg.\nFvzcyr vf orggre guna pbzcyrk.\nPbzcyrk vf orggre guna pbzcyvpngrq.\nSyng vf orggre guna arfgrq.\nFcnefr vf orggre guna qrafr.\nErnqnovyvgl pbhagf.\nFcrpvny pnfrf nera\'g fcrpvny rabhtu gb oernx gur ehyrf.\nNygubhtu cenpgvpnyvgl orngf chevgl.\nReebef fubhyq arire cnff fvyragyl.\nHayrff rkcyvpvgyl fvyraprq.\nVa gur snpr bs nzovthvgl, ershfr gur grzcgngvba gb thrff.\nGurer fubhyq or bar-- naq cersrenoyl bayl bar --boivbhf jnl gb qb vg.\nNygubhtu gung jnl znl abg or boivbhf ng svefg hayrff lbh\'er Qhgpu.\nAbj vf orggre guna arire.\nNygubhtu arire vf bsgra orggre guna *evtug* abj.\nVs gur vzcyrzragngvba vf uneq gb rkcynva, vg\'f n onq vqrn.\nVs gur vzcyrzragngvba vf rnfl gb rkcynva, vg znl or n tbbq vqrn.\nAnzrfcnprf ner bar ubaxvat terng vqrn -- yrg\'f qb zber bs gubfr!"""\n\nd = {}\nfor c in (65, 97):\n    for i in range(26):\n        d[chr(i+c)] = chr((i+13) % 26 + c)\n\nprint("".join([d.get(c, c) for c in s]))\n',"src/lib/BaseHTTPServer.py":'raise NotImplementedError("BaseHTTPServer is not yet implemented in Skulpt")\n',"src/lib/Bastion.py":'raise NotImplementedError("Bastion is not yet implemented in Skulpt")\n',"src/lib/CGIHTTPServer.py":'raise NotImplementedError("CGIHTTPServer is not yet implemented in Skulpt")\n',"src/lib/ConfigParser.py":'raise NotImplementedError("ConfigParser is not yet implemented in Skulpt")\n',"src/lib/Cookie.py":'raise NotImplementedError("Cookie is not yet implemented in Skulpt")\n',"src/lib/DocXMLRPCServer.py":'raise NotImplementedError("DocXMLRPCServer is not yet implemented in Skulpt")\n',"src/lib/HTMLParser.py":'raise NotImplementedError("HTMLParser is not yet implemented in Skulpt")\n',"src/lib/MimeWriter.py":'raise NotImplementedError("MimeWriter is not yet implemented in Skulpt")\n',"src/lib/Queue.py":'raise NotImplementedError("Queue is not yet implemented in Skulpt")\n',"src/lib/SimpleHTTPServer.py":'raise NotImplementedError("SimpleHTTPServer is not yet implemented in Skulpt")\n',"src/lib/SimpleXMLRPCServer.py":'raise NotImplementedError("SimpleXMLRPCServer is not yet implemented in Skulpt")\n',"src/lib/SocketServer.py":'raise NotImplementedError("SocketServer is not yet implemented in Skulpt")\n',"src/lib/StringIO.py":'r"""File-like objects that read from or write to a string buffer.\n\nThis implements (nearly) all stdio methods.\n\nf = StringIO()      # ready for writing\nf = StringIO(buf)   # ready for reading\nf.close()           # explicitly release resources held\nflag = f.isatty()   # always false\npos = f.tell()      # get current position\nf.seek(pos)         # set current position\nf.seek(pos, mode)   # mode 0: absolute; 1: relative; 2: relative to EOF\nbuf = f.read()      # read until EOF\nbuf = f.read(n)     # read up to n bytes\nbuf = f.readline()  # read until end of line (\'\\n\') or EOF\nlist = f.readlines()# list of f.readline() results until EOF\nf.truncate([size])  # truncate file at to at most size (default: current pos)\nf.write(buf)        # write at current position\nf.writelines(list)  # for line in list: f.write(line)\nf.getvalue()        # return whole file\'s contents as a string\n\nNotes:\n- Using a real file is often faster (but less convenient).\n- There\'s also a much faster implementation in C, called cStringIO, but\n  it\'s not subclassable.\n- fileno() is left unimplemented so that code which uses it triggers\n  an exception early.\n- Seeking far beyond EOF and then writing will insert real null\n  bytes that occupy space in the buffer.\n- There\'s a simple test set (see end of this file).\n"""\n\n__all__ = ["StringIO"]\n\ndef _complain_ifclosed(closed):\n    if closed:\n        raise ValueError("I/O operation on closed file")\n\nclass StringIO:\n    """class StringIO([buffer])\n\n    When a StringIO object is created, it can be initialized to an existing\n    string by passing the string to the constructor. If no string is given,\n    the StringIO will start empty.\n\n    The StringIO object can accept either Unicode or 8-bit strings, but\n    mixing the two may take some care. If both are used, 8-bit strings that\n    cannot be interpreted as 7-bit ASCII (that use the 8th bit) will cause\n    a UnicodeError to be raised when getvalue() is called.\n    """\n    def __init__(self, buf = \'\'):\n        # Force self.buf to be a string or unicode\n        if not isinstance(buf, str):\n            buf = str(buf)\n        self.buf = buf\n        self.len = len(buf)\n        self.buflist = []\n        self.pos = 0\n        self.closed = False\n        self.softspace = 0\n\n    def __iter__(self):\n        return self\n\n    def next(self):\n        """A file object is its own iterator, for example iter(f) returns f\n        (unless f is closed). When a file is used as an iterator, typically\n        in a for loop (for example, for line in f: print line), the next()\n        method is called repeatedly. This method returns the next input line,\n        or raises StopIteration when EOF is hit.\n        """\n        _complain_ifclosed(self.closed)\n        r = self.readline()\n        if not r:\n            raise StopIteration\n        return r\n\n    def close(self):\n        """Free the memory buffer.\n        """\n        if not self.closed:\n            self.closed = True\n            self.buf = None\n            self.pos = None\n\n    def isatty(self):\n        """Returns False because StringIO objects are not connected to a\n        tty-like device.\n        """\n        _complain_ifclosed(self.closed)\n        return False\n\n    def seek(self, pos, mode = 0):\n        """Set the file\'s current position.\n\n        The mode argument is optional and defaults to 0 (absolute file\n        positioning); other values are 1 (seek relative to the current\n        position) and 2 (seek relative to the file\'s end).\n\n        There is no return value.\n        """\n        _complain_ifclosed(self.closed)\n        if self.buflist:\n            self.buf += \'\'.join(self.buflist)\n            self.buflist = []\n        if mode == 1:\n            pos += self.pos\n        elif mode == 2:\n            pos += self.len\n        self.pos = max(0, pos)\n\n    def tell(self):\n        """Return the file\'s current position."""\n        _complain_ifclosed(self.closed)\n        return self.pos\n\n    def read(self, n = -1):\n        """Read at most size bytes from the file\n        (less if the read hits EOF before obtaining size bytes).\n\n        If the size argument is negative or omitted, read all data until EOF\n        is reached. The bytes are returned as a string object. An empty\n        string is returned when EOF is encountered immediately.\n        """\n        _complain_ifclosed(self.closed)\n        if self.buflist:\n            self.buf += \'\'.join(self.buflist)\n            self.buflist = []\n        if n is None or n < 0:\n            newpos = self.len\n        else:\n            newpos = min(self.pos+n, self.len)\n        r = self.buf[self.pos:newpos]\n        self.pos = newpos\n        return r\n\n    def readline(self, length=None):\n        r"""Read one entire line from the file.\n\n        A trailing newline character is kept in the string (but may be absent\n        when a file ends with an incomplete line). If the size argument is\n        present and non-negative, it is a maximum byte count (including the\n        trailing newline) and an incomplete line may be returned.\n\n        An empty string is returned only when EOF is encountered immediately.\n\n        Note: Unlike stdio\'s fgets(), the returned string contains null\n        characters (\'\\0\') if they occurred in the input.\n        """\n        _complain_ifclosed(self.closed)\n        if self.buflist:\n            self.buf += \'\'.join(self.buflist)\n            self.buflist = []\n        i = self.buf.find(\'\\n\', self.pos)\n        if i < 0:\n            newpos = self.len\n        else:\n            newpos = i+1\n        if length is not None and length >= 0:\n            if self.pos + length < newpos:\n                newpos = self.pos + length\n        r = self.buf[self.pos:newpos]\n        self.pos = newpos\n        return r\n\n    def readlines(self, sizehint = 0):\n        """Read until EOF using readline() and return a list containing the\n        lines thus read.\n\n        If the optional sizehint argument is present, instead of reading up\n        to EOF, whole lines totalling approximately sizehint bytes (or more\n        to accommodate a final whole line).\n        """\n        total = 0\n        lines = []\n        line = self.readline()\n        while line:\n            lines.append(line)\n            total += len(line)\n            if 0 < sizehint <= total:\n                break\n            line = self.readline()\n        return lines\n\n    def truncate(self, size=None):\n        """Truncate the file\'s size.\n\n        If the optional size argument is present, the file is truncated to\n        (at most) that size. The size defaults to the current position.\n        The current file position is not changed unless the position\n        is beyond the new file size.\n\n        If the specified size exceeds the file\'s current size, the\n        file remains unchanged.\n        """\n        _complain_ifclosed(self.closed)\n        if size is None:\n            size = self.pos\n        elif size < 0:\n            raise IOError(22, "Negative size not allowed")\n        elif size < self.pos:\n            self.pos = size\n        self.buf = self.getvalue()[:size]\n        self.len = size\n\n    def write(self, s):\n        """Write a string to the file.\n\n        There is no return value.\n        """\n        _complain_ifclosed(self.closed)\n        if not s: return\n        # Force s to be a string or unicode\n        if not isinstance(s, str):\n            s = str(s)\n        spos = self.pos\n        slen = self.len\n        if spos == slen:\n            self.buflist.append(s)\n            self.len = self.pos = spos + len(s)\n            return\n        if spos > slen:\n            self.buflist.append(\'\\0\'*(spos - slen))\n            slen = spos\n        newpos = spos + len(s)\n        if spos < slen:\n            if self.buflist:\n                self.buf += \'\'.join(self.buflist)\n            self.buflist = [self.buf[:spos], s, self.buf[newpos:]]\n            self.buf = \'\'\n            if newpos > slen:\n                slen = newpos\n        else:\n            self.buflist.append(s)\n            slen = newpos\n        self.len = slen\n        self.pos = newpos\n\n    def writelines(self, iterable):\n        """Write a sequence of strings to the file. The sequence can be any\n        iterable object producing strings, typically a list of strings. There\n        is no return value.\n\n        (The name is intended to match readlines(); writelines() does not add\n        line separators.)\n        """\n        write = self.write\n        for line in iterable:\n            write(line)\n\n    def flush(self):\n        """Flush the internal buffer\n        """\n        _complain_ifclosed(self.closed)\n\n    def getvalue(self):\n        """\n        Retrieve the entire contents of the "file" at any time before\n        the StringIO object\'s close() method is called.\n\n        The StringIO object can accept either Unicode or 8-bit strings,\n        but mixing the two may take some care. If both are used, 8-bit\n        strings that cannot be interpreted as 7-bit ASCII (that use the\n        8th bit) will cause a UnicodeError to be raised when getvalue()\n        is called.\n        """\n        _complain_ifclosed(self.closed)\n        if self.buflist:\n            self.buf += \'\'.join(self.buflist)\n            self.buflist = []\n        return self.buf\n',"src/lib/UserDict.py":'raise NotImplementedError("UserDict is not yet implemented in Skulpt")\n',"src/lib/UserList.py":'raise NotImplementedError("UserList is not yet implemented in Skulpt")\n',"src/lib/UserString.py":'raise NotImplementedError("UserString is not yet implemented in Skulpt")\n',"src/lib/_LWPCookieJar.py":'raise NotImplementedError("_LWPCookieJar is not yet implemented in Skulpt")\n',"src/lib/_MozillaCookieJar.py":'raise NotImplementedError("_MozillaCookieJar is not yet implemented in Skulpt")\n',"src/lib/__future__.py":'raise NotImplementedError("__future__ is not yet implemented in Skulpt")\n',"src/lib/__phello__.foo.py":'raise NotImplementedError("__phello__.foo is not yet implemented in Skulpt")\n',"src/lib/_abcoll.py":'raise NotImplementedError("_abcoll is not yet implemented in Skulpt")\n',"src/lib/_strptime.py":'raise NotImplementedError("_strptime is not yet implemented in Skulpt")\n',"src/lib/_threading_local.py":'raise NotImplementedError("_threading_local is not yet implemented in Skulpt")\n',"src/lib/abc.py":'raise NotImplementedError("abc is not yet implemented in Skulpt")\n',"src/lib/aifc.py":'raise NotImplementedError("aifc is not yet implemented in Skulpt")\n',"src/lib/antigravity.py":'import webbrowser\n\nwebbrowser.open("https://xkcd.com/353/")\n',"src/lib/anydbm.py":'raise NotImplementedError("anydbm is not yet implemented in Skulpt")\n',"src/lib/array.js":'$builtinmodule=function(){var a={},b=["c","b","B","u","h","H","i","I","l","L","f","d"];return a.__name__=new Sk.builtin.str("array"),a.array=Sk.misceval.buildClass(a,function(a,c){c.__init__=new Sk.builtin.func(function(a,c,d){if(Sk.builtin.pyCheckArgsLen("__init__",arguments.length,2,3),-1==b.indexOf(Sk.ffi.remapToJs(c)))throw new Sk.builtin.ValueError("bad typecode (must be c, b, B, u, h, H, i, I, l, L, f or d)");if(d&&!Sk.builtin.checkIterable(d))throw new Sk.builtin.TypeError("iteration over non-sequence");if(a.$d.mp$ass_subscript(new Sk.builtin.str("typecode"),c),a.$d.mp$ass_subscript(new Sk.builtin.str("__module__"),new Sk.builtin.str("array")),a.typecode=c,void 0===d)a.internalIterable=new Sk.builtin.list;else if(d instanceof Sk.builtin.list)a.internalIterable=d;else for(a.internalIterable=new Sk.builtin.list,iter=Sk.abstr.iter(d),item=iter.tp$iternext();void 0!==item;item=iter.tp$iternext())Sk.misceval.callsimArray(a.internalIterable.append,[a.internalIterable,item])}),c.__repr__=new Sk.builtin.func(function(a){var b=Sk.ffi.remapToJs(a.typecode),c="";return Sk.ffi.remapToJs(a.internalIterable).length&&("c"==Sk.ffi.remapToJs(a.typecode)?c=", \'"+Sk.ffi.remapToJs(a.internalIterable).join("")+"\'":c=", "+Sk.ffi.remapToJs(Sk.misceval.callsimArray(a.internalIterable.__repr__,[a.internalIterable]))),new Sk.builtin.str("array(\'"+b+"\'"+c+")")}),c.__str__=c.__repr__,c.__getattribute__=new Sk.builtin.func(function(a,b){return a.tp$getattr(b)}),c.append=new Sk.builtin.func(function(a,b){return Sk.misceval.callsimArray(a.internalIterable.append,[a.internalIterable,b]),Sk.builtin.none.none$}),c.extend=new Sk.builtin.func(function(a,b){if(Sk.builtin.pyCheckArgsLen("__init__",arguments.length,2,2),!Sk.builtin.checkIterable(b))throw new Sk.builtin.TypeError("iteration over non-sequence");for(iter=Sk.abstr.iter(b),item=iter.tp$iternext();void 0!==item;item=iter.tp$iternext())Sk.misceval.callsimArray(a.internalIterable.append,[a.internalIterable,item])})},"array",[]),a};',"src/lib/ast.py":'raise NotImplementedError("ast is not yet implemented in Skulpt")\n',"src/lib/asynchat.py":'raise NotImplementedError("asynchat is not yet implemented in Skulpt")\n',"src/lib/asyncore.py":'raise NotImplementedError("asyncore is not yet implemented in Skulpt")\n',"src/lib/atexit.py":'raise NotImplementedError("atexit is not yet implemented in Skulpt")\n',"src/lib/audiodev.py":'raise NotImplementedError("audiodev is not yet implemented in Skulpt")\n',"src/lib/base64.py":'raise NotImplementedError("base64 is not yet implemented in Skulpt")\n',"src/lib/bdb.py":'raise NotImplementedError("bdb is not yet implemented in Skulpt")\n',"src/lib/binhex.py":'raise NotImplementedError("binhex is not yet implemented in Skulpt")\n',"src/lib/bisect.py":'"""Bisection algorithms."""\n\ndef insort_right(a, x, lo=0, hi=None):\n    """Insert item x in list a, and keep it sorted assuming a is sorted.\n\n    If x is already in a, insert it to the right of the rightmost x.\n\n    Optional args lo (default 0) and hi (default len(a)) bound the\n    slice of a to be searched.\n    """\n\n    if lo < 0:\n        raise ValueError(\'lo must be non-negative\')\n    if hi is None:\n        hi = len(a)\n    while lo < hi:\n        mid = (lo+hi)//2\n        if x < a[mid]: hi = mid\n        else: lo = mid+1\n    a.insert(lo, x)\n\ndef bisect_right(a, x, lo=0, hi=None):\n    """Return the index where to insert item x in list a, assuming a is sorted.\n\n    The return value i is such that all e in a[:i] have e <= x, and all e in\n    a[i:] have e > x.  So if x already appears in the list, a.insert(x) will\n    insert just after the rightmost x already there.\n\n    Optional args lo (default 0) and hi (default len(a)) bound the\n    slice of a to be searched.\n    """\n\n    if lo < 0:\n        raise ValueError(\'lo must be non-negative\')\n    if hi is None:\n        hi = len(a)\n    while lo < hi:\n        mid = (lo+hi)//2\n        if x < a[mid]: hi = mid\n        else: lo = mid+1\n    return lo\n\ndef insort_left(a, x, lo=0, hi=None):\n    """Insert item x in list a, and keep it sorted assuming a is sorted.\n\n    If x is already in a, insert it to the left of the leftmost x.\n\n    Optional args lo (default 0) and hi (default len(a)) bound the\n    slice of a to be searched.\n    """\n\n    if lo < 0:\n        raise ValueError(\'lo must be non-negative\')\n    if hi is None:\n        hi = len(a)\n    while lo < hi:\n        mid = (lo+hi)//2\n        if a[mid] < x: lo = mid+1\n        else: hi = mid\n    a.insert(lo, x)\n\n\ndef bisect_left(a, x, lo=0, hi=None):\n    """Return the index where to insert item x in list a, assuming a is sorted.\n\n    The return value i is such that all e in a[:i] have e < x, and all e in\n    a[i:] have e >= x.  So if x already appears in the list, a.insert(x) will\n    insert just before the leftmost x already there.\n\n    Optional args lo (default 0) and hi (default len(a)) bound the\n    slice of a to be searched.\n    """\n\n    if lo < 0:\n        raise ValueError(\'lo must be non-negative\')\n    if hi is None:\n        hi = len(a)\n    while lo < hi:\n        mid = (lo+hi)//2\n        if a[mid] < x: lo = mid+1\n        else: hi = mid\n    return lo\n\n# Overwrite above definitions with a fast C implementation\ntry:\n    from _bisect import *\nexcept ImportError:\n    pass\n\n# Create aliases\nbisect = bisect_right\ninsort = insort_right\n',"src/lib/bsddb/__init__.py":'raise NotImplementedError("bsddb is not yet implemented in Skulpt")\n',"src/lib/cProfile.py":'raise NotImplementedError("cProfile is not yet implemented in Skulpt")\n',"src/lib/calendar.py":'raise NotImplementedError("calendar is not yet implemented in Skulpt")\n',"src/lib/cgi.py":'raise NotImplementedError("cgi is not yet implemented in Skulpt")\n',"src/lib/cgitb.py":'raise NotImplementedError("cgitb is not yet implemented in Skulpt")\n',"src/lib/chunk.py":'raise NotImplementedError("chunk is not yet implemented in Skulpt")\n',"src/lib/cmd.py":'raise NotImplementedError("cmd is not yet implemented in Skulpt")\n',"src/lib/code.py":'raise NotImplementedError("code is not yet implemented in Skulpt")\n',"src/lib/codecs.py":'raise NotImplementedError("codecs is not yet implemented in Skulpt")\n',"src/lib/codeop.py":'raise NotImplementedError("codeop is not yet implemented in Skulpt")\n',"src/lib/collections.js":'function $builtinmodule(){const a={};return Sk.misceval.chain(Sk.importModule("keyword",!1,!0),b=>(a._iskeyword=b.$d.iskeyword,Sk.importModule("itertools",!1,!0)),b=>(a._chain=b.$d.chain,a._starmap=b.$d.starmap,a._repeat=b.$d.repeat,Sk.importModule("operator",!1,!0)),b=>{a._itemgetter=b.$d.itemgetter},()=>collections_mod(a))}function collections_mod(a){function counterNumberSlot(b){return function(c){if(void 0!==c&&!(c instanceof a.Counter))return Sk.builtin.NotImplemented.NotImplemented$;const d=new a.Counter;return b.call(this,d,c),d}}function counterInplaceSlot(a,b){return function(c){if(!(c instanceof Sk.builtin.dict))throw new Sk.builtin.TypeError("Counter "+a+"= "+Sk.abstr.typeName(c)+" is not supported");return b.call(this,c),this.keep$positive()}}function namedtuple(b,c,d,l,m){function _make(a,b){return a.prototype.tp$new(Sk.misceval.arrayFromIterable(b))}function _asdict(a){const b=[];for(let c=0;c<a._fields.v.length;c++)b.push(a._fields.v[c]),b.push(a.v[c]);return new Sk.builtin.dict(b)}function _replace(a,b){a=new Sk.builtin.dict(a);const c=a.tp$getattr(new Sk.builtin.str("pop")),d=Sk.abstr.gattr(b,new Sk.builtin.str("_make")),e=Sk.misceval.callsimArray,f=e(d,[e(Sk.builtin.map_,[c,r,b])]);if(a.sq$length()){const b=a.sk$asarray();throw new Sk.builtin.ValueError("Got unexpectd field names: ["+b.map(a=>"\'"+a.$jsstr()+"\'")+"]")}return f}if(b=b.tp$str(),Sk.misceval.isTrue(Sk.misceval.callsimArray(a._iskeyword,[b])))throw new Sk.builtin.ValueError("Type names and field names cannot be a keyword: \'"+Sk.misceval.objectRepr(b)+"\'");const n=b.$jsstr();if(e.test(n)||!g.test(n)||!n)throw new Sk.builtin.ValueError("Type names and field names must be valid identifiers: \'"+n+"\'");let o,p;if(Sk.builtin.checkString(c))o=c.$jsstr().replace(h," ").split(j),1==o.length&&""===o[0]&&(o=[]),p=o.map(a=>new Sk.builtin.str(a));else{o=[],p=[];for(let a=Sk.abstr.iter(c),b=a.tp$iternext();void 0!==b;b=a.tp$iternext())b=b.tp$str(),p.push(b),o.push(b.$jsstr())}let q=new Set;if(Sk.misceval.isTrue(d))for(i=0;i<o.length;i++)(Sk.misceval.isTrue(Sk.misceval.callsimArray(a._iskeyword,[p[i]]))||f.test(o[i])||!g.test(o[i])||!o[i]||q.has(o[i]))&&(o[i]="_"+i,p[i]=new Sk.builtin.str("_"+i)),q.add(o[i]);else for(i=0;i<o.length;i++){if(Sk.misceval.isTrue(Sk.misceval.callsimArray(a._iskeyword,[p[i]])))throw new Sk.builtin.ValueError("Type names and field names cannot be a keyword: \'"+o[i]+"\'");else if(f.test(o[i]))throw new Sk.builtin.ValueError("Field names cannot start with an underscore: \'"+o[i]+"\'");else if(!g.test(o[i])||!o[i])throw new Sk.builtin.ValueError("Type names and field names must be valid identifiers: \'"+o[i]+"\'");else if(q.has(o[i]))throw new Sk.builtin.ValueError("Encountered duplicate field name: \'"+o[i]+"\'");q.add(o[i])}const r=new Sk.builtin.tuple(p),s=[];let t=[];if(!Sk.builtin.checkNone(l)){if(t=Sk.misceval.arrayFromIterable(l),t.length>o.length)throw new Sk.builtin.TypeError("Got more default values than field names");for(let a=0,b=p.length-t.length;b<p.length;a++,b++)s.push(p[b]),s.push(t[a])}const u=new Sk.builtin.dict(s);_make.co_varnames=["_cls","iterable"],_asdict.co_varnames=["self"],_replace.co_kwargs=1,_replace.co_varnames=["_self"];const v={};for(let e=0;e<o.length;e++)v[p[e].$mangled]=new Sk.builtin.property(new a._itemgetter([new Sk.builtin.int_(e)]),void 0,void 0,new Sk.builtin.str("Alias for field number "+e));return Sk.abstr.buildNativeClass(n,{constructor:function NamedTuple(){},base:Sk.builtin.tuple,slots:{tp$doc:n+"("+o.join(", ")+")",tp$new(a,b){a=Sk.abstr.copyKeywordsToNamedArgs("__new__",o,a,b,t);const c=new this.constructor;return Sk.builtin.tuple.call(c,a),c},$r(){const a=this.v.map((a,b)=>o[b]+"="+Sk.misceval.objectRepr(a));return new Sk.builtin.str(Sk.abstr.typeName(this)+"("+a.join(", ")+")")}},proto:Object.assign({__module__:Sk.builtin.checkNone(m)?Sk.globals.__name__:m,__slots__:new Sk.builtin.tuple,_fields:r,_field_defaults:u,_make:new Sk.builtin.classmethod(new Sk.builtin.func(_make)),_asdict:new Sk.builtin.func(_asdict),_replace:new Sk.builtin.func(_replace)},v)})}a.__all__=new Sk.builtin.list(["deque","defaultdict","namedtuple","Counter","OrderedDict"].map(a=>new Sk.builtin.str(a))),a.defaultdict=Sk.abstr.buildNativeClass("collections.defaultdict",{constructor:function defaultdict(a,b){this.default_factory=a,Sk.builtin.dict.call(this,b)},base:Sk.builtin.dict,methods:{copy:{$meth(){return this.$copy()},$flags:{NoArgs:!0}},__copy__:{$meth(){return this.$copy()},$flags:{NoArgs:!0}},__missing__:{$meth(a){if(Sk.builtin.checkNone(this.default_factory))throw new Sk.builtin.KeyError(Sk.misceval.objectRepr(a));else{const b=Sk.misceval.callsimArray(this.default_factory,[]);return this.mp$ass_subscript(a,b),b}},$flags:{OneArg:!0}}},getsets:{default_factory:{$get(){return this.default_factory},$set(a){a=a||Sk.builtin.none.none$,this.default_factory=a}}},slots:{tp$doc:"defaultdict(default_factory[, ...]) --\x3e dict with default factory\\n\\nThe default factory is called without arguments to produce\\na new value when a key is not present, in __getitem__ only.\\nA defaultdict compares equal to a dict with the same items.\\nAll remaining arguments are treated the same as if they were\\npassed to the dict constructor, including keyword arguments.\\n",tp$init(a,b){const c=a.shift();if(void 0===c)this.default_factory=Sk.builtin.none.none$;else if(!Sk.builtin.checkCallable(c)&&!Sk.builtin.checkNone(c))throw new Sk.builtin.TypeError("first argument must be callable");else this.default_factory=c;return Sk.builtin.dict.prototype.tp$init.call(this,a,b)},$r(){const a=Sk.misceval.objectRepr(this.default_factory),b=Sk.builtin.dict.prototype.$r.call(this).v;return new Sk.builtin.str("defaultdict("+a+", "+b+")")}},proto:{$copy(){const b=[];return Sk.misceval.iterFor(Sk.abstr.iter(this),a=>{b.push(a),b.push(this.mp$subscript(a))}),new a.defaultdict(this.default_factory,b)}}}),a.Counter=Sk.abstr.buildNativeClass("Counter",{constructor:function Counter(){this.$d=new Sk.builtin.dict,Sk.builtin.dict.apply(this)},base:Sk.builtin.dict,methods:{elements:{$flags:{NoArgs:!0},$meth(){const b=a._chain.tp$getattr(new Sk.builtin.str("from_iterable")),c=a._starmap,d=a._repeat,e=Sk.misceval.callsimArray;return e(b,[e(c,[d,e(this.tp$getattr(this.str$items))])])}},most_common:{$flags:{NamedArgs:["n"],Defaults:[Sk.builtin.none.none$]},$meth(a){length=this.sq$length(),Sk.builtin.checkNone(a)?a=length:(a=Sk.misceval.asIndexOrThrow(a),a=a>length?length:0>a?0:a);const b=this.$items().sort((c,a)=>Sk.misceval.richCompareBool(c[1],a[1],"Lt")?1:Sk.misceval.richCompareBool(c[1],a[1],"Gt")?-1:0);return new Sk.builtin.list(b.slice(0,a).map(a=>new Sk.builtin.tuple(a)))}},update:{$flags:{FastCall:!0},$meth(a,b){return Sk.abstr.checkArgsLen("update",a,0,1),this.counter$update(a,b)}},subtract:{$flags:{FastCall:!0},$meth(a,b){Sk.abstr.checkArgsLen("subtract",a,0,1);const c=a[0];if(void 0!==c)if(c instanceof Sk.builtin.dict)for(let a=Sk.abstr.iter(c),b=a.tp$iternext();void 0!==b;b=a.tp$iternext()){const a=this.mp$subscript(b);this.mp$ass_subscript(b,Sk.abstr.numberBinOp(a,c.mp$subscript(b),"Sub"))}else for(iter=Sk.abstr.iter(c),k=iter.tp$iternext();void 0!==k;k=iter.tp$iternext()){const a=this.mp$subscript(k);this.mp$ass_subscript(k,Sk.abstr.numberBinOp(a,this.$one,"Sub"))}b=b||[];for(let c=0;c<b.length;c+=2){const a=new Sk.builtin.str(b[c]),d=this.mp$subscript(a);this.mp$ass_subscript(a,Sk.abstr.numberBinOp(d,b[c+1],"Sub"))}return Sk.builtin.none.none$}},__missing__:{$meth(){return this.$zero},$flags:{OneArg:!0}},copy:{$meth(){return Sk.misceval.callsimArray(a.Counter,[this])},$flags:{NoArgs:!0}}},getsets:{__dict__:Sk.generic.getSetDict},slots:{tp$doc:"Dict subclass for counting hashable items.  Sometimes called a bag\\n    or multiset.  Elements are stored as dictionary keys and their counts\\n    are stored as dictionary values.\\n\\n    >>> c = Counter(\'abcdeabcdabcaba\')  # count elements from a string\\n\\n    >>> c.most_common(3)                # three most common elements\\n    [(\'a\', 5), (\'b\', 4), (\'c\', 3)]\\n    >>> sorted(c)                       # list all unique elements\\n    [\'a\', \'b\', \'c\', \'d\', \'e\']\\n    >>> \'\'.join(sorted(c.elements()))   # list elements with repetitions\\n    \'aaaaabbbbcccdde\'\\n    >>> sum(c.values())                 # total of all counts\\n    15\\n\\n    >>> c[\'a\']                          # count of letter \'a\'\\n    5\\n    >>> for elem in \'shazam\':           # update counts from an iterable\\n    ...     c[elem] += 1                # by adding 1 to each element\'s count\\n    >>> c[\'a\']                          # now there are seven \'a\'\\n    7\\n    >>> del c[\'b\']                      # remove all \'b\'\\n    >>> c[\'b\']                          # now there are zero \'b\'\\n    0\\n\\n    >>> d = Counter(\'simsalabim\')       # make another counter\\n    >>> c.update(d)                     # add in the second counter\\n    >>> c[\'a\']                          # now there are nine \'a\'\\n    9\\n\\n    >>> c.clear()                       # empty the counter\\n    >>> c\\n    Counter()\\n\\n    Note:  If a count is set to zero or reduced to zero, it will remain\\n    in the counter until the entry is deleted or the counter is cleared:\\n\\n    >>> c = Counter(\'aaabbc\')\\n    >>> c[\'b\'] -= 2                     # reduce the count of \'b\' by two\\n    >>> c.most_common()                 # \'b\' is still in, but its count is zero\\n    [(\'a\', 3), (\'c\', 1), (\'b\', 0)]\\n\\n",tp$init(a,b){return Sk.abstr.checkArgsLen(this.tpjs_name,a,0,1),this.counter$update(a,b)},$r(){const a=0<this.size?Sk.builtin.dict.prototype.$r.call(this).v:"";return new Sk.builtin.str(Sk.abstr.typeName(this)+"("+a+")")},tp$as_sequence_or_mapping:!0,mp$ass_subscript(a,b){return void 0===b?this.mp$lookup(a)&&Sk.builtin.dict.prototype.mp$ass_subscript.call(this,a,b):Sk.builtin.dict.prototype.mp$ass_subscript.call(this,a,b)},tp$as_number:!0,nb$positive:counterNumberSlot(function(a){this.$items().forEach(([b,c])=>{Sk.misceval.richCompareBool(c,this.$zero,"Gt")&&a.mp$ass_subscript(b,c)})}),nb$negative:counterNumberSlot(function(a){this.$items().forEach(([b,c])=>{Sk.misceval.richCompareBool(c,this.$zero,"Lt")&&a.mp$ass_subscript(b,Sk.abstr.numberBinOp(this.$zero,c,"Sub"))})}),nb$subtract:counterNumberSlot(function(a,b){this.$items().forEach(([c,d])=>{const e=Sk.abstr.numberBinOp(d,b.mp$subscript(c),"Sub");Sk.misceval.richCompareBool(e,this.$zero,"Gt")&&a.mp$ass_subscript(c,e)}),b.$items().forEach(([b,c])=>{void 0===this.mp$lookup(b)&&Sk.misceval.richCompareBool(c,this.$zero,"Lt")&&a.mp$ass_subscript(b,Sk.abstr.numberBinOp(this.$zero,c,"Sub"))})}),nb$add:counterNumberSlot(function(a,b){this.$items().forEach(([c,d])=>{const e=Sk.abstr.numberBinOp(d,b.mp$subscript(c),"Add");Sk.misceval.richCompareBool(e,this.$zero,"Gt")&&a.mp$ass_subscript(c,e)}),b.$items().forEach(([b,c])=>{void 0===this.mp$lookup(b)&&Sk.misceval.richCompareBool(c,this.$zero,"Gt")&&a.mp$ass_subscript(b,c)})}),nb$inplace_add:counterInplaceSlot("+",function(a){a.$items().forEach(([a,b])=>{const c=Sk.abstr.numberInplaceBinOp(this.mp$subscript(a),b,"Add");this.mp$ass_subscript(a,c)})}),nb$inplace_subtract:counterInplaceSlot("-",function(a){a.$items().forEach(([a,b])=>{const c=Sk.abstr.numberInplaceBinOp(this.mp$subscript(a),b,"Sub");this.mp$ass_subscript(a,c)})}),nb$or:counterNumberSlot(function(a,b){this.$items().forEach(([c,d])=>{const e=b.mp$subscript(c),f=Sk.misceval.richCompareBool(d,e,"Lt")?e:d;Sk.misceval.richCompareBool(f,this.$zero,"Gt")&&a.mp$ass_subscript(c,f)}),b.$items().forEach(([b,c])=>{void 0===this.mp$lookup(b)&&Sk.misceval.richCompareBool(c,this.$zero,"Gt")&&a.mp$ass_subscript(b,c)})}),nb$and:counterNumberSlot(function(a,b){this.$items().forEach(([c,d])=>{const e=b.mp$subscript(c),f=Sk.misceval.richCompareBool(d,e,"Lt")?d:e;Sk.misceval.richCompareBool(f,this.$zero,"Gt")&&a.mp$ass_subscript(c,f)})}),nb$inplace_and:counterInplaceSlot("&",function(a){this.$items().forEach(([b,c])=>{const d=a.mp$subscript(b);Sk.misceval.richCompareBool(d,c,"Lt")&&this.mp$ass_subscript(b,d)})}),nb$inplace_or:counterInplaceSlot("|",function(a){a.$items().forEach(([a,b])=>{Sk.misceval.richCompareBool(b,this.mp$subscript(a),"Gt")&&this.mp$ass_subscript(a,b)})}),nb$reflected_and:null,nb$reflected_or:null,nb$reflected_add:null,nb$reflected_subtract:null},proto:{keep$positive(){return this.$items().forEach(([a,b])=>{Sk.misceval.richCompareBool(b,this.$zero,"LtE")&&this.mp$ass_subscript(a)}),this},$zero:new Sk.builtin.int_(0),$one:new Sk.builtin.int_(1),str$items:new Sk.builtin.str("items"),counter$update(a,b){const c=a[0];if(void 0!==c)if(!Sk.builtin.checkMapping(c))for(let a=Sk.abstr.iter(c),b=a.tp$iternext();void 0!==b;b=a.tp$iternext()){const a=this.mp$subscript(b);this.mp$ass_subscript(b,Sk.abstr.numberBinOp(a,this.$one,"Add"))}else if(!this.sq$length())this.update$common(a,void 0,"update");else for(let a=Sk.abstr.iter(c),b=a.tp$iternext();void 0!==b;b=a.tp$iternext()){const a=this.mp$subscript(b);this.mp$ass_subscript(b,Sk.abstr.numberBinOp(a,c.mp$subscript(b),"Add"))}if(b&&b.length)if(!this.sq$length())this.update$common([],b,"update");else for(let a=0;a<b.length;a+=2){const c=new Sk.builtin.str(b[a]),d=this.mp$subscript(c);this.mp$ass_subscript(c,Sk.abstr.numberBinOp(d,b[a+1],"Add"))}return Sk.builtin.none.none$}},classmethods:{fromkeys:{$meth:function fromkeys(){throw new Sk.builtin.NotImplementedError("Counter.fromkeys() is undefined.  Use Counter(iterable) instead.")},$flags:{MinArgs:1,MaxArgs:2}}}});const b=Sk.abstr.buildIteratorClass("odict_iterator",{constructor:function odict_iter_(a){this.$index=0,this.$seq=a.sk$asarray(),this.$orig=a},iternext:Sk.generic.iterNextWithArrayCheckSize,flags:{sk$acceptable_as_base_class:!1}});a.OrderedDict=Sk.abstr.buildNativeClass("OrderedDict",{constructor:function OrderedDict(){return this.orderedkeys=[],Sk.builtin.dict.call(this),this},base:Sk.builtin.dict,slots:{tp$as_sequence_or_mapping:!0,tp$init(a,b){Sk.abstr.checkArgsLen("OrderedDict",a,0,1),a.unshift(this),res=Sk.misceval.callsimArray(this.update,a,b)},tp$doc:"Dictionary that remembers insertion order",$r(){let a,b;const c=[];for(let b=this.tp$iter(),d=b.tp$iternext();void 0!==d;d=b.tp$iternext())a=this.mp$subscript(d),void 0===a&&(a=null),c.push("("+Sk.misceval.objectRepr(d)+", "+Sk.misceval.objectRepr(a)+")");return b=c.join(", "),0<c.length&&(b="["+b+"]"),new Sk.builtin.str("OrderedDict("+b+")")},tp$richcompare(b,c){if("Eq"!=c&&"Ne"!=c)return Sk.builtin.NotImplemented.NotImplemented$;const d="Eq"==c;if(!(b instanceof a.OrderedDict))return Sk.builtin.dict.prototype.tp$richcompare.call(this,b,c);const e=this.size,f=b.size;if(e!==f)return!d;for(let a=this.tp$iter(),e=b.tp$iter(),f=a.tp$iternext(),g=e.tp$iternext();void 0!==f;f=a.tp$iternext(),g=e.tp$iternext()){if(!Sk.misceval.isTrue(Sk.misceval.richCompareBool(f,g,"Eq")))return!d;const a=this.mp$subscript(f),c=b.mp$subscript(g);if(!Sk.misceval.isTrue(Sk.misceval.richCompareBool(a,c,"Eq")))return!d}return d},mp$ass_subscript(a,b){if(void 0===b){const b=this.pop$item(a);if(void 0===b)throw new Sk.builtin.KeyError(a)}else this.set$item(a,b)},tp$iter(){return new b(this)}},methods:{pop:{$flags:{NamedArgs:["key","default"],Defaults:[null]},$meth(a,b){return null===b?Sk.misceval.callsimArray(Sk.builtin.dict.prototype.pop,[this,a]):Sk.misceval.callsimArray(Sk.builtin.dict.prototype.pop,[this,a,b])}},popitem:{$flags:{NamedArgs:["last"],Defaults:[Sk.builtin.bool.true$]},$meth(a){let b,c;if(!this.orderedkeys.length)throw new Sk.builtin.KeyError("dictionary is empty");return b=this.orderedkeys[0],Sk.misceval.isTrue(a)&&(b=this.orderedkeys[this.orderedkeys.length-1]),c=Sk.misceval.callsimArray(this.pop,[this,b]),new Sk.builtin.tuple([b,c])}},move_to_end:{$flags:{NamedArgs:["key","last"],Defaults:[Sk.builtin.bool.true$]},$meth(a,b){let c,d=-1;for(let e=0;e<this.orderedkeys.length;e++)if(c=this.orderedkeys[e],c===a||Sk.misceval.richCompareBool(c,a,"Eq")){d=e;break}if(-1!==d)this.orderedkeys.splice(d,1);else throw new Sk.builtin.KeyError(a);return Sk.misceval.isTrue(b)?this.orderedkeys.push(a):this.orderedkeys.unshift(a),Sk.builtin.none.none$}}},proto:{sk$asarray(){return this.orderedkeys.slice(0)},set$item(a,b){const c=this.orderedkeys.indexOf(a);-1==c&&this.orderedkeys.push(a),Sk.builtin.dict.prototype.set$item.call(this,a,b)},pop$item(a){var b=this.orderedkeys.indexOf(a);if(-1!=b)return this.orderedkeys.splice(b,1),Sk.builtin.dict.prototype.pop$item.call(this,a)}}}),a.deque=Sk.abstr.buildNativeClass("collections.deque",{constructor:function deque(a,b,c,d,e){this.head=c||0,this.tail=d||0,this.mask=e||1,this.maxlen=b,this.v=a||[,,]},slots:{tp$doc:"deque([iterable[, maxlen]]) --\x3e deque object\\n\\nA list-like sequence optimized for data accesses near its endpoints.",tp$hash:Sk.builtin.none.none$,tp$new:Sk.generic.new,tp$init(a,b){if([iterable,maxlen]=Sk.abstr.copyKeywordsToNamedArgs("deque",["iterable","maxlen"],a,b),void 0!==maxlen&&!Sk.builtin.checkNone(maxlen))if(maxlen=Sk.misceval.asIndexSized(maxlen,Sk.builtin.OverflowError,"an integer is required"),0>maxlen)throw new Sk.builtin.ValueError("maxlen must be non-negative");else this.maxlen=maxlen;this.$clear(),void 0!==iterable&&this.$extend(iterable)},tp$getattr:Sk.generic.getAttr,tp$richcompare(b,c){var d=Math.max;if(this===b&&Sk.misceval.opAllowsEquality(c))return!0;if(!(b instanceof a.deque))return Sk.builtin.NotImplemented.NotImplemented$;const e=b,f=this.v;b=b.v;const g=this.tail-this.head&this.mask,h=e.tail-e.head&e.mask;let j,l=d(g,h);if(g===h)for(l=0;l<g&&l<h&&(j=Sk.misceval.richCompareBool(f[this.head+l&this.mask],b[e.head+l&e.mask],"Eq"),!!j);++l);if(l>=g||l>=h)switch(c){case"Lt":return g<h;case"LtE":return g<=h;case"Eq":return g===h;case"NotEq":return g!==h;case"Gt":return g>h;case"GtE":return g>=h;}return"Eq"!==c&&("NotEq"===c||Sk.misceval.richCompareBool(f[this.head+l&this.mask],b[e.head+l&e.mask],c))},tp$iter(){return new c(this)},$r(){const a=[],b=this.tail-this.head&this.mask;if(this.$entered_repr)return new Sk.builtin.str("[...]");this.$entered_repr=!0;for(let c=0;c<b;c++)a.push(Sk.misceval.objectRepr(this.v[this.head+c&this.mask]));const c=Sk.abstr.typeName(this);return void 0===this.maxlen?(this.$entered_repr=void 0,new Sk.builtin.str(c+"(["+a.filter(Boolean).join(", ")+"])")):new Sk.builtin.str(c+"(["+a.filter(Boolean).join(", ")+"], maxlen="+this.maxlen+")")},tp$as_number:!0,nb$bool(){return 0!=(this.tail-this.head&this.mask)},tp$as_sequence_or_mapping:!0,sq$contains(a){for(let b=this.tp$iter(),c=b.tp$iternext();void 0!==c;c=b.tp$iternext())if(Sk.misceval.richCompareBool(c,a,"Eq"))return!0;return!1},sq$concat(b){if(!(b instanceof a.deque))throw new Sk.builtin.TypeError("can only concatenate deque (not \'"+Sk.abstr.typeName(b)+"\') to deque");const c=this.$copy();for(let a=b.tp$iter(),d=a.tp$iternext();void 0!==d;d=a.tp$iternext())c.$push(d);return c},sq$length(){return this.tail-this.head&this.mask},sq$repeat(a){a=Sk.misceval.asIndexOrThrow(a,"can\'t multiply sequence by non-int of type \'{tp$name}\'");const b=this.tail-this.head&this.mask,c=this.$copy();let d;0>=a&&c.$clear();for(let e=1;e<a;e++)for(let a=0;a<b;a++)d=this.head+a&this.mask,c.$push(this.v[d]);return c},mp$subscript(a){a=Sk.misceval.asIndexOrThrow(a);const b=this.tail-this.head&this.mask;if(a>=b||a<-b)throw new Sk.builtin.IndexError("deque index out of range");const c=(0<=a?this.head:this.tail)+a&this.mask;return this.v[c]},mp$ass_subscript(a,b){a=Sk.misceval.asIndexOrThrow(a);const c=this.tail-this.head&this.mask;if(a>=c||a<-c)throw new Sk.builtin.IndexError("deque index out of range");void 0===b?this.del$item(a):this.set$item(a,b)},nb$inplace_add(a){for(this.maxlen=void 0,it=Sk.abstr.iter(a),i=it.tp$iternext();void 0!==i;i=it.tp$iternext())this.$push(i);return this},nb$inplace_multiply(a){a=Sk.misceval.asIndexSized(a,Sk.builtin.OverflowError,"can\'t multiply sequence by non-int of type \'{tp$name}\'"),0>=a&&this.$clear();const b=this.$copy(),c=this.tail-this.head&this.mask;for(let d=1;d<a;d++)for(let a=0;a<c;a++){const c=this.head+a&this.mask;b.$push(this.v[c])}return this.v=b.v,this.head=b.head,this.tail=b.tail,this.mask=b.mask,this}},methods:{append:{$meth(a){return this.$push(a),Sk.builtin.none.none$},$flags:{OneArg:!0},$textsig:null,$doc:"Add an element to the right side of the deque."},appendleft:{$meth(a){return this.$pushLeft(a),Sk.builtin.none.none$},$flags:{OneArg:!0},$textsig:null,$doc:"Add an element to the left side of the deque."},clear:{$meth(){return this.$clear(),Sk.builtin.none.none$},$flags:{NoArgs:!0},$textsig:null,$doc:"Remove all elements from the deque."},__copy__:{$meth(){return this.$copy()},$flags:{NoArgs:!0},$textsig:null,$doc:"Return a shallow copy of a deque."},copy:{$meth(){return this.$copy()},$flags:{NoArgs:!0},$textsig:null,$doc:"Return a shallow copy of a deque."},count:{$meth(a){const b=this.tail-this.head&this.mask;let c=0;for(let d=0;d<b;d++)Sk.misceval.richCompareBool(this.v[this.head+d&this.mask],a,"Eq")&&c++;return new Sk.builtin.int_(c)},$flags:{OneArg:!0},$textsig:null,$doc:"D.count(value) -> integer -- return number of occurrences of value"},extend:{$meth(a){return this.$extend(a),Sk.builtin.none.none$},$flags:{OneArg:!0},$textsig:null,$doc:"Extend the right side of the deque with elements from the iterable"},extendleft:{$meth(a){for(it=Sk.abstr.iter(a),i=it.tp$iternext();void 0!==i;i=it.tp$iternext())this.$pushLeft(i);return Sk.builtin.none.none$},$flags:{OneArg:!0},$textsig:null,$doc:"Extend the left side of the deque with elements from the iterable"},index:{$meth(a,b,c){const d=this.$index(a,b,c);if(void 0!==d)return new Sk.builtin.int_(d);throw new Sk.builtin.ValueError(Sk.misceval.objectRepr(a)+" is not in deque")},$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"D.index(value, [start, [stop]]) -> integer -- return first index of value.\\nRaises ValueError if the value is not present."},insert:{$meth(a,b){a=Sk.misceval.asIndexOrThrow(a,"integer argument expected, got {tp$name}");const c=this.tail-this.head&this.mask;if(void 0!==this.maxlen&&c>=this.maxlen)throw new Sk.builtin.IndexError("deque already at its maximum size");a>c&&(a=c),a<=-c&&(a=0);const d=(0<=a?this.head:this.tail)+a&this.mask;let e=this.tail;for(this.tail=this.tail+1&this.mask;e!==d;){const a=e-1&this.mask;this.v[e]=this.v[a],e=a}return this.v[d]=b,this.head===this.tail&&this.$resize(this.v.length,this.v.length<<1),Sk.builtin.none.none$},$flags:{MinArgs:2,MaxArgs:2},$textsig:null,$doc:"D.insert(index, object) -- insert object before index"},pop:{$meth(){return this.$pop()},$flags:{NoArgs:!0},$textsig:null,$doc:"Remove and return the rightmost element."},popleft:{$meth(){return this.$popLeft()},$flags:{NoArgs:!0},$textsig:null,$doc:"Remove and return the leftmost element."},remove:{$meth(a){const b=this.$index(a);if(void 0===b)throw new Sk.builtin.ValueError(Sk.misceval.objectRepr(a)+" is not in deque");const c=this.head+b&this.mask;for(let b=c;b!==this.tail;){const a=b+1&this.mask;this.v[b]=this.v[a],b=a}this.tail=this.tail-1&this.mask;var d=this.tail-this.head&this.mask;d<this.mask>>>1&&this.$resize(d,this.v.length>>>1)},$flags:{OneArg:!0},$textsig:null,$doc:"D.remove(value) -- remove first occurrence of value."},__reversed__:{$meth(){return new d(this)},$flags:{NoArgs:!0},$textsig:null,$doc:"D.__reversed__() -- return a reverse iterator over the deque"},reverse:{$meth(){const c=this.head,d=this.tail,e=this.mask,f=this.tail-this.head&this.mask;for(let g=0;g<~~(f/2);g++){const f=d-g-1&e,a=c+g&e,b=this.v[f];this.v[f]=this.v[a],this.v[a]=b}return Sk.builtin.none.none$},$flags:{NoArgs:!0},$textsig:null,$doc:"D.reverse() -- reverse *IN PLACE*"},rotate:{$meth(a){a=void 0===a?1:Sk.misceval.asIndexSized(a,Sk.builtin.OverflowError);const c=this.head,d=this.tail;if(0===a||c===d)return this;if(this.head=c-a&this.mask,this.tail=d-a&this.mask,0<a)for(let e=1;e<=a;e++){const f=c-e&this.mask,a=d-e&this.mask;this.v[f]=this.v[a],this.v[a]=void 0}else for(let e=0;e>a;e--){const f=d-e&this.mask,a=c-e&this.mask;this.v[f]=this.v[a],this.v[a]=void 0}return Sk.builtin.none.none$},$flags:{MinArgs:0,MaxArgs:1},$textsig:null,$doc:"Rotate the deque n steps to the right (default n=1).  If n is negative, rotates left."}},getsets:{maxlen:{$get(){return void 0===this.maxlen?Sk.builtin.none.none$:new Sk.builtin.int_(this.maxlen)},$doc:"maximum size of a deque or None if unbounded"}},proto:{$clear(){this.head=0,this.tail=0,this.mask=1,this.v=[,,]},$copy(){return new a.deque(this.v.slice(0),this.maxlen,this.head,this.tail,this.mask)},$extend(a){for(it=Sk.abstr.iter(a),i=it.tp$iternext();void 0!==i;i=it.tp$iternext())this.$push(i)},set$item(a,b){const c=(0<=a?this.head:this.tail)+a&this.mask;this.v[c]=b},del$item(a){const b=(0<=a?this.head:this.tail)+a&this.mask;for(let c=b;c!==this.tail;){const a=c+1&this.mask;this.v[c]=this.v[a],c=a}const c=this.tail-this.head&this.mask;this.tail=this.tail-1&this.mask,c<this.mask>>>1&&this.$resize(c,this.v.length>>>1)},$push(a){this.v[this.tail]=a,this.tail=this.tail+1&this.mask,this.head===this.tail&&this.$resize(this.v.length,this.v.length<<1);const b=this.tail-this.head&this.mask;return void 0!==this.maxlen&&b>this.maxlen&&this.$popLeft(),this},$pushLeft(a){this.head=this.head-1&this.mask,this.v[this.head]=a,this.head===this.tail&&this.$resize(this.v.length,this.v.length<<1);const b=this.tail-this.head&this.mask;return void 0!==this.maxlen&&b>this.maxlen&&this.$pop(),this},$pop(){if(this.head===this.tail)throw new Sk.builtin.IndexError("pop from an empty deque");this.tail=this.tail-1&this.mask;const a=this.v[this.tail];this.v[this.tail]=void 0;const b=this.tail-this.head&this.mask;return b<this.mask>>>1&&this.$resize(b,this.v.length>>>1),a},$popLeft(){if(this.head===this.tail)throw new Sk.builtin.IndexError("pop from an empty deque");const a=this.v[this.head];this.v[this.head]=void 0,this.head=this.head+1&this.mask;const b=this.tail-this.head&this.mask;return b<this.mask>>>1&&this.$resize(b,this.v.length>>>1),a},$resize(a,b){const c=this.head,d=this.mask;if(this.head=0,this.tail=a,this.mask=b-1,0===c)return void(this.v.length=b);const e=Array(b);for(let f=0;f<a;f++)e[f]=this.v[c+f&d];this.v=e},$index(a,b,c){const d=this.tail-this.head&this.mask;b=void 0===b?0:Sk.misceval.asIndexOrThrow(b),c=c===void 0?d:Sk.misceval.asIndexOrThrow(c);const e=this.head,f=this.mask,g=this.v,h=0<=b?b:b<-d?0:d+b;c=0<=c?c:c<-d?0:d+c;for(let d=h;d<c;d++)if(g[e+d&f]===a)return d},sk$asarray(){const a=[],b=this.tail-this.head&this.mask;for(let c=0;c<b;++c){const b=this.head+c&this.mask;a.push(this.v[b])}return a}}});const c=Sk.abstr.buildIteratorClass("_collections._deque_iterator",{constructor:function _deque_iterator(a){this.$index=0,this.dq=a.v,this.$length=a.tail-a.head&a.mask,this.$head=a.head,this.$tail=a.tail,this.$mask=a.mask},iternext(){if(!(this.$index>=this.$length)){const a=(0<=this.$index?this.$head:this.$tail)+this.$index&this.$mask;return this.$index++,this.dq[a]}},methods:{__length_hint__:{$meth:function __length_hint__(){return new Sk.builtin.int_(this.$length-this.$index)},$flags:{NoArgs:!0}}}}),d=Sk.abstr.buildIteratorClass("_collections._deque_reverse_iterator",{constructor:function _deque_reverse_iterator(a){this.$index=(a.tail-a.head&a.mask)-1,this.dq=a.v,this.$head=a.head,this.$mask=a.mask},iternext(){if(!(0>this.$index)){const a=this.$head+this.$index&this.$mask;return this.$index--,this.dq[a]}},methods:{__length_hint__:Sk.generic.iterReverseLengthHintMethodDef}}),e=new RegExp(/^[0-9].*/),f=new RegExp(/^[0-9_].*/),g=new RegExp(/^\\w*$/),h=/,/g,j=/\\s+/;return namedtuple.co_argcount=2,namedtuple.co_kwonlyargcount=3,namedtuple.$kwdefs=[Sk.builtin.bool.false$,Sk.builtin.none.none$,Sk.builtin.none.none$],namedtuple.co_varnames=["typename","field_names","rename","defaults","module"],a.namedtuple=new Sk.builtin.func(namedtuple),a}',"src/lib/colorsys.py":'raise NotImplementedError("colorsys is not yet implemented in Skulpt")\n',"src/lib/commands.py":'raise NotImplementedError("commands is not yet implemented in Skulpt")\n',"src/lib/compileall.py":'raise NotImplementedError("compileall is not yet implemented in Skulpt")\n',"src/lib/compiler/__init__.py":'raise NotImplementedError("compiler is not yet implemented in Skulpt")\n',"src/lib/config/__init__.py":'raise NotImplementedError("config is not yet implemented in Skulpt")\n',"src/lib/contextlib.py":'raise NotImplementedError("contextlib is not yet implemented in Skulpt")\n',"src/lib/cookielib.py":'raise NotImplementedError("cookielib is not yet implemented in Skulpt")\n',"src/lib/copy.py":'"""\nThis file was modified from CPython.\nCopyright (c) 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,\n2011, 2012, 2013, 2014, 2015 Python Software Foundation; All Rights Reserved\n"""\nimport types\nclass Error(Exception):\n    pass\nerror = Error \nclass _EmptyClass:\n    pass\ntry:\n    long\nexcept NameError:\n    long = int\n\ndef copy(x):\n    cls = type(x)\n    if callable(x):\n        return x\n    copier = getattr(cls, "__copy__", None)\n    if copier:\n        return copier(x)\n    if cls in (type(None), int, float, bool, str, tuple, type, frozenset, long):\n        return x\n    if (cls == list) or (cls == dict) or (cls == set) or (cls == slice):\n        return cls(x)\n    try:\n        getstate = getattr(x, "__getstate__", None)\n        setstate = getattr(x, "__setstate__", None)\n        initargs = getattr(x, "__getinitargs__", None)\n    except:\n        reductor = False\n    if getstate or setstate or initargs:\n        raise NotImplementedError("Skulpt does not yet support copying with user-defined __getstate__, __setstate__ or __getinitargs__()")\n    reductor = getattr(x, "__reduce_ex__", None)\n    if reductor:\n        rv = reductor(4)\n    else:\n        reductor = getattr(x, "__reduce__", None)\n        if reductor:\n            rv = reductor()\n        elif str(cls)[1:6] == "class":\n            copier = _copy_inst\n            return copier(x)\n        else:\n            raise Error("un(shallow)copyable object of type %s" % cls)\n    if isinstance(rv, str):\n        return x\n    return _reconstruct(x, rv, 0)\n\ndef _copy_inst(x):\n    if hasattr(x, \'__copy__\'):\n        return x.__copy__()\n    if hasattr(x, \'__getinitargs__\'):\n        args = x.__getinitargs__()\n        y = x.__class__(*args)\n    else:\n        y = _EmptyClass()\n        y.__class__ = x.__class__\n    if hasattr(x, \'__getstate__\'):\n        state = x.__getstate__()\n    else:\n        state = x.__dict__\n    if hasattr(y, \'__setstate__\'):\n        y.__setstate__(state)\n    else:\n        y.__dict__.update(state)\n    return y\n\nd = _deepcopy_dispatch = {}\n\ndef deepcopy(x, memo=None, _nil=[]):\n    """Deep copy operation on arbitrary Python objects.\n    See the module\'s __doc__ string for more info.\n    """\n    if memo is None:\n        memo = {}\n    idx = id(x)\n    y = memo.get(idx, _nil)\n    if y is not _nil:\n        return y\n    cls = type(x)\n    try:\n        getstate = getattr(x, "__getstate__", None)\n        setstate = getattr(x, "__setstate__", None)\n        initargs = getattr(x, "__getinitargs__", None)\n    except:\n        reductor = False\n    if getstate or setstate or initargs:\n        raise NotImplementedError("Skulpt does not yet support copying with user-defined __getstate__, __setstate__ or __getinitargs__()")\n    copier = _deepcopy_dispatch.get(cls)\n    if copier:\n        y = copier(x, memo)\n    elif str(cls)[1:6] == "class":\n        copier = _deepcopy_dispatch["InstanceType"]\n        y = copier(x, memo)\n    else:\n        try:\n            issc = issubclass(cls, type)\n        except TypeError: # cls is not a class (old Boost; see SF #502085)\n            issc = 0\n        if issc:\n            y = _deepcopy_atomic(x, memo)\n        else:\n            copier = getattr(x, "__deepcopy__", None)\n            if copier:\n                y = copier(memo)\n            else:\n                reductor = getattr(x, "__reduce_ex__", None)\n                if reductor:\n                    rv = reductor(2)\n                else:\n                    reductor = getattr(x, "__reduce__", None)\n                    if reductor:\n                        rv = reductor()\n                    else:\n                        raise Error(\n                            "un(deep)copyable object of type %s" % cls)\n                y = _reconstruct(x, rv, 1, memo)\n    memo[idx] = y\n    _keep_alive(x, memo) # Make sure x lives at least as long as d\n    return y\n\ndef _deepcopy_atomic(x, memo):\n    return x\nd[type(None)] = _deepcopy_atomic\n# d[type(Ellipsis)] = _deepcopy_atomic\nd[type(NotImplemented)] = _deepcopy_atomic\nd[int] = _deepcopy_atomic\nd[float] = _deepcopy_atomic\nd[bool] = _deepcopy_atomic\nd[complex] = _deepcopy_atomic\n# d[bytes] = _deepcopy_atomic\nd[str] = _deepcopy_atomic\n# try:\n# d[types.CodeType] = _deepcopy_atomic\n# except AttributeError:\n#   pass\nd[type] = _deepcopy_atomic\n# d[types.BuiltinFunctionType] = _deepcopy_atomic\nd[types.FunctionType] = _deepcopy_atomic\n# d[weakref.ref] = _deepcopy_atomic\n\ndef _deepcopy_list(x, memo):\n    y = []\n    memo[id(x)] = y\n    for a in x:\n        y.append(deepcopy(a, memo))\n    return y\nd[list] = _deepcopy_list\n\ndef _deepcopy_set(x, memo):\n    result = set([])  # make empty set\n    memo[id(x)] = result  # register this set in the memo for loop checking\n    for a in x:   # go through elements of set\n        result.add(deepcopy(a, memo))  # add the copied elements into the new set\n    return result # return the new set\nd[set] = _deepcopy_set\n\ndef _deepcopy_frozenset(x, memo):\n    result = frozenset(_deepcopy_set(x,memo)) \n    memo[id(x)] = result \n    return result\nd[frozenset] = _deepcopy_frozenset\n\ndef _deepcopy_tuple(x, memo):\n    y = [deepcopy(a, memo) for a in x]\n    # We\'re not going to put the tuple in the memo, but it\'s still important we\n    # check for it, in case the tuple contains recursive mutable structures.\n    try:\n        return memo[id(x)]\n    except KeyError:\n        pass\n    for k, j in zip(x, y):\n        if k is not j:\n            y = tuple(y)\n            break\n    else:\n        y = x\n    return y\nd[tuple] = _deepcopy_tuple\n\ndef _deepcopy_dict(x, memo):\n    y = {}\n    memo[id(x)] = y\n    for key, value in x.items():\n        y[deepcopy(key, memo)] = deepcopy(value, memo)\n    return y\nd[dict] = _deepcopy_dict\n\n# def _deepcopy_method(x, memo): # Copy instance methods\n#     y = type(x)(x.im_func, deepcopy(x.im_self, memo), x.im_class);\n#     return y\nd[types.MethodType] = _deepcopy_atomic\n\ndef _deepcopy_inst(x, memo):\n    if hasattr(x, \'__deepcopy__\'):\n         return x.__deepcopy__(memo)\n    if hasattr(x, \'__getinitargs__\'):\n        args = x.__getinitargs__()\n        args = deepcopy(args, memo)\n        y = x.__class__(*args)\n    else:\n        y = _EmptyClass()\n        y.__class__ = x.__class__\n    memo[id(x)] = y\n    if hasattr(x, \'__getstate__\'):\n        state = x.__getstate__()\n    else:\n        state = x.__dict__\n    state = deepcopy(state, memo)\n    if hasattr(y, \'__setstate__\'):\n        y.__setstate__(state)\n    else:\n        y.__dict__.update(state)\n        return y\nd["InstanceType"] = _deepcopy_inst\n\ndef _keep_alive(x, memo):\n    """Keeps a reference to the object x in the memo.\n    Because we remember objects by their id, we have\n    to assure that possibly temporary objects are kept\n    alive by referencing them.\n    We store a reference at the id of the memo, which should\n    normally not be used unless someone tries to deepcopy\n    the memo itself...\n    """\n    try:\n        memo[id(memo)].append(x)\n    except KeyError:\n        # aha, this is the first one :-)\n        memo[id(memo)]=[x]\n\ndef _reconstruct(x, info, deep, memo=None):\n    if isinstance(info, str):\n        return x\n    assert isinstance(info, tuple)\n    if memo is None:\n        memo = {}\n    n = len(info)\n    assert n in (2, 3, 4, 5)\n    callable, args = info[:2]\n    if n > 2:\n        state = info[2]\n    else:\n        state = None\n    if n > 3:\n        listiter = info[3]\n    else:\n        listiter = None\n    if n > 4:\n        dictiter = info[4]\n    else:\n        dictiter = None\n    if deep:\n        args = deepcopy(args, memo)\n    y = callable(*args)\n    memo[id(x)] = y\n\n    if state is not None:\n        if deep:\n            state = deepcopy(state, memo)\n        if hasattr(y, \'__setstate__\'):\n            y.__setstate__(state)\n        else:\n            if isinstance(state, tuple) and len(state) == 2:\n                state, slotstate = state\n            else:\n                slotstate = None\n            if state is not None:\n                y.__dict__.update(state)\n            if slotstate is not None:\n                for key, value in slotstate.items():\n                    setattr(y, key, value)\n\n    if listiter is not None:\n        for item in listiter:\n            if deep:\n                item = deepcopy(item, memo)\n            y.append(item)\n    if dictiter is not None:\n        for key, value in dictiter:\n            if deep:\n                key = deepcopy(key, memo)\n                value = deepcopy(value, memo)\n            y[key] = value\n    return y\n\ndel d\n\ndel types\n\n# Helper for instance creation without calling __init__\nclass _EmptyClass:\n    pass',"src/lib/copy_reg.py":'raise NotImplementedError("copy_reg is not yet implemented in Skulpt")\n',"src/lib/csv.py":'raise NotImplementedError("csv is not yet implemented in Skulpt")\n',"src/lib/ctypes/__init__.py":'raise NotImplementedError("ctypes is not yet implemented in Skulpt")\n',"src/lib/ctypes/macholib/__init__.py":'raise NotImplementedError("macholib is not yet implemented in Skulpt")\n',"src/lib/curses/__init__.py":'raise NotImplementedError("curses is not yet implemented in Skulpt")\n',"src/lib/datetime.py":'"""Concrete date/time and related types -- prototype implemented in Python.\n\nSee http://www.zope.org/Members/fdrake/DateTimeWiki/FrontPage\n\nSee also http://dir.yahoo.com/Reference/calendars/\n\nFor a primer on DST, including many current DST rules, see\nhttp://webexhibits.org/daylightsaving/\n\nFor more about DST than you ever wanted to know, see\nftp://elsie.nci.nih.gov/pub/\n\nSources for time zone and DST data: http://www.twinsun.com/tz/tz-link.htm\n\nThis was originally copied from the sandbox of the CPython CVS repository.\nThanks to Tim Peters for suggesting using it.\n\nThis was then copied from PyPy v5.1.0 into Skulpt by Meredydd Luff, removing\n\'from __future__ import division\' (and replacing division operators accordingly)\nand pickle support (which requires \'struct\', which Skulpt does not currently\n[as of 31/8/2016] have)\n"""\n\nimport time as _time\nimport math as _math\n\n# Python 2-vs-3 compat hack\nimport sys\nunicode = unicode if sys.version_info < (3,) else str\n\n_SENTINEL = object()\n\ndef _cmp(x, y):\n    return 0 if x == y else 1 if x > y else -1\n\ndef _round(x):\n    return int(_math.floor(x + 0.5) if x >= 0.0 else _math.ceil(x - 0.5))\n\nMINYEAR = 1\nMAXYEAR = 9999\n_MINYEARFMT = 1900\n\n_MAX_DELTA_DAYS = 999999999\n\n# Utility functions, adapted from Python\'s Demo/classes/Dates.py, which\n# also assumes the current Gregorian calendar indefinitely extended in\n# both directions.  Difference:  Dates.py calls January 1 of year 0 day\n# number 1.  The code here calls January 1 of year 1 day number 1.  This is\n# to match the definition of the "proleptic Gregorian" calendar in Dershowitz\n# and Reingold\'s "Calendrical Calculations", where it\'s the base calendar\n# for all computations.  See the book for algorithms for converting between\n# proleptic Gregorian ordinals and many other calendar systems.\n\n_DAYS_IN_MONTH = [-1, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]\n\n_DAYS_BEFORE_MONTH = [-1]\ndbm = 0\nfor dim in _DAYS_IN_MONTH[1:]:\n    _DAYS_BEFORE_MONTH.append(dbm)\n    dbm += dim\ndel dbm, dim\n\ndef _is_leap(year):\n    "year -> 1 if leap year, else 0."\n    return year % 4 == 0 and (year % 100 != 0 or year % 400 == 0)\n\ndef _days_before_year(year):\n    "year -> number of days before January 1st of year."\n    y = year - 1\n    return y*365 + y//4 - y//100 + y//400\n\ndef _days_in_month(year, month):\n    "year, month -> number of days in that month in that year."\n    assert 1 <= month <= 12, month\n    if month == 2 and _is_leap(year):\n        return 29\n    return _DAYS_IN_MONTH[month]\n\ndef _days_before_month(year, month):\n    "year, month -> number of days in year preceding first day of month."\n    assert 1 <= month <= 12, \'month must be in 1..12\'\n    return _DAYS_BEFORE_MONTH[month] + (month > 2 and _is_leap(year))\n\ndef _ymd2ord(year, month, day):\n    "year, month, day -> ordinal, considering 01-Jan-0001 as day 1."\n    assert 1 <= month <= 12, \'month must be in 1..12\'\n    dim = _days_in_month(year, month)\n    assert 1 <= day <= dim, (\'day must be in 1..%d\' % dim)\n    return (_days_before_year(year) +\n            _days_before_month(year, month) +\n            day)\n\n_DI400Y = _days_before_year(401)    # number of days in 400 years\n_DI100Y = _days_before_year(101)    #    "    "   "   " 100   "\n_DI4Y   = _days_before_year(5)      #    "    "   "   "   4   "\n\n# A 4-year cycle has an extra leap day over what we\'d get from pasting\n# together 4 single years.\nassert _DI4Y == 4 * 365 + 1\n\n# Similarly, a 400-year cycle has an extra leap day over what we\'d get from\n# pasting together 4 100-year cycles.\nassert _DI400Y == 4 * _DI100Y + 1\n\n# OTOH, a 100-year cycle has one fewer leap day than we\'d get from\n# pasting together 25 4-year cycles.\nassert _DI100Y == 25 * _DI4Y - 1\n\n_US_PER_US = 1\n_US_PER_MS = 1000\n_US_PER_SECOND = 1000000\n_US_PER_MINUTE = 60000000\n_SECONDS_PER_DAY = 24 * 3600\n_US_PER_HOUR = 3600000000\n_US_PER_DAY = 86400000000\n_US_PER_WEEK = 604800000000\n\ndef _ord2ymd(n):\n    "ordinal -> (year, month, day), considering 01-Jan-0001 as day 1."\n\n    # n is a 1-based index, starting at 1-Jan-1.  The pattern of leap years\n    # repeats exactly every 400 years.  The basic strategy is to find the\n    # closest 400-year boundary at or before n, then work with the offset\n    # from that boundary to n.  Life is much clearer if we subtract 1 from\n    # n first -- then the values of n at 400-year boundaries are exactly\n    # those divisible by _DI400Y:\n    #\n    #     D  M   Y            n              n-1\n    #     -- --- ----        ----------     ----------------\n    #     31 Dec -400        -_DI400Y       -_DI400Y -1\n    #      1 Jan -399         -_DI400Y +1   -_DI400Y      400-year boundary\n    #     ...\n    #     30 Dec  000        -1             -2\n    #     31 Dec  000         0             -1\n    #      1 Jan  001         1              0            400-year boundary\n    #      2 Jan  001         2              1\n    #      3 Jan  001         3              2\n    #     ...\n    #     31 Dec  400         _DI400Y        _DI400Y -1\n    #      1 Jan  401         _DI400Y +1     _DI400Y      400-year boundary\n    n -= 1\n    n400, n = divmod(n, _DI400Y)\n    year = n400 * 400 + 1   # ..., -399, 1, 401, ...\n\n    # Now n is the (non-negative) offset, in days, from January 1 of year, to\n    # the desired date.  Now compute how many 100-year cycles precede n.\n    # Note that it\'s possible for n100 to equal 4!  In that case 4 full\n    # 100-year cycles precede the desired day, which implies the desired\n    # day is December 31 at the end of a 400-year cycle.\n    n100, n = divmod(n, _DI100Y)\n\n    # Now compute how many 4-year cycles precede it.\n    n4, n = divmod(n, _DI4Y)\n\n    # And now how many single years.  Again n1 can be 4, and again meaning\n    # that the desired day is December 31 at the end of the 4-year cycle.\n    n1, n = divmod(n, 365)\n\n    year += n100 * 100 + n4 * 4 + n1\n    if n1 == 4 or n100 == 4:\n        assert n == 0\n        return year-1, 12, 31\n\n    # Now the year is correct, and n is the offset from January 1.  We find\n    # the month via an estimate that\'s either exact or one too large.\n    leapyear = n1 == 3 and (n4 != 24 or n100 == 3)\n    assert leapyear == _is_leap(year)\n    month = (n + 50) >> 5\n    preceding = _DAYS_BEFORE_MONTH[month] + (month > 2 and leapyear)\n    if preceding > n:  # estimate is too large\n        month -= 1\n        preceding -= _DAYS_IN_MONTH[month] + (month == 2 and leapyear)\n    n -= preceding\n    assert 0 <= n < _days_in_month(year, month)\n\n    # Now the year and month are correct, and n is the offset from the\n    # start of that month:  we\'re done!\n    return year, month, n+1\n\n# Month and day names.  For localized versions, see the calendar module.\n_MONTHNAMES = [None, "Jan", "Feb", "Mar", "Apr", "May", "Jun",\n                     "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]\n_DAYNAMES = [None, "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"]\n\n\ndef _build_struct_time(y, m, d, hh, mm, ss, dstflag):\n    wday = (_ymd2ord(y, m, d) + 6) % 7\n    dnum = _days_before_month(y, m) + d\n    return _time.struct_time((y, m, d, hh, mm, ss, wday, dnum, dstflag))\n\ndef _format_time(hh, mm, ss, us):\n    # Skip trailing microseconds when us==0.\n    result = "%02d:%02d:%02d" % (hh, mm, ss)\n    if us:\n        result += ".%06d" % us\n    return result\n\n# Correctly substitute for %z and %Z escapes in strftime formats.\ndef _wrap_strftime(object, format, timetuple):\n    year = timetuple[0]\n    if year < _MINYEARFMT:\n        raise ValueError("year=%d is before %d; the datetime strftime() "\n                         "methods require year >= %d" %\n                         (year, _MINYEARFMT, _MINYEARFMT))\n    # Don\'t call utcoffset() or tzname() unless actually needed.\n    freplace = None  # the string to use for %f\n    zreplace = None  # the string to use for %z\n    Zreplace = None  # the string to use for %Z\n\n    # Scan format for %z and %Z escapes, replacing as needed.\n    newformat = []\n    push = newformat.append\n    i, n = 0, len(format)\n    while i < n:\n        ch = format[i]\n        i += 1\n        if ch == \'%\':\n            if i < n:\n                ch = format[i]\n                i += 1\n                if ch == \'f\':\n                    if freplace is None:\n                        freplace = \'%06d\' % getattr(object,\n                                                    \'microsecond\', 0)\n                    newformat.append(freplace)\n                elif ch == \'z\':\n                    if zreplace is None:\n                        zreplace = ""\n                        if hasattr(object, "_utcoffset"):\n                            offset = object._utcoffset()\n                            if offset is not None:\n                                sign = \'+\'\n                                if offset < 0:\n                                    offset = -offset\n                                    sign = \'-\'\n                                h, m = divmod(offset, 60)\n                                zreplace = \'%c%02d%02d\' % (sign, h, m)\n                    assert \'%\' not in zreplace\n                    newformat.append(zreplace)\n                elif ch == \'Z\':\n                    if Zreplace is None:\n                        Zreplace = ""\n                        if hasattr(object, "tzname"):\n                            s = object.tzname()\n                            if s is not None:\n                                # strftime is going to have at this: escape %\n                                Zreplace = s.replace(\'%\', \'%%\')\n                    newformat.append(Zreplace)\n                else:\n                    push(\'%\')\n                    push(ch)\n            else:\n                push(\'%\')\n        else:\n            push(ch)\n    newformat = "".join(newformat)\n    return _time.strftime(newformat, timetuple)\n\n# Just raise TypeError if the arg isn\'t None or a string.\ndef _check_tzname(name):\n    if name is not None and not isinstance(name, str):\n        raise TypeError("tzinfo.tzname() must return None or string, "\n                        "not \'%s\'" % type(name))\n\n# name is the offset-producing method, "utcoffset" or "dst".\n# offset is what it returned.\n# If offset isn\'t None or timedelta, raises TypeError.\n# If offset is None, returns None.\n# Else offset is checked for being in range, and a whole # of minutes.\n# If it is, its integer value is returned.  Else ValueError is raised.\ndef _check_utc_offset(name, offset):\n    assert name in ("utcoffset", "dst")\n    if offset is None:\n        return\n    if not isinstance(offset, timedelta):\n        raise TypeError("tzinfo.%s() must return None "\n                        "or timedelta, not \'%s\'" % (name, type(offset)))\n    days = offset.days\n    if days < -1 or days > 0:\n        offset = 1440  # trigger out-of-range\n    else:\n        seconds = days * 86400 + offset.seconds\n        minutes, seconds = divmod(seconds, 60)\n        if seconds or offset.microseconds:\n            raise ValueError("tzinfo.%s() must return a whole number "\n                             "of minutes" % name)\n        offset = minutes\n    if not -1440 < offset < 1440:\n        raise ValueError("%s()=%d, must be in -1439..1439" % (name, offset))\n    return offset\n\ndef _check_int_field(value):\n    if isinstance(value, int):\n        return int(value)\n    if not isinstance(value, float):\n        try:\n            value = value.__int__()\n        except AttributeError:\n            pass\n        else:\n            if isinstance(value, int):\n                return int(value)\n            raise TypeError(\'__int__ method should return an integer\')\n        raise TypeError(\'an integer is required\')\n    raise TypeError(\'integer argument expected, got float\')\n\ndef _check_date_fields(year, month, day):\n    year = _check_int_field(year)\n    month = _check_int_field(month)\n    day = _check_int_field(day)\n    if not MINYEAR <= year <= MAXYEAR:\n        raise ValueError(\'year must be in %d..%d\' % (MINYEAR, MAXYEAR), year)\n    if not 1 <= month <= 12:\n        raise ValueError(\'month must be in 1..12\', month)\n    dim = _days_in_month(year, month)\n    if not 1 <= day <= dim:\n        raise ValueError(\'day must be in 1..%d\' % dim, day)\n    return year, month, day\n\ndef _check_time_fields(hour, minute, second, microsecond):\n    hour = _check_int_field(hour)\n    minute = _check_int_field(minute)\n    second = _check_int_field(second)\n    microsecond = _check_int_field(microsecond)\n    if not 0 <= hour <= 23:\n        raise ValueError(\'hour must be in 0..23\', hour)\n    if not 0 <= minute <= 59:\n        raise ValueError(\'minute must be in 0..59\', minute)\n    if not 0 <= second <= 59:\n        raise ValueError(\'second must be in 0..59\', second)\n    if not 0 <= microsecond <= 999999:\n        raise ValueError(\'microsecond must be in 0..999999\', microsecond)\n    return hour, minute, second, microsecond\n\ndef _check_tzinfo_arg(tz):\n    if tz is not None and not isinstance(tz, tzinfo):\n        raise TypeError("tzinfo argument must be None or of a tzinfo subclass")\n\n\n# Notes on comparison:  In general, datetime module comparison operators raise\n# TypeError when they don\'t know how to do a comparison themself.  If they\n# returned NotImplemented instead, comparison could (silently) fall back to\n# the default compare-objects-by-comparing-their-memory-addresses strategy,\n# and that\'s not helpful.  There are two exceptions:\n#\n# 1. For date and datetime, if the other object has a "timetuple" attr,\n#    NotImplemented is returned.  This is a hook to allow other kinds of\n#    datetime-like objects a chance to intercept the comparison.\n#\n# 2. Else __eq__ and __ne__ return False and True, respectively.  This is\n#    so opertaions like\n#\n#        x == y\n#        x != y\n#        x in sequence\n#        x not in sequence\n#        dict[x] = y\n#\n#    don\'t raise annoying TypeErrors just because a datetime object\n#    is part of a heterogeneous collection.  If there\'s no known way to\n#    compare X to a datetime, saying they\'re not equal is reasonable.\n\ndef _cmperror(x, y):\n    raise TypeError("can\'t compare \'%s\' to \'%s\'" % (\n                    type(x).__name__, type(y).__name__))\n\ndef _normalize_pair(hi, lo, factor):\n    if not 0 <= lo <= factor-1:\n        inc, lo = divmod(lo, factor)\n        hi += inc\n    return hi, lo\n\ndef _normalize_datetime(y, m, d, hh, mm, ss, us, ignore_overflow=False):\n    # Normalize all the inputs, and store the normalized values.\n    ss, us = _normalize_pair(ss, us, 1000000)\n    mm, ss = _normalize_pair(mm, ss, 60)\n    hh, mm = _normalize_pair(hh, mm, 60)\n    d, hh = _normalize_pair(d, hh, 24)\n    y, m, d = _normalize_date(y, m, d, ignore_overflow)\n    return y, m, d, hh, mm, ss, us\n\ndef _normalize_date(year, month, day, ignore_overflow=False):\n    # That was easy.  Now it gets muddy:  the proper range for day\n    # can\'t be determined without knowing the correct month and year,\n    # but if day is, e.g., plus or minus a million, the current month\n    # and year values make no sense (and may also be out of bounds\n    # themselves).\n    # Saying 12 months == 1 year should be non-controversial.\n    if not 1 <= month <= 12:\n        year, month = _normalize_pair(year, month-1, 12)\n        month += 1\n        assert 1 <= month <= 12\n\n    # Now only day can be out of bounds (year may also be out of bounds\n    # for a datetime object, but we don\'t care about that here).\n    # If day is out of bounds, what to do is arguable, but at least the\n    # method here is principled and explainable.\n    dim = _days_in_month(year, month)\n    if not 1 <= day <= dim:\n        # Move day-1 days from the first of the month.  First try to\n        # get off cheap if we\'re only one day out of range (adjustments\n        # for timezone alone can\'t be worse than that).\n        if day == 0:    # move back a day\n            month -= 1\n            if month > 0:\n                day = _days_in_month(year, month)\n            else:\n                year, month, day = year-1, 12, 31\n        elif day == dim + 1:    # move forward a day\n            month += 1\n            day = 1\n            if month > 12:\n                month = 1\n                year += 1\n        else:\n            ordinal = _ymd2ord(year, month, 1) + (day - 1)\n            year, month, day = _ord2ymd(ordinal)\n\n    if not ignore_overflow and not MINYEAR <= year <= MAXYEAR:\n        raise OverflowError("date value out of range")\n    return year, month, day\n\ndef _accum(tag, sofar, num, factor, leftover):\n    if isinstance(num, int):\n        prod = num * factor\n        rsum = sofar + prod\n        return rsum, leftover\n    if isinstance(num, float):\n        fracpart, intpart = _math.modf(num)\n        prod = int(intpart) * factor\n        rsum = sofar + prod\n        if fracpart == 0.0:\n            return rsum, leftover\n        assert isinstance(factor, int)\n        fracpart, intpart = _math.modf(factor * fracpart)\n        rsum += int(intpart)\n        return rsum, leftover + fracpart\n    raise TypeError("unsupported type for timedelta %s component: %s" %\n                    (tag, type(num)))\n\nclass timedelta(object):\n    """Represent the difference between two datetime objects.\n\n    Supported operators:\n\n    - add, subtract timedelta\n    - unary plus, minus, abs\n    - compare to timedelta\n    - multiply, divide by int/long\n\n    In addition, datetime supports subtraction of two datetime objects\n    returning a timedelta, and addition or subtraction of a datetime\n    and a timedelta giving a datetime.\n\n    Representation: (days, seconds, microseconds).  Why?  Because I\n    felt like it.\n    """\n    __slots__ = \'_days\', \'_seconds\', \'_microseconds\', \'_hashcode\'\n\n    def __new__(cls, days=_SENTINEL, seconds=_SENTINEL, microseconds=_SENTINEL,\n                milliseconds=_SENTINEL, minutes=_SENTINEL, hours=_SENTINEL, weeks=_SENTINEL):\n        x = 0\n        leftover = 0.0\n        if microseconds is not _SENTINEL:\n            x, leftover = _accum("microseconds", x, microseconds, _US_PER_US, leftover)\n        if milliseconds is not _SENTINEL:\n            x, leftover = _accum("milliseconds", x, milliseconds, _US_PER_MS, leftover)\n        if seconds is not _SENTINEL:\n            x, leftover = _accum("seconds", x, seconds, _US_PER_SECOND, leftover)\n        if minutes is not _SENTINEL:\n            x, leftover = _accum("minutes", x, minutes, _US_PER_MINUTE, leftover)\n        if hours is not _SENTINEL:\n            x, leftover = _accum("hours", x, hours, _US_PER_HOUR, leftover)\n        if days is not _SENTINEL:\n            x, leftover = _accum("days", x, days, _US_PER_DAY, leftover)\n        if weeks is not _SENTINEL:\n            x, leftover = _accum("weeks", x, weeks, _US_PER_WEEK, leftover)\n        if leftover != 0.0:\n            x += _round(leftover)\n        return cls._from_microseconds(x)\n\n    @classmethod\n    def _from_microseconds(cls, us):\n        s, us = divmod(us, _US_PER_SECOND)\n        d, s = divmod(s, _SECONDS_PER_DAY)\n        return cls._create(d, s, us, False)\n\n    @classmethod\n    def _create(cls, d, s, us, normalize):\n        if normalize:\n            s, us = _normalize_pair(s, us, 1000000)\n            d, s = _normalize_pair(d, s, 24*3600)\n\n        if not -_MAX_DELTA_DAYS <= d <= _MAX_DELTA_DAYS:\n            raise OverflowError("days=%d; must have magnitude <= %d" % (d, _MAX_DELTA_DAYS))\n\n        self = object.__new__(cls)\n        self._days = d\n        self._seconds = s\n        self._microseconds = us\n        self._hashcode = -1\n        return self\n\n    def _to_microseconds(self):\n        return ((self._days * _SECONDS_PER_DAY + self._seconds) * _US_PER_SECOND +\n                self._microseconds)\n\n    def __repr__(self):\n        module = "datetime." if self.__class__ is timedelta else ""\n        if self._microseconds:\n            return "%s(%d, %d, %d)" % (module + self.__class__.__name__,\n                                       self._days,\n                                       self._seconds,\n                                       self._microseconds)\n        if self._seconds:\n            return "%s(%d, %d)" % (module + self.__class__.__name__,\n                                   self._days,\n                                   self._seconds)\n        return "%s(%d)" % (module + self.__class__.__name__, self._days)\n\n    def __str__(self):\n        mm, ss = divmod(self._seconds, 60)\n        hh, mm = divmod(mm, 60)\n        s = "%d:%02d:%02d" % (hh, mm, ss)\n        if self._days:\n            def plural(n):\n                return n, abs(n) != 1 and "s" or ""\n            s = ("%d day%s, " % plural(self._days)) + s\n        if self._microseconds:\n            s = s + ".%06d" % self._microseconds\n        return s\n\n    def total_seconds(self):\n        """Total seconds in the duration."""\n        return self._to_microseconds() / 10.0**6\n\n    # Read-only field accessors\n    @property\n    def days(self):\n        """days"""\n        return self._days\n\n    @property\n    def seconds(self):\n        """seconds"""\n        return self._seconds\n\n    @property\n    def microseconds(self):\n        """microseconds"""\n        return self._microseconds\n\n    def __add__(self, other):\n        if isinstance(other, timedelta):\n            # for CPython compatibility, we cannot use\n            # our __class__ here, but need a real timedelta\n            return timedelta._create(self._days + other._days,\n                                     self._seconds + other._seconds,\n                                     self._microseconds + other._microseconds,\n                                     True)\n        return NotImplemented\n\n    def __sub__(self, other):\n        if isinstance(other, timedelta):\n            # for CPython compatibility, we cannot use\n            # our __class__ here, but need a real timedelta\n            return timedelta._create(self._days - other._days,\n                                     self._seconds - other._seconds,\n                                     self._microseconds - other._microseconds,\n                                     True)\n        return NotImplemented\n\n    def __neg__(self):\n        # for CPython compatibility, we cannot use\n        # our __class__ here, but need a real timedelta\n        return timedelta._create(-self._days,\n                                 -self._seconds,\n                                 -self._microseconds,\n                                 True)\n\n    def __pos__(self):\n        # for CPython compatibility, we cannot use\n        # our __class__ here, but need a real timedelta\n        return timedelta._create(self._days,\n                                 self._seconds,\n                                 self._microseconds,\n                                 False)\n\n    def __abs__(self):\n        if self._days < 0:\n            return -self\n        else:\n            return self\n\n    def __mul__(self, other):\n        if not isinstance(other, int):\n            return NotImplemented\n        usec = self._to_microseconds()\n        return timedelta._from_microseconds(usec * other)\n\n    __rmul__ = __mul__\n\n    def __div__(self, other):\n        if not isinstance(other, int):\n            return NotImplemented\n        usec = self._to_microseconds()\n        return timedelta._from_microseconds(usec // other)\n\n    __floordiv__ = __div__\n\n    # Comparisons of timedelta objects with other.\n\n    def __eq__(self, other):\n        if isinstance(other, timedelta):\n            return self._cmp(other) == 0\n        else:\n            return False\n\n    def __ne__(self, other):\n        if isinstance(other, timedelta):\n            return self._cmp(other) != 0\n        else:\n            return True\n\n    def __le__(self, other):\n        if isinstance(other, timedelta):\n            return self._cmp(other) <= 0\n        else:\n            _cmperror(self, other)\n\n    def __lt__(self, other):\n        if isinstance(other, timedelta):\n            return self._cmp(other) < 0\n        else:\n            _cmperror(self, other)\n\n    def __ge__(self, other):\n        if isinstance(other, timedelta):\n            return self._cmp(other) >= 0\n        else:\n            _cmperror(self, other)\n\n    def __gt__(self, other):\n        if isinstance(other, timedelta):\n            return self._cmp(other) > 0\n        else:\n            _cmperror(self, other)\n\n    def _cmp(self, other):\n        assert isinstance(other, timedelta)\n        return _cmp(self._getstate(), other._getstate())\n\n    def __hash__(self):\n        if self._hashcode == -1:\n            self._hashcode = hash(self._getstate())\n        return self._hashcode\n\n    def __nonzero__(self):\n        return (self._days != 0 or\n                self._seconds != 0 or\n                self._microseconds != 0)\n\ntimedelta.min = timedelta(-_MAX_DELTA_DAYS)\ntimedelta.max = timedelta(_MAX_DELTA_DAYS, 24*3600-1, 1000000-1)\ntimedelta.resolution = timedelta(microseconds=1)\n\nclass date(object):\n    """Concrete date type.\n\n    Constructors:\n\n    __new__()\n    fromtimestamp()\n    today()\n    fromordinal()\n\n    Operators:\n\n    __repr__, __str__\n    __cmp__, __hash__\n    __add__, __radd__, __sub__ (add/radd only with timedelta arg)\n\n    Methods:\n\n    timetuple()\n    toordinal()\n    weekday()\n    isoweekday(), isocalendar(), isoformat()\n    ctime()\n    strftime()\n\n    Properties (readonly):\n    year, month, day\n    """\n    __slots__ = \'_year\', \'_month\', \'_day\', \'_hashcode\'\n\n    def __new__(cls, year, month=None, day=None):\n        """Constructor.\n\n        Arguments:\n\n        year, month, day (required, base 1)\n        """\n        year, month, day = _check_date_fields(year, month, day)\n        self = object.__new__(cls)\n        self._year = year\n        self._month = month\n        self._day = day\n        self._hashcode = -1\n        return self\n\n    # Additional constructors\n\n    @classmethod\n    def fromtimestamp(cls, t):\n        "Construct a date from a POSIX timestamp (like time.time())."\n        y, m, d, hh, mm, ss, weekday, jday, dst = _time.localtime(t)\n        return cls(y, m, d)\n\n    @classmethod\n    def today(cls):\n        "Construct a date from time.time()."\n        t = _time.time()\n        return cls.fromtimestamp(t)\n\n    @classmethod\n    def fromordinal(cls, n):\n        """Contruct a date from a proleptic Gregorian ordinal.\n\n        January 1 of year 1 is day 1.  Only the year, month and day are\n        non-zero in the result.\n        """\n        y, m, d = _ord2ymd(n)\n        return cls(y, m, d)\n\n    # Conversions to string\n\n    def __repr__(self):\n        """Convert to formal string, for repr().\n\n        >>> dt = datetime(2010, 1, 1)\n        >>> repr(dt)\n        \'datetime.datetime(2010, 1, 1, 0, 0)\'\n\n        >>> dt = datetime(2010, 1, 1, tzinfo=timezone.utc)\n        >>> repr(dt)\n        \'datetime.datetime(2010, 1, 1, 0, 0, tzinfo=datetime.timezone.utc)\'\n        """\n        module = "datetime." if self.__class__ is date else ""\n        return "%s(%d, %d, %d)" % (module + self.__class__.__name__,\n                                   self._year,\n                                   self._month,\n                                   self._day)\n\n    # XXX These shouldn\'t depend on time.localtime(), because that\n    # clips the usable dates to [1970 .. 2038).  At least ctime() is\n    # easily done without using strftime() -- that\'s better too because\n    # strftime("%c", ...) is locale specific.\n\n    def ctime(self):\n        "Return ctime() style string."\n        weekday = self.toordinal() % 7 or 7\n        return "%s %s %2d 00:00:00 %04d" % (\n            _DAYNAMES[weekday],\n            _MONTHNAMES[self._month],\n            self._day, self._year)\n\n    def strftime(self, format):\n        "Format using strftime()."\n        return _wrap_strftime(self, format, self.timetuple())\n\n    def __format__(self, fmt):\n        if not isinstance(fmt, (str, unicode)):\n            raise ValueError("__format__ expects str or unicode, not %s" %\n                             fmt.__class__.__name__)\n        if len(fmt) != 0:\n            return self.strftime(fmt)\n        return str(self)\n\n    def isoformat(self):\n        """Return the date formatted according to ISO.\n\n        This is \'YYYY-MM-DD\'.\n\n        References:\n        - http://www.w3.org/TR/NOTE-datetime\n        - http://www.cl.cam.ac.uk/~mgk25/iso-time.html\n        """\n        return "%04d-%02d-%02d" % (self._year, self._month, self._day)\n\n    __str__ = isoformat\n\n    # Read-only field accessors\n    @property\n    def year(self):\n        """year (1-9999)"""\n        return self._year\n\n    @property\n    def month(self):\n        """month (1-12)"""\n        return self._month\n\n    @property\n    def day(self):\n        """day (1-31)"""\n        return self._day\n\n    # Standard conversions, __cmp__, __hash__ (and helpers)\n\n    def timetuple(self):\n        "Return local time tuple compatible with time.localtime()."\n        return _build_struct_time(self._year, self._month, self._day,\n                                  0, 0, 0, -1)\n\n    def toordinal(self):\n        """Return proleptic Gregorian ordinal for the year, month and day.\n\n        January 1 of year 1 is day 1.  Only the year, month and day values\n        contribute to the result.\n        """\n        return _ymd2ord(self._year, self._month, self._day)\n\n    def replace(self, year=None, month=None, day=None):\n        """Return a new date with new values for the specified fields."""\n        if year is None:\n            year = self._year\n        if month is None:\n            month = self._month\n        if day is None:\n            day = self._day\n        return date(year, month, day)\n\n    # Comparisons of date objects with other.\n\n    def __eq__(self, other):\n        if isinstance(other, date):\n            return self._cmp(other) == 0\n        elif hasattr(other, "timetuple"):\n            return NotImplemented\n        else:\n            return False\n\n    def __ne__(self, other):\n        if isinstance(other, date):\n            return self._cmp(other) != 0\n        elif hasattr(other, "timetuple"):\n            return NotImplemented\n        else:\n            return True\n\n    def __le__(self, other):\n        if isinstance(other, date):\n            return self._cmp(other) <= 0\n        elif hasattr(other, "timetuple"):\n            return NotImplemented\n        else:\n            _cmperror(self, other)\n\n    def __lt__(self, other):\n        if isinstance(other, date):\n            return self._cmp(other) < 0\n        elif hasattr(other, "timetuple"):\n            return NotImplemented\n        else:\n            _cmperror(self, other)\n\n    def __ge__(self, other):\n        if isinstance(other, date):\n            return self._cmp(other) >= 0\n        elif hasattr(other, "timetuple"):\n            return NotImplemented\n        else:\n            _cmperror(self, other)\n\n    def __gt__(self, other):\n        if isinstance(other, date):\n            return self._cmp(other) > 0\n        elif hasattr(other, "timetuple"):\n            return NotImplemented\n        else:\n            _cmperror(self, other)\n\n    def _cmp(self, other):\n        assert isinstance(other, date)\n        y, m, d = self._year, self._month, self._day\n        y2, m2, d2 = other._year, other._month, other._day\n        return _cmp((y, m, d), (y2, m2, d2))\n\n    def __hash__(self):\n        "Hash."\n        if self._hashcode == -1:\n            self._hashcode = hash(self._getstate())\n        return self._hashcode\n\n    # Computations\n\n    def _add_timedelta(self, other, factor):\n        y, m, d = _normalize_date(\n            self._year,\n            self._month,\n            self._day + other.days * factor)\n        return date(y, m, d)\n\n    def __add__(self, other):\n        "Add a date to a timedelta."\n        if isinstance(other, timedelta):\n            return self._add_timedelta(other, 1)\n        return NotImplemented\n\n    __radd__ = __add__\n\n    def __sub__(self, other):\n        """Subtract two dates, or a date and a timedelta."""\n        if isinstance(other, date):\n            days1 = self.toordinal()\n            days2 = other.toordinal()\n            return timedelta._create(days1 - days2, 0, 0, False)\n        if isinstance(other, timedelta):\n            return self._add_timedelta(other, -1)\n        return NotImplemented\n\n    def weekday(self):\n        "Return day of the week, where Monday == 0 ... Sunday == 6."\n        return (self.toordinal() + 6) % 7\n\n    # Day-of-the-week and week-of-the-year, according to ISO\n\n    def isoweekday(self):\n        "Return day of the week, where Monday == 1 ... Sunday == 7."\n        # 1-Jan-0001 is a Monday\n        return self.toordinal() % 7 or 7\n\n    def isocalendar(self):\n        """Return a 3-tuple containing ISO year, week number, and weekday.\n\n        The first ISO week of the year is the (Mon-Sun) week\n        containing the year\'s first Thursday; everything else derives\n        from that.\n\n        The first week is 1; Monday is 1 ... Sunday is 7.\n\n        ISO calendar algorithm taken from\n        http://www.phys.uu.nl/~vgent/calendar/isocalendar.htm\n        """\n        year = self._year\n        week1monday = _isoweek1monday(year)\n        today = _ymd2ord(self._year, self._month, self._day)\n        # Internally, week and day have origin 0\n        week, day = divmod(today - week1monday, 7)\n        if week < 0:\n            year -= 1\n            week1monday = _isoweek1monday(year)\n            week, day = divmod(today - week1monday, 7)\n        elif week >= 52:\n            if today >= _isoweek1monday(year+1):\n                year += 1\n                week = 0\n        return year, week+1, day+1\n\n_date_class = date  # so functions w/ args named "date" can get at the class\n\ndate.min = date(1, 1, 1)\ndate.max = date(9999, 12, 31)\ndate.resolution = timedelta(days=1)\n\nclass tzinfo(object):\n    """Abstract base class for time zone info classes.\n\n    Subclasses must override the name(), utcoffset() and dst() methods.\n    """\n    __slots__ = ()\n\n    def tzname(self, dt):\n        "datetime -> string name of time zone."\n        raise NotImplementedError("tzinfo subclass must override tzname()")\n\n    def utcoffset(self, dt):\n        "datetime -> minutes east of UTC (negative for west of UTC)"\n        raise NotImplementedError("tzinfo subclass must override utcoffset()")\n\n    def dst(self, dt):\n        """datetime -> DST offset in minutes east of UTC.\n\n        Return 0 if DST not in effect.  utcoffset() must include the DST\n        offset.\n        """\n        raise NotImplementedError("tzinfo subclass must override dst()")\n\n    def fromutc(self, dt):\n        "datetime in UTC -> datetime in local time."\n\n        if not isinstance(dt, datetime):\n            raise TypeError("fromutc() requires a datetime argument")\n        if dt.tzinfo is not self:\n            raise ValueError("dt.tzinfo is not self")\n\n        dtoff = dt.utcoffset()\n        if dtoff is None:\n            raise ValueError("fromutc() requires a non-None utcoffset() "\n                             "result")\n\n        # See the long comment block at the end of this file for an\n        # explanation of this algorithm.\n        dtdst = dt.dst()\n        if dtdst is None:\n            raise ValueError("fromutc() requires a non-None dst() result")\n        delta = dtoff - dtdst\n        if delta:\n            dt = dt + delta\n            dtdst = dt.dst()\n            if dtdst is None:\n                raise ValueError("fromutc(): dt.dst gave inconsistent "\n                                 "results; cannot convert")\n        if dtdst:\n            return dt + dtdst\n        else:\n            return dt\n\n_tzinfo_class = tzinfo\n\nclass time(object):\n    """Time with time zone.\n\n    Constructors:\n\n    __new__()\n\n    Operators:\n\n    __repr__, __str__\n    __cmp__, __hash__\n\n    Methods:\n\n    strftime()\n    isoformat()\n    utcoffset()\n    tzname()\n    dst()\n\n    Properties (readonly):\n    hour, minute, second, microsecond, tzinfo\n    """\n    __slots__ = \'_hour\', \'_minute\', \'_second\', \'_microsecond\', \'_tzinfo\', \'_hashcode\'\n\n    def __new__(cls, hour=0, minute=0, second=0, microsecond=0, tzinfo=None):\n        """Constructor.\n\n        Arguments:\n\n        hour, minute (required)\n        second, microsecond (default to zero)\n        tzinfo (default to None)\n        """\n        hour, minute, second, microsecond = _check_time_fields(\n            hour, minute, second, microsecond)\n        _check_tzinfo_arg(tzinfo)\n        self = object.__new__(cls)\n        self._hour = hour\n        self._minute = minute\n        self._second = second\n        self._microsecond = microsecond\n        self._tzinfo = tzinfo\n        self._hashcode = -1\n        return self\n\n    # Read-only field accessors\n    @property\n    def hour(self):\n        """hour (0-23)"""\n        return self._hour\n\n    @property\n    def minute(self):\n        """minute (0-59)"""\n        return self._minute\n\n    @property\n    def second(self):\n        """second (0-59)"""\n        return self._second\n\n    @property\n    def microsecond(self):\n        """microsecond (0-999999)"""\n        return self._microsecond\n\n    @property\n    def tzinfo(self):\n        """timezone info object"""\n        return self._tzinfo\n\n    # Standard conversions, __hash__ (and helpers)\n\n    # Comparisons of time objects with other.\n\n    def __eq__(self, other):\n        if isinstance(other, time):\n            return self._cmp(other) == 0\n        else:\n            return False\n\n    def __ne__(self, other):\n        if isinstance(other, time):\n            return self._cmp(other) != 0\n        else:\n            return True\n\n    def __le__(self, other):\n        if isinstance(other, time):\n            return self._cmp(other) <= 0\n        else:\n            _cmperror(self, other)\n\n    def __lt__(self, other):\n        if isinstance(other, time):\n            return self._cmp(other) < 0\n        else:\n            _cmperror(self, other)\n\n    def __ge__(self, other):\n        if isinstance(other, time):\n            return self._cmp(other) >= 0\n        else:\n            _cmperror(self, other)\n\n    def __gt__(self, other):\n        if isinstance(other, time):\n            return self._cmp(other) > 0\n        else:\n            _cmperror(self, other)\n\n    def _cmp(self, other):\n        assert isinstance(other, time)\n        mytz = self._tzinfo\n        ottz = other._tzinfo\n        myoff = otoff = None\n\n        if mytz is ottz:\n            base_compare = True\n        else:\n            myoff = self._utcoffset()\n            otoff = other._utcoffset()\n            base_compare = myoff == otoff\n\n        if base_compare:\n            return _cmp((self._hour, self._minute, self._second,\n                         self._microsecond),\n                        (other._hour, other._minute, other._second,\n                         other._microsecond))\n        if myoff is None or otoff is None:\n            raise TypeError("can\'t compare offset-naive and offset-aware times")\n        myhhmm = self._hour * 60 + self._minute - myoff\n        othhmm = other._hour * 60 + other._minute - otoff\n        return _cmp((myhhmm, self._second, self._microsecond),\n                    (othhmm, other._second, other._microsecond))\n\n    def __hash__(self):\n        """Hash."""\n        if self._hashcode == -1:\n            tzoff = self._utcoffset()\n            if not tzoff:  # zero or None\n                self._hashcode = hash(self._getstate()[0])\n            else:\n                h, m = divmod(self.hour * 60 + self.minute - tzoff, 60)\n                if 0 <= h < 24:\n                    self._hashcode = hash(time(h, m, self.second, self.microsecond))\n                else:\n                    self._hashcode = hash((h, m, self.second, self.microsecond))\n        return self._hashcode\n\n    # Conversion to string\n\n    def _tzstr(self, sep=":"):\n        """Return formatted timezone offset (+xx:xx) or None."""\n        off = self._utcoffset()\n        if off is not None:\n            if off < 0:\n                sign = "-"\n                off = -off\n            else:\n                sign = "+"\n            hh, mm = divmod(off, 60)\n            assert 0 <= hh < 24\n            off = "%s%02d%s%02d" % (sign, hh, sep, mm)\n        return off\n\n    def __repr__(self):\n        """Convert to formal string, for repr()."""\n        if self._microsecond != 0:\n            s = ", %d, %d" % (self._second, self._microsecond)\n        elif self._second != 0:\n            s = ", %d" % self._second\n        else:\n            s = ""\n        module = "datetime." if self.__class__ is time else ""\n        s= "%s(%d, %d%s)" % (module + self.__class__.__name__,\n                             self._hour, self._minute, s)\n        if self._tzinfo is not None:\n            assert s[-1:] == ")"\n            s = s[:-1] + ", tzinfo=%r" % self._tzinfo + ")"\n        return s\n\n    def isoformat(self):\n        """Return the time formatted according to ISO.\n\n        This is \'HH:MM:SS.mmmmmm+zz:zz\', or \'HH:MM:SS+zz:zz\' if\n        self.microsecond == 0.\n        """\n        s = _format_time(self._hour, self._minute, self._second,\n                         self._microsecond)\n        tz = self._tzstr()\n        if tz:\n            s += tz\n        return s\n\n    __str__ = isoformat\n\n    def strftime(self, format):\n        """Format using strftime().  The date part of the timestamp passed\n        to underlying strftime should not be used.\n        """\n        # The year must be >= _MINYEARFMT else Python\'s strftime implementation\n        # can raise a bogus exception.\n        timetuple = (1900, 1, 1,\n                     self._hour, self._minute, self._second,\n                     0, 1, -1)\n        return _wrap_strftime(self, format, timetuple)\n\n    def __format__(self, fmt):\n        if not isinstance(fmt, (str, unicode)):\n            raise ValueError("__format__ expects str or unicode, not %s" %\n                             fmt.__class__.__name__)\n        if len(fmt) != 0:\n            return self.strftime(fmt)\n        return str(self)\n\n    # Timezone functions\n\n    def utcoffset(self):\n        """Return the timezone offset in minutes east of UTC (negative west of\n        UTC)."""\n        if self._tzinfo is None:\n            return None\n        offset = self._tzinfo.utcoffset(None)\n        offset = _check_utc_offset("utcoffset", offset)\n        if offset is not None:\n            offset = timedelta._create(0, offset * 60, 0, True)\n        return offset\n\n    # Return an integer (or None) instead of a timedelta (or None).\n    def _utcoffset(self):\n        if self._tzinfo is None:\n            return None\n        offset = self._tzinfo.utcoffset(None)\n        offset = _check_utc_offset("utcoffset", offset)\n        return offset\n\n    def tzname(self):\n        """Return the timezone name.\n\n        Note that the name is 100% informational -- there\'s no requirement that\n        it mean anything in particular. For example, "GMT", "UTC", "-500",\n        "-5:00", "EDT", "US/Eastern", "America/New York" are all valid replies.\n        """\n        if self._tzinfo is None:\n            return None\n        name = self._tzinfo.tzname(None)\n        _check_tzname(name)\n        return name\n\n    def dst(self):\n        """Return 0 if DST is not in effect, or the DST offset (in minutes\n        eastward) if DST is in effect.\n\n        This is purely informational; the DST offset has already been added to\n        the UTC offset returned by utcoffset() if applicable, so there\'s no\n        need to consult dst() unless you\'re interested in displaying the DST\n        info.\n        """\n        if self._tzinfo is None:\n            return None\n        offset = self._tzinfo.dst(None)\n        offset = _check_utc_offset("dst", offset)\n        if offset is not None:\n            offset = timedelta._create(0, offset * 60, 0, True)\n        return offset\n\n    # Return an integer (or None) instead of a timedelta (or None).\n    def _dst(self):\n        if self._tzinfo is None:\n            return None\n        offset = self._tzinfo.dst(None)\n        offset = _check_utc_offset("dst", offset)\n        return offset\n\n    def replace(self, hour=None, minute=None, second=None, microsecond=None,\n                tzinfo=True):\n        """Return a new time with new values for the specified fields."""\n        if hour is None:\n            hour = self.hour\n        if minute is None:\n            minute = self.minute\n        if second is None:\n            second = self.second\n        if microsecond is None:\n            microsecond = self.microsecond\n        if tzinfo is True:\n            tzinfo = self.tzinfo\n        return time(hour, minute, second, microsecond, tzinfo)\n\n    def __nonzero__(self):\n        if self.second or self.microsecond:\n            return True\n        offset = self._utcoffset() or 0\n        return self.hour * 60 + self.minute != offset\n\n_time_class = time  # so functions w/ args named "time" can get at the class\n\ntime.min = time(0, 0, 0)\ntime.max = time(23, 59, 59, 999999)\ntime.resolution = timedelta(microseconds=1)\n\nclass datetime(date):\n    """datetime(year, month, day[, hour[, minute[, second[, microsecond[,tzinfo]]]]])\n\n    The year, month and day arguments are required. tzinfo may be None, or an\n    instance of a tzinfo subclass. The remaining arguments may be ints or longs.\n    """\n    __slots__ = date.__slots__ + time.__slots__\n\n    def __new__(cls, year, month=None, day=None, hour=0, minute=0, second=0,\n                microsecond=0, tzinfo=None):\n        year, month, day = _check_date_fields(year, month, day)\n        hour, minute, second, microsecond = _check_time_fields(\n            hour, minute, second, microsecond)\n        _check_tzinfo_arg(tzinfo)\n        self = object.__new__(cls)\n        self._year = year\n        self._month = month\n        self._day = day\n        self._hour = hour\n        self._minute = minute\n        self._second = second\n        self._microsecond = microsecond\n        self._tzinfo = tzinfo\n        self._hashcode = -1\n        return self\n\n    # Read-only field accessors\n    @property\n    def hour(self):\n        """hour (0-23)"""\n        return self._hour\n\n    @property\n    def minute(self):\n        """minute (0-59)"""\n        return self._minute\n\n    @property\n    def second(self):\n        """second (0-59)"""\n        return self._second\n\n    @property\n    def microsecond(self):\n        """microsecond (0-999999)"""\n        return self._microsecond\n\n    @property\n    def tzinfo(self):\n        """timezone info object"""\n        return self._tzinfo\n\n    @classmethod\n    def fromtimestamp(cls, timestamp, tz=None):\n        """Construct a datetime from a POSIX timestamp (like time.time()).\n\n        A timezone info object may be passed in as well.\n        """\n        _check_tzinfo_arg(tz)\n        converter = _time.localtime if tz is None else _time.gmtime\n        self = cls._from_timestamp(converter, timestamp, tz)\n        if tz is not None:\n            self = tz.fromutc(self)\n        return self\n\n    @classmethod\n    def utcfromtimestamp(cls, t):\n        "Construct a UTC datetime from a POSIX timestamp (like time.time())."\n        return cls._from_timestamp(_time.gmtime, t, None)\n\n    @classmethod\n    def _from_timestamp(cls, converter, timestamp, tzinfo):\n        t_full = timestamp\n        timestamp = int(_math.floor(timestamp))\n        frac = t_full - timestamp\n        us = _round(frac * 1e6)\n\n        # If timestamp is less than one microsecond smaller than a\n        # full second, us can be rounded up to 1000000.  In this case,\n        # roll over to seconds, otherwise, ValueError is raised\n        # by the constructor.\n        if us == 1000000:\n            timestamp += 1\n            us = 0\n        y, m, d, hh, mm, ss, weekday, jday, dst = converter(timestamp)\n        ss = min(ss, 59)    # clamp out leap seconds if the platform has them\n        return cls(y, m, d, hh, mm, ss, us, tzinfo)\n\n    @classmethod\n    def now(cls, tz=None):\n        "Construct a datetime from time.time() and optional time zone info."\n        t = _time.time()\n        return cls.fromtimestamp(t, tz)\n\n    @classmethod\n    def utcnow(cls):\n        "Construct a UTC datetime from time.time()."\n        t = _time.time()\n        return cls.utcfromtimestamp(t)\n\n    @classmethod\n    def combine(cls, date, time):\n        "Construct a datetime from a given date and a given time."\n        if not isinstance(date, _date_class):\n            raise TypeError("date argument must be a date instance")\n        if not isinstance(time, _time_class):\n            raise TypeError("time argument must be a time instance")\n        return cls(date.year, date.month, date.day,\n                   time.hour, time.minute, time.second, time.microsecond,\n                   time.tzinfo)\n\n    def timetuple(self):\n        "Return local time tuple compatible with time.localtime()."\n        dst = self._dst()\n        if dst is None:\n            dst = -1\n        elif dst:\n            dst = 1\n        return _build_struct_time(self.year, self.month, self.day,\n                                  self.hour, self.minute, self.second,\n                                  dst)\n\n    def utctimetuple(self):\n        "Return UTC time tuple compatible with time.gmtime()."\n        y, m, d = self.year, self.month, self.day\n        hh, mm, ss = self.hour, self.minute, self.second\n        offset = self._utcoffset()\n        if offset:  # neither None nor 0\n            mm -= offset\n            y, m, d, hh, mm, ss, _ = _normalize_datetime(\n                y, m, d, hh, mm, ss, 0, ignore_overflow=True)\n        return _build_struct_time(y, m, d, hh, mm, ss, 0)\n\n    def date(self):\n        "Return the date part."\n        return date(self._year, self._month, self._day)\n\n    def time(self):\n        "Return the time part, with tzinfo None."\n        return time(self.hour, self.minute, self.second, self.microsecond)\n\n    def timetz(self):\n        "Return the time part, with same tzinfo."\n        return time(self.hour, self.minute, self.second, self.microsecond,\n                    self._tzinfo)\n\n    def replace(self, year=None, month=None, day=None, hour=None,\n                minute=None, second=None, microsecond=None, tzinfo=True):\n        """Return a new datetime with new values for the specified fields."""\n        if year is None:\n            year = self.year\n        if month is None:\n            month = self.month\n        if day is None:\n            day = self.day\n        if hour is None:\n            hour = self.hour\n        if minute is None:\n            minute = self.minute\n        if second is None:\n            second = self.second\n        if microsecond is None:\n            microsecond = self.microsecond\n        if tzinfo is True:\n            tzinfo = self.tzinfo\n        return datetime(year, month, day, hour, minute, second, microsecond,\n                        tzinfo)\n\n    def astimezone(self, tz):\n        if not isinstance(tz, tzinfo):\n            raise TypeError("tz argument must be an instance of tzinfo")\n\n        mytz = self.tzinfo\n        if mytz is None:\n            raise ValueError("astimezone() requires an aware datetime")\n\n        if tz is mytz:\n            return self\n\n        # Convert self to UTC, and attach the new time zone object.\n        myoffset = self.utcoffset()\n        if myoffset is None:\n            raise ValueError("astimezone() requires an aware datetime")\n        utc = (self - myoffset).replace(tzinfo=tz)\n\n        # Convert from UTC to tz\'s local time.\n        return tz.fromutc(utc)\n\n    # Ways to produce a string.\n\n    def ctime(self):\n        "Return ctime() style string."\n        weekday = self.toordinal() % 7 or 7\n        return "%s %s %2d %02d:%02d:%02d %04d" % (\n            _DAYNAMES[weekday],\n            _MONTHNAMES[self._month],\n            self._day,\n            self._hour, self._minute, self._second,\n            self._year)\n\n    def isoformat(self, sep=\'T\'):\n        """Return the time formatted according to ISO.\n\n        This is \'YYYY-MM-DD HH:MM:SS.mmmmmm\', or \'YYYY-MM-DD HH:MM:SS\' if\n        self.microsecond == 0.\n\n        If self.tzinfo is not None, the UTC offset is also attached, giving\n        \'YYYY-MM-DD HH:MM:SS.mmmmmm+HH:MM\' or \'YYYY-MM-DD HH:MM:SS+HH:MM\'.\n\n        Optional argument sep specifies the separator between date and\n        time, default \'T\'.\n        """\n        s = ("%04d-%02d-%02d%c" % (self._year, self._month, self._day, sep) +\n             _format_time(self._hour, self._minute, self._second,\n                          self._microsecond))\n        off = self._utcoffset()\n        if off is not None:\n            if off < 0:\n                sign = "-"\n                off = -off\n            else:\n                sign = "+"\n            hh, mm = divmod(off, 60)\n            s += "%s%02d:%02d" % (sign, hh, mm)\n        return s\n\n    def __repr__(self):\n        """Convert to formal string, for repr()."""\n        L = [self._year, self._month, self._day,  # These are never zero\n             self._hour, self._minute, self._second, self._microsecond]\n        if L[-1] == 0:\n            del L[-1]\n        if L[-1] == 0:\n            del L[-1]\n        s = ", ".join(map(str, L))\n        module = "datetime." if self.__class__ is datetime else ""\n        s = "%s(%s)" % (module + self.__class__.__name__, s)\n        if self._tzinfo is not None:\n            assert s[-1:] == ")"\n            s = s[:-1] + ", tzinfo=%r" % self._tzinfo + ")"\n        return s\n\n    def __str__(self):\n        "Convert to string, for str()."\n        return self.isoformat(sep=\' \')\n\n    @classmethod\n    def strptime(cls, date_string, format):\n        \'string, format -> new datetime parsed from a string (like time.strptime()).\'\n        from _strptime import _strptime\n        # _strptime._strptime returns a two-element tuple.  The first\n        # element is a time.struct_time object.  The second is the\n        # microseconds (which are not defined for time.struct_time).\n        struct, micros = _strptime(date_string, format)\n        return cls(*(struct[0:6] + (micros,)))\n\n    def utcoffset(self):\n        """Return the timezone offset in minutes east of UTC (negative west of\n        UTC)."""\n        if self._tzinfo is None:\n            return None\n        offset = self._tzinfo.utcoffset(self)\n        offset = _check_utc_offset("utcoffset", offset)\n        if offset is not None:\n            offset = timedelta._create(0, offset * 60, 0, True)\n        return offset\n\n    # Return an integer (or None) instead of a timedelta (or None).\n    def _utcoffset(self):\n        if self._tzinfo is None:\n            return None\n        offset = self._tzinfo.utcoffset(self)\n        offset = _check_utc_offset("utcoffset", offset)\n        return offset\n\n    def tzname(self):\n        """Return the timezone name.\n\n        Note that the name is 100% informational -- there\'s no requirement that\n        it mean anything in particular. For example, "GMT", "UTC", "-500",\n        "-5:00", "EDT", "US/Eastern", "America/New York" are all valid replies.\n        """\n        if self._tzinfo is None:\n            return None\n        name = self._tzinfo.tzname(self)\n        _check_tzname(name)\n        return name\n\n    def dst(self):\n        """Return 0 if DST is not in effect, or the DST offset (in minutes\n        eastward) if DST is in effect.\n\n        This is purely informational; the DST offset has already been added to\n        the UTC offset returned by utcoffset() if applicable, so there\'s no\n        need to consult dst() unless you\'re interested in displaying the DST\n        info.\n        """\n        if self._tzinfo is None:\n            return None\n        offset = self._tzinfo.dst(self)\n        offset = _check_utc_offset("dst", offset)\n        if offset is not None:\n            offset = timedelta._create(0, offset * 60, 0, True)\n        return offset\n\n    # Return an integer (or None) instead of a timedelta (or None).\n    def _dst(self):\n        if self._tzinfo is None:\n            return None\n        offset = self._tzinfo.dst(self)\n        offset = _check_utc_offset("dst", offset)\n        return offset\n\n    # Comparisons of datetime objects with other.\n\n    def __eq__(self, other):\n        if isinstance(other, datetime):\n            return self._cmp(other) == 0\n        elif hasattr(other, "timetuple") and not isinstance(other, date):\n            return NotImplemented\n        else:\n            return False\n\n    def __ne__(self, other):\n        if isinstance(other, datetime):\n            return self._cmp(other) != 0\n        elif hasattr(other, "timetuple") and not isinstance(other, date):\n            return NotImplemented\n        else:\n            return True\n\n    def __le__(self, other):\n        if isinstance(other, datetime):\n            return self._cmp(other) <= 0\n        elif hasattr(other, "timetuple") and not isinstance(other, date):\n            return NotImplemented\n        else:\n            _cmperror(self, other)\n\n    def __lt__(self, other):\n        if isinstance(other, datetime):\n            return self._cmp(other) < 0\n        elif hasattr(other, "timetuple") and not isinstance(other, date):\n            return NotImplemented\n        else:\n            _cmperror(self, other)\n\n    def __ge__(self, other):\n        if isinstance(other, datetime):\n            return self._cmp(other) >= 0\n        elif hasattr(other, "timetuple") and not isinstance(other, date):\n            return NotImplemented\n        else:\n            _cmperror(self, other)\n\n    def __gt__(self, other):\n        if isinstance(other, datetime):\n            return self._cmp(other) > 0\n        elif hasattr(other, "timetuple") and not isinstance(other, date):\n            return NotImplemented\n        else:\n            _cmperror(self, other)\n\n    def _cmp(self, other):\n        assert isinstance(other, datetime)\n        mytz = self._tzinfo\n        ottz = other._tzinfo\n        myoff = otoff = None\n\n        if mytz is ottz:\n            base_compare = True\n        else:\n            if mytz is not None:\n                myoff = self._utcoffset()\n            if ottz is not None:\n                otoff = other._utcoffset()\n            base_compare = myoff == otoff\n\n        if base_compare:\n            return _cmp((self._year, self._month, self._day,\n                         self._hour, self._minute, self._second,\n                         self._microsecond),\n                        (other._year, other._month, other._day,\n                         other._hour, other._minute, other._second,\n                         other._microsecond))\n        if myoff is None or otoff is None:\n            raise TypeError("can\'t compare offset-naive and offset-aware datetimes")\n        # XXX What follows could be done more efficiently...\n        diff = self - other     # this will take offsets into account\n        if diff.days < 0:\n            return -1\n        return diff and 1 or 0\n\n    def _add_timedelta(self, other, factor):\n        y, m, d, hh, mm, ss, us = _normalize_datetime(\n            self._year,\n            self._month,\n            self._day + other.days * factor,\n            self._hour,\n            self._minute,\n            self._second + other.seconds * factor,\n            self._microsecond + other.microseconds * factor)\n        return datetime(y, m, d, hh, mm, ss, us, tzinfo=self._tzinfo)\n\n    def __add__(self, other):\n        "Add a datetime and a timedelta."\n        if not isinstance(other, timedelta):\n            return NotImplemented\n        return self._add_timedelta(other, 1)\n\n    __radd__ = __add__\n\n    def __sub__(self, other):\n        "Subtract two datetimes, or a datetime and a timedelta."\n        if not isinstance(other, datetime):\n            if isinstance(other, timedelta):\n                return self._add_timedelta(other, -1)\n            return NotImplemented\n\n        delta_d = self.toordinal() - other.toordinal()\n        delta_s = (self._hour - other._hour) * 3600 + \\\n                  (self._minute - other._minute) * 60 + \\\n                  (self._second - other._second)\n        delta_us = self._microsecond - other._microsecond\n        base = timedelta._create(delta_d, delta_s, delta_us, True)\n        if self._tzinfo is other._tzinfo:\n            return base\n        myoff = self._utcoffset()\n        otoff = other._utcoffset()\n        if myoff == otoff:\n            return base\n        if myoff is None or otoff is None:\n            raise TypeError("can\'t subtract offset-naive and offset-aware datetimes")\n        return base + timedelta(minutes = otoff-myoff)\n\n    def __hash__(self):\n        if self._hashcode == -1:\n            tzoff = self._utcoffset()\n            if tzoff is None:\n                self._hashcode = hash(self._getstate()[0])\n            else:\n                days = _ymd2ord(self.year, self.month, self.day)\n                seconds = self.hour * 3600 + (self.minute - tzoff) * 60 + self.second\n                self._hashcode = hash(timedelta(days, seconds, self.microsecond))\n        return self._hashcode\n\n\n\ndatetime.min = datetime(1, 1, 1)\ndatetime.max = datetime(9999, 12, 31, 23, 59, 59, 999999)\ndatetime.resolution = timedelta(microseconds=1)\n\n\ndef _isoweek1monday(year):\n    # Helper to calculate the day number of the Monday starting week 1\n    # XXX This could be done more efficiently\n    THURSDAY = 3\n    firstday = _ymd2ord(year, 1, 1)\n    firstweekday = (firstday + 6) % 7  # See weekday() above\n    week1monday = firstday - firstweekday\n    if firstweekday > THURSDAY:\n        week1monday += 7\n    return week1monday\n\n"""\nSome time zone algebra.  For a datetime x, let\n    x.n = x stripped of its timezone -- its naive time.\n    x.o = x.utcoffset(), and assuming that doesn\'t raise an exception or\n          return None\n    x.d = x.dst(), and assuming that doesn\'t raise an exception or\n          return None\n    x.s = x\'s standard offset, x.o - x.d\n\nNow some derived rules, where k is a duration (timedelta).\n\n1. x.o = x.s + x.d\n   This follows from the definition of x.s.\n\n2. If x and y have the same tzinfo member, x.s = y.s.\n   This is actually a requirement, an assumption we need to make about\n   sane tzinfo classes.\n\n3. The naive UTC time corresponding to x is x.n - x.o.\n   This is again a requirement for a sane tzinfo class.\n\n4. (x+k).s = x.s\n   This follows from #2, and that datimetimetz+timedelta preserves tzinfo.\n\n5. (x+k).n = x.n + k\n   Again follows from how arithmetic is defined.\n\nNow we can explain tz.fromutc(x).  Let\'s assume it\'s an interesting case\n(meaning that the various tzinfo methods exist, and don\'t blow up or return\nNone when called).\n\nThe function wants to return a datetime y with timezone tz, equivalent to x.\nx is already in UTC.\n\nBy #3, we want\n\n    y.n - y.o = x.n                             [1]\n\nThe algorithm starts by attaching tz to x.n, and calling that y.  So\nx.n = y.n at the start.  Then it wants to add a duration k to y, so that [1]\nbecomes true; in effect, we want to solve [2] for k:\n\n   (y+k).n - (y+k).o = x.n                      [2]\n\nBy #1, this is the same as\n\n   (y+k).n - ((y+k).s + (y+k).d) = x.n          [3]\n\nBy #5, (y+k).n = y.n + k, which equals x.n + k because x.n=y.n at the start.\nSubstituting that into [3],\n\n   x.n + k - (y+k).s - (y+k).d = x.n; the x.n terms cancel, leaving\n   k - (y+k).s - (y+k).d = 0; rearranging,\n   k = (y+k).s - (y+k).d; by #4, (y+k).s == y.s, so\n   k = y.s - (y+k).d\n\nOn the RHS, (y+k).d can\'t be computed directly, but y.s can be, and we\napproximate k by ignoring the (y+k).d term at first.  Note that k can\'t be\nvery large, since all offset-returning methods return a duration of magnitude\nless than 24 hours.  For that reason, if y is firmly in std time, (y+k).d must\nbe 0, so ignoring it has no consequence then.\n\nIn any case, the new value is\n\n    z = y + y.s                                 [4]\n\nIt\'s helpful to step back at look at [4] from a higher level:  it\'s simply\nmapping from UTC to tz\'s standard time.\n\nAt this point, if\n\n    z.n - z.o = x.n                             [5]\n\nwe have an equivalent time, and are almost done.  The insecurity here is\nat the start of daylight time.  Picture US Eastern for concreteness.  The wall\ntime jumps from 1:59 to 3:00, and wall hours of the form 2:MM don\'t make good\nsense then.  The docs ask that an Eastern tzinfo class consider such a time to\nbe EDT (because it\'s "after 2"), which is a redundant spelling of 1:MM EST\non the day DST starts.  We want to return the 1:MM EST spelling because that\'s\nthe only spelling that makes sense on the local wall clock.\n\nIn fact, if [5] holds at this point, we do have the standard-time spelling,\nbut that takes a bit of proof.  We first prove a stronger result.  What\'s the\ndifference between the LHS and RHS of [5]?  Let\n\n    diff = x.n - (z.n - z.o)                    [6]\n\nNow\n    z.n =                       by [4]\n    (y + y.s).n =               by #5\n    y.n + y.s =                 since y.n = x.n\n    x.n + y.s =                 since z and y are have the same tzinfo member,\n                                    y.s = z.s by #2\n    x.n + z.s\n\nPlugging that back into [6] gives\n\n    diff =\n    x.n - ((x.n + z.s) - z.o) =     expanding\n    x.n - x.n - z.s + z.o =         cancelling\n    - z.s + z.o =                   by #2\n    z.d\n\nSo diff = z.d.\n\nIf [5] is true now, diff = 0, so z.d = 0 too, and we have the standard-time\nspelling we wanted in the endcase described above.  We\'re done.  Contrarily,\nif z.d = 0, then we have a UTC equivalent, and are also done.\n\nIf [5] is not true now, diff = z.d != 0, and z.d is the offset we need to\nadd to z (in effect, z is in tz\'s standard time, and we need to shift the\nlocal clock into tz\'s daylight time).\n\nLet\n\n    z\' = z + z.d = z + diff                     [7]\n\nand we can again ask whether\n\n    z\'.n - z\'.o = x.n                           [8]\n\nIf so, we\'re done.  If not, the tzinfo class is insane, according to the\nassumptions we\'ve made.  This also requires a bit of proof.  As before, let\'s\ncompute the difference between the LHS and RHS of [8] (and skipping some of\nthe justifications for the kinds of substitutions we\'ve done several times\nalready):\n\n    diff\' = x.n - (z\'.n - z\'.o) =           replacing z\'.n via [7]\n            x.n  - (z.n + diff - z\'.o) =    replacing diff via [6]\n            x.n - (z.n + x.n - (z.n - z.o) - z\'.o) =\n            x.n - z.n - x.n + z.n - z.o + z\'.o =    cancel x.n\n            - z.n + z.n - z.o + z\'.o =              cancel z.n\n            - z.o + z\'.o =                      #1 twice\n            -z.s - z.d + z\'.s + z\'.d =          z and z\' have same tzinfo\n            z\'.d - z.d\n\nSo z\' is UTC-equivalent to x iff z\'.d = z.d at this point.  If they are equal,\nwe\'ve found the UTC-equivalent so are done.  In fact, we stop with [7] and\nreturn z\', not bothering to compute z\'.d.\n\nHow could z.d and z\'d differ?  z\' = z + z.d [7], so merely moving z\' by\na dst() offset, and starting *from* a time already in DST (we know z.d != 0),\nwould have to change the result dst() returns:  we start in DST, and moving\na little further into it takes us out of DST.\n\nThere isn\'t a sane case where this can happen.  The closest it gets is at\nthe end of DST, where there\'s an hour in UTC with no spelling in a hybrid\ntzinfo class.  In US Eastern, that\'s 5:MM UTC = 0:MM EST = 1:MM EDT.  During\nthat hour, on an Eastern clock 1:MM is taken as being in standard time (6:MM\nUTC) because the docs insist on that, but 0:MM is taken as being in daylight\ntime (4:MM UTC).  There is no local time mapping to 5:MM UTC.  The local\nclock jumps from 1:59 back to 1:00 again, and repeats the 1:MM hour in\nstandard time.  Since that\'s what the local clock *does*, we want to map both\nUTC hours 5:MM and 6:MM to 1:MM Eastern.  The result is ambiguous\nin local time, but so it goes -- it\'s the way the local clock works.\n\nWhen x = 5:MM UTC is the input to this algorithm, x.o=0, y.o=-5 and y.d=0,\nso z=0:MM.  z.d=60 (minutes) then, so [5] doesn\'t hold and we keep going.\nz\' = z + z.d = 1:MM then, and z\'.d=0, and z\'.d - z.d = -60 != 0 so [8]\n(correctly) concludes that z\' is not UTC-equivalent to x.\n\nBecause we know z.d said z was in daylight time (else [5] would have held and\nwe would have stopped then), and we know z.d != z\'.d (else [8] would have held\nand we have stopped then), and there are only 2 possible values dst() can\nreturn in Eastern, it follows that z\'.d must be 0 (which it is in the example,\nbut the reasoning doesn\'t depend on the example -- it depends on there being\ntwo possible dst() outcomes, one zero and the other non-zero).  Therefore\nz\' must be in standard time, and is the spelling we want in this case.\n\nNote again that z\' is not UTC-equivalent as far as the hybrid tzinfo class is\nconcerned (because it takes z\' as being in standard time rather than the\ndaylight time we intend here), but returning it gives the real-life "local\nclock repeats an hour" behavior when mapping the "unspellable" UTC hour into\ntz.\n\nWhen the input is 6:MM, z=1:MM and z.d=0, and we stop at once, again with\nthe 1:MM standard time spelling we want.\n\nSo how can this break?  One of the assumptions must be violated.  Two\npossibilities:\n\n1) [2] effectively says that y.s is invariant across all y belong to a given\n   time zone.  This isn\'t true if, for political reasons or continental drift,\n   a region decides to change its base offset from UTC.\n\n2) There may be versions of "double daylight" time where the tail end of\n   the analysis gives up a step too early.  I haven\'t thought about that\n   enough to say.\n\nIn any case, it\'s clear that the default fromutc() is strong enough to handle\n"almost all" time zones:  so long as the standard offset is invariant, it\ndoesn\'t matter if daylight time transition points change from year to year, or\nif daylight time is skipped in some years; it doesn\'t matter how large or\nsmall dst() may get within its bounds; and it doesn\'t even matter if some\nperverse time zone returns a negative dst()).  So a breaking case must be\npretty bizarre, and a tzinfo subclass can override fromutc() if it is.\n"""\n',"src/lib/dbhash.py":'raise NotImplementedError("dbhash is not yet implemented in Skulpt")\n',"src/lib/decimal.py":'raise NotImplementedError("decimal is not yet implemented in Skulpt")\n',"src/lib/difflib.py":'raise NotImplementedError("difflib is not yet implemented in Skulpt")\n',"src/lib/dircache.py":'raise NotImplementedError("dircache is not yet implemented in Skulpt")\n',"src/lib/dis.py":'raise NotImplementedError("dis is not yet implemented in Skulpt")\n',"src/lib/distutils/__init__.py":'raise NotImplementedError("distutils is not yet implemented in Skulpt")\n',"src/lib/distutils/command/__init__.py":'raise NotImplementedError("command is not yet implemented in Skulpt")\n',"src/lib/distutils/tests/__init__.py":'raise NotImplementedError("tests is not yet implemented in Skulpt")\n',"src/lib/doctest.py":'raise NotImplementedError("doctest is not yet implemented in Skulpt")\n',"src/lib/document.js":'var $builtinmodule=function(){var a,b={__name__:new Sk.builtin.str("document")};return b.getElementById=new Sk.builtin.func(function(a){var c=document.getElementById(a.v);return c?Sk.misceval.callsimArray(b.Element,[c]):Sk.builtin.none.none$}),b.createElement=new Sk.builtin.func(function(a){var c=document.createElement(a.v);if(c)return Sk.misceval.callsimArray(b.Element,[c])}),b.getElementsByTagName=new Sk.builtin.func(function(a){for(var c=document.getElementsByTagName(a.v),d=[],e=c.length-1;0<=e;e--)d.push(Sk.misceval.callsimArray(b.Element,[c[e]]));return new Sk.builtin.list(d)}),b.getElementsByClassName=new Sk.builtin.func(function(a){for(var c=document.getElementsByClassName(a.v),d=[],e=0;e<c.length;e++)d.push(Sk.misceval.callsimArray(b.Element,[c[e]]));return new Sk.builtin.list(d)}),b.getElementsByName=new Sk.builtin.func(function(a){for(var c=document.getElementsByName(a.v),d=[],e=0;e<c.length;e++)d.push(Sk.misceval.callsimArray(b.Element,[c[e]]));return new Sk.builtin.list(d)}),b.currentDiv=new Sk.builtin.func(function(){if(void 0!==Sk.divid)return new Sk.builtin.str(Sk.divid);throw new Sk.builtin.AttributeError("There is no value set for divid")}),a=function(a,b){b.__init__=new Sk.builtin.func(function(a,b){a.v=b,a.innerHTML=b.innerHTML,a.innerText=b.innerText,void 0!==b.value&&(a.value=b.value,Sk.abstr.objectSetItem(a.$d,new Sk.builtin.str("value"),new Sk.builtin.str(a.value))),void 0!==b.checked&&(a.checked=b.checked,Sk.abstr.objectSetItem(a.$d,new Sk.builtin.str("checked"),new Sk.builtin.str(a.checked))),Sk.abstr.objectSetItem(a.$d,new Sk.builtin.str("innerHTML"),new Sk.builtin.str(a.innerHTML)),Sk.abstr.objectSetItem(a.$d,new Sk.builtin.str("innerText"),new Sk.builtin.str(a.innerText))}),b.tp$getattr=Sk.generic.getAttr,b.__setattr__=new Sk.builtin.func(function(a,b,c){b=Sk.ffi.remapToJs(b),"innerHTML"===b&&(a.innerHTML=c,a.v.innerHTML=c.v,Sk.abstr.objectSetItem(a.$d,new Sk.builtin.str("innerHTML"),c)),"innerText"===b&&(a.innerText=c,a.v.innerText=c.v,Sk.abstr.objectSetItem(a.$d,new Sk.builtin.str("innerText"),c))}),b.appendChild=new Sk.builtin.func(function(a,b){a.v.appendChild(b.v)}),b.removeChild=new Sk.builtin.func(function(a,b){a.v.removeChild(b.v)}),b.getCSS=new Sk.builtin.func(function(a,b){return new Sk.builtin.str(a.v.style[b.v])}),b.setCSS=new Sk.builtin.func(function(a,b,c){a.v.style[b.v]=c.v}),b.getAttribute=new Sk.builtin.func(function(a,b){var c=a.v.getAttribute(b.v);return c?new Sk.builtin.str(c):Sk.builtin.none.none$}),b.setAttribute=new Sk.builtin.func(function(a,b,c){a.v.setAttribute(b.v,c.v)}),b.getProperty=new Sk.builtin.func(function(a,b){var c=a.v[b.v];return c?new Sk.builtin.str(c):Sk.builtin.none.none$}),b.__str__=new Sk.builtin.func(function(a){return console.log(a.v.tagName),new Sk.builtin.str(a.v.tagName)}),b.__repr__=new Sk.builtin.func(function(){return new Sk.builtin.str("[DOM Element]")})},b.Element=Sk.misceval.buildClass(b,a,"Element",[]),b};',"src/lib/dumbdbm.py":'raise NotImplementedError("dumbdbm is not yet implemented in Skulpt")\n',"src/lib/dummy_thread.py":'raise NotImplementedError("dummy_thread is not yet implemented in Skulpt")\n',"src/lib/dummy_threading.py":'raise NotImplementedError("dummy_threading is not yet implemented in Skulpt")\n',"src/lib/email/__init__.py":'raise NotImplementedError("email is not yet implemented in Skulpt")\n',"src/lib/email/mime/__init__.py":'raise NotImplementedError("mime is not yet implemented in Skulpt")\n',"src/lib/email/test/data/__init__.py":'raise NotImplementedError("data is not yet implemented in Skulpt")\n',"src/lib/encodings/__init__.py":'raise NotImplementedError("encodings is not yet implemented in Skulpt")\n',"src/lib/filecmp.py":'raise NotImplementedError("filecmp is not yet implemented in Skulpt")\n',"src/lib/fileinput.py":'raise NotImplementedError("fileinput is not yet implemented in Skulpt")\n',"src/lib/fnmatch.py":'raise NotImplementedError("fnmatch is not yet implemented in Skulpt")\n',"src/lib/formatter.py":'raise NotImplementedError("formatter is not yet implemented in Skulpt")\n',"src/lib/fpformat.py":'raise NotImplementedError("fpformat is not yet implemented in Skulpt")\n',"src/lib/fractions.py":'raise NotImplementedError("fractions is not yet implemented in Skulpt")\n',"src/lib/ftplib.py":'raise NotImplementedError("ftplib is not yet implemented in Skulpt")\n',"src/lib/functools.py":'raise NotImplementedError("functools is not yet implemented in Skulpt")\n',"src/lib/genericpath.py":'raise NotImplementedError("genericpath is not yet implemented in Skulpt")\n',"src/lib/getopt.py":'raise NotImplementedError("getopt is not yet implemented in Skulpt")\n',"src/lib/getpass.py":'raise NotImplementedError("getpass is not yet implemented in Skulpt")\n',"src/lib/gettext.py":'raise NotImplementedError("gettext is not yet implemented in Skulpt")\n',"src/lib/glob.py":'raise NotImplementedError("glob is not yet implemented in Skulpt")\n',"src/lib/gzip.py":'raise NotImplementedError("gzip is not yet implemented in Skulpt")\n',"src/lib/hashlib.py":'raise NotImplementedError("hashlib is not yet implemented in Skulpt")\n',"src/lib/heapq.py":'raise NotImplementedError("heapq is not yet implemented in Skulpt")\n',"src/lib/hmac.py":'raise NotImplementedError("hmac is not yet implemented in Skulpt")\n',"src/lib/hotshot/__init__.py":'raise NotImplementedError("hotshot is not yet implemented in Skulpt")\n',"src/lib/htmlentitydefs.py":'raise NotImplementedError("htmlentitydefs is not yet implemented in Skulpt")\n',"src/lib/htmllib.py":'raise NotImplementedError("htmllib is not yet implemented in Skulpt")\n',"src/lib/httplib.py":'raise NotImplementedError("httplib is not yet implemented in Skulpt")\n',"src/lib/idlelib/Icons/__init__.py":'raise NotImplementedError("Icons is not yet implemented in Skulpt")\n',"src/lib/idlelib/__init__.py":'raise NotImplementedError("idlelib is not yet implemented in Skulpt")\n',"src/lib/ihooks.py":'raise NotImplementedError("ihooks is not yet implemented in Skulpt")\n',"src/lib/image.js":'var ImageMod,$builtinmodule;ImageMod||(ImageMod={},ImageMod.canvasLib=[]),$builtinmodule=function(){var a,b,c,d,e,f,g,h={__name__:new Sk.builtin.str("image")};return h.Image=Sk.misceval.buildClass(h,function(a,b){var c=Math.floor;e=function(a){a.width=a.image.width,a.height=a.image.height,a.delay=0,a.updateCount=0,a.updateInterval=1,a.lastx=0,a.lasty=0,a.canvas=document.createElement("canvas"),a.canvas.height=a.height,a.canvas.width=a.width,a.ctx=a.canvas.getContext("2d"),a.ctx.drawImage(a.image,0,0),a.imagedata=a.ctx.getImageData(0,0,a.width,a.height)},b.__init__=new Sk.builtin.func(function(a,b){var c;Sk.builtin.pyCheckArgsLen("__init__",arguments.length,2,2);try{a.image=document.getElementById(Sk.ffi.remapToJs(b)),e(a)}catch(b){a.image=null}if(null==a.image)return c=new Sk.misceval.Suspension,c.resume=function(){if(c.data.error)throw new Sk.builtin.IOError(c.data.error.message)},c.data={type:"Sk.promise",promise:new Promise(function(c,d){var f=new Image;f.crossOrigin="",f.onerror=function(){d(Error("Failed to load URL: "+f.src))},f.onload=function(){a.image=this,e(a),c()},f.src=g(b)})},c}),g=function(a){var b,c,d="function"==typeof Sk.imageProxy?Sk.imageProxy:function(a){return b=document.createElement("a"),b.href=c,window.location.host===b.host?a:Sk.imageProxy+"/"+a};return c=Sk.ffi.remapToJs(a),c=d(c),c},f=function(a,b,c){if(0>b||0>c||b>=a.width||c>=a.height)throw new Sk.builtin.ValueError("Pixel index out of range.")};var i=function(a,b,c){var d;Sk.builtin.pyCheckArgsLen("setdelay",arguments.length,2,3),a.delay=Sk.ffi.remapToJs(b),d=Sk.builtin.asnum$(c),a.updateInterval=d?d:1};b.set_delay=new Sk.builtin.func(i),b.setDelay=new Sk.builtin.func(i);var j=function(a){var b,d=[];for(Sk.builtin.pyCheckArgsLen("getpixels",arguments.length,1,1),b=0;b<a.image.height*a.image.width;b++)d[b]=Sk.misceval.callsimArray(a.getPixel,[a,b%a.image.width,c(b/a.image.width)]);return new Sk.builtin.tuple(d)};b.get_pixels=new Sk.builtin.func(j),b.getPixels=new Sk.builtin.func(j),b.getData=new Sk.builtin.func(function(a){var b,d,e,g,h,j,k,l=[];for(Sk.builtin.pyCheckArgsLen("getData",arguments.length,1,1),b=0;b<a.image.height*a.image.width;b++)d=b%a.image.width,e=c(b/a.image.width),f(a,d,e),k=4*e*a.width+4*d,g=a.imagedata.data[k],h=a.imagedata.data[k+1],j=a.imagedata.data[k+2],l[b]=new Sk.builtin.tuple([new Sk.builtin.int_(g),new Sk.builtin.int_(h),new Sk.builtin.int_(j)]);return new Sk.builtin.list(l)});var k=function(a,b,c){var d,e,g,i;return Sk.builtin.pyCheckArgsLen("getpixel",arguments.length,3,3),b=Sk.builtin.asnum$(b),c=Sk.builtin.asnum$(c),f(a,b,c),i=4*c*a.width+4*b,d=a.imagedata.data[i],g=a.imagedata.data[i+1],e=a.imagedata.data[i+2],Sk.misceval.callsimArray(h.Pixel,[d,g,e,b,c])};b.get_pixel=new Sk.builtin.func(k),b.getPixel=new Sk.builtin.func(k),d=function(a,b,c){var d=new Sk.misceval.Suspension;return d.resume=function(){return Sk.builtin.none.none$},d.data={type:"Sk.promise",promise:new Promise(function(d){var e=Math.max,f=Math.abs,g=Math.min;a.updateCount++,0==a.updateCount%a.updateInterval?(a.lastx+a.updateInterval>=a.width?a.lastCtx.putImageData(a.imagedata,a.lastUlx,a.lastUly,0,a.lasty,a.width,2):a.lasty+a.updateInterval>=a.height?a.lastCtx.putImageData(a.imagedata,a.lastUlx,a.lastUly,a.lastx,0,2,a.height):a.lastCtx.putImageData(a.imagedata,a.lastUlx,a.lastUly,g(b,a.lastx),g(c,a.lasty),e(f(b-a.lastx),1),e(f(c-a.lasty),1)),a.lastx=b,a.lasty=c,0<a.delay?window.setTimeout(d,a.delay):d()):d()})},d};var l=function(a,b,c,e){var g;return Sk.builtin.pyCheckArgsLen("setpixel",arguments.length,4,4),b=Sk.builtin.asnum$(b),c=Sk.builtin.asnum$(c),f(a,b,c),g=4*c*a.width+4*b,a.imagedata.data[g]=Sk.builtin.asnum$(Sk.misceval.callsimArray(e.getRed,[e])),a.imagedata.data[g+1]=Sk.builtin.asnum$(Sk.misceval.callsimArray(e.getGreen,[e])),a.imagedata.data[g+2]=Sk.builtin.asnum$(Sk.misceval.callsimArray(e.getBlue,[e])),a.imagedata.data[g+3]=255,d(a,b,c)};b.set_pixel=new Sk.builtin.func(l),b.setPixel=new Sk.builtin.func(l);var m=function(a,b,e){var g,h,i;return Sk.builtin.pyCheckArgsLen("setpixelat",arguments.length,3,3),b=Sk.builtin.asnum$(b),g=b%a.image.width,h=c(b/a.image.width),f(a,g,h),i=4*h*a.width+4*g,a.imagedata.data[i]=Sk.builtin.asnum$(Sk.misceval.callsimArray(e.getRed,[e])),a.imagedata.data[i+1]=Sk.builtin.asnum$(Sk.misceval.callsimArray(e.getGreen,[e])),a.imagedata.data[i+2]=Sk.builtin.asnum$(Sk.misceval.callsimArray(e.getBlue,[e])),a.imagedata.data[i+3]=255,d(a,g,h)};b.set_pixel_at=new Sk.builtin.func(m),b.setPixelAt=new Sk.builtin.func(m);var n=function(a,b){var c,e,g;return Sk.builtin.pyCheckArgsLen("updatepixel",arguments.length,2,2),c=Sk.builtin.asnum$(Sk.misceval.callsimArray(b.getX,[b])),e=Sk.builtin.asnum$(Sk.misceval.callsimArray(b.getY,[b])),f(a,c,e),g=4*e*a.width+4*c,a.imagedata.data[g]=Sk.builtin.asnum$(Sk.misceval.callsimArray(b.getRed,[b])),a.imagedata.data[g+1]=Sk.builtin.asnum$(Sk.misceval.callsimArray(b.getGreen,[b])),a.imagedata.data[g+2]=Sk.builtin.asnum$(Sk.misceval.callsimArray(b.getBlue,[b])),a.imagedata.data[g+3]=255,d(a,c,e)};b.update_pixel=new Sk.builtin.func(n),b.updatePixel=new Sk.builtin.func(n);var o=function(a){return Sk.builtin.pyCheckArgsLen("getheight",arguments.length,1,1),new Sk.builtin.int_(a.height)};b.get_height=new Sk.builtin.func(o),b.getHeight=new Sk.builtin.func(o);var p=function(a){return Sk.builtin.pyCheckArgsLen("getwidth",arguments.length,1,1),new Sk.builtin.int_(a.width)};b.get_width=new Sk.builtin.func(p),b.getWidth=new Sk.builtin.func(p),b.__getattr__=new Sk.builtin.func(function(a,b){return(b=Sk.ffi.remapToJs(b),"height"===b)?Sk.builtin.assk$(a.height):"width"===b?Sk.builtin.assk$(a.width):void 0}),b.__setattr__=new Sk.builtin.func(function(a,b){if(b=Sk.ffi.remapToJs(b),"height"===b||"width"===b)throw new Sk.builtin.Exception("Cannot change height or width they can only be set on creation");else throw new Sk.builtin.Exception("Unknown attribute: "+b)}),b.draw=new Sk.builtin.func(function(a,b,c,d){var e;return Sk.builtin.pyCheckArgsLen("draw",arguments.length,2,4),e=new Sk.misceval.Suspension,e.resume=function(){return Sk.builtin.none.none$},e.data={type:"Sk.promise",promise:new Promise(function(e){var f,g;b=Sk.builtin.asnum$(b),c=Sk.builtin.asnum$(c),d=Sk.builtin.asnum$(d),f=Sk.misceval.callsimArray(b.getWin,[b]),g=f.getContext("2d"),void 0===c&&(c=0,d=0),a.lastUlx=c,a.lastUly=d,a.lastCtx=g,g.putImageData(a.imagedata,c,d),0<a.delay?window.setTimeout(e,a.delay):window.setTimeout(e,200)})},e})},"Image",[]),c=function(a,b){b.__init__=new Sk.builtin.func(function(a,b,c){Sk.builtin.pyCheckArgsLen("__init__",arguments.length,3,3),a.width=Sk.builtin.asnum$(b),a.height=Sk.builtin.asnum$(c),a.canvas=document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.canvas.height=a.height,a.canvas.width=a.width,a.imagedata=a.ctx.getImageData(0,0,a.width,a.height)})},h.EmptyImage=Sk.misceval.buildClass(h,c,"EmptyImage",[h.Image]),b=function(a,b){b.__init__=new Sk.builtin.func(function(a,c,d,e,b,f){Sk.builtin.pyCheckArgsLen("__init__",arguments.length,4,6),a.red=Sk.builtin.asnum$(c),a.green=Sk.builtin.asnum$(d),a.blue=Sk.builtin.asnum$(e),a.x=Sk.builtin.asnum$(b),a.y=Sk.builtin.asnum$(f)});var c=function(a){return Sk.builtin.pyCheckArgsLen("getred",arguments.length,1,1),Sk.builtin.assk$(a.red)};b.get_red=new Sk.builtin.func(c),b.getRed=new Sk.builtin.func(c);var d=function(a){return Sk.builtin.pyCheckArgsLen("getgreen",arguments.length,1,1),Sk.builtin.assk$(a.green)};b.get_green=new Sk.builtin.func(d),b.getGreen=new Sk.builtin.func(d);var e=function(a){return Sk.builtin.pyCheckArgsLen("getblue",arguments.length,1,1),Sk.builtin.assk$(a.blue)};b.get_blue=new Sk.builtin.func(e),b.getBlue=new Sk.builtin.func(e);var f=function(a){return Sk.builtin.pyCheckArgsLen("getx",arguments.length,1,1),Sk.builtin.assk$(a.x)};b.get_x=new Sk.builtin.func(f),b.getX=new Sk.builtin.func(f);var g=function(a){return Sk.builtin.pyCheckArgsLen("gety",arguments.length,1,1),Sk.builtin.assk$(a.y)};b.get_y=new Sk.builtin.func(g),b.getY=new Sk.builtin.func(g);var h=function(a,b){Sk.builtin.pyCheckArgsLen("setred",arguments.length,2,2),a.red=Sk.builtin.asnum$(b)};b.set_red=new Sk.builtin.func(h),b.setRed=new Sk.builtin.func(h);var i=function(a,b){Sk.builtin.pyCheckArgsLen("setgreen",arguments.length,2,2),a.green=Sk.builtin.asnum$(b)};b.set_green=new Sk.builtin.func(i),b.setGreen=new Sk.builtin.func(i);var j=function(a,c){Sk.builtin.pyCheckArgsLen("setblue",arguments.length,2,2),a.blue=Sk.builtin.asnum$(c)};b.set_blue=new Sk.builtin.func(j),b.setBlue=new Sk.builtin.func(j),b.__getattr__=new Sk.builtin.func(function(a,b){return(b=Sk.ffi.remapToJs(b),"red"===b)?Sk.builtin.assk$(a.red):"green"===b?Sk.builtin.assk$(a.green):"blue"===b?Sk.builtin.assk$(a.blue):void 0}),b.__setattr__=new Sk.builtin.func(function(a,b,c){b=Sk.ffi.remapToJs(b),("red"===b||"green"===b||"blue"===b)&&(a[b]=Sk.builtin.asnum$(c))});var k=function(a,b){Sk.builtin.pyCheckArgsLen("setx",arguments.length,2,2),a.x=Sk.builtin.asnum$(b)};b.set_x=new Sk.builtin.func(k),b.setX=new Sk.builtin.func(k);var l=function(a,b){Sk.builtin.pyCheckArgsLen("sety",arguments.length,2,2),a.y=Sk.builtin.asnum$(b)};b.set_y=new Sk.builtin.func(l),b.setY=new Sk.builtin.func(l),b.__getitem__=new Sk.builtin.func(function(a,b){return(b=Sk.builtin.asnum$(b),0===b)?a.red:1==b?a.green:2==b?a.blue:void 0}),b.__str__=new Sk.builtin.func(function(a){return Sk.ffi.remapToPy("["+a.red+","+a.green+","+a.blue+"]")}),b.getColorTuple=new Sk.builtin.func(function(){}),b.setRange=new Sk.builtin.func(function(a,b){a.max=Sk.builtin.asnum$(b)})},h.Pixel=Sk.misceval.buildClass(h,b,"Pixel",[]),a=function(a,b){b.__init__=new Sk.builtin.func(function(a,b,c){var d,e,f;Sk.builtin.pyCheckArgsLen("__init__",arguments.length,1,3),d=ImageMod.canvasLib[Sk.canvas],void 0===d?(e=document.createElement("canvas"),f=document.getElementById(Sk.canvas),a.theScreen=e,f.appendChild(e),ImageMod.canvasLib[Sk.canvas]=e,ImageMod.canvasLib[Sk.canvas]=a.theScreen):(a.theScreen=d,a.theScreen.height=a.theScreen.height),void 0===b?(Sk.availableHeight&&(a.theScreen.height=Sk.availableHeight),Sk.availableWidth&&(a.theScreen.width=Sk.availableWidth)):(a.theScreen.height=c.v,a.theScreen.width=b.v),a.theScreen.style.display="block"}),b.getWin=new Sk.builtin.func(function(a){return a.theScreen}),b.exitonclick=new Sk.builtin.func(function(a){var b=a.theScreen.id;a.theScreen.onclick=function(){document.getElementById(b).style.display="none",document.getElementById(b).onclick=null,delete ImageMod.canvasLib[b]}})},h.ImageWin=Sk.misceval.buildClass(h,a,"ImageWin",[]),h};',"src/lib/imaplib.py":'raise NotImplementedError("imaplib is not yet implemented in Skulpt")\n',"src/lib/imghdr.py":'raise NotImplementedError("imghdr is not yet implemented in Skulpt")\n',"src/lib/imputil.py":'raise NotImplementedError("imputil is not yet implemented in Skulpt")\n',"src/lib/io.py":'raise NotImplementedError("io is not yet implemented in Skulpt")\n',"src/lib/itertools.js":'var $builtinmodule=function(){function combinationsNew(a,b,c){let d,e;[d,e]=Sk.abstr.copyKeywordsToNamedArgs(a.tp$name,["iterable","r"],b,c,[]);const f=Sk.misceval.arrayFromIterable(d);if(e=Sk.misceval.asIndexSized(e,Sk.builtin.OverFlowError),0>e)throw new Sk.builtin.ValueError("r must be non-negative");if(this===a)return new a.constructor(f,e);else{const b=new this.constructor;return a.constructor.call(b,f,e),b}}var a={};return a.accumulate=Sk.abstr.buildIteratorClass("itertools.accumulate",{constructor:function accumulate(a,b,c){this.iter=a,this.func=b,this.total=c,this.tp$iternext=()=>(this.total=Sk.builtin.checkNone(this.total)?this.iter.tp$iternext():this.total,this.tp$iternext=this.constructor.prototype.tp$iternext,this.total)},iternext(){let a=this.iter.tp$iternext();if(void 0!==a)return this.total=Sk.misceval.callsimArray(this.func,[this.total,a]),this.total},slots:{tp$doc:"accumulate(iterable[, func, initial]) --\x3e accumulate object\\n\\nReturn series of accumulated sums (or other binary function results).",tp$new(b,c){Sk.abstr.checkArgsLen("accumulate",b,0,2);let[d,e,f]=Sk.abstr.copyKeywordsToNamedArgs("accumulate",["iterable","func","initial"],b,c,[Sk.builtin.none.none$,Sk.builtin.none.none$]);if(d=Sk.abstr.iter(d),e=Sk.builtin.checkNone(e)?new Sk.builtin.func((c,a)=>Sk.abstr.numberBinOp(c,a,"Add")):e,this===a.accumulate.prototype)return new a.accumulate(d,e,f);else{const b=new this.constructor;return a.accumulate.call(b,d,e,f),b}}}}),a.chain=Sk.abstr.buildIteratorClass("itertools.chain",{constructor:function chain(a){this.iterables=a,this.current_it=null,this.tp$iternext=()=>(this.tp$iternext=this.constructor.prototype.tp$iternext,this.current_it=this.iterables.tp$iternext(),void 0===this.current_it)?void(this.tp$iternext=()=>void 0):(this.current_it=Sk.abstr.iter(this.current_it),this.tp$iternext())},iternext(){for(let a;void 0===a;)if(a=this.current_it.tp$iternext(),void 0===a){if(this.current_it=this.iterables.tp$iternext(),void 0===this.current_it)return void(this.tp$iternext=()=>void 0);this.current_it=Sk.abstr.iter(this.current_it)}else return a},slots:{tp$doc:"chain(*iterables) --\x3e chain object\\n\\nReturn a chain object whose .__next__() method returns elements from the\\nfirst iterable until it is exhausted, then elements from the next\\niterable, until all of the iterables are exhausted.",tp$new(b,c){if(Sk.abstr.checkNoKwargs("chain",c),b=new Sk.builtin.tuple(b.slice(0)).tp$iter(),this===a.chain.prototype)return new a.chain(b);else{const c=new this.constructor;return a.chain.call(c,b),c}}},classmethods:{from_iterable:{$meth(b){const c=Sk.abstr.iter(b);return new a.chain(c)},$flags:{OneArg:!0},$doc:"chain.from_iterable(iterable) --\x3e chain object\\n\\nAlternate chain() constructor taking a single iterable argument\\nthat evaluates lazily.",$textsig:null}}}),a.combinations=Sk.abstr.buildIteratorClass("itertools.combinations",{constructor:function combinations(a,b){this.pool=a,this.r=b,this.indices=Array(b).fill().map((a,b)=>b),this.n=a.length,this.tp$iternext=()=>{if(!(this.r>this.n))return this.tp$iternext=this.constructor.prototype.tp$iternext,new Sk.builtin.tuple(this.pool.slice(0,this.r))}},iternext(){let a,b=!1;for(a=this.r-1;0<=a;a--)if(this.indices[a]!=a+this.n-this.r){b=!0;break}if(!b)return void(this.r=0);this.indices[a]++;for(let b=a+1;b<this.r;b++)this.indices[b]=this.indices[b-1]+1;const c=this.indices.map(a=>this.pool[a]);return new Sk.builtin.tuple(c)},slots:{tp$doc:"combinations(iterable, r) --\x3e combinations object\\n\\nReturn successive r-length combinations of elements in the iterable.\\n\\ncombinations(range(4), 3) --\x3e (0,1,2), (0,1,3), (0,2,3), (1,2,3)",tp$new(b,c){return combinationsNew.call(this,a.combinations.prototype,b,c)}}}),a.combinations_with_replacement=Sk.abstr.buildIteratorClass("itertools.combinations_with_replacement",{constructor:function combinations_with_replacement(a,b){this.pool=a,this.r=b,this.indices=Array(b).fill(0),this.n=a.length,this.tp$iternext=()=>{if(!this.r||this.n){this.tp$iternext=this.constructor.prototype.tp$iternext;const a=this.indices.map(a=>this.pool[a]);return new Sk.builtin.tuple(a)}}},iternext(){let a,b=!1;for(a=this.r-1;0<=a;a--)if(this.indices[a]!=this.n-1){b=!0;break}if(!b)return void(this.r=0);const c=this.indices[a]+1;for(let b=a;b<this.r;b++)this.indices[b]=c;const d=this.indices.map(a=>this.pool[a]);return new Sk.builtin.tuple(d)},slots:{tp$doc:"combinations_with_replacement(iterable, r) --\x3e combinations_with_replacement object\\n\\nReturn successive r-length combinations of elements in the iterable\\nallowing individual elements to have successive repeats.\\ncombinations_with_replacement(\'ABC\', 2) --\x3e AA AB AC BB BC CC",tp$new(b,c){return combinationsNew.call(this,a.combinations_with_replacement.prototype,b,c)}}}),a.compress=Sk.abstr.buildIteratorClass("itertools.compress",{constructor:function compress(a,b){this.data=a,this.selectors=b},iternext(){let a=this.data.tp$iternext(),b=this.selectors.tp$iternext();for(;void 0!==a&&void 0!==b;){if(Sk.misceval.isTrue(b))return a;a=this.data.tp$iternext(),b=this.selectors.tp$iternext()}},slots:{tp$doc:"compress(data, selectors) --\x3e iterator over selected data\\n\\nReturn data elements corresponding to true selector elements.\\nForms a shorter iterator from selected data elements using the\\nselectors to choose the data elements.",tp$new(b,c){let d,e;if([d,e]=Sk.abstr.copyKeywordsToNamedArgs("compress",["data","selectors"],b,c,[]),d=Sk.abstr.iter(d),e=Sk.abstr.iter(e),this===a.count.prototype)return new a.compress(d,e);else{const b=new this.constructor;return a.compress.call(b,d,e),b}}}}),a.count=Sk.abstr.buildIteratorClass("itertools.count",{constructor:function count(a,b){this.start=a,this.step=b},iternext(){const a=this.start;return this.start=Sk.abstr.numberBinOp(this.start,this.step,"Add"),a},slots:{tp$doc:"count(start=0, step=1) --\x3e count object\\n\\nReturn a count object whose .__next__() method returns consecutive values.\\nEquivalent to:\\n\\n    def count(firstval=0, step=1):\\n        x = firstval\\n        while 1:\\n            yield x\\n            x += step\\n",tp$new(b,c){const[d,e]=Sk.abstr.copyKeywordsToNamedArgs("count",["start","step"],b,c,[new Sk.builtin.int_(0),new Sk.builtin.int_(1)]);if(!Sk.builtin.checkNumber(d)&&!Sk.builtin.checkComplex(d))throw new Sk.builtin.TypeError("a number is required");if(!Sk.builtin.checkNumber(e)&&!Sk.builtin.checkComplex(e))throw new Sk.builtin.TypeError("a number is required");if(this===a.count.prototype)return new a.count(d,e);else{const b=new this.constructor;return a.count.call(b,d,e),b}},$r(){const a=Sk.misceval.objectRepr(this.start);let b=Sk.misceval.objectRepr(this.step);return b="1"===b?"":", "+b,new Sk.builtin.str(Sk.abstr.typeName(this)+"("+a+b+")")}}}),a.cycle=Sk.abstr.buildIteratorClass("itertools.cycle",{constructor:function cycle(a){this.iter=a,this.saved=[],this.consumed=!1,this.i=0,this.length},iternext(){let a;if(!this.consumed){if(a=this.iter.tp$iternext(),void 0!==a)return this.saved.push(a),a;if(this.consumed=!0,this.length=this.saved.length,!this.length)return}return a=this.saved[this.i],this.i=(this.i+1)%this.length,a},slots:{tp$doc:"cycle(iterable) --\x3e cycle object\\n\\nReturn elements from the iterable until it is exhausted.\\nThen repeat the sequence indefinitely.",tp$new(b,c){Sk.abstr.checkOneArg("cycle",b,c);const d=Sk.abstr.iter(b[0]);if(this===a.cycle.prototype)return new a.cycle(d);else{const b=new this.constructor;return a.cycle.call(b,d),b}}}}),a.dropwhile=Sk.abstr.buildIteratorClass("itertools.dropwhile",{constructor:function dropwhile(a,b){this.predicate=a,this.iter=b,this.passed},iternext(){let a=this.iter.tp$iternext();for(;void 0===this.passed&&void 0!==a;){const b=Sk.misceval.callsimArray(this.predicate,[a]);if(!Sk.misceval.isTrue(b))return this.passed=!0,a;a=this.iter.tp$iternext()}return a},slots:{tp$doc:"dropwhile(predicate, iterable) --\x3e dropwhile object\\n\\nDrop items from the iterable while predicate(item) is true.\\nAfterwards, return every element until the iterable is exhausted.",tp$new(b,c){Sk.abstr.checkNoKwargs("dropwhile",c),Sk.abstr.checkArgsLen("dropwhile",b,2,2);const d=b[0],e=Sk.abstr.iter(b[1]);if(this===a.dropwhile.prototype)return new a.dropwhile(d,e);else{const b=new this.constructor;return a.dropwhile.call(b,d,e),b}}}}),a.filterfalse=Sk.abstr.buildIteratorClass("itertools.filterfalse",{constructor:function filterfalse(a,b){this.predicate=a,this.iter=b},iternext(){let a=this.iter.tp$iternext();if(void 0!==a){for(let b=Sk.misceval.callsimArray(this.predicate,[a]);Sk.misceval.isTrue(b);){if(a=this.iter.tp$iternext(),void 0===a)return;b=Sk.misceval.callsimArray(this.predicate,[a])}return a}},slots:{tp$doc:"filterfalse(function or None, sequence) --\x3e filterfalse object\\n\\nReturn those items of sequence for which function(item) is false.\\nIf function is None, return the items that are false.",tp$new(b,c){Sk.abstr.checkNoKwargs("filterfalse",c),Sk.abstr.checkArgsLen("filterfalse",b,2,2);const d=Sk.builtin.checkNone(b[0])?Sk.builtin.bool:b[0],e=Sk.abstr.iter(b[1]);if(this===a.filterfalse.prototype)return new a.filterfalse(d,e);else{const b=new this.constructor;return a.filterfalse.call(b,d,e),b}}}}),a._grouper=Sk.abstr.buildIteratorClass("itertools._grouper",{constructor:function _grouper(a){this.groupby=a,this.tgtkey=a.tgtkey,this.id=a.id},iternext(){const a=Sk.misceval.richCompareBool(this.groupby.currkey,this.tgtkey,"Eq");if(this.groupby.id===this.id&&a){let a=this.groupby.currval;return this.groupby.currval=this.groupby.iter.tp$iternext(),void 0!==this.groupby.currval&&(this.groupby.currkey=Sk.misceval.callsimArray(this.groupby.keyf,[this.groupby.currval])),a}}}),a.groupby=Sk.abstr.buildIteratorClass("itertools.groupby",{constructor:function groupby(a,b){this.iter=a,this.keyf=b,this.currval,this.currkey=this.tgtkey=new Sk.builtin.object,this.id},iternext(){this.id={};for(let a=Sk.misceval.richCompareBool(this.currkey,this.tgtkey,"Eq");a;){if(this.currval=this.iter.tp$iternext(),void 0===this.currval)return;this.currkey=Sk.misceval.callsimArray(this.keyf,[this.currval]),a=Sk.misceval.richCompareBool(this.currkey,this.tgtkey,"Eq")}this.tgtkey=this.currkey;const b=new a._grouper(this);return new Sk.builtin.tuple([this.currkey,b])},slots:{tp$doc:"groupby(iterable, key=None) -> make an iterator that returns consecutive\\nkeys and groups from the iterable.  If the key function is not specified or\\nis None, the element itself is used for grouping.\\n",tp$new(b,c){let d,e;if([d,e]=Sk.abstr.copyKeywordsToNamedArgs("groupby",["iterable","key"],b,c,[Sk.builtin.none.none$]),d=Sk.abstr.iter(d),e=Sk.builtin.checkNone(e)?new Sk.builtin.func(a=>a):e,this===a.groupby.prototype)return new a.groupby(d,e);else{const b=new this.constructor;return a.groupby.call(b,d,e),b}}}}),a.islice=Sk.abstr.buildIteratorClass("itertools.islice",{constructor:function islice(a,b,c,d){this.iter=a,this.previt=b,this.stop=c,this.step=d,this.tp$iternext=()=>{if(this.tp$iternext=this.constructor.prototype.tp$iternext,this.previt>=this.stop){for(let a=0;a<this.stop;a++)this.iter.tp$iternext();return}for(let a=0;a<this.previt;a++)this.iter.tp$iternext();return this.iter.tp$iternext()}},iternext(){if(this.previt+this.step>=this.stop){for(let a=this.previt+1;a<this.stop;a++)this.previt+=this.step,this.iter.tp$iternext();return}for(let a=this.previt+1;a<this.previt+this.step;a++)this.iter.tp$iternext();return this.previt+=this.step,this.iter.tp$iternext()},slots:{tp$doc:"islice(iterable, stop) --\x3e islice object\\nislice(iterable, start, stop[, step]) --\x3e islice object\\n\\nReturn an iterator whose next() method returns selected values from an\\niterable.  If start is specified, will skip all preceding elements;\\notherwise, start defaults to zero.  Step defaults to one.  If\\nspecified as another value, step determines how many values are \\nskipped between successive calls.  Works like a slice() on a list\\nbut returns an iterator.",tp$new(b,c){var d=Number.MAX_SAFE_INTEGER;Sk.abstr.checkNoKwargs("islice",c),Sk.abstr.checkArgsLen("islice",b,2,4);const e=Sk.abstr.iter(b[0]);let f=b[1],g=b[2],h=b[3];if(void 0===g?(g=f,f=Sk.builtin.none.none$,h=Sk.builtin.none.none$):void 0===h&&(h=Sk.builtin.none.none$),!(Sk.builtin.checkNone(g)||Sk.misceval.isIndex(g)))throw new Sk.builtin.ValueError("Stop for islice() must be None or an integer: 0 <= x <= sys.maxsize.");else if(g=Sk.builtin.checkNone(g)?d:Sk.misceval.asIndexSized(g),0>g||g>d)throw new Sk.builtin.ValueError("Stop for islice() must be None or an integer: 0 <= x <= sys.maxsize.");if(!(Sk.builtin.checkNone(f)||Sk.misceval.isIndex(f)))throw new Sk.builtin.ValueError("Indices for islice() must be None or an integer: 0 <= x <= sys.maxsize.");else if(f=Sk.builtin.checkNone(f)?0:Sk.misceval.asIndexSized(f),0>f||f>d)throw new Sk.builtin.ValueError("Indices for islice() must be None or an integer: 0 <= x <= sys.maxsize.");if(!(Sk.builtin.checkNone(h)||Sk.misceval.isIndex(h)))throw new Sk.builtin.ValueError("Step for islice() must be a positive integer or None");else if(h=Sk.builtin.checkNone(h)?1:Sk.misceval.asIndexSized(h),0>=h||h>d)throw new Sk.builtin.ValueError("Step for islice() must be a positive integer or None.");if(this===a.islice.prototype)return new a.islice(e,f,g,h);else{const b=new this.constructor;return a.islice.call(b,e,f,g,h),b}}}}),a.permutations=Sk.abstr.buildIteratorClass("itertools.permutations",{constructor:function permutations(a,b){this.pool=a,this.r=b;const c=a.length;this.indices=Array(c).fill().map((a,b)=>b),this.cycles=Array(b).fill().map((a,b)=>c-b),this.n=c,this.tp$iternext=()=>{if(!(this.r>this.n))return this.tp$iternext=this.constructor.prototype.tp$iternext,new Sk.builtin.tuple(this.pool.slice(0,this.r))}},iternext(){for(let a=this.r-1;0<=a;a--)if(this.cycles[a]--,0==this.cycles[a])this.indices.push(this.indices.splice(a,1)[0]),this.cycles[a]=this.n-a;else{j=this.cycles[a],[this.indices[a],this.indices[this.n-j]]=[this.indices[this.n-j],this.indices[a]];const b=this.indices.map(a=>this.pool[a]).slice(0,this.r);return new Sk.builtin.tuple(b)}this.r=0},slots:{tp$doc:"permutations(iterable[, r]) --\x3e permutations object\\n\\nReturn successive r-length permutations of elements in the iterable.\\n\\npermutations(range(3), 2) --\x3e (0,1), (0,2), (1,0), (1,2), (2,0), (2,1)",tp$new(b,c){let d,e;[d,e]=Sk.abstr.copyKeywordsToNamedArgs("permutations",["iterable","r"],b,c,[Sk.builtin.none.none$]);const f=Sk.misceval.arrayFromIterable(d);if(e=Sk.builtin.checkNone(e)?f.length:Sk.misceval.asIndexSized(e,Sk.builtin.OverFlowError),0>e)throw new Sk.builtin.ValueError("r must be non-negative");if(this===a.permutations.prototype)return new a.permutations(f,e);else{const b=new this.constructor;return a.permutations.call(b,f,e),b}}}}),a.product=Sk.abstr.buildIteratorClass("itertools.product",{constructor:function product(a){this.pools=a,this.n=a.length,this.indices=Array(a.length).fill(0),this.pool_sizes=a.map(a=>a.length),this.tp$iternext=()=>{this.tp$iternext=this.constructor.prototype.tp$iternext;const a=this.indices.map((a,b)=>this.pools[b][this.indices[b]]);return a.some(a=>void 0===a)?void(this.n=0):new Sk.builtin.tuple(a)}},iternext(){for(let a=this.n-1;0<=a&&a<this.n;)this.indices[a]++,this.indices[a]>=this.pool_sizes[a]?(this.indices[a]=-1,a--):a++;if(!this.n||this.indices.every(a=>-1===a))return void(this.n=0);else{const a=this.indices.map((a,b)=>this.pools[b][this.indices[b]]);return new Sk.builtin.tuple(a)}},slots:{tp$doc:"product(*iterables, repeat=1) --\x3e product object\\n\\nCartesian product of input iterables.  Equivalent to nested for-loops.\\n\\nFor example, product(A, B) returns the same as:  ((x,y) for x in A for y in B).\\nThe leftmost iterators are in the outermost for-loop, so the output tuples\\ncycle in a manner similar to an odometer (with the rightmost element changing\\non every iteration).\\n\\nTo compute the product of an iterable with itself, specify the number\\nof repetitions with the optional repeat keyword argument. For example,\\nproduct(A, repeat=4) means the same as product(A, A, A, A).\\n\\nproduct(\'ab\', range(3)) --\x3e (\'a\',0) (\'a\',1) (\'a\',2) (\'b\',0) (\'b\',1) (\'b\',2)\\nproduct((0,1), (0,1), (0,1)) --\x3e (0,0,0) (0,0,1) (0,1,0) (0,1,1) (1,0,0) ...",tp$new(b,c){let[d]=Sk.abstr.copyKeywordsToNamedArgs("product",["repeat"],[],c,[new Sk.builtin.int_(1)]);if(d=Sk.misceval.asIndexSized(d,Sk.builtin.OverFlowError),0>d)throw new Sk.builtin.ValueError("repeat argument cannot be negative");const e=[];for(let a=0;a<b.length;a++)e.push(Sk.misceval.arrayFromIterable(b[a]));const f=[].concat(...Array(d).fill(e));if(this===a.product.prototype)return new a.product(f);else{const b=new this.constructor;return a.product.call(b,f),b}}}}),a.repeat=Sk.abstr.buildIteratorClass("itertools.repeat",{constructor:function repeat(a,b){this.object=a,this.times=b,void 0===b&&(this.tp$iternext=()=>this.object)},iternext(){return 0<this.times--?this.object:void 0},slots:{tp$doc:"repeat(object [,times]) -> create an iterator which returns the object\\nfor the specified number of times.  If not specified, returns the object\\nendlessly.",tp$new(b,c){let d,e;if([d,e]=Sk.abstr.copyKeywordsToNamedArgs("repeat",["object","times"],b,c,[null]),e=null===e?void 0:Sk.misceval.asIndexSized(e,Sk.builtin.OverFlowError),this===a.repeat.prototype)return new a.repeat(d,e);else{const b=new this.constructor;return a.repeat.call(b,d,e),b}},$r(){return object_repr=Sk.misceval.objectRepr(this.object),times_repr=void 0===this.times?"":", "+(0<=this.times?this.times:0),new Sk.builtin.str(Sk.abstr.typeName(this)+"("+object_repr+times_repr+")")}},methods:{__lenght_hint__:{$meth(){if(void 0===this.times)throw new Sk.builtin.TypeError("len() of unsized object");return new Sk.builtin.int_(this.times)},$flags:{NoArgs:!0},$textsig:null}}}),a.starmap=Sk.abstr.buildIteratorClass("itertools.starmap",{constructor:function starmap(a,b){this.func=a,this.iter=b},iternext(){const a=this.iter.tp$iternext();if(void 0===a)return;const b=Sk.misceval.arrayFromIterable(a),c=Sk.misceval.callsimArray(this.func,b);return c},slots:{tp$new(b,c){let d,e;if([d,e]=Sk.abstr.copyKeywordsToNamedArgs("starmap",["func","iterable"],b,c,[]),e=Sk.abstr.iter(e),d=Sk.builtin.checkNone(d)?Sk.builtin.bool:d,this===a.starmap.prototype)return new a.starmap(d,e);else{const b=new this.constructor;return a.starmap.call(b,d,e),b}}}}),a.takewhile=Sk.abstr.buildIteratorClass("itertools.takewhile",{constructor:function takewhile(a,b){this.predicate=a,this.iter=b},iternext(){const a=this.iter.tp$iternext();if(void 0!==a){const b=Sk.misceval.callsimArray(this.predicate,[a]);if(Sk.misceval.isTrue(b))return a;this.tp$iternext=()=>void 0}},slots:{tp$doc:"takewhile(predicate, iterable) --\x3e takewhile object\\n\\nReturn successive entries from an iterable as long as the \\npredicate evaluates to true for each entry.",tp$new(b,c){Sk.abstr.checkNoKwargs("takewhile",c),Sk.abstr.checkArgsLen("takewhile",b,2,2);const d=b[0],e=Sk.abstr.iter(b[1]);if(this===a.takewhile.prototype)return new a.takewhile(d,e);else{const b=new this.constructor;return a.takewhile.call(b,d,e),b}}}}),a.tee=new Sk.builtin.func(function(){throw new Sk.builtin.NotImplementedError("tee is not yet implemented in Skulpt")}),a.zip_longest=Sk.abstr.buildIteratorClass("itertools.zip_longest",{constructor:function zip_longest(a,b){this.iters=a,this.fillvalue=b,this.active=this.iters.length},iternext(){if(!this.active)return;let b;const c=[];for(let d=0;d<this.iters.length;d++){if(b=this.iters[d].tp$iternext(),void 0===b){if(this.active--,!this.active)return;this.iters[d]=new a.repeat(this.fillvalue),b=this.fillvalue}c.push(b)}return new Sk.builtin.tuple(c)},slots:{tp$doc:"zip_longest(iter1 [,iter2 [...]], [fillvalue=None]) --\x3e zip_longest object\\n\\nReturn a zip_longest object whose .__next__() method returns a tuple where\\nthe i-th element comes from the i-th iterable argument.  The .__next__()\\nmethod continues until the longest iterable in the argument sequence\\nis exhausted and then it raises StopIteration.  When the shorter iterables\\nare exhausted, the fillvalue is substituted in their place.  The fillvalue\\ndefaults to None or can be specified by a keyword argument.\\n",tp$new(b,c){const[d]=Sk.abstr.copyKeywordsToNamedArgs("zip_longest",["fillvalue"],[],c,[Sk.builtin.none.none$]),e=[];for(let a=0;a<b.length;a++)e.push(Sk.abstr.iter(b[a]));if(this===a.zip_longest.prototype)return new a.zip_longest(e,d);else{const b=new this.constructor;return a.zip_longest.call(b,e,d),b}}}}),a.__doc__=new Sk.builtin.str("An implementation of the python itertools module in Skulpt"),a.__package__=new Sk.builtin.str(""),a};',"src/lib/json/__init__.py":'raise NotImplementedError("json is not yet implemented in Skulpt")\n',"src/lib/json/tests/__init__.py":'raise NotImplementedError("tests is not yet implemented in Skulpt")\n',"src/lib/keyword.py":"\n__all__ = [\"iskeyword\", \"kwlist\"]\n\nkwlist = [\n#--start keywords--\n        'and',\n        'as',\n        'assert',\n        'break',\n        'class',\n        'continue',\n        'def',\n        'del',\n        'elif',\n        'else',\n        'except',\n        'exec',\n        'finally',\n        'for',\n        'from',\n        'global',\n        'if',\n        'import',\n        'in',\n        'is',\n        'lambda',\n        'not',\n        'or',\n        'pass',\n        'print',\n        'raise',\n        'return',\n        'try',\n        'while',\n        'with',\n        'yield',\n#--end keywords--\n        ]\n\niskeyword = frozenset(kwlist).__contains__\n\n","src/lib/lib-dynload/__init__.py":'raise NotImplementedError("lib-dynload is not yet implemented in Skulpt")\n',"src/lib/lib-tk/__init__.py":'raise NotImplementedError("lib-tk is not yet implemented in Skulpt")\n',"src/lib/lib2to3/__init__.py":'raise NotImplementedError("lib2to3 is not yet implemented in Skulpt")\n',"src/lib/lib2to3/fixes/__init__.py":'raise NotImplementedError("fixes is not yet implemented in Skulpt")\n',"src/lib/lib2to3/pgen2/__init__.py":'raise NotImplementedError("pgen2 is not yet implemented in Skulpt")\n',"src/lib/lib2to3/tests/__init__.py":'raise NotImplementedError("tests is not yet implemented in Skulpt")\n',"src/lib/linecache.py":'raise NotImplementedError("linecache is not yet implemented in Skulpt")\n',"src/lib/locale.py":'raise NotImplementedError("locale is not yet implemented in Skulpt")\n',"src/lib/logging/__init__.py":'raise NotImplementedError("logging is not yet implemented in Skulpt")\n',"src/lib/macpath.py":'raise NotImplementedError("macpath is not yet implemented in Skulpt")\n',"src/lib/macurl2path.py":'raise NotImplementedError("macurl2path is not yet implemented in Skulpt")\n',"src/lib/mailbox.py":'raise NotImplementedError("mailbox is not yet implemented in Skulpt")\n',"src/lib/mailcap.py":'raise NotImplementedError("mailcap is not yet implemented in Skulpt")\n',"src/lib/markupbase.py":'raise NotImplementedError("markupbase is not yet implemented in Skulpt")\n',"src/lib/math.js":'const $builtinmodule=function(){var a=Math.PI,b=Math.sqrt,c=Number.MAX_SAFE_INTEGER,d=Math.E,e=Math.log,f=Math.exp,g=Math.pow,h=Math.log2,i=Number.isFinite,j=Math.floor,k=Math.abs;const l={pi:new Sk.builtin.float_(a),e:new Sk.builtin.float_(d),tau:new Sk.builtin.float_(2*a),nan:new Sk.builtin.float_(NaN),inf:new Sk.builtin.float_(1/0)},n=function(a){return a=a?0>a?-1:1:0>1/a?-1:1,a},o=18;return Sk.abstr.setUpModuleMethods("math",l,{acos:{$meth:function acos(a){var b=Math.acos;return Sk.builtin.pyCheckType("rad","number",Sk.builtin.checkNumber(a)),new Sk.builtin.float_(b(Sk.builtin.asnum$(a)))},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the arc cosine (measured in radians) of x."},acosh:{$meth:function acosh(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a)),a=Sk.builtin.asnum$(a);const c=a+b(a*a-1);return new Sk.builtin.float_(e(c))},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the inverse hyperbolic cosine of x."},asin:{$meth:function asin(a){var b=Math.asin;return Sk.builtin.pyCheckType("rad","number",Sk.builtin.checkNumber(a)),new Sk.builtin.float_(b(Sk.builtin.asnum$(a)))},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the arc sine (measured in radians) of x."},asinh:{$meth:function asinh(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a)),a=Sk.builtin.asnum$(a);const c=a+b(a*a+1);return new Sk.builtin.float_(e(c))},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the inverse hyperbolic sine of x."},atan:{$meth:function atan(a){var b=Math.atan;return Sk.builtin.pyCheckType("rad","number",Sk.builtin.checkNumber(a)),new Sk.builtin.float_(b(Sk.builtin.asnum$(a)))},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the arc tangent (measured in radians) of x."},atan2:{$meth:function atan2(a,b){var c=Math.atan2;return Sk.builtin.pyCheckType("y","number",Sk.builtin.checkNumber(a)),Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(b)),new Sk.builtin.float_(c(Sk.builtin.asnum$(a),Sk.builtin.asnum$(b)))},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, y, x, /)",$doc:"Return the arc tangent (measured in radians) of y/x.\\n\\nUnlike atan(y/x), the signs of both x and y are considered."},atanh:{$meth:function atanh(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a)),a=Sk.builtin.asnum$(a);const b=(1+a)/(1-a);return new Sk.builtin.float_(e(b)/2)},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the inverse hyperbolic tangent of x."},ceil:{$meth:function ceil(a){var b=Math.ceil;Sk.builtin.pyCheckType("","real number",Sk.builtin.checkNumber(a));const c=Sk.builtin.asnum$(a);return Sk.__future__.ceil_floor_int?new Sk.builtin.int_(b(c)):new Sk.builtin.float_(b(c))},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the ceiling of x as an Integral.\\n\\nThis is the smallest integer >= x."},copysign:{$meth:function copysign(a,b){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a)),Sk.builtin.pyCheckType("y","number",Sk.builtin.checkNumber(b));const c=Sk.builtin.asnum$(b),d=Sk.builtin.asnum$(a),e=n(d),f=n(c);return new Sk.builtin.float_(d*(e*f))},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, x, y, /)",$doc:"Return a float with the magnitude (absolute value) of x but the sign of y.\\n\\nOn platforms that support signed zeros, copysign(1.0, -0.0)\\nreturns -1.0.\\n"},cos:{$meth:function cos(a){var b=Math.cos;return Sk.builtin.pyCheckType("rad","number",Sk.builtin.checkNumber(a)),new Sk.builtin.float_(b(Sk.builtin.asnum$(a)))},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the cosine of x (measured in radians)."},cosh:{$meth:function cosh(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a)),a=Sk.builtin.asnum$(a);const b=g(d,a);return new Sk.builtin.float_((b+1/b)/2)},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the hyperbolic cosine of x."},degrees:{$meth:function degrees(b){Sk.builtin.pyCheckType("rad","number",Sk.builtin.checkNumber(b));const c=180/a*Sk.builtin.asnum$(b);return new Sk.builtin.float_(c)},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Convert angle x from radians to degrees."},erf:{$meth:function erf(){throw new Sk.builtin.NotImplementedError("math.erf() is not yet implemented in Skulpt")},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Error function at x."},erfc:{$meth:function erfc(){throw new Sk.builtin.NotImplementedError("math.erfc() is not yet implemented in Skulpt")},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Complementary error function at x."},exp:{$meth:function exp(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a));let b=a.v;if("number"!=typeof b&&(b=a.nb$float().v),b==1/0||b==-Infinity||isNaN(b))return new Sk.builtin.float_(f(b));const c=f(b);if(!isFinite(c))throw new Sk.builtin.OverflowError("math range error");return new Sk.builtin.float_(c)},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return e raised to the power of x."},expm1:{$meth:function expm1(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a));const b=Sk.builtin.asnum$(a);if(.7>k(b)){const a=f(b);if(1==a)return new Sk.builtin.float_(b);else{const c=(a-1)*b/e(a);return new Sk.builtin.float_(c)}}else{const a=f(b)-1;return new Sk.builtin.float_(a)}},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return exp(x)-1.\\n\\nThis function avoids the loss of precision involved in the direct evaluation of exp(x)-1 for small x."},fabs:{$meth:function fabs(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a));let b=a.v;return JSBI.__isBigInt(b)&&(b=a.nb$float().v),b=k(b),new Sk.builtin.float_(b)},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the absolute value of the float x."},factorial:{$meth:function factorial(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a));let b=Sk.builtin.asnum$(a);if(a=j(b),a!=b)throw new Sk.builtin.ValueError("factorial() only accepts integral values");if(0>a)throw new Sk.builtin.ValueError("factorial() not defined for negative numbers");let c=1;for(let b=2;b<=a&&b<=o;b++)c*=b;if(a<=o)return new Sk.builtin.int_(c);c=JSBI.BigInt(c);for(let b=19;b<=a;b++)c=JSBI.multiply(c,JSBI.BigInt(b));return new Sk.builtin.int_(c)},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Find x!.\\n\\nRaise a ValueError if x is negative or non-integral."},floor:{$meth:function floor(a){return Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a)),Sk.__future__.ceil_floor_int?new Sk.builtin.int_(j(Sk.builtin.asnum$(a))):new Sk.builtin.float_(j(Sk.builtin.asnum$(a)))},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the floor of x as an Integral.\\n\\nThis is the largest integer <= x."},fmod:{$meth:function fmod(a,b){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a)),Sk.builtin.pyCheckType("y","number",Sk.builtin.checkNumber(b));let c=a.v,d=b.v;if("number"!=typeof c&&(c=a.nb$float().v),"number"!=typeof d&&(d=b.nb$float().v),(d==1/0||d==-Infinity)&&isFinite(c))return new Sk.builtin.float_(c);const e=c%d;if(isNaN(e)&&!isNaN(c)&&!isNaN(d))throw new Sk.builtin.ValueError("math domain error");return new Sk.builtin.float_(e)},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, x, y, /)",$doc:"Return fmod(x, y), according to platform C.\\n\\nx % y may differ."},frexp:{$meth:function frexp(a){var b=Math.max;Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a));const c=Sk.builtin.asnum$(a),d=[c,0];if(0!==c&&i(c)){const a=k(c);let e=b(-1023,j(h(a))+1),f=a*g(2,-e);for(;.5>f;)f*=2,e--;for(;1<=f;)f*=.5,e++;0>c&&(f=-f),d[0]=f,d[1]=e}return d[0]=new Sk.builtin.float_(d[0]),d[1]=new Sk.builtin.int_(d[1]),new Sk.builtin.tuple(d)},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the mantissa and exponent of x, as pair (m, e).\\n\\nm is a float and e is an int, such that x = m * 2.**e.\\nIf x is 0, m and e are both 0.  Else 0.5 <= abs(m) < 1.0."},fsum:{$meth:function fsum(a){if(!Sk.builtin.checkIterable(a))throw new Sk.builtin.TypeError("\'"+Sk.abstr.typeName(a)+"\' object is not iterable");let b=[];a=Sk.abstr.iter(a);let c,d,e;for(let f=a.tp$iternext();void 0!==f;f=a.tp$iternext()){Sk.builtin.pyCheckType("","real number",Sk.builtin.checkNumber(f)),c=0;let a=f.v;"number"!=typeof a&&(a=f.nb$float().v),f=a;for(let a,g=0,h=b.length;g<h;g++){if(a=b[g],k(f)<k(a)){let b=f;f=a,a=b}d=f+a,e=a-(d-f),e&&(b[c]=e,c++),f=d}b=b.slice(0,c).concat([f])}const f=b.reduce(function(c,a){return c+a},0);return new Sk.builtin.float_(f)},$flags:{OneArg:!0},$textsig:"($module, seq, /)",$doc:"Return an accurate floating point sum of values in the iterable seq.\\n\\nAssumes IEEE-754 floating point arithmetic."},gamma:{$meth:function gamma(){throw new Sk.builtin.NotImplementedError("math.gamma() is not yet implemented in Skulpt")},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Gamma function at x."},gcd:{$meth:function gcd(c,a){function _gcd(c,a){return 0==a?c:_gcd(a,c%a)}function _biggcd(c,a){return JSBI.equal(a,JSBI.__ZERO)?c:_biggcd(a,JSBI.remainder(c,a))}Sk.builtin.pyCheckType("a","integer",Sk.builtin.checkInt(c)),Sk.builtin.pyCheckType("b","integer",Sk.builtin.checkInt(a));let b,d=Sk.builtin.asnum$(c),e=Sk.builtin.asnum$(a);return"number"==typeof d&&"number"==typeof e?(d=k(d),e=k(e),b=_gcd(d,e),b=0>b?-b:b,new Sk.builtin.int_(b)):(d=JSBI.BigInt(d),e=JSBI.BigInt(e),b=_biggcd(d,e),JSBI.lessThan(b,JSBI.__ZERO)&&(b=JSBI.multiply(b,JSBI.BigInt(-1))),new Sk.builtin.int_(b.toString()))},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, x, y, /)",$doc:"greatest common divisor of x and y"},hypot:{$meth:function hypot(a,c){return Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a)),Sk.builtin.pyCheckType("y","number",Sk.builtin.checkNumber(c)),a=Sk.builtin.asnum$(a),c=Sk.builtin.asnum$(c),new Sk.builtin.float_(b(a*a+c*c))},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, x, y, /)",$doc:"Return the Euclidean distance, sqrt(x*x + y*y)."},isclose:{$meth:function isclose(c,d){Sk.abstr.checkArgsLen("isclose",c,2,2),rel_abs_vals=Sk.abstr.copyKeywordsToNamedArgs("isclose",["rel_tol","abs_tol"],[],d,[new Sk.builtin.float_(1e-9),new Sk.builtin.float_(0)]);const e=c[0],a=c[1],b=rel_abs_vals[0],f=rel_abs_vals[1];Sk.builtin.pyCheckType("a","number",Sk.builtin.checkNumber(e)),Sk.builtin.pyCheckType("b","number",Sk.builtin.checkNumber(a)),Sk.builtin.pyCheckType("rel_tol","number",Sk.builtin.checkNumber(b)),Sk.builtin.pyCheckType("abs_tol","number",Sk.builtin.checkNumber(f));const g=Sk.builtin.asnum$(e),h=Sk.builtin.asnum$(a),i=Sk.builtin.asnum$(b),j=Sk.builtin.asnum$(f);if(0>i||0>j)throw new Sk.builtin.ValueError("tolerances must be non-negative");if(g==h)return Sk.builtin.bool.true$;if(g==1/0||g==-Infinity||h==1/0||h==-Infinity)return Sk.builtin.bool.false$;const l=k(h-g),m=l<=k(i*h)||l<=k(i*g)||l<=j;return new Sk.builtin.bool(m)},$flags:{FastCall:!0},$textsig:"($module, /, a, b, *, rel_tol=1e-09, abs_tol=0.0)",$doc:"Determine whether two floating point numbers are close in value.\\n\\n  rel_tol\\n    maximum difference for being considered \\"close\\", relative to the\\n    magnitude of the input values\\n  abs_tol\\n    maximum difference for being considered \\"close\\", regardless of the\\n    magnitude of the input values\\n\\nReturn True if a is close in value to b, and False otherwise.\\n\\nFor the values to be considered close, the difference between them\\nmust be smaller than at least one of the tolerances.\\n\\n-inf, inf and NaN behave similarly to the IEEE 754 Standard.  That\\nis, NaN is not close to anything, even itself.  inf and -inf are\\nonly close to themselves."},isfinite:{$meth:function isfinite(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a));const b=Sk.builtin.asnum$(a);return Sk.builtin.checkInt(a)?Sk.builtin.bool.true$:isFinite(b)?Sk.builtin.bool.true$:Sk.builtin.bool.false$},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return True if x is neither an infinity nor a NaN, and False otherwise."},isinf:{$meth:function isinf(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a));const b=Sk.builtin.asnum$(a);return Sk.builtin.checkInt(a)?Sk.builtin.bool.false$:isFinite(b)||isNaN(b)?Sk.builtin.bool.false$:Sk.builtin.bool.true$},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return True if x is a positive or negative infinity, and False otherwise."},isnan:{$meth:function isnan(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a));const b=Sk.builtin.asnum$(a);return isNaN(b)?Sk.builtin.bool.true$:Sk.builtin.bool.false$},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return True if x is a NaN (not a number), and False otherwise."},ldexp:{$meth:function ldexp(a,b){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a)),Sk.builtin.pyCheckType("i","integer",Sk.builtin.checkInt(b));let c=a.v;"number"!=typeof c&&(c=a.nb$float().v);const d=Sk.builtin.asnum$(b);if(c==1/0||c==-Infinity||0==c||isNaN(c))return a;const e=c*g(2,d);if(!isFinite(e))throw new Sk.builtin.OverflowError("math range error");return new Sk.builtin.float_(e)},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, x, i, /)",$doc:"Return x * (2**i).\\n\\nThis is essentially the inverse of frexp()."},lgamma:{$meth:function lgamma(){throw new Sk.builtin.NotImplementedError("math.lgamma() is not yet implemented in Skulpt")},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Natural logarithm of absolute value of Gamma function at x."},log:{$meth:function log(a,b){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a));let f,g,h=Sk.builtin.asnum$(a);if(0>=h)throw new Sk.builtin.ValueError("math domain error");if(void 0===b?f=d:(Sk.builtin.pyCheckType("base","number",Sk.builtin.checkNumber(b)),f=Sk.builtin.asnum$(b)),0>=f)throw new Sk.builtin.ValueError("math domain error");else if(Sk.builtin.checkFloat(a)||h<c)g=e(h)/e(f);else{h=new Sk.builtin.str(a).$jsstr();const b=h.length,c=parseFloat("0."+h);g=(b*e(10)+e(c))/e(f)}return new Sk.builtin.float_(g)},$flags:{MinArgs:1,MaxArgs:2},$textsig:null,$doc:"log(x, [base=e])\\nReturn the logarithm of x to the given base.\\n\\nIf the base not specified, returns the natural logarithm (base e) of x."},log10:{$meth:function log10(a){var b=Math.log10;Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a));let d,e=Sk.builtin.asnum$(a);if(0>e)throw new Sk.builtin.ValueError("math domain error");else if(Sk.builtin.checkFloat(a)||e<c)d=b(e);else{e=new Sk.builtin.str(a).$jsstr();const c=e.length,f=parseFloat("0."+e);d=c+b(f)}return new Sk.builtin.float_(d)},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the base 10 logarithm of x."},log1p:{$meth:function log1p(a){var b=Number.EPSILON;Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a));let c=a.v;if("number"!=typeof c&&(c=a.nb$float().v),-1>=c)throw new Sk.builtin.ValueError("math domain error");else{if(0==c)return new Sk.builtin.float_(c);if(k(c)<b/2)return new Sk.builtin.float_(c);if(-.5<=c&&1>=c){const a=1+c,b=e(a)-(a-1-c)/a;return new Sk.builtin.float_(b)}else{const a=e(1+c);return new Sk.builtin.float_(a)}}},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the natural logarithm of 1+x (base e).\\n\\nThe result is computed in a way which is accurate for x near zero."},log2:{$meth:function log2(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a));let b,d=Sk.builtin.asnum$(a);if(0>d)throw new Sk.builtin.ValueError("math domain error");else if(Sk.builtin.checkFloat(a)||d<c)b=h(d);else{d=new Sk.builtin.str(a).$jsstr();const c=d.length,e=parseFloat("0."+d);b=c*h(10)+h(e)}return new Sk.builtin.float_(b)},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the base 2 logarithm of x."},modf:{$meth:function modf(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a));let b=Sk.builtin.asnum$(a);if(!isFinite(b)){if(b==1/0)return new Sk.builtin.tuple([new Sk.builtin.float_(0),new Sk.builtin.float_(b)]);if(b==-Infinity)return new Sk.builtin.tuple([new Sk.builtin.float_(-0),new Sk.builtin.float_(b)]);if(isNaN(b))return new Sk.builtin.tuple([new Sk.builtin.float_(b),new Sk.builtin.float_(b)])}const c=n(b);b=k(b);const e=c*j(b),f=c*(b-j(b));return new Sk.builtin.tuple([new Sk.builtin.float_(f),new Sk.builtin.float_(e)])},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the fractional and integer parts of x.\\n\\nBoth results carry the sign of x and are floats."},pow:{$meth:function pow(a,b){var c=Number.isInteger;Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a)),Sk.builtin.pyCheckType("y","number",Sk.builtin.checkNumber(b));let d=a.v,e=b.v;if("number"!=typeof d&&(d=a.nb$float().v),"number"!=typeof e&&(e=b.nb$float().v),0==d&&0>e)throw new Sk.builtin.ValueError("math domain error");else{if(1==d)return new Sk.builtin.float_(1);if(i(d)&&i(e)&&0>d&&!c(e))throw new Sk.builtin.ValueError("math domain error");else if(-1==d&&(e==-Infinity||e==1/0))return new Sk.builtin.float_(1)}const f=g(d,e);if(!i(d)||!i(e))return new Sk.builtin.float_(f);if(f==1/0||f==-Infinity)throw new Sk.builtin.OverflowError("math range error");return new Sk.builtin.float_(f)},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, x, y, /)",$doc:"Return x**y (x to the power of y)."},radians:{$meth:function radians(b){Sk.builtin.pyCheckType("deg","number",Sk.builtin.checkNumber(b));const c=a/180*Sk.builtin.asnum$(b);return new Sk.builtin.float_(c)},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Convert angle x from degrees to radians."},remainder:{$meth:function remainder(a,b){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a)),Sk.builtin.pyCheckType("y","number",Sk.builtin.checkNumber(b));let d=a.v,e=b.v;if("number"!=typeof d&&(d=a.nb$float().v),"number"!=typeof e&&(e=b.nb$float().v),isFinite(d)&&isFinite(e)){let a,b,f,c,g;if(0==e)throw new Sk.builtin.ValueError("math domain error");if(a=k(d),b=k(e),c=a%b,f=b-c,c<f)g=c;else if(c>f)g=-f;else{if(c!=f)throw new Sk.builtin.AssertionError;g=c-2*(.5*(a-c)%b)}return new Sk.builtin.float_(n(d)*g)}if(isNaN(d))return a;if(isNaN(e))return b;if(d==1/0||d==-Infinity)throw new Sk.builtin.ValueError("math domain error");if(e!=1/0&&e!=-Infinity)throw new Sk.builtin.AssertionError;return new Sk.builtin.float_(d)},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, x, y, /)",$doc:"Difference between x and the closest integer multiple of y.\\n\\nReturn x - n*y where n*y is the closest integer multiple of y.\\nIn the case where x is exactly halfway between two multiples of\\ny, the nearest even value of n is used. The result is always exact."},sin:{$meth:function sin(a){var b=Math.sin;return Sk.builtin.pyCheckType("rad","number",Sk.builtin.checkNumber(a)),new Sk.builtin.float_(b(Sk.builtin.asnum$(a)))},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the sine of x (measured in radians)."},sinh:{$meth:function sinh(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a)),a=Sk.builtin.asnum$(a);const b=g(d,a);return new Sk.builtin.float_((b-1/b)/2)},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the hyperbolic sine of x."},sqrt:{$meth:function sqrt(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a));const c=Sk.builtin.asnum$(a);if(0>c)throw new Sk.builtin.ValueError("math domain error");return new Sk.builtin.float_(b(c))},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the square root of x."},tan:{$meth:function tan(a){var b=Math.tan;return Sk.builtin.pyCheckType("rad","number",Sk.builtin.checkNumber(a)),new Sk.builtin.float_(b(Sk.builtin.asnum$(a)))},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the tangent of x (measured in radians)."},tanh:{$meth:function tanh(a){Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a));const b=Sk.builtin.asnum$(a);if(0===b)return new Sk.builtin.float_(b);const c=g(d,b),e=1/c;return new Sk.builtin.float_((c-e)/2/((c+e)/2))},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the hyperbolic tangent of x."},trunc:{$meth:function trunc(a){return Sk.builtin.pyCheckType("x","number",Sk.builtin.checkNumber(a)),Sk.builtin.checkInt(a)?a:new Sk.builtin.int_(0|Sk.builtin.asnum$(a))},$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Truncates the Real x to the nearest Integral toward 0.\\n\\nUses the __trunc__ magic method."}}),l};',"src/lib/md5.py":'raise NotImplementedError("md5 is not yet implemented in Skulpt")\n',"src/lib/mhlib.py":'raise NotImplementedError("mhlib is not yet implemented in Skulpt")\n',"src/lib/mimetools.py":'raise NotImplementedError("mimetools is not yet implemented in Skulpt")\n',"src/lib/mimetypes.py":'raise NotImplementedError("mimetypes is not yet implemented in Skulpt")\n',"src/lib/mimify.py":'raise NotImplementedError("mimify is not yet implemented in Skulpt")\n',"src/lib/modulefinder.py":'raise NotImplementedError("modulefinder is not yet implemented in Skulpt")\n',"src/lib/multifile.py":'raise NotImplementedError("multifile is not yet implemented in Skulpt")\n',"src/lib/multiprocessing/__init__.py":'raise NotImplementedError("multiprocessing is not yet implemented in Skulpt")\n',"src/lib/multiprocessing/dummy/__init__.py":'raise NotImplementedError("dummy is not yet implemented in Skulpt")\n',"src/lib/mutex.py":'raise NotImplementedError("mutex is not yet implemented in Skulpt")\n',"src/lib/netrc.py":'raise NotImplementedError("netrc is not yet implemented in Skulpt")\n',"src/lib/new.py":'raise NotImplementedError("new is not yet implemented in Skulpt")\n',"src/lib/nntplib.py":'raise NotImplementedError("nntplib is not yet implemented in Skulpt")\n',"src/lib/ntpath.py":'raise NotImplementedError("ntpath is not yet implemented in Skulpt")\n',"src/lib/nturl2path.py":'raise NotImplementedError("nturl2path is not yet implemented in Skulpt")\n',"src/lib/numbers.py":"Number = (int, float, complex)\nIntegral = int\nComplex = complex\n","src/lib/opcode.py":'raise NotImplementedError("opcode is not yet implemented in Skulpt")\n',"src/lib/operator.js":'function $builtinmodule(){return operator={__name__:new Sk.builtin.str("operator"),__doc__:new Sk.builtin.str("Operator interface.\\n\\nThis module exports a set of functions implemented in javascript corresponding\\nto the intrinsic operators of Python.  For example, operator.add(x, y)\\nis equivalent to the expression x+y.  The function names are those\\nused for special methods; variants without leading and trailing\\n\'__\' are also provided for convenience."),__all__:new Sk.builtin.list(["abs","add","and_","attrgetter","concat","contains","countOf","delitem","eq","floordiv","ge","getitem","gt","iadd","iand","iconcat","ifloordiv","ilshift","imatmul","imod","imul","index","indexOf","inv","invert","ior","ipow","irshift","is_","is_not","isub","itemgetter","itruediv","ixor","le","length_hint","lshift","lt","matmul","methodcaller","mod","mul","ne","neg","not_","or_","pos","pow","rshift","setitem","sub","truediv","truth","xor"].map(a=>new Sk.builtin.str(a)))},operator.itemgetter=Sk.abstr.buildNativeClass("operator.itemgetter",{constructor:function itemgetter(a){this.items=a,this.oneitem=1===a.length,this.item=a[0],this.in$repr=!1},slots:{tp$getattr:Sk.generic.getAttr,tp$new(a,b){return Sk.abstr.checkNoKwargs("itemgetter",b),Sk.abstr.checkArgsLen("itemgetter",a,1),new operator.itemgetter(a)},tp$call(a,b){Sk.abstr.checkNoKwargs("itemgetter",b),Sk.abstr.checkArgsLen("itemgetter",a,1,1);const c=a[0];return this.oneitem?Sk.abstr.objectGetItem(c,this.item,!0):new Sk.builtin.tuple(this.items.map(a=>Sk.abstr.objectGetItem(c,a)))},tp$doc:"Return a callable object that fetches the given item(s) from its operand.\\n            After f = itemgetter(2), the call f(r) returns r[2].\\n            After g = itemgetter(2, 5, 3), the call g(r) returns (r[2], r[5], r[3])",$r(){if(this.in$repr)return new Sk.builtin.str(this.tp$name+"(...)");this.in$repr=!0;const a=this.tp$name+"("+this.items.map(a=>Sk.misceval.objectRepr(a)).join(", ")+")";return this.in$repr=!1,a}}}),operator.attrgetter=Sk.abstr.buildNativeClass("operator.attrgetter",{constructor:function attrgetter(a){this.attrs=a,this.oneattr=1===a.length,this.attr=a[0],this.in$repr=!1},slots:{tp$getattr:Sk.generic.getAttr,tp$new(a,b){Sk.abstr.checkNoKwargs("attrgetter",b),Sk.abstr.checkArgsLen("attrgetter",a,1);const c=[];for(let d=0;d<a.length;d++){const b=a[d];if(!Sk.builtin.checkString(b))throw new Sk.builtin.TypeError("attribute name must be a string");b.v.includes(".")?c.push(b.$jsstr().split(".").map(a=>new Sk.builtin.str(a))):c.push([b])}return new operator.attrgetter(c)},tp$call(a,b){Sk.abstr.checkNoKwargs("attrgetter",b),Sk.abstr.checkArgsLen("attrgetter",a,1,1);const c=a[0];if(this.oneattr)return this.attr.reduce((a,b)=>Sk.abstr.gattr(a,b),c);const d=this.attrs.map(a=>a.reduce((a,b)=>Sk.abstr.gattr(a,b),c));return new Sk.builtin.tuple(d)},tp$doc:"attrgetter(attr, ...) --\x3e attrgetter object\\n\\nReturn a callable object that fetches the given attribute(s) from its operand.\\nAfter f = attrgetter(\'name\'), the call f(r) returns r.name.\\nAfter g = attrgetter(\'name\', \'date\'), the call g(r) returns (r.name, r.date).\\nAfter h = attrgetter(\'name.first\', \'name.last\'), the call h(r) returns\\n(r.name.first, r.name.last).",$r(){if(this.in$repr)return new Sk.builtin.str(this.tp$name+"(...)");this.in$repr=!0;const a=this.tp$name+"("+this.items.map(a=>Sk.misceval.objectRepr(a)).join(", ")+")";return this.in$repr=!1,a}}}),operator.methodcaller=Sk.abstr.buildNativeClass("operator.methodcaller",{constructor:function methodcaller(a,b,c){this.$name=a,this.args=b,this.kwargs=c||[],this.in$repr=!1},slots:{tp$getattr:Sk.generic.getAttr,tp$new(a,b){Sk.abstr.checkArgsLen("methodcaller",a,1);const c=a[0];if(!Sk.builtin.checkString(c))throw new Sk.builtin.TypeError("method name must be a string");return new operator.methodcaller(c,a.slice(1),b)},tp$call(a,b){Sk.abstr.checkNoKwargs("methodcaller",b),Sk.abstr.checkArgsLen("methodcaller",a,1,1);const c=a[0];return Sk.misceval.chain(Sk.abstr.gattr(c,this.$name,!0),a=>Sk.misceval.callsimOrSuspendArray(a,this.args,this.kwargs))},tp$doc:"methodcaller(name, ...) --\x3e methodcaller object\\n\\nReturn a callable object that calls the given method on its operand.\\nAfter f = methodcaller(\'name\'), the call f(r) returns r.name().\\nAfter g = methodcaller(\'name\', \'date\', foo=1), the call g(r) returns\\nr.name(\'date\', foo=1).",$r(){if(this.in$repr)return new Sk.builtin.str(this.tp$name+"(...)");this.in$repr=!0;let a=[Sk.misceval.objectRepr(this.$name),...this.args.map(a=>Sk.misceval.objectRepr(a))];for(let b=0;b<this.kwargs.length;b+=2)a.push(this.kwargs[b]+"="+Sk.misceval.objectRepr(this.kwargs[b+1]));return a=this.tp$name+"("+a.join(", ")+")",this.in$repr=!1,a}}}),Sk.abstr.setUpModuleMethods("operator",operator,{lt:{$meth:function lt(c,a){return Sk.builtin.bool(Sk.misceval.richCompareBool(c,a,"Lt"))},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a < b."},le:{$meth:function le(c,a){return Sk.builtin.bool(Sk.misceval.richCompareBool(c,a,"LtE"))},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a <= b."},eq:{$meth:function eq(c,a){return Sk.builtin.bool(Sk.misceval.richCompareBool(c,a,"Eq"))},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a == b."},ne:{$meth:function ne(c,a){return Sk.builtin.bool(Sk.misceval.richCompareBool(c,a,"NotEq"))},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a != b."},ge:{$meth:function ge(c,a){return Sk.builtin.bool(Sk.misceval.richCompareBool(c,a,"GtE"))},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a >= b."},gt:{$meth:function gt(c,a){return Sk.builtin.bool(Sk.misceval.richCompareBool(c,a,"Gt"))},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a > b."},not_:{$meth:function not_(a){return Sk.abstr.numberUnaryOp(a,"Not")},$flags:{OneArg:!0},$textsig:"($module, a, /)",$doc:"Same as not a."},truth:{$meth:function truth(a){return Sk.builtin.bool(a)},$flags:{OneArg:!0},$textsig:"($module, a, /)",$doc:"Return True if a is true, False otherwise."},is_:{$meth:function is_(c,a){return Sk.builtin.bool(Sk.misceval.richCompareBool(c,a,"Is"))},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a is b."},is_not:{$meth:function is_not(c,a){return Sk.builtin.bool(Sk.misceval.richCompareBool(c,a,"IsNot"))},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a is not b."},abs:{$meth:function abs(a){return Sk.builtin.abs(a)},$flags:{OneArg:!0},$textsig:"($module, a, /)",$doc:"Same as abs(a)."},add:{$meth:function add(c,a){return Sk.abstr.numberBinOp(c,a,"Add")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a + b."},and_:{$meth:function and_(c,a){return Sk.abstr.numberBinOp(c,a,"BitAnd")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a & b."},floordiv:{$meth:function floordiv(c,a){return Sk.abstr.numberBinOp(c,a,"FloorDiv")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a // b."},index:{$meth:function index(b){return new Sk.builtin.int_(Sk.misceval.asIndexOrThrow(b))},$flags:{OneArg:!0},$textsig:"($module, a, /)",$doc:"Same as a.__index__()"},inv:{$meth:function inv(a){return Sk.abstr.numberUnaryOp(a,"Invert")},$flags:{OneArg:!0},$textsig:"($module, a, /)",$doc:"Same as ~a."},invert:{$meth:function invert(a){return Sk.abstr.numberUnaryOp(a,"Invert")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, /)",$doc:"Same as ~a."},lshift:{$meth:function lshift(c,a){return Sk.abstr.numberBinOp(c,a,"LShift")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a << b."},mod:{$meth:function mod(c,a){return Sk.abstr.numberBinOp(c,a,"Mod")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a % b."},mul:{$meth:function mul(c,a){return Sk.abstr.numberBinOp(c,a,"Mult")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a * b."},matmul:{$meth:function matmul(c,a){return Sk.abstr.numberBinOp(c,a,"MatMult")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a @ b."},neg:{$meth:function neg(a){return Sk.abstr.numberUnaryOp(a,"USub")},$flags:{OneArg:!0},$textsig:"($module, a, /)",$doc:"Same as -a."},or_:{$meth:function or_(c,a){return Sk.abstr.numberBinOp(c,a,"BitOr")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a | b."},pos:{$meth:function pos(a){return Sk.abstr.numberUnaryOp(a,"UAdd")},$flags:{OneArg:!0},$textsig:"($module, a, /)",$doc:"Same as +a."},pow:{$meth:function pow(c,a){return Sk.abstr.numberBinOp(c,a,"Pow")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a ** b."},rshift:{$meth:function rshift(c,a){return Sk.abstr.numberBinOp(c,a,"RShift")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a >> b."},sub:{$meth:function sub(c,a){return Sk.abstr.numberBinOp(c,a,"Sub")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a - b."},truediv:{$meth:function div(c,a){return Sk.abstr.numberBinOp(c,a,"Div")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a / b."},xor:{$meth:function xor(c,a){return Sk.abstr.numberBinOp(c,a,"BitXor")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a ^ b."},concat:{$meth:function concat(c,a){return Sk.abstr.sequenceConcat(c,a)},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a + b, for a and b sequences."},contains:{$meth:function contains(c,a){return Sk.builtin.bool(Sk.abstr.sequenceContains(c,a))},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as b in a (note reversed operands)."},countOf:{$meth:function countOf(c,a){return Sk.abstr.sequenceGetCountOf(c,a)},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Return the number of times b occurs in a."},delitem:{$meth:function delitem(c,a){return Sk.misceval.chain(Sk.abstr.objectDelItem(c,a,!0),()=>Sk.builtin.none.none$)},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as del a[b]."},getitem:{$meth:function getitem(c,a){return Sk.abstr.objectGetItem(c,a)},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a[b]."},indexOf:{$meth:function indexOf(c,a){return Sk.abstr.sequenceGetIndexOf(c,a)},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Return the first index of b in a."},setitem:{$meth:function setitem(d,a,b){return Sk.misceval.chain(Sk.abstr.objectSetItem(d,a,b,!0),()=>Sk.builtin.none.none$)},$flags:{MinArgs:3,MaxArgs:3},$textsig:"($module, a, b, c, /)",$doc:"Same as a[b] = c."},length_hint:{$meth:function length_hint(a,b){if(void 0===b)b=new Sk.builtin.int_(0);else if(!Sk.builtin.checkInt(b))throw new Sk.builtin.TypeError("\'"+Sk.abstr.typeName(b)+"\' object cannot be interpreted as an integer");try{return Sk.builtin.len(a)}catch(a){if(!(a instanceof Sk.builtin.TypeError))throw a}const c=Sk.abstr.lookupSpecial(a,Sk.builtin.str.$length_hint);if(void 0!==c){const a=Sk.misceval.callsimArray(c,[]);if(a===Sk.builtin.NotImplemented.NotImplemented$)return b;if(!Sk.builtin.checkInteger(a))throw new Sk.builtin.TypeError("__length_hint__ must be an integer, not "+Sk.abstr.typeName(a));else if(a.nb$isnegative())throw new Sk.builtin.TypeError("__length_hint__() should return >= 0");return a}return b},$flags:{MinArgs:1,MaxArgs:2},$textsig:"($module, obj, default=0, /)",$doc:"Return an estimate of the number of items in obj.\\n\\nThis is useful for presizing containers when building from an iterable.\\n\\nIf the object supports len(), the result will be exact.\\nOtherwise, it may over- or under-estimate by an arbitrary amount.\\nThe result will be an integer >= 0."},iadd:{$meth:function iadd(c,a){return Sk.abstr.numberInplaceBinOp(c,a,"Add")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a += b."},iand:{$meth:function iand(c,a){return Sk.abstr.numberInplaceBinOp(c,a,"BitAnd")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a &= b."},iconcat:{$meth:function iconcat(c,a){if(void 0!==c.sq$inplace_concat)return c.sq$inplace_concat(a);if(void 0!==c.sq$concat)return c.sq$concat(a);if(!Sk.builtin.checkSequence(c)||!Sk.builtin.checkSequence(a))throw new Sk.builtin.TypeError(Sk.abstr.typeName(c)+" object can\'t be concatenated");return Sk.abstr.numberInplaceBinOp(c,a,"Add")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a += b, for a and b sequences."},ifloordiv:{$meth:function ifloordiv(c,a){return Sk.abstr.numberInplaceBinOp(c,a,"FloorDiv")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a //= b."},ilshift:{$meth:function ilshift(c,a){return Sk.abstr.numberInplaceBinOp(c,a,"LShift")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a <<= b."},imod:{$meth:function imod(c,a){return Sk.abstr.numberInplaceBinOp(c,a,"Mod")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a %= b."},imul:{$meth:function imul(c,a){return Sk.abstr.numberInplaceBinOp(c,a,"Mult")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a *= b."},imatmul:{$meth:function imatmul(c,a){return Sk.abstr.numberInplaceBinOp(c,a,"MatMult")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a @= b."},ior:{$meth:function ior(c,a){return Sk.abstr.numberInplaceBinOp(c,a,"BitOr")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a |= b."},ipow:{$meth:function ipow(c,a){return Sk.abstr.numberInplaceBinOp(c,a,"Pow")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a **= b."},irshift:{$meth:function irshift(c,a){return Sk.abstr.numberInplaceBinOp(c,a,"LRhift")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a >>= b."},isub:{$meth:function isub(c,a){return Sk.abstr.numberInplaceBinOp(c,a,"Sub")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a -= b."},itruediv:{$meth:function idiv(c,a){return Sk.abstr.numberInplaceBinOp(c,a,"Div")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a /= b."},ixor:{$meth:function ixor(c,a){return Sk.abstr.numberInplaceBinOp(c,a,"BitXor")},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, a, b, /)",$doc:"Same as a ^= b."}}),Object.assign(operator,{__abs__:operator.abs,__add__:operator.add,__and__:operator.and,__concat__:operator.concat,__contains__:operator.contains,__delitem__:operator.delitem,__eq__:operator.eq,__floordiv__:operator.floordiv,__ge__:operator.ge,__getitem__:operator.getitem,__gt__:operator.gt,__iadd__:operator.iadd,__iand__:operator.iand,__iconcat__:operator.iconcat,__ifloordiv__:operator.ifloordiv,__ilshift__:operator.ilshift,__imatmul__:operator.imatmul,__imod__:operator.imod,__imul__:operator.imul,__index__:operator.index,__inv__:operator.inv,__invert__:operator.invert,__ior__:operator.ior,__ipow__:operator.ipow,__irshift__:operator.irshift,__isub__:operator.isub,__itruediv__:operator.itruediv,__ixor__:operator.ixor,__le__:operator.le,__lshift__:operator.lshift,__lt__:operator.lt,__matmul__:operator.matmul,__mod__:operator.mod,__mul__:operator.mul,__ne__:operator.ne,__neg__:operator.neg,__not__:operator.not,__or__:operator.or,__pos__:operator.pos,__pow__:operator.pow,__rshift__:operator.rshift,__setitem__:operator.setitem,__sub__:operator.sub,__truediv__:operator.truediv,__xor__:operator.xor,_abs:Sk.builtins.abs,div:operator.truediv,__div__:operator.truediv}),operator}',"src/lib/optparse.py":'raise NotImplementedError("optparse is not yet implemented in Skulpt")\n',"src/lib/os.py":'raise NotImplementedError("os is not yet implemented in Skulpt")\n',"src/lib/os2emxpath.py":'raise NotImplementedError("os2emxpath is not yet implemented in Skulpt")\n',"src/lib/pdb.py":'raise NotImplementedError("pdb is not yet implemented in Skulpt")\n',"src/lib/pickle.py":'raise NotImplementedError("pickle is not yet implemented in Skulpt")\n',"src/lib/pickletools.py":'raise NotImplementedError("pickletools is not yet implemented in Skulpt")\n',"src/lib/pipes.py":'raise NotImplementedError("pipes is not yet implemented in Skulpt")\n',"src/lib/pkgutil.py":'raise NotImplementedError("pkgutil is not yet implemented in Skulpt")\n',"src/lib/platform.js":'var $builtinmodule=function(){var a={},b="undefined"!=typeof window&&"undefined"!=typeof window.navigator;return a.python_implementation=new Sk.builtin.func(function(){return Sk.builtin.pyCheckArgsLen("python_implementation",arguments.length,0,0),new Sk.builtin.str("Skulpt")}),a.node=new Sk.builtin.func(function(){return Sk.builtin.pyCheckArgsLen("node",arguments.length,0,0),new Sk.builtin.str("")}),a.version=new Sk.builtin.func(function(){return Sk.builtin.pyCheckArgsLen("version",arguments.length,0,0),new Sk.builtin.str("")}),a.python_version=new Sk.builtin.func(function(){var a;return Sk.builtin.pyCheckArgsLen("python_version",arguments.length,0,0),a=Sk.__future__.python_version?"3.2.0":"2.7.0",new Sk.builtin.str(a)}),a.system=new Sk.builtin.func(function(){var a;return Sk.builtin.pyCheckArgsLen("system",arguments.length,0,0),a=b?window.navigator.appCodeName:"",new Sk.builtin.str(a)}),a.machine=new Sk.builtin.func(function(){var a;return Sk.builtin.pyCheckArgsLen("machine",arguments.length,0,0),a=b?window.navigator.platform:"",new Sk.builtin.str(a)}),a.release=new Sk.builtin.func(function(){var a;return Sk.builtin.pyCheckArgsLen("release",arguments.length,0,0),a=b?window.navigator.appVersion:"",new Sk.builtin.str(a)}),a.architecture=new Sk.builtin.func(function(){return Sk.builtin.pyCheckArgsLen("architecture",arguments.length,0,0),new Sk.builtin.tuple([new Sk.builtin.str("64bit"),new Sk.builtin.str("")])}),a.processor=new Sk.builtin.func(function(){return Sk.builtin.pyCheckArgsLen("processor",arguments.length,0,0),new Sk.builtin.str("")}),a};',"src/lib/platform.py":'raise NotImplementedError("platform is not yet implemented in Skulpt")\n',"src/lib/plistlib.py":'raise NotImplementedError("plistlib is not yet implemented in Skulpt")\n',"src/lib/popen2.py":'raise NotImplementedError("popen2 is not yet implemented in Skulpt")\n',"src/lib/poplib.py":'raise NotImplementedError("poplib is not yet implemented in Skulpt")\n',"src/lib/posixfile.py":'raise NotImplementedError("posixfile is not yet implemented in Skulpt")\n',"src/lib/posixpath.py":'raise NotImplementedError("posixpath is not yet implemented in Skulpt")\n',"src/lib/pprint.py":'raise NotImplementedError("pprint is not yet implemented in Skulpt")\n',"src/lib/processing.js":'var $builtinmodule=function(){var b,c,d,e,f,g,h,a=Math.PI,j={__name__:new Sk.builtin.str("processing")},k=[],l=!0,m=null;return j.processing=null,j.p=null,j.X=new Sk.builtin.int_(0),j.Y=new Sk.builtin.int_(1),j.Z=new Sk.builtin.int_(2),j.R=new Sk.builtin.int_(3),j.G=new Sk.builtin.int_(4),j.B=new Sk.builtin.int_(5),j.A=new Sk.builtin.int_(6),j.U=new Sk.builtin.int_(7),j.V=new Sk.builtin.int_(8),j.NX=new Sk.builtin.int_(9),j.NY=new Sk.builtin.int_(10),j.NZ=new Sk.builtin.int_(11),j.EDGE=new Sk.builtin.int_(12),j.SR=new Sk.builtin.int_(13),j.SG=new Sk.builtin.int_(14),j.SB=new Sk.builtin.int_(15),j.SA=new Sk.builtin.int_(16),j.SW=new Sk.builtin.int_(17),j.TX=new Sk.builtin.int_(18),j.TY=new Sk.builtin.int_(19),j.TZ=new Sk.builtin.int_(20),j.VX=new Sk.builtin.int_(21),j.VY=new Sk.builtin.int_(22),j.VZ=new Sk.builtin.int_(23),j.VW=new Sk.builtin.int_(24),j.AR=new Sk.builtin.int_(25),j.AG=new Sk.builtin.int_(26),j.AB=new Sk.builtin.int_(27),j.DR=new Sk.builtin.int_(3),j.DG=new Sk.builtin.int_(4),j.DB=new Sk.builtin.int_(5),j.DA=new Sk.builtin.int_(6),j.SPR=new Sk.builtin.int_(28),j.SPG=new Sk.builtin.int_(29),j.SPB=new Sk.builtin.int_(30),j.SHINE=new Sk.builtin.int_(31),j.ER=new Sk.builtin.int_(32),j.EG=new Sk.builtin.int_(33),j.EB=new Sk.builtin.int_(34),j.BEEN_LIT=new Sk.builtin.int_(35),j.VERTEX_FIELD_COUNT=new Sk.builtin.int_(36),j.CENTER=new Sk.builtin.int_(3),j.RADIUS=new Sk.builtin.int_(2),j.CORNERS=new Sk.builtin.int_(1),j.CORNER=new Sk.builtin.int_(0),j.DIAMETER=new Sk.builtin.int_(3),j.BASELINE=new Sk.builtin.int_(0),j.TOP=new Sk.builtin.int_(101),j.BOTTOM=new Sk.builtin.int_(102),j.NORMAL=new Sk.builtin.int_(1),j.NORMALIZED=new Sk.builtin.int_(1),j.IMAGE=new Sk.builtin.int_(2),j.MODEL=new Sk.builtin.int_(4),j.SHAPE=new Sk.builtin.int_(5),j.AMBIENT=new Sk.builtin.int_(0),j.DIRECTIONAL=new Sk.builtin.int_(1),j.SPOT=new Sk.builtin.int_(3),j.RGB=new Sk.builtin.int_(1),j.ARGB=new Sk.builtin.int_(2),j.HSB=new Sk.builtin.int_(3),j.ALPHA=new Sk.builtin.int_(4),j.CMYK=new Sk.builtin.int_(5),j.TIFF=new Sk.builtin.int_(0),j.TARGA=new Sk.builtin.int_(1),j.JPEG=new Sk.builtin.int_(2),j.GIF=new Sk.builtin.int_(3),j.MITER=new Sk.builtin.str("miter"),j.BEVEL=new Sk.builtin.str("bevel"),j.ROUND=new Sk.builtin.str("round"),j.SQUARE=new Sk.builtin.str("butt"),j.PROJECT=new Sk.builtin.str("square"),j.P2D=new Sk.builtin.int_(1),j.JAVA2D=new Sk.builtin.int_(1),j.WEBGL=new Sk.builtin.int_(2),j.P3D=new Sk.builtin.int_(2),j.OPENGL=new Sk.builtin.int_(2),j.PDF=new Sk.builtin.int_(0),j.DXF=new Sk.builtin.int_(0),j.OTHER=new Sk.builtin.int_(0),j.WINDOWS=new Sk.builtin.int_(1),j.MAXOSX=new Sk.builtin.int_(2),j.LINUX=new Sk.builtin.int_(3),j.EPSILON=new Sk.builtin.float_(1e-4),j.MAX_FLOAT=new Sk.builtin.float_(34028235e31),j.MIN_FLOAT=new Sk.builtin.float_(-34028235e31),j.MAX_INT=new Sk.builtin.int_(2147483647),j.MIN_INT=new Sk.builtin.int_(-2147483648),j.HALF_PI=new Sk.builtin.float_(a/2),j.THIRD_PI=new Sk.builtin.float_(a/3),j.PI=new Sk.builtin.float_(a),j.TWO_PI=new Sk.builtin.float_(2*a),j.TAU=new Sk.builtin.float_(2*a),j.QUARTER_PI=new Sk.builtin.float_(a/4),j.DEG_TO_RAD=new Sk.builtin.float_(a/180),j.RAD_TO_DEG=new Sk.builtin.float_(180/a),j.WHITESPACE=new Sk.builtin.str(" \\t\\n\\r\\f\\xA0"),j.POINT=new Sk.builtin.int_(2),j.POINTS=new Sk.builtin.int_(2),j.LINE=new Sk.builtin.int_(4),j.LINES=new Sk.builtin.int_(4),j.TRIANGLE=new Sk.builtin.int_(8),j.TRIANGLES=new Sk.builtin.int_(9),j.TRIANGLE_FAN=new Sk.builtin.int_(11),j.TRIANGLE_STRIP=new Sk.builtin.int_(10),j.QUAD=new Sk.builtin.int_(16),j.QUADS=new Sk.builtin.int_(16),j.QUAD_STRIP=new Sk.builtin.int_(17),j.POLYGON=new Sk.builtin.int_(20),j.PATH=new Sk.builtin.int_(21),j.RECT=new Sk.builtin.int_(30),j.ELLIPSE=new Sk.builtin.int_(31),j.ARC=new Sk.builtin.int_(32),j.SPHERE=new Sk.builtin.int_(40),j.BOX=new Sk.builtin.int_(41),j.GROUP=new Sk.builtin.int_(0),j.PRIMITIVE=new Sk.builtin.int_(1),j.GEOMETRY=new Sk.builtin.int_(3),j.VERTEX=new Sk.builtin.int_(0),j.BEZIER_VERTEX=new Sk.builtin.int_(1),j.CURVE_VERTEX=new Sk.builtin.int_(2),j.BREAK=new Sk.builtin.int_(3),j.CLOSESHAPE=new Sk.builtin.int_(4),j.REPLACE=new Sk.builtin.int_(0),j.BLEND=new Sk.builtin.int_(1),j.ADD=new Sk.builtin.int_(2),j.SUBTRACT=new Sk.builtin.int_(4),j.LIGHTEST=new Sk.builtin.int_(8),j.DARKEST=new Sk.builtin.int_(16),j.DIFFERENCE=new Sk.builtin.int_(32),j.EXCLUSION=new Sk.builtin.int_(64),j.MULTIPLY=new Sk.builtin.int_(128),j.SCREEN=new Sk.builtin.int_(256),j.OVERLAY=new Sk.builtin.int_(512),j.HARD_LIGHT=new Sk.builtin.int_(1024),j.SOFT_LIGHT=new Sk.builtin.int_(2048),j.DODGE=new Sk.builtin.int_(4096),j.BURN=new Sk.builtin.int_(8192),j.ALPHA_MASK=new Sk.builtin.int_(4278190080),j.RED_MASK=new Sk.builtin.int_(16711680),j.GREEN_MASK=new Sk.builtin.int_(65280),j.BLUE_MASK=new Sk.builtin.int_(255),j.CUSTOM=new Sk.builtin.int_(0),j.ORTHOGRAPHIC=new Sk.builtin.int_(2),j.PERSPECTIVE=new Sk.builtin.int_(3),j.ARROW=new Sk.builtin.str("default"),j.CROSS=new Sk.builtin.str("crosshair"),j.HAND=new Sk.builtin.str("pointer"),j.MOVE=new Sk.builtin.str("move"),j.TEXT=new Sk.builtin.str("text"),j.WAIT=new Sk.builtin.str("wait"),j.NOCURSOR=Sk.builtin.assk$("url(\'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\'), auto"),j.DISABLE_OPENGL_2X_SMOOTH=new Sk.builtin.int_(1),j.ENABLE_OPENGL_2X_SMOOTH=new Sk.builtin.int_(-1),j.ENABLE_OPENGL_4X_SMOOTH=new Sk.builtin.int_(2),j.ENABLE_NATIVE_FONTS=new Sk.builtin.int_(3),j.DISABLE_DEPTH_TEST=new Sk.builtin.int_(4),j.ENABLE_DEPTH_TEST=new Sk.builtin.int_(-4),j.ENABLE_DEPTH_SORT=new Sk.builtin.int_(5),j.DISABLE_DEPTH_SORT=new Sk.builtin.int_(-5),j.DISABLE_OPENGL_ERROR_REPORT=new Sk.builtin.int_(6),j.ENABLE_OPENGL_ERROR_REPORT=new Sk.builtin.int_(-6),j.ENABLE_ACCURATE_TEXTURES=new Sk.builtin.int_(7),j.DISABLE_ACCURATE_TEXTURES=new Sk.builtin.int_(-7),j.HINT_COUNT=new Sk.builtin.int_(10),j.OPEN=new Sk.builtin.int_(1),j.CLOSE=new Sk.builtin.int_(2),j.BLUR=new Sk.builtin.int_(11),j.GRAY=new Sk.builtin.int_(12),j.INVERT=new Sk.builtin.int_(13),j.OPAQUE=new Sk.builtin.int_(14),j.POSTERIZE=new Sk.builtin.int_(15),j.THRESHOLD=new Sk.builtin.int_(16),j.ERODE=new Sk.builtin.int_(17),j.DILATE=new Sk.builtin.int_(18),j.BACKSPACE=new Sk.builtin.int_(8),j.TAB=new Sk.builtin.int_(9),j.ENTER=new Sk.builtin.int_(10),j.RETURN=new Sk.builtin.int_(13),j.ESC=new Sk.builtin.int_(27),j.DELETE=new Sk.builtin.int_(127),j.CODED=new Sk.builtin.int_(65535),j.SHIFT=new Sk.builtin.int_(16),j.CONTROL=new Sk.builtin.int_(17),j.ALT=new Sk.builtin.int_(18),j.CAPSLK=new Sk.builtin.int_(20),j.PGUP=new Sk.builtin.int_(33),j.PGDN=new Sk.builtin.int_(34),j.END=new Sk.builtin.int_(35),j.HOME=new Sk.builtin.int_(36),j.LEFT=new Sk.builtin.int_(37),j.UP=new Sk.builtin.int_(38),j.RIGHT=new Sk.builtin.int_(39),j.DOWN=new Sk.builtin.int_(40),j.F1=new Sk.builtin.int_(112),j.F2=new Sk.builtin.int_(113),j.F3=new Sk.builtin.int_(114),j.F4=new Sk.builtin.int_(115),j.F5=new Sk.builtin.int_(116),j.F6=new Sk.builtin.int_(117),j.F7=new Sk.builtin.int_(118),j.F8=new Sk.builtin.int_(119),j.F9=new Sk.builtin.int_(120),j.F10=new Sk.builtin.int_(121),j.F11=new Sk.builtin.int_(122),j.F12=new Sk.builtin.int_(123),j.NUMLK=new Sk.builtin.int_(144),j.META=new Sk.builtin.int_(157),j.INSERT=new Sk.builtin.int_(155),j.SINCOS_LENGTH=new Sk.builtin.int_(720),j.PRECISIONB=new Sk.builtin.int_(15),j.PRECISIONF=new Sk.builtin.int_(32768),j.PREC_MAXVAL=new Sk.builtin.int_(32767),j.PREC_ALPHA_SHIFT=new Sk.builtin.int_(9),j.PREC_RED_SHIFT=new Sk.builtin.int_(1),j.NORMAL_MODE_AUTO=new Sk.builtin.int_(0),j.NORMAL_MODE_SHAPE=new Sk.builtin.int_(1),j.NORMAL_MODE_VERTEX=new Sk.builtin.int_(2),j.MAX_LIGHTS=new Sk.builtin.int_(8),j.line=new Sk.builtin.func(function(a,b,c,d){j.processing.line(a.v,b.v,c.v,d.v)}),j.ellipse=new Sk.builtin.func(function(a,b,c,d){j.processing.ellipse(a.v,b.v,c.v,d.v)}),j.text=new Sk.builtin.func(function(a,b,c){j.processing.text(a.v,b.v,c.v)}),j.point=new Sk.builtin.func(function(a,b){j.processing.point(a.v,b.v)}),j.arc=new Sk.builtin.func(function(a,b,c,d,e,f){j.processing.arc(a.v,b.v,c.v,d.v,e.v,f.v)}),j.quad=new Sk.builtin.func(function(a,b,c,d,e,f,g,h){j.processing.quad(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v)}),j.rect=new Sk.builtin.func(function(a,b,c,d,e){"undefined"==typeof e?j.processing.rect(a.v,b.v,c.v,d.v):j.processing.rect(a.v,b.v,c.v,d.v,e.v)}),j.triangle=new Sk.builtin.func(function(a,b,c,d,e,f){j.processing.triangle(a.v,b.v,c.v,d.v,e.v,f.v)}),j.bezier=new Sk.builtin.func(function(a,b,c,d,e,f,g,h,i,k,l,m){"undefined"==typeof i?j.processing.bezier(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v):j.processing.bezier(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v,i.v,k.v,l.v,m.v)}),j.alpha=new Sk.builtin.func(function(a,c,d){return"undefined"==typeof c?new Sk.builtin.float_(j.processing.alpha(a.v)):"undefined"==typeof d?new Sk.builtin.float_(j.processing.alpha(a.v,c.v)):new Sk.builtin.float_(j.processing.alpha(a.v,c.v,d.v))}),j.ambient=new Sk.builtin.func(function(a,c,d){"undefined"==typeof c?j.processing.ambient(a.v):"undefined"==typeof d?j.processing.ambient(a.v,c.v):j.processing.ambient(a.v,c.v,d.v)}),j.ambientLight=new Sk.builtin.func(function(a,b,c,d,e,f){"undefined"==typeof d?j.processing.ambientLight(a.v,b.v,c.v):"undefined"==typeof e?j.processing.ambientLight(a.v,b.v,c.v,d.v):"undefined"==typeof f?j.processing.ambientLight(a.v,b.v,c.v,d.v,e.v):j.processing.ambientLight(a.v,b.v,c.v,d.v,e.v,f.v)}),j.beginCamera=new Sk.builtin.func(function(){j.processing.beginCamera()}),j.beginShape=new Sk.builtin.func(function(a){"undefined"==typeof a&&(a=j.POLYGON),j.processing.beginShape(a.v)}),j.bezierDetail=new Sk.builtin.func(function(a){a="undefined"==typeof a?20:a.v,j.processing.bezierDetail(a)}),j.bezierPoint=new Sk.builtin.func(function(e,a,b,c,d){j.processing.bezierPoint(e.v,a.v,b.v,c.v,d.v)}),j.bezierTangent=new Sk.builtin.func(function(e,a,b,c,d){j.processing.bezierTangent(e.v,a.v,b.v,c.v,d.v)}),j.bezierVertex=new Sk.builtin.func(function(a,b,c,d,e,f,g,h,i){"undefined"==typeof g?j.processing.bezierVertex(a.v,b.v,c.v,d.v,e.v,f.v):"undefined"==typeof h?j.processing.bezierVertex(a.v,b.v,c.v,d.v,e.v,f.v,g.v):"undefined"==typeof i?j.processing.bezierVertex(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v):j.processing.bezierVertex(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v,i.v)}),j.blend=new Sk.builtin.func(function(a,b,c,d,e,f,g,h,i,k){other instanceof Sk.builtin.int_||other instanceof Sk.builtin.float_?j.processing.blend(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v,i.v):j.processing.blend(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v,i.v,k.v)}),j.blendColor=new Sk.builtin.func(function(a,b,d){var e=Sk.misceval.callsimArray(j.color,[new Sk.builtin.int_(0),new Sk.builtin.int_(0),new Sk.builtin.int_(0)]);return e.v=j.processing.blendColor(a.v,b.v,d.v),e}),j.brightness=new Sk.builtin.func(function(a,c,d){return"undefined"==typeof c?new Sk.builtin.float_(j.processing.brightness(a.v)):"undefined"==typeof d?new Sk.builtin.float_(j.processing.brightness(a.v,c.v)):new Sk.builtin.float_(j.processing.brightness(a.v,c.v,d.v))}),j.camera=new Sk.builtin.func(function(a,b,c,d,e,f,g,h,i){"undefined"==typeof a?j.processing.camera():j.processing.camera(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v,i.v)}),j.constrain=new Sk.builtin.func(function(a,b,c){return new Sk.builtin.float_(j.processing.constrain(a.v,b.v,c.v))}),j.copy=new Sk.builtin.func(function(a,b,c,d,e,f,g,h,i){other instanceof Sk.builtin.int_||other instanceof Sk.builtin.float_?j.processing.copy(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v):j.processing.copy(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v,i.v)}),j.createFont=new Sk.builtin.func(function(a,b,c,d){var e=Sk.misceval.callsimArray(j.PFont);return e.v="undefined"==typeof c?j.processing.createFont(a.v,b.v):"undefined"==typeof d?j.processing.createFont(a.v,b.v,c.v):j.processing.createFont(a.v,b.v,c.v,d.v),e}),j.createGraphics=new Sk.builtin.func(function(a,b,c,d){var e=Sk.misceval.callsimArray(j.PGraphics);return e.v="undefined"==typeof d?j.processing.createGraphics(a.v,b.v,c.v):j.processing.createGraphics(a.v,b.v,c.v,d.v),e}),j.createImage=new Sk.builtin.func(function(a,b,c){var d=Sk.misceval.callsimArray(j.PImage);return d.v=j.processing.createImage(a.v,b.v,c.v),d}),j.cursor=new Sk.builtin.func(function(a,b,c){"undefined"==typeof a?j.processing.cursor():"undefined"==typeof b?j.processing.cursor(a.v):"undefined"==typeof c?j.processing.cursor(a.v,b.v):j.processing.cursor(a.v,b.v,c.v)}),j.curve=new Sk.builtin.func(function(a,b,c,d,e,f,g,h,i,k,l,m){"undefined"==typeof i?j.processing.curve(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v):"undefined"==typeof k?j.processing.curve(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v,i.v):"undefined"==typeof l?j.processing.curve(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v,i.v,k.v):"undefined"==typeof m?j.processing.curve(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v,i.v,k.v,l.v):j.processing.curve(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v,i.v,k.v,l.v,m.v)}),j.curveDetail=new Sk.builtin.func(function(a){j.processing.curveDetail(a.v)}),j.curvePoint=new Sk.builtin.func(function(e,a,b,c,d){j.processing.curvePoint(e.v,a.v,b.v,c.v,d.v)}),j.curveTangent=new Sk.builtin.func(function(e,a,b,c,d){j.processing.curveTangent(e.v,a.v,b.v,c.v,d.v)}),j.curveTightness=new Sk.builtin.func(function(a){j.processing.curveTightness(a.v)}),j.curveVertex=new Sk.builtin.func(function(a,b,c){"undefined"==typeof c?j.processing.curveVertex(a.v,b.v):j.processing.curveVertex(a.v,b.v,c.v)}),j.day=new Sk.builtin.func(function(){return new Sk.builtin.int_(j.processing.day())}),j.degrees=new Sk.builtin.func(function(a){return new Sk.builtin.float_(j.processing.degrees(a.v))}),j.directionalLight=new Sk.builtin.func(function(a,b,c,d,e,f){j.processing.directionalLight(a.v,b.v,c.v,d.v,e.v,f.v)}),j.dist=new Sk.builtin.func(function(a,b,c,d,e,f){return"undefined"==typeof e?new Sk.builtin.float_(j.processing.dist(a.v,b.v,c.v,d.v)):"undefined"==typeof f?new Sk.builtin.float_(j.processing.dist(a.v,b.v,c.v,d.v,e.v)):new Sk.builtin.float_(j.processing.dist(a.v,b.v,c.v,d.v,e.v,f.v))}),j.emissive=new Sk.builtin.func(function(a,b,c){"undefined"==typeof b?j.processing.emissive(a.v):"undefined"==typeof c?j.processing.emissive(a.v,b.v):j.processing.emissive(a.v,b.v,c.v)}),j.endCamera=new Sk.builtin.func(function(){j.processing.endCamera()}),j.endShape=new Sk.builtin.func(function(a){"undefined"==typeof a?j.processing.endShape():j.processing.endShape(a.v)}),j.filter=new Sk.builtin.func(function(a,b){"undefined"==typeof b?j.processing.filter(a.v):j.processing.filter(a.v,b.v)}),j.frustum=new Sk.builtin.func(function(a,b,c,d,e,f){j.processing.frustum(a,b,c,d,e,f)}),j.hint=new Sk.builtin.func(function(a){j.processing.hint(a)}),j.hour=new Sk.builtin.func(function(){return new Sk.builtin.int_(j.processing.hour())}),j.hue=new Sk.builtin.func(function(a){return new Sk.builtin.float_(j.processing.hue(a.v))}),j.imageMode=new Sk.builtin.func(function(a){j.processing.imageMode(a.v)}),j.lerp=new Sk.builtin.func(function(a,b,c){return new Sk.builtin.float_(j.processing.lerp(a.v,b.v,c.v))}),j.lerpColor=new Sk.builtin.func(function(a,b,d){var e=Sk.misceval.callsimArray(j.color,[new Sk.builtin.int_(0),new Sk.builtin.int_(0),new Sk.builtin.int_(0)]);return e.v=j.processing.lerpColor(a.v,b.v,d.v),e}),j.lightFalloff=new Sk.builtin.func(function(a,b,c){j.processing.lightFalloff(a.v,b.v,c.v)}),j.lights=new Sk.builtin.func(function(){j.processing.lights()}),j.lightSpecular=new Sk.builtin.func(function(a,b,c){j.processing.lightSpecular(a.v,b.v,c.v)}),j.loadBytes=new Sk.builtin.func(function(a){return new Sk.builtin.list(j.processing.loadBytes(a.v))}),j.loadFont=new Sk.builtin.func(function(a){var b=Sk.misceval.callsimArray(j.PFont);return b.v=j.processing.loadFont(a.v),b}),j.loadShape=new Sk.builtin.func(function(a){var b=Sk.misceval.callsimArray(j.PShapeSVG,[new Sk.builtin.str("string"),a]);return b}),j.loadStrings=new Sk.builtin.func(function(a){return new Sk.builtin.list(j.processing.loadStrings(a.v))}),j.mag=new Sk.builtin.func(function(d,a,b){return"undefined"==typeof b?new Sk.builtin.float_(j.processing.mag(d.v,a.v)):new Sk.builtin.float_(j.processing.mag(d.v,a.v,b.v))}),j.map=new Sk.builtin.func(function(a,b,c,d,e){return new Sk.builtin.float_(j.processing.map(a.v,b.v,c.v,d.v,e.v))}),j.millis=new Sk.builtin.func(function(){return new Sk.builtin.int_(j.processing.millis())}),j.minute=new Sk.builtin.func(function(){return new Sk.builtin.int_(j.processing.minute())}),j.modelX=new Sk.builtin.func(function(a,b,c){return new Sk.builtin.float_(j.processing.modelX(a.v,b.v,c.v))}),j.modelY=new Sk.builtin.func(function(a,b,c){return new Sk.builtin.float_(j.processing.modelY(a.v,b.v,c.v))}),j.modelZ=new Sk.builtin.func(function(a,b,c){return new Sk.builtin.float_(j.processing.modelZ(a.v,b.v,c.v))}),j.month=new Sk.builtin.func(function(){return new Sk.builtin.int_(j.processing.month())}),j.noCursor=new Sk.builtin.func(function(){j.processing.noCursor()}),j.noise=new Sk.builtin.func(function(a,b,c){return"undefined"==typeof b?new Sk.builtin.float_(j.processing.noise(a.v)):"undefined"==typeof c?new Sk.builtin.float_(j.processing.noise(a.v,b.v)):new Sk.builtin.float_(j.processing.noise(a.v,b.v,c.v))}),j.noiseDetail=new Sk.builtin.func(function(a,b){j.processing.noiseDetail(a.v,b.v)}),j.noiseSeed=new Sk.builtin.func(function(a){return new Sk.builtin.float_(j.processing.noiseSeed(a.v))}),j.noLights=new Sk.builtin.func(function(){j.processing.noLights()}),j.norm=new Sk.builtin.func(function(a,b,c){return new Sk.builtin.float_(j.processing.norm(a.v,b.v,c.v))}),j.normal=new Sk.builtin.func(function(a,b,c){j.processing.normal(a.v,b.v,c.v)}),j.noTint=new Sk.builtin.func(function(){j.processing.noTint()}),j.ortho=new Sk.builtin.func(function(a,b,c,d,e,f){j.processing.ortho(a.v,b.v,c.v,d.v,e.v,f.v)}),j.perspective=new Sk.builtin.func(function(a,b,c,d){"undefined"==typeof a?j.processing.perspective():"undefined"==typeof b?j.processing.perspective(a.v):"undefined"==typeof c?j.processing.perspective(a.v,b.v):"undefined"==typeof d?j.processing.perspective(a.v,b.v,c.v):j.processing.perspective(a.v,b.v,c.v,d.v)}),j.pointLight=new Sk.builtin.func(function(a,b,c,d,e,f){j.processing.pointLight(a.v,b.v,c.v,d.v,e.v,f.v)}),j.printCamera=new Sk.builtin.func(function(){j.processing.printCamera()}),j.println=new Sk.builtin.func(function(a){j.processing.println(a.v)}),j.printProjection=new Sk.builtin.func(function(){j.processing.printProjection()}),j.radians=new Sk.builtin.func(function(a){return new Sk.builtin.float_(j.processing.radians(a.v))}),j.randomSeed=new Sk.builtin.func(function(a){return new Sk.builtin.float_(j.processing.randomSeed(a.v))}),j.random=new Sk.builtin.func(function(a,b){return"undefined"==typeof a?new Sk.builtin.float_(j.processing.random()):"undefined"==typeof b?new Sk.builtin.float_(j.processing.random(a.v)):new Sk.builtin.float_(j.processing.random(a.v,b.v))}),j.requestImage=new Sk.builtin.func(function(a,b){var c=Sk.misceval.callsimArray(j.PImage);return c.v="undefined"==typeof b?j.processing.requestImage(a.v):j.processing.requestImage(a.v,b.v),c}),j.saturation=new Sk.builtin.func(function(a){return new Sk.builtin.float_(j.processing.saturation(a.v))}),j.save=new Sk.builtin.func(function(a){j.processing.save(a.v)}),j.saveFrame=new Sk.builtin.func(function(a){"undefined"==typeof a?j.processing.saveFrame():j.processing.saveFrame(a.v)}),j.saveStrings=new Sk.builtin.func(function(a,b){j.processing.saveStrings(a.v,b.v)}),j.screenX=new Sk.builtin.func(function(a,b,c){return new Sk.builtin.float_(j.processing.screenX(a.v,b.v,c.v))}),j.screenY=new Sk.builtin.func(function(a,b,c){return new Sk.builtin.float_(j.processing.screenY(a.v,b.v,c.v))}),j.screenZ=new Sk.builtin.func(function(a,b,c){return new Sk.builtin.float_(j.processing.screenZ(a.v,b.v,c.v))}),j.second=new Sk.builtin.func(function(){return new Sk.builtin.int_(j.processing.second())}),j.shape=new Sk.builtin.func(function(a,b,c,d,e){"undefined"==typeof b?j.processing.shape(a.v):"undefined"==typeof c?j.processing.shape(a.v,b.v):"undefined"==typeof d?j.processing.shape(a.v,b.v,c.v):"undefined"==typeof e?j.processing.shape(a.v,b.v,c.v,d.v):j.processing.shape(a.v,b.v,c.v,d.v,e.v)}),j.shapeMode=new Sk.builtin.func(function(a){j.processing.shapeMode(a.v)}),j.shininess=new Sk.builtin.func(function(a){j.processing.shininess(a.v)}),j.specular=new Sk.builtin.func(function(a,b,c){"undefined"==typeof b?j.processing.specular(a.v):"undefined"==typeof c?j.processing.specular(a.v,b.v):j.processing.specular(a.v,b.v,c.v)}),j.spotLight=new Sk.builtin.func(function(a,b,c,d,e,f,g,h){j.processing.spotLight(a.v,b.v,c.v,d.v,e.v,f.v,g.v,h.v)}),j.sq=new Sk.builtin.func(function(a){return new Sk.builtin.float_(j.processing.sq(a))}),j.status=new Sk.builtin.func(function(a){j.processing.status(a.v)}),j.textAlign=new Sk.builtin.func(function(a,b){"undefined"==typeof b?j.processing.textAlign(a.v):j.processing.textAlign(a.v,b.v)}),j.textAscent=new Sk.builtin.func(function(){return new Sk.builtin.float_(j.processing.textAscent())}),j.textDescent=new Sk.builtin.func(function(){return new Sk.builtin.float_(j.processing.textDescent())}),j.textFont=new Sk.builtin.func(function(a,b){"undefined"==typeof b?j.processing.textFont(a.v):j.processing.textFont(a.v,b.v)}),j.textLeading=new Sk.builtin.func(function(a){j.processing.textLeading(a.v)}),j.textMode=new Sk.builtin.func(function(a){j.processing.textMode(a.v)}),j.textSize=new Sk.builtin.func(function(a){j.processing.textSize(a.v)}),j.texture=new Sk.builtin.func(function(a){j.processing.texture(a.v)}),j.textureMode=new Sk.builtin.func(function(a){j.processing.textureMode(a.v)}),j.textWidth=new Sk.builtin.func(function(a){return new Sk.builtin.float_(j.processing.textWidth(a.v))}),j.tint=new Sk.builtin.func(function(a,b,c,d){"undefined"==typeof b?j.processing.tint(a.v):"undefined"==typeof c?j.processing.tint(a.v,b.v):"undefined"==typeof d?j.processing.tint(a.v,b.v,c.v):j.processing.tint(a.v,b.v,c.v,d.v)}),j.updatePixels=new Sk.builtin.func(function(){j.processing.updatePixels()}),j.vertex=new Sk.builtin.func(function(a,b,c,d,e){"undefined"==typeof c?j.processing.vertex(a.v,b.v):"undefined"==typeof d?j.processing.vertex(a.v,b.v,c.v):"undefined"==typeof e?j.processing.vertex(a.v,b.v,c.v,d.v):j.processing.vertex(a.v,b.v,c.v,d.v,e.v)}),j.year=new Sk.builtin.func(function(){return new Sk.builtin.int_(j.processing.year())}),j.box=new Sk.builtin.func(function(a){j.processing.box(a.v)}),j.sphere=new Sk.builtin.func(function(a){j.processing.sphere(a.v)}),j.sphereDetail=new Sk.builtin.func(function(a,b){"undefined"==typeof b?j.processing.sphereDetail(a.v):j.processing.sphereDetail(a.v,b.v)}),j.background=new Sk.builtin.func(function(a,c,d){"undefined"!=typeof c&&(c=c.v),"undefined"!=typeof d&&(d=d.v),j.processing.background(a.v,c,d)}),j.fill=new Sk.builtin.func(function(a,c,d,e){"undefined"!=typeof c&&(c=c.v),"undefined"!=typeof d&&(d=d.v),"undefined"!=typeof e&&(e=e.v),j.processing.fill(a.v,c,d,e)}),j.stroke=new Sk.builtin.func(function(a,c,d,e){"undefined"!=typeof c&&(c=c.v),"undefined"!=typeof d&&(d=d.v),"undefined"!=typeof e&&(e=e.v),j.processing.stroke(a.v,c,d,e)}),j.noStroke=new Sk.builtin.func(function(){j.processing.noStroke()}),j.colorMode=new Sk.builtin.func(function(a,b,c,d,e){b="undefined"==typeof b?255:b.v,"undefined"!=typeof c&&(c=c.v),"undefined"!=typeof d&&(d=d.v),"undefined"!=typeof e&&(e=e.v),j.processing.colorMode(a.v,b,c,d,e)}),j.noFill=new Sk.builtin.func(function(){j.processing.noFill()}),j.loop=new Sk.builtin.func(function(){if(null===j.processing)throw new Sk.builtin.Exception("loop() should be called after run()");l=!0,j.processing.loop()}),j.noLoop=new Sk.builtin.func(function(){if(null===j.processing)throw new Sk.builtin.Exception("noLoop() should be called after run()");l=!1,j.processing.noLoop()}),j.frameRate=new Sk.builtin.func(function(a){j.processing.frameRate(a.v)}),j.width=new Sk.builtin.int_(0),j.height=new Sk.builtin.int_(0),j.renderMode=j.P2D,j.size=new Sk.builtin.func(function(a,b,c){"undefined"==typeof c&&(c=j.P2D),j.processing.size(a.v,b.v,c.v),j.width=new Sk.builtin.int_(j.processing.width),j.height=new Sk.builtin.int_(j.processing.height),j.renderMode=c}),j.exitp=new Sk.builtin.func(function(){j.processing.exit()}),j.mouseX=new Sk.builtin.func(function(){return new Sk.builtin.int_(j.processing.mouseX)}),j.mouseY=new Sk.builtin.func(function(){return new Sk.builtin.int_(j.processing.mouseY)}),j.pmouseX=new Sk.builtin.func(function(){return new Sk.builtin.int_(j.processing.pmouseX)}),j.pmouseY=new Sk.builtin.func(function(){return new Sk.builtin.int_(j.processing.pmouseY)}),j.rectMode=new Sk.builtin.func(function(a){j.processing.rectMode(a.v)}),j.strokeWeight=new Sk.builtin.func(function(a){j.processing.strokeWeight(a.v)}),j.smooth=new Sk.builtin.func(function(){j.processing.smooth()}),j.noSmooth=new Sk.builtin.func(function(){j.processing.noSmooth()}),j.ellipseMode=new Sk.builtin.func(function(a){j.processing.ellipseMode(a.v)}),j.strokeCap=new Sk.builtin.func(function(a){j.processing.strokeCap(a.v)}),j.strokeJoin=new Sk.builtin.func(function(a){j.processing.strokeJoin(a.v)}),j.rotate=new Sk.builtin.func(function(a){j.processing.rotate(a.v)}),j.rotateX=new Sk.builtin.func(function(a){j.processing.rotateX(a.v)}),j.rotateY=new Sk.builtin.func(function(a){j.processing.rotateY(a.v)}),j.rotateZ=new Sk.builtin.func(function(a){j.processing.rotateZ(a.v)}),j.scale=new Sk.builtin.func(function(a,b,c){b="undefined"==typeof b?1:b.v,c="undefined"==typeof c?1:c.v,j.processing.scale(a.v,b,c)}),j.translate=new Sk.builtin.func(function(a,b,c){b="undefined"==typeof b?1:b.v,c="undefined"==typeof c?1:c.v,j.processing.translate(a.v,b,c)}),j.popMatrix=new Sk.builtin.func(function(){j.processing.popMatrix()}),j.pushMatrix=new Sk.builtin.func(function(){j.processing.pushMatrix()}),j.applyMatrix=new Sk.builtin.func(function(){var a,b=Array.prototype.slice.call(arguments,0,16);for(a=0;a<b.length;a++)b[a]="undefined"==typeof b[a]?0:b[a].v;j.processing.applyMatrix.apply(j.processing,b)}),j.resetMatrix=new Sk.builtin.func(function(){j.processing.resetMatrix()}),j.printMatrix=new Sk.builtin.func(function(){return Sk.ffi.remapToPy(j.processing.printMatrix())}),j.run=new Sk.builtin.func(function(){var a=document.getElementById(Sk.canvas);if(!a)throw new Error("Processing module: Canvas element not specified");if(window.Processing.logger={log:function(a){Sk.misceval.print_(a)}},m=window.Processing.getInstanceById(Sk.canvas),m&&m.exit(),j.p=new window.Processing(a,function sketchProc(a){j.processing=a,a.draw=function(){var b=!1;for(var c in k)0===k[c].width&&(b=!0);if(!0==b)return!0===l?void 0:void a.loop();if(!1===l&&a.noLoop(),j.frameCount=a.frameCount,Sk.globals.draw)try{Sk.misceval.callsimArray(Sk.globals.draw)}catch(a){Sk.uncaughtException(a)}};var b=["setup","mouseMoved","mouseClicked","mouseDragged","mouseMoved","mouseOut","mouseOver","mousePressed","mouseReleased","keyPressed","keyReleased","keyTyped"];for(var c in b)Sk.globals[b[c]]&&(a[b[c]]=new Function("try {Sk.misceval.callsimArray(Sk.globals[\'"+b[c]+"\']);} catch(e) {Sk.uncaughtException(e);}"))}),0===j.width.v&&0===j.height.v){var b=a.offsetWidth,c=a.offsetHeight;Sk.misceval.callsimArray(j.size,[new Sk.builtin.int_(b),new Sk.builtin.int_(c),j.renderMode])}}),g=function(a,b){b.__getattr__=new Sk.builtin.func(function(a,b){return(b=Sk.ffi.remapToJs(b),"x"===b)?Sk.builtin.assk$(j.processing.mouseX):"y"===b?Sk.builtin.assk$(j.processing.mouseY):"px"===b?Sk.builtin.assk$(j.processing.pmouseX):"py"===b?Sk.builtin.assk$(j.processing.pmouseY):"pressed"===b?new Sk.builtin.bool(j.processing.__mousePressed):"button"===b?Sk.builtin.assk$(j.processing.mouseButton):void 0})},j.Mouse=Sk.misceval.buildClass(j,g,"Mouse",[]),j.mouse=Sk.misceval.callsimArray(j.Mouse),f=function(a,b){b.__getattr__=new Sk.builtin.func(function(a,b){return(b=Sk.ffi.remapToJs(b),"key"===b)?new Sk.builtin.str(j.processing.key.toString()):"keyCode"===b?Sk.builtin.assk$(j.processing.keyCode):"keyPressed"===b?new Sk.builtin.str(j.processing.keyPressed):void 0})},j.Keyboard=Sk.misceval.buildClass(j,f,"Keyboard",[]),j.keyboard=Sk.misceval.callsimArray(j.Keyboard),e=function(a,b){b.__getattr__=new Sk.builtin.func(function(a,b){return(b=Sk.ffi.remapToJs(b),"frameCount"===b)?Sk.builtin.assk$(j.processing.frameCount):"frameRate"===b?Sk.builtin.assk$(j.processing.frameRate):"height"===b?Sk.builtin.assk$(j.processing.height):"width"===b?Sk.builtin.assk$(j.processing.width):"online"===b?new Sk.builtin.bool(j.processing.online):"focused"===b?new Sk.builtin.bool(j.processing.focused):void 0})},j.Environment=Sk.misceval.buildClass(j,e,"Environment",[]),j.environment=Sk.misceval.callsimArray(j.Environment),d=function(a,b){b.__init__=new Sk.builtin.func(function(a){a.pixels=null}),b.__getattr__=new Sk.builtin.func(function(a,b){return(b=Sk.ffi.remapToJs(b),"height"===b)?Sk.builtin.assk$(j.processing.height):"width"===b?Sk.builtin.assk$(j.processing.width):("pixels"===b&&null==a.pixels&&(a.pixels=new Sk.builtin.list(j.processing.pixels.toArray())),a.pixels)})},j.Screen=Sk.misceval.buildClass(j,d,"Screen",[]),j.screen=Sk.misceval.callsimArray(j.Screen),j.loadPixels=new Sk.builtin.func(function(){j.processing.loadPixels()}),c=function(a,b){b.__init__=new Sk.builtin.func(function(a,b,c,d,e){"undefined"!=typeof c&&(c=c.v),"undefined"!=typeof d&&(d=d.v),"undefined"!=typeof e&&(e=e.v),a.v=j.processing.color(b.v,c,d,e)})},j.color=Sk.misceval.buildClass(j,c,"color",[]),j.red=new Sk.builtin.func(function(a){return new Sk.builtin.int_(j.processing.red(a.v))}),j.green=new Sk.builtin.func(function(a){return new Sk.builtin.int_(j.processing.green(a.v))}),j.blue=new Sk.builtin.func(function(a){return new Sk.builtin.int_(j.processing.blue(a.v))}),b=function(a,b){b.__init__=new Sk.builtin.func(function(a,b,c,d){a.v="undefined"==typeof b?new j.processing.PImage:"undefined"==typeof c?new j.processing.PImage(b.v):"undefined"==typeof d?new j.processing.PImage(b.v,c.v):new j.processing.PImage(b.v,c.v,d.v)}),b.__getattr__=new Sk.builtin.func(function(a,b){return b=Sk.ffi.remapToJs(b),"width"===b?Sk.builtin.assk$(a.v.width):"height"===b?Sk.builtin.assk$(a.v.height):void 0})},j.loadImage=new Sk.builtin.func(function(a){var b=j.processing.loadImage(a.v);k.push(b);var c=Sk.misceval.callsimArray(j.PImage);return c.v=b,c}),j.image=new Sk.builtin.func(function(a,b,c,d,e){"undefined"==typeof d?j.processing.image(a.v,b.v,c.v):j.processing.image(a.v,b.v,c.v,d.v,e.v)}),j.get=new Sk.builtin.func(function(a,b){var c=j.processing.get(a.v,b.v);return Sk.misceval.callsimArray(j.color,[new Sk.builtin.int_(j.processing.red(c)),new Sk.builtin.int_(j.processing.green(c)),new Sk.builtin.int_(j.processing.blue(c))])}),j.set=new Sk.builtin.func(function(a,b,c){j.processing.set(a.v,b.v,c.v)}),h=function(a,b){b.__init__=new Sk.builtin.func(function(a,b,c,d){a.v="undefined"==typeof b?new j.processing.PVector:"undefined"==typeof d?new j.processing.PVector(b.v,c.v):new j.processing.PVector(b.v,c.v,d.v)}),b.__getattr__=new Sk.builtin.func(function(a,b){return(b=Sk.ffi.remapToJs(b),"x"===b)?Sk.builtin.assk$(a.v.x):"y"===b?Sk.builtin.assk$(a.v.y):"z"===b?Sk.builtin.assk$(a.v.z):void 0}),b.get=new Sk.builtin.func(function(a){var b=Sk.misceval.callsimArray(j.PVector);return b.v=a.v.get(),b}),b.set=new Sk.builtin.func(function(a,b,c,d){"undefined"==typeof d?a.v.set(b.v,c.v):a.v.set(b.v,c.v,d.v)}),b.mag=new Sk.builtin.func(function(a){return Sk.builtin.assk$(a.v.mag())}),b.add=new Sk.builtin.func(function(a,b){var c=Sk.misceval.callsimArray(j.PVector);return c.v=a.v.add(b.v),c}),b.sub=new Sk.builtin.func(function(a,b){var c=Sk.misceval.callsimArray(j.PVector);return c.v=a.v.sub(b.v),c}),b.mult=new Sk.builtin.func(function(a,b){var c=Sk.misceval.callsimArray(j.PVector);return c.v=a.v.mult(b.v),c}),b.div=new Sk.builtin.func(function(a,b){var c=Sk.misceval.callsimArray(j.PVector);return c.v=a.v.div(b.v),c}),b.dist=new Sk.builtin.func(function(a,b){return Sk.builtin.assk$(a.v.dist(b.v))}),b.dot=new Sk.builtin.func(function(a,b,c,d){return"undefined"==typeof c?Sk.builtin.assk$(a.v.dot(b.v)):Sk.builtin.assk$(a.v.dot(b.v,c.v,d.v))}),b.cross=new Sk.builtin.func(function(a,b){var c=Sk.misceval.callsimArray(j.PVector);return c.v=a.v.cross(b.v),c}),b.normalize=new Sk.builtin.func(function(a){a.v.normalize()}),b.limit=new Sk.builtin.func(function(a,b){a.v.limit(b.v)}),b.angleBetween=new Sk.builtin.func(function(a,b){return Sk.builtin.assk$(a.v.angleBetween(b.v))}),b.array=new Sk.builtin.func(function(a){return new Sk.builtin.list(a.v.array())})},fontClass=function(a,b){b.__init__=new Sk.builtin.func(function(a,b){a.v="undefined"==typeof b?new j.processing.PFont:new j.processing.PVector(b.v)}),b.list=new Sk.builtin.func(function(a){return new Sk.builtin.list(a.v.list())})},graphicsClass=function(a,b){b.__init__=new Sk.builtin.func(function(a,b,c,d){a.v="undefined"==typeof b?new j.processing.PVector:"undefined"==typeof d?new j.processing.PVector(b.v,c.v):new j.processing.PVector(b.v,c.v,d.v)}),b.beginDraw=new Sk.builtin.func(function(a){a.v.beginDraw()}),b.endDraw=new Sk.builtin.func(function(a){a.v.endDraw()})},shapeClass=function(a,b){b.__init__=new Sk.builtin.func(function(a,b,c,d){a.v="undefined"==typeof b?null:"undefined"==typeof c?new j.processing.PShapeSVG(b.v):"undefined"==typeof d?new j.processing.PShapeSVG(b.v,c.v):new j.processing.PShapeSVG(b.v,c.v,d.v)}),b.__getattr__=new Sk.builtin.func(function(a,b){return(b=Sk.ffi.remapToJs(b),"width"===b)?Sk.builtin.assk$(a.v.width):"height"===b?Sk.builtin.assk$(a.v.height):void 0}),b.isVisible=new Sk.builtin.func(function(a){return new Sk.builtin.bool(a.v.isVisible())}),b.setVisible=new Sk.builtin.func(function(a,b){a.v.setVisible(b.v)}),b.disableStyle=new Sk.builtin.func(function(a){a.v.disableStyle()}),b.enableStyle=new Sk.builtin.func(function(a){a.v.enableStyle()}),b.getChild=new Sk.builtin.func(function(a,b){var c=a.v.getChild(b.v);if(null!=c){var d=Sk.misceval.callsimArray(j.PShapeSVG);return d.v=c,d}return null}),b.translate=new Sk.builtin.func(function(a,b,c,d){"undefined"==typeof d?a.v.translate(b.v,c.v):a.v.translate(b.v,c.v,d.v)}),b.rotate=new Sk.builtin.func(function(a,b){a.v.rotate(b.v)}),b.rotateX=new Sk.builtin.func(function(a,b){a.v.rotateX(b.v)}),b.rotateY=new Sk.builtin.func(function(a){a.v.rotateY(angle.v)}),b.rotateZ=new Sk.builtin.func(function(a){a.v.rotateZ(angle.v)}),b.scale=new Sk.builtin.func(function(a,b,c,d){"undefined"==typeof c?a.v.scale(b.v):"undefined"==typeof d?a.v.scale(b.v,c.v):a.v.scale(b.v,c.v,d.v)})},j.PFont=Sk.misceval.buildClass(j,fontClass,"PFont",[]),j.PGraphics=Sk.misceval.buildClass(j,graphicsClass,"PGraphics",[]),j.PShapeSVG=Sk.misceval.buildClass(j,shapeClass,"PShapeSVG",[]),j.PVector=Sk.misceval.buildClass(j,h,"PVector",[]),j.PImage=Sk.misceval.buildClass(j,b,"PImage",[]),j};',"src/lib/profile.py":'raise NotImplementedError("profile is not yet implemented in Skulpt")\n',"src/lib/pstats.py":'raise NotImplementedError("pstats is not yet implemented in Skulpt")\n',"src/lib/pty.py":'raise NotImplementedError("pty is not yet implemented in Skulpt")\n',"src/lib/py_compile.py":'raise NotImplementedError("py_compile is not yet implemented in Skulpt")\n',"src/lib/pyclbr.py":'raise NotImplementedError("pyclbr is not yet implemented in Skulpt")\n',"src/lib/pydoc.py":'raise NotImplementedError("pydoc is not yet implemented in Skulpt")\n',"src/lib/pydoc_topics.py":'raise NotImplementedError("pydoc_topics is not yet implemented in Skulpt")\n',"src/lib/pythonds/__init__.py":"","src/lib/pythonds/basic/__init__.py":'\n#__all__ = ["stack"]\n\n\n#from .stack import Stack\n#from .queue import Queue\n\n\n\n',"src/lib/pythonds/basic/deque.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n#deque.py\n\n\nclass Deque:\n    def __init__(self):\n        self.items = []\n\n    def isEmpty(self):\n        return self.items == []\n\n    def addFront(self, item):\n        self.items.append(item)\n\n    def addRear(self, item):\n        self.items.insert(0,item)\n\n    def removeFront(self):\n        return self.items.pop()\n\n    def removeRear(self):\n        return self.items.pop(0)\n\n    def size(self):\n        return len(self.items)\n","src/lib/pythonds/basic/queue.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n#queue.py\n\nclass Queue:\n    def __init__(self):\n        self.items = []\n\n    def isEmpty(self):\n        return self.items == []\n\n    def enqueue(self, item):\n        self.items.insert(0,item)\n\n    def dequeue(self):\n        return self.items.pop()\n\n    def size(self):\n        return len(self.items)\n","src/lib/pythonds/basic/stack.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n#stack.py\n\nclass Stack:\n    def __init__(self):\n        self.items = []\n\n    def isEmpty(self):\n        return self.items == []\n\n    def push(self, item):\n        self.items.append(item)\n\n    def pop(self):\n        return self.items.pop()\n\n    def peek(self):\n        return self.items[len(self.items)-1]\n\n    def size(self):\n        return len(self.items)\n\n","src/lib/pythonds/graphs/__init__.py":"\n\nfrom .adjGraph import Graph\nfrom .adjGraph import Vertex\nfrom .priorityQueue import PriorityQueue\n","src/lib/pythonds/graphs/adjGraph.py":'#\n#  adjGraph\n#\n#  Created by Brad Miller on 2005-02-24.\n#  Copyright (c) 2005 Brad Miller, David Ranum, Luther College. All rights reserved.\n#\n\nimport sys\nimport os\nimport unittest\n\nclass Graph:\n    def __init__(self):\n        self.vertices = {}\n        self.numVertices = 0\n        \n    def addVertex(self,key):\n        self.numVertices = self.numVertices + 1\n        newVertex = Vertex(key)\n        self.vertices[key] = newVertex\n        return newVertex\n    \n    def getVertex(self,n):\n        if n in self.vertices:\n            return self.vertices[n]\n        else:\n            return None\n\n    def __contains__(self,n):\n        return n in self.vertices\n    \n    def addEdge(self,f,t,cost=0):\n            if f not in self.vertices:\n                nv = self.addVertex(f)\n            if t not in self.vertices:\n                nv = self.addVertex(t)\n            self.vertices[f].addNeighbor(self.vertices[t],cost)\n    \n    def getVertices(self):\n        return list(self.vertices.keys())\n        \n    def __iter__(self):\n        return iter(self.vertices.values())\n                \nclass Vertex:\n    def __init__(self,num):\n        self.id = num\n        self.connectedTo = {}\n        self.color = \'white\'\n        self.dist = sys.maxsize\n        self.pred = None\n        self.disc = 0\n        self.fin = 0\n\n    # def __lt__(self,o):\n    #     return self.id < o.id\n    \n    def addNeighbor(self,nbr,weight=0):\n        self.connectedTo[nbr] = weight\n        \n    def setColor(self,color):\n        self.color = color\n        \n    def setDistance(self,d):\n        self.dist = d\n\n    def setPred(self,p):\n        self.pred = p\n\n    def setDiscovery(self,dtime):\n        self.disc = dtime\n        \n    def setFinish(self,ftime):\n        self.fin = ftime\n        \n    def getFinish(self):\n        return self.fin\n        \n    def getDiscovery(self):\n        return self.disc\n        \n    def getPred(self):\n        return self.pred\n        \n    def getDistance(self):\n        return self.dist\n        \n    def getColor(self):\n        return self.color\n    \n    def getConnections(self):\n        return self.connectedTo.keys()\n        \n    def getWeight(self,nbr):\n        return self.connectedTo[nbr]\n                \n    def __str__(self):\n        return str(self.id) + ":color " + self.color + ":disc " + str(self.disc) + ":fin " + str(self.fin) + ":dist " + str(self.dist) + ":pred \\n\\t[" + str(self.pred)+ "]\\n"\n    \n    def getId(self):\n        return self.id\n\nclass adjGraphTests(unittest.TestCase):\n    def setUp(self):\n        self.tGraph = Graph()\n        \n    def testMakeGraph(self):\n        gFile = open("test.dat")\n        for line in gFile:\n            fVertex, tVertex = line.split(\'|\')\n            fVertex = int(fVertex)\n            tVertex = int(tVertex)\n            self.tGraph.addEdge(fVertex,tVertex)\n        for i in self.tGraph:\n            adj = i.getAdj()\n            for k in adj:\n                print(i, k)\n\n        \nif __name__ == \'__main__\':\n    unittest.main()\n              \n',"src/lib/pythonds/graphs/priorityQueue.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \nimport unittest\n\n# this implementation of binary heap takes key value pairs,\n# we will assume that the keys are all comparable\n\nclass PriorityQueue:\n    def __init__(self):\n        self.heapArray = [(0,0)]\n        self.currentSize = 0\n\n    def buildHeap(self,alist):\n        self.currentSize = len(alist)\n        self.heapArray = [(0,0)]\n        for i in alist:\n            self.heapArray.append(i)\n        i = len(alist) // 2            \n        while (i > 0):\n            self.percDown(i)\n            i = i - 1\n                        \n    def percDown(self,i):\n        while (i * 2) <= self.currentSize:\n            mc = self.minChild(i)\n            if self.heapArray[i][0] > self.heapArray[mc][0]:\n                tmp = self.heapArray[i]\n                self.heapArray[i] = self.heapArray[mc]\n                self.heapArray[mc] = tmp\n            i = mc\n                \n    def minChild(self,i):\n        if i*2 > self.currentSize:\n            return -1\n        else:\n            if i*2 + 1 > self.currentSize:\n                return i*2\n            else:\n                if self.heapArray[i*2][0] < self.heapArray[i*2+1][0]:\n                    return i*2\n                else:\n                    return i*2+1\n\n    def percUp(self,i):\n        while i // 2 > 0:\n            if self.heapArray[i][0] < self.heapArray[i//2][0]:\n               tmp = self.heapArray[i//2]\n               self.heapArray[i//2] = self.heapArray[i]\n               self.heapArray[i] = tmp\n            i = i//2\n \n    def add(self,k):\n        self.heapArray.append(k)\n        self.currentSize = self.currentSize + 1\n        self.percUp(self.currentSize)\n\n    def delMin(self):\n        retval = self.heapArray[1][1]\n        self.heapArray[1] = self.heapArray[self.currentSize]\n        self.currentSize = self.currentSize - 1\n        self.heapArray.pop()\n        self.percDown(1)\n        return retval\n        \n    def isEmpty(self):\n        if self.currentSize == 0:\n            return True\n        else:\n            return False\n\n    def decreaseKey(self,val,amt):\n        # this is a little wierd, but we need to find the heap thing to decrease by\n        # looking at its value\n        done = False\n        i = 1\n        myKey = 0\n        while not done and i <= self.currentSize:\n            if self.heapArray[i][1] == val:\n                done = True\n                myKey = i\n            else:\n                i = i + 1\n        if myKey > 0:\n            self.heapArray[myKey] = (amt,self.heapArray[myKey][1])\n            self.percUp(myKey)\n            \n    def __contains__(self,vtx):\n        for pair in self.heapArray:\n            if pair[1] == vtx:\n                return True\n        return False\n        \nclass TestBinHeap(unittest.TestCase):\n    def setUp(self):\n        self.theHeap = PriorityQueue()\n        self.theHeap.add((2,'x'))\n        self.theHeap.add((3,'y'))\n        self.theHeap.add((5,'z'))\n        self.theHeap.add((6,'a'))\n        self.theHeap.add((4,'d'))\n\n\n    def testInsert(self):\n        assert self.theHeap.currentSize == 5\n\n    def testDelmin(self):\n        assert self.theHeap.delMin() == 'x'\n        assert self.theHeap.delMin() == 'y'\n    \n    def testDecKey(self):\n        self.theHeap.decreaseKey('d',1)\n        assert self.theHeap.delMin() == 'd'\n        \nif __name__ == '__main__':\n    unittest.main()\n","src/lib/pythonds/trees/__init__.py":"\n# from .binaryTree import BinaryTree\n# from .balance import AVLTree\n# from .bst import BinarySearchTree\n# from .binheap import BinHeap\n\n\n","src/lib/pythonds/trees/balance.py":"#!/bin/env python3.1\n# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005, 2010\n# \n\nfrom .bst import BinarySearchTree, TreeNode\n\nclass AVLTree(BinarySearchTree):\n    '''\n    Author:  Brad Miller\n    Date:  1/15/2005\n    Description:  Imlement a binary search tree with the following interface\n                  functions:  \n                  __contains__(y) <==> y in x\n                  __getitem__(y) <==> x[y]\n                  __init__()\n                  __len__() <==> len(x)\n                  __setitem__(k,v) <==> x[k] = v\n                  clear()\n                  get(k)\n                  has_key(k)\n                  items() \n                  keys() \n                  values()\n                  put(k,v)\n    '''\n\n\n    def _put(self,key,val,currentNode):\n        if key < currentNode.key:\n            if currentNode.hasLeftChild():\n                self._put(key,val,currentNode.leftChild)\n            else:\n                currentNode.leftChild = TreeNode(key,val,parent=currentNode)\n                self.updateBalance(currentNode.leftChild)\n        else:\n            if currentNode.hasRightChild():\n                self._put(key,val,currentNode.rightChild)\n            else:\n                currentNode.rightChild = TreeNode(key,val,parent=currentNode)\n                self.updateBalance(currentNode.rightChild)                \n\n    def updateBalance(self,node):\n        if node.balanceFactor > 1 or node.balanceFactor < -1:\n            self.rebalance(node)\n            return\n        if node.parent != None:\n            if node.isLeftChild():\n                node.parent.balanceFactor += 1\n            elif node.isRightChild():\n                node.parent.balanceFactor -= 1\n\n            if node.parent.balanceFactor != 0:\n                self.updateBalance(node.parent)\n\n    def rebalance(self,node):\n        if node.balanceFactor < 0:\n            if node.rightChild.balanceFactor > 0:\n                # Do an LR Rotation\n                self.rotateRight(node.rightChild)\n                self.rotateLeft(node)\n            else:\n                # single left\n                self.rotateLeft(node)\n        elif node.balanceFactor > 0:\n            if node.leftChild.balanceFactor < 0:\n                # Do an RL Rotation\n                self.rotateLeft(node.leftChild)\n                self.rotateRight(node)\n            else:\n                # single right\n                self.rotateRight(node)\n\n    def rotateLeft(self,rotRoot):\n        newRoot = rotRoot.rightChild\n        rotRoot.rightChild = newRoot.leftChild\n        if newRoot.leftChild != None:\n            newRoot.leftChild.parent = rotRoot\n        newRoot.parent = rotRoot.parent\n        if rotRoot.isRoot():\n            self.root = newRoot\n        else:\n            if rotRoot.isLeftChild():\n                rotRoot.parent.leftChild = newRoot\n            else:\n                rotRoot.parent.rightChild = newRoot\n        newRoot.leftChild = rotRoot\n        rotRoot.parent = newRoot\n        rotRoot.balanceFactor = rotRoot.balanceFactor + 1 - min(newRoot.balanceFactor, 0)\n        newRoot.balanceFactor = newRoot.balanceFactor + 1 + max(rotRoot.balanceFactor, 0)\n\n\n    def rotateRight(self,rotRoot):\n        newRoot = rotRoot.leftChild\n        rotRoot.leftChild = newRoot.rightChild\n        if newRoot.rightChild != None:\n            newRoot.rightChild.parent = rotRoot\n        newRoot.parent = rotRoot.parent\n        if rotRoot.isRoot():\n            self.root = newRoot\n        else:\n            if rotRoot.isRightChild():\n                rotRoot.parent.rightChild = newRoot\n            else:\n                rotRoot.parent.leftChild = newRoot\n        newRoot.rightChild = rotRoot\n        rotRoot.parent = newRoot\n        rotRoot.balanceFactor = rotRoot.balanceFactor - 1 - max(newRoot.balanceFactor, 0)\n        newRoot.balanceFactor = newRoot.balanceFactor - 1 + min(rotRoot.balanceFactor, 0)\n        \n","src/lib/pythonds/trees/binaryTree.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n\nclass BinaryTree:\n    \"\"\"\n    A recursive implementation of Binary Tree\n    Using links and Nodes approach.\n    \"\"\"    \n    def __init__(self,rootObj):\n        self.key = rootObj\n        self.leftChild = None\n        self.rightChild = None\n\n    def insertLeft(self,newNode):\n        if self.leftChild == None:\n            self.leftChild = BinaryTree(newNode)\n        else:\n            t = BinaryTree(newNode)\n            t.left = self.leftChild\n            self.leftChild = t\n    \n    def insertRight(self,newNode):\n        if self.rightChild == None:\n            self.rightChild = BinaryTree(newNode)\n        else:\n            t = BinaryTree(newNode)\n            t.right = self.rightChild\n            self.rightChild = t\n\n    def isLeaf(self):\n        return ((not self.leftChild) and (not self.rightChild))\n\n    def getRightChild(self):\n        return self.rightChild\n\n    def getLeftChild(self):\n        return self.leftChild\n\n    def setRootVal(self,obj):\n        self.key = obj\n\n    def getRootVal(self,):\n        return self.key\n\n    def inorder(self):\n        if self.leftChild:\n            self.leftChild.inorder()\n        print(self.key)\n        if self.rightChild:\n            self.rightChild.inorder()\n\n    def postorder(self):\n        if self.leftChild:\n            self.leftChild.postorder()\n        if self.rightChild:\n            self.rightChild.postorder()\n        print(self.key)\n\n\n    def preorder(self):\n        print(self.key)\n        if self.leftChild:\n            self.leftChild.preorder()\n        if self.rightChild:\n            self.rightChild.preorder()\n\n    def printexp(self):\n        if self.leftChild:\n            print('(')\n            self.leftChild.printexp()\n        print(self.key)\n        if self.rightChild:\n            self.rightChild.printexp()\n            print(')')\n\n    def postordereval(self):\n        opers = {'+':operator.add, '-':operator.sub, '*':operator.mul, '/':operator.truediv}\n        res1 = None\n        res2 = None\n        if self.leftChild:\n            res1 = self.leftChild.postordereval()  #// \\label{peleft}\n        if self.rightChild:\n            res2 = self.rightChild.postordereval() #// \\label{peright}\n        if res1 and res2:\n            return opers[self.key](res1,res2) #// \\label{peeval}\n        else:\n            return self.key\n\ndef inorder(tree):\n    if tree != None:\n        inorder(tree.getLeftChild())\n        print(tree.getRootVal())\n        inorder(tree.getRightChild())\n\ndef printexp(tree):\n    if tree.leftChild:\n        print('(')\n        printexp(tree.getLeftChild())\n    print(tree.getRootVal())\n    if tree.rightChild:\n        printexp(tree.getRightChild())\n        print(')') \n\ndef printexp(tree):\n    sVal = \"\"\n    if tree:\n        sVal = '(' + printexp(tree.getLeftChild())\n        sVal = sVal + str(tree.getRootVal())\n        sVal = sVal + printexp(tree.getRightChild()) + ')'\n    return sVal\n\ndef postordereval(tree):\n    opers = {'+':operator.add, '-':operator.sub, '*':operator.mul, '/':operator.truediv}\n    res1 = None\n    res2 = None\n    if tree:\n        res1 = postordereval(tree.getLeftChild())  #// \\label{peleft}\n        res2 = postordereval(tree.getRightChild()) #// \\label{peright}\n        if res1 and res2:\n            return opers[tree.getRootVal()](res1,res2) #// \\label{peeval}\n        else:\n            return tree.getRootVal()\n\ndef height(tree):\n    if tree == None:\n        return -1\n    else:\n        return 1 + max(height(tree.leftChild),height(tree.rightChild))\n\n# t = BinaryTree(7)\n# t.insertLeft(3)\n# t.insertRight(9)\n# inorder(t)\n# import operator\n# x = BinaryTree('*')\n# x.insertLeft('+')\n# l = x.getLeftChild()\n# l.insertLeft(4)\n# l.insertRight(5)\n# x.insertRight(7)\n# print(printexp(x))\n# print(postordereval(x))\n# print(height(x))\n","src/lib/pythonds/trees/binheap.py":"# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005\n# \n\n# this heap takes key value pairs, we will assume that the keys are integers\nclass BinHeap:\n    def __init__(self):\n        self.heapList = [0]\n        self.currentSize = 0\n\n\n    def buildHeap(self,alist):\n        i = len(alist) // 2\n        self.currentSize = len(alist)\n        self.heapList = [0] + alist[:]\n        print(len(self.heapList), i)\n        while (i > 0):\n            print(self.heapList, i)\n            self.percDown(i)\n            i = i - 1\n        print(self.heapList,i)\n                        \n    def percDown(self,i):\n        while (i * 2) <= self.currentSize:\n            mc = self.minChild(i)\n            if self.heapList[i] > self.heapList[mc]:\n                tmp = self.heapList[i]\n                self.heapList[i] = self.heapList[mc]\n                self.heapList[mc] = tmp\n            i = mc\n                \n    def minChild(self,i):\n        if i * 2 + 1 > self.currentSize:\n            return i * 2\n        else:\n            if self.heapList[i * 2] < self.heapList[i * 2 + 1]:\n                return i * 2\n            else:\n                return i * 2 + 1\n\n    def percUp(self,i):\n        while i // 2 > 0:\n            if self.heapList[i] < self.heapList[i//2]:\n               tmp = self.heapList[i // 2]\n               self.heapList[i // 2] = self.heapList[i]\n               self.heapList[i] = tmp\n            i = i // 2\n \n    def insert(self,k):\n        self.heapList.append(k)\n        self.currentSize = self.currentSize + 1\n        self.percUp(self.currentSize)\n\n    def delMin(self):\n        retval = self.heapList[1]\n        self.heapList[1] = self.heapList[self.currentSize]\n        self.currentSize = self.currentSize - 1\n        self.heapList.pop()\n        self.percDown(1)\n        return retval\n        \n    def isEmpty(self):\n        if currentSize == 0:\n            return True\n        else:\n            return False\n","src/lib/pythonds/trees/bst.py":"#!/bin/env python3.1\n# Bradley N. Miller, David L. Ranum\n# Introduction to Data Structures and Algorithms in Python\n# Copyright 2005, 2010\n# \n\nclass BinarySearchTree:\n    '''\n    Author:  Brad Miller\n    Date:  1/15/2005\n    Description:  Imlement a binary search tree with the following interface\n                  functions:  \n                  __contains__(y) <==> y in x\n                  __getitem__(y) <==> x[y]\n                  __init__()\n                  __len__() <==> len(x)\n                  __setitem__(k,v) <==> x[k] = v\n                  clear()\n                  get(k)\n                  items() \n                  keys() \n                  values()\n                  put(k,v)\n                  in\n                  del <==> \n    '''\n\n    def __init__(self):\n        self.root = None\n        self.size = 0\n    \n    def put(self,key,val):\n        if self.root:\n            self._put(key,val,self.root)\n        else:\n            self.root = TreeNode(key,val)\n        self.size = self.size + 1\n\n    def _put(self,key,val,currentNode):\n        if key < currentNode.key:\n            if currentNode.hasLeftChild():\n                self._put(key,val,currentNode.leftChild)\n            else:\n                currentNode.leftChild = TreeNode(key,val,parent=currentNode)\n        else:\n            if currentNode.hasRightChild():\n                self._put(key,val,currentNode.rightChild)\n            else:\n                currentNode.rightChild = TreeNode(key,val,parent=currentNode)\n            \n    def __setitem__(self,k,v):\n        self.put(k,v)\n\n    def get(self,key):\n        if self.root:\n            res = self._get(key,self.root)\n            if res:\n                return res.payload\n            else:\n                return None\n        else:\n            return None\n        \n    def _get(self,key,currentNode):\n        if not currentNode:\n            return None\n        elif currentNode.key == key:\n            return currentNode\n        elif key < currentNode.key:\n            return self._get(key,currentNode.leftChild)\n        else:\n            return self._get(key,currentNode.rightChild)\n            \n        \n    def __getitem__(self,key):\n        res = self.get(key)\n        if res:\n            return res\n        else:\n            raise KeyError('Error, key not in tree')\n            \n\n    def __contains__(self,key):\n        if self._get(key,self.root):\n            return True\n        else:\n            return False\n        \n    def length(self):\n        return self.size\n\n    def __len__(self):\n        return self.size\n\n    def __iter__(self):\n        return self.root.__iter__()\n    \n    def delete(self,key):\n        if self.size > 1:\n            nodeToRemove = self._get(key,self.root)\n            if nodeToRemove:\n                self.remove(nodeToRemove)\n                self.size = self.size-1\n            else:\n                raise KeyError('Error, key not in tree')\n        elif self.size == 1 and self.root.key == key:\n            self.root = None\n            self.size = self.size - 1\n        else:\n            raise KeyError('Error, key not in tree')\n\n    def __delitem__(self,key):\n        self.delete(key)\n    \n    def remove(self,currentNode):\n        if currentNode.isLeaf(): #leaf\n            if currentNode == currentNode.parent.leftChild:\n                currentNode.parent.leftChild = None\n            else:\n                currentNode.parent.rightChild = None\n        elif currentNode.hasBothChildren(): #interior\n            succ = currentNode.findSuccessor()\n            succ.spliceOut()\n            currentNode.key = succ.key\n            currentNode.payload = succ.payload\n        else: # this node has one child\n            if currentNode.hasLeftChild():\n                if currentNode.isLeftChild():\n                    currentNode.leftChild.parent = currentNode.parent\n                    currentNode.parent.leftChild = currentNode.leftChild\n                elif currentNode.isRightChild():\n                    currentNode.leftChild.parent = currentNode.parent\n                    currentNode.parent.rightChild = currentNode.leftChild\n                else:\n                    currentNode.replaceNodeData(currentNode.leftChild.key,\n                                       currentNode.leftChild.payload,\n                                       currentNode.leftChild.leftChild,\n                                       currentNode.leftChild.rightChild)\n            else:\n                if currentNode.isLeftChild():\n                    currentNode.rightChild.parent = currentNode.parent\n                    currentNode.parent.leftChild = currentNode.rightChild\n                elif currentNode.isRightChild():\n                    currentNode.rightChild.parent = currentNode.parent\n                    currentNode.parent.rightChild = currentNode.rightChild\n                else:\n                    currentNode.replaceNodeData(currentNode.rightChild.key,\n                                       currentNode.rightChild.payload,\n                                       currentNode.rightChild.leftChild,\n                                       currentNode.rightChild.rightChild)\n\n    def inorder(self):\n        self._inorder(self.root)\n\n    def _inorder(self,tree):\n        if tree != None:\n            self._inorder(tree.leftChild)\n            print(tree.key)\n            self._inorder(tree.rightChild)\n\n    def postorder(self):\n        self._postorder(self.root)\n\n    def _postorder(self, tree):\n        if tree:\n            self._postorder(tree.rightChild)\n            self._postorder(tree.leftChild)\n            print(tree.key)            \n\n    def preorder(self):\n        self._preorder(self,self.root)\n\n    def _preorder(self,tree):\n        if tree:\n            print(tree.key)            \n            self._preorder(tree.leftChild)\n            self._preorder(tree.rightChild)\n\n                \nclass TreeNode:\n    def __init__(self,key,val,left=None,right=None,parent=None):\n        self.key = key\n        self.payload = val\n        self.leftChild = left\n        self.rightChild = right\n        self.parent = parent\n        self.balanceFactor = 0\n        \n    def hasLeftChild(self):\n        return self.leftChild\n\n    def hasRightChild(self):\n        return self.rightChild\n    \n    def isLeftChild(self):\n        return self.parent and self.parent.leftChild == self\n\n    def isRightChild(self):\n        return self.parent and self.parent.rightChild == self\n\n    def isRoot(self):\n        return not self.parent\n\n    def isLeaf(self):\n        return not (self.rightChild or self.leftChild)\n\n    def hasAnyChildren(self):\n        return self.rightChild or self.leftChild\n\n    def hasBothChildren(self):\n        return self.rightChild and self.leftChild\n    \n    def replaceNodeData(self,key,value,lc,rc):\n        self.key = key\n        self.payload = value\n        self.leftChild = lc\n        self.rightChild = rc\n        if self.hasLeftChild():\n            self.leftChild.parent = self\n        if self.hasRightChild():\n            self.rightChild.parent = self\n        \n    def findSuccessor(self):\n        succ = None\n        if self.hasRightChild():\n            succ = self.rightChild.findMin()\n        else:\n            if self.parent:\n                if self.isLeftChild():\n                    succ = self.parent\n                else:\n                    self.parent.rightChild = None\n                    succ = self.parent.findSuccessor()\n                    self.parent.rightChild = self\n        return succ\n\n\n    def spliceOut(self):\n        if self.isLeaf():\n            if self.isLeftChild():\n                self.parent.leftChild = None\n            else:\n                self.parent.rightChild = None\n        elif self.hasAnyChildren():\n            if self.hasLeftChild():\n                if self.isLeftChild():\n                    self.parent.leftChild = self.leftChild\n                else:\n                    self.parent.rightChild = self.leftChild\n                self.leftChild.parent = self.parent\n            else:\n                if self.isLeftChild():\n                    self.parent.leftChild = self.rightChild\n                else:\n                    self.parent.rightChild = self.rightChild\n                self.rightChild.parent = self.parent\n\n    def findMin(self):\n        current = self\n        while current.hasLeftChild():\n            current = current.leftChild\n        return current\n\n    def __iter__(self):\n        \"\"\"The standard inorder traversal of a binary tree.\"\"\"\n        if self:\n            if self.hasLeftChild():\n                for elem in self.leftChild:\n                    yield elem\n            yield self.key\n            if self.hasRightChild():\n                for elem in self.rightChild:\n                    yield elem\n\n            \n","src/lib/quopri.py":'raise NotImplementedError("quopri is not yet implemented in Skulpt")\n',"src/lib/random.js":'var MersenneTwister=function(a){a==null&&(a=new Date().getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=Array(this.N),this.mti=this.N+1,this.init_genrand(a)};MersenneTwister.prototype.init_genrand=function(a){for(this.mt[0]=a>>>0,this.mti=1;this.mti<this.N;this.mti++){var a=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&a)>>>16)<<16)+1812433253*(65535&a)+this.mti,this.mt[this.mti]>>>=0}},MersenneTwister.prototype.init_by_array=function(a,b){var d,e,f;for(this.init_genrand(19650218),d=1,e=0,f=this.N>b?this.N:b;f;f--){var g=this.mt[d-1]^this.mt[d-1]>>>30;this.mt[d]=(this.mt[d]^(1664525*((4294901760&g)>>>16)<<16)+1664525*(65535&g))+a[e]+e,this.mt[d]>>>=0,d++,e++,d>=this.N&&(this.mt[0]=this.mt[this.N-1],d=1),e>=b&&(e=0)}for(f=this.N-1;f;f--){var g=this.mt[d-1]^this.mt[d-1]>>>30;this.mt[d]=(this.mt[d]^(1566083941*((4294901760&g)>>>16)<<16)+1566083941*(65535&g))-d,this.mt[d]>>>=0,d++,d>=this.N&&(this.mt[0]=this.mt[this.N-1],d=1)}this.mt[0]=2147483648},MersenneTwister.prototype.genrand_int32=function(){var a,b=[0,this.MATRIX_A];if(this.mti>=this.N){var d;for(this.mti==this.N+1&&this.init_genrand(5489),d=0;d<this.N-this.M;d++)a=this.mt[d]&this.UPPER_MASK|this.mt[d+1]&this.LOWER_MASK,this.mt[d]=this.mt[d+this.M]^a>>>1^b[1&a];for(;d<this.N-1;d++)a=this.mt[d]&this.UPPER_MASK|this.mt[d+1]&this.LOWER_MASK,this.mt[d]=this.mt[d+(this.M-this.N)]^a>>>1^b[1&a];a=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^a>>>1^b[1&a],this.mti=0}return a=this.mt[this.mti++],a^=a>>>11,a^=2636928640&a<<7,a^=4022730752&a<<15,a^=a>>>18,a>>>0},MersenneTwister.prototype.genrand_int31=function(){return this.genrand_int32()>>>1},MersenneTwister.prototype.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)},MersenneTwister.prototype.random=function(){return this.genrand_int32()*(1/4294967296)},MersenneTwister.prototype.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)},MersenneTwister.prototype.genrand_res53=function(){var d=this.genrand_int32()>>>5,a=this.genrand_int32()>>>6;return(67108864*d+a)*(1/9007199254740992)};var $builtinmodule=function(){var a=Math.log,b=Math.sqrt,d={},e=new MersenneTwister,f=void 0;d.seed=new Sk.builtin.func(function(a){return Sk.builtin.pyCheckArgsLen("seed",arguments.length,0,1),a=Sk.builtin.asnum$(a),e=0<arguments.length?new MersenneTwister(a):new MersenneTwister,Sk.builtin.none.none$}),d.random=new Sk.builtin.func(function(){return Sk.builtin.pyCheckArgsLen("random",arguments.length,0,0),new Sk.builtin.float_(e.genrand_res53())});var g=function(a){return 0|a},h=function(a,b,d){var f,h,i;if(!Sk.builtin.checkInt(a))throw new Sk.builtin.ValueError("non-integer first argument for randrange()");if(void 0===b)return i=g(e.genrand_res53()*a),new Sk.builtin.int_(i);if(!Sk.builtin.checkInt(b))throw new Sk.builtin.ValueError("non-integer stop for randrange()");if(void 0===d&&(d=1),f=b-a,1==d&&0<f)return i=a+g(e.genrand_res53()*f),new Sk.builtin.int_(i);if(1==d)throw new Sk.builtin.ValueError("empty range for randrange() ("+a+", "+b+", "+f+")");if(!Sk.builtin.checkInt(d))throw new Sk.builtin.ValueError("non-integer step for randrange()");if(0<d)h=g((f+d-1)/d);else if(0>d)h=g((f+d+1)/d);else throw new Sk.builtin.ValueError("zero step for randrange()");if(0>=h)throw new Sk.builtin.ValueError("empty range for randrange()");return i=a+d*g(e.genrand_res53()*h),new Sk.builtin.int_(i)};d.randint=new Sk.builtin.func(function(d,e){return Sk.builtin.pyCheckArgsLen("randint",arguments.length,2,2),d=Sk.builtin.asnum$(d),e=Sk.builtin.asnum$(e),h(d,e+1)}),d.randrange=new Sk.builtin.func(function(a,b,d){return Sk.builtin.pyCheckArgsLen("randrange",arguments.length,1,3),a=Sk.builtin.asnum$(a),b=Sk.builtin.asnum$(b),d=Sk.builtin.asnum$(d),h(a,b,d)}),d.uniform=new Sk.builtin.func(function(d,f){Sk.builtin.pyCheckArgsLen("uniform",arguments.length,2,2),d=Sk.builtin.asnum$(d),f=Sk.builtin.asnum$(f);var g=e.genrand_res53();return c=d+g*(f-d),new Sk.builtin.float_(c)}),d.triangular=new Sk.builtin.func(function(a,d,f){Sk.builtin.pyCheckArgsLen("triangular",arguments.length,2,3),Sk.builtin.pyCheckType("low","number",Sk.builtin.checkNumber(a)),Sk.builtin.pyCheckType("high","number",Sk.builtin.checkNumber(d));var g,h,i;return a=Sk.builtin.asnum$(a),d=Sk.builtin.asnum$(d),a>d&&(i=a,a=d,d=i),void 0===f||f===Sk.builtin.none.none$?f=(d-a)/2:(Sk.builtin.pyCheckType("mode","number",Sk.builtin.checkNumber(f)),f=Sk.builtin.asnum$(f)),g=e.genrand_res53(),h=g<(f-a)/(d-a)?a+b(g*(d-a)*(f-a)):d-b((1-g)*(d-a)*(d-f)),new Sk.builtin.float_(h)});var i=function(d,g){var k,l,m,n,o,h=Math.sin,i=Math.cos,j=Math.PI;return void 0===f?(k=e.genrand_res53(),l=e.genrand_res53(),m=b(-2*a(k)),n=2*j*l,o=m*i(n),f=m*h(n)):(o=f,f=void 0),d+g*o};return d.gauss=new Sk.builtin.func(function(a,b){return Sk.builtin.pyCheckArgsLen("gauss",arguments.length,2,2),Sk.builtin.pyCheckType("mu","number",Sk.builtin.checkNumber(a)),Sk.builtin.pyCheckType("sigma","number",Sk.builtin.checkNumber(b)),a=Sk.builtin.asnum$(a),b=Sk.builtin.asnum$(b),new Sk.builtin.float_(i(a,b))}),d.normalvariate=d.gauss,d.lognormvariate=new Sk.builtin.func(function(a,b){var d=Math.exp;return Sk.builtin.pyCheckArgsLen("lognormvariate",arguments.length,2,2),Sk.builtin.pyCheckType("mu","number",Sk.builtin.checkNumber(a)),Sk.builtin.pyCheckType("sigma","number",Sk.builtin.checkNumber(b)),a=Sk.builtin.asnum$(a),b=Sk.builtin.asnum$(b),new Sk.builtin.float_(d(i(a,b)))}),d.expovariate=new Sk.builtin.func(function(b){Sk.builtin.pyCheckArgsLen("expovariate",arguments.length,1,1),Sk.builtin.pyCheckType("lambd","number",Sk.builtin.checkNumber(b)),b=Sk.builtin.asnum$(b);var d=e.genrand_res53();return new Sk.builtin.float_(-a(d)/b)}),d.choice=new Sk.builtin.func(function(a){if(Sk.builtin.pyCheckArgsLen("choice",arguments.length,1,1),Sk.builtin.pyCheckType("seq","sequence",Sk.builtin.checkSequence(a)),void 0!==a.sq$length){var b=new Sk.builtin.int_(g(e.genrand_res53()*a.sq$length()));return a.mp$subscript(b)}throw new Sk.builtin.TypeError("object has no length")}),d.shuffle=new Sk.builtin.func(function(a){if(Sk.builtin.pyCheckArgsLen("shuffle",arguments.length,1,1),Sk.builtin.pyCheckType("x","sequence",Sk.builtin.checkSequence(a)),a.constructor===Sk.builtin.list){const h=a.v;for(var b=h.length-1;0<b;b-=1){var d=g(e.genrand_res53()*(b+1)),f=h[d];h[d]=h[b],h[b]=f}}else if(void 0===a.sq$length)throw new Sk.builtin.TypeError("object has no length");else if(void 0!==a.mp$ass_subscript)for(var d,b=a.sq$length()-1;0<b;b-=1){d=new Sk.builtin.int_(g(e.genrand_res53()*(b+1))),b=new Sk.builtin.int_(b);var f=a.mp$subscript(d);a.mp$ass_subscript(d,a.mp$subscript(b)),a.mp$ass_subscript(b,f)}else throw new Sk.builtin.TypeError("object is immutable");return Sk.builtin.none.none$}),d.sample=new Sk.builtin.func(function(a,b){var f,g,h,l,m,d=Math.floor;for(Sk.builtin.pyCheckArgsLen("sample",arguments.length,2,2),Sk.builtin.pyCheckType("population","iterable",Sk.builtin.checkIterable(a)),Sk.builtin.pyCheckType("k","integer",Sk.builtin.checkInt(b)),b=Sk.builtin.asnum$(b),m=[],h=Sk.abstr.iter(a),(f=0,l=h.tp$iternext());void 0!==l;f++,l=h.tp$iternext())g=d(e.genrand_res53()*(f+1)),f<b?(g<f&&(m[f]=m[g]),m[g]=l):g<b&&(m[g]=l);if(f<b)throw new Sk.builtin.ValueError("sample larger than population");return new Sk.builtin.list(m)}),d};',"src/lib/re.js":'var $builtinmodule=function(name){var validGroups,convert,getFlags,_split,_findall,matchobj,_search,_match,regexobj,mod={__name__:new Sk.builtin.str("re")};return mod.I=2,mod.IGNORECASE=2,mod.M=8,mod.MULTILINE=8,validGroups=["(?:","(?=","(?!"],convert=function(a){var b,c,d;if(c=a.match(/\\(\\?./g),c)for(d=0;d<c.length;d++)if(-1==validGroups.indexOf(c[d]))throw new Sk.builtin.ValueError("Disallowed group in pattern: \'"+c[d]+"\'");return b=a.replace("/\\\\/g","\\\\\\\\"),b=a.replace(/([^\\\\]){,(?![^\\[]*\\])/g,"$1{0,"),b},getFlags=function(a){var b="g";return(a&mod.IGNORECASE)==mod.IGNORECASE&&(b+="i"),(a&mod.MULTILINE)==mod.MULTILINE&&(b+="m"),b},_split=function(a,b,c,d){var e,f,g,h,i,j,k,l,m;if(Sk.builtin.pyCheckArgsLen("split",arguments.length,2,4),!Sk.builtin.checkString(a))throw new Sk.builtin.TypeError("pattern must be a string");if(!Sk.builtin.checkString(b))throw new Sk.builtin.TypeError("string must be a string");if(void 0===c&&(c=0),!Sk.builtin.checkNumber(c))throw new Sk.builtin.TypeError("maxsplit must be a number");if(void 0===d&&(d=0),!Sk.builtin.checkNumber(d))throw new Sk.builtin.TypeError("flags must be a number");for(c=Sk.builtin.asnum$(c),e=Sk.ffi.unwrapo(a),f=Sk.ffi.unwrapo(b),e=convert(e),g=null!==e.match(/^\\(.*\\)$/),h=getFlags(d),i=new RegExp(e,h),j=[],k,l=0,m=0;null!=(k=i.exec(f))&&k.index!==i.lastIndex&&(j.push(new Sk.builtin.str(f.substring(l,k.index))),g&&j.push(new Sk.builtin.str(k[0])),l=i.lastIndex,m+=1,!(c&&m>=c)););return j.push(new Sk.builtin.str(f.substring(l))),new Sk.builtin.list(j)},_split.co_varnames=["pattern","string","maxsplit","flags"],_split.$defaults=[new Sk.builtin.int_(0),new Sk.builtin.int_(0)],mod.split=new Sk.builtin.func(_split),_findall=function(a,b,c){var d,e,f,g,h,j;if(Sk.builtin.pyCheckArgsLen("findall",arguments.length,2,3),!Sk.builtin.checkString(a))throw new Sk.builtin.TypeError("pattern must be a string");if(!Sk.builtin.checkString(b))throw new Sk.builtin.TypeError("string must be a string");if(void 0===c&&(c=0),!Sk.builtin.checkNumber(c))throw new Sk.builtin.TypeError("flags must be a number");if(d=Sk.ffi.unwrapo(a),e=Sk.ffi.unwrapo(b),d=convert(d),f=getFlags(c),g=new RegExp(d,f),d.match(/\\$/)){var k=new RegExp(/\\n$/);e.match(k)&&(e=e.slice(0,-1))}for(h=[],j;null!=(j=g.exec(e));){if(2>j.length)h.push(new Sk.builtin.str(j[0]));else if(2==j.length)h.push(new Sk.builtin.str(j[1]));else{for(var l=[],m=1;m<j.length;m++)l.push(new Sk.builtin.str(j[m]));h.push(new Sk.builtin.tuple(l))}j.index===g.lastIndex&&(g.lastIndex+=1)}return new Sk.builtin.list(h)},_findall.co_varnames=["pattern","string","flags"],_findall.$defaults=[new Sk.builtin.int_(0)],mod.findall=new Sk.builtin.func(_findall),matchobj=function(a,b){b.__init__=new Sk.builtin.func(function(a,b,c,d){return a.thematch=b,a.re=c,a.string=d,Sk.builtin.none.none$}),b.groups=new Sk.builtin.func(function(a){var b=a.thematch.v.slice(1);return new Sk.builtin.tuple(b)}),b.group=new Sk.builtin.func(function(a,b){if(b=void 0===b?0:Sk.builtin.asnum$(b),b>=a.thematch.v.length)throw new Sk.builtin.IndexError("Index out of range: "+b);return a.thematch.v[b]})},mod.MatchObject=Sk.misceval.buildClass(mod,matchobj,"MatchObject",[]),mod._findre=function(res,string){res=res.replace(/([^\\\\]){,(?![^\\[]*\\])/g,"$1{0,");var matches,sitem,retval,re=eval(res),patt=/\\n$/,str=Sk.ffi.remapToJs(string);if(matches=str.match(patt)?str.slice(0,-1).match(re):str.match(re),retval=new Sk.builtin.list,null==matches)return retval;for(var i=0;i<matches.length;++i)sitem=new Sk.builtin.str(matches[i]),retval.v.push(sitem);return retval},_search=function(a,b,c){var d,e;if(Sk.builtin.pyCheckArgsLen("search",arguments.length,2,3),!Sk.builtin.checkString(a))throw new Sk.builtin.TypeError("pattern must be a string");if(!Sk.builtin.checkString(b))throw new Sk.builtin.TypeError("string must be a string");if(void 0===c&&(c=0),!Sk.builtin.checkNumber(c))throw new Sk.builtin.TypeError("flags must be a number");return(e="/"+a.v.replace(/\\//g,"\\\\/")+"/",lst=mod._findre(e,b),1>lst.v.length)?Sk.builtin.none.none$:(d=Sk.misceval.callsimArray(mod.MatchObject,[lst,a,b]),d)},_search.co_varnames=["pattern","string","flags"],_search.$defaults=[new Sk.builtin.int_(0)],mod.search=new Sk.builtin.func(_search),_match=function(a,b,c){var d,e;if(Sk.builtin.pyCheckArgsLen("match",arguments.length,2,3),!Sk.builtin.checkString(a))throw new Sk.builtin.TypeError("pattern must be a string");if(!Sk.builtin.checkString(b))throw new Sk.builtin.TypeError("string must be a string");if(void 0===c&&(c=0),!Sk.builtin.checkNumber(c))throw new Sk.builtin.TypeError("flags must be a number");return(pat=Sk.ffi.remapToJs(a),e="/^"+pat.replace(/\\//g,"\\\\/")+"/",lst=mod._findre(e,b),1>Sk.ffi.remapToJs(lst).length)?Sk.builtin.none.none$:(d=Sk.misceval.callsimArray(mod.MatchObject,[lst,a,b]),d)},_match.co_varnames=["pattern","string","flags"],_match.$defaults=[new Sk.builtin.int_(0)],mod.match=new Sk.builtin.func(_match),regexobj=function(a,b){var c,d,e,f,g,h;b.__init__=new Sk.builtin.func(function(a,b,c){return a.re=b,a.flags=void 0===c?0:c,Sk.builtin.none.none$}),h=new Sk.builtin.func(function(a){var b="re.compile(\'"+Sk.ffi.remapToJs(a.re)+"\')";return Sk.ffi.remapToPy(b.substring(0,212))}),b.__str__=h,b.__repr__=h,c=function(a,b,c){var d=Sk.ffi.remapToJs(a),e=null==b?0:Sk.ffi.remapToJs(b),f=null==c?d.length:Sk.ffi.remapToJs(c);return"^"==e&&(e=d.indexOf("\\n")+1),null===f&&(f=d.length),Sk.ffi.remapToPy(d.substring(e,f))},d=function(a,b,d,e){Sk.builtin.pyCheckArgsLen("search",arguments.length,2,4);var f=c(b,d,e);return _search(a.re,f,a.flags)},d.co_varnames=["self","string","pos","endpos"],d.$defaults=[new Sk.builtin.int_(0),Sk.builtin.none.none$],b.search=new Sk.builtin.func(d),e=function(a,b,d,e){Sk.builtin.pyCheckArgsLen("match",arguments.length,2,4);var f=c(b,d,e);return _match(a.re,f,a.flags)},e.co_varnames=["self","string","pos","endpos"],e.$defaults=[new Sk.builtin.int_(0),Sk.builtin.none.none$],b.match=new Sk.builtin.func(e),f=function(a,b,c){if(Sk.builtin.pyCheckArgsLen("split",arguments.length,2,3),void 0===c&&(c=0),!Sk.builtin.checkInt(c))throw new Sk.builtin.TypeError("maxsplit must be an integer");return _split(a.re,b,c,a.flags)},f.co_varnames=["self","string","maxsplit"],f.$defaults=[new Sk.builtin.int_(0)],b.split=new Sk.builtin.func(f),g=function(a,b,d,e){Sk.builtin.pyCheckArgsLen("findall",arguments.length,2,4);var f=c(b,d,e);return _findall(a.re,f,a.flags)},g.co_varnames=["self","string","pos","endpos"],g.$defaults=[new Sk.builtin.int_(0),Sk.builtin.none.none$],b.findall=new Sk.builtin.func(g)},mod.RegexObject=Sk.misceval.buildClass(mod,regexobj,"RegexObject",[]),mod.compile=new Sk.builtin.func(function(a,b){var c;if(Sk.builtin.pyCheckArgsLen("compile",arguments.length,1,2),!Sk.builtin.checkString(a))throw new Sk.builtin.TypeError("pattern must be a string");if(void 0===b&&(b=0),!Sk.builtin.checkNumber(b))throw new Sk.builtin.TypeError("flags must be a number");return c=Sk.misceval.callsimArray(mod.RegexObject,[a,b]),c}),mod.purge=new Sk.builtin.func(function(){}),mod};',"src/lib/repr.py":'raise NotImplementedError("repr is not yet implemented in Skulpt")\n',"src/lib/rexec.py":'raise NotImplementedError("rexec is not yet implemented in Skulpt")\n',"src/lib/rfc822.py":'raise NotImplementedError("rfc822 is not yet implemented in Skulpt")\n',"src/lib/rlcompleter.py":'raise NotImplementedError("rlcompleter is not yet implemented in Skulpt")\n',"src/lib/robotparser.py":'raise NotImplementedError("robotparser is not yet implemented in Skulpt")\n',"src/lib/runpy.py":'raise NotImplementedError("runpy is not yet implemented in Skulpt")\n',"src/lib/sched.py":'raise NotImplementedError("sched is not yet implemented in Skulpt")\n',"src/lib/sets.py":'raise NotImplementedError("sets is not yet implemented in Skulpt")\n',"src/lib/sgmllib.py":'raise NotImplementedError("sgmllib is not yet implemented in Skulpt")\n',"src/lib/sha.py":'raise NotImplementedError("sha is not yet implemented in Skulpt")\n',"src/lib/shelve.py":'raise NotImplementedError("shelve is not yet implemented in Skulpt")\n',"src/lib/shlex.py":'raise NotImplementedError("shlex is not yet implemented in Skulpt")\n',"src/lib/shutil.py":'raise NotImplementedError("shutil is not yet implemented in Skulpt")\n',"src/lib/signal.js":'var $builtinmodule=function(){var a={SIG_DFL:new Sk.builtin.int_(0),SIG_IGN:new Sk.builtin.int_(1),CTRL_C_EVENT:new Sk.builtin.int_(0),CTRL_BREAK_EVENT:new Sk.builtin.int_(0),NSIG:new Sk.builtin.int_(23),SIGHUP:new Sk.builtin.int_(1),SIGNINT:new Sk.builtin.int_(2),SIGILL:new Sk.builtin.int_(4),SIGFPE:new Sk.builtin.int_(8),SIGKILL:new Sk.builtin.int_(9),SIGSEGV:new Sk.builtin.int_(11),SIGTERM:new Sk.builtin.int_(15),SIGBREAK:new Sk.builtin.int_(21),SIGABRT:new Sk.builtin.int_(22),pause:new Sk.builtin.func(function(){Sk.builtin.pyCheckArgsLen("pause",arguments.length,0,0);var a=new Sk.misceval.Suspension;return a.resume=function(){return Sk.builtin.none.none$},a.data={type:"Sk.promise",promise:new Promise(function(a){if(null!=Sk.signals&&Sk.signals.addEventListener){function handleSignal(){Sk.signals.removeEventListener(handleSignal),a()}Sk.signals.addEventListener(handleSignal)}else console.warn("signal.pause() not supported"),Sk.misceval.print_("signal.pause() not supported"),a()})},a}),signal:new Sk.builtin.func(function(){throw new Sk.builtin.NotImplementedError("signal.signal is not supported.")})};return a};',"src/lib/site.py":'raise NotImplementedError("site is not yet implemented in Skulpt")\n',"src/lib/smtpd.py":'raise NotImplementedError("smtpd is not yet implemented in Skulpt")\n',"src/lib/smtplib.py":'raise NotImplementedError("smtplib is not yet implemented in Skulpt")\n',"src/lib/sndhdr.py":'raise NotImplementedError("sndhdr is not yet implemented in Skulpt")\n',"src/lib/socket.py":'raise NotImplementedError("socket is not yet implemented in Skulpt")\n',"src/lib/sqlite3/__init__.py":'raise NotImplementedError("sqlite3 is not yet implemented in Skulpt")\n',"src/lib/sre.py":'raise NotImplementedError("sre is not yet implemented in Skulpt")\n',"src/lib/sre_compile.py":'raise NotImplementedError("sre_compile is not yet implemented in Skulpt")\n',"src/lib/sre_constants.py":'raise NotImplementedError("sre_constants is not yet implemented in Skulpt")\n',"src/lib/sre_parse.py":'raise NotImplementedError("sre_parse is not yet implemented in Skulpt")\n',"src/lib/ssl.py":'raise NotImplementedError("ssl is not yet implemented in Skulpt")\n',"src/lib/stat.py":'raise NotImplementedError("stat is not yet implemented in Skulpt")\n',"src/lib/statvfs.py":'raise NotImplementedError("statvfs is not yet implemented in Skulpt")\n',"src/lib/string.js":'var $builtinmodule=function(){var a={};return a.ascii_lowercase=new Sk.builtin.str("abcdefghijklmnopqrstuvwxyz"),a.ascii_uppercase=new Sk.builtin.str("ABCDEFGHIJKLMNOPQRSTUVWXYZ"),a.ascii_letters=new Sk.builtin.str(a.ascii_lowercase.v+a.ascii_uppercase.v),a.lowercase=new Sk.builtin.str("abcdefghijklmnopqrstuvwxyz"),a.uppercase=new Sk.builtin.str("ABCDEFGHIJKLMNOPQRSTUVWXYZ"),a.letters=new Sk.builtin.str(a.lowercase.v+a.uppercase.v),a.digits=new Sk.builtin.str("0123456789"),a.hexdigits=new Sk.builtin.str("0123456789abcdefABCDEF"),a.octdigits=new Sk.builtin.str("01234567"),a.punctuation=new Sk.builtin.str("!\\"#$%&\'()*+,-./:;<=>?@[\\\\]^_`{|}~"),a.whitespace=new Sk.builtin.str("\\t\\n\\x0B\\f\\r "),a.printable=new Sk.builtin.str(a.digits.v+a.letters.v+a.punctuation.v+" \\t\\n\\r\\x0B\\f"),a.split=new Sk.builtin.func(function(...a){return Sk.misceval.callsimArray(Sk.builtin.str.prototype.split,a)}),a.capitalize=new Sk.builtin.func(function(a){return Sk.misceval.callsimArray(Sk.builtin.str.prototype.capitalize,[a])}),a.join=new Sk.builtin.func(function(a,b){return void 0===b&&(b=new Sk.builtin.str(" ")),Sk.misceval.callsimArray(Sk.builtin.str.prototype.join,[b,a])}),a.capwords=new Sk.builtin.func(function(b,c){if(Sk.builtin.pyCheckArgsLen("capwords",arguments.length,1,2),!Sk.builtin.checkString(b))throw new Sk.builtin.TypeError("s must be a string");if(void 0===c&&(c=new Sk.builtin.str(" ")),!Sk.builtin.checkString(c))throw new Sk.builtin.TypeError("sep must be a string");for(var d=Sk.misceval.callsimArray(a.split,[b,c]).v,e=[],f=0;f<d.length;f++){var g=d[f],h=Sk.misceval.callsimArray(a.capitalize,[g]);e.push(h)}return Sk.misceval.callsimArray(a.join,[new Sk.builtin.list(e),c])}),a};',"src/lib/string.py":'raise NotImplementedError("string is not yet implemented in Skulpt")\n',"src/lib/stringold.py":'raise NotImplementedError("stringold is not yet implemented in Skulpt")\n',"src/lib/stringprep.py":'raise NotImplementedError("stringprep is not yet implemented in Skulpt")\n',"src/lib/struct.py":'raise NotImplementedError("struct is not yet implemented in Skulpt")\n',"src/lib/subprocess.py":'raise NotImplementedError("subprocess is not yet implemented in Skulpt")\n',"src/lib/sunau.py":'raise NotImplementedError("sunau is not yet implemented in Skulpt")\n',"src/lib/sunaudio.py":'raise NotImplementedError("sunaudio is not yet implemented in Skulpt")\n',"src/lib/symbol.py":'raise NotImplementedError("symbol is not yet implemented in Skulpt")\n',"src/lib/symtable.py":'raise NotImplementedError("symtable is not yet implemented in Skulpt")\n',"src/lib/tabnanny.py":'raise NotImplementedError("tabnanny is not yet implemented in Skulpt")\n',"src/lib/tarfile.py":'raise NotImplementedError("tarfile is not yet implemented in Skulpt")\n',"src/lib/telnetlib.py":'raise NotImplementedError("telnetlib is not yet implemented in Skulpt")\n',"src/lib/tempfile.py":'raise NotImplementedError("tempfile is not yet implemented in Skulpt")\n',"src/lib/test/__init__.py":"__author__ = 'bmiller'\n\ndef testEqual(actual, expected):\n    if type(expected) == type(1):\n        if actual == expected:\n            print('Pass')\n            return True\n    elif type(expected) == type(1.11):\n        if abs(actual-expected) < 0.00001:\n            print('Pass')\n            return True\n    else:\n        if actual == expected:\n            print('Pass')\n            return True\n    print('Test Failed: expected ' + str(expected) + ' but got ' + str(actual))\n    return False\n\ndef testNotEqual(actual, expected):\n    pass\n\n","src/lib/test/bad_getattr.py":'x = 1\n\n__getattr__ = "Surprise!"\n__dir__ = "Surprise again!"\n',"src/lib/test/bad_getattr2.py":'def __getattr__():\n    "Bad one"\n\nx = 1\n\ndef __dir__(bad_sig):\n    return []\n',"src/lib/test/bad_getattr3.py":"def __getattr__(name):\n    global __getattr__\n    if name != 'delgetattr':\n        raise AttributeError\n    del __getattr__\n    raise AttributeError\n","src/lib/test/decimaltestdata/__init__.py":'raise NotImplementedError("decimaltestdata is not yet implemented in Skulpt")\n',"src/lib/test/good_getattr.py":"x = 1\n\ndef __dir__():\n    return ['a', 'b', 'c']\n\ndef __getattr__(name):\n    if name == \"yolo\":\n        raise AttributeError(\"Deprecated, use whatever instead\")\n    return f\"There is {name}\"\n\ny = 2\n","src/lib/test/test_support.py":'"""Supporting definitions for the Python regression tests."""\n\nif __name__ != \'test.test_support\':\n    raise ImportError(\'test_support must be imported from the test package\')\n\nimport unittest\n\n\n# def run_unittest(*classes):\n#     """Run tests from unittest.TestCase-derived classes."""\n#     valid_types = (unittest.TestSuite, unittest.TestCase)\n#     suite = unittest.TestSuite()\n#     for cls in classes:\n#         if isinstance(cls, str):\n#             if cls in sys.modules:\n#                 suite.addTest(unittest.findTestCases(sys.modules[cls]))\n#             else:\n#                 raise ValueError("str arguments must be keys in sys.modules")\n#         elif isinstance(cls, valid_types):\n#             suite.addTest(cls)\n#         else:\n#             suite.addTest(unittest.makeSuite(cls))\n#     _run_suite(suite)\n\ndef run_unittest(*classes):\n    """Run tests from unittest.TestCase-derived classes."""\n    for cls in classes:\n        print cls\n        if issubclass(cls, unittest.TestCase):\n            cls().main()\n        else:\n            print "Don\'t know what to do with ", cls\n',"src/lib/textwrap.py":"\"\"\"Text wrapping and filling.\n\"\"\"\n\n# Copyright (C) 1999-2001 Gregory P. Ward.\n# Copyright (C) 2002, 2003 Python Software Foundation.\n# Written by Greg Ward <gward@python.net>\n\nimport re, string\n\n__all__ = ['TextWrapper', 'wrap', 'fill', 'dedent', 'indent', 'shorten']\n\n# Hardcode the recognized whitespace characters to the US-ASCII\n# whitespace characters.  The main reason for doing this is that\n# some Unicode spaces (like \\u00a0) are non-breaking whitespaces.\n_whitespace = '\\t\\n\\x0b\\x0c\\r '\n\nclass TextWrapper:\n    \"\"\"\n    Object for wrapping/filling text.  The public interface consists of\n    the wrap() and fill() methods; the other methods are just there for\n    subclasses to override in order to tweak the default behaviour.\n    If you want to completely replace the main wrapping algorithm,\n    you'll probably have to override _wrap_chunks().\n    Several instance attributes control various aspects of wrapping:\n      width (default: 70)\n        the maximum width of wrapped lines (unless break_long_words\n        is false)\n      initial_indent (default: \"\")\n        string that will be prepended to the first line of wrapped\n        output.  Counts towards the line's width.\n      subsequent_indent (default: \"\")\n        string that will be prepended to all lines save the first\n        of wrapped output; also counts towards each line's width.\n      expand_tabs (default: true)\n        Expand tabs in input text to spaces before further processing.\n        Each tab will become 0 .. 'tabsize' spaces, depending on its position\n        in its line.  If false, each tab is treated as a single character.\n      tabsize (default: 8)\n        Expand tabs in input text to 0 .. 'tabsize' spaces, unless\n        'expand_tabs' is false.\n      replace_whitespace (default: true)\n        Replace all whitespace characters in the input text by spaces\n        after tab expansion.  Note that if expand_tabs is false and\n        replace_whitespace is true, every tab will be converted to a\n        single space!\n      fix_sentence_endings (default: false)\n        Ensure that sentence-ending punctuation is always followed\n        by two spaces.  Off by default because the algorithm is\n        (unavoidably) imperfect.\n      break_long_words (default: true)\n        Break words longer than 'width'.  If false, those words will not\n        be broken, and some lines might be longer than 'width'.\n      break_on_hyphens (default: true)\n        Allow breaking hyphenated words. If true, wrapping will occur\n        preferably on whitespaces and right after hyphens part of\n        compound words.\n      drop_whitespace (default: true)\n        Drop leading and trailing whitespace from lines.\n      max_lines (default: None)\n        Truncate wrapped lines.\n      placeholder (default: ' [...]')\n        Append to the last line of truncated text.\n    \"\"\"\n\n    unicode_whitespace_trans = {}\n    # uspace = ord(' ')\n    uspace = ' '\n    for x in _whitespace:\n        # unicode_whitespace_trans[ord(x)] = uspace\n        unicode_whitespace_trans[x] = uspace\n\n    # This funky little regex is just the trick for splitting\n    # text up into word-wrappable chunks.  E.g.\n    #   \"Hello there -- you goof-ball, use the -b option!\"\n    # splits into\n    #   Hello/ /there/ /--/ /you/ /goof-/ball,/ /use/ /the/ /-b/ /option!\n    # (after stripping out empty strings).\n    wordsep_re = re.compile(\n        r'(\\s+|'                                  # any whitespace\n        r'[^\\s\\w]*\\w+[^0-9\\W]-(?=\\w+[^0-9\\W]))')  # hyphenated words\n    em_dash = re.compile(r'(\\s+|'                                  # any whitespace\n                         r'[^\\s\\w]*\\w+[^0-9\\W]-(?=\\w+[^0-9\\W])|'   # hyphenated words\n                         r'(?!^)-{2,}(?=\\w))')                     # em-dash\n\n                         \n    # This less funky little regex just split on recognized spaces. E.g.\n    #   \"Hello there -- you goof-ball, use the -b option!\"\n    # splits into\n    #   Hello/ /there/ /--/ /you/ /goof-ball,/ /use/ /the/ /-b/ /option!/\n    wordsep_simple_re = re.compile(r'(\\s+)')\n\n\n    # XXX this is not locale- or charset-aware -- string.lowercase\n    # is US-ASCII only (and therefore English-only)\n    sentence_end_re = re.compile(r'[a-z]'             # lowercase letter\n                                 r'[\\.\\!\\?]'          # sentence-ending punct.\n                                 r'[\\\"\\']?'           # optional end-of-quote\n                                 r'\\Z')               # end of chunk\n    sentence_end_re = r'[a-z][\\.\\!\\?][\\\"\\']?'\n\n    def __init__(self,\n                 width=70,\n                 initial_indent=\"\",\n                 subsequent_indent=\"\",\n                 expand_tabs=True,\n                 replace_whitespace=True,\n                 fix_sentence_endings=False,\n                 break_long_words=True,\n                 drop_whitespace=True,\n                 break_on_hyphens=True,\n                 tabsize=8,\n                 max_lines=None,\n                 placeholder=' [...]'):\n        self.width = width\n        self.initial_indent = initial_indent\n        self.subsequent_indent = subsequent_indent\n        self.expand_tabs = expand_tabs\n        self.replace_whitespace = replace_whitespace\n        self.fix_sentence_endings = fix_sentence_endings\n        self.break_long_words = break_long_words\n        self.drop_whitespace = drop_whitespace\n        self.break_on_hyphens = break_on_hyphens\n        self.tabsize = tabsize\n        self.max_lines = max_lines\n        self.placeholder = placeholder\n\n\n    # -- Private methods -----------------------------------------------\n    # (possibly useful for subclasses to override)\n\n    def _munge_whitespace(self, text):\n        \"\"\"_munge_whitespace(text : string) -> string\n        Munge whitespace in text: expand tabs and convert all other\n        whitespace characters to spaces.  Eg. \" foo\\\\tbar\\\\n\\\\nbaz\"\n        becomes \" foo    bar  baz\".\n        \"\"\"\n        if self.expand_tabs:\n            text = text.expandtabs(self.tabsize)\n        if self.replace_whitespace:\n            for key, val in self.unicode_whitespace_trans.items():\n                text = text.replace(key, val)\n        return text\n\n\n    def _split(self, text):\n        \"\"\"_split(text : string) -> [string]\n        Split the text to wrap into indivisible chunks.  Chunks are\n        not quite the same as words; see _wrap_chunks() for full\n        details.  As an example, the text\n          Look, goof-ball -- use the -b option!\n        breaks into the following chunks:\n          'Look,', ' ', 'goof-', 'ball', ' ', '--', ' ',\n          'use', ' ', 'the', ' ', '-b', ' ', 'option!'\n        if break_on_hyphens is True, or in:\n          'Look,', ' ', 'goof-ball', ' ', '--', ' ',\n          'use', ' ', 'the', ' ', '-b', ' ', option!'\n        otherwise.\n        \"\"\"\n        if self.break_on_hyphens is True:\n            chunks = self.wordsep_re.split(text)\n            if \"--\" in text:\n                chunks = [item \n                            for sublist in [self.em_dash.split(chunk) for chunk in chunks] \n                                for item in sublist]\n        else:\n            chunks = self.wordsep_simple_re.split(text)\n        chunks = [c for c in chunks if c]\n        return chunks\n\n    def _fix_sentence_endings(self, chunks):\n        \"\"\"_fix_sentence_endings(chunks : [string])\n        Correct for sentence endings buried in 'chunks'.  Eg. when the\n        original text contains \"... foo.\\\\nBar ...\", munge_whitespace()\n        and split() will convert that to [..., \"foo.\", \" \", \"Bar\", ...]\n        which has one too few spaces; this method simply changes the one\n        space to two.\n        \"\"\"\n        i = 0\n        # patsearch = self.sentence_end_re.search\n        while i < len(chunks)-1:\n            if chunks[i+1] == \" \" and re.search(self.sentence_end_re, chunks[i]) and chunks[i][-1] in \".!?\\\"\\'\":\n                chunks[i+1] = \"  \"\n                i += 2\n            else:\n                i += 1\n\n    def _handle_long_word(self, reversed_chunks, cur_line, cur_len, width):\n        \"\"\"_handle_long_word(chunks : [string],\n                             cur_line : [string],\n                             cur_len : int, width : int)\n        Handle a chunk of text (most likely a word, not whitespace) that\n        is too long to fit in any line.\n        \"\"\"\n        # Figure out when indent is larger than the specified width, and make\n        # sure at least one character is stripped off on every pass\n        if width < 1:\n            space_left = 1\n        else:\n            space_left = width - cur_len\n\n        # If we're allowed to break long words, then do so: put as much\n        # of the next chunk onto the current line as will fit.\n        if self.break_long_words:\n            cur_line.append(reversed_chunks[-1][:space_left])\n            reversed_chunks[-1] = reversed_chunks[-1][space_left:]\n\n        # Otherwise, we have to preserve the long word intact.  Only add\n        # it to the current line if there's nothing already there --\n        # that minimizes how much we violate the width constraint.\n        elif not cur_line:\n            cur_line.append(reversed_chunks.pop())\n\n        # If we're not allowed to break long words, and there's already\n        # text on the current line, do nothing.  Next time through the\n        # main loop of _wrap_chunks(), we'll wind up here again, but\n        # cur_len will be zero, so the next line will be entirely\n        # devoted to the long word that we can't handle right now.\n\n    def _wrap_chunks(self, chunks):\n        \"\"\"_wrap_chunks(chunks : [string]) -> [string]\n        Wrap a sequence of text chunks and return a list of lines of\n        length 'self.width' or less.  (If 'break_long_words' is false,\n        some lines may be longer than this.)  Chunks correspond roughly\n        to words and the whitespace between them: each chunk is\n        indivisible (modulo 'break_long_words'), but a line break can\n        come between any two chunks.  Chunks should not have internal\n        whitespace; ie. a chunk is either all whitespace or a \"word\".\n        Whitespace chunks will be removed from the beginning and end of\n        lines, but apart from that whitespace is preserved.\n        \"\"\"\n        lines = []\n        if self.width <= 0:\n            raise ValueError(\"invalid width %r (must be > 0)\" % self.width)\n        if self.max_lines is not None:\n            if self.max_lines > 1:\n                indent = self.subsequent_indent\n            else:\n                indent = self.initial_indent\n            if len(indent) + len(self.placeholder.lstrip()) > self.width:\n                raise ValueError(\"placeholder too large for max width\")\n\n        # Arrange in reverse order so items can be efficiently popped\n        # from a stack of chucks.\n        chunks.reverse()\n\n        while chunks:\n\n            # Start the list of chunks that will make up the current line.\n            # cur_len is just the length of all the chunks in cur_line.\n            cur_line = []\n            cur_len = 0\n\n            # Figure out which static string will prefix this line.\n            if lines:\n                indent = self.subsequent_indent\n            else:\n                indent = self.initial_indent\n\n            # Maximum width for this line.\n            width = self.width - len(indent)\n\n            # First chunk on line is whitespace -- drop it, unless this\n            # is the very beginning of the text (ie. no lines started yet).\n            if self.drop_whitespace and chunks[-1].strip() == '' and lines:\n                del chunks[-1]\n\n            while chunks:\n                l = len(chunks[-1])\n\n                # Can at least squeeze this chunk onto the current line.\n                if cur_len + l <= width:\n                    cur_line.append(chunks.pop())\n                    cur_len += l\n\n                # Nope, this line is full.\n                else:\n                    break\n\n            # The current line is full, and the next chunk is too big to\n            # fit on *any* line (not just this one).\n            if chunks and len(chunks[-1]) > width:\n                self._handle_long_word(chunks, cur_line, cur_len, width)\n                cur_len = sum(map(len, cur_line))\n\n            # If the last chunk on this line is all whitespace, drop it.\n            if self.drop_whitespace and cur_line and cur_line[-1].strip() == '':\n                cur_len -= len(cur_line[-1])\n                del cur_line[-1]\n\n            if cur_line:\n                if (self.max_lines is None or\n                    len(lines) + 1 < self.max_lines or\n                    (not chunks or\n                     self.drop_whitespace and\n                     len(chunks) == 1 and\n                     not chunks[0].strip()) and cur_len <= width):\n                    # Convert current line back to a string and store it in\n                    # list of all lines (return value).\n                    lines.append(indent + ''.join(cur_line))\n                else:\n                    while cur_line:\n                        if (cur_line[-1].strip() and\n                            cur_len + len(self.placeholder) <= width):\n                            cur_line.append(self.placeholder)\n                            lines.append(indent + ''.join(cur_line))\n                            break\n                        cur_len -= len(cur_line[-1])\n                        del cur_line[-1]\n                    else:\n                        if lines:\n                            prev_line = lines[-1].rstrip()\n                            if (len(prev_line) + len(self.placeholder) <=\n                                    self.width):\n                                lines[-1] = prev_line + self.placeholder\n                                break\n                        lines.append(indent + self.placeholder.lstrip())\n                    break\n\n        return lines\n\n    def _split_chunks(self, text):\n        text = self._munge_whitespace(text)\n        return self._split(text)\n\n    # -- Public interface ----------------------------------------------\n\n    def wrap(self, text):\n        \"\"\"wrap(text : string) -> [string]\n        Reformat the single paragraph in 'text' so it fits in lines of\n        no more than 'self.width' columns, and return a list of wrapped\n        lines.  Tabs in 'text' are expanded with string.expandtabs(),\n        and all other whitespace characters (including newline) are\n        converted to space.\n        \"\"\"\n        chunks = self._split_chunks(text)\n        if self.fix_sentence_endings:\n            self._fix_sentence_endings(chunks)\n        return self._wrap_chunks(chunks)\n\n    def fill(self, text):\n        \"\"\"fill(text : string) -> string\n        Reformat the single paragraph in 'text' to fit in lines of no\n        more than 'self.width' columns, and return a new string\n        containing the entire wrapped paragraph.\n        \"\"\"\n        return \"\\n\".join(self.wrap(text))\n\n\n# -- Convenience interface ---------------------------------------------\n\ndef wrap(text, width=70, **kwargs):\n    \"\"\"Wrap a single paragraph of text, returning a list of wrapped lines.\n    Reformat the single paragraph in 'text' so it fits in lines of no\n    more than 'width' columns, and return a list of wrapped lines.  By\n    default, tabs in 'text' are expanded with string.expandtabs(), and\n    all other whitespace characters (including newline) are converted to\n    space.  See TextWrapper class for available keyword args to customize\n    wrapping behaviour.\n    \"\"\"\n    w = TextWrapper(width=width, **kwargs)\n    return w.wrap(text)\n\ndef fill(text, width=70, **kwargs):\n    \"\"\"Fill a single paragraph of text, returning a new string.\n    Reformat the single paragraph in 'text' to fit in lines of no more\n    than 'width' columns, and return a new string containing the entire\n    wrapped paragraph.  As with wrap(), tabs are expanded and other\n    whitespace characters converted to space.  See TextWrapper class for\n    available keyword args to customize wrapping behaviour.\n    \"\"\"\n    w = TextWrapper(width=width, **kwargs)\n    return w.fill(text)\n\ndef shorten(text, width, **kwargs):\n    \"\"\"Collapse and truncate the given text to fit in the given width.\n    The text first has its whitespace collapsed.  If it then fits in\n    the *width*, it is returned as is.  Otherwise, as many words\n    as possible are joined and then the placeholder is appended::\n        >>> textwrap.shorten(\"Hello  world!\", width=12)\n        'Hello world!'\n        >>> textwrap.shorten(\"Hello  world!\", width=11)\n        'Hello [...]'\n    \"\"\"\n    w = TextWrapper(width=width, max_lines=1, **kwargs)\n    return w.fill(' '.join(text.strip().split()))\n\n\n# -- Loosely related functionality -------------------------------------\n\n# _whitespace_only_re = re.compile('^[ \\t]+$', re.MULTILINE)\n# _leading_whitespace_re = re.compile('(^[ \\t]*)(?:[^ \\t\\n])', re.MULTILINE)\n\ndef dedent(text):\n    \"\"\"Remove any common leading whitespace from every line in `text`.\n    This can be used to make triple-quoted strings line up with the left\n    edge of the display, while still presenting them in the source code\n    in indented form.\n    Note that tabs and spaces are both treated as whitespace, but they\n    are not equal: the lines \"  hello\" and \"\\\\thello\" are\n    considered to have no common leading whitespace.\n    Entirely blank lines are normalized to a newline character.\n    \"\"\"\n    # Look for the longest leading string of spaces and tabs common to\n    # all lines.\n    margin = None\n\n    indents = re.findall(r'(^[ \\t]*)(?:[^ \\t\\n])',text, re.MULTILINE)\n    for indent in indents:\n        if margin is None:\n            margin = indent\n\n        # Current line more deeply indented than previous winner:\n        # no change (previous winner is still on top).\n        elif indent.startswith(margin):\n            pass\n\n        # Current line consistent with and no deeper than previous winner:\n        # it's the new winner.\n        elif margin.startswith(indent):\n            margin = indent\n\n        # Find the largest common whitespace between current line and previous\n        # winner.\n        else:\n            for i, (x, y) in enumerate(zip(margin, indent)):\n                if x != y:\n                    margin = margin[:i]\n                    break\n    # sanity check (testing/debugging only)\n    if 0 and margin:\n        for line in text.split(\"\\n\"):\n            assert not line or line.startswith(margin), \\\n                   \"line = %r, margin = %r\" % (line, margin)\n\n    if margin:\n        lines = [line[len(margin):] \n                    if line.strip()\n                        else line.strip() \n                            for line in text.split(\"\\n\")]\n        text = \"\\n\".join(lines)\n    return text\n\n\ndef indent(text, prefix, predicate=None):\n    \"\"\"Adds 'prefix' to the beginning of selected lines in 'text'.\n    If 'predicate' is provided, 'prefix' will only be added to the lines\n    where 'predicate(line)' is True. If 'predicate' is not provided,\n    it will default to adding 'prefix' to all non-empty lines that do not\n    consist solely of whitespace characters.\n    \"\"\"\n    if predicate is None:\n        def predicate(line):\n            return line.strip()\n\n    def prefixed_lines():\n        for line in text.splitlines(True):\n            yield (prefix + line if predicate(line) else line)\n    return ''.join(prefixed_lines())\n\n\nif __name__ == \"__main__\":\n    #print dedent(\"\\tfoo\\n\\tbar\")\n    #print dedent(\"  \\thello there\\n  \\t  how are you?\")\n    print(dedent(\"Hello there.\\n  This is indented.\"))","src/lib/this.py":'raise NotImplementedError("this is not yet implemented in Skulpt")\n',"src/lib/threading.py":'raise NotImplementedError("threading is not yet implemented in Skulpt")\n',"src/lib/time.js":'var $builtinmodule=function(){function check_struct_time(a){if(!(a instanceof b))throw new Sk.builtin.TypeError("Required argument \'struct_time\' must be of type: \'struct_time\'");var c,d=a.v.length,e=a.v;for(c=0;c<d;++c)if(!Sk.builtin.checkInt(e[c]))throw new Sk.builtin.TypeError("struct_time may only contain integers");return!0}function padLeft(a,b,d){var c=a.toString();return Array(b-c.length+1).join(d||" ")+c}function isLeapYear(a){return 0==(3&a)&&(0!=a%100||0==a%400)}function getDayOfYear(a,b){b=b||!1;var c=b?a.getUTCMonth():a.getMonth(),d=b?a.getUTCDate():a.getDate(),e=[0,31,59,90,120,151,181,212,243,273,304,334][c]+d;return 1<c&&isLeapYear(b?a.getUTCFullYear():a.getFullYear())&&e++,e}function stdTimezoneOffset(){var a=Math.max,b=new Date(2002,0,1),c=new Date(2002,6,1);return a(b.getTimezoneOffset(),c.getTimezoneOffset())}function dst(a){return a.getTimezoneOffset()<stdTimezoneOffset()}function timeZoneName(a){var b,c=/\\((.*)\\)/.exec(a.toString());if(null!=this.navigator&&(b=this.navigator.userLanguage||this.navigator.language),c&&1<c.length)return c[1];if(void 0===b)return null;try{var d=a.toLocaleString(b,{timeZoneName:"short"});return c=d.split(" "),c[c.length-1]}catch(a){return null}}function date_to_struct_time(a,c){return c=c||!1,new b([Sk.builtin.assk$(c?a.getUTCFullYear():a.getFullYear()),Sk.builtin.assk$((c?a.getUTCMonth():a.getMonth())+1),Sk.builtin.assk$(c?a.getUTCDate():a.getDate()),Sk.builtin.assk$(c?a.getUTCHours():a.getHours()),Sk.builtin.assk$(c?a.getUTCMinutes():a.getMinutes()),Sk.builtin.assk$(c?a.getUTCSeconds():a.getSeconds()),Sk.builtin.assk$(((c?a.getUTCDay():a.getDay())+6)%7),Sk.builtin.assk$(getDayOfYear(a,c)),Sk.builtin.assk$(c?0:dst(a)?1:0)])}function from_seconds(a,b){var c=new Date;if(a){Sk.builtin.pyCheckType("secs","number",Sk.builtin.checkNumber(a));var d=Sk.builtin.asnum$(a);c.setTime(1e3*d)}return date_to_struct_time(c,b)}function asctime_f(a){if(Sk.builtin.pyCheckArgsLen("asctime",arguments.length,0,1),!a||Sk.builtin.checkNone(a)?a=from_seconds():!(a instanceof b)&&(a=new b(a)),a instanceof Sk.builtin.tuple&&9==a.v.length){var e=[d[Sk.builtin.asnum$(a.v[6])],c[Sk.builtin.asnum$(a.v[1])-1],padLeft(Sk.builtin.asnum$(a.v[2]).toString(),2,"0"),padLeft(Sk.builtin.asnum$(a.v[3]).toString(),2,"0")+":"+padLeft(Sk.builtin.asnum$(a.v[4]).toString(),2,"0")+":"+padLeft(Sk.builtin.asnum$(a.v[5]).toString(),2,"0"),padLeft(Sk.builtin.asnum$(a.v[0]).toString(),4,"0")];return new Sk.builtin.str(e.join(" "))}}function mktime_f(a){if(Sk.builtin.pyCheckArgsLen("mktime",arguments.length,1,1),a instanceof Sk.builtin.tuple&&9==a.v.length){var b=new Date(Sk.builtin.asnum$(a.v[0]),Sk.builtin.asnum$(a.v[1])-1,Sk.builtin.asnum$(a.v[2]),Sk.builtin.asnum$(a.v[3]),Sk.builtin.asnum$(a.v[4]),Sk.builtin.asnum$(a.v[5]));return Sk.builtin.assk$(b.getTime()/1e3,void 0)}throw new Sk.builtin.TypeError("mktime() requires a struct_time or 9-tuple")}var a={__package__:new Sk.builtin.str("")},b=Sk.builtin.make_structseq("time","struct_time",{tm_year:"year, for example, 1993",tm_mon:"month of year, range [1, 12]",tm_mday:"day of month, range [1, 31]",tm_hour:"hours, range [0, 23]",tm_min:"minutes, range [0, 59]",tm_sec:"seconds, range [0, 61]",tm_wday:"day of week, range [0, 6], Monday is 0",tm_yday:"day of year, range [1, 366]",tm_isdst:"1 if summer time is in effect, 0 if not, and -1 if unknown"});a.struct_time=b,a.time=new Sk.builtin.func(function(){Sk.builtin.pyCheckArgsLen("time",arguments.length,0,0);var a=Date.now();return this.performance&&this.performance.now&&(a+=performance.now()%1),Sk.builtin.assk$(a/1e3,void 0)}),a.sleep=new Sk.builtin.func(function(a){return Sk.builtin.pyCheckArgsLen("sleep",arguments.length,1,1),Sk.builtin.pyCheckType("delay","float",Sk.builtin.checkNumber(a)),new Sk.misceval.promiseToSuspension(new Promise(function(b){Sk.setTimeout(function(){b(Sk.builtin.none.none$)},1e3*Sk.ffi.remapToJs(a))}))}),a.localtime=new Sk.builtin.func(function(a){return Sk.builtin.pyCheckArgsLen("localtime",arguments.length,0,1),from_seconds(a,!1)}),a.gmtime=new Sk.builtin.func(function(a){return Sk.builtin.pyCheckArgsLen("gmtime",arguments.length,0,1),from_seconds(a,!0)});var c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return a.asctime=new Sk.builtin.func(asctime_f),a.ctime=new Sk.builtin.func(function(a){return Sk.builtin.pyCheckArgsLen("ctime",arguments.length,0,1),asctime_f(from_seconds(a))}),a.mktime=new Sk.builtin.func(mktime_f),a.timezone=new Sk.builtin.int_(60*stdTimezoneOffset()),a.altzone=new Sk.builtin.int_(60*function altTimezoneOffset(){var a=Math.min,b=new Date(2002,0,1),c=new Date(2002,6,1);return a(b.getTimezoneOffset(),c.getTimezoneOffset())}()),a.daylight=new Sk.builtin.int_(dst(new Date)?1:0),a.tzname=new Sk.builtin.tuple(function timeZoneNames(){var a=new Date(2002,0,1),b=new Date(2002,6,1);return dst(a)?[new Sk.builtin.str(timeZoneName(b)),new Sk.builtin.str(timeZoneName(a))]:[new Sk.builtin.str(timeZoneName(a)),new Sk.builtin.str(timeZoneName(b))]}()),a.accept2dyear=Sk.builtin.assk$(1),a.clock=new Sk.builtin.func(function(){var a=0;return a=this.performance&&this.performance.now?performance.now()/1e3:new Date().getTime()/1e3,new Sk.builtin.float_(a)}),a.strftime=new Sk.builtin.func(function strftime_f(a,c){var d;if(Sk.builtin.pyCheckArgsLen("strftime",arguments.length,1,2),!Sk.builtin.checkString(a))throw new Sk.builtin.TypeError("format must be a string");return c?!(c instanceof b)&&(c=new b(c)):c=from_seconds(),check_struct_time(c),d=Sk.ffi.remapToJs(a),Sk.ffi.remapToPy(strftime(d,new Date(1e3*mktime_f(c).v)))}),a.tzset=new Sk.builtin.func(function tzset_f(){throw new Sk.builtin.NotImplementedError("time.tzset() is not yet implemented")}),a.strptime=new Sk.builtin.func(function strptime_f(a,b){Sk.builtin.pyCheckArgsLen("strptime",arguments.length,1,2),Sk.builtin.pyCheckType("string","string",Sk.builtin.checkString(a)),void 0===b?b=new Sk.builtin.str("%a %b %d %H:%M:%S %Y"):Sk.builtin.pyCheckType("format","string",Sk.builtin.checkString(b));let c=date_to_struct_time(strptime(Sk.ffi.remapToJs(a),Sk.ffi.remapToJs(b),!0));return c.v[8]=new Sk.builtin.int_(-1),c}),a};',"src/lib/timeit.py":'raise NotImplementedError("timeit is not yet implemented in Skulpt")\n',"src/lib/toaiff.py":'raise NotImplementedError("toaiff is not yet implemented in Skulpt")\n',"src/lib/token.js":'var $builtinmodule=function(){var a={__file__:"/src/lib/token.py"};const b=[];for(token in Sk.token.tok_name){const c=Sk.token.tok_name[token].slice(2),d=parseInt(token,10);b.push(Sk.ffi.remapToPy(d)),b.push(Sk.ffi.remapToPy(c)),a[c]=Sk.ffi.remapToPy(d)}return a.tok_name=new Sk.builtin.dict(b),a.ISTERMINAL=new Sk.builtin.func(function(a){return Sk.builtin.pyCheckArgsLen("ISTERMINAL",arguments.length,1,1),Sk.token.ISTERMINAL(Sk.ffi.remapToJs(a))}),a.ISNONTERMINAL=new Sk.builtin.func(function(a){return Sk.builtin.pyCheckArgsLen("ISNONTERMINAL",arguments.length,1,1),Sk.token.ISNONTERMINAL(Sk.ffi.remapToJs(a))}),a.ISEOF=new Sk.builtin.func(function(a){return Sk.builtin.pyCheckArgsLen("ISEOF",arguments.length,1,1),Sk.token.ISEOF(Sk.ffi.remapToJs(a))}),a};',"src/lib/tokenize.js":'var $builtinmodule=function(){var a={tokenize:new Sk.builtin.func(function(a){Sk.builtin.pyCheckArgsLen("tokenize",1,1),Sk.builtin.checkFunction(a);const b=[];return Sk._tokenize("<stdin>",function jsReadline(){const b=Sk.misceval.callsimArray(a);return Sk.ffi.remapToJs(b)},"UTF-8",function receiveToken(a){b.push(new Sk.builtin.tuple([Sk.ffi.remapToPy(a.type),Sk.ffi.remapToPy(a.string),new Sk.builtin.tuple([Sk.ffi.remapToPy(a.start[0]),Sk.ffi.remapToPy(a.start[1])]),new Sk.builtin.tuple([Sk.ffi.remapToPy(a.end[0]),Sk.ffi.remapToPy(a.end[1])]),Sk.ffi.remapToPy(a.line)]))}),new Sk.builtin.list(b)})};return a};',"src/lib/trace.py":'raise NotImplementedError("trace is not yet implemented in Skulpt")\n',"src/lib/traceback.py":'raise NotImplementedError("traceback is not yet implemented in Skulpt")\n',"src/lib/tty.py":'raise NotImplementedError("tty is not yet implemented in Skulpt")\n',"src/lib/turtle.js":'var $builtinmodule=function(){"use strict";var e=function getConfiguredTarget(){var e,t;for(e=Sk.TurtleGraphics&&Sk.TurtleGraphics.target||"turtle",t="string"==typeof e?document.getElementById(e):e;t.firstChild;)t.removeChild(t.firstChild);return t}();return e.turtleInstance?e.turtleInstance.reset():e.turtleInstance=function generateTurtleModule(e){var t=Math.round,r=Math.max,n=Math.sqrt,a=Math.min,s=Math.abs,o=Math.PI,d=Math.atan2,_=Math.sin,c=Math.cos;function getAsset(e){var t=g.assets,r="function"==typeof t?t(e):t[e];return"string"==typeof r?new Promise(function(t,n){var a=new Image;a.onload=function(){g.assets[e]=this,t(a)},a.onerror=function(){n(new Error("Missing asset: "+r))},a.src=r}):new InstantPromise(void 0,r)}function InstantPromise(e,t){this.lastResult=t,this.lastError=e}function FrameManager(){this.reset()}function getFrameManager(){return A||(A=new FrameManager),A}function MouseHandler(){var t=this;for(var r in this._target=getTarget(),this._managers={},this._handlers={mousedown:function(r){t.onEvent("mousedown",r)},mouseup:function(r){t.onEvent("mouseup",r)},mousemove:function(r){t.onEvent("mousemove",r)}},this._handlers)this._target.addEventListener(r,this._handlers[r])}function EventManager(e,t){this._type=e,this._target=t,this._handlers=void 0,getMouseHandler().addManager(e,this)}function Turtle(e){if(getFrameManager().addTurtle(this),this._screen=getScreen(),this._managers={},this._shape=e.v,!v.hasOwnProperty(this._shape))throw new Sk.builtin.ValueError("Shape:\'"+this._shape+"\' not in default shape, please check shape again!");this.reset()}function Screen(){var e,t;this._frames=1,this._delay=void 0,this._bgcolor="none",this._mode="standard",this._managers={},this._keyLogger={},e=(g.worldWidth||g.width||getWidth())/2,t=(g.worldHeight||g.height||getHeight())/2,this.setUpWorld(-e,-t,e,t)}function ensureAnonymous(){return f||(f=Sk.misceval.callsimArray(y.Turtle)),f.instance}function getTarget(){return e}function getScreen(){return p||(p=new Screen),p}function getMouseHandler(){return h||(h=new MouseHandler),h}function getWidth(){return 0|(p&&p._width||g.width||getTarget().clientWidth||T.width)}function getHeight(){return 0|(p&&p._height||g.height||getTarget().clientHeight||T.height)}function createLayer(e,t){var r,n=document.createElement("canvas"),a=getWidth(),s=getHeight(),l=getTarget().firstChild?-s+"px":"0";return n.width=a,n.height=s,n.style.position="relative",n.style.display="block",n.style.setProperty("margin-top",l),n.style.setProperty("z-index",e),t&&(n.style.display="none"),getTarget().appendChild(n),r=n.getContext("2d"),r.lineCap="round",r.lineJoin="round",applyWorld(getScreen(),r),r}function cancelAnimationFrame(){u&&((window.cancelAnimationFrame||window.mozCancelAnimationFrame)(u),u=void 0),m&&(window.clearTimeout(m),m=void 0)}function applyWorld(e,t){var r=e.llx,n=e.lly,a=e.urx,s=e.ury,l=e.xScale,i=e.yScale;t&&(clearLayer(t),t.restore(),t.save(),t.scale(1/l,1/i),t.translate(-r,-s))}function pushUndo(e){var t,r,n;if(g.allowUndo&&e._bufferSize){for(e._undoBuffer||(e._undoBuffer=[]);e._undoBuffer.length>e._bufferSize;)e._undoBuffer.shift();for(r={},t=["x","y","angle","radians","color","fill","down","filling","shown","shape","size"],n=0;n<t.length;n++)r[t[n]]=e["_"+t[n]];return e._undoBuffer.push(r),e.addUpdate(function(){r.fillBuffer=this.fillBuffer?this.fillBuffer.slice():void 0,e._paper&&e._paper.canvas&&(r.image=e._paper.canvas.toDataURL())},!1)}}function popUndo(e){var t;if(e._bufferSize&&e._undoBuffer&&(t=e._undoBuffer.pop(),!!t)){for(var r in t)"image"!=r&&"fillBuffer"!==r&&(e["_"+r]=t[r]);return e.addUpdate(function(){var e;t.image&&(L.src=t.image,e=L),clearLayer(this.context(),!1,L),delete t.image},!0,t)}}function removeLayer(e){e&&e.canvas&&e.canvas.parentNode&&e.canvas.parentNode.removeChild(e.canvas)}function clearLayer(e,t,r){e&&(e.save(),e.setTransform(1,0,0,1,0,0),t?(e.fillStyle=t,e.fillRect(0,0,e.canvas.width,e.canvas.height)):e.clearRect(0,0,e.canvas.width,e.canvas.height),r&&e.drawImage(r,0,0),e.restore())}function drawTurtle(e,t){var r,n,a,s=v[e.shape],l=getScreen(),u=getWidth(),m=getHeight(),p=l.xScale,g=l.yScale;if(t){if(r=c(e.radians)/p,n=_(e.radians)/g,a=d(n,r)-o/2,t.save(),t.translate(e.x,e.y),t.scale(p,g),s.nodeName){var f=s.naturalWidth,h=s.naturalHeight;t.drawImage(s,0,0,f,h,-f/2,-h/2,f,h)}else{t.rotate(a),t.beginPath(),t.lineWidth=1,t.strokeStyle=e.color,t.fillStyle=e.fill,t.moveTo(-s[0][0],s[0][1]);for(var $=1;$<s.length;$++)t.lineTo(-s[$][0],s[$][1]);t.closePath(),t.fill(),t.stroke()}t.restore()}}function drawDot(e,t){var r=this.context(),n=getScreen(),l=n.xScale,i=n.yScale;r&&(r.beginPath(),r.moveTo(this.x,this.y),e*=a(s(l),s(i)),r.arc(this.x,this.y,e/2,0,Turtle.RADIANS),r.closePath(),r.fillStyle=t||this.color,r.fill())}function measureText(e,t){return t&&(S.font=t),S.measureText(e).width}function drawText(e,t,r){var n=this.context();n&&(n.save(),r&&(n.font=r),t&&t.match(/^(left|right|center)$/)&&(n.textAlign=t),n.scale(1,-1),n.fillStyle=this.fill,n.fillText(e,this.x,-this.y),n.restore())}function drawLine(e,t){var r=this.context();r&&(t&&(r.beginPath(),r.moveTo(this.x,this.y)),r.lineWidth=this.size*getScreen().lineScale,r.strokeStyle=this.color,r.lineTo(e.x,e.y),r.stroke())}function drawFill(){var e,t=this.context(),r=this.fillBuffer;if(t&&r&&r.length){for(t.save(),t.beginPath(),t.moveTo(r[0].x,r[0].y),e=1;e<r.length;e++)t.lineTo(r[e].x,r[e].y);for(t.closePath(),t.fillStyle=this.fill,t.fill(),e=1;e<r.length;e++)r[e].stroke&&(t.beginPath(),t.moveTo(r[e-1].x,r[e-1].y),t.lineWidth=r[e].size*getScreen().lineScale,t.strokeStyle=r[e].color,t.lineTo(r[e].x,r[e].y),t.stroke());t.restore()}}function partialTranslate(e,t,r,n,a){return function(){return e.addUpdate(function(e){this.down&&drawLine.call(this,e,n)},a,{x:t,y:r},n)}}function translate(e,a,l,o,d,_,c){var u,m=e._computed_speed,p=getScreen(),g=s(p.xScale),f=s(p.yScale),h=a,$=l,w=n(o*o*g+d*d*f),b=m?t(r(1,w/m)):1,v=getFrameManager().willRenderNext()?Promise.resolve():new InstantPromise;for(e.addUpdate(function(){this.filling&&this.fillBuffer.push({x:this.x,y:this.y,stroke:this.down,color:this.color,size:this.size})},!1),u=0;u<b;u++)h=a+o/b*(u+1),$=l+d/b*(u+1),v=v.then(partialTranslate(e,h,$,_,m||!c)),_=!1;return v.then(function(){return[a+o,l+d]})}function partialRotate(e,t,r,n){return function(){return e.addUpdate(void 0,n,{angle:t,radians:r})}}function rotate(e,n,a,l){var o,d=e._computed_speed,_=360*(a/e._fullCircle),c=d?t(r(1,s(_)/d)):1,u={},m=getFrameManager().willRenderNext()?Promise.resolve():new InstantPromise;for(o=0;o<c;o++)calculateHeading(e,n+a/c*(o+1),u),m=m.then(partialRotate(e,u.angle,u.radians,d||!l));return m.then(function(){return calculateHeading(e,n+a)})}function getCoordinates(e,t){return void 0===t&&(t=e&&(e.y||e._y||e[1])||0,e=e&&(e.x||e._x||e[0])||0),{x:e,y:t}}function hexToRGB(e){var t,r,n;return(t=/^rgba?\\((\\d+),(\\d+),(\\d+)(?:,([.\\d]+))?\\)$/.exec(e))?(n=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])],t[4]&&n.push(parseFloat(t[4]))):/^#?[a-f\\d]{3}|[a-f\\d]{6}$/i.exec(e)?(4===e.length&&(e=e.replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i,function(e,t,r,n){return t+t+r+r+n+n})),r=/^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(e),n=[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]):n=e,n}function createColor(e,t,n,s,l){var o;if(void 0!==n&&(t=[t,n,s,l]),t.constructor===Array&&t.length){if(255===e){for(o=0;3>o;o++)if("number"==typeof t[o])t[o]=r(0,a(255,parseInt(t[o])));else throw new Sk.builtin.ValueError("bad color sequence");}else for(o=0;3>o;o++)if("number"!=typeof t[o])throw new Sk.builtin.ValueError("bad color sequence");else if(1>=t[o])t[o]=r(0,a(255,parseInt(255*t[o])));else throw new Sk.builtin.ValueError("bad color sequence");"number"==typeof t[o]?(t[3]=r(0,a(1,t[o])),t="rgba("+t.join(",")+")"):t="rgb("+t.slice(0,3).join(",")+")"}else if("string"==typeof t&&!t.match(/\\s*url\\s*\\(/i))t=t.replace(/\\s+/g,"");else return"black";return t}function calculateHeading(e,t,r){var n=e._angle||0,a=e._radians||0;return r||(r={}),"number"==typeof t&&(e._isRadians?n=a=t%Turtle.RADIANS:e._fullCircle?(n=t%e._fullCircle,a=n/e._fullCircle*Turtle.RADIANS):n=a=0,0>n&&(n+=e._fullCircle,a+=Turtle.RADIANS)),r.angle=n,r.radians=a,r}function pythonToJavascriptFunction(e,t){return function(){var r=Array.prototype.slice.call(arguments),n=r.map(function(e){return Sk.ffi.remapToPy(e)});return"undefined"!=typeof t&&n.unshift(t),Sk.misceval.applyAsync(void 0,e,void 0,void 0,void 0,n).catch(Sk.uncaughtException)}}function addModuleMethod(e,t,r,n){var a,s=r.replace(/^\\$/,""),l=s.replace(/_\\$[a-z]+\\$$/i,""),o=e.prototype[r].length,d=e.prototype[r].minArgs,_=e.prototype[r].co_varnames||[],c=e.prototype[r].returnType,u=e.prototype[r].isSk;void 0===d&&(d=o),a=function(){var e,t,a,s,_,m=Array.prototype.slice.call(arguments,0),p=n?n():m.shift().instance;if(m.length<d||m.length>o)throw _=d===o?"exactly "+o:"between "+d+" and "+o,new Sk.builtin.TypeError(l+"() takes "+_+" positional argument(s) ("+m.length+" given)");for(e=m.length;0<=--e;)void 0!==m[e]&&(m[e]=m[e]instanceof Sk.builtin.func?pythonToJavascriptFunction(m[e]):m[e]instanceof Sk.builtin.method?pythonToJavascriptFunction(m[e].im_func,m[e].im_self):m[e]&&m[e].$d instanceof Sk.builtin.dict&&m[e].instance?m[e].instance:Sk.ffi.remapToJs(m[e]));var g=m.slice(0);for(m=[],e=g.length;0<=e;--e)null!==g[e]&&(m[e]=g[e]);try{t=p[r].apply(p,m)}catch(t){throw window&&window.console&&(window.console.log("wrapped method failed"),window.console.log(t.stack)),t}return t instanceof InstantPromise&&(t=t.lastResult),t instanceof Promise?(t=t.catch(function(t){throw window&&window.console&&(window.console.log("promise failed"),window.console.log(t.stack)),t}),a=new Sk.misceval.Suspension,a.resume=function(){return void 0===s?Sk.builtin.none.none$:Sk.ffi.remapToPy(s)},a.data={type:"Sk.promise",promise:t.then(function(e){return s=e,e})},a):void 0===t?Sk.builtin.none.none$:u?t:"function"==typeof c?c(t):Sk.ffi.remapToPy(t)},a.co_name=new Sk.builtin.str(l),a.co_varnames=_.slice(),a.$defaults=[];for(var m=d;m<_.length;m++)a.$defaults.push(Sk.builtin.none.none$);n||a.co_varnames.unshift("self"),t[s]=new Sk.builtin.func(a)}function initTurtle(e,t){Sk.builtin.pyCheckArgs("__init__",arguments,2,3,!1,!1),e.instance=new Turtle(t),e.instance.skInstance=e}function focusTurtle(e){return void 0!==e&&(w=!!e,w?getTarget().focus():getTarget().blur()),w}function resetTurtle(){for(cancelAnimationFrame(),getScreen().reset(),getFrameManager().reset();e.firstChild;)e.removeChild(e.firstChild);h&&h.reset(),$=0,p=void 0,f=void 0,h=void 0,k=0}function stopTurtle(){cancelAnimationFrame(),h&&h.reset(),$=0,p=void 0,f=void 0,h=void 0,k=0}var u,m,p,g,f,h,y={__name__:new Sk.builtin.str("turtle")},$=0,w=!0,b=1e3/30,v={},k=0,x={},T={target:"turtle",width:400,height:400,worldWidth:0,worldHeight:0,animate:!0,bufferSize:0,allowUndo:!0,assets:{}};e.hasAttribute("tabindex")||e.setAttribute("tabindex",0),x.FLOAT=function(e){return new Sk.builtin.float_(e)},x.COLOR=function(e){if("string"==typeof e)return new Sk.builtin.str(e);for(var t=0;3>t;t++)e[t]=Sk.builtin.assk$(e[t]);return 4===e.length&&(e[3]=new Sk.builtin.float_(e[3])),new Sk.builtin.tuple(e)},x.TURTLE_LIST=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].skInstance);return new Sk.builtin.tuple(t)},v.arrow=[[-10,0],[10,0],[0,10]],v.square=[[10,-10],[10,10],[-10,10],[-10,-10]],v.triangle=[[10,-5.77],[0,11.55],[-10,-5.77]],v.classic=[[0,0],[-5,-9],[0,-7],[5,-9]],v.turtle=[[0,16],[-2,14],[-1,10],[-4,7],[-7,9],[-9,8],[-6,5],[-7,1],[-5,-3],[-8,-6],[-6,-8],[-4,-5],[0,-7],[4,-5],[6,-8],[8,-6],[5,-3],[7,1],[6,5],[9,8],[7,9],[4,7],[1,10],[2,14]],v.circle=[[10,0],[9.51,3.09],[8.09,5.88],[5.88,8.09],[3.09,9.51],[0,10],[-3.09,9.51],[-5.88,8.09],[-8.09,5.88],[-9.51,3.09],[-10,0],[-9.51,-3.09],[-8.09,-5.88],[-5.88,-8.09],[-3.09,-9.51],[-0,-10],[3.09,-9.51],[5.88,-8.09],[8.09,-5.88],[9.51,-3.09]],g=function(){for(var e in Sk.TurtleGraphics||(Sk.TurtleGraphics={}),T)Sk.TurtleGraphics.hasOwnProperty(e)||(Sk.TurtleGraphics[e]=T[e]);return Sk.TurtleGraphics}(),InstantPromise.prototype.then=function(e){if(this.lastError)return this;try{this.lastResult=e(this.lastResult)}catch(t){this.lastResult=void 0,this.lastError=t}return this.lastResult instanceof Promise?this.lastResult:this},InstantPromise.prototype.catch=function(e){if(this.lastError)try{this.lastResult=e(this.lastError),this.lastError=void 0}catch(t){this.lastResult=void 0,this.lastError=t}return this.lastResult instanceof Promise?this.lastResult:this};var A;(function(e){function animationFrame(e){return g.animate?!e&&t?t:function(t){return m=window.setTimeout(t,e||b),m}:function(e){e()}}var t;(function(e){e&&(t=function(t){return u=e(t)})})(window.requestAnimationFrame||window.mozRequestAnimationFrame),e.willRenderNext=function(){return!!(this._buffer&&this._frameCount+1===this.frameBuffer())},e.turtles=function(){return this._turtles},e.addTurtle=function(e){this._turtles.push(e)},e.reset=function(){if(this._turtles)for(var e=this._turtles.length;0<=--e;)this._turtles[e].reset();this._turtles=[],this._frames=[],this._frameCount=0,this._buffer=1,this._rate=0,this._animationFrame=animationFrame()},e.addFrame=function(e,t){var r=!1;return t&&(this._frameCount+=1),this.frames().push(e),r=!g.animate||this._buffer&&this._frameCount===this.frameBuffer(),r?this.update():new InstantPromise},e.frames=function(){return this._frames},e.frameBuffer=function(e){return"number"==typeof e&&(this._buffer=0|e,e&&e<=this._frameCount)?this.update():this._buffer},e.refreshInterval=function(e){return"number"==typeof e&&(this._rate=0|e,this._animationFrame=animationFrame(e)),this._rate},e.update=function(){return this._frames&&this._frames.length?this.requestAnimationFrame():new InstantPromise},e.requestAnimationFrame=function(){var e,t,r=this._frames,n=this._animationFrame,a=this._turtles,s=getScreen().spriteLayer();return this._frames=[],this._frameCount=0,new Promise(function(l){n(function paint(){for(t=0;t<r.length;t++)r[t]&&r[t]();for(clearLayer(s),t=0;t<a.length;t++)e=a[t],e.getState().shown&&drawTurtle(e.getState(),s);l()})})}})(FrameManager.prototype),function(e){e.onEvent=function(t,r){function computeCoordinates(){if(!_){var t=getScreen(),l=t.spriteLayer().canvas.getBoundingClientRect();e=0|r.clientX-l.left,n=0|r.clientY-l.top,a=e*t.xScale+t.llx,s=n*t.yScale+t.ury,_=!0}}var e,n,a,s,l,o=this._managers[t],d=this._managers.mousemove,_=!1;if(("mousedown"===t||"mouseup"===t)&&d&&d.length)for(computeCoordinates(),l=d.length;0<=--l;)d[l].test(e,n,a,s)&&d[l].canMove("mousedown"===t);if(o&&o.length)for(computeCoordinates(),l=o.length;0<=--l;)"mousemove"===t&&o[l].canMove()&&o[l].test(e,n,a,s)?o[l].trigger([a,s]):"mousedown"===t&&o[l].test(e,n,a,s)&&o[l].trigger([a,s])},e.reset=function(){this._managers={}},e.addManager=function(e,t){this._managers[e]||(this._managers[e]=[]),this._managers[e].push(t)}}(MouseHandler.prototype),function(e){e.reset=function(){this._handlers=void 0},e.canMove=function(e){return!!(this._target&&this._target.hitTest)&&(void 0!==e&&(this._target.hitTest.hit=e),this._target.hitTest.hit)},e.test=function(e,t,r,n){return this._target&&this._target.hitTest?this._target.hitTest(e,t,r,n):!!this._target},e.trigger=function(e){var t,r=this._handlers;if(r&&r.length)for(t=0;t<r.length;t++)r[t].apply({},e)},e.addHandler=function(e,t){var r=this._handlers;if(!t&&r&&r.length)for(;r.shift(););return"function"==typeof e?void(!r&&(r=this._handlers=[]),r.push(e)):void(r&&!r.length&&this.reset())}}(EventManager.prototype),Turtle.RADIANS=2*o,function(e){function circleRotate(e,t,r){return function(){return e.addUpdate(void 0,!1,{angle:t,radians:r})}}function circleSegment(e,t,r,n,a,s){return function(){return e.translate(t,r,n,a,s,!0)}}e.hitTest=function(e,t){var r=getScreen().hitTestLayer();clearLayer(r),drawTurtle(this.getState(),r);var n=r.getImageData(e,t,1,1).data;return n[3]||n[0]||n[1]||n[2]},e.addUpdate=function(e,t,r){var n=this,a=this.getState(),s=Array.prototype.slice.call(arguments,r?2:3);return getFrameManager().addFrame(function(){if(e&&e.apply(a,s),r)for(var t in r)a[t]=r[t]},t)},e.getState=function(){var e=this;return this._state||(this._state={x:this._x,y:this._y,angle:this._angle,radians:this._radians,shape:this._shape,color:this._color,fill:this._fill,filling:this._filling,size:this._size,speed:this._computed_speed,down:this._down,shown:this._shown,colorMode:this._colorMode,context:function(){return e.getPaper()}}),this._state},e.translate=function(e,t,r,n,a,s){var l=this;return translate(this,e,t,r,n,a,s).then(function(e){l._x=e[0],l._y=e[1]})},e.rotate=function(e,t,r){var n=this;return rotate(this,e,t,r).then(function(e){n._angle=e.angle,n._radians=e.radians})},e.queueMoveBy=function(e,t,r,n){var a=c(r)*n,s=_(r)*n;return this.translate(e,t,a,s,!0)},e.queueTurnTo=function(e,t){return t%=this._fullCircle,0>t&&(t+=this._fullCircle),this.rotate(e,t-e)},e.getManager=function(e){return this._managers[e]||(this._managers[e]=new EventManager(e,this)),this._managers[e]},e.getPaper=function(){return this._paper||(this._paper=createLayer(2))},e.reset=function(){for(var e in this._x=0,this._y=0,this._radians=0,this._angle=0,this._shown=!0,this._down=!0,this._color="black",this._fill="black",this._size=1,this._filling=!1,this._undoBuffer=[],this._speed=3,this._computed_speed=5,this._colorMode=1,this._state=void 0,this._managers)this._managers[e].reset();this._isRadians=!1,this._fullCircle=360,this._bufferSize="number"==typeof g.bufferSize?g.bufferSize:0,removeLayer(this._paper),this._paper=void 0},e.$degrees=function(e){return e="number"==typeof e?s(e):360,this._isRadians=!1,this._angle=e&&this._fullCircle?this._angle/this._fullCircle*e:this._radians=0,this._fullCircle=e,this.addUpdate(void 0,!1,{angle:this._angle,radians:this._radians})},e.$degrees.minArgs=0,e.$degrees.co_varnames=["fullcircle"],e.$degrees.returnType=x.FLOAT,e.$radians=function(){return this._isRadians||(this._isRadians=!0,this._angle=this._radians,this._fullCircle=Turtle.RADIANS),this._angle},e.$radians.returnType=x.FLOAT,e.$position=e.$pos=function(){return[this.$xcor(),this.$ycor()]},e.$position.returnType=function(e){return new Sk.builtin.tuple([new Sk.builtin.float_(e[0]),new Sk.builtin.float_(e[1])])},e.$towards=function(e,t){var r=getCoordinates(e,t),n=o+d(this._y-r.y,this._x-r.x),a=n*(this._fullCircle/Turtle.RADIANS);return a},e.$towards.co_varnames=["x","y"],e.$towards.minArgs=1,e.$towards.returnType=x.FLOAT,e.$distance=function(e,t){var r=getCoordinates(e,t),a=r.x-this._x,s=r.y-this._y;return n(a*a+s*s)},e.$distance.co_varnames=["x","y"],e.$distance.minArgs=1,e.$distance.returnType=x.FLOAT,e.$heading=function(){return 1e-13>s(this._angle)?0:this._angle},e.$heading.returnType=x.FLOAT,e.$xcor=function(){return 1e-13>s(this._x)?0:this._x},e.$xcor.returnType=x.FLOAT,e.$ycor=function(){return 1e-13>s(this._y)?0:this._y},e.$ycor.returnType=x.FLOAT,e.$forward=e.$fd=function(e){return pushUndo(this),this.queueMoveBy(this._x,this._y,this._radians,e)},e.$forward.co_varnames=e.$fd.co_varnames=["distance"],e.$undo=function(){popUndo(this)},e.$undobufferentries=function(){return this._undoBuffer.length},e.$setundobuffer=function(e){this._bufferSize="number"==typeof e?a(s(e),1e3):0},e.$setundobuffer.co_varnames=["size"],e.$backward=e.$back=e.$bk=function(e){return pushUndo(this),this.queueMoveBy(this._x,this._y,this._radians,-e)},e.$backward.co_varnames=e.$back.co_varnames=e.$bk.co_varnames=["distance"],e.$goto_$rw$=e.$setpos=e.$setposition=function(e,t){var r=getCoordinates(e,t);return pushUndo(this),this.translate(this._x,this._y,r.x-this._x,r.y-this._y,!0)},e.$goto_$rw$.co_varnames=e.$setpos.co_varnames=e.$setposition.co_varnames=["x","y"],e.$goto_$rw$.minArgs=e.$setpos.minArgs=e.$setposition.minArgs=1,e.$setx=function(e){return this.translate(this._x,this._y,e-this._x,0,!0)},e.$setx.co_varnames=["x"],e.$sety=function(e){return this.translate(this._x,this._y,0,e-this._y,!0)},e.$sety.co_varnames=["y"],e.$home=function(){var e=this,t=this._angle;return pushUndo(this),e.translate(this._x,this._y,-this._x,-this._y,!0).then(function(){return e.queueTurnTo(t,0)}).then(function(){})},e.$right=e.$rt=function(e){return pushUndo(this),this.rotate(this._angle,-e)},e.$right.co_varnames=e.$rt.co_varnames=["angle"],e.$left=e.$lt=function(e){return pushUndo(this),this.rotate(this._angle,e)},e.$left.co_varnames=e.$lt.co_varnames=["angle"],e.$setheading=e.$seth=function(e){return pushUndo(this),this.queueTurnTo(this._angle,e)},e.$setheading.co_varnames=e.$seth.co_varnames=["angle"],e.$circle=function(e,t,r){var n,d,u,m,p,g,f,h,$,b=this,v=this._x,k=this._y,T=this._angle,A={},L=1/getScreen().lineScale,S=!0;for(pushUndo(this),void 0===t&&(t=b._fullCircle),void 0===r&&(d=s(t)/b._fullCircle,r=1+(0|a(11+s(e*L)/6,59)*d)),u=t/r,m=.5*u,p=2*e*_(u*o/b._fullCircle),0>e?(p=-p,u=-u,m=-m,n=T-t):n=T+t,$=getFrameManager().willRenderNext()?Promise.resolve():new InstantPromise,T+=m,g=0;g<r;g++)calculateHeading(b,T+u*g,A),f=c(A.radians)*p,h=_(A.radians)*p,$=$.then(circleRotate(b,A.angle,A.radians)).then(circleSegment(b,v,k,f,h,S)),v+=f,k+=h,S=!1;return $=$.then(function(){return calculateHeading(b,n,A),b._angle=A.angle,b._radians=A.radians,b.addUpdate(void 0,!0,A)}),$},e.$circle.co_varnames=["radius","extent","steps"],e.$circle.minArgs=1,e.$penup=e.$up=e.$pu=function(){return this._down=!1,this.addUpdate(void 0,!1,{down:!1})},e.$pendown=e.$down=e.$pd=function(){return this._down=!0,this.addUpdate(void 0,!1,{down:!0})},e.$isdown=function(){return this._down},e.$speed=function(e){return void 0===e?this._speed:(this._speed=r(0,a(1e3,e)),this._computed_speed=r(0,2*e-1),this.addUpdate(void 0,!1,{speed:this._computed_speed}))},e.$speed.minArgs=0,e.$speed.co_varnames=["speed"],e.$pencolor=function(e,t,r,n){return void 0===e?hexToRGB(this._color):(this._color=createColor(this._colorMode,e,t,r,n),this.addUpdate(void 0,this._shown,{color:this._color}))},e.$pencolor.co_varnames=["r","g","b","a"],e.$pencolor.minArgs=0,e.$pencolor.returnType=x.COLOR,e.$fillcolor=function(e,t,r,n){return void 0===e?hexToRGB(this._fill):(this._fill=createColor(this._colorMode,e,t,r,n),this.addUpdate(void 0,this._shown,{fill:this._fill}))},e.$fillcolor.co_varnames=["r","g","b","a"],e.$fillcolor.minArgs=0,e.$fillcolor.returnType=x.COLOR,e.$color=function(e,t,r,n){return void 0===e?[this.$pencolor(),this.$fillcolor()]:(void 0===t||void 0!==r?(this._color=createColor(this._colorMode,e,t,r,n),this._fill=this._color):(this._color=createColor(this._colorMode,e),this._fill=createColor(this._colorMode,t)),this.addUpdate(void 0,this._shown,{color:this._color,fill:this._fill}))},e.$color.minArgs=0,e.$color.co_varnames=["color","fill","b","a"],e.$color.returnType=function(e){return new Sk.builtin.tuple([x.COLOR(e[0]),x.COLOR(e[1])])},e.$fill=function(e){this;return void 0===e?this._filling:(e=!!e,e===this._filling)?void 0:(this._filling=e,e?(pushUndo(this),this.addUpdate(void 0,!1,{filling:!0,fillBuffer:[{x:this._x,y:this._y}]})):(pushUndo(this),this.addUpdate(function(){this.fillBuffer.push(this),drawFill.call(this)},!0,{filling:!1,fillBuffer:void 0})))},e.$fill.co_varnames=["flag"],e.$fill.minArgs=0,e.$begin_fill=function(){return this.$fill(!0)},e.$end_fill=function(){return this.$fill(!1)},e.$stamp=function(){return pushUndo(this),this.addUpdate(function(){drawTurtle(this,this.context())},!0)},e.$dot=function(e,t,n,l,i){return pushUndo(this),e=Sk.builtin.asnum$(e),e="number"==typeof e?r(1,0|s(e)):r(this._size+4,2*this._size),t=void 0===t?this._color:createColor(this._colorMode,t,n,l,i),this.addUpdate(drawDot,!0,void 0,e,t)},e.$dot.co_varnames=["size","color","g","b","a"],e.$write=function(e,t,r,n){var a,s,l,i,o,d=this;return pushUndo(this),e+="",n&&n.constructor===Array&&(s="string"==typeof n[0]?n[0]:"Arial",l=(n[1]||"12pt")+"",i="string"==typeof n[2]?n[2]:"normal",/^\\d+$/.test(l)&&(l+="pt"),n=[i,l,s].join(" ")),r||(r="left"),a=this.addUpdate(drawText,!0,void 0,e,r,n),t&&("left"===r||"center"===r)&&(o=measureText(e,n),"center"===r&&(o/=2),a=a.then(function(){var e=d.getState();return d.translate(e.x,e.y,o,0,!0)})),a},e.$write.co_varnames=["message","move","align","font"],e.$write.minArgs=1,e.$pensize=e.$width=function(e){return void 0===e?this._size:(this._size=e,this.addUpdate(void 0,this._shown,{size:e}))},e.$pensize.minArgs=e.$width.minArgs=0,e.$pensize.co_varnames=e.$width.co_varnames=["width"],e.$showturtle=e.$st=function(){return this._shown=!0,this.addUpdate(void 0,!0,{shown:!0})},e.$hideturtle=e.$ht=function(){return this._shown=!1,this.addUpdate(void 0,!0,{shown:!1})},e.$isvisible=function(){return this._shown},e.$shape=function(e){return e&&v[e]?(this._shape=e,this.addUpdate(void 0,this._shown,{shape:e})):this._shape},e.$shape.minArgs=0,e.$shape.co_varnames=["name"],e.$colormode=function(e){return void 0===e?this._colorMode:(this._colorMode=255===e?255:1,this.addUpdate(void 0,this._shown,{colorMode:this._colorMode}))},e.$colormode.minArgs=0,e.$colormode.co_varnames=["cmode"],e.$colormode.returnType=function(e){return 255===e?new Sk.builtin.int_(255):new Sk.builtin.float_(1)},e.$window_width=function(){return this._screen.$window_width()},e.$window_height=function(){return this._screen.$window_height()},e.$tracer=function(e,t){return this._screen.$tracer(e,t)},e.$tracer.minArgs=0,e.$tracer.co_varnames=["n","delay"],e.$update=function(){return this._screen.$update()},e.$delay=function(e){return this._screen.$delay(e)},e.$delay.minArgs=0,e.$delay.co_varnames=["delay"],e.$reset=function(){return this.reset(),this.$clear()},e.$mainloop=e.$done=function(){return this._screen.$mainloop()},e.$clear=function(){return this.addUpdate(function(){clearLayer(this.context())},!0)},e.$dot.minArgs=0,e.$onclick=function(e,t,r){this.getManager("mousedown").addHandler(e,r)},e.$onclick.minArgs=1,e.$onclick.co_varnames=["method","btn","add"],e.$onrelease=function(e,t,r){this.getManager("mouseup").addHandler(e,r)},e.$onrelease.minArgs=1,e.$onrelease.co_varnames=["method","btn","add"],e.$ondrag=function(e,t,r){this.getManager("mousemove").addHandler(e,r)},e.$ondrag.minArgs=1,e.$ondrag.co_varnames=["method","btn","add"],e.$getscreen=function(){return Sk.misceval.callsimArray(y.Screen)},e.$getscreen.isSk=!0,e.$clone=function(){var e=Sk.misceval.callsimOrSuspendArray(y.Turtle);return e.instance._x=this._x,e.instance._y=this._y,e.instance._angle=this._angle,e.instance._radians=this._radians,e.instance._shape=this._shape,e.instance._color=this._color,e.instance._fill=this._fill,e.instance._filling=this._filling,e.instance._size=this._size,e.instance._computed_speed=this._computed_speed,e.instance._down=this._down,e.instance._shown=this._shown,e.instance._colorMode=this._colorMode,e.instance._isRadians=this._isRadians,e.instance._fullCircle=this._fullCircle,e.instance._bufferSize=this._bufferSize,e.instance._undoBuffer=this._undoBuffer,e._clonedFrom=this,e},e.$clone.returnType=function(e){return e},e.$getturtle=e.$getpen=function(){return this.skInstance},e.$getturtle.isSk=!0}(Turtle.prototype),function(e){e.spriteLayer=function(){return this._sprites||(this._sprites=createLayer(3))},e.bgLayer=function(){return this._background||(this._background=createLayer(1))},e.hitTestLayer=function(){return this._hitTest||(this._hitTest=createLayer(0,!0))},e.getManager=function(e){return this._managers[e]||(this._managers[e]=new EventManager(e,this)),this._managers[e]},e.reset=function(){for(var e in this._keyListeners=void 0,this._keyLogger)window.clearInterval(this._keyLogger[e]),window.clearTimeout(this._keyLogger[e]),delete this._keyLogger[e];for(e in this._keyDownListener&&(getTarget().removeEventListener("keydown",this._keyDownListener),this._keyDownListener=void 0),this._keyUpListener&&(getTarget().removeEventListener("keyup",this._keyUpListener),this._keyUpListener=void 0),this._timer&&(window.clearTimeout(this._timer),this._timer=void 0),this._managers)this._managers[e].reset();this._mode="standard",removeLayer(this._sprites),this._sprites=void 0,removeLayer(this._background),this._background=void 0},e.setUpWorld=function(e,t,r,n){var l=this;l.llx=e,l.lly=t,l.urx=r,l.ury=n,l.xScale=(r-e)/getWidth(),l.yScale=-1*(n-t)/getHeight(),l.lineScale=a(s(l.xScale),s(l.yScale))},e.$setup=function(e,t,r,n){return isNaN(parseFloat(e))&&(e=getWidth()),isNaN(parseFloat(t))&&(t=getHeight()),1>=e&&(e=getWidth()*e),1>=t&&(t=getHeight()*t),this._width=e,this._height=t,this._xOffset=void 0===r||isNaN(parseInt(r))?0:parseInt(r),this._yOffset=void 0===n||isNaN(parseInt(n))?0:parseInt(n),"world"===this._mode?this._setworldcoordinates(this.llx,this.lly,this.urx,this.ury):this._setworldcoordinates(-e/2,-t/2,e/2,t/2)},e.$setup.minArgs=0,e.$setup.co_varnames=["width","height","startx","starty"],e.$register_shape=e.$addshape=function(e,t){return t?void(v[e]=t):getAsset(e).then(function(t){v[e]=t})},e.$register_shape.minArgs=1,e.$getshapes=function(){return Object.keys(v)},e.$tracer=function(e,t){return void 0!==e||void 0!==t?("number"==typeof t&&(this._delay=t,getFrameManager().refreshInterval(t)),"number"==typeof e?(this._frames=e,getFrameManager().frameBuffer(e)):void 0):this._frames},e.$tracer.co_varnames=["frames","delay"],e.$tracer.minArgs=0,e.$delay=function(e){return void 0===e?void 0===this._delay?b:this._delay:this.$tracer(void 0,e)},e.$delay.co_varnames=["delay"],e._setworldcoordinates=function(e,t,r,n){var a=this,s=getFrameManager().turtles();return this.setUpWorld(e,t,r,n),this._sprites&&applyWorld(this,this._sprites),this._background&&applyWorld(this,this._background),this.$clear()},e.$setworldcoordinates=function(e,t,r,n){return this._mode="world",this._setworldcoordinates(e,t,r,n)},e.$setworldcoordinates.co_varnames=["llx","lly","urx","ury"],e.minArgs=4,e.$clear=e.$clearscreen=function(){return this.reset(),this.$reset()},e.$update=function(){return getFrameManager().update()},e.$reset=e.$resetscreen=function(){var e=this,t=getFrameManager().turtles();return getFrameManager().addFrame(function(){applyWorld(e,e._sprites),applyWorld(e,e._background);for(var r=0;r<t.length;r++)t[r].reset(),applyWorld(e,t[r]._paper)},!0)},e.$window_width=function(){return getWidth()},e.$window_height=function(){return getHeight()},e.$delay.minArgs=0,e.$turtles=function(){return getFrameManager().turtles()},e.$turtles.returnType=x.TURTLE_LIST,e.$bgpic=function(e){var t;return e?(t=this,getAsset(e).then(function(e){clearLayer(t.bgLayer(),void 0,e)})):this._bgpic},e.$bgpic.minArgs=0,e.$bgpic.co_varnames=["name"],e.$bgcolor=function(e,t,r,n){return void 0===e?hexToRGB(this._bgcolor):(this._bgcolor=createColor(this._colorMode,e,t,r,n),void clearLayer(this.bgLayer(),this._bgcolor))},e.$bgcolor.minArgs=0,e.$bgcolor.co_varnames=["color","g","b","a"],e.$bgcolor.returnType=x.COLOR,e.$mainloop=e.$done=function(){},e.$bye=function(){return Sk.TurtleGraphics.reset()},e.$exitonclick=function(){return this._exitOnClick=!0,this.getManager("mousedown").addHandler(function(){resetTurtle()},!1)},e.$onclick=function(e,t,r){this._exitOnClick||this.getManager("mousedown").addHandler(e,r)},e.$onclick.minArgs=1,e.$onclick.co_varnames=["method","btn","add"];var t={8:/^back(space)?$/i,9:/^tab$/i,13:/^(enter|return)$/i,16:/^shift$/i,17:/^(ctrl|control)$/i,18:/^alt$/i,27:/^esc(ape)?$/i,32:/^space$/i,33:/^page[\\s\\-]?up$/i,34:/^page[\\s\\-]?down$/i,35:/^end$/i,36:/^home$/i,37:/^left([\\s\\-]?arrow)?$/i,38:/^up([\\s\\-]?arrow)?$/i,39:/^right([\\s\\-]?arrow)?$/i,40:/^down([\\s\\-]?arrow)?$/i,45:/^insert$/i,46:/^del(ete)?$/i};e._createKeyRepeater=function(e,t){var r=this;r._keyLogger[t]=window.setTimeout(function(){r._keyListeners[e](),r._keyLogger[t]=window.setInterval(function(){r._keyListeners[e]()},50)},333)},e._createKeyDownListener=function(){var r=this;this._keyDownListener||(this._keyDownListener=function(n){var e=String.fromCharCode;if(focusTurtle()){var a,s,l=n.charCode||n.keyCode,i=e(l).toLowerCase();if(!r._keyLogger[l])for(a in r._keyListeners)if(s=1<a.length&&t[l]&&t[l].test(a),a===i||s){r._keyListeners[a](),r._createKeyRepeater(a,l),n.preventDefault();break}}},getTarget().addEventListener("keydown",this._keyDownListener))},e._createKeyUpListener=function(){var t=this;this._keyUpListener||(this._keyUpListener=function(r){var e=t._keyLogger[r.charCode||r.keyCode];void 0!==e&&(r.preventDefault(),window.clearInterval(e),window.clearTimeout(e),delete t._keyLogger[r.charCode||r.keyCode])},getTarget().addEventListener("keyup",this._keyUpListener))},e.$title=function(e){document.title=e},e.$title.minArgs=1,e.$title.co_varnames=["title"],e.$listen=function(){this._createKeyUpListener(),this._createKeyDownListener()},e.$onkey=function(e,t){if("function"==typeof t){var r=e;e=t,t=r}t=(t+"").toLowerCase(),e&&"function"==typeof e?(!this._keyListeners&&(this._keyListeners={}),this._keyListeners[t]=e):delete this._keyListeners[t]},e.$onkey.minArgs=2,e.$onkey.co_varnames=["method","keyValue"],e.$onscreenclick=function(e,t,r){this.getManager("mousedown").addHandler(e,r)},e.$onscreenclick.minArgs=1,e.$onscreenclick.co_varnames=["method","btn","add"],e.$ontimer=function(e,t){this._timer&&(window.clearTimeout(this._timer),this._timer=void 0),e&&"number"==typeof t&&(this._timer=window.setTimeout(e,r(0,0|t)))},e.$ontimer.minArgs=0,e.$ontimer.co_varnames=["method","interval"]}(Screen.prototype);var L=new Image,S=document.createElement("canvas").getContext("2d");for(var C in initTurtle.co_varnames=["self","shape"],initTurtle.co_name=new Sk.builtin.str("Turtle"),initTurtle.co_argcount=2,initTurtle.$defaults=[Sk.builtin.none.none$,new Sk.builtin.str("classic")],Turtle.prototype)/^\\$[a-z_]+/.test(C)&&addModuleMethod(Turtle,y,C,ensureAnonymous);return addModuleMethod(Screen,y,"$mainloop",getScreen),addModuleMethod(Screen,y,"$done",getScreen),addModuleMethod(Screen,y,"$bye",getScreen),addModuleMethod(Screen,y,"$tracer",getScreen),addModuleMethod(Screen,y,"$update",getScreen),addModuleMethod(Screen,y,"$delay",getScreen),addModuleMethod(Screen,y,"$window_width",getScreen),addModuleMethod(Screen,y,"$window_height",getScreen),addModuleMethod(Screen,y,"$title",getScreen),y.Turtle=Sk.misceval.buildClass(y,function TurtleWrapper(e,t){for(var r in t.__init__=new Sk.builtin.func(initTurtle),Turtle.prototype)/^\\$[a-z_]+/.test(r)&&addModuleMethod(Turtle,t,r)},"Turtle",[]),y.Screen=Sk.misceval.buildClass(y,function ScreenWrapper(e,t){for(var r in t.__init__=new Sk.builtin.func(function(e){e.instance=getScreen()}),Screen.prototype)/^\\$[a-z_]+/.test(r)&&addModuleMethod(Screen,t,r)},"Screen",[]),{skModule:y,reset:resetTurtle,stop:stopTurtle,focus:focusTurtle,Turtle:Turtle,Screen:Screen}}(e),Sk.TurtleGraphics.module=e.turtleInstance.skModule,Sk.TurtleGraphics.reset=e.turtleInstance.reset,Sk.TurtleGraphics.stop=e.turtleInstance.stop,Sk.TurtleGraphics.focus=e.turtleInstance.focus,Sk.TurtleGraphics.raw={Turtle:e.turtleInstance.Turtle,Screen:e.turtleInstance.Screen},e.turtleInstance.skModule};',"src/lib/types.py":'"""\nThis file was modified from CPython.\nCopyright (c) 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010,\n2011, 2012, 2013, 2014, 2015 Python Software Foundation; All Rights Reserved\n"""\n"""Define names for all type symbols known in the standard interpreter.\nTypes that are part of optional modules (e.g. array) are not listed.\n"""\nimport sys\n\n# Iterators in Python aren\'t a matter of type but of protocol.  A large\n# and changing number of builtin types implement *some* flavor of\n# iterator.  Don\'t check the type!  Use hasattr to check for both\n# "__iter__" and "next" attributes instead.\nMappingProxyType = type(type.__dict__)\nWrapperDescriptorType = type(object.__init__)\nMethodWrapperType = type(object().__str__)\nMethodDescriptorType = type(str.join)\nClassMethodDescriptorType = type(dict.__dict__[\'fromkeys\'])\n\nNoneType = type(None)\nTypeType = type\nObjectType = object\nIntType = int\ntry:\n    LongType = long\nexcept: pass\nFloatType = float\nBooleanType = bool\ntry:\n    ComplexType = complex\nexcept NameError:\n    pass\nStringType = str\n\n# StringTypes is already outdated.  Instead of writing "type(x) in\n# types.StringTypes", you should use "isinstance(x, basestring)".  But\n# we keep around for compatibility with Python 2.2.\ntry:\n    UnicodeType = unicode\n    StringTypes = (StringType, UnicodeType)\nexcept NameError:\n    StringTypes = (StringType,)\n\nBufferType = buffer\n\nTupleType = tuple\nListType = list\nDictType = DictionaryType = dict\n\ndef _f(): pass\nFunctionType = type(_f)\nLambdaType = type(lambda: None)         # Same as FunctionType\n#CodeType = type(_f.func_code)\n\ndef _g():\n    yield 1\nGeneratorType = type(_g())\n\nclass _C:\n    def _m(self): pass\nClassType = type(_C)\nUnboundMethodType = type(_C._m)         # Same as MethodType\n_x = _C()\nInstanceType = type(_x)\nMethodType = type(_x._m)\nBuiltinFunctionType = type(len)\nBuiltinMethodType = type([].append)     # Same as BuiltinFunctionType\n\nModuleType = type(sys)\nFileType = file\ntry:\n    XRangeType = xrange\nexcept NameError:\n    pass\n\n# try:\n#     raise TypeError\n# except TypeError:\n#     tb = sys.exc_info()[2]\n#     TracebackType = type(tb)\n#     FrameType = type(tb.tb_frame)\n#     del tb\n\nSliceType = slice\n# EllipsisType = type(Ellipsis)\n\n# DictProxyType = type(TypeType.__dict__)\nNotImplementedType = type(NotImplemented)\n\n# For Jython, the following two types are identical\n# GetSetDescriptorType = type(FunctionType.func_code)\n# MemberDescriptorType = type(FunctionType.func_globals)\n\ndel sys, _f, _g, _C, _x                           # Not for export\n__all__ = list(n for n in globals() if n[:1] != \'_\')\n',"src/lib/unittest/__init__.py":'__author__ = \'bmiller\'\n\'\'\'\nThis is the start of something that behaves like\nthe unittest module from cpython.\n\n\'\'\'\nimport re\n\nclass _AssertRaisesContext(object):\n    """A context manager used to implement TestCase.assertRaises* methods."""\n    def __init__(self, expected, test_case):\n        self.test_case = test_case\n        self.expected = expected\n        self.exception = None\n\n    def _is_subtype(self, expected, basetype):\n        if isinstance(expected, tuple):\n            return all(self._is_subtype(e, basetype) for e in expected)\n        return isinstance(expected, type) and issubclass(expected, basetype)\n\n    def handle(self, args, kwargs):\n        """\n        If args is empty, assertRaises is being used as a\n        context manager, so return self.\n        If args is not empty, call a callable passing positional and keyword\n        arguments.\n        """\n        try:\n            if not self._is_subtype(self.expected, BaseException):\n                raise TypeError(\'assertRaises() arg 1 must be an exception type or tuple of exception types\')\n            if not args:\n                return self\n\n            callable_obj = args[0]\n            args = args[1:]\n            with self:\n                callable_obj(*args, **kwargs) \n\n        finally:\n            # bpo-23890: manually break a reference cycle\n            self = None\n\n    def __enter__(self):\n        return self\n\n    def __exit__(self, exc_type, exc_value, tb):\n        res = True\n        feedback = ""\n        self.exception = exc_value\n        try:\n            act_exc = exc_type.__name__\n        except AttributeError:\n            act_exc = str(exc_type)\n        try:\n            exp_exc = self.expected.__name__\n        except AttributeError:\n            exp_exc = str(self.expected)\n\n        if exc_type is None:\n            res = False\n            feedback = "{} not raised".format(exp_exc)\n        elif not issubclass(exc_type, self.expected):\n            res = False\n            feedback = "Expected {} but got {}".format(exp_exc, act_exc)\n\n        self.test_case.appendResult(res, act_exc, exp_exc, feedback)\n        return True\n\n\nclass TestCase(object):\n    def __init__(self):\n        self.numPassed = 0\n        self.numFailed = 0\n        self.assertPassed = 0\n        self.assertFailed = 0\n        self.verbosity = 1\n        self.tlist = []\n        testNames = {}\n        for name in dir(self):\n            if name[:4] == \'test\' and name not in testNames:\n                self.tlist.append(getattr(self,name))\n                testNames[name]=True\n\n    def setUp(self):\n        pass\n\n    def tearDown(self):\n        pass\n    \n    def cleanName(self,funcName):\n        return funcName.__func__.__name__\n\n    def main(self):\n\n        for func in self.tlist:\n            if self.verbosity > 1:\n                print(\'Running %s\' % self.cleanName(func))\n            try:\n                self.setUp()\n                self.assertPassed = 0\n                self.assertFailed = 0\n                func()\n                self.tearDown()\n                if self.assertFailed == 0:\n                    self.numPassed += 1\n                else:\n                    self.numFailed += 1\n                    print(\'Tests failed in %s \' % self.cleanName(func))\n            except Exception as e:\n                self.assertFailed += 1\n                self.numFailed += 1\n                print(\'Test threw exception in %s (%s)\' % (self.cleanName(func), e))\n        self.showSummary()\n\n    def assertEqual(self, actual, expected, feedback=""):\n        res = actual==expected\n        if not res and feedback == "":\n            feedback = "Expected %s to equal %s" % (str(actual),str(expected))\n        self.appendResult(res, actual ,expected, feedback)\n\n    def assertNotEqual(self, actual, expected, feedback=""):\n        res = actual != expected\n        if not res and feedback == "":\n            feedback = "Expected %s to not equal %s" % (str(actual),str(expected))\n        self.appendResult(res, actual, expected, feedback)\n\n    def assertTrue(self,x, feedback=""):\n        res = bool(x) is True\n        if not res and feedback == "":\n            feedback = "Expected %s to be True" % (str(x))\n        self.appendResult(res, x, True, feedback)\n\n    def assertFalse(self,x, feedback=""):\n        res = not bool(x)\n        if not res and feedback == "":\n            feedback = "Expected %s to be False" % (str(x))\n        self.appendResult(res, x, False, feedback)\n\n    def assertIs(self,a,b, feedback=""):\n        res = a is b\n        if not res and feedback == "":\n            feedback = "Expected %s to be the same object as %s" % (str(a),str(b))\n        self.appendResult(res, a, b, feedback)\n\n    def assertIsNot(self,a,b, feedback=""):\n        res = a is not b\n        if not res and feedback == "":\n            feedback = "Expected %s to not be the same object as %s" % (str(a),str(b))\n        self.appendResult(res, a, b, feedback)\n\n    def assertIsNone(self,x, feedback=""):\n        res = x is None\n        if not res and feedback == "":\n            feedback = "Expected %s to be None" % (str(x))\n        self.appendResult(res, x, None, feedback)\n\n    def assertIsNotNone(self,x, feedback=""):\n        res = x is not None\n        if not res and feedback == "":\n            feedback = "Expected %s to not be None" % (str(x))\n        self.appendResult(res, x, None, feedback)\n\n    def assertIn(self, a, b, feedback=""):\n        res = a in b\n        if not res and feedback == "":\n            feedback = "Expected %s to be in %s" % (str(a),str(b))\n        self.appendResult(res, a, b, feedback)\n\n    def assertNotIn(self, a, b, feedback=""):\n        res = a not in b\n        if not res and feedback == "":\n            feedback = "Expected %s to not be in %s" % (str(a),str(b))\n        self.appendResult(res, a, b, feedback)\n\n    def assertIsInstance(self,a,b, feedback=""):\n        res = isinstance(a,b)\n        if not res and feedback == "":\n            feedback = "Expected %s to be an instance of %s" % (str(a), str(b))\n        self.appendResult(res, a, b, feedback)\n\n    def assertNotIsInstance(self,a,b, feedback=""):\n        res = not isinstance(a,b)\n        if not res and feedback == "":\n            feedback = "Expected %s to not be an instance of %s" % (str(a),str(b))\n        self.appendResult(res, a, b, feedback)\n\n    def assertRegex(self, text, expected_regex, feedback=""):\n        """Fail the test unless the text matches the regular expression."""\n        if isinstance(expected_regex, (str, )): #bytes\n            assert expected_regex, "expected_regex must not be empty."\n            expected_regex = re.compile(expected_regex)\n        if not expected_regex.search(text):\n            res = False\n            feedback = "Regex didn\'t match: %r not found in %r" % (\n                repr(expected_regex), text)\n        else:\n            res = True\n        self.appendResult(res, text, expected_regex, feedback)\n\n    def assertNotRegex(self, text, unexpected_regex, feedback=""):\n        """Fail the test if the text matches the regular expression."""\n        if isinstance(unexpected_regex, (str, )): # bytes\n            unexpected_regex = re.compile(unexpected_regex)\n        match = unexpected_regex.search(text)\n        if match:\n            feedback = \'Regex matched: %r matches %r in %r\' % (\n                text[match.start() : match.end()],\n                repr(unexpected_regex),\n                text)\n            # _formatMessage ensures the longMessage option is respected\n        self.appendResult(not bool(match), text, unexpected_regex, feedback)\n\n    def assertAlmostEqual(self, a, b, places=7, feedback="", delta=None):\n\n        if delta is not None:\n            res = abs(a-b) <= delta\n        else:\n            if places is None:\n                places = 7\n            res = round(a-b, places) == 0\n        \n        if not res and feedback == "":\n            feedback = "Expected %s to equal %s" % (str(a),str(b))\n        self.appendResult(res, a, b, feedback)\n\n    def assertNotAlmostEqual(self, a, b, places=7, feedback="", delta=None):\n\n        if delta is not None:\n            res = not (a == b) and abs(a - b) > delta\n        else:\n            if places is None:\n                places = 7\n\n            res = round(a-b, places) != 0\n\n        if not res and feedback == "":\n            feedback = "Expected %s to not equal %s" % (str(a),str(b))\n        self.appendResult(res, a, b, feedback)\n\n    def assertGreater(self,a,b, feedback=""):\n        res = a > b\n        if not res and feedback == "":\n            feedback = "Expected %s to be greater than %s" % (str(a),str(b))\n        self.appendResult(res, a, b, feedback)\n\n    def assertGreaterEqual(self,a,b, feedback=""):\n        res = a >= b\n        if not res and feedback == "":\n            feedback = "Expected %s to be >= %s" % (str(a),str(b))\n        self.appendResult(res, a, b, feedback)\n\n    def assertLess(self, a, b, feedback=""):\n        res = a < b\n        if not res and feedback == "":\n            feedback = "Expected %s to be less than %s" % (str(a),str(b))\n        self.appendResult(res, a, b, feedback)\n\n    def assertLessEqual(self,a,b, feedback=""):\n        res = a <= b\n        if not res and feedback == "":\n            feedback = "Expected %s to be <= %s" % (str(a),str(b))\n        self.appendResult(res, a, b, feedback)\n\n    def appendResult(self,res,actual,expected,feedback):\n        if res:\n            msg = \'Pass\'\n            self.assertPassed += 1\n        else:\n            msg = \'Fail: \' +  feedback\n            print(msg)\n            self.assertFailed += 1\n\n    def assertRaises(self, expected_exception, *args, **kwargs):\n        context = _AssertRaisesContext(expected_exception, self)\n        try:\n            return context.handle(args, kwargs)\n        finally:\n            # bpo-23890: manually break a reference cycle\n            context = None\n\n    def fail(self, msg=None):\n        if msg is None:\n            msg = \'Fail\'\n        else:\n            msg = \'Fail: \' + msg\n        print(msg)\n        self.assertFailed += 1\n\n    def showSummary(self):\n        pct = self.numPassed / (self.numPassed+self.numFailed) * 100\n        print("Ran %d tests, passed: %d failed: %d\\n" % (self.numPassed+self.numFailed,\n                                               self.numPassed, self.numFailed))\n\n\n\ndef main(verbosity=1):\n    glob = globals() # globals() still needs work\n    for name in glob:\n        if type(glob[name]) == type and issubclass(glob[name], TestCase):\n            try:\n                tc = glob[name]()\n                tc.verbosity = verbosity\n                tc.main()\n            except:\n                print("Uncaught Error in: ", name)\n',"src/lib/unittest/gui.py":"import document\nfrom unittest import TestCase\n\nclass TestCaseGui(TestCase):\n     def __init__(self):\n          TestCase.__init__(self)\n          self.divid = document.currentDiv()\n          self.mydiv = document.getElementById(self.divid)\n          res = document.getElementById(self.divid+'_unit_results')\n          if res:\n              self.resdiv = res\n              res.innerHTML = ''\n          else:\n              self.resdiv = document.createElement('div')\n              self.resdiv.setAttribute('id',self.divid+'_unit_results')\n              self.resdiv.setAttribute('class','unittest-results')\n              self.mydiv.appendChild(self.resdiv)\n\n\n     def main(self):\n         t = document.createElement('table')\n         self.resTable = t\n         self.resdiv.appendChild(self.resTable)\n\n         headers = ['Result','Actual Value','Expected Value','Notes']\n         row = document.createElement('tr')\n         for item in headers:\n             head = document.createElement('th')\n             head.setAttribute('class','ac-feedback')\n             head.innerHTML = item\n             head.setCSS('text-align','center')\n             row.appendChild(head)\n         self.resTable.appendChild(row)\n\n         for func in self.tlist:\n             try:\n                 self.setUp()\n                 func()\n                 self.tearDown()\n             except Exception as e:\n                 self.appendResult('Error', None, None, e)\n                 self.numFailed += 1\n                 self.showSummary()\n\n     def appendResult(self,res,actual,expected,param):\n         trimActual = False\n         if len(str(actual)) > 15:\n             trimActual = True\n             actualType = type(actual)\n         trimExpected = False\n         if len(str(expected)) > 15:\n             trimExpected = True\n             expectedType = type(expected)\n         row = document.createElement('tr')\n         err = False\n         if res == 'Error':\n             err = True\n             msg = 'Error: %s' % param\n             errorData = document.createElement('td')\n             errorData.setAttribute('class','ac-feedback')\n             errorData.innerHTML = 'ERROR'\n             errorData.setCSS('background-color','#de8e96')\n             errorData.setCSS('text-align','center')\n             row.appendChild(errorData)\n         elif res:\n             passed = document.createElement('td')\n             passed.setAttribute('class','ac-feedback')\n             passed.innerHTML = 'Pass'\n             passed.setCSS('background-color','#83d382')\n             passed.setCSS('text-align','center')\n             row.appendChild(passed)\n             self.numPassed += 1\n         else:\n             fail = document.createElement('td')\n             fail.setAttribute('class','ac-feedback')\n             fail.innerHTML = 'Fail'\n             fail.setCSS('background-color','#de8e96')\n             fail.setCSS('text-align','center')\n             row.appendChild(fail)\n             self.numFailed += 1\n\n\n         act = document.createElement('td')\n         act.setAttribute('class','ac-feedback')\n         if trimActual:\n             actHTML = str(actual)[:5] + \"...\" + str(actual)[-5:]\n             if actualType == str:\n                 actHTML = repr(actHTML)\n             act.innerHTML = actHTML\n         else:\n             act.innerHTML = repr(actual)\n         act.setCSS('text-align','center')\n         row.appendChild(act)\n\n         expect = document.createElement('td')\n         expect.setAttribute('class','ac-feedback')\n\n         if trimExpected:\n             expectedHTML = str(expected)[:5] + \"...\" + str(expected)[-5:]\n             if expectedType == str:\n                 expectedHTML = repr(expectedHTML)\n             expect.innerHTML = expectedHTML\n         else:\n             expect.innerHTML = repr(expected)\n         expect.setCSS('text-align','center')\n         row.appendChild(expect)\n         inp = document.createElement('td')\n         inp.setAttribute('class','ac-feedback')\n\n         if err:\n             inp.innerHTML = msg\n         else:\n             inp.innerHTML = param\n         inp.setCSS('text-align','center')\n         row.appendChild(inp)\n         self.resTable.appendChild(row)\n\n\n     def showSummary(self):\n         pct = self.numPassed / (self.numPassed+self.numFailed) * 100\n         pTag = document.createElement('p')\n         pTag.innerHTML = \"You passed: \" + str(pct) + \"% of the tests\"\n         self.resdiv.appendChild(pTag)\n","src/lib/urllib/__init__.js":"var $builtinmodule=function(){return{}};","src/lib/urllib/request/__init__.js":'var $builtinmodule=function(){var a={};return a.Response=Sk.misceval.buildClass(a,function(a,b){b.__init__=new Sk.builtin.func(function(a,b){a.data$=b.responseText,a.lineList=a.data$.split("\\n"),a.lineList=a.lineList.slice(0,-1);for(var c=0;c<a.lineList.length;c++)a.lineList[c]+="\\n";a.currentLine=0,a.pos$=0}),b.__str__=new Sk.builtin.func(function(){return Sk.ffi.remapToPy("<Response>")}),b.__iter__=new Sk.builtin.func(function(a){var b=a.lineList;return Sk.builtin.makeGenerator(function(){return this.$index>=this.$lines.length?void 0:new Sk.builtin.str(this.$lines[this.$index++])},{$obj:a,$index:0,$lines:b})}),b.read=new Sk.builtin.func(function(a,b){if(a.closed)throw new Sk.builtin.ValueError("I/O operation on closed file");var c=a.data$.length;void 0===b&&(b=c);var d=new Sk.builtin.str(a.data$.substr(a.pos$,b));return a.pos$+=b,a.pos$>=c&&(a.pos$=c),d}),b.readline=new Sk.builtin.func(function(a){var b="";return a.currentLine<a.lineList.length&&(b=a.lineList[a.currentLine],a.currentLine++),new Sk.builtin.str(b)}),b.readlines=new Sk.builtin.func(function(a){for(var b=[],c=a.currentLine;c<a.lineList.length;c++)b.push(new Sk.builtin.str(a.lineList[c]));return new Sk.builtin.list(b)})},"Response",[]),a.urlopen=new Sk.builtin.func(function(b,c){var d=new Promise(function(d){var e=new XMLHttpRequest;e.addEventListener("loadend",function(){d(Sk.misceval.callsimArray(a.Response,[e]))}),c?(e.open("POST",b.v),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.setRequestHeader("Content-length",c.v.length),e.send(c.v)):(e.open("GET",b.v),e.send(null))}),e=new Sk.misceval.Suspension;return e.resume=function(){return resolution},e.data={type:"Sk.promise",promise:d.then(function(a){return resolution=a,a},function(a){return resolution="",a})},e}),a};',"src/lib/urllib2.py":'raise NotImplementedError("urllib2 is not yet implemented in Skulpt")\n',"src/lib/urlparse.py":'raise NotImplementedError("urlparse is not yet implemented in Skulpt")\n',"src/lib/user.py":'raise NotImplementedError("user is not yet implemented in Skulpt")\n',"src/lib/uu.py":'raise NotImplementedError("uu is not yet implemented in Skulpt")\n',"src/lib/uuid.py":'raise NotImplementedError("uuid is not yet implemented in Skulpt")\n',"src/lib/warnings.py":'raise NotImplementedError("warnings is not yet implemented in Skulpt")\n',"src/lib/wave.py":'raise NotImplementedError("wave is not yet implemented in Skulpt")\n',"src/lib/weakref.py":'raise NotImplementedError("weakref is not yet implemented in Skulpt")\n',"src/lib/webbrowser.js":'var $builtinmodule=function(){function open_tab(a){return(Sk.builtin.pyCheckType("url","string",Sk.builtin.checkString(a)),!b)?Sk.builtin.bool.false$:(a=a.$jsstr(),window.open(a,"_blank"),Sk.builtin.bool.true$)}var a={},b="undefined"!=typeof window&&"undefined"!=typeof window.navigator;return a.__name__=new Sk.builtin.str("webbrowser"),a.open=new Sk.builtin.func(function open(a){return Sk.builtin.pyCheckArgsLen("open",arguments.length+1,1,3),open_tab(a)}),a.open_new=new Sk.builtin.func(function open_new(a){return Sk.builtin.pyCheckArgsLen("open_new",arguments.length,1,1),open_tab(a)}),a.open_new_tab=new Sk.builtin.func(function open_new_tab(a){return Sk.builtin.pyCheckArgsLen("open_new_tab",arguments.length,1,1),open_tab(a)}),a.DefaultBrowser=Sk.misceval.buildClass(a,function dflbrowser(a,b){b.__init__=new Sk.builtin.func(function __init__(){return Sk.builtin.none.none$}),b.open=new Sk.builtin.func(function open(a,b){return Sk.builtin.pyCheckArgsLen("open",arguments.length,2,4),open_tab(b)}),b.open_new=new Sk.builtin.func(function open_new(a,b){return Sk.builtin.pyCheckArgsLen("open_new",arguments.length,2,2),open_tab(b)}),b.open_new_tab=new Sk.builtin.func(function open_new_tab(a,b){return Sk.builtin.pyCheckArgsLen("open_new_tab",arguments.length,2,2),open_tab(b)})},"DefaultBrowser",[]),a.get=new Sk.builtin.func(function get(){return Sk.builtin.pyCheckArgsLen("get",arguments.length,0,1),Sk.misceval.callsimArray(a.DefaultBrowser,[])}),a};',"src/lib/webbrowser.py":'raise NotImplementedError("webbrowser is not yet implemented in Skulpt")\n',"src/lib/webgl/__init__.js":'var $builtinmodule=function(){var a={__name__:new Sk.builtin.str("webgl")},c=function(a){return"<table style=\\"background-color: #8CE; width: 100%; height: 100%;\\"><tr><td align=\\"center\\"><div style=\\"display: table-cell; vertical-align: middle;\\"><div style=\\"\\">"+a+"</div></div></td></tr></table>"},d="This page requires a browser that supports WebGL.<br/><a href=\\"http://get.webgl.org\\">Click here to upgrade your browser.</a>",e=function(a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=null,d=0;d<b.length;++d){try{c=a.getContext(b[d])}catch(a){}if(c)break}if(c){function returnFalse(){return!1}a.onselectstart=returnFalse,a.onmousedown=returnFalse}return c},f=function(a,f){var g=document.getElementById(a);if(f||(f=g.getElementsByTagName("canvas")[0]),!f)return void(g.innerHTML=c(d));var h=e(f);if(!h){var i=navigator.userAgent.match(/(\\w+\\/.*? )/g),j={};try{for(var k=0;k<i.length;++k){for(var l=i[k].match(/(\\w+)/g),m=[],n=1;n<l.length;++n)m.push(parseInt(l[n]));j[l[0]]=m}}catch(a){}g.innerHTML=j.Chrome&&(7<j.Chrome[0]||7==j.Chrome[0]&&0<j.Chrome[1]||7==j.Chrome[0]&&0==j.Chrome[1]&&521<=j.Chrome[2])?c("It doesn\'t appear your computer can support WebGL.<br/><a href=\\"http://get.webgl.org\\">Click here for more information.</a>"):c(d)}return h};return a.Context=Sk.misceval.buildClass(a,function(a,b){b.__init__=new Sk.builtin.func(function(a,b){var c=document.getElementById(b.v),d=f(b.v,c);if(!d)throw new Error("Your browser does not appear to support WebGL.");for(var e in a.gl=d,d.__proto__)if("number"==typeof d.__proto__[e])Sk.abstr.objectSetItem(a.$d,new Sk.builtin.str(e),d.__proto__[e]);else if("function"==typeof d.__proto__[e])switch(e){case"bufferData":break;case"clearColor":break;case"drawArrays":break;case"getAttribLocation":break;case"getUniformLocation":break;case"shaderSource":break;case"uniformMatrix4fv":break;case"vertexAttribPointer":break;case"viewport":break;default:(function(b){Sk.abstr.objectSetItem(a.$d,new Sk.builtin.str(e),new Sk.builtin.func(function(){var a=d.__proto__[b];return a.apply(d,arguments)}))})(e);}d.clearColor(100/255,149/255,237/255,1),d.clear(d.COLOR_BUFFER_BIT)}),b.tp$getattr=Sk.generic.getAttr,b.bufferData=new Sk.builtin.func(function(a,b,c,d){a.gl.bufferData(b,c.v,d)}),b.clearColor=new Sk.builtin.func(function(a,b,c,d,e){a.gl.clearColor(Sk.builtin.asnum$(b),Sk.builtin.asnum$(c),Sk.builtin.asnum$(d),Sk.builtin.asnum$(e))}),b.getAttribLocation=new Sk.builtin.func(function(a,b,c){return a.gl.getAttribLocation(b,c.v)}),b.getUniformLocation=new Sk.builtin.func(function(a,b,c){return a.gl.getUniformLocation(b,c.v)}),b.shaderSource=new Sk.builtin.func(function(a,b,c){a.gl.shaderSource(b,c.v)}),b.drawArrays=new Sk.builtin.func(function(a,b,c,d){a.gl.drawArrays(Sk.builtin.asnum$(b),Sk.builtin.asnum$(c),Sk.builtin.asnum$(d))}),b.vertexAttribPointer=new Sk.builtin.func(function(a,b,c,d,e,f,g){a.gl.vertexAttribPointer(b,Sk.builtin.asnum$(c),Sk.builtin.asnum$(d),e,Sk.builtin.asnum$(f),Sk.builtin.asnum$(g))}),b.viewport=new Sk.builtin.func(function(a,b,c,d,e){a.gl.viewport(Sk.builtin.asnum$(b),Sk.builtin.asnum$(c),Sk.builtin.asnum$(d),Sk.builtin.asnum$(e))}),b.uniformMatrix4fv=new Sk.builtin.func(function(a,b,c,d){a.gl.uniformMatrix4fv(Sk.builtin.asnum$(b),c,d.v)}),b.setDrawFunc=new Sk.builtin.func(function(a,b){var c=new Date().getTime(),d=setInterval(function(){Sk.misceval.callsimArray(b,[a,new Date().getTime()-c])},1e3/60)})},"Context",[]),a.Float32Array=Sk.misceval.buildClass(a,function(a,b){b.__init__=new Sk.builtin.func(function(a,b){a.v="number"==typeof b?new Float32Array(b):new Float32Array(Sk.ffi.remapToJs(b))}),b.__repr__=new Sk.builtin.func(function(a){for(var b=[],c=0;c<a.v.length;++c)b.push(a.v[c]);return new Sk.builtin.str("["+b.join(", ")+"]")})},"Float32Array",[]),a.Matrix4x4=Sk.misceval.buildClass(a,function(a,b){b.__init__=new Sk.builtin.func(function(a,b){a.v=new Float32Array(Sk.ffi.remapToJs(b))}),b.identity=new Sk.builtin.func(function(a){var b=a.v;b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1}),b.perspective=new Sk.builtin.func(function(b,c,d,e,g){var h=Math.tan,i=Math.PI,j=h(.5*i-.5*(Sk.builtin.asnum$(c)*i/180)),l=Sk.builtin.asnum$(d),a=Sk.builtin.asnum$(e),n=Sk.builtin.asnum$(g),f=1/(a-n),k=b.v;k[0]=j/l,k[1]=0,k[2]=0,k[3]=0,k[4]=0,k[5]=j,k[6]=0,k[7]=0,k[8]=0,k[9]=0,k[10]=(a+n)*f,k[11]=-1,k[12]=0,k[13]=0,k[14]=2*(a*n*f),k[15]=0}),b.translate=new Sk.builtin.func(function(a,b){var c=a.v,d=Sk.ffi.remapToJs(b);c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=d[0],c[13]=d[1],c[14]=d[2],c[15]=1}),b.__repr__=new Sk.builtin.func(function(a){for(var b=[],c=0;c<a.v.length;++c)b.push(a.v[c]);return new Sk.builtin.str("["+b.join(", ")+"]")})},"Matrix4x4",[]),a};',"src/lib/webgl/math.js":'var $builtinmodule=function(){var a={};return a.Mat44=Sk.misceval.buildClass(a,function(b,c){var d=Math.sqrt;c.__init__=new Sk.builtin.func(function(a){Sk.misceval.callsimArray(c.loadIdentity,[a]),a.stack=[]}),c.push=new Sk.builtin.func(function(a){a.stack.push(a.elements.slice(0))}),c.pop=new Sk.builtin.func(function(a){a.elements=a.stack.pop()}),c.loadIdentity=new Sk.builtin.func(function(a){a.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}),c.transform3=new Sk.builtin.func(function(b,c){var d=b.elements;return Sk.misceval.callsimArray(a.Vec3,[d[0]*c.x+d[4]*c.y+d[8]*c.z,d[1]*c.x+d[5]*c.y+d[9]*c.z,d[2]*c.x+d[6]*c.y+d[10]*c.z])}),c.scale=new Sk.builtin.func(function(a,b,c,d){return a.elements[0]*=b,a.elements[1]*=b,a.elements[2]*=b,a.elements[3]*=b,a.elements[4]*=c,a.elements[5]*=c,a.elements[6]*=c,a.elements[7]*=c,a.elements[8]*=d,a.elements[9]*=d,a.elements[10]*=d,a.elements[11]*=d,a}),c.translate=new Sk.builtin.func(function(a,b,c,d){return a.elements[12]+=a.elements[0]*b+a.elements[4]*c+a.elements[8]*d,a.elements[13]+=a.elements[1]*b+a.elements[5]*c+a.elements[9]*d,a.elements[14]+=a.elements[2]*b+a.elements[6]*c+a.elements[10]*d,a.elements[15]+=a.elements[3]*b+a.elements[7]*c+a.elements[11]*d,a}),c.rotate=new Sk.builtin.func(function(b,c,e,f,g){var h=Math.cos,i=Math.sin,j=Math.PI,k=d(e*e+f*f+g*g),l=i(c*j/180),m=h(c*j/180);if(0<k){var n,o,p,q,r,s,t,u,v,w,A;e/=k,f/=k,g/=k,n=e*e,o=f*f,p=g*g,q=e*f,r=f*g,s=g*e,t=e*l,u=f*l,v=g*l,w=1-m,A=Sk.misceval.callsimArray(a.Mat44),A.elements[0]=w*n+m,A.elements[1]=w*q-v,A.elements[2]=w*s+u,A.elements[3]=0,A.elements[4]=w*q+v,A.elements[5]=w*o+m,A.elements[6]=w*r-t,A.elements[7]=0,A.elements[8]=w*s-u,A.elements[9]=w*r+t,A.elements[10]=w*p+m,A.elements[11]=0,A.elements[12]=0,A.elements[13]=0,A.elements[14]=0,A.elements[15]=1,A=A.multiply(b),b.elements=A.elements}return b}),c.multiply=new Sk.builtin.func(function(b,c){for(var d=Sk.misceval.callsimArray(a.Mat44),e=0;4>e;e++)d.elements[4*e+0]=b.elements[4*e+0]*c.elements[0]+b.elements[4*e+1]*c.elements[4]+b.elements[4*e+2]*c.elements[8]+b.elements[4*e+3]*c.elements[12],d.elements[4*e+1]=b.elements[4*e+0]*c.elements[1]+b.elements[4*e+1]*c.elements[5]+b.elements[4*e+2]*c.elements[9]+b.elements[4*e+3]*c.elements[13],d.elements[4*e+2]=b.elements[4*e+0]*c.elements[2]+b.elements[4*e+1]*c.elements[6]+b.elements[4*e+2]*c.elements[10]+b.elements[4*e+3]*c.elements[14],d.elements[4*e+3]=b.elements[4*e+0]*c.elements[3]+b.elements[4*e+1]*c.elements[7]+b.elements[4*e+2]*c.elements[11]+b.elements[4*e+3]*c.elements[15];return b.elements=d.elements,b}),c.lookAt=new Sk.builtin.func(function(b,c,e,f,g,h,i,j,k,l){var m=[c-g,e-h,f-i],n=d(m[0]*m[0]+m[1]*m[1]+m[2]*m[2]);n&&(m[0]/=n,m[1]/=n,m[2]/=n);var o=[j,k,l],p=[];p[0]=o[1]*m[2]-o[2]*m[1],p[1]=-o[0]*m[2]+o[2]*m[0],p[2]=o[0]*m[1]-o[1]*m[0],o[0]=m[1]*p[2]-m[2]*p[1],o[1]=-m[0]*p[2]+m[2]*p[0],o[2]=m[0]*p[1]-m[1]*p[0],n=d(p[0]*p[0]+p[1]*p[1]+p[2]*p[2]),n&&(p[0]/=n,p[1]/=n,p[2]/=n),n=d(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]),n&&(o[0]/=n,o[1]/=n,o[2]/=n);var q=Sk.misceval.callsimArray(a.Mat44);return q.elements[0]=p[0],q.elements[4]=p[1],q.elements[8]=p[2],q.elements[12]=0,q.elements[1]=o[0],q.elements[5]=o[1],q.elements[9]=o[2],q.elements[13]=0,q.elements[2]=m[0],q.elements[6]=m[1],q.elements[10]=m[2],q.elements[14]=0,q.elements[3]=0,q.elements[7]=0,q.elements[11]=0,q.elements[15]=1,q=q.multiply(b),b.elements=q.elements,b.translate(-c,-e,-f),b})},"Mat44",[]),a.Mat33=Sk.misceval.buildClass(a,function(a,b){b.__init__=new Sk.builtin.func(function(a){Sk.misceval.callsimArray(b.loadIdentity,[a])}),b.loadIdentity=new Sk.builtin.func(function(a){a.elements=[1,0,0,0,1,0,0,0,1]})},"Mat33",[]),a.Vec3=Sk.misceval.buildClass(a,function(b,c){c.__init__=new Sk.builtin.func(function(a,b,c,d){a.x=b,a.y=c,a.z=d}),c.__sub__=new Sk.builtin.func(function(b,c){return Sk.misceval.callsimArray(a.Vec3,[b.x-c.x,b.y-c.y,b.z-c.z])})},"Vec3",[]),a.cross=new Sk.builtin.func(function(b,c){return Sk.asserts.assert(b instanceof a.Vec3&&c instanceof a.Vec3),Sk.misceval.callsimArray(a.Vec3,[b.y*c.z-b.z*c.y,b.z*c.x-b.x*c.z,b.x*c.y-b.y*c.x])}),a};',"src/lib/webgl/matrix4.js":"var $builtinmodule=function(){var a=Math.PI,b={},c=new Float32Array(3),d=new Float32Array(3),e=new Float32Array(3),f=new Float32Array(4),g=new Float32Array(4),h=new Float32Array(4),i=new Float32Array(16),j=new Float32Array(16),k=new Float32Array(16),l=function(b,c){for(var a=Math.sqrt,d=0,e=c.length,f=0;f<e;++f)d+=c[f]*c[f];if(d=a(d),1e-5<d)for(var f=0;f<e;++f)b[f]=c[f]/d;else for(var f=0;f<e;++f)b[f]=0;return b},m=function(c,d,a){return c[0]=d[1]*a[2]-d[2]*a[1],c[1]=d[2]*a[0]-d[0]*a[2],c[2]=d[0]*a[1]-d[1]*a[0],c},n=function(c,d,a){for(var b=d.length,e=0;e<b;++e)c[e]=d[e]-a[e];return c},o=function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]};return b.lookAt=new Sk.builtin.func(function(a,b,f,g){var h=c,i=d,j=l(h,n(h,b.v,f.v)),k=l(i,m(i,g.v,j)),p=m(e,j,k),q=a.v;return q[0]=k[0],q[1]=p[0],q[2]=j[0],q[3]=0,q[4]=k[1],q[5]=p[1],q[6]=j[1],q[7]=0,q[8]=k[2],q[9]=p[2],q[10]=j[2],q[11]=0,q[12]=-o(k,b.v),q[13]=-o(p,b.v),q[14]=-o(j,b.v),q[15]=1,a}),b.perspective=new Sk.builtin.func(function(b,c,d,e,g){var h=Math.tan,i=h(.5*a-.5*(c*a/180)),f=1/(e-g),j=b.v;return j[0]=i/d,j[1]=0,j[2]=0,j[3]=0,j[4]=0,j[5]=i,j[6]=0,j[7]=0,j[8]=0,j[9]=0,j[10]=(e+g)*f,j[11]=-1,j[12]=0,j[13]=0,j[14]=2*(e*g*f),j[15]=0,b}),b.rotationY=new Sk.builtin.func(function(b,d){var e=Math.sin,f=Math.cos,g=b.v,h=f(d*a/180),c=e(d*a/180);return g[0]=h,g[1]=0,g[2]=-c,g[3]=0,g[4]=0,g[5]=1,g[6]=0,g[7]=0,g[8]=c,g[9]=0,g[10]=h,g[11]=0,g[12]=0,g[13]=0,g[14]=0,g[15]=1,b}),b.identity=new Sk.builtin.func(function(a){var b=a.v;return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,a}),b.mul=new Sk.builtin.func(function(c,d,e){var f=c.v,g=d.v,a=e.v,b=g[0],h=g[1],i=g[2],j=g[3],k=g[4],l=g[5],m=g[6],n=g[7],o=g[8],p=g[9],q=g[10],r=g[11],s=g[12],t=g[13],u=g[14],v=g[15],w=a[0],x=a[1],y=a[2],z=a[3],A=a[4],B=a[5],C=a[6],D=a[7],E=a[8],F=a[9],G=a[10],H=a[11],I=a[12],J=a[13],K=a[14],L=a[15];return f[0]=b*w+h*A+i*E+j*I,f[1]=b*x+h*B+i*F+j*J,f[2]=b*y+h*C+i*G+j*K,f[3]=b*z+h*D+i*H+j*L,f[4]=k*w+l*A+m*E+n*I,f[5]=k*x+l*B+m*F+n*J,f[6]=k*y+l*C+m*G+n*K,f[7]=k*z+l*D+m*H+n*L,f[8]=o*w+p*A+q*E+r*I,f[9]=o*x+p*B+q*F+r*J,f[10]=o*y+p*C+q*G+r*K,f[11]=o*z+p*D+q*H+r*L,f[12]=s*w+t*A+u*E+v*I,f[13]=s*x+t*B+u*F+v*J,f[14]=s*y+t*C+u*G+v*K,f[15]=s*z+t*D+u*H+v*L,c}),b.invert=new Sk.builtin.func(function(a,b){var c=a.v,e=b.v,f=e[0],g=e[1],h=e[2],i=e[3],j=e[4],k=e[5],l=e[6],m=e[7],n=e[8],o=e[9],p=e[10],q=e[11],r=e[12],s=e[13],t=e[14],u=e[15],v=p*u,w=t*q,x=l*u,y=t*m,z=l*q,A=p*m,B=h*u,C=t*i,D=h*q,E=p*i,F=h*m,G=l*i,H=n*s,I=r*o,J=j*s,K=r*k,L=j*o,M=n*k,N=f*s,O=r*g,P=f*o,Q=n*g,R=f*k,S=j*g,T=v*k+y*o+z*s-(w*k+x*o+A*s),U=w*g+B*o+E*s-(v*g+C*o+D*s),V=x*g+C*k+F*s-(y*g+B*k+G*s),W=A*g+D*k+G*o-(z*g+E*k+F*o),X=1/(f*T+j*U+n*V+r*W);return c[0]=X*T,c[1]=X*U,c[2]=X*V,c[3]=X*W,c[4]=X*(w*j+x*n+A*r-(v*j+y*n+z*r)),c[5]=X*(v*f+C*n+D*r-(w*f+B*n+E*r)),c[6]=X*(y*f+B*j+G*r-(x*f+C*j+F*r)),c[7]=X*(z*f+E*j+F*n-(A*f+D*j+G*n)),c[8]=X*(H*m+K*q+L*u-(I*m+J*q+M*u)),c[9]=X*(I*i+N*q+Q*u-(H*i+O*q+P*u)),c[10]=X*(J*i+O*m+R*u-(K*i+N*m+S*u)),c[11]=X*(M*i+P*m+S*q-(L*i+Q*m+R*q)),c[12]=X*(J*p+M*t+I*l-(L*t+H*l+K*p)),c[13]=X*(P*t+H*h+O*p-(N*p+Q*t+I*h)),c[14]=X*(N*l+S*t+K*h-(R*t+J*h+O*l)),c[15]=X*(R*p+L*h+Q*l-(P*l+S*p+M*h)),a}),b.transpose=new Sk.builtin.func(function(a,b){for(var c=a.v,d=b.v,e=0;4>e;++e)for(var f=0;4>f;++f)c[4*e+f]=d[4*f+e];return c}),b};","src/lib/webgl/models.js":'var $builtinmodule=function(a){var c={},d=function(a,c){var d=c||gl.ARRAY_BUFFER,e=gl.createBuffer();if(this.target=d,this.buf=e,this.set(a),this.numComponents_=a.numComponents,this.numElements_=a.numElements,this.totalComponents_=this.numComponents_*this.numElements_,a.buffer instanceof Float32Array)this.type_=gl.FLOAT;else if(a.buffer instanceof Uint8Array)this.type_=gl.UNSIGNED_BYTE;else if(a.buffer instanceof Int8Array)this.type_=gl._BYTE;else if(a.buffer instanceof Uint16Array)this.type_=gl.UNSIGNED_SHORT;else if(a.buffer instanceof Int16Array)this.type_=gl.SHORT;else throw"unhandled type:"+typeof a.buffer};return d.prototype.set=function(a){gl.bindBuffer(this.target,this.buf),gl.bufferData(this.target,a.buffer,gl.STATIC_DRAW)},d.prototype.type=function(){return this.type_},d.prototype.numComponents=function(){return this.numComponents_},d.prototype.numElements=function(){return this.numElements_},d.prototype.totalComponents=function(){return this.totalComponents_},d.prototype.buffer=function(){return this.buf},d.prototype.stride=function(){return 0},d.prototype.offset=function(){return 0},c.Model=Sk.misceval.buildClass(c,function(c,e){e.__init__=new Sk.builtin.func(function(c,e,f,g){c.buffers={};var h=function(a,e){var f="indices"==a?gl.ELEMENT_ARRAY_BUFFER:gl.ARRAY_BUFFER;b=c.buffers[a],b?b.set(e):b=new d(e,f),c.buffers[a]=b};for(a in f)h(a,f[a]);var i={},j=0;for(var k in g)i[k]=j++;c.mode=gl.TRIANGLES,c.textures=g.v,c.textureUnits=i,c.shader=e}),e.drawPrep=new Sk.builtin.func(function(a,c){var d=a.shader,e=a.buffers,f=a.textures;for(var g in c=Sk.ffi.remapToJs(c),Sk.misceval.callsimArray(d.use,[d]),e){var h=e[g];if("indices"==g)gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,h.buffer());else{var i=d.attrib[g];i&&i(h)}}for(var j in f){var k=a.textureUnits[j];d.setUniform$impl(d,textuer,k),f[j].bindToUnit(k)}for(var l in c)d.setUniform$impl(d,l,c[l])}),e.draw=new Sk.builtin.func(function(a,c,d){var e=a.shader;for(uniform in c=Sk.ffi.remapToJs(c),c)e.setUniform$impl(e,uniform,c[uniform]);if(d)for(var f in d){var g=a.textureUnits[f];e.setUniform$impl(e,f,g),d[f].bindToUnit(g)}var h=a.buffers;gl.drawElements(a.mode,h.indices.totalComponents(),gl.UNSIGNED_SHORT,0)})},"Model",[]),c};',"src/lib/webgl/primitives.js":'var $builtinmodule=function(){var a={},b=function(a,b,c){c=c||"Float32Array";var d=window[c];b.length?(this.buffer=new d(b),b=this.buffer.length/a,this.cursor=b):(this.buffer=new d(a*b),this.cursor=0),this.numComponents=a,this.numElements=b,this.type=c};return b.prototype.stride=function(){return 0},b.prototype.offset=function(){return 0},b.prototype.getElement=function(a){for(var b=a*this.numComponents,c=[],d=0;d<this.numComponents;++d)c.push(this.buffer[b+d]);return c},b.prototype.setElement=function(a,b){for(var c=a*this.numComponents,d=0;d<this.numComponents;++d)this.buffer[c+d]=b[d]},b.prototype.clone=function(){var a=new b(this.numComponents,this.numElements,this.type);return a.pushArray(this),a},b.prototype.push=function(a){this.setElement(this.cursor++,a)},b.prototype.pushArray=function(a){for(var b=0;b<a.numElements;++b)this.push(a.getElement(b))},b.prototype.pushArrayWithOffset=function(a,b){for(var c,d=0;d<a.numElements;++d){c=a.getElement(d);for(var e=0;e<b.length;++e)c[e]+=b[e];this.push(c)}},b.prototype.computeExtents=function(){for(var a=Math.max,b=Math.min,c,d=this.numElements,e=this.numComponents,f=this.getElement(0),g=this.getElement(0),h=1;h<d;++h){c=this.getElement(h);for(var i=0;i<e;++i)f[i]=b(f[i],c[i]),g[i]=a(g[i],c[i])}return{min:f,max:g}},a.createCube=new Sk.builtin.func(function(a){for(var c,d=[[3,7,5,1],[0,4,6,2],[6,7,3,2],[0,1,5,4],[5,7,6,4],[2,3,1,0]],e=a/2,g=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],h=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],i=[[0,0],[1,0],[1,1],[0,1]],j=24,k=new b(3,j),l=new b(3,j),m=new b(2,j),n=new b(3,12,"Uint16Array"),o=0;6>o;++o){c=d[o];for(var p=0;4>p;++p){var q=g[c[p]],r=h[o],s=i[p];k.push(q),l.push(r),m.push(s)}var t=4*o;n.push([t+0,t+1,t+2]),n.push([t+0,t+2,t+3])}return{position:k,normal:l,texCoord:m,indices:n}}),a};',"src/lib/whichdb.py":'raise NotImplementedError("whichdb is not yet implemented in Skulpt")\n',"src/lib/wsgiref/__init__.py":'raise NotImplementedError("wsgiref is not yet implemented in Skulpt")\n',"src/lib/xdrlib.py":'raise NotImplementedError("xdrlib is not yet implemented in Skulpt")\n',"src/lib/xml/__init__.py":'raise NotImplementedError("xml is not yet implemented in Skulpt")\n',"src/lib/xml/dom/__init__.py":'raise NotImplementedError("dom is not yet implemented in Skulpt")\n',"src/lib/xml/etree/__init__.py":'raise NotImplementedError("etree is not yet implemented in Skulpt")\n',"src/lib/xml/parsers/__init__.py":'raise NotImplementedError("parsers is not yet implemented in Skulpt")\n',"src/lib/xml/sax/__init__.py":'raise NotImplementedError("sax is not yet implemented in Skulpt")\n',"src/lib/xmllib.py":'raise NotImplementedError("xmllib is not yet implemented in Skulpt")\n',"src/lib/xmlrpclib.py":'raise NotImplementedError("xmlrpclib is not yet implemented in Skulpt")\n',"src/lib/zipfile.py":'raise NotImplementedError("zipfile is not yet implemented in Skulpt")\n'}}},663:function(e,t,n){(function(){"use strict";var e=e||{};e.scope={},e.ASSUME_ES5=!1,e.ASSUME_NO_NATIVE_MAP=!1,e.ASSUME_NO_NATIVE_SET=!1,e.SIMPLE_FROUND_POLYFILL=!1,e.defineProperty=e.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},e.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof n.g&&null!=n.g?n.g:e},e.global=e.getGlobal(this),e.polyfill=function(t,n,i,s){if(n){for(i=e.global,t=t.split("."),s=0;s<t.length-1;s++){var r=t[s];r in i||(i[r]={}),i=i[r]}(n=n(s=i[t=t[t.length-1]]))!=s&&null!=n&&e.defineProperty(i,t,{configurable:!0,writable:!0,value:n})}},e.polyfill("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length;for(0>(t=t||0)&&(t=Math.max(t+i,0));t<i;t++){var s=n[t];if(s===e||Object.is(s,e))return!0}return!1}}),"es7","es3"),e.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.polyfill("Object.entries",(function(t){return t||function(t){var n,i=[];for(n in t)e.owns(t,n)&&i.push([n,t[n]]);return i}}),"es8","es3"),e.checkStringArgs=function(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""},e.stringPadding=function(e,t){return e=void 0!==e?String(e):" ",0<t&&e?e.repeat(Math.ceil(t/e.length)).substring(0,t):""},e.polyfill("String.prototype.padStart",(function(t){return t||function(t,n){var i=e.checkStringArgs(this,null,"padStart");return e.stringPadding(n,t-i.length)+i}}),"es8","es3"),e.polyfill("Object.values",(function(t){return t||function(t){var n,i=[];for(n in t)e.owns(t,n)&&i.push(t[n]);return i}}),"es8","es3"),e.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},e.arrayIterator=function(t){return{next:e.arrayIteratorImpl(t)}},e.SYMBOL_PREFIX="jscomp_symbol_",e.initSymbol=function(){e.initSymbol=function(){},e.global.Symbol||(e.global.Symbol=e.Symbol)},e.SymbolClass=function(t,n){this.$jscomp$symbol$id_=t,e.defineProperty(this,"description",{configurable:!0,writable:!0,value:n})},e.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_},e.Symbol=function(){var t=0;return function n(i){if(this instanceof n)throw new TypeError("Symbol is not a constructor");return new e.SymbolClass(e.SYMBOL_PREFIX+(i||"")+"_"+t++,i)}}(),e.initSymbolIterator=function(){e.initSymbol();var t=e.global.Symbol.iterator;t||(t=e.global.Symbol.iterator=e.global.Symbol("Symbol.iterator")),"function"!=typeof Array.prototype[t]&&e.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return e.iteratorPrototype(e.arrayIteratorImpl(this))}}),e.initSymbolIterator=function(){}},e.initSymbolAsyncIterator=function(){e.initSymbol();var t=e.global.Symbol.asyncIterator;t||(t=e.global.Symbol.asyncIterator=e.global.Symbol("Symbol.asyncIterator")),e.initSymbolAsyncIterator=function(){}},e.iteratorPrototype=function(t){return e.initSymbolIterator(),(t={next:t})[e.global.Symbol.iterator]=function(){return this},t},e.iteratorFromArray=function(t,n){e.initSymbolIterator(),t instanceof String&&(t+="");var i=0,s={next:function(){if(i<t.length){var e=i++;return{value:n(e,t[e]),done:!1}}return s.next=function(){return{done:!0,value:void 0}},s.next()}};return s[Symbol.iterator]=function(){return s},s},e.polyfill("Array.prototype.values",(function(t){return t||function(){return e.iteratorFromArray(this,(function(e,t){return t}))}}),"es8","es3"),function(e){function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n||4&n&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var s in e)t.d(i,s,function(t){return e[t]}.bind(null,s));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t){t=function(){return this}();try{t=t||new Function("return this")()}catch(n){"object"===typeof window&&(t=window)}e.exports=t},function(e,t,n){n(2),Sk.global.strftime=n(3),Sk.global.strptime=n(4),n(5),n(7),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),[Sk.builtin.object,Sk.builtin.type].forEach((e=>{Sk.abstr.setUpSlots(e),Sk.abstr.setUpMethods(e),Sk.abstr.setUpGetSets(e)})),n(19),n(20),n(21),[Sk.builtin.str,Sk.builtin.none,Sk.builtin.NotImplemented,Sk.builtin.object].forEach((e=>{(e=e.prototype).__doc__=e.hasOwnProperty("tp$doc")?new Sk.builtin.str(e.tp$doc):Sk.builtin.none.none$})),n(22),n(23),n(24),n(25),n(26),n(27),n(28),n(29),n(31),n(32),n(33),n(34),n(35),n(36),n(37),n(38),n(39),n(40),n(41),n(42),n(43),n(44),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65)},function(e,t,n){(function(e){var t={build:{githash:"e3c1c1a4e081362d96ba8afc5997be516b437f30",date:"2021-03-25T11:36:32.075Z"}};t.global="undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},t.exportSymbol=function(e,n){e=e.split(".");var i,s=t.global;for(i=0;i<e.length-1;i++){var r=e[i];s=s.hasOwnProperty(r)?s[r]:s[r]={}}"undefined"!==typeof n&&(s[r=e[i]]=n)},t.isArrayLike=function(e){return!!(e instanceof Array||e&&e.length&&"number"==typeof e.length)},t.js_beautify=function(e){return e},t.exportSymbol("Sk",t),t.exportSymbol("Sk.global",t.global),t.exportSymbol("Sk.build",t.build),t.exportSymbol("Sk.exportSymbol",t.exportSymbol),t.exportSymbol("Sk.isArrayLike",t.isArrayLike),t.exportSymbol("Sk.js_beautify",t.js_beautify)}).call(this,n(0))},function(e,t){!function(){function t(e,t){return""===t||9<e?e:(null==t&&(t="0"),t+e)}function n(e){return 99<e?e:9<e?"0"+e:"00"+e}function i(e){return 0===e?12:12<e?e-12:e}function s(e,t){t=t||"sunday";var n=e.getDay();return"monday"===t&&(0===n?n=6:n--),t=Date.UTC(e.getFullYear(),0,1),e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),Math.floor((Math.floor((e-t)/864e5)+7-n)/7)}function r(e){var t=e%10;if(11<=(e%=100)&&13>=e||0===t||4<=t)return"th";switch(t){case 1:return"st";case 2:return"nd";case 3:return"rd"}}function o(e){"undefined"!==typeof console&&"function"==typeof console.warn&&console.warn(e)}var a={de_DE:{days:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),shortDays:"So Mo Di Mi Do Fr Sa".split(" "),months:"Januar Februar M\xe4rz April Mai Juni Juli August September Oktober November Dezember".split(" "),shortMonths:"Jan Feb M\xe4r Apr Mai Jun Jul Aug Sep Okt Nov Dez".split(" "),AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d.%m.%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},en_CA:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ordinalSuffixes:"st nd rd th th th th th th th th th th th th th th th th th st nd rd th th th th th th th st".split(" "),AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}},en_US:{days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ordinalSuffixes:"st nd rd th th th th th th th th th th th th th th th th th st nd rd th th th th th th th st".split(" "),AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%m/%d/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}},es_MX:{days:"domingo lunes martes mi\xe9rcoles jueves viernes s\xe1bado".split(" "),shortDays:"dom lun mar mi\xe9 jue vie s\xe1b".split(" "),months:"enero;febrero;marzo;abril;mayo;junio;julio;agosto;septiembre;octubre;noviembre; diciembre".split(";"),shortMonths:"ene feb mar abr may jun jul ago sep oct nov dic".split(" "),AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},fr_FR:{days:"dimanche lundi mardi mercredi jeudi vendredi samedi".split(" "),shortDays:"dim. lun. mar. mer. jeu. ven. sam.".split(" "),months:"janvier f\xe9vrier mars avril mai juin juillet ao\xfbt septembre octobre novembre d\xe9cembre".split(" "),shortMonths:"janv. f\xe9vr. mars avril mai juin juil. ao\xfbt sept. oct. nov. d\xe9c.".split(" "),AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},it_IT:{days:"domenica luned\xec marted\xec mercoled\xec gioved\xec venerd\xec sabato".split(" "),shortDays:"dom lun mar mer gio ven sab".split(" "),months:"gennaio febbraio marzo aprile maggio giugno luglio agosto settembre ottobre novembre dicembre".split(" "),shortMonths:"pr mag giu lug ago set ott nov dic".split(" "),AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},nl_NL:{days:"zondag maandag dinsdag woensdag donderdag vrijdag zaterdag".split(" "),shortDays:"zo ma di wo do vr za".split(" "),months:"januari februari maart april mei juni juli augustus september oktober november december".split(" "),shortMonths:"jan feb mrt apr mei jun jul aug sep okt nov dec".split(" "),AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},pt_BR:{days:"domingo segunda ter\xe7a quarta quinta sexta s\xe1bado".split(" "),shortDays:"Dom Seg Ter Qua Qui Sex S\xe1b".split(" "),months:"janeiro fevereiro mar\xe7o abril maio junho julho agosto setembro outubro novembro dezembro".split(" "),shortMonths:"Jan Fev Mar Abr Mai Jun Jul Ago Set Out Nov Dez".split(" "),AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},ru_RU:{days:"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0412\u0442\u043e\u0440\u043d\u0438\u043a \u0421\u0440\u0435\u0434\u0430 \u0427\u0435\u0442\u0432\u0435\u0440\u0433 \u041f\u044f\u0442\u043d\u0438\u0446\u0430 \u0421\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),shortDays:"\u0412\u0441 \u041f\u043d \u0412\u0442 \u0421\u0440 \u0427\u0442 \u041f\u0442 \u0421\u0431".split(" "),months:"\u042f\u043d\u0432\u0430\u0440\u044c \u0424\u0435\u0432\u0440\u0430\u043b\u044c \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b\u044c \u041c\u0430\u0439 \u0418\u044e\u043d\u044c \u0418\u044e\u043b\u044c \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u041e\u043a\u0442\u044f\u0431\u0440\u044c \u041d\u043e\u044f\u0431\u0440\u044c \u0414\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),shortMonths:"\u044f\u043d\u0432 \u0444\u0435\u0432 \u043c\u0430\u0440 \u0430\u043f\u0440 \u043c\u0430\u0439 \u0438\u044e\u043d \u0438\u044e\u043b \u0430\u0432\u0433 \u0441\u0435\u043d \u043e\u043a\u0442 \u043d\u043e\u044f \u0434\u0435\u043a".split(" "),AM:"AM",PM:"PM",am:"am",pm:"pm",formats:{c:"%a %d %b %Y %X",D:"%d.%m.%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},tr_TR:{days:"Pazar Pazartesi Sal\u0131 \xc7ar\u015famba Per\u015fembe Cuma Cumartesi".split(" "),shortDays:"Paz Pzt Sal \xc7r\u015f Pr\u015f Cum Cts".split(" "),months:"Ocak \u015eubat Mart Nisan May\u0131s Haziran Temmuz A\u011fustos Eyl\xfcl Ekim Kas\u0131m Aral\u0131k".split(" "),shortMonths:"Oca \u015eub Mar Nis May Haz Tem A\u011fu Eyl Eki Kas Ara".split(" "),AM:"\xd6\xd6",PM:"\xd6S",am:"\xd6\xd6",pm:"\xd6S",formats:{c:"%a %d %b %Y %X %Z",D:"%d-%m-%Y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%T",x:"%D"}},zh_CN:{days:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d".split(" "),shortDays:"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d".split(""),months:"\u4e00\u6708\u4efd \u4e8c\u6708\u4efd \u4e09\u6708\u4efd \u56db\u6708\u4efd \u4e94\u6708\u4efd \u516d\u6708\u4efd \u4e03\u6708\u4efd \u516b\u6708\u4efd \u4e5d\u6708\u4efd \u5341\u6708\u4efd \u5341\u4e00\u6708\u4efd \u5341\u4e8c\u6708\u4efd".split(" "),shortMonths:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),AM:"\u4e0a\u5348",PM:"\u4e0b\u5348",am:"\u4e0a\u5348",pm:"\u4e0b\u5348",formats:{c:"%a %d %b %Y %X %Z",D:"%d/%m/%y",F:"%Y-%m-%d",R:"%H:%M",r:"%I:%M:%S %p",T:"%H:%M:%S",v:"%e-%b-%Y",X:"%r",x:"%D"}}},l=a.en_US,c=new function e(c,u,h){function d(e,a,l,c){for(var u="",h=null,f=!1,g=e.length,b=!1,_=0;_<g;_++){var v=e.charCodeAt(_);if(!0===f)if(45===v)h="";else if(95===v)h=" ";else if(48===v)h="0";else if(58===v)b&&o("[WARNING] detected use of unsupported %:: or %::: modifiers to strftime"),b=!0;else{switch(v){case 37:u+="%";break;case 65:u+=l.days[a.getDay()];break;case 66:u+=l.months[a.getMonth()];break;case 67:u+=t(Math.floor(a.getFullYear()/100),h);break;case 68:u+=d(l.formats.D,a,l,c);break;case 70:u+=d(l.formats.F,a,l,c);break;case 72:u+=t(a.getHours(),h);break;case 73:u+=t(i(a.getHours()),h);break;case 76:u+=n(Math.floor(c%1e3));break;case 77:u+=t(a.getMinutes(),h);break;case 80:u+=12>a.getHours()?l.am:l.pm;break;case 82:u+=d(l.formats.R,a,l,c);break;case 83:u+=t(a.getSeconds(),h);break;case 84:u+=d(l.formats.T,a,l,c);break;case 85:u+=t(s(a,"sunday"),h);break;case 87:u+=t(s(a,"monday"),h);break;case 88:u+=d(l.formats.X,a,l,c);break;case 89:u+=a.getFullYear();break;case 90:m&&0===p?u+="GMT":u+=(h=a.toString().match(/\(([\w\s]+)\)/))&&h[1]||"";break;case 97:u+=l.shortDays[a.getDay()];break;case 98:case 104:u+=l.shortMonths[a.getMonth()];break;case 99:u+=d(l.formats.c,a,l,c);break;case 100:u+=t(a.getDate(),h);break;case 101:u+=t(a.getDate(),null==h?" ":h);break;case 106:h=new Date(a.getFullYear(),0,1),u+=n(h=Math.ceil((a.getTime()-h.getTime())/864e5));break;case 107:u+=t(a.getHours(),null==h?" ":h);break;case 108:u+=t(i(a.getHours()),null==h?" ":h);break;case 109:u+=t(a.getMonth()+1,h);break;case 110:u+="\n";break;case 111:h=a.getDate(),u=l.ordinalSuffixes?u+(String(h)+(l.ordinalSuffixes[h-1]||r(h))):u+(String(h)+r(h));break;case 112:u+=12>a.getHours()?l.AM:l.PM;break;case 114:u+=d(l.formats.r,a,l,c);break;case 115:u+=Math.floor(c/1e3);break;case 116:u+="\t";break;case 117:u+=0===(h=a.getDay())?7:h;break;case 118:u+=d(l.formats.v,a,l,c);break;case 119:u+=a.getDay();break;case 120:u+=d(l.formats.x,a,l,c);break;case 121:u+=(""+a.getFullYear()).slice(2);break;case 122:m&&0===p?u+=b?"+00:00":"+0000":(h=0!==p?p/6e4:-a.getTimezoneOffset(),f=b?":":"",v=Math.abs(h%60),u+=(0>h?"-":"+")+t(Math.floor(Math.abs(h/60)))+f+t(v));break;default:f&&(u+="%"),u+=e[_]}h=null,f=!1}else 37===v?f=!0:u+=e[_]}return u}var f,g=c||l,p=u||0,m=h||!1,b=0,_=function(e,t){if(t){var n=t.getTime();if(m){var i=6e4*(t.getTimezoneOffset()||0);6e4*((t=new Date(n+i+p)).getTimezoneOffset()||0)!==i&&(t=6e4*(t.getTimezoneOffset()||0),t=new Date(n+t+p))}}else(n=Date.now())>b?(b=n,f=new Date(b),n=b,m&&(f=new Date(b+6e4*(f.getTimezoneOffset()||0)+p))):n=b,t=f;return d(e,t,g,n)};return _.localize=function(t){return new e(t||g,p,m)},_.localizeByIdentifier=function(e){var t=a[e];return t?_.localize(t):(o('[WARNING] No locale found with identifier "'+e+'".'),_)},_.timezone=function(t){var n=p,i=m,s=typeof t;return"number"!==s&&"string"!==s||(i=!0,"string"===s?n=(n="-"===t[0]?-1:1)*(60*(s=parseInt(t.slice(1,3),10))+(t=parseInt(t.slice(3,5),10)))*6e4:"number"===s&&(n=6e4*t)),new e(g,n,i)},_.utc=function(){return new e(g,p,!0)},_}(l,0,!1);if("undefined"!==typeof e)e.exports=c;else(function(){return this||(0,eval)("this")}()).strftime=c;"function"!==typeof Date.now&&(Date.now=function(){return+new Date})}()},function(e,t,n){!function(){var t=function(e,n,i){return t.parse(e,n,i)};t.version="0.0.1",(e.exports=t).strptime=t,t.locale={a:"Sun Mon Tue Wed Thu Fri Sat".split(" "),A:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),b:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),B:"January February March April May June July August September October November December".split(" "),f:"Jan. Feb. Mar. Apr. May Jun. Jul. Aug. Sep. Oct. Nov. Dec.".split(" "),c:"%Y-%m-%d %H:%M:%S",P:["am","pm"],r:"%I:%M:%S %p",x:"%m/%d/%y",X:"%H:%M:%S",day:["Yesterday","Today","Tomorrow"],bg:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Bg:"January February March April May June July August September October November December".split(" "),fg:"Jan. Feb. Mar. Apr. May Jun. Jul. Aug. Sep. Oct. Nov. Dec.".split(" "),Date_dBY_year_in_HM:"%#B %-d, %Y at %-H:%M",Date_dBY_year:"%#B %-d, %Y",Date_dBY:"%#B %-d, %Y",Date_AdBY:"%A, %#B %-d, %Y",Date_dBA:"%#B %-d, %A",Date_df_in_HM:"%#f, %-d at %-H:%M",Date_dfY:"%-d %#f %Y",Date_dB_in_HM:"%#B %-d at %-H:%M",Date_df:"%-d %#f"},function(e){function t(e,n,i,s,o,a){if(n=String(n),i=String(i),n=n.replace(/^[#_0\^\-!~]+/,""),!(s=r[n]))return e;var l=!1;if(-1===i.indexOf("!")&&1===n.length&&(-1<i.indexOf("~")||-1<"bBf".indexOf(n)&&/%[0\-_]?d[\s]+$/.test(a.substr(0,o)))&&(l=!0),("I"===n||"l"===n)&&!/%[pP]/.test(a))throw Error("Undefined AM/PM");switch(typeof s){case"function":return s();case"string":return s;case"object":return t.make.push([s.make,i,l]),"("+s.reg+")";default:return e}}function n(e,t){return e=String(e),-1!==(t=String(t)).indexOf("#")?e.substr(0,1).toUpperCase()+e.substr(1):-1!==t.indexOf("^")?e.substr(0,1)+e.substr(1).toLowerCase():e}var i=Array.prototype.indexOf||function(e){for(var t=this.length,n=0;n<t;){if(e==this[n])return n;n++}return-1},s=e.locale,r={"%":"\\%",a:"\\S+",A:"\\S+",b:{reg:"\\S+",make:function(e,t,r,o){return-1!==(t=i.call(o?s.bg:s.b,n(t,r)))&&(e.setUTCMonth(t),!0)}},h:{reg:"\\S+",make:function(e,t,r,o){return-1!==(t=i.call(o?s.bg:s.b,n(t,r)))&&(e.setUTCMonth(t),!0)}},B:{reg:"\\S+",make:function(e,t,r,o){return-1!==(t=i.call(o?s.Bg:s.B,n(t,r)))&&(e.setUTCMonth(t),!0)}},f:{reg:"\\S+",make:function(e,t,r,o){return-1!==(t=i.call(o?s.fg:s.f,n(t,r)))&&(e.setUTCMonth(t),!0)}},g:{reg:"[\\d\\s]?\\d",make:function(e,t){return!(0>(t=parseInt(t,10))||99<t)&&(t+=100*parseInt((new Date).getUTCFullYear()/100,10),e.setUTCFullYear(t),!0)}},G:{reg:"\\d{4}",make:function(e,t){return t=parseInt(t,10),e.setUTCFullYear(t),!0}},d:{reg:"[\\d\\s]?\\d",make:function(e,t){return!(1>(t=parseInt(t,10))||31<t)&&(e.setUTCDate(t),!0)}},e:{reg:"[\\d\\s]?\\d",make:function(e,t){return!(1>(t=parseInt(t,10))||31<t)&&(e.setUTCDate(t),!0)}},H:{reg:"[\\d\\s]?\\d",make:function(e,t){return!(0>(t=parseInt(t,10))||23<t)&&(e.setUTCHours(t),!0)}},I:{reg:"[\\d\\s]?\\d",make:function(e,t){return!(1>(t=parseInt(t,10))||12<t)&&(e.setUTCHours(e.getUTCHours()+t),!0)}},m:{reg:"[\\d\\s]?\\d",make:function(e,t){return!(1>(t=parseInt(t,10))||12<t)&&(e.setUTCMonth(t-1),!0)}},M:{reg:"[\\d\\s]?\\d",make:function(e,t){return!(0>(t=parseInt(t,10))||59<t)&&(e.setUTCMinutes(t),!0)}},n:"\\n",p:{reg:"\\S+",make:function(e,t){return-1!==(t=i.call(s.P,t.toLowerCase()))&&(1===t&&e.setUTCHours(e.getUTCHours()+12),!0)}},P:{reg:"\\S+",make:function(e,t){return-1!==(t=i.call(s.P,t.toLowerCase()))&&(1===t&&e.setUTCHours(e.getUTCHours()+12),!0)}},S:{reg:"[\\d\\s]?\\d",make:function(e,t){return!(0>(t=parseInt(t,10))||60<t)&&(e.setUTCSeconds(t),!0)}},t:"\\t",u:"\\d",U:"[\\d\\s]?\\d",w:"\\d",W:"[\\d\\s]?\\d",y:{reg:"[\\d\\s]?\\d",make:function(e,t){return!(0>(t=parseInt(t,10))||99<t)&&(t+=100*parseInt((new Date).getUTCFullYear()/100,10),e.setUTCFullYear(t),!0)}},Y:{reg:"\\d{4}",make:function(e,t){return t=parseInt(t,10),e.setUTCFullYear(t),!0}},z:{reg:"[+\\-]\\d{4}",make:function(e,t){if(!(t=t.match(/^([+\-])(\d{2})(\d{2})$/)))return!1;var n=6e4*(60*parseInt(t[2],10)+parseInt(t[3],10));return"+"===t[1]&&(n=-n),e.setTime(e.getTime()+n),!0}},l:{reg:"[\\d\\s]?\\d",make:function(e,t){return!(1>(t=parseInt(t,10))||12<t)&&(e.setUTCHours(e.getUTCHours()+t),!0)}},s:{reg:"\\d+",make:function(e,t){return t=parseInt(t,10),e.setTime(1e3*t),!0}},c:s.c,r:s.r,R:"%H:%M",T:"%H:%M:%S",x:s.x,X:s.X,D:"%m/%d/%y",F:"%Y-%m-%d",Date_iso:"%Y-%m-%dT%H:%M:%S",Date_dBY_year_in_HM:s.Date_dBY_year_in_HM,Date_dBY_year:s.Date_dBY_year,Date_dBY:s.Date_dBY,Date_dBA:s.Date_dBA,Date_AdBY:s.Date_AdBY,Date_df_in_HM:s.Date_df_in_HM,Date_dfY:s.Date_dfY,Date_dB_in_HM:s.Date_dB_in_HM,Date_dmY__dot:"%d.%m.%Y",Date_df:s.Date_df,Date_FT:"%F %T",Date_dmY__minus:"%d-%m-%Y"};e.parse=function(e,n,i){e=String(e),n=String(n);for(var s=5;/%(Date_[a-zA-Z0-9_]+|[cDFrRTxX])/g.test(n)&&s;)n=n.replace(/%(Date_[a-zA-Z0-9_]+|[cDFrRTxX])/,t),s--;if(t.make=[],n=n.replace(/%(([#\^!~]{0,2})[aAbBfh]|([0\-_]?)[degHImMSVWyl]|[GnpPtuUwYzZs%])/g,t),!(e=e.match(new RegExp(n)))||!t.make.length)return null;n=new Date(Date.UTC(0,0)),s=0;for(var r=t.make.length;s<r;s++){var o=t.make[s];if(!o[0](n,e[s+1],o[1],o[2]))return null}return i&&n.setTime(n.getTime()+6e4*n.getTimezoneOffset()),n}}(t)}()},function(e,t,n){e=n(6);const i=Sk.global.JSBI=void 0!==Sk.global.BigInt?{}:e;if(void 0===Sk.global.BigInt){const e=i.__isBigInt;i.__isBigInt=e?t=>null!==t&&e(t):e=>e instanceof i,i.powermod=(e,t,n)=>{const s=i.BigInt(1);let r=s;for(t=i.greaterThan(t,i.__ZERO)?t:i.unaryMinus(t);i.greaterThan(t,i.__ZERO);)i.bitwiseAnd(t,s)&&(r=i.remainder(i.multiply(r,e),n)),t=i.signedRightShift(t,s),e=i.remainder(i.multiply(e,e),n);return r}}else Object.assign(i,{BigInt:Sk.global.BigInt,toNumber:e=>Number(e),toString:e=>e.toString(),__isBigInt:e=>"bigint"===typeof e,unaryMinus:e=>-e,bitwiseNot:e=>~e,bitwiseAnd:(e,t)=>e&t,bitwiseOr:(e,t)=>e|t,bitwiseXor:(e,t)=>e^t,exponentiate:(e,t)=>{const n=i.BigInt(1);let s=n;for(t=t>i.__ZERO?t:-t;t>i.__ZERO;)t&n&&(s*=e),t>>=n,e*=e;return s},powermod:(e,t,n)=>{const s=i.BigInt(1);let r=s;for(t=t>i.__ZERO?t:-t;t>i.__ZERO;)t&s&&(r=r*e%n),t>>=s,e=e*e%n;return r},multiply:(e,t)=>e*t,divide:(e,t)=>e/t,remainder:(e,t)=>e%t,add:(e,t)=>e+t,subtract:(e,t)=>e-t,leftShift:(e,t)=>e<<t,signedRightShift:(e,t)=>e>>t,unsignedRightShift:(e,t)=>e>>>t,lessThan:(e,t)=>e<t,lessThanOrEqual:(e,t)=>e<=t,greaterThan:(e,t)=>e>t,greaterThanOrEqual:(e,t)=>e>=t,equal:(e,t)=>e===t,notEqual:(e,t)=>e!==t});i.__ZERO=i.BigInt(0),i.__MAX_SAFE=i.BigInt(Number.MAX_SAFE_INTEGER),i.__MIN_SAFE=i.BigInt(-Number.MAX_SAFE_INTEGER),i.numberIfSafe=e=>i.lessThan(e,i.__MAX_SAFE)&&i.greaterThan(e,i.__MIN_SAFE)?i.toNumber(e):e},function(e,t,n){e.exports=function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function o(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function a(){return a=o()?Reflect.construct:function(e,t,n){var i=[null];return i.push.apply(i,t),e=new(Function.bind.apply(e,i)),n&&r(e,n.prototype),e},a.apply(null,arguments)}function l(e){var t="function"==typeof Map?new Map:void 0;return l=function(e){function n(){return a(e,arguments,s(this).constructor)}if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),r(n,e)},l(e)}function c(e){var t=o();return function(){var n=s(e);if(t){var i=s(this).constructor;n=Reflect.construct(n,arguments,i)}else n=n.apply(this,arguments);if(!n||"object"!=typeof n&&"function"!=typeof n){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");n=this}return n}}function u(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function d(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return{s:t=function(){},n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){o=!0,s=e},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}var f=Math.imul,g=Math.clz32,p=function(t){function s(e,t){var n;if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");if(e>s.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return(n=a.call(this,e)).sign=t,n}var r=Math.abs,o=Math.max;i(s,t);var a=c(s);return n(s,[{key:"toDebugString",value:function(){var e,t=["BigInt["],n=d(this);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.push((i?(i>>>0).toString(16):i)+", ")}}catch(s){n.e(s)}finally{n.f()}return t.push("]"),t.join("")}},{key:"toString",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:10;if(2>e||36<e)throw new RangeError("toString() radix argument must be between 2 and 36");return 0===this.length?"0":0==(e&e-1)?s.__toStringBasePowerOfTwo(this,e):s.__toStringGeneric(this,e,!1)}},{key:"__copy",value:function(){for(var e=new s(this.length,this.sign),t=0;t<this.length;t++)e[t]=this[t];return e}},{key:"__trim",value:function(){for(var e=this.length,t=this[e-1];0===t;)t=this[--e-1],this.pop();return 0===e&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var e=0;e<this.length;e++)this[e]=0}},{key:"__clzmsd",value:function(){return s.__clz32(this[this.length-1])}},{key:"__inplaceMultiplyAdd",value:function(e,t,n){n>this.length&&(n=this.length);var i=65535&e;e>>>=16;var r=0,o=65535&t;t>>>=16;for(var a=0;a<n;a++){var l=this.__digit(a),c=65535&l,u=l>>>16;l=s.__imul(c,i),c=s.__imul(c,e);var h=s.__imul(u,i),d=o+(65535&l);r=(o=(c>>>16)+(h>>>16)+(65535&(u=s.__imul(u,e)))+((l=t+r+(d>>>16)+(l>>>16)+(65535&c)+(65535&h))>>>16))>>>16,o&=65535,t=u>>>16,this.__setDigit(a,65535&d|l<<16)}if(0!==r||0!==o||0!==t)throw Error("implementation bug")}},{key:"__inplaceAdd",value:function(e,t,n){for(var i,s=0,r=0;r<n;r++)s=(i=this.__halfDigit(t+r)+e.__halfDigit(r)+s)>>>16,this.__setHalfDigit(t+r,i);return s}},{key:"__inplaceSub",value:function(e,t,n){var i=0;if(1&t){t>>=1;for(var s=this.__digit(t),r=65535&s,o=0;o<n-1>>>1;o++){var a=e.__digit(o);i=1&(s=(s>>>16)-(65535&a)-i)>>>16,this.__setDigit(t+o,s<<16|65535&r),i=1&(r=(65535&(s=this.__digit(t+o+1)))-(a>>>16)-i)>>>16}var l=(s>>>16)-(65535&(a=e.__digit(o)))-i;if(i=1&l>>>16,this.__setDigit(t+o,l<<16|65535&r),t+o+1>=this.length)throw new RangeError("out of bounds");0==(1&n)&&(i=1&(r=(65535&(s=this.__digit(t+o+1)))-(a>>>16)-i)>>>16,this.__setDigit(t+e.length,4294901760&s|65535&r))}else{for(t>>=1,r=0;r<e.length-1;r++)i=1&(s=((s=this.__digit(t+r))>>>16)-((a=e.__digit(r))>>>16)-(i=1&(o=(65535&s)-(65535&a)-i)>>>16))>>>16,this.__setDigit(t+r,s<<16|65535&o);i=1&(s=(65535&(o=this.__digit(t+r)))-(65535&(e=e.__digit(r)))-i)>>>16,a=0,0==(1&n)&&(i=1&(a=(o>>>16)-(e>>>16)-i)>>>16),this.__setDigit(t+r,a<<16|65535&s)}return i}},{key:"__inplaceRightShift",value:function(e){if(0!==e){for(var t,n=this.__digit(0)>>>e,i=this.length-1,s=0;s<i;s++)t=this.__digit(s+1),this.__setDigit(s,t<<32-e|n),n=t>>>e;this.__setDigit(i,n)}}},{key:"__digit",value:function(e){return this[e]}},{key:"__unsignedDigit",value:function(e){return this[e]>>>0}},{key:"__setDigit",value:function(e,t){this[e]=0|t}},{key:"__setDigitGrow",value:function(e,t){this[e]=0|t}},{key:"__halfDigitLength",value:function(){var e=this.length;return 65535>=this.__unsignedDigit(e-1)?2*e-1:2*e}},{key:"__halfDigit",value:function(e){return 65535&this[e>>>1]>>>((1&e)<<4)}},{key:"__setHalfDigit",value:function(e,t){var n=e>>>1,i=this.__digit(n);this.__setDigit(n,1&e?65535&i|t<<16:4294901760&i|65535&t)}}],[{key:"BigInt",value:function(t){var n=Math.floor,i=Number.isFinite;if("number"==typeof t){if(0===t)return s.__zero();if((0|t)===t)return 0>t?s.__oneDigit(-t,!0):s.__oneDigit(t,!1);if(!i(t)||n(t)!==t)throw new RangeError("The number "+t+" cannot be converted to BigInt because it is not an integer");return s.__fromDouble(t)}if("string"==typeof t){if(null===(n=s.__fromString(t)))throw new SyntaxError("Cannot convert "+t+" to a BigInt");return n}if("boolean"==typeof t)return!0===t?s.__oneDigit(1,!1):s.__zero();if("object"===e(t))return t.constructor===s?t:(t=s.__toPrimitive(t),s.BigInt(t));throw new TypeError("Cannot convert "+t+" to a BigInt")}},{key:"toNumber",value:function(e){var t=e.length;if(0===t)return 0;if(1===t){var n=e.__unsignedDigit(0);return e.sign?-n:n}var i=e.__digit(t-1),r=s.__clz32(i);if(1024<(n=32*t-r))return e.sign?-1/0:1/0;--n;var o=t-1,a=r+1;r=(32===a?0:i<<a)>>>12;var l=a-12;return t=12<=a?0:i<<20+a,a=20+a,0<l&&0<o&&(o--,r|=(i=e.__digit(o))>>>32-l,t=i<<l,a=l),0<a&&0<o&&(o--,t|=(i=e.__digit(o))>>>32-a,a-=32),(1===(i=s.__decideRounding(e,a,o,i))||0===i&&1==(1&t))&&0===(t=t+1>>>0)&&0!=++r>>>20&&(r=0,1023<++n)?e.sign?-1/0:1/0:(e=e.sign?-2147483648:0,n=n+1023<<20,s.__kBitConversionInts[1]=e|n|r,s.__kBitConversionInts[0]=t,s.__kBitConversionDouble[0])}},{key:"unaryMinus",value:function(e){if(0===e.length)return e;var t=e.__copy();return t.sign=!e.sign,t}},{key:"bitwiseNot",value:function(e){return e.sign?s.__absoluteSubOne(e).__trim():s.__absoluteAddOne(e,!0)}},{key:"exponentiate",value:function(e,t){if(t.sign)throw new RangeError("Exponent must be positive");if(0===t.length)return s.__oneDigit(1,!1);if(0===e.length)return e;if(1===e.length&&1===e.__digit(0))return e.sign&&0==(1&t.__digit(0))?s.unaryMinus(e):e;if(1<t.length)throw new RangeError("BigInt too big");if(1===(t=t.__unsignedDigit(0)))return e;if(t>=s.__kMaxLengthBits)throw new RangeError("BigInt too big");if(1===e.length&&2===e.__digit(0)){var n=1+(t>>>5);return(e=new s(n,e.sign&&0!=(1&t))).__initializeDigits(),e.__setDigit(n-1,1<<(31&t)),e}n=null;var i=e;for(0!=(1&t)&&(n=e),t>>=1;0!==t;t>>=1)i=s.multiply(i,i),0!=(1&t)&&(n=null===n?i:s.multiply(n,i));return n}},{key:"multiply",value:function(e,t){if(0===e.length)return e;if(0===t.length)return t;var n=e.length+t.length;32<=e.__clzmsd()+t.__clzmsd()&&n--,(n=new s(n,e.sign!==t.sign)).__initializeDigits();for(var i=0;i<e.length;i++)s.__multiplyAccumulate(t,e.__digit(i),n,i);return n.__trim()}},{key:"divide",value:function(e,t){if(0===t.length)throw new RangeError("Division by zero");if(0>s.__absoluteCompare(e,t))return s.__zero();var n=e.sign!==t.sign,i=t.__unsignedDigit(0);if(1===t.length&&65535>=i){if(1===i)return n===e.sign?e:s.unaryMinus(e);e=s.__absoluteDivSmall(e,i,null)}else e=s.__absoluteDivLarge(e,t,!0,!1);return e.sign=n,e.__trim()}},{key:"remainder",value:function(e,t){if(0===t.length)throw new RangeError("Division by zero");if(0>s.__absoluteCompare(e,t))return e;var n=t.__unsignedDigit(0);return 1===t.length&&65535>=n?1===n||0===(t=s.__absoluteModSmall(e,n))?s.__zero():s.__oneDigit(t,e.sign):((t=s.__absoluteDivLarge(e,t,!1,!0)).sign=e.sign,t.__trim())}},{key:"add",value:function(e,t){var n=e.sign;return n===t.sign?s.__absoluteAdd(e,t,n):0<=s.__absoluteCompare(e,t)?s.__absoluteSub(e,t,n):s.__absoluteSub(t,e,!n)}},{key:"subtract",value:function(e,t){var n=e.sign;return n===t.sign?0<=s.__absoluteCompare(e,t)?s.__absoluteSub(e,t,n):s.__absoluteSub(t,e,!n):s.__absoluteAdd(e,t,n)}},{key:"leftShift",value:function(e,t){return 0===t.length||0===e.length?e:t.sign?s.__rightShiftByAbsolute(e,t):s.__leftShiftByAbsolute(e,t)}},{key:"signedRightShift",value:function(e,t){return 0===t.length||0===e.length?e:t.sign?s.__leftShiftByAbsolute(e,t):s.__rightShiftByAbsolute(e,t)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(e,t){return 0>s.__compareToBigInt(e,t)}},{key:"lessThanOrEqual",value:function(e,t){return 0>=s.__compareToBigInt(e,t)}},{key:"greaterThan",value:function(e,t){return 0<s.__compareToBigInt(e,t)}},{key:"greaterThanOrEqual",value:function(e,t){return 0<=s.__compareToBigInt(e,t)}},{key:"equal",value:function(e,t){if(e.sign!==t.sign||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e.__digit(n)!==t.__digit(n))return!1;return!0}},{key:"notEqual",value:function(e,t){return!s.equal(e,t)}},{key:"bitwiseAnd",value:function(e,t){if(!e.sign&&!t.sign)return s.__absoluteAnd(e,t).__trim();if(e.sign&&t.sign){var n=o(e.length,t.length)+1;return e=s.__absoluteSubOne(e,n),t=s.__absoluteSubOne(t),e=s.__absoluteOr(e,t,e),s.__absoluteAddOne(e,!0,e).__trim()}return e.sign&&(e=(t=[t,e])[0],t=t[1]),s.__absoluteAndNot(e,s.__absoluteSubOne(t)).__trim()}},{key:"bitwiseXor",value:function(e,t){if(!e.sign&&!t.sign)return s.__absoluteXor(e,t).__trim();if(e.sign&&t.sign){var n=o(e.length,t.length);return e=s.__absoluteSubOne(e,n),t=s.__absoluteSubOne(t),s.__absoluteXor(e,t,e).__trim()}return n=o(e.length,t.length)+1,e.sign&&(e=(t=[t,e])[0],t=t[1]),t=s.__absoluteSubOne(t,n),t=s.__absoluteXor(t,e,t),s.__absoluteAddOne(t,!0,t).__trim()}},{key:"bitwiseOr",value:function(e,t){var n=o(e.length,t.length);return e.sign||t.sign?e.sign&&t.sign?(e=s.__absoluteSubOne(e,n),t=s.__absoluteSubOne(t),e=s.__absoluteAnd(e,t,e),s.__absoluteAddOne(e,!0,e).__trim()):(e.sign&&(e=(t=[t,e])[0],t=t[1]),t=s.__absoluteSubOne(t,n),t=s.__absoluteAndNot(t,e,t),s.__absoluteAddOne(t,!0,t).__trim()):s.__absoluteOr(e,t).__trim()}},{key:"asIntN",value:function(e,t){if(0===t.length)return t;if(0===e)return s.__zero();if(e>=s.__kMaxLengthBits)return t;var n=e+31>>>5;if(t.length<n)return t;var i=t.__unsignedDigit(n-1),r=1<<(31&e-1);if(t.length===n&&i<r)return t;if((i&r)!==r)return s.__truncateToNBits(e,t);if(!t.sign)return s.__truncateAndSubFromPowerOfTwo(e,t,!0);if(0==(i&r-1)){for(var o=n-2;0<=o;o--)if(0!==t.__digit(o))return s.__truncateAndSubFromPowerOfTwo(e,t,!1);return t.length===n&&i===r?t:s.__truncateToNBits(e,t)}return s.__truncateAndSubFromPowerOfTwo(e,t,!1)}},{key:"asUintN",value:function(e,t){if(0===t.length)return t;if(0===e)return s.__zero();if(t.sign){if(e>s.__kMaxLengthBits)throw new RangeError("BigInt too big");return s.__truncateAndSubFromPowerOfTwo(e,t,!1)}if(e>=s.__kMaxLengthBits)return t;var n=e+31>>>5;if(t.length<n)return t;var i=31&e;return t.length!=n||0!==i&&0!=t.__digit(n-1)>>>i?s.__truncateToNBits(e,t):t}},{key:"ADD",value:function(e,t){if(e=s.__toPrimitive(e),t=s.__toPrimitive(t),"string"==typeof e)return"string"!=typeof t&&(t=t.toString()),e+t;if("string"==typeof t)return e.toString()+t;if(e=s.__toNumeric(e),t=s.__toNumeric(t),s.__isBigInt(e)&&s.__isBigInt(t))return s.add(e,t);if("number"==typeof e&&"number"==typeof t)return e+t;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(e,t){return s.__compare(e,t,0)}},{key:"LE",value:function(e,t){return s.__compare(e,t,1)}},{key:"GT",value:function(e,t){return s.__compare(e,t,2)}},{key:"GE",value:function(e,t){return s.__compare(e,t,3)}},{key:"EQ",value:function(t,n){for(;;){if(s.__isBigInt(t))return s.__isBigInt(n)?s.equal(t,n):s.EQ(n,t);if("number"==typeof t){if(s.__isBigInt(n))return s.__equalToNumber(n,t);if("object"!==e(n))return t==n;n=s.__toPrimitive(n)}else if("string"==typeof t){if(s.__isBigInt(n))return null!==(t=s.__fromString(t))&&s.equal(t,n);if("object"!==e(n))return t==n;n=s.__toPrimitive(n)}else if("boolean"==typeof t){if(s.__isBigInt(n))return s.__equalToNumber(n,+t);if("object"!==e(n))return t==n;n=s.__toPrimitive(n)}else if("symbol"===e(t)){if(s.__isBigInt(n))return!1;if("object"!==e(n))return t==n;n=s.__toPrimitive(n)}else{if("object"!==e(t))return t==n;if("object"===e(n)&&n.constructor!==s)return t==n;t=s.__toPrimitive(t)}}}},{key:"NE",value:function(e,t){return!s.EQ(e,t)}},{key:"__zero",value:function(){return new s(0,!1)}},{key:"__oneDigit",value:function(e,t){return(t=new s(1,t)).__setDigit(0,e),t}},{key:"__decideRounding",value:function(e,t,n,i){if(0<t)return-1;if(0>t)t=-t-1;else{if(0===n)return-1;n--,i=e.__digit(n),t=31}if(0==(i&(t=1<<t)))return-1;if(0!=(i&--t))return 1;for(;0<n;)if(n--,0!==e.__digit(n))return 1;return 0}},{key:"__fromDouble",value:function(e){s.__kBitConversionDouble[0]=e;var t=(2047&s.__kBitConversionInts[1]>>>20)-1023,n=1+(t>>>5);e=new s(n,0>e);var i=1048575&s.__kBitConversionInts[1]|1048576,r=s.__kBitConversionInts[0];if(20>(t&=31)){var o=20-t,a=o+32;t=i>>>o,i=i<<32-o|r>>>o,r<<=32-o}else 20===t?(a=32,t=i,i=r):(a=32-(o=t-20),t=i<<o|r>>>32-o,i=r<<o);for(e.__setDigit(n-1,t),n-=2;0<=n;n--)0<a?(a-=32,t=i,i=r):t=0,e.__setDigit(n,t);return e.__trim()}},{key:"__isWhitespace",value:function(e){return!!(13>=e&&9<=e)||(159>=e?32==e:131071>=e?160==e||5760==e:196607>=e?10>=(e&=131071)||40==e||41==e||47==e||95==e||4096==e:65279==e)}},{key:"__fromString",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=0,i=e.length,r=0;if(r===i)return s.__zero();for(var o=e.charCodeAt(r);s.__isWhitespace(o);){if(++r===i)return s.__zero();o=e.charCodeAt(r)}if(43===o){if(++r===i)return null;o=e.charCodeAt(r),n=1}else if(45===o){if(++r===i)return null;o=e.charCodeAt(r),n=-1}if(0===t){if(t=10,48===o){if(++r===i)return s.__zero();if(88===(o=e.charCodeAt(r))||120===o){if(t=16,++r===i)return null;o=e.charCodeAt(r)}else if(79===o||111===o){if(t=8,++r===i)return null;o=e.charCodeAt(r)}else if(66===o||98===o){if(t=2,++r===i)return null;o=e.charCodeAt(r)}}}else if(16===t&&48===o){if(++r===i)return s.__zero();if(88===(o=e.charCodeAt(r))||120===o){if(++r===i)return null;o=e.charCodeAt(r)}}for(;48===o;){if(++r===i)return s.__zero();o=e.charCodeAt(r)}var a=i-r,l=s.__kMaxBitsPerChar[t],c=s.__kBitsPerCharTableMultiplier-1;if(a>1073741824/l)return null;a=new s(31+(l*a+c>>>s.__kBitsPerCharTableShift)>>>5,!1);var u=10>t?t:10,h=10<t?t-10:0;if(0==(t&t-1)){l>>=s.__kBitsPerCharTableShift;var d=[],f=[],g=!1;do{for(var p,m=c=0;;){if(o-48>>>0<u)p=o-48;else{if(!((32|o)-97>>>0<h)){g=!0;break}p=(32|o)-87}if(m+=l,c=c<<l|p,++r===i){g=!0;break}if(o=e.charCodeAt(r),32<m+l)break}d.push(c),f.push(m)}while(!g);s.__fillFromParts(a,d,f)}else{a.__initializeDigits(),d=!1,f=0;do{for(g=0,p=1;;){if(o-48>>>0<u)c=o-48;else{if(!((32|o)-97>>>0<h)){d=!0;break}c=(32|o)-87}if(4294967295<(m=p*t))break;if(p=m,g=g*t+c,f++,++r===i){d=!0;break}o=e.charCodeAt(r)}c=32*s.__kBitsPerCharTableMultiplier-1,a.__inplaceMultiplyAdd(p,g,l*f+c>>>s.__kBitsPerCharTableShift+5)}while(!d)}if(r!==i){if(!s.__isWhitespace(o))return null;for(r++;r<i;r++)if(o=e.charCodeAt(r),!s.__isWhitespace(o))return null}return 0!==n&&10!==t?null:(a.sign=-1===n,a.__trim())}},{key:"__fillFromParts",value:function(e,t,n){for(var i=0,s=0,r=0,o=t.length-1;0<=o;o--){var a=t[o],l=n[o];s|=a<<r,32===(r+=l)?(e.__setDigit(i++,s),r=0,s=0):32<r&&(e.__setDigit(i++,s),s=a>>>l-(r-=32))}if(0!==s){if(i>=e.length)throw Error("implementation bug");e.__setDigit(i++,s)}for(;i<e.length;i++)e.__setDigit(i,0)}},{key:"__toStringBasePowerOfTwo",value:function(e,t){var n=e.length,i=t-1;i=(15&(i=(51&(i=(85&i>>>1)+(85&i))>>>2)+(51&i))>>>4)+(15&i),--t;var r=e.__digit(n-1),o=s.__clz32(r),a=0|(32*n-o+i-1)/i;if(e.sign&&a++,268435456<a)throw Error("string too long");o=Array(a),--a;for(var l=0,c=0,u=0;u<n-1;u++){var h=e.__digit(u);for(l=(l|h<<c)&t,o[a--]=s.__kConversionChars[l],l=h>>>(c=i-c),c=32-c;c>=i;)o[a--]=s.__kConversionChars[l&t],l>>>=i,c-=i}for(o[a--]=s.__kConversionChars[(l|r<<c)&t],l=r>>>i-c;0!==l;)o[a--]=s.__kConversionChars[l&t],l>>>=i;if(e.sign&&(o[a--]="-"),-1!==a)throw Error("implementation bug");return o.join("")}},{key:"__toStringGeneric",value:function(e,t,n){var i=e.length;if(0===i)return"";if(1===i)return t=e.__unsignedDigit(0).toString(t),!1===n&&e.sign&&(t="-"+t),t;var r=32*i-s.__clz32(e.__digit(i-1));i=s.__kMaxBitsPerChar[t]-1,i=1+(0|((r*=s.__kBitsPerCharTableMultiplier)+(i-1))/i)>>1;var o=(r=s.exponentiate(s.__oneDigit(t,!1),s.__oneDigit(i,!1))).__unsignedDigit(0);if(1===r.length&&65535>=o){(r=new s(e.length,!1)).__initializeDigits();for(var a=0,l=2*e.length-1;0<=l;l--)a=a<<16|e.__halfDigit(l),r.__setHalfDigit(l,0|a/o),a=0|a%o;o=a.toString(t)}else r=(o=s.__absoluteDivLarge(e,r,!0,!0)).quotient,o=o.remainder.__trim(),o=s.__toStringGeneric(o,t,!0);for(r.__trim(),t=s.__toStringGeneric(r,t,!0);o.length<i;)o="0"+o;return!1===n&&e.sign&&(t="-"+t),t+o}},{key:"__unequalSign",value:function(e){return e?-1:1}},{key:"__absoluteGreater",value:function(e){return e?-1:1}},{key:"__absoluteLess",value:function(e){return e?1:-1}},{key:"__compareToBigInt",value:function(e,t){var n=e.sign;return n!==t.sign?s.__unequalSign(n):0<(e=s.__absoluteCompare(e,t))?s.__absoluteGreater(n):0>e?s.__absoluteLess(n):0}},{key:"__compareToNumber",value:function(e,t){if(1|t){var n=e.sign,i=0>t;if(n!==i)return s.__unequalSign(n);if(0===e.length){if(i)throw Error("implementation bug");return 0===t?0:-1}return 1<e.length?s.__absoluteGreater(n):(t=r(t),(e=e.__unsignedDigit(0))>t?s.__absoluteGreater(n):e<t?s.__absoluteLess(n):0)}return s.__compareToDouble(e,t)}},{key:"__compareToDouble",value:function(e,t){if(t!==t)return t;if(t===1/0)return-1;if(-1/0===t)return 1;var n=e.sign;if(n!==0>t)return s.__unequalSign(n);if(0===t)throw Error("implementation bug: should be handled elsewhere");if(0===e.length)return-1;if(s.__kBitConversionDouble[0]=t,2047==(t=2047&s.__kBitConversionInts[1]>>>20))throw Error("implementation bug: handled elsewhere");var i=t-1023;if(0>i)return s.__absoluteGreater(n);t=e.length;var r=e.__digit(t-1),o=s.__clz32(r),a=32*t-o;if(a<(i+=1))return s.__absoluteLess(n);if(a>i)return s.__absoluteGreater(n);i=1048576|1048575&s.__kBitConversionInts[1];var l=s.__kBitConversionInts[0];if((o=31-o)!==(a-1)%31)throw Error("implementation bug");if(20>o){var c=20-o;o=c+32,a=i>>>c,i=i<<32-c|l>>>c,l<<=32-c}else 20===o?(o=32,a=i,i=l):(o=32-(c=o-20),a=i<<c|l>>>32-c,i=l<<c);if((r>>>=0)>(a>>>=0))return s.__absoluteGreater(n);if(r<a)return s.__absoluteLess(n);for(t-=2;0<=t;t--){if(0<o?(o-=32,a=i>>>0,i=l,l=0):a=0,(r=e.__unsignedDigit(t))>a)return s.__absoluteGreater(n);if(r<a)return s.__absoluteLess(n)}if(0!==i||0!==l){if(0===o)throw Error("implementation bug");return s.__absoluteLess(n)}return 0}},{key:"__equalToNumber",value:function(e,t){return t|0===t?0===t?0===e.length:1===e.length&&e.sign===0>t&&e.__unsignedDigit(0)===r(t):0===s.__compareToDouble(e,t)}},{key:"__comparisonResultToBool",value:function(e,t){switch(t){case 0:return 0>e;case 1:return 0>=e;case 2:return 0<e;case 3:return 0<=e}throw Error("unreachable")}},{key:"__compare",value:function(e,t,n){if(e=s.__toPrimitive(e),t=s.__toPrimitive(t),"string"==typeof e&&"string"==typeof t)switch(n){case 0:return e<t;case 1:return e<=t;case 2:return e>t;case 3:return e>=t}if(s.__isBigInt(e)&&"string"==typeof t)return null!==(t=s.__fromString(t))&&s.__comparisonResultToBool(s.__compareToBigInt(e,t),n);if("string"==typeof e&&s.__isBigInt(t))return null!==(e=s.__fromString(e))&&s.__comparisonResultToBool(s.__compareToBigInt(e,t),n);if(e=s.__toNumeric(e),t=s.__toNumeric(t),s.__isBigInt(e)){if(s.__isBigInt(t))return s.__comparisonResultToBool(s.__compareToBigInt(e,t),n);if("number"!=typeof t)throw Error("implementation bug");return s.__comparisonResultToBool(s.__compareToNumber(e,t),n)}if("number"!=typeof e)throw Error("implementation bug");if(s.__isBigInt(t))return s.__comparisonResultToBool(s.__compareToNumber(t,e),2^n);if("number"!=typeof t)throw Error("implementation bug");return 0===n?e<t:1===n?e<=t:2===n?e>t:3===n?e>=t:void 0}},{key:"__absoluteAdd",value:function(e,t,n){if(e.length<t.length)return s.__absoluteAdd(t,e,n);if(0===e.length)return e;if(0===t.length)return e.sign===n?e:s.unaryMinus(e);var i=e.length;(0===e.__clzmsd()||t.length===e.length&&0===t.__clzmsd())&&i++,n=new s(i,n);for(var r=i=0;r<t.length;r++){var o=t.__digit(r),a=e.__digit(r),l=(65535&a)+(65535&o)+i;i=(o=(a>>>16)+(o>>>16)+(l>>>16))>>>16,n.__setDigit(r,65535&l|o<<16)}for(;r<e.length;r++)i=(l=((l=e.__digit(r))>>>16)+((t=(65535&l)+i)>>>16))>>>16,n.__setDigit(r,65535&t|l<<16);return r<n.length&&n.__setDigit(r,i),n.__trim()}},{key:"__absoluteSub",value:function(e,t,n){if(0===e.length)return e;if(0===t.length)return e.sign===n?e:s.unaryMinus(e);n=new s(e.length,n);for(var i=0,r=0;r<t.length;r++){var o=e.__digit(r),a=t.__digit(r),l=(65535&o)-(65535&a)-i;i=1&(o=(o>>>16)-(a>>>16)-(i=1&l>>>16))>>>16,n.__setDigit(r,65535&l|o<<16)}for(;r<e.length;r++)i=1&(l=((l=e.__digit(r))>>>16)-(i=1&(t=(65535&l)-i)>>>16))>>>16,n.__setDigit(r,65535&t|l<<16);return n.__trim()}},{key:"__absoluteAddOne",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=e.length;null===n?n=new s(i,t):n.sign=t;for(var r,o=!0,a=0;a<i;a++)r=e.__digit(a),o&&(o=-1===r,r=0|r+1),n.__setDigit(a,r);return o&&n.__setDigitGrow(i,1),n}},{key:"__absoluteSubOne",value:function(e,t){for(var n,i=e.length,r=new s(t=t||i,!1),o=!0,a=0;a<i;a++)n=e.__digit(a),o&&(o=0===n,n=0|n-1),r.__setDigit(a,n);if(o)throw Error("implementation bug");for(e=i;e<t;e++)r.__setDigit(e,0);return r}},{key:"__absoluteAnd",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=e.length,r=t.length,o=r;for(i<r&&(o=i,i=e,e=t,t=i),i=o,null===n?n=new s(i,!1):i=n.length,r=0;r<o;r++)n.__setDigit(r,e.__digit(r)&t.__digit(r));for(;r<i;r++)n.__setDigit(r,0);return n}},{key:"__absoluteAndNot",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=e.length,r=t.length,o=r;i<r&&(o=i),r=i,null===n?n=new s(r,!1):r=n.length;for(var a=0;a<o;a++)n.__setDigit(a,e.__digit(a)&~t.__digit(a));for(;a<i;a++)n.__setDigit(a,e.__digit(a));for(;a<r;a++)n.__setDigit(a,0);return n}},{key:"__absoluteOr",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=e.length,r=t.length,o=r;if(i<r){o=i;var a=e;e=t,i=r,t=a}for(r=i,null===n?n=new s(r,!1):r=n.length,a=0;a<o;a++)n.__setDigit(a,e.__digit(a)|t.__digit(a));for(;a<i;a++)n.__setDigit(a,e.__digit(a));for(;a<r;a++)n.__setDigit(a,0);return n}},{key:"__absoluteXor",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=e.length,r=t.length,o=r;if(i<r){o=i;var a=e;e=t,i=r,t=a}for(r=i,null===n?n=new s(r,!1):r=n.length,a=0;a<o;a++)n.__setDigit(a,e.__digit(a)^t.__digit(a));for(;a<i;a++)n.__setDigit(a,e.__digit(a));for(;a<r;a++)n.__setDigit(a,0);return n}},{key:"__absoluteCompare",value:function(e,t){var n=e.length-t.length;if(0!=n)return n;for(n=e.length-1;0<=n&&e.__digit(n)===t.__digit(n);)n--;return 0>n?0:e.__unsignedDigit(n)>t.__unsignedDigit(n)?1:-1}},{key:"__multiplyAccumulate",value:function(e,t,n,i){if(0!==t){for(var r=65535&t,o=t>>>16,a=t=0,l=0,c=0;c<e.length;c++,i++){var u=n.__digit(i),h=65535&u;u>>>=16;var d=e.__digit(c),f=65535&d,g=d>>>16;d=s.__imul(f,r),f=s.__imul(f,o);var p=s.__imul(g,r);t=(a=(f>>>16)+(p>>>16)+(65535&(g=s.__imul(g,o)))+(t=(u+=l+t+((h+=a+(65535&d))>>>16)+(d>>>16)+(65535&f)+(65535&p))>>>16))>>>16,a&=65535,l=g>>>16,u=65535&h|u<<16,n.__setDigit(i,u)}for(;0!==t||0!==a||0!==l;i++)r=((r=n.__digit(i))>>>16)+((e=(65535&r)+a)>>>16)+l+t,l=a=0,t=r>>>16,r=65535&e|r<<16,n.__setDigit(i,r)}}},{key:"__internalMultiplyAdd",value:function(e,t,n,i,r){for(var o=0,a=0;a<i;a++){var l=e.__digit(a),c=s.__imul(65535&l,t),u=(65535&c)+o+n;n=u>>>16,n=(c=(65535&(o=s.__imul(l>>>16,t)))+(c>>>16)+n)>>>16,o>>>=16,r.__setDigit(a,c<<16|65535&u)}if(r.length>i)for(r.__setDigit(i++,n+o);i<r.length;)r.__setDigit(i++,0);else if(0!==n+o)throw Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(e,t,n){null===n&&(n=new s(e.length,!1));for(var i=0,r=2*e.length-1;0<=r;r-=2){var o=0|(i=(i<<16|e.__halfDigit(r))>>>0)/t,a=0|(i=((i=0|i%t)<<16|e.__halfDigit(r-1))>>>0)/t;i=0|i%t,n.__setDigit(r>>>1,o<<16|a)}return n}},{key:"__absoluteModSmall",value:function(e,t){for(var n=0,i=2*e.length-1;0<=i;i--)n=0|(n=(n<<16|e.__halfDigit(i))>>>0)%t;return n}},{key:"__absoluteDivLarge",value:function(e,t,n,i){var r=t.__halfDigitLength(),o=t.length,a=e.__halfDigitLength()-r,l=null;n&&(l=new s(a+2>>>1,!1)).__initializeDigits();var c=new s(r+2>>>1,!1);c.__initializeDigits();var u=s.__clz16(t.__halfDigit(r-1));0<u&&(t=s.__specialLeftShift(t,u,0)),e=s.__specialLeftShift(e,u,1);for(var h=t.__halfDigit(r-1),d=0;0<=a;a--){var f=65535,g=e.__halfDigit(a+r);if(g!==h){f=0|(g=(g<<16|e.__halfDigit(a+r-1))>>>0)/h,g=0|g%h;for(var p=t.__halfDigit(r-2),m=e.__halfDigit(a+r-2);s.__imul(f,p)>>>0>(g<<16|m)>>>0&&(f--,!(65535<(g+=h))););}s.__internalMultiplyAdd(t,f,0,o,c),0!==(g=e.__inplaceSub(c,a,r+1))&&(g=e.__inplaceAdd(t,a,r),e.__setHalfDigit(a+r,e.__halfDigit(a+r)+g),f--),n&&(1&a?d=f<<16:l.__setDigit(a>>>1,d|f))}return i?(e.__inplaceRightShift(u),n?{quotient:l,remainder:e}:e):n?l:void 0}},{key:"__clz16",value:function(e){return s.__clz32(e)-16}},{key:"__specialLeftShift",value:function(e,t,n){var i=e.length,r=new s(i+n,!1);if(0===t){for(t=0;t<i;t++)r.__setDigit(t,e.__digit(t));return 0<n&&r.__setDigit(i,0),r}for(var o,a=0,l=0;l<i;l++)o=e.__digit(l),r.__setDigit(l,o<<t|a),a=o>>>32-t;return 0<n&&r.__setDigit(i,a),r}},{key:"__leftShiftByAbsolute",value:function(e,t){var n=s.__toShiftAmount(t);if(0>n)throw new RangeError("BigInt too big");t=n>>>5;var i=31&n,r=e.length,o=0!==i&&0!=e.__digit(r-1)>>>32-i,a=r+t+(o?1:0);if(n=new s(a,e.sign),0===i){for(i=0;i<t;i++)n.__setDigit(i,0);for(;i<a;i++)n.__setDigit(i,e.__digit(i-t))}else{for(var l=a=0;l<t;l++)n.__setDigit(l,0);for(var c=0;c<r;c++)l=e.__digit(c),n.__setDigit(c+t,l<<i|a),a=l>>>32-i;if(o)n.__setDigit(r+t,a);else if(0!==a)throw Error("implementation bug")}return n.__trim()}},{key:"__rightShiftByAbsolute",value:function(e,t){var n=e.length,i=e.sign,r=s.__toShiftAmount(t);if(0>r)return s.__rightShiftByMaximum(i);var o=31&r,a=n-(t=r>>>5);if(0>=a)return s.__rightShiftByMaximum(i);if(r=!1,i)if(0!=(e.__digit(t)&(1<<o)-1))r=!0;else for(var l=0;l<t;l++)if(0!==e.__digit(l)){r=!0;break}if(r&&0===o&&0==~e.__digit(n-1)&&a++,i=new s(a,i),0===o)for(o=t;o<n;o++)i.__setDigit(o-t,e.__digit(o));else{a=e.__digit(t)>>>o,l=n-t-1;for(var c=0;c<l;c++)n=e.__digit(c+t+1),i.__setDigit(c,n<<32-o|a),a=n>>>o;i.__setDigit(l,a)}return r&&(i=s.__absoluteAddOne(i,!0,i)),i.__trim()}},{key:"__rightShiftByMaximum",value:function(e){return e?s.__oneDigit(1,!0):s.__zero()}},{key:"__toShiftAmount",value:function(e){return 1<e.length||(e=e.__unsignedDigit(0))>s.__kMaxLengthBits?-1:e}},{key:"__toPrimitive",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"default";if("object"!==e(t)||t.constructor===s)return t;var i=t[Symbol.toPrimitive];if(i){if("object"!==e(n=i(n)))return n;throw new TypeError("Cannot convert object to primitive value")}if((n=t.valueOf)&&"object"!==e(n=n.call(t)))return n;if((n=t.toString)&&"object"!==e(n=n.call(t)))return n;throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(e){return s.__isBigInt(e)?e:+e}},{key:"__isBigInt",value:function(t){return"object"===e(t)&&t.constructor===s}},{key:"__truncateToNBits",value:function(e,t){var n=e+31>>>5,i=new s(n,t.sign);--n;for(var r=0;r<n;r++)i.__setDigit(r,t.__digit(r));return t=t.__digit(n),0!=(31&e)&&(t=t<<(e=32-(31&e))>>>e),i.__setDigit(n,t),i.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(e,t,n){var i=Math.min,r=e+31>>>5;n=new s(r,n);var o=0,a=0;for(i=i(--r,t.length);o<i;o++){var l=t.__digit(o),c=-(65535&l)-a;a=1&(l=-(l>>>16)-(a=1&c>>>16))>>>16,n.__setDigit(o,65535&c|l<<16)}for(;o<r;o++)n.__setDigit(o,0|-a);return t=r<t.length?t.__digit(r):0,0===(e&=31)?a=65535&(a=-(65535&t)-a)|-(t>>>16)-(1&a>>>16)<<16:(t=t<<(e=32-e)>>>e,a=(65535&(a=(65535&(e=1<<32-e))-(65535&t)-a)|(e>>>16)-(t>>>16)-(1&a>>>16)<<16)&e-1),n.__setDigit(r,a),n.__trim()}},{key:"__digitPow",value:function(e,t){for(var n=1;0<t;)1&t&&(n*=e),t>>>=1,e*=e;return n}}]),s}(l(Array));return p.__kMaxLength=33554432,p.__kMaxLengthBits=p.__kMaxLength<<5,p.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],p.__kBitsPerCharTableShift=5,p.__kBitsPerCharTableMultiplier=1<<p.__kBitsPerCharTableShift,p.__kConversionChars="0123456789abcdefghijklmnopqrstuvwxyz".split(""),p.__kBitConversionBuffer=new ArrayBuffer(8),p.__kBitConversionDouble=new Float64Array(p.__kBitConversionBuffer),p.__kBitConversionInts=new Int32Array(p.__kBitConversionBuffer),p.__clz32=g||function(e){var t=Math.LN2,n=Math.log;return 0===e?32:0|31-(0|n(e>>>0)/t)},p.__imul=f||function(e,t){return 0|e*t},p}()},function(e,t,n){(function(e,t){!function(e,n){function i(e){delete a[e]}function s(e){if(l)setTimeout(s,0,e);else{var t=a[e];if(t){l=!0;try{var r=t.callback,o=t.args;switch(o.length){case 0:r();break;case 1:r(o[0]);break;case 2:r(o[0],o[1]);break;case 3:r(o[0],o[1],o[2]);break;default:r.apply(n,o)}}finally{i(e),l=!1}}}}if(!e.setImmediate){var r,o=1,a={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){s(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&s(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),r=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){s(e.data)},r=function(t){e.port2.postMessage(t)}}():c&&"onreadystatechange"in c.createElement("script")?function(){var e=c.documentElement;r=function(t){var n=c.createElement("script");n.onreadystatechange=function(){s(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():r=function(e){setTimeout(s,0,e)},u.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];return a[o]={callback:e,args:t},r(o),o++},u.clearImmediate=i}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n(0),n(8))},function(e,t){function n(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function s(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(i){return c.call(this,e,0)}}}function r(){f&&h&&(f=!1,h.length?d=h.concat(d):g=-1,d.length&&o())}function o(){if(!f){var e=s(r);f=!0;for(var t=d.length;t;){for(h=d,d=[];++g<t;)h&&h[g].run();g=-1,t=d.length}h=null,f=!1,function(e){if(u===clearTimeout)return clearTimeout(e);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(e);try{return u(e)}catch(t){try{return u.call(null,e)}catch(n){return u.call(this,e)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function l(){}e=e.exports={};try{var c="function"===typeof setTimeout?setTimeout:n}catch(p){c=n}try{var u="function"===typeof clearTimeout?clearTimeout:i}catch(p){u=i}var h,d=[],f=!1,g=-1;e.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new a(e,t)),1!==d.length||f||s(o)},a.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=l,e.addListener=l,e.once=l,e.off=l,e.removeListener=l,e.removeAllListeners=l,e.emit=l,e.prependListener=l,e.prependOnceListener=l,e.listeners=function(e){return[]},e.binding=function(e){throw Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t){Sk.asserts={},Sk.asserts.assert=function(e,t){return e},Sk.exportSymbol("Sk.asserts.assert",Sk.asserts.assert),Sk.asserts.fail=function(e){},Sk.exportSymbol("Sk.asserts.fail",Sk.asserts.fail)},function(e,t){Sk.bool_check=function(e,t){if(void 0===e||null===e||"boolean"!==typeof e)throw Error("must specify "+t+" and it must be a boolean")},Sk.python2={print_function:!1,division:!1,absolute_import:null,unicode_literals:!1,python3:!1,class_repr:!1,inherit_from_object:!1,super_args:!1,octal_number_literal:!1,bankers_rounding:!1,python_version:!1,dunder_round:!1,exceptions:!1,no_long_type:!1,ceil_floor_int:!1,silent_octal_literal:!0},Sk.python3={print_function:!0,division:!0,absolute_import:null,unicode_literals:!0,python3:!0,class_repr:!0,inherit_from_object:!0,super_args:!0,octal_number_literal:!0,bankers_rounding:!0,python_version:!0,dunder_round:!0,exceptions:!0,no_long_type:!0,ceil_floor_int:!0,silent_octal_literal:!1},Sk.configure=function(e){Sk.output=e.output||Sk.output,Sk.asserts.assert("function"===typeof Sk.output),Sk.debugout=e.debugout||Sk.debugout,Sk.asserts.assert("function"===typeof Sk.debugout),Sk.uncaughtException=e.uncaughtException||Sk.uncaughtException,Sk.asserts.assert("function"===typeof Sk.uncaughtException),Sk.read=e.read||Sk.read,Sk.asserts.assert("function"===typeof Sk.read),Sk.nonreadopen=e.nonreadopen||!1,Sk.asserts.assert("boolean"===typeof Sk.nonreadopen),Sk.fileopen=e.fileopen||void 0,Sk.asserts.assert("function"===typeof Sk.fileopen||"undefined"===typeof Sk.fileopen),Sk.filewrite=e.filewrite||void 0,Sk.asserts.assert("function"===typeof Sk.filewrite||"undefined"===typeof Sk.filewrite),Sk.timeoutMsg=e.timeoutMsg||Sk.timeoutMsg,Sk.asserts.assert("function"===typeof Sk.timeoutMsg),Sk.exportSymbol("Sk.timeoutMsg",Sk.timeoutMsg),Sk.sysargv=e.sysargv||Sk.sysargv,Sk.asserts.assert(Sk.isArrayLike(Sk.sysargv)),Sk.__future__=e.__future__||Sk.python3,Sk.bool_check(Sk.__future__.print_function,"Sk.__future__.print_function"),Sk.bool_check(Sk.__future__.division,"Sk.__future__.division"),Sk.bool_check(Sk.__future__.unicode_literals,"Sk.__future__.unicode_literals"),Sk.bool_check(Sk.__future__.class_repr,"Sk.__future__.class_repr"),Sk.bool_check(Sk.__future__.inherit_from_object,"Sk.__future__.inherit_from_object"),Sk.bool_check(Sk.__future__.super_args,"Sk.__future__.super_args"),Sk.bool_check(Sk.__future__.octal_number_literal,"Sk.__future__.octal_number_literal"),Sk.bool_check(Sk.__future__.bankers_rounding,"Sk.__future__.bankers_rounding"),Sk.bool_check(Sk.__future__.python_version,"Sk.__future__.python_version"),Sk.bool_check(Sk.__future__.dunder_round,"Sk.__future__.dunder_round"),Sk.bool_check(Sk.__future__.exceptions,"Sk.__future__.exceptions"),Sk.bool_check(Sk.__future__.no_long_type,"Sk.__future__.no_long_type"),Sk.bool_check(Sk.__future__.ceil_floor_int,"Sk.__future__.ceil_floor_int"),Sk.bool_check(Sk.__future__.silent_octal_literal,"Sk.__future__.silent_octal_literal"),Sk.imageProxy=e.imageProxy||"http://localhost:8080/320x",Sk.asserts.assert("string"===typeof Sk.imageProxy||"function"===typeof Sk.imageProxy),Sk.inputfun=e.inputfun||Sk.inputfun,Sk.asserts.assert("function"===typeof Sk.inputfun),Sk.inputfunTakesPrompt=e.inputfunTakesPrompt||!1,Sk.asserts.assert("boolean"===typeof Sk.inputfunTakesPrompt),Sk.retainGlobals=e.retainglobals||e.retainGlobals||!1,Sk.asserts.assert("boolean"===typeof Sk.retainGlobals),Sk.debugging=e.debugging||!1,Sk.asserts.assert("boolean"===typeof Sk.debugging),Sk.killableWhile=e.killableWhile||!1,Sk.asserts.assert("boolean"===typeof Sk.killableWhile),Sk.killableFor=e.killableFor||!1,Sk.asserts.assert("boolean"===typeof Sk.killableFor),Sk.signals=e.signals,Sk.signals=!0===Sk.signals?{listeners:[],addEventListener(e){Sk.signals.listeners.push(e)},removeEventListener(e){0<=(e=Sk.signals.listeners.indexOf(e))&&Sk.signals.listeners.splice(e,1)},signal(e,t){for(var n=0;n<Sk.signals.listeners.length;n++)Sk.signals.listeners[n].call(null,e,t)}}:null,Sk.asserts.assert("object"===typeof Sk.signals),Sk.breakpoints=e.breakpoints||function(){return!0},Sk.asserts.assert("function"===typeof Sk.breakpoints),Sk.setTimeout=e.setTimeout,void 0===Sk.setTimeout&&(Sk.setTimeout="function"===typeof setTimeout?function(e,t){setTimeout(e,t)}:function(e,t){e()}),Sk.asserts.assert("function"===typeof Sk.setTimeout),"execLimit"in e&&(Sk.execLimit=e.execLimit),"yieldLimit"in e&&(Sk.yieldLimit=e.yieldLimit),e.syspath&&(Sk.syspath=e.syspath,Sk.asserts.assert(Sk.isArrayLike(Sk.syspath)),Sk.realsyspath=void 0,Sk.sysmodules=new Sk.builtin.dict([])),Sk.misceval.softspace_=!1,Sk.switch_version(Sk.__future__.python3),Sk.builtin.str.$next=Sk.__future__.python3?new Sk.builtin.str("__next__"):new Sk.builtin.str("next"),Sk.setupOperators(Sk.__future__.python3),Sk.setupDunderMethods(Sk.__future__.python3),Sk.setupObjects(Sk.__future__.python3),Sk.token.setupTokens(Sk.__future__.python3)},Sk.exportSymbol("Sk.configure",Sk.configure),Sk.uncaughtException=function(e){throw e},Sk.uncaughtException=function(e){throw e},Sk.exportSymbol("Sk.uncaughtException",Sk.uncaughtException),Sk.timeoutMsg=function(){return"Program exceeded run time limit."},Sk.exportSymbol("Sk.timeoutMsg",Sk.timeoutMsg),Sk.execLimit=Number.POSITIVE_INFINITY,Sk.yieldLimit=Number.POSITIVE_INFINITY,Sk.output=function(e){},Sk.read=function(e){if(void 0===Sk.builtinFiles)throw"skulpt-stdlib.js has not been loaded";if(void 0===Sk.builtinFiles.files[e])throw"File not found: '"+e+"'";return Sk.builtinFiles.files[e]},Sk.sysargv=[],Sk.getSysArgv=function(){return Sk.sysargv},Sk.exportSymbol("Sk.getSysArgv",Sk.getSysArgv),Sk.syspath=[],Sk.inBrowser=void 0!==Sk.global.document,Sk.debugout=function(e){},void 0!==Sk.global.write?Sk.output=Sk.global.write:void 0!==Sk.global.console&&void 0!==Sk.global.console.log?Sk.output=function(e){Sk.global.console.log(e)}:void 0!==Sk.global.print&&(Sk.output=Sk.global.print),void 0!==Sk.global.console&&void 0!==Sk.global.console.log?Sk.debugout=function(e){Sk.global.console.log(e)}:void 0!==Sk.global.print&&(Sk.debugout=Sk.global.print),Sk.inputfun=function(e){return window.prompt(e)},Sk.setup_method_mappings=function(){},Sk.setupDictIterators=function(e){},Sk.switch_version=function(e){const t={float_:{method_names:["__round__"],2:[!1],3:[!0]},int_:{method_names:["__round__"],2:[!1],3:[!0]},list:{method_names:["clear","copy","sort"],2:[!1,!1,!0],3:[!0,!0,!0]},dict:{method_names:["has_key","keys","items","values"],2:[!0,!0,!0,!0],3:[!1,!0,!0,!0]}};for(let r in t){const o=Sk.builtin[r],a=t[r].method_names;var n=t[r][3];if(e&&void 0===o.py3$methods)break;if(void 0===o.py3$methods){o.py3$methods={};for(var i=0;i<a.length;i++){var s=a[i];n[i]&&(o.py3$methods[s]=o.prototype[s].d$def)}}for(e?i=o.py3$methods:(n=t[r][2],i=o.py2$methods),s=0;s<a.length;s++){const e=a[s];delete o.prototype[e],n[s]&&(o.prototype[e]=new Sk.builtin.method_descriptor(o,i[e]))}}},Sk.exportSymbol("Sk.__future__",Sk.__future__),Sk.exportSymbol("Sk.inputfun",Sk.inputfun)},function(e,t){function n(e){return this.prototype[e.$mangled]}function i(e){e=e.$mangled;const t=this.prototype.tp$mro;for(let n=0;n<t.length;++n){const i=t[n].prototype;if(i.hasOwnProperty(e))return i[e]}}function s(e,t,s,r){const o=function(e){function t(e){return void 0===e.sk$klass?e:t(e.prototype.tp$base)}let n,i,s,r;0===e.length&&e.push(Sk.builtin.object);for(let o=0;o<e.length;o++){if(r=e[o],!Sk.builtin.checkClass(r))throw new Sk.builtin.TypeError("bases must be 'type' objects");if(!1===r.sk$acceptable_as_base_class)throw new Sk.builtin.TypeError("type '"+r.prototype.tp$name+"' is not an acceptable base type");if(s=t(r),void 0===i)i=s,n=r;else if(!i.$isSubType(s)){if(!s.$isSubType(i))throw new Sk.builtin.TypeError("multiple bases have instance layout conflicts");i=s,n=r}}return n}(s),a=t.prototype;Sk.abstr.setUpInheritance(e,t,o,r),Object.defineProperties(a,{sk$prototypical:{value:!0,writable:!0},tp$bases:{value:s,writable:!0},tp$mro:{value:null,writable:!0},hp$type:{value:!0,writable:!0}}),a.tp$mro=t.$buildMRO(),Object.defineProperties(t,{$typeLookup:{value:a.sk$prototypical?n:i,writable:!0},sk$klass:{value:!0,writable:!0}})}function r(e){for(;null!==e.prototype.tp$base;){if(void 0===e.sk$klass&&e.prototype.hasOwnProperty("__dict__"))return e=e.prototype.__dict__,Sk.builtin.checkDataDescr(e)?e:void 0;e=e.prototype.tp$base}}function o(e,t,n){if(void 0===e.sk$klass)throw new Sk.builtin.TypeError("can't set "+e.prototype.tp$name+"."+n.$jsstr());if(void 0===t)throw new Sk.builtin.TypeError("can't delete "+e.prototype.tp$name+"."+n.$jsstr())}void 0===Sk.builtin&&(Sk.builtin={}),Sk.builtin.type=function(e){return this instanceof Sk.builtin.type&&Sk.asserts.fail("calling new Sk.builtin.type is not safe"),e.ob$type},Object.defineProperties(Sk.builtin.type.prototype,{call:{value:Function.prototype.call},apply:{value:Function.prototype.apply},tp$slots:{value:{tp$doc:"type(object_or_name, bases, dict)\ntype(object) -> the object's type\ntype(name, bases, dict) -> a new type",tp$call:function(e,t){if(this===Sk.builtin.type){if(1===e.length&&(void 0===t||!t.length))return e[0].ob$type;if(3!==e.length)throw new Sk.builtin.TypeError("type() takes 1 or 3 arguments")}let n=this.prototype.tp$new(e,t);if(n.$isSuspension)return Sk.misceval.chain(n,(i=>{if(n=i,n.ob$type.$isSubType(this))return n.tp$init(e,t)}),(()=>n));if(n.ob$type.$isSubType(this)){const i=n.tp$init(e,t);return void 0!==i&&i.$isSuspension?Sk.misceval.chain(i,(()=>n)):n}return n},tp$new:function(e,t){if(3!==e.length){if(1===e.length&&(void 0===t||!t.length))return e[0].ob$type;throw new Sk.builtin.TypeError("type() takes 1 or 3 arguments")}let n;if(t=e[0],n=e[1],"dict"!==(e=e[2]).tp$name)throw new Sk.builtin.TypeError("type() argument 3 must be dict, not "+Sk.abstr.typeName(e));if(!Sk.builtin.checkString(t))throw new Sk.builtin.TypeError("type() argument 1 must be str, not "+Sk.abstr.typeName(t));if(t=t.$jsstr(),"tuple"!==n.tp$name)throw new Sk.builtin.TypeError("type() argument 2 must be tuple, not "+Sk.abstr.typeName(n));n=n.sk$asarray();const i=function(){this.$d=new Sk.builtin.dict};return s(t,i,n,this.constructor),Sk.globals&&(i.prototype.__module__=Sk.globals.__name__),i.prototype.__doc__=Sk.builtin.none.none$,void 0===i.$typeLookup(Sk.builtin.str.$dict)&&(i.prototype.__dict__=new Sk.builtin.getset_descriptor(i,a)),e.$items().forEach((e=>{let[t,n]=e;i.prototype[t.$mangled]=n})),i.prototype.hasOwnProperty("__new__")&&((e=i.prototype.__new__)instanceof Sk.builtin.func&&(i.prototype.__new__=new Sk.builtin.staticmethod(e))),i.$allocateSlots(),i},tp$getattr:function(e,t){var n=this.ob$type;const i=n.$typeLookup(e);let s;return void 0!==i&&(s=i.tp$descr_get,void 0!==s&&void 0!==i.tp$descr_set)?s.call(i,this,n,t):void 0!==(e=this.$typeLookup(e))?void 0!==(n=e.tp$descr_get)?t=n.call(e,null,this,t):e:void 0!==s?s.call(i,this,n,t):void 0!==i?i:void 0},tp$setattr:function(e,t,n){if(!this.sk$klass){if(void 0!==t)throw new Sk.builtin.TypeError("can't set attributes of built-in/extension type '"+this.prototype.tp$name+"'");throw new Sk.builtin.TypeError("can't delete attributes on type object '"+this.prototype.tp$name+"'")}const i=this.ob$type.$typeLookup(e);if(void 0!==i){const e=i.tp$descr_set;if(e)return e.call(i,this,t,n)}if(n=e.$mangled,void 0===t){if(!(t=this.prototype).hasOwnProperty(n))throw new Sk.builtin.AttributeError("type object '"+this.prototype.tp$name+"' has no attribute '"+e.$jsstr()+"'");delete t[n],void 0!==(e=Sk.dunderToSkulpt[n])&&(delete this.prototype[e],t.sk$prototypical||this.$allocateGetterSlot(n))}else this.prototype[n]=t,n in Sk.dunderToSkulpt&&this.$allocateSlot(n,t)},$r:function(){let e=this.prototype.__module__,t="",n="class";return e&&Sk.builtin.checkString(e)?t=e.v+".":e=null,e||this.sk$klass||Sk.__future__.class_repr||(n="type"),new Sk.builtin.str("<"+n+" '"+t+this.prototype.tp$name+"'>")}},writable:!0},tp$methods:{value:null,writable:!0},tp$getsets:{value:null,writable:!0},sk$type:{value:!0},$isSubType:{value:function(e){return this===e||this.prototype instanceof e||!this.prototype.sk$prototypical&&this.prototype.tp$mro.includes(e)}},$allocateSlot:{value:function(e,t){const n=(e=Sk.slots[e]).$slot_name,i=this.prototype;i.hasOwnProperty(n)&&delete i[n],i[n]=e.$slot_func(t)}},$allocateSlots:{value:function(){const e=this.prototype;this.prototype.sk$prototypical?Object.keys(e).forEach((t=>{t in Sk.slots&&this.$allocateSlot(t,e[t])})):Object.keys(Sk.slots).forEach((t=>{e.hasOwnProperty(t)?this.$allocateSlot(t,e[t]):this.$allocateGetterSlot(t)}))}},$allocateGetterSlot:{value:function(e){const t=Sk.slots[e].$slot_name,n=this.prototype;n.hasOwnProperty(t)||Object.defineProperty(n,t,{configurable:!0,get(){const e=n.tp$mro;for(let n=1;n<e.length;n++){const i=Object.getOwnPropertyDescriptor(e[n].prototype,t);if(void 0!==i&&i.value)return i.value}}})}},$typeLookup:{value:function(e){return this.prototype.sk$prototypical?this.prototype[e.$mangled]:i.call(this,e)},writable:!0},$mroMerge:{value:function(e){let t;this.prototype.sk$prototypical=!0;const n=[];for(;;){for(t=0;t<e.length;++t){var i=e[t];if(0!==i.length)break}if(t===e.length)return n;var s=[];for(t=0;t<e.length;++t)if(0!==(i=e[t]).length){const t=i[0];i=0;e:for(;i<e.length;++i){const n=e[i];for(let e=1;e<n.length;++e)if(n[e]===t)break e}i===e.length&&s.push(t)}if(0===s.length)throw new Sk.builtin.TypeError("Inconsistent precedences in type hierarchy");for(s=s[0],n.length&&this.prototype.sk$prototypical&&Object.getPrototypeOf(n[n.length-1].prototype)!==s.prototype&&(this.prototype.sk$prototypical=!1),n.push(s),t=0;t<e.length;++t)0<(i=e[t]).length&&i[0]===s&&i.splice(0,1)}}},$buildMRO:{value:function(){const e=[[this]],t=this.prototype.tp$bases;for(var n=0;n<t.length;++n)e.push([...t[n].prototype.tp$mro]);n=[];for(let i=0;i<t.length;++i)n.push(t[i]);return e.push(n),this.$mroMerge(e)}},sk$attrError:{value(){return"type object '"+this.prototype.tp$name+"'"},writable:!0}}),Sk.builtin.type.prototype.tp$getsets={__base__:{$get(){return this.prototype.tp$base||Sk.builtin.none.none$}},__bases__:{$get(){return void 0===this.sk$tuple_bases&&(this.sk$tuple_bases=new Sk.builtin.tuple(this.prototype.tp$bases)),this.sk$tuple_bases}},__mro__:{$get(){return void 0===this.sk$tuple_mro&&(this.sk$tuple_mro=new Sk.builtin.tuple(this.prototype.tp$mro)),this.sk$tuple_mro}},__dict__:{$get(){return new Sk.builtin.mappingproxy(this.prototype)}},__doc__:{$get(){const e=this.$typeLookup(Sk.builtin.str.$doc);return e?void 0!==e.tp$descr_get?this===Sk.builtin.type?new Sk.builtin.str(this.prototype.tp$doc):e.tp$descr_get(null,this):this.prototype.__doc__:Sk.builtin.none.none$},$set(e){o(this,e,Sk.builtin.str.$doc),this.prototype.__doc__=e}},__name__:{$get(){return new Sk.builtin.str(this.prototype.tp$name)},$set(e){if(o(this,e,Sk.builtin.str.$name),!Sk.builtin.checkString(e))throw new Sk.builtin.TypeError("can only assign string to "+this.prototype.tp$name+".__name__, not '"+Sk.abstr.typeName(e)+"'");this.prototype.tp$name=e.$jsstr()}},__module__:{$get(){let e=this.prototype.__module__;return e&&e.ob$type!==Sk.builtin.getset_descriptor?e:new Sk.builtin.str("builtins")},$set(e){o(this,e,Sk.builtin.str.$module),this.prototype.__module__=e}}},Sk.builtin.type.prototype.tp$methods={mro:{$meth(){return new Sk.builtin.list(this.$buildMRO())},$flags:{NoArgs:!0}},__dir__:{$meth:function(){function e(e){e in Sk.reservedWords_||(-1!==(e=Sk.unfixReserved(e)).indexOf("$")||t.has(e)||(t.add(e),n.push(new Sk.builtin.str(e))))}const t=new Set,n=[];if(this.prototype.sk$prototypical)for(var i in this.prototype)e(i);else{i=this.prototype.tp$mro;for(let t=0;t<i.length;t++){const n=Object.getOwnPropertyNames(i[t].prototype);for(let t=0;t<n.length;t++)e(n[t])}}return new Sk.builtin.list(n)},$flags:{NoArgs:!0},$doc:"Specialized __dir__ implementation for types."}};const a={$get(){const e=r(this.ob$type);return void 0!==e?e.tp$descr_get(this,this.ob$type):Sk.generic.getSetDict.$get.call(this)},$set(e){const t=r(this.ob$type);return void 0!==t?t.tp$descr_set(this,e):Sk.generic.getSetDict.$set.call(this,e)},$doc:"dictionary for instance variables (if defined)",$name:"__dict__"}},function(e,t){Sk.generic={},Sk.generic.getAttr=function(e,t){let n;const i=this.ob$type,s=i.$typeLookup(e);if(void 0!==s&&(n=s.tp$descr_get,void 0!==n&&void 0!==s.tp$descr_set))return n.call(s,this,i,t);const r=this.$d;return void 0!==r&&void 0!==(e=r.quick$lookup(e))?e:void 0!==n?n.call(s,this,i,t):void 0!==s?s:void 0},Sk.exportSymbol("Sk.generic.getAttr",Sk.generic.getAttr),Sk.generic.setAttr=function(e,t,n){var i=this.ob$type.$typeLookup(e);if(void 0!==i&&null!==i){const e=i.tp$descr_set;if(e)return e.call(i,this,t,n)}if(void 0!==(n=this.$d))if(n.mp$ass_subscript){if(void 0!==t)return n.mp$ass_subscript(e,t);try{return n.mp$ass_subscript(e)}catch(s){if(s instanceof Sk.builtin.KeyError)throw new Sk.builtin.AttributeError("'"+Sk.abstr.typeName(this)+"' object has no attribute '"+e.$jsstr()+"'");throw s}}else if("object"===typeof n){if(i=e.$mangled,void 0!==t)return void(n[i]=t);if(void 0!==n[i])return void delete n[i]}throw new Sk.builtin.AttributeError(this.sk$attrError()+" has no attribute '"+e.$jsstr()+"'")},Sk.exportSymbol("Sk.generic.setAttr",Sk.generic.setAttr),Sk.generic.new=function(e){return function(t,n){return this.constructor===e?new this.constructor:(t=new this.constructor,e.call(t),t)}},Sk.generic.newMethodDef={$meth(e,t){const n=this.prototype;if(1>e.length)throw e=n.tp$name,new Sk.builtin.TypeError(e+".__new__(): not enough arguments");var i=e.shift();if(void 0===i.sk$type)throw e=n.tp$name,new Sk.builtin.TypeError(e+"__new__(X): X is not a type object ("+Sk.abstr.typeName(i)+")");if(!i.$isSubType(this))throw e=n.tp$name,i=i.prototype.tp$name,new Sk.builtin.TypeError(e+".__new__("+i+"): "+i+" is not a subtype of "+e);const s=i.prototype.sk$staticNew.prototype;if(s.tp$new!==n.tp$new)throw e=n.tp$name,i=i.prototype.tp$name,new Sk.builtin.TypeError(e+".__new__("+i+") is not safe, use "+s.tp$name+".__new__()");return n.tp$new.call(i.prototype,e,t)},$flags:{FastCall:!0},$textsig:"($type, *args, **kwargs)",$name:"__new__"},Sk.generic.selfIter=function(){return this},Sk.generic.iterNextWithArrayCheckSize=function(){if(this.$seq.length!==this.$orig.get$size()){const e=this.tp$name.split("_")[0];throw new Sk.builtin.RuntimeError(e+" changed size during iteration")}if(!(this.$index>=this.$seq.length))return this.$seq[this.$index++]},Sk.generic.iterNextWithArray=function(){const e=this.$seq[this.$index++];return void 0===e&&(this.tp$iternext=()=>{}),e},Sk.generic.iterLengthHintWithArrayMethodDef={$meth:function(){return new Sk.builtin.int_(this.$seq.length-this.$index)},$flags:{NoArgs:!0}},Sk.generic.iterReverseLengthHintMethodDef={$meth:function(){return new Sk.builtin.int_(this.$index)},$flags:{NoArgs:!0}},Sk.generic.getSetDict={$get(){return this.$d},$set(e){if(void 0===e)this.$d=new Sk.builtin.dict;else{if(!(e instanceof Sk.builtin.dict))throw new Sk.builtin.TypeError("__dict__ must be set to a dictionary, not a '"+Sk.abstr.typeName(e)+"'");this.$d=e}},$doc:"dictionary for instance variables (if defined)",$name:"__dict__"},Sk.generic.seqCompare=function(e,t){if(this===e&&Sk.misceval.opAllowsEquality(t))return!0;if(!(e instanceof this.sk$builtinBase))return Sk.builtin.NotImplemented.NotImplemented$;const n=this.v;let i;if(e=e.v,n.length!==e.length&&("Eq"===t||"NotEq"===t))return"Eq"!==t;for(i=0;i<n.length&&i<e.length&&(n[i]===e[i]||Sk.misceval.richCompareBool(n[i],e[i],"Eq"));++i);const s=n.length,r=e.length;if(i>=s||i>=r)switch(t){case"Lt":return s<r;case"LtE":return s<=r;case"Eq":return s===r;case"NotEq":return s!==r;case"Gt":return s>r;case"GtE":return s>=r;default:Sk.asserts.fail()}return"Eq"!==t&&("NotEq"===t||Sk.misceval.richCompareBool(n[i],e[i],t))}},function(e,t){Sk.builtin.pyCheckArgs=function(e,t,n,i,s,r){if(t=t.length,void 0===i&&(i=1/0),s&&--t,r&&--t,t<n||t>i)throw new Sk.builtin.TypeError((n===i?e+"() takes exactly "+n+" arguments":t<n?e+"() takes at least "+n+" arguments":0<n?e+"() takes at most "+i+" arguments":e+"() takes no arguments")+" ("+t+" given)")},Sk.exportSymbol("Sk.builtin.pyCheckArgs",Sk.builtin.pyCheckArgs),Sk.builtin.pyCheckArgsLen=function(e,t,n,i,s,r){if(void 0===i&&(i=1/0),s&&--t,r&&--t,t<n||t>i)throw new Sk.builtin.TypeError((n===i?e+"() takes exactly "+n+" arguments":t<n?e+"() takes at least "+n+" arguments":e+"() takes at most "+i+" arguments")+" ("+t+" given)")},Sk.builtin.pyCheckType=function(e,t,n){if(!n)throw new Sk.builtin.TypeError(e+" must be a "+t)},Sk.exportSymbol("Sk.builtin.pyCheckType",Sk.builtin.pyCheckType),Sk.builtin.checkSequence=function(e){return null!=e&&void 0!==e.mp$subscript},Sk.exportSymbol("Sk.builtin.checkSequence",Sk.builtin.checkSequence),Sk.builtin.checkIterable=function(e){return void 0!==e&&(e.tp$iter?void 0!==e.tp$iter().tp$iternext:void 0!==e.mp$subscript)},Sk.exportSymbol("Sk.builtin.checkIterable",Sk.builtin.checkIterable),Sk.builtin.checkCallable=function(e){return null!=e&&void 0!==e.tp$call},Sk.builtin.checkNumber=function(e){return"number"===typeof e||e instanceof Sk.builtin.int_||e instanceof Sk.builtin.float_||e instanceof Sk.builtin.lng},Sk.exportSymbol("Sk.builtin.checkNumber",Sk.builtin.checkNumber),Sk.builtin.checkComplex=function(e){return e instanceof Sk.builtin.complex},Sk.exportSymbol("Sk.builtin.checkComplex",Sk.builtin.checkComplex),Sk.builtin.checkInt=function(e){return e instanceof Sk.builtin.int_||"number"===typeof e&&Number.isInteger(e)},Sk.exportSymbol("Sk.builtin.checkInt",Sk.builtin.checkInt),Sk.builtin.checkFloat=function(e){return e instanceof Sk.builtin.float_},Sk.exportSymbol("Sk.builtin.checkFloat",Sk.builtin.checkFloat),Sk.builtin.checkString=function(e){return e instanceof Sk.builtin.str},Sk.exportSymbol("Sk.builtin.checkString",Sk.builtin.checkString),Sk.builtin.checkBytes=function(e){return e instanceof Sk.builtin.bytes},Sk.builtin.checkClass=function(e){return e instanceof Sk.builtin.type},Sk.exportSymbol("Sk.builtin.checkClass",Sk.builtin.checkClass),Sk.builtin.checkBool=function(e){return e instanceof Sk.builtin.bool},Sk.exportSymbol("Sk.builtin.checkBool",Sk.builtin.checkBool),Sk.builtin.checkNone=function(e){return e===Sk.builtin.none.none$},Sk.exportSymbol("Sk.builtin.checkNone",Sk.builtin.checkNone),Sk.builtin.checkFunction=function(e){return null!=e&&void 0!==e.tp$call},Sk.exportSymbol("Sk.builtin.checkFunction",Sk.builtin.checkFunction),Sk.builtin.checkDataDescr=function(e){return e&&void 0!==e.tp$descr_set},Sk.exportSymbol("Sk.builtin.checkDataDescr",Sk.builtin.checkDataDescr),Sk.builtin.checkAnySet=function(e){return e instanceof Sk.builtin.set||e instanceof Sk.builtin.frozenset},Sk.builtin.checkMapping=function(e){return e instanceof Sk.builtin.dict||e instanceof Sk.builtin.mappingproxy||null!=e&&void 0!==e.mp$subscript&&void 0!==Sk.abstr.lookupSpecial(e,Sk.builtin.str.$keys)}},function(e,t){function n(e,t){switch(t){case"Add":return e.nb$reflected_add;case"Sub":return e.nb$reflected_subtract;case"Mult":return e.nb$reflected_multiply;case"MatMult":if(Sk.__future__.python3)return e.nb$reflected_matrix_multiply;case"Div":return e.nb$reflected_divide;case"FloorDiv":return e.nb$reflected_floor_divide;case"Mod":return e.nb$reflected_remainder;case"DivMod":return e.nb$reflected_divmod;case"Pow":return e.nb$reflected_power;case"LShift":return e.nb$reflected_lshift;case"RShift":return e.nb$reflected_rshift;case"BitAnd":return e.nb$reflected_and;case"BitXor":return e.nb$reflected_xor;case"BitOr":return e.nb$reflected_or}}function i(e,t,i){var s=t.constructor,r=e.constructor;return(s=s!==r&&void 0===s.sk$baseClass&&t instanceof r)&&(void 0!==(r=n(t,i))&&r!==n(e,i)&&(r=r.call(t,e))!==Sk.builtin.NotImplemented.NotImplemented$)?r:(r=function(e,t){switch(t){case"Add":return e.nb$add;case"Sub":return e.nb$subtract;case"Mult":return e.nb$multiply;case"MatMult":if(Sk.__future__.python3)return e.nb$matrix_multiply;case"Div":return e.nb$divide;case"FloorDiv":return e.nb$floor_divide;case"Mod":return e.nb$remainder;case"DivMod":return e.nb$divmod;case"Pow":return e.nb$power;case"LShift":return e.nb$lshift;case"RShift":return e.nb$rshift;case"BitAnd":return e.nb$and;case"BitXor":return e.nb$xor;case"BitOr":return e.nb$or}}(e,i),void 0!==r&&(r=r.call(e,t))!==Sk.builtin.NotImplemented.NotImplemented$||!s&&(void 0!==(r=n(t,i))&&(r=r.call(t,e))!==Sk.builtin.NotImplemented.NotImplemented$)?r:void 0)}Sk.abstr={},Sk.abstr.typeName=function(e){return null!=e&&void 0!==e.tp$name?e.tp$name:"<invalid type>"};const s={Add:"+",Sub:"-",Mult:"*",MatMult:"@",Div:"/",FloorDiv:"//",Mod:"%",DivMod:"divmod()",Pow:"** or pow()",LShift:"<<",RShift:">>",BitAnd:"&",BitXor:"^",BitOr:"|"},r={UAdd:"+",USub:"-",Invert:"~"};Sk.abstr.numberBinOp=function(e,t,n){var r;if(!(r=i(e,t,n)))throw e=Sk.abstr.typeName(e),t=Sk.abstr.typeName(t),new Sk.builtin.TypeError("unsupported operand type(s) for "+s[n]+": '"+e+"' and '"+t+"'");return r},Sk.exportSymbol("Sk.abstr.numberBinOp",Sk.abstr.numberBinOp),Sk.abstr.numberInplaceBinOp=function(e,t,n){var r=function(e,t){switch(t){case"Add":return e.nb$inplace_add;case"Sub":return e.nb$inplace_subtract;case"Mult":return e.nb$inplace_multiply;case"MatMult":if(Sk.__future__.python3)return e.nb$inplace_matrix_multiply;case"Div":return e.nb$inplace_divide;case"FloorDiv":return e.nb$inplace_floor_divide;case"Mod":return e.nb$inplace_remainder;case"Pow":return e.nb$inplace_power;case"LShift":return e.nb$inplace_lshift;case"RShift":return e.nb$inplace_rshift;case"BitAnd":return e.nb$inplace_and;case"BitOr":return e.nb$inplace_or;case"BitXor":return e.nb$inplace_xor}}(e,n);if(void 0!==r&&(r=r.call(e,t))!==Sk.builtin.NotImplemented.NotImplemented$||(r=i(e,t,n)),!r)throw e=Sk.abstr.typeName(e),t=Sk.abstr.typeName(t),new Sk.builtin.TypeError("unsupported operand type(s) for "+s[n]+"=: '"+e+"' and '"+t+"'");return r},Sk.exportSymbol("Sk.abstr.numberInplaceBinOp",Sk.abstr.numberInplaceBinOp),Sk.abstr.numberUnaryOp=function(e,t){if("Not"===t)return Sk.misceval.isTrue(e)?Sk.builtin.bool.false$:Sk.builtin.bool.true$;e:{switch(t){case"USub":var n=e.nb$negative;break e;case"UAdd":n=e.nb$positive;break e;case"Invert":n=e.nb$invert;break e}n=void 0}if(!(n=void 0!==n?n.call(e):void 0))throw e=Sk.abstr.typeName(e),new Sk.builtin.TypeError("bad operand type for unary "+r[t]+": '"+e+"'");return n},Sk.exportSymbol("Sk.abstr.numberUnaryOp",Sk.abstr.numberUnaryOp),Sk.abstr.fixSeqIndex_=function(e,t){return 0>(t=Sk.builtin.asnum$(t))&&e.sq$length&&(t+=e.sq$length()),t},Sk.abstr.sequenceContains=function(e,t,n){return e.sq$contains?e.sq$contains(t,n):(e=Sk.misceval.iterFor(Sk.abstr.iter(e),(function(e){return!(e!==t&&!Sk.misceval.richCompareBool(e,t,"Eq"))&&new Sk.misceval.Break(!0)}),!1),n?e:Sk.misceval.retryOptionalSuspensionOrThrow(e))},Sk.abstr.sequenceConcat=function(e,t){if(e.sq$concat)return e.sq$concat(t);throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(e)+"' object can't be concatenated")},Sk.abstr.sequenceGetIndexOf=function(e,t){if(e.index)return Sk.misceval.callsimArray(e.index,[e,t]);let n=0;for(let i=Sk.abstr.iter(e),s=i.tp$iternext();void 0!==s;s=i.tp$iternext()){if(Sk.misceval.richCompareBool(t,s,"Eq"))return new Sk.builtin.int_(n);n+=1}throw new Sk.builtin.ValueError("sequence.index(x): x not in sequence")},Sk.abstr.sequenceGetCountOf=function(e,t){if(e.count)return Sk.misceval.callsimArray(e.count,[e,t]);let n=0;for(let i=Sk.abstr.iter(e),s=i.tp$iternext();void 0!==s;s=i.tp$iternext())Sk.misceval.richCompareBool(t,s,"Eq")&&(n+=1);return new Sk.builtin.int_(n)},Sk.abstr.sequenceGetItem=function(e,t,n){return"number"===typeof t&&(t=new Sk.builtin.int_(t)),Sk.abstr.objectGetItem(e,t,n)},Sk.abstr.sequenceSetItem=function(e,t,n,i){return"number"===typeof t&&(t=new Sk.builtin.int_(t)),Sk.abstr.objectSetItem(e,t,n,i)},Sk.abstr.sequenceDelItem=function(e,t,n){return Sk.abstr.objectDelItem(e,t,n)},Sk.abstr.sequenceGetSlice=function(e,t,n){return Sk.abstr.objectGetItem(e,new Sk.builtin.slice(t,n))},Sk.abstr.sequenceDelSlice=function(e,t,n){return Sk.abstr.objectDelItem(e,new Sk.builtin.slice(t,n))},Sk.abstr.sequenceSetSlice=function(e,t,n,i){return Sk.abstr.objectSetItem(e,new Sk.builtin.slice(t,n))},Sk.abstr.sequenceUnpack=function(e,t,n,i){if(!Sk.builtin.checkIterable(e))throw new Sk.builtin.TypeError("cannot unpack non-iterable "+Sk.abstr.typeName(e)+" object");const s=Sk.abstr.iter(e),r=[];let o,a=0;return 0<t&&(o=Sk.misceval.iterFor(s,(e=>{if(r.push(e),++a===t)return new Sk.misceval.Break}))),Sk.misceval.chain(o,(()=>{if(r.length<t)throw new Sk.builtin.ValueError("not enough values to unpack (expected at least "+n+", got "+r.length+")");if(!i)return Sk.misceval.chain(s.tp$iternext(!0),(e=>{if(void 0!==e)throw new Sk.builtin.ValueError("too many values to unpack (expected "+t+")");return r}));const e=[];return Sk.misceval.chain(Sk.misceval.iterFor(s,(t=>{e.push(t)})),(()=>{const i=e.length+t-n;if(0>i)throw new Sk.builtin.ValueError("not enough values to unpack (expected at least "+n+", got "+(n+i)+")");return r.push(new Sk.builtin.list(e.slice(0,i))),r.push(...e.slice(i)),r}))}))},Sk.abstr.mappingUnpackIntoKeywordArray=function(e,t,n){if(!(t instanceof Sk.builtin.dict)){var i=Sk.abstr.lookupSpecial(t,Sk.builtin.str.$keys);if(void 0===i)throw new Sk.builtin.TypeError("Object is not a mapping");return Sk.misceval.chain(Sk.misceval.callsimOrSuspendArray(i),(i=>Sk.misceval.iterFor(Sk.abstr.iter(i),(i=>{if(!Sk.builtin.checkString(i))throw new Sk.builtin.TypeError((n.$qualname?n.$qualname+"() ":"")+"keywords must be strings");return Sk.misceval.chain(t.mp$subscript(i,!0),(t=>{e.push(i.v),e.push(t)}))}))))}t.$items().forEach((t=>{let[i,s]=t;if(!Sk.builtin.checkString(i))throw new Sk.builtin.TypeError((n.$qualname?n.$qualname+"() ":"")+"keywords must be strings");e.push(i.v),e.push(s)}))},Sk.abstr.copyKeywordsToNamedArgs=function(e,t,n,i,s){i=i||[];var r=n.length+i.length/2;if(r>t.length)throw new Sk.builtin.TypeError(e+"() expected at most "+t.length+" arguments ("+r+" given)");if(!i.length&&void 0===s)return n;if(r===t.length&&!i.length)return n;if(0===r&&t.length===(s&&s.length))return s;for(n=n.slice(0),r=0;r<i.length;r+=2){const s=i[r],o=i[r+1],a=t.indexOf(s);if(!(0<=a))throw new Sk.builtin.TypeError(e+"() got an unexpected keyword argument '"+s+"'");if(void 0!==n[a])throw new Sk.builtin.TypeError(e+"() got multiple values for argument '"+s+"'");n[a]=o}if(s){for(r=(i=t.length)-1;0<=r;r--)void 0===n[r]&&(n[r]=s[s.length-1-(i-1-r)]);if((t=t.filter(((e,t)=>void 0===n[t]))).length)throw new Sk.builtin.TypeError(e+"() missing "+t.length+" required positional arguments: "+t.join(", "))}return n},Sk.exportSymbol("Sk.abstr.copyKeywordsToNamedArgs",Sk.abstr.copyKeywordsToNamedArgs),Sk.abstr.checkNoKwargs=function(e,t){if(t&&t.length)throw new Sk.builtin.TypeError(e+"() takes no keyword arguments")},Sk.exportSymbol("Sk.abstr.checkNoKwargs",Sk.abstr.checkNoKwargs),Sk.abstr.checkNoArgs=function(e,t,n){if(t=t.length+(n?n.length:0))throw new Sk.builtin.TypeError(e+"() takes no arguments ("+t+" given)")},Sk.exportSymbol("Sk.abstr.checkNoArgs",Sk.abstr.checkNoArgs),Sk.abstr.checkOneArg=function(e,t,n){if(Sk.abstr.checkNoKwargs(e,n),1!==t.length)throw new Sk.builtin.TypeError(e+"() takes exactly one argument ("+t.length+" given)")},Sk.exportSymbol("Sk.abstr.checkOneArg",Sk.abstr.checkOneArg),Sk.abstr.checkArgsLen=function(e,t,n,i){if(void 0===i&&(i=1/0),(t=t.length)<n||t>i)throw new Sk.builtin.TypeError((n===i?e+"() takes exactly "+n+" arguments":t<n?e+"() takes at least "+n+" arguments":e+"() takes at most "+i+" arguments")+" ("+t+" given)")},Sk.exportSymbol("Sk.abstr.checkArgsLen",Sk.abstr.checkArgsLen),Sk.abstr.objectFormat=function(e,t){if(e=Sk.abstr.lookupSpecial(e,Sk.builtin.str.$format),t=Sk.misceval.callsimArray(e,[t]),!Sk.builtin.checkString(t))throw new Sk.builtin.TypeError("__format__ must return a str, not "+Sk.abstr.typeName(t));return t},Sk.abstr.objectHash=function(e){const t=e.tp$hash;if(void 0!==t){if(Sk.builtin.checkNone(t))throw new Sk.builtin.TypeError("unhashable type: '"+Sk.abstr.typeName(e)+"'");return e.tp$hash()}throw new Sk.builtin.TypeError("unsupported Javascript type")},Sk.abstr.objectAdd=function(e,t){if(e.nb$add)return e.nb$add(t);throw e=Sk.abstr.typeName(e),t=Sk.abstr.typeName(t),new Sk.builtin.TypeError("unsupported operand type(s) for +: '"+e+"' and '"+t+"'")},Sk.abstr.objectNegative=function(e){if(e.nb$negative)return e.nb$negative();throw new Sk.builtin.TypeError("bad operand type for unary -: '"+Sk.abstr.typeName(e)+"'")},Sk.abstr.objectPositive=function(e){if(e.nb$positive)return e.nb$positive();throw new Sk.builtin.TypeError("bad operand type for unary +: '"+Sk.abstr.typeName(e)+"'")},Sk.abstr.objectDelItem=function(e,t,n){if(e.mp$ass_subscript)return e.mp$ass_subscript(t,void 0,n);throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(e)+"' object does not support item deletion")},Sk.exportSymbol("Sk.abstr.objectDelItem",Sk.abstr.objectDelItem),Sk.abstr.objectGetItem=function(e,t,n){if(e.mp$subscript)return e.mp$subscript(t,n);throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(e)+"' does not support indexing")},Sk.exportSymbol("Sk.abstr.objectGetItem",Sk.abstr.objectGetItem),Sk.abstr.objectSetItem=function(e,t,n,i){if(e.mp$ass_subscript)return e.mp$ass_subscript(t,n,i);throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(e)+"' does not support item assignment")},Sk.exportSymbol("Sk.abstr.objectSetItem",Sk.abstr.objectSetItem),Sk.abstr.gattr=function(e,t,n){if(void 0===(n=e.tp$getattr(t,n)))throw new Sk.builtin.AttributeError(e.sk$attrError()+" has no attribute '"+t.$jsstr()+"'");return n.$isSuspension?Sk.misceval.chain(n,(function(n){if(void 0===n)throw new Sk.builtin.AttributeError(e.sk$attrError()+" has no attribute '"+t.$jsstr()+"'");return n})):n},Sk.exportSymbol("Sk.abstr.gattr",Sk.abstr.gattr),Sk.abstr.sattr=function(e,t,n,i){return e.tp$setattr(t,n,i)},Sk.exportSymbol("Sk.abstr.sattr",Sk.abstr.sattr),Sk.abstr.iternext=function(e,t){return e.tp$iternext(t)},Sk.exportSymbol("Sk.abstr.iternext",Sk.abstr.iternext),Sk.abstr.iter=function(e){if(e.tp$iter){if((e=e.tp$iter()).tp$iternext)return e;throw new Sk.builtin.TypeError("iter() returned non-iterator of type '"+Sk.abstr.typeName(e)+"'")}if(e.mp$subscript)return new Sk.builtin.seq_iter_(e);throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(e)+"' object is not iterable")},Sk.exportSymbol("Sk.abstr.iter",Sk.abstr.iter),Sk.abstr.lookupSpecial=function(e,t){var n=e.ob$type;if(void 0===n)Sk.asserts.fail("javascript object sent to lookupSpecial");else if(void 0!==(t=n.$typeLookup(t)))return void 0!==t.tp$descr_get&&(t=t.tp$descr_get(e,n)),t},Sk.exportSymbol("Sk.abstr.lookupSpecial",Sk.abstr.lookupSpecial),Sk.abstr.typeLookup=function(e,t){return void 0!==(t=e.$typeLookup(t))&&t.tp$descr_get?t.tp$descr_get(null,e):t},Sk.abstr.markUnhashable=function(e){(e=e.prototype).__hash__=Sk.builtin.none.none$,e.tp$hash=Sk.builtin.none.none$},Sk.abstr.setUpInheritance=function(e,t,n,i){i=i||Sk.builtin.type;const s=null!==(n=void 0===n?Sk.builtin.object:n)?n.prototype:null;Object.setPrototypeOf(t,i.prototype),Object.setPrototypeOf(t.prototype,s),Object.defineProperties(t.prototype,{sk$object:{value:t,writable:!0},ob$type:{value:t,writable:!0},tp$name:{value:e,writable:!0},tp$base:{value:n,writable:!0}})},Sk.abstr.setUpBuiltinMro=function(e){let t=e.prototype.tp$base;const n=null===t?[]:[t];t!==Sk.builtin.object&&null!==t||(Object.defineProperty(e,"sk$baseClass",{value:!0,writable:!0}),Object.defineProperty(e.prototype,"sk$builtinBase",{value:e,writable:!0}));const i=[e];for(;null!==t;)i.push(t),t=t.prototype.tp$base;Object.defineProperties(e.prototype,{sk$prototypical:{value:!0,writable:!0},tp$bases:{value:n,writable:!0},tp$mro:{value:i,writable:!0}}),Object.defineProperty(e,"$typeLookup",{value:function(e){return this.prototype[e.$mangled]},writable:!0})},Sk.abstr.setUpGetSets=function(e,t){if(void 0!==Sk.builtin.getset_descriptor){var n=e.prototype;t=t||n.tp$getsets||{},Object.entries(t).forEach((t=>{let[i,s]=t;s.$name=i,n[i]=new Sk.builtin.getset_descriptor(e,s)})),Object.defineProperty(n,"tp$getsets",{value:null,writable:!0})}},Sk.abstr.setUpMethods=function(e,t){if(void 0!==Sk.builtin.method_descriptor){var n=e.prototype;t=t||n.tp$methods||{},Object.entries(t).forEach((t=>{let[i,s]=t;s.$name=i,n[i]=new Sk.builtin.method_descriptor(e,s)})),Object.defineProperty(n,"tp$methods",{value:null,writable:!0})}},Sk.abstr.setUpClassMethods=function(e,t){if(void 0!==Sk.builtin.classmethod_descriptor){var n=e.prototype;t=t||n.tp$classmethods||{},Object.entries(t).forEach((t=>{let[i,s]=t;s.$name=i,n[i]=new Sk.builtin.classmethod_descriptor(e,s)})),Object.defineProperty(n,"tp$classmethods",{value:null,writable:!0})}};const o=Object.entries({Eq:"ob$eq",NotEq:"ob$ne",Gt:"ob$gt",GtE:"ob$ge",Lt:"ob$lt",LtE:"ob$le"});Sk.abstr.setUpSlots=function(e,t){function n(t,n){s[t]=new Sk.builtin.wrapper_descriptor(e,Sk.slots[t],n)}function i(e,t){"string"===typeof e?n(e,t):e.forEach((e=>{n(e,t)}))}if(void 0!==Sk.builtin.wrapper_descriptor){var s=e.prototype;(t=t||s.tp$slots||{}).tp$new===Sk.generic.new&&(t.tp$new=Sk.generic.new(e)),t.tp$richcompare&&function(e){o.forEach((t=>{let[n,i]=t;e[i]=function(e){return this.tp$richcompare(e,n)}}))}(t),t.tp$as_number&&function(e){const t=Sk.reflectedNumberSlots;Object.keys(t).forEach((n=>{if(void 0!==e[n]){const i=t[n],s=i.reflected,r=e[s];void 0!==r?null===r&&delete e[s]:e[s]=i.slot||e[n]}}))}(t),t.tp$as_sequence_or_mapping&&function(e){const t=Sk.sequenceAndMappingSlots;Object.keys(t).forEach((n=>{void 0!==e[n]&&t[n].forEach((t=>{e[t]=e[n]}))}))}(t),Object.entries(t).forEach((e=>{let[t,n]=e;Object.defineProperty(s,t,{value:n,writable:!0})})),t.tp$new&&(s.__new__=new Sk.builtin.sk_method(Sk.generic.newMethodDef,e),Object.defineProperty(s,"sk$staticNew",{value:e,writable:!0})),Sk.subSlots.main_slots.forEach((e=>{let[n,s]=e;n=t[n],void 0!==n&&i(s,n)}));var r=t.tp$hash;void 0!==r&&("function"===typeof r?n("__hash__",r):r===Sk.builtin.none.none$?s.__hash__=r:Sk.asserts.fail("invalid tp$hash")),t.tp$as_number&&Sk.subSlots.number_slots.forEach((e=>{let[n,s]=e;n=t[n],void 0!==n&&i(s,n)})),t.tp$as_sequence_or_mapping&&Sk.subSlots.sequence_and_mapping_slots.forEach((e=>{let[n,s]=e;n=t[n],void 0!==n&&i(s,n)})),Object.defineProperty(s,"tp$slots",{value:null,writable:!0})}},Sk.abstr.buildNativeClass=function(e,t){t=t||{},Sk.asserts.assert(t.hasOwnProperty("constructor"),"A constructor is required to build a native class");let n=t.constructor;if(e.includes(".")){var i=e.split(".");e=i.pop(),i=i.join(".")}Sk.abstr.setUpInheritance(e,n,t.base,t.meta),Sk.abstr.setUpBuiltinMro(n);const s=n.prototype;return Object.defineProperties(s,{tp$slots:{value:t.slots,writable:!0},tp$getsets:{value:t.getsets,writable:!0},tp$methods:{value:t.methods,writable:!0},tp$classmethods:{value:t.classmethods,writable:!0}}),Sk.abstr.setUpSlots(n,t.slots||{}),Sk.abstr.setUpMethods(n,t.methods),Sk.abstr.setUpGetSets(n,t.getsets),Sk.abstr.setUpClassMethods(n,t.classmethods),void 0!==i&&(s.__module__=new Sk.builtin.str(i)),Object.entries(t.proto||{}).forEach((e=>{let[t,n]=e;Object.defineProperty(s,t,{value:n,writable:!0,enumerable:!(t.includes("$")||t in Object.prototype)})})),Object.entries(t.flags||{}).forEach((e=>{let[t,i]=e;Object.defineProperty(n,t,{value:i,writable:!0})})),void 0!==Sk.builtin.str&&s.hasOwnProperty("tp$doc")&&!s.hasOwnProperty("__doc__")&&(e=s.tp$doc||null,s.__doc__="string"===typeof e?new Sk.builtin.str(e):Sk.builtin.none.none$),n},Sk.abstr.buildIteratorClass=function(e,t){return Sk.asserts.assert(t.hasOwnProperty("constructor"),"must provide a constructor"),t.slots=t.slots||{},t.slots.tp$iter=Sk.generic.selfIter,t.slots.tp$iternext=t.slots.tp$iternext||t.iternext,t.slots.tp$getattr=t.slots.tp$getattr||Sk.generic.getAttr,e=Sk.abstr.buildNativeClass(e,t),Sk.abstr.built$iterators.push(e),e},Sk.abstr.built$iterators=[],Sk.abstr.setUpModuleMethods=function(e,t,n){Object.entries(n).forEach((n=>{let[i,s]=n;s.$name=s.$name||i,t[i]=new Sk.builtin.sk_method(s,null,e)}))},Sk.abstr.superConstructor=function(e,t,n){var i=Array.prototype.slice.call(arguments,2);e.prototype.tp$base.apply(t,i)}},function(e,t){const n=new Map;Sk.builtin.object=Sk.abstr.buildNativeClass("object",{constructor:function(){Sk.asserts.assert(this instanceof Sk.builtin.object,"bad call to object, use 'new'")},base:null,slots:{tp$new(e,t){if(e.length||t&&t.length){if(this.tp$new!==Sk.builtin.object.prototype.tp$new)throw new Sk.builtin.TypeError("object.__new__() takes exactly one argument (the type to instantiate)");if(this.tp$init===Sk.builtin.object.prototype.tp$init)throw new Sk.builtin.TypeError(Sk.abstr.typeName(this)+"() takes no arguments")}return new this.constructor},tp$init(e,t){if(e.length||t&&t.length){if(this.tp$init!==Sk.builtin.object.prototype.tp$init)throw new Sk.builtin.TypeError("object.__init__() takes exactly one argument (the instance to initialize)");if(this.tp$new===Sk.builtin.object.prototype.tp$new)throw new Sk.builtin.TypeError(Sk.abstr.typeName(this)+".__init__() takes exactly one argument (the instance to initialize)")}},tp$getattr:Sk.generic.getAttr,tp$setattr:Sk.generic.setAttr,$r(){const e=Sk.abstr.lookupSpecial(this,Sk.builtin.str.$module);let t="";return e&&Sk.builtin.checkString(e)&&(t=e.v+"."),new Sk.builtin.str("<"+t+Sk.abstr.typeName(this)+" object>")},tp$str(){return this.$r()},tp$hash(){let e=n.get(this);return void 0!==e||(e=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER-Number.MAX_SAFE_INTEGER/2),n.set(this,e)),e},tp$richcompare(e,t){switch(t){case"Eq":e=this===e||Sk.builtin.NotImplemented.NotImplemented$;break;case"NotEq":(e=this.tp$richcompare(e,"Eq"))!==Sk.builtin.NotImplemented.NotImplemented$&&(e=!Sk.misceval.isTrue(e));break;default:e=Sk.builtin.NotImplemented.NotImplemented$}return e},tp$doc:"The most base type"},getsets:{__class__:{$get(){return this.ob$type},$set(e){if(void 0===e)throw new Sk.builtin.TypeError("can't delete __class__ attribute");if(!Sk.builtin.checkClass(e))throw new Sk.builtin.TypeError("__class__ must be set to a class, not '"+Sk.abstr.typeName(e)+"' object");const t=this.ob$type;if(!(t.$isSubType(Sk.builtin.module)&&e.$isSubType(Sk.builtin.module)||void 0!==t.sk$klass&&void 0!==e.sk$klass))throw new Sk.builtin.TypeError(" __class__ assignment only supported for heap types or ModuleType subclasses");if(e.prototype.sk$builtinBase!==this.sk$builtinBase)throw new Sk.builtin.TypeError("__class__ assignment: '"+Sk.abstr.typeName(this)+"' object layout differs from '"+e.prototype.tp$name+"'");Object.setPrototypeOf(this,e.prototype)},$doc:"the object's class"}},methods:{__dir__:{$meth:function(){let e=[];if(this.$d)if(this.$d instanceof Sk.builtin.dict)e=this.$d.sk$asarray();else for(var t in this.$d)e.push(new Sk.builtin.str(t));return t=Sk.misceval.callsimArray(Sk.builtin.type.prototype.__dir__,[this.ob$type]),e.push(...t.v),t.v=e,t},$flags:{NoArgs:!0},$doc:"Default dir() implementation."},__format__:{$meth(e){if(!Sk.builtin.checkString(e)){if(Sk.__future__.exceptions)throw new Sk.builtin.TypeError("format() argument 2 must be str, not "+Sk.abstr.typeName(e));throw new Sk.builtin.TypeError("format expects arg 2 to be string or unicode, not "+Sk.abstr.typeName(e))}if(""!==(e=Sk.ffi.remapToJs(e)))throw new Sk.builtin.NotImplementedError("format spec is not yet implemented");return this.tp$str()},$flags:{OneArg:!0},$doc:"Default object formatter."}},proto:{valueOf:Object.prototype.valueOf,toString:function(){return this.tp$str().v},hasOwnProperty:Object.prototype.hasOwnProperty,hp$type:void 0,sk$attrError(){return"'"+this.tp$name+"' object"}}}),Sk.abstr.setUpInheritance("type",Sk.builtin.type,Sk.builtin.object),Sk.abstr.setUpBuiltinMro(Sk.builtin.type)},function(e,t){function n(e,t,n){return Sk.abstr.checkNoArgs(this.$name,t,n),void 0===(e=this.call(e))?Sk.builtin.none.none$:e}function i(e,t,n){return Sk.abstr.checkOneArg(this.$name,t,n),void 0===(e=this.call(e,t[0]))?Sk.builtin.none.none$:e}function s(e,t,n){return Sk.abstr.checkNoKwargs(this.$name,n),Sk.abstr.checkArgsLen(this.$name,t,1,2),void 0===(e=this.call(e,...t))?Sk.builtin.none.none$:e}function r(e,t,n){return Sk.abstr.checkNoKwargs(this.$name,n),Sk.abstr.checkArgsLen(this.$name,t,2,2),this.call(e,t[0],t[1]),Sk.builtin.none.none$}function o(e,t,n){return(e=i.call(this,e,t,n))===Sk.builtin.NotImplemented.NotImplemented$?e:new Sk.builtin.bool(e)}function a(e,t){return function(n,i,s){return n=e.call(this,n,i,s),t(n)}}function l(e){return function(){const t=e.tp$descr_get?e.tp$descr_get(this):e;return Sk.misceval.callsimArray(t,[])}}function c(e,t,n,i){return function(s){return function(){var r=s.tp$descr_get?s.tp$descr_get(this):s;if(r=Sk.misceval.callsimArray(r,[]),!t(r))throw new Sk.builtin.TypeError(e+" should return "+n+" (returned "+Sk.abstr.typeName(r)+")");return void 0!==i?i(r):r}}}function u(e){return function(t){const n=e.tp$descr_get?e.tp$descr_get(this):e;return Sk.misceval.callsimArray(n,[t])}}function h(e,t){let n=this.ob$type.$typeLookup(Sk.builtin.str.$getattribute);if(n instanceof Sk.builtin.wrapper_descriptor)return n.d$wrapped.call(this,e,t);n.tp$descr_get&&(n=n.tp$descr_get(this));const i=Sk.misceval.tryCatch((()=>Sk.misceval.callsimOrSuspendArray(n,[e])),(e=>{if(!(e instanceof Sk.builtin.AttributeError))throw e}));return t?i:Sk.misceval.retryOptionalSuspensionOrThrow(i)}function d(e,t,n){return function(i){return function(i,s,r){let o;void 0===s?(o=t,n=null):o=e;let a=this.ob$type.$typeLookup(new Sk.builtin.str(o));if(a instanceof Sk.builtin.wrapper_descriptor)return a.d$wrapped.call(this,i,s);if(a.tp$descr_get&&(a=a.tp$descr_get(this)),void 0===a){if(n)throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(this)+"' object "+n);throw new Sk.builtin.AttributeError(o)}return i=Sk.misceval.callsimOrSuspendArray(a,void 0===s?[i]:[i,s]),r?i:Sk.misceval.retryOptionalSuspensionOrThrow(i)}}}function f(e,t){let n=e.ob$type;for(;n&&void 0!==n.sk$klass;)n=n.prototype.tp$base;if(n&&n.prototype.tp$setattr!==t)throw new Sk.builtin.TypeError("can't apply this "+t.$name+" to "+Sk.abstr.typeName(e)+" object")}Sk.slots=Object.create(null),e=Sk.slots,Sk.slots.__init__={$name:"__init__",$slot_name:"tp$init",$slot_func:function(e){return function(t,n){const i=e.tp$descr_get?e.tp$descr_get(this):e;return t=Sk.misceval.callsimOrSuspendArray(i,t,n),Sk.misceval.chain(t,(e=>{if(!Sk.builtin.checkNone(e)&&void 0!==e)throw new Sk.builtin.TypeError("__init__() should return None, not "+Sk.abstr.typeName(e))}))}},$wrapper:function(e,t,n){return this.call(e,t,n),Sk.builtin.none.none$},$textsig:"($self, /, *args, **kwargs)",$flags:{FastCall:!0},$doc:"Initialize self.  See help(type(self)) for accurate signature."},e.__new__={$name:"__new__",$slot_name:"tp$new",$slot_func:function(e){const t=function(t,n){let i=e;return e.tp$descr_get&&(i=e.tp$descr_get(null,this.constructor)),Sk.misceval.callsimOrSuspendArray(i,[this.constructor,...t],n)};return t.sk$static_new=!1,t},$wrapper:null,$textsig:"($self, /, *args, **kwargs)",$flags:{FastCall:!0},$doc:"Create and return a new object."},e.__call__={$name:"__call__",$slot_name:"tp$call",$slot_func:function(e){return function(t,n){const i=e.tp$descr_get?e.tp$descr_get(this):e;return Sk.misceval.callsimOrSuspendArray(i,t,n)}},$wrapper:function(e,t,n){return void 0===(e=e.tp$call(t,n))?Sk.builtin.none.none$:e},$textsig:"($self, /, *args, **kwargs)",$flags:{FastCall:!0},$doc:"Call self as a function."},e.__repr__={$name:"__repr__",$slot_name:"$r",$slot_func:c("__repr__",Sk.builtin.checkString,"str"),$wrapper:n,$textsig:"($self, /)",$flags:{NoArgs:!0},$doc:"Return repr(self)."},e.__str__={$name:"__str__",$slot_name:"tp$str",$slot_func:c("__str__",Sk.builtin.checkString,"str"),$wrapper:n,$textsig:"($self, /)",$flags:{NoArgs:!0},$doc:"Return str(self)."};var g=c("__hash__",Sk.builtin.checkInt,"int",(e=>"number"===typeof e.v?e.v:e.tp$hash()));e.__hash__={$name:"__hash__",$slot_name:"tp$hash",$slot_func:function(e){return e===Sk.builtin.none.none$?Sk.builtin.none.none$:g(e)},$wrapper:a(n,(e=>new Sk.builtin.int_(e))),$textsig:"($self, /)",$flags:{NoArgs:!0},$doc:"Return hash(self)."},e.__getattribute__={$name:"__getattribute__",$slot_name:"tp$getattr",$slot_func:function(e){return function(e,t){let n=this.ob$type.$typeLookup(Sk.builtin.str.$getattr);if(void 0===n)return h.call(this,e,t);const i=Sk.misceval.chain(h.call(this,e,t),(t=>Sk.misceval.tryCatch((()=>void 0!==t?t:(n.tp$descr_get&&(n=n.tp$descr_get(this)),Sk.misceval.callsimOrSuspendArray(n,[e]))),(function(e){if(!(e instanceof Sk.builtin.AttributeError))throw e}))));return t?i:Sk.misceval.retryOptionalSuspensionOrThrow(i)}},$wrapper:function(e,t,n){if(Sk.abstr.checkOneArg(this.$name,t,n),t=t[0],!Sk.builtin.checkString(t))throw new Sk.builtin.TypeError("attribute name must be string, not '"+Sk.abstr.typeName(t)+"'");if(void 0===(n=this.call(e,t)))throw new Sk.builtin.AttributeError(Sk.abstr.typeName(e)+" has no attribute "+t.$jsstr());return n},$textsig:"($self, name, /)",$flags:{OneArg:!0},$doc:"Return getattr(self, name)."},e.__getattr__={$name:"__getattr__",$slot_name:"tp$getattr",$slot_func:e.__getattribute__.$slot_func,$wrapper:null,$textsig:"($self, name, /)",$flags:{OneArg:!0},$doc:"Return getattr(self, name)."},e.__setattr__={$name:"__setattr__",$slot_name:"tp$setattr",$slot_func:d("__setattr__","__delattr__"),$wrapper:function(e,t,n){return Sk.abstr.checkNoKwargs(this.$name,n),Sk.abstr.checkArgsLen(this.$name,t,2,2),f(e,this),this.call(e,t[0],t[1]),Sk.builtin.none.none$},$textsig:"($self, name, value, /)",$flags:{MinArgs:2,MaxArgs:2},$doc:"Implement setattr(self, name, value)."},e.__delattr__={$name:"__delattr__",$slot_name:"tp$setattr",$slot_func:e.__setattr__.$slot_func,$wrapper:function(e,t,n){return Sk.abstr.checkOneArg(this.$name,t,n),f(e,this),this.call(e,t[0]),Sk.builtin.none.none$},$textsig:"($self, name, /)",$flags:{OneArg:!0},$doc:"Implement delattr(self, name)."},e.__get__={$name:"__get__",$slot_name:"tp$descr_get",$slot_func:function(e){return function(t,n,i){null===t&&(t=Sk.builtin.none.none$),null==n&&(n=Sk.builtin.none.none$);const s=e.tp$descr_get?e.tp$descr_get(this):e;return t=Sk.misceval.callsimOrSuspendArray(s,[t,n]),i?t:Sk.misceval.retryOptionalSuspensionOrThrow(t)}},$wrapper:function(e,t,n){if(Sk.abstr.checkNoKwargs(this.$name,n),Sk.abstr.checkArgsLen(this.$name,t,1,2),n=t[0],t=t[1],n===Sk.builtin.none.none$&&(n=null),t===Sk.builtin.none.none$&&(t=null),null===t&&null===n)throw new Sk.builtin.TypeError("__get__(None, None) is invalid");return this.call(e,n,t)},$textsig:"($self, instance, owner, /)",$flags:{MinArgs:2,MaxArgs:2},$doc:"Return an attribute of instance, which is of type owner."},e.__set__={$name:"__set__",$slot_name:"tp$descr_set",$slot_func:d("__set__","__delete__"),$wrapper:r,$textsig:"($self, instance, value, /)",$flags:{MinArgs:2,MaxArgs:2},$doc:"Set an attribute of instance to value."},e.__delete__={$name:"__delete__",$slot_name:"tp$descr_set",$slot_func:e.__set__.$slot_func,$wrapper:i,$textsig:"($self, instance, /)",$flags:{OneArg:!0},$doc:"Delete an attribute of instance."},e.__eq__={$name:"__eq__",$slot_name:"ob$eq",$slot_func:u,$wrapper:o,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self==value."},e.__ge__={$name:"__ge__",$slot_name:"ob$ge",$slot_func:u,$wrapper:o,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self>=value."},e.__gt__={$name:"__gt__",$slot_name:"ob$gt",$slot_func:u,$wrapper:o,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self>value."},e.__le__={$name:"__le__",$slot_name:"ob$le",$slot_func:u,$wrapper:o,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self<=value."},e.__lt__={$name:"__lt__",$slot_name:"ob$lt",$slot_func:u,$wrapper:o,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self<value."},e.__ne__={$name:"__ne__",$slot_name:"ob$ne",$slot_func:u,$wrapper:o,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self!=value."},e.__iter__={$name:"__iter__",$slot_name:"tp$iter",$slot_func:l,$wrapper:n,$textsig:"($self, /)",$flags:{NoArgs:!0},$doc:"Implement iter(self)."},e.__next__={$name:"__next__",$slot_name:"tp$iternext",$slot_func:function(e){return function(t){const n=e.tp$descr_get?e.tp$descr_get(this):e,i=Sk.misceval.tryCatch((()=>Sk.misceval.callsimOrSuspendArray(n,[])),(e=>{if(!(e instanceof Sk.builtin.StopIteration))throw e}));return t?i:Sk.misceval.retryOptionalSuspensionOrThrow(i)}},$wrapper:function(e,t,n){return Sk.abstr.checkNoArgs(this.$name,t,n),Sk.misceval.chain(e.tp$iternext(!0),(e=>{if(void 0===e)throw new Sk.builtin.StopIteration;return e}))},$textsig:"($self, /)",$flags:{NoArgs:!0},$doc:"Implement next(self)."},e.__len__={$name:"__len__",$slot_name:"sq$length",$slot_func:function(e){return function(t){const n=e.tp$descr_get?e.tp$descr_get(this):e;return t?(t=Sk.misceval.callsimOrSuspendArray(n,[]),Sk.misceval.chain(t,(e=>Sk.misceval.asIndexOrThrow(e)))):(t=Sk.misceval.callsimArray(n,[]),Sk.misceval.asIndexOrThrow(t))}},$wrapper:a(n,(e=>new Sk.builtin.int_(e))),$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return len(self)."},e.__contains__={$name:"__contains__",$slot_name:"sq$contains",$slot_func:function(e){return function(t,n){const i=e.tp$descr_get?e.tp$descr_get(this):e;return t=Sk.misceval.callsimOrSuspendArray(i,[t]),t=Sk.misceval.chain(t,(e=>Sk.misceval.isTrue(e))),t.$isSuspension?n?t:Sk.misceval.retryOptionalSuspensionOrThrow(t):t}},$wrapper:a(i,(e=>new Sk.builtin.bool(e))),$textsig:"($self, key, /)",$flags:{OneArg:!0},$doc:"Return key in self."},e.__getitem__={$name:"__getitem__",$slot_name:"mp$subscript",$slot_func:function(e){return function(t,n){const i=e.tp$descr_get?e.tp$descr_get(this):e;return t=Sk.misceval.callsimOrSuspendArray(i,[t]),n?t:Sk.misceval.retryOptionalSuspensionOrThrow(t)}},$wrapper:i,$textsig:"($self, key, /)",$flags:{OneArg:!0},$doc:"Return self[key]."},e.__setitem__={$name:"__setitem__",$slot_name:"mp$ass_subscript",$slot_func:d("__setitem__","__delitem__","does not support item assignment"),$wrapper:r,$textsig:"($self, key, value, /)",$flags:{MinArgs:2,MaxArgs:2},$doc:"Set self[key] to value."},e.__delitem__={$name:"__delitem__",$slot_name:"mp$ass_subscript",$slot_func:e.__setitem__.$slot_func,$wrapper:i,$textsig:"($self, key, /)",$flags:{OneArg:!0},$doc:"Delete self[key]."},e.__add__={$name:"__add__",$slot_name:"nb$add",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self+value."},e.__radd__={$name:"__radd__",$slot_name:"nb$reflected_add",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return value+self."},e.__iadd__={$name:"__iadd__",$slot_name:"nb$inplace_add",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Implement self+=value."},e.__sub__={$name:"__sub__",$slot_name:"nb$subtract",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self-value."},e.__rsub__={$name:"__rsub__",$slot_name:"nb$reflected_subtract",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return value-self."},e.__imul__={$name:"__imul__",$slot_name:"nb$inplace_multiply",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Implement self*=value."},e.__mul__={$name:"__mul__",$slot_name:"nb$multiply",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self*value."},e.__rmul__={$name:"__rmul__",$slot_name:"nb$reflected_multiply",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return value*self."},e.__isub__={$name:"__isub__",$slot_name:"nb$inplace_subtract",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Implement self-=value."},e.__mod__={$name:"__mod__",$slot_name:"nb$remainder",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self%value."},e.__rmod__={$name:"__rmod__",$slot_name:"nb$reflected_remainder",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return value%self."},e.__imod__={$name:"__imod__",$slot_name:"nb$inplace_remainder",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Implement value%=self."},e.__divmod__={$name:"__divmod__",$slot_name:"nb$divmod",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return divmod(self, value)."},e.__rdivmod__={$name:"__rdivmod__",$slot_name:"nb$reflected_divmod",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return divmod(value, self)"},e.__pos__={$name:"__pos__",$slot_name:"nb$positive",$slot_func:l,$wrapper:n,$textsig:"($self, /)",$flags:{NoArgs:!0},$doc:"+self"},e.__neg__={$name:"__neg__",$slot_name:"nb$negative",$slot_func:l,$wrapper:n,$textsig:"($self, /)",$flags:{NoArgs:!0},$doc:"-self"},e.__abs__={$name:"__abs__",$slot_name:"nb$abs",$slot_func:l,$wrapper:n,$textsig:"($self, /)",$flags:{NoArgs:!0},$doc:"abs(self)"},e.__bool__={$name:"__bool__",$slot_name:"nb$bool",$slot_func:c("__bool__",Sk.builtin.checkBool,"bool",(e=>0!==e.v)),$wrapper:a(n,(e=>new Sk.builtin.bool(e))),$textsig:"($self, /)",$flags:{NoArgs:!0},$doc:"self != 0"},e.__invert__={$name:"__invert__",$slot_name:"nb$invert",$slot_func:l,$wrapper:n,$textsig:"($self, /)",$flags:{NoArgs:!0},$doc:"~self"},e.__lshift__={$name:"__lshift__",$slot_name:"nb$lshift",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self<<value."},e.__rlshift__={$name:"__rlshift__",$slot_name:"nb$reflected_lshift",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return value<<self."},e.__rshift__={$name:"__rshift__",$slot_name:"nb$rshift",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self>>value."},e.__rrshift__={$name:"__rrshift__",$slot_name:"nb$reflected_rshift",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return value>>self."},e.__ilshift__={$name:"__ilshift__",$slot_name:"nb$inplace_lshift",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Implement self<<=value."},e.__irshift__={$name:"__irshift__",$slot_name:"nb$inplace_rshift",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Implement self=>>value."},e.__and__={$name:"__and__",$slot_name:"nb$and",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self&value."},e.__rand__={$name:"__rand__",$slot_name:"nb$refelcted_and",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return value&self."},e.__iand__={$name:"__iand__",$slot_name:"nb$and",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Implement self&=value."},e.__xor__={$name:"__xor__",$slot_name:"nb$xor",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self^value."},e.__rxor__={$name:"__rxor__",$slot_name:"nb$reflected_xor",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return value^self."},e.__ixor__={$name:"__ixor__",$slot_name:"nb$inplace_xor",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Implement self^=value."},e.__or__={$name:"__or__",$slot_name:"nb$or",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self|value."},e.__ror__={$name:"__ror__",$slot_name:"nb$reflected_or",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return value|self."},e.__ior__={$name:"__ior__",$slot_name:"nb$inplace_or",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Implement self|=value."},e.__int__={$name:"__int__",$slot_name:"nb$int",$slot_func:c("__int__",Sk.builtin.checkInt,"int"),$wrapper:n,$textsig:"($self, /)",$flags:{NoArgs:!0},$doc:"int(self)"},e.__float__={$name:"__float__",$slot_name:"nb$float",$slot_func:c("__float__",Sk.builtin.checkFloat,"float"),$wrapper:n,$textsig:"($self, /)",$flags:{NoArgs:!0},$doc:"float(self)"},e.__floordiv__={$name:"__floordiv__",$slot_name:"nb$floor_divide",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self//value."},e.__rfloordiv__={$name:"__rfloordiv__",$slot_name:"nb$reflected_floor_divide",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return value//self."},e.__ifloordiv__={$name:"__ifloordiv__",$slot_name:"nb$inplace_floor_divide",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Implement self//=value."},e.__truediv__={$name:"__truediv__",$slot_name:"nb$divide",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self/value."},e.__rtruediv__={$name:"__rtruediv__",$slot_name:"nb$reflected_divide",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return value/self."},e.__itruediv__={$name:"__itruediv__",$slot_name:"nb$inplace_divide",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Implement self/=value."},e.__index__={$name:"__index__",$slot_name:"nb$index",$slot_func:c("__index__",Sk.builtin.checkInt,"int",(e=>e.v)),$wrapper:a(n,(e=>new Sk.builtin.int_(e))),$textsig:"($self, /)",$flags:{NoArgs:!0},$doc:"Return self converted to an integer, if self is suitable for use as an index into a list."},e.__pow__={$name:"__pow__",$slot_name:"nb$power",$slot_func:function(e){return function(t,n){const i=e.tp$descr_get?e.tp$descr_get(this):e;return void 0==n?Sk.misceval.callsimArray(i,[t]):Sk.misceval.callsimArray(i,[t,n])}},$wrapper:s,$textsig:"($self, value, mod=None, /)",$flags:{MinArgs:1,MaxArgs:2},$doc:"Return pow(self, value, mod)."},e.__rpow__={$name:"__rpow__",$slot_name:"nb$reflected_power",$slot_func:e.__pow__.$slot_func,$wrapper:s,$textsig:"($self, value, mod=None, /)",$flags:{MinArgs:1,MaxArgs:2},$doc:"Return pow(value, self, mod)."},e.__ipow__={$name:"__ipow__",$slot_name:"nb$inplace_power",$slot_func:e.__pow__.$slot_func,$wrapper:s,$textsig:"($self, value, mod=None, /)",$flags:{MinArgs:1,MaxArgs:2},$doc:"Implement **="},e.__matmul__={$name:"__matmul__",$slot_name:"nb$matrix_multiply",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return self@value."},e.__rmatmul__={$name:"__rmatmul__",$slot_name:"nb$reflected_matrix_multiply",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Return value@self."},e.__imatmul__={$name:"__imatmul__",$slot_name:"nb$inplace_matrix_multiply",$slot_func:u,$wrapper:i,$textsig:"($self, value, /)",$flags:{OneArg:!0},$doc:"Implement self@=value."},e.__long__={$name:"__long__",$slot_name:"nb$long",$slot_func:c("__long__",Sk.builtin.checkInt,"int"),$wrapper:n,$textsig:"($self, /)",$flags:{NoArgs:!0},$doc:"int(self)"};var p,m={next:{$name:"next",$slot_name:"tp$iternext",$slot_func:e.__next__.$slot_func,$wrapper:e.__next__.$wrapper,$textsig:e.__next__.$textsig,$flags:e.__next__.$flags},__nonzero__:{$name:"__nonzero__",$slot_name:"nb$bool",$slot_func:c("__nonzero__",Sk.builtin.checkInt,"int",(e=>0!==e.v)),$wrapper:a(n,(e=>new Sk.builtin.bool(e))),$textsig:"($self, /)",$flags:{NoArgs:!0},$doc:"x.__nonzero__() <==> x != 0"},__div__:{$name:"__div__",$slot_name:"nb$divide",$slot_func:u,$wrapper:i,$textsig:"($self, other/)",$flags:{OneArg:!0},$doc:"x.__div__(y) <==> x/y"},__rdiv__:{$name:"__rdiv__",$slot_name:"nb$reflected_divide",$slot_func:u,$wrapper:i,$textsig:"($self, other/)",$flags:{OneArg:!0},$doc:"x.__rdiv__(y) <==> x/y"},__idiv__:{$name:"__idiv__",$slot_name:"nb$inplace_divide",$slot_func:u,$wrapper:i,$textsig:"($self, other/)",$flags:{OneArg:!0},$doc:"implement self /= other"}};Sk.subSlots={main_slots:Object.entries({tp$init:"__init__",tp$call:"__call__",$r:"__repr__",tp$str:"__str__",tp$getattr:"__getattribute__",tp$setattr:["__setattr__","__delattr__"],ob$eq:"__eq__",ob$ne:"__ne__",ob$lt:"__lt__",ob$le:"__le__",ob$gt:"__gt__",ob$ge:"__ge__",tp$descr_get:"__get__",tp$descr_set:["__set__","__delete__"],tp$iter:"__iter__",tp$iternext:"__next__"}),number_slots:Object.entries({nb$abs:"__abs__",nb$negative:"__neg__",nb$positive:"__pos__",nb$int:"__int__",nb$long:"__long__",nb$float:"__float__",nb$add:"__add__",nb$reflected_add:"__radd__",nb$inplace_add:"__iadd__",nb$subtract:"__sub__",nb$reflected_subtract:"__rsub__",nb$inplace_subtract:"__isub__",nb$multiply:"__mul__",nb$reflected_multiply:"__rmul__",nb$inplace_multiply:"__imul__",nb$floor_divide:"__floordiv__",nb$reflected_floor_divide:"__rfloordiv__",nb$inplace_floor_divide:"__ifloordiv__",nb$invert:"__invert__",nb$remainder:"__mod__",nb$reflected_remainder:"__rmod__",nb$inplace_remainder:"__imod__",nb$divmod:"__divmod__",nb$reflected_divmod:"__rdivmod__",nb$power:"__pow__",nb$reflected_power:"__rpow__",nb$inplace_power:"__ipow__",nb$divide:"__truediv__",nb$reflected_divide:"__rtruediv__",nb$inplace_divide:"__itruediv__",nb$bool:"__bool__",nb$and:"__and__",nb$reflected_and:"__rand__",nb$inplace_and:"__iand__",nb$or:"__or__",nb$reflected_or:"__ror__",nb$inplace_or:"__ior__",nb$xor:"__xor__",nb$reflected_xor:"__rxor__",nb$inplace_xor:"__ixor__",nb$lshift:"__lshift__",nb$reflected_lshift:"__rlshift__",nb$rshift:"__rshift__",nb$reflected_rshift:"__rrshift__",nb$inplace_lshift:"__ilshift__",nb$inplace_rshift:"__irshift__",nb$matrix_multiply:"__matmul__",nb$reflected_matrix_multiply:"__rmatmul__",nb$inplace_matrix_multiply:"__imatmul__"}),sequence_and_mapping_slots:Object.entries({sq$length:"__len__",sq$contains:"__contains__",mp$subscript:"__getitem__",mp$ass_subscript:["__setitem__","__delitem__"],nb$add:"__add__",nb$multiply:"__mul__",nb$reflected_multiply:"__rmul__",nb$inplace_add:"__iadd__",nb$inplace_multiply:"__imul__"})},Sk.reflectedNumberSlots={nb$add:{reflected:"nb$reflected_add"},nb$subtract:{reflected:"nb$reflected_subtract",slot:function(e){return e instanceof this.constructor?e.nb$subtract(this):Sk.builtin.NotImplemented.NotImplemented$}},nb$multiply:{reflected:"nb$reflected_multiply"},nb$divide:{reflected:"nb$reflected_divide",slot:function(e){return e instanceof this.constructor?e.nb$divide(this):Sk.builtin.NotImplemented.NotImplemented$}},nb$floor_divide:{reflected:"nb$reflected_floor_divide",slot:function(e){return e instanceof this.constructor?e.nb$floor_divide(this):Sk.builtin.NotImplemented.NotImplemented$}},nb$remainder:{reflected:"nb$reflected_remainder",slot:function(e){return e instanceof this.constructor?e.nb$remainder(this):Sk.builtin.NotImplemented.NotImplemented$}},nb$divmod:{reflected:"nb$reflected_divmod",slot:function(e){return e instanceof this.constructor?e.nb$divmod(this):Sk.builtin.NotImplemented.NotImplemented$}},nb$power:{reflected:"nb$reflected_power",slot:function(e,t){return e instanceof this.constructor?e.nb$power(this,t):Sk.builtin.NotImplemented.NotImplemented$}},nb$and:{reflected:"nb$reflected_and"},nb$or:{reflected:"nb$reflected_or"},nb$xor:{reflected:"nb$reflected_xor"},nb$lshift:{reflected:"nb$reflected_lshift",slot:function(e){return e instanceof this.constructor?e.nb$lshift(this):Sk.builtin.NotImplemented.NotImplemented$}},nb$rshift:{reflected:"nb$reflected_rshift",slot:function(e){return e instanceof this.constructor?e.nb$rshift(this):Sk.builtin.NotImplemented.NotImplemented$}},nb$matrix_multiply:{reflected:"nb$reflexted_matrix_multiply",slot:function(e){return e instanceof this.constructor?e.nb$matrix_multiply(this):Sk.builtin.NotImplemented.NotImplemented$}}},Sk.sequenceAndMappingSlots={sq$concat:["nb$add"],sq$repeat:["nb$multiply","nb$reflected_multiply"],mp$length:["sq$length"],sq$inplace_repeat:["nb$inplace_multiply"],sq$inplace_concat:["nb$inplace_add"]},Sk.dunderToSkulpt={__repr__:"$r",__str__:"tp$str",__init__:"tp$init",__new__:"tp$new",__hash__:"tp$hash",__call__:"tp$call",__iter__:"tp$iter",__next__:"tp$iternext",__eq__:"ob$eq",__ne__:"ob$ne",__lt__:"ob$lt",__le__:"ob$le",__gt__:"ob$gt",__ge__:"ob$ge",__abs__:"nb$abs",__neg__:"nb$negative",__pos__:"nb$positive",__int__:"nb$int",__float__:"nb$float",__add__:"nb$add",__radd__:"nb$reflected_add",__iadd__:"nb$inplace_add",__sub__:"nb$subtract",__rsub__:"nb$reflected_subtract",__isub__:"nb$inplace_subtract",__mul__:"nb$multiply",__rmul__:"nb$reflected_multiply",__imul__:"nb$inplace_multiply",__truediv__:"nb$divide",__rtruediv__:"nb$reflected_divide",__itruediv__:"nb$inplace_divide",__floordiv__:"nb$floor_divide",__rfloordiv__:"nb$reflected_floor_divide",__ifloordiv__:"nb$inplace_floor_divide",__invert__:"nb$invert",__mod__:"nb$remainder",__rmod__:"nb$reflected_remainder",__imod__:"nb$inplace_remainder",__divmod__:"nb$divmod",__rdivmod__:"nb$reflected_divmod",__pow__:"nb$power",__rpow__:"nb$reflected_power",__ipow__:"nb$inplace_power",__bool__:"nb$bool",__long__:"nb$long",__lshift__:"nb$lshift",__rlshift__:"nb$reflected_lshift",__ilshift__:"nb$inplace_lshift",__rshift__:"nb$rshift",__rrshift__:"nb$reflected_rshift",__irshift__:"nb$inplace_rshift",__and__:"nb$and",__rand__:"nb$reflected_and",__iand__:"nb$inplace_and",__or__:"nb$or",__ror__:"nb$reflected_or",__ior__:"nb$inplace_or",__xor__:"nb$xor",__rxor__:"nb$reflected_xor",__ixor__:"nb$inplace_xor",__matmul__:"nb$matrix_multiply",__rmatmul__:"nb$reflected_matrix_multiply",__imatmul__:"nb$inplace_matrix_multiply",__get__:"tp$descr_get",__set__:"tp$descr_set",__delete__:"tp$descr_set",__getattribute__:"tp$getattr",__getattr__:"tp$getattr",__setattr__:"tp$setattr",__delattr__:"tp$setattr",__len__:"sq$length",__contains__:"sq$contains",__getitem__:"mp$subscript",__setitem__:"mp$ass_subscript",__delitem__:"mp$ass_subscript"},Sk.exportSymbol("Sk.setupDunderMethods",Sk.setupDunderMethods),Sk.setupDunderMethods=function(e){function t(e,t,n){for(let i=0;i<e.length;i++){const s=e[i].prototype;s.hasOwnProperty(n)||(s[n]=s[t],delete s[t])}}var n=Sk.slots;if(!e||void 0!==p){var i=Sk.abstr.built$iterators,s=[Sk.builtin.int_,Sk.builtin.lng,Sk.builtin.float_,Sk.builtin.complex],r=Sk.subSlots.number_slots,o=Sk.subSlots.main_slots,a=o.findIndex((e=>"tp$iternext"===e[0])),l=r.findIndex((e=>"nb$bool"===e[0])),c=Sk.dunderToSkulpt;if(e){c.__bool__="nb$bool",c.__next__="tp$iternext",delete c.__nonzero__,delete c.__div__,delete c.__rdiv__,delete c.__idiv__,delete c.next;for(let e in p)n[e]=p[e];for(let e in m)delete n[e];for(e=0;e<s.length;e++)delete(n=s[e].prototype).__div__,delete n.__rdiv__;o[a][1]="__next__",r[l][1]="__bool__",t(i,"next","__next__"),t(s,"__bool__","__nonzero__")}else{void 0===p&&(n.py3$slots={__next__:n.__next__},p=n.py3$slots),c.next="tp$iternext",c.__nonzero__="nb$bool",c.__div__="nb$divide",c.__rdiv__="nb$reflected_divide",c.__idiv__="nb$inplace_divide",delete c.__bool__,delete c.__next__;for(let e in m)n[e]=m[e];for(let e in p)delete n[e];for(o[a][1]="next",r[l][1]="__nonzero__",t(i,"__next__","next"),t(s,"__nonzero__","__bool__"),i=0;i<s.length;i++)(o=(r=s[i]).prototype).hasOwnProperty("__div__")||(o.__div__=new Sk.builtin.wrapper_descriptor(r,m.__div__,o.nb$divide),o.__rdiv__=new Sk.builtin.wrapper_descriptor(r,m.__rdiv__,Sk.reflectedNumberSlots.nb$divide.slot))}}}},function(e,t){function n(e,t,n){return Sk.abstr.buildNativeClass(e,{constructor:n.constructor,slots:Object.assign({tp$getattr:Sk.generic.getAttr,$r:r},n.slots),getsets:Object.assign(n.getsets||{},o),proto:Object.assign(n.proto||{},{d$repr_name:t||e,d$check:i,d$set_check:s}),flags:{sk$acceptable_as_base_class:!1}})}function i(e){if(null==e)return this;if(!e.ob$type.$isSubType(this.d$type))throw new Sk.builtin.TypeError("descriptor '"+this.d$name+"' requires a '"+this.d$type.prototype.tp$name+"' object but received a '"+Sk.abstr.typeName(e)+"' object")}function s(e){if(!e.ob$type.$isSubType(this.d$type))throw new Sk.builtin.TypeError("descriptor '"+this.d$name+"' requires a '"+this.d$type.prototype.tp$name+"' object but received a '"+Sk.abstr.typeName(e)+"' object")}function r(){return new Sk.builtin.str("<"+this.d$repr_name+" '"+this.d$name+"' of '"+this.d$type.prototype.tp$name+"' objects>")}const o={__doc__:{$get(){return this.d$def.$doc?new Sk.builtin.str(this.d$def.$doc):Sk.builtin.none.none$}},__objclass__:{$get(){return this.d$type}},__name__:{$get(){return new Sk.builtin.str(this.d$name)}}};e={__text_signature__:{$get(){return this.d$def.$textsig?new Sk.builtin.str(this.d$def.$textsig):Sk.builtin.none.none$}}},Sk.builtin.getset_descriptor=n("getset_descriptor",void 0,{constructor:function(e,t){this.d$def=t,this.$get=t.$get,this.$set=t.$set,this.d$type=e,this.d$name=t.$name},slots:{tp$descr_get(e,t){if(t=this.d$check(e))return t;if(void 0!==this.$get)return this.$get.call(e);throw new Sk.builtin.AttributeError("getset_descriptor '"+this.d$name+"' of '"+this.d$type.prototype.tp$name+"' objects is not readable")},tp$descr_set(e,t){if(this.d$set_check(e),void 0!==this.$set)return this.$set.call(e,t);throw new Sk.builtin.AttributeError("attribute '"+this.d$name+"' of '"+this.d$type.prototype.tp$name+"' objects is readonly")}}}),Sk.builtin.method_descriptor=n("method_descriptor","method",{constructor:function(e,t){this.d$def=t,this.$meth=t.$meth,this.d$type=e,this.d$name=t.$name||"<native JS>",this.$flags=e=t.$flags||{},e.FastCall&&e.NoKwargs?this.tp$call=this.$methodFastCallNoKwargs:e.FastCall?this.tp$call=this.$methodFastCall:e.NoArgs?this.tp$call=this.$methodCallNoArgs:e.OneArg?this.tp$call=this.$methodCallOneArg:e.NamedArgs?this.tp$call=this.$methodCallNamedArgs:void 0!==e.MinArgs?this.tp$call=this.$methodCallMinArgs:(this.func_code=t.$meth,this.tp$call=this.$defaultCall,this.$memoiseFlags=Sk.builtin.func.prototype.$memoiseFlags,this.$resolveArgs=Sk.builtin.func.prototype.$resolveArgs)},slots:{tp$call(e,t){return this.tp$call(e,t)},tp$descr_get(e,t){let n;return(n=this.d$check(e))?n:new Sk.builtin.sk_method(this.d$def,e)}},getsets:e,proto:{$methodFastCall(e,t){const n=e.shift();return this.m$checkself(n),this.$meth.call(n,e,t)},$methodFastCallNoKwargs(e,t){const n=e.shift();return this.m$checkself(n),Sk.abstr.checkNoKwargs(this.d$name,t),this.$meth.call(n,e)},$methodCallNoArgs(e,t){const n=e.shift();return this.m$checkself(n),Sk.abstr.checkNoArgs(this.d$name,e,t),this.$meth.call(n)},$methodCallOneArg(e,t){const n=e.shift();return this.m$checkself(n),Sk.abstr.checkOneArg(this.d$name,e,t),this.$meth.call(n,e[0])},$methodCallNamedArgs(e,t){const n=e.shift();return this.m$checkself(n),e=Sk.abstr.copyKeywordsToNamedArgs(this.d$name,this.$flags.NamedArgs,e,t,this.$flags.Defaults),this.$meth.call(n,...e)},$methodCallMinArgs(e,t){const n=e.shift();return this.m$checkself(n),Sk.abstr.checkNoKwargs(this.d$name,t),Sk.abstr.checkArgsLen(this.d$name,e,this.$flags.MinArgs,this.$flags.MaxArgs),this.$meth.call(n,...e)},$defaultCall(e,t){return this.m$checkself(e[0]),Sk.builtin.func.prototype.tp$call.call(this,e,t)},m$checkself(e){if(void 0===e)throw new Sk.builtin.TypeError("descriptor '"+this.d$name+"' of '"+this.d$type.prototype.tp$name+"' object needs an argument");this.d$check(e)}}}),Sk.builtin.wrapper_descriptor=n("wrapper_descriptor","slot wrapper",{constructor:function(e,t,n){this.d$def=t,this.d$type=e,this.d$name=n.$name=t.$name,this.d$wrapped=n},slots:{tp$descr_get(e,t){let n;return(n=this.d$check(e))?n:new Sk.builtin.method_wrapper(this,e)},tp$call(e,t){if(1>e.length)throw new Sk.builtin.TypeError("descriptor '"+this.d$name+"' of '"+this.d$type.prototype.tp$name+"' object needs an argument");const n=e.shift();if(!n.ob$type.$isSubType(this.d$type))throw new Sk.builtin.TypeError("descriptor '"+this.d$name+"' requires a '"+this.d$type.prototype.tp$name+"' object but received a '"+Sk.abstr.typeName(n)+"'");return this.raw$call(n,e,t)}},proto:{raw$call(e,t,n){return this.d$wrapped.$name=this.d$name,this.d$def.$wrapper.call(this.d$wrapped,e,t,n)}}}),Sk.builtin.method_wrapper=n("method_wrapper",void 0,{constructor:function(e,t){this.m$descr=e,this.m$self=t,this.d$def=e.d$def,this.d$name=e.d$name,this.d$type=e.d$type},slots:{tp$call(e,t){return this.m$descr.raw$call(this.m$self,e,t)},tp$richcompare(e,t){return("Eq"===t||"NotEq"===t)&&e instanceof Sk.builtin.method_wrapper?(e=this.m$self===e.m$self&&this.m$descr===e.m$descr,"Eq"===t?e:!e):Sk.builtin.NotImplemented.NotImplemented$},$r(){return new Sk.builtin.str("<method-wrapper '"+this.d$name+"' of "+Sk.abstr.typeName(this.m$self)+" object>")}},getsets:{__self__:{$get(){return this.m$self}}}}),Sk.builtin.classmethod_descriptor=n("classmethod_descriptor","method",{constructor:function(e,t){this.d$def=t,this.$meth=t.$meth,this.d$type=e,this.d$name=t.$name||"<native JS>"},slots:{tp$call(e,t){if(1>e.length)throw new Sk.builtin.TypeError("descriptor '"+this.d$name+"' of '"+this.d$type.prototype.tp$name+"' object needs an argument");const n=e.shift();return this.tp$descr_get(null,n).tp$call(e,t)},tp$descr_get(e,t,n){if(void 0===t){if(null===e)throw new Sk.builtin.TypeError("descriptor '"+this.d$name+"' for type '"+this.d$type.prototype.tp$name+"' needs an object or a type");t=t||e.ob$type}if(t.ob$type!==Sk.builtin.type)throw new Sk.builtin.TypeError("descriptor '"+this.d$name+"' for type '"+this.d$type.prototype.tp$name+"' needs a type not a '"+Sk.abstr.typeName(t)+"' as arg 2");if(!t.$isSubType(this.d$type))throw new Sk.builtin.TypeError("descriptor '"+this.d$name+"' requires a '"+this.d$type.prototype.tp$name+"' object but received a '"+Sk.abstr.typeName(t)+"' object");return new Sk.builtin.sk_method(this.d$def,t)}},getsets:e}),[Sk.builtin.method_descriptor,Sk.builtin.getset_descriptor,Sk.builtin.wrapper_descriptor,Sk.builtin.method_wrapper,Sk.builtin.classmethod_descriptor].forEach((e=>{Sk.abstr.setUpSlots(e),Sk.abstr.setUpMethods(e),Sk.abstr.setUpGetSets(e)}))},function(e,t){Sk.builtin.sk_method=Sk.abstr.buildNativeClass("builtin_function_or_method",{constructor:function(e,t,n){this.$meth=e.$meth.bind(t),this.$doc=e.$doc,this.$self=t||null,this.$module=n?new Sk.builtin.str(n):null,this.$name=e.$name||e.$meth.name||"<native JS>",this.m$def=e,this.$textsig=e.$textsig,this.$flags=e=e.$flags||{},e.FastCall&&e.NoKwargs?this.tp$call=this.$fastCallNoKwargs:e.FastCall?this.tp$call=this.$meth:e.NoArgs?this.tp$call=this.$callNoArgs:e.OneArg?this.tp$call=this.$callOneArg:e.NamedArgs?this.tp$call=this.$callNamedArgs:void 0!==e.MinArgs?this.tp$call=this.$callMinArgs:(this.func_code=this.$meth,this.tp$call=this.$defaultCallMethod)},proto:{$fastCallNoKwargs(e,t){return Sk.abstr.checkNoKwargs(this.$name,t),this.$meth(e)},$callNoArgs(e,t){return Sk.abstr.checkNoArgs(this.$name,e,t),this.$meth()},$callOneArg(e,t){return Sk.abstr.checkOneArg(this.$name,e,t),this.$meth(e[0])},$callNamedArgs(e,t){return e=Sk.abstr.copyKeywordsToNamedArgs(this.$name,this.$flags.NamedArgs,e,t,this.$flags.Defaults),this.$meth(...e)},$callMinArgs(e,t){return Sk.abstr.checkNoKwargs(this.$name,t),Sk.abstr.checkArgsLen(this.$name,e,this.$flags.MinArgs,this.$flags.MaxArgs),this.$meth(...e)},$defaultCallMethod(e,t){return null!==this.$self?Sk.builtin.func.prototype.tp$call.call(this,[this.$self,...e],t):Sk.builtin.func.prototype.tp$call.call(this,e,t)},$memoiseFlags(){return Sk.builtin.func.prototype.$memoiseFlags.call(this)},$resolveArgs(){return Sk.builtin.func.prototype.$resolveArgs.call(this)}},flags:{sk$acceptable_as_base_class:!1},slots:{tp$getattr:Sk.generic.getAttr,$r(){return null===this.$self?new Sk.builtin.str("<built-in function "+this.$name+">"):new Sk.builtin.str("<built-in method "+this.$name+" of "+Sk.abstr.typeName(this.$self)+" object>")},tp$call(e,t){return this.tp$call(e,t)},tp$richcompare(e,t){return("Eq"===t||"NotEq"===t)&&e instanceof Sk.builtin.sk_method?(e=this.$self===e.$self&&this.m$def.$meth===e.m$def.$meth,"Eq"===t?e:!e):Sk.builtin.NotImplemented.NotImplemented$}},getsets:{__module__:{$get(){return this.$module||Sk.builtin.none.none$},$set(e){this.$module=e=e||Sk.builtin.none.none$}},__doc__:{$get(){return this.$doc?new Sk.builtin.str(this.$doc):Sk.builtin.none.none$}},__name__:{$get(){return new Sk.builtin.str(this.$name)}},__text_signature__:{$get(){return new Sk.builtin.str(this.$textsig)}},__self__:{$get(){return this.$self||Sk.sysModules.mp$lookup(this.$module)||Sk.builtin.none.none$}}}})},function(e,t){Sk.builtin.none=Sk.abstr.buildNativeClass("NoneType",{constructor:function(){return Sk.builtin.none.none$},slots:{tp$new:(e,t)=>(Sk.abstr.checkNoArgs("NoneType",e,t),Sk.builtin.none.none$),$r:()=>new Sk.builtin.str("None"),tp$as_number:!0,nb$bool:()=>!1},flags:{sk$acceptable_as_base_class:!1}}),Sk.builtin.none.none$=Object.create(Sk.builtin.none.prototype,{v:{value:null,enumerable:!0}}),Sk.builtin.NotImplemented=Sk.abstr.buildNativeClass("NotImplementedType",{constructor:function(){return Sk.builtin.NotImplemented.NotImplemented$},slots:{$r:()=>new Sk.builtin.str("NotImplemented"),tp$new:(e,t)=>(Sk.abstr.checkNoArgs("NotImplementedType",e,t),Sk.builtin.NotImplemented.NotImplemented$)},flags:{sk$acceptable_as_base_class:!1}}),Sk.builtin.NotImplemented.NotImplemented$=Object.create(Sk.builtin.NotImplemented.prototype,{v:{value:null,enumerable:!0}})},function(e,t){const n=/^(?:(.)?([<>=\^]))?([\+\-\s])?(#)?(0)?(\d+)?(,)?(?:\.(\d+))?([bcdeEfFgGnosxX%])?$/;Sk.formatting={};let i=function(e,t,n,i){if(Sk.asserts.assert("string"===typeof t),e[6]){var s=parseInt(e[6],10);i=e[2]||(e[5]?"=":i?">":"<");let r=s-(t.length+(n?n.length:0));if(0>=r)return t;switch(s=(e[1]||(e[5]?"0":" ")).repeat(r),i){case"=":if("s"===e[9])throw new Sk.builtin.ValueError("'=' alignment not allowed in string format specifier");return n+s+t;case">":return s+n+t;case"<":return n+t+s;case"^":return e=Math.floor(r/2),s.substring(0,e)+n+t+s.substring(e)}}return n+t},s=function(e,t){return t?"-":"+"===e[3]?"+":" "===e[3]?" ":""},r=function(e,t,n){if(Sk.asserts.assert(t instanceof Sk.builtin.int_||t instanceof Sk.builtin.lng),e[8])throw new Sk.builtin.ValueError("Precision not allowed in integer format");let r=t.str$(n,!1);return t=t.nb$isnegative(),t=s(e,t),e[4]&&(16===n?t+="0x":8===n?t+="0o":2===n&&(t+="0b")),"X"===e[9]&&(r=r.toUpperCase()),"n"===e[9]?r=(+r).toLocaleString():e[7]&&((n=r.toString().split("."))[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),r=n.join(".")),i(e,r,t,!0)},o=function(e,t,o){if(!t)return e.str$(10,!0);if(!(t=t.match(n)))throw new Sk.builtin.ValueError("Invalid format specifier");var a=t[9];if(a||(a=o?"g":"d"),-1==(o?"fFeEgG%":"bcdoxXnfFeEgG%").indexOf(a))throw new Sk.builtin.ValueError("Unknown format code '"+t[9]+"' for object of type '"+Sk.abstr.typeName(e)+"'");switch(a){case"d":case"n":return r(t,e,10);case"x":case"X":return r(t,e,16);case"o":return r(t,e,8);case"b":return r(t,e,2);case"c":if(t[3])throw new Sk.builtin.ValueError("Sign not allowed with integer format specifier 'c'");if(t[4])throw new Sk.builtin.ValueError("Alternate form not allowed with integer format specifier 'c'");if(t[7])throw new Sk.builtin.ValueError("Cannot specify ',' with 'c'");if(t[8])throw new Sk.builtin.ValueError("Cannot specify ',' with 'c'");return i(t,String.fromCodePoint(Sk.builtin.asnum$(e)),"",!0);case"f":case"F":case"e":case"E":case"g":case"G":{if(t[4])throw new Sk.builtin.ValueError("Alternate form (#) not allowed in float format specifier");if("string"===typeof(o=Sk.builtin.asnum$(e))&&(o=Number(o)),1/0===o)return i(t,"inf","",!0);if(-1/0===o)return i(t,"inf","-",!0);if(isNaN(o))return i(t,"nan","",!0);e=!1,0>o&&(o=-o,e=!0);var l=["toExponential","toFixed","toPrecision"]["efg".indexOf(a.toLowerCase())];let n=t[8]?parseInt(t[8],10):6;if(o=o[l](n),-1!=="EFG".indexOf(a)&&(o=o.toUpperCase()),"g"===a.toLowerCase()||!t[9]){if(l=o.match(/\.(\d*[1-9])?(0+)$/)){let[,e,t]=l;o=o.slice(0,e?-t.length:-(t.length+1))}-1!=o.indexOf(".")||t[9]||(o+=".0")}return"e"===a.toLowerCase()&&(o=o.replace(/^([-+]?[0-9]*\.?[0-9]+[eE][-+]?)([0-9])?$/,"$10$2")),t[7]&&((a=o.toString().split("."))[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),o=a.join(".")),i(t,o,s(t,e),!0)}case"%":if(t[4])throw new Sk.builtin.ValueError("Alternate form (#) not allowed with format specifier '%'");return"string"===typeof(e=Sk.builtin.asnum$(e))&&(e=Number(e)),1/0===e?i(t,"inf%","",!0):-1/0===e?i(t,"inf%","-",!0):isNaN(e)?i(t,"nan%","",!0):(a=!1,0>e&&(e=-e,a=!0),o=t[8]?parseInt(t[8],10):6,e=(100*e).toFixed(o)+"%",i(t,e,s(t,a),!0));default:throw new Sk.builtin.ValueError("Unknown format code '"+t[9]+"'")}};Sk.formatting.mkNumber__format__=e=>function(t){if(!Sk.builtin.checkString(t))throw new Sk.builtin.TypeError("format() argument 2 must be str, not "+Sk.abstr.typeName(t));return new Sk.builtin.str(o(this,t.$jsstr(),e))},Sk.formatting.format=function(e,t){t=t||[];const n={};for(let s=0;s<t.length;s+=2)n[t[s]]=t[s+1];for(let s in e)n[s]=e[s];let i=0;return e=this.v.replace(/{(((?:\d+)|(?:\w+))?((?:\.(\w+))|(?:\[((?:\d+)|(?:\w+))\])?))?(?:!([rs]))?(?::([^}]*))?}/g,(function(e,t,s,r,o,a,l,c,u,h){let d;if(void 0!==a&&""!==a?(d=(e=n[s]).constructor===Array?e[a]:/^\d+$/.test(a)?Sk.abstr.objectGetItem(e,new Sk.builtin.int_(parseInt(a,10)),!1):Sk.abstr.objectGetItem(e,new Sk.builtin.str(a),!1),i++):void 0!==o&&""!==o?d=Sk.abstr.gattr(n[s||i++],new Sk.builtin.str(o)):void 0!==s&&""!==s?d=n[s]:void 0===t||""===t?(d=n[i],i++):(t instanceof Sk.builtin.int_||t instanceof Sk.builtin.float_||t instanceof Sk.builtin.lng||/^\d+$/.test(t))&&(d=n[t],i++),"s"===l)d=new Sk.builtin.str(d);else if("r"===l)d=Sk.builtin.repr(d);else if(""!==l&&void 0!==l)throw new Sk.builtin.ValueError("Unknown conversion specifier "+l);return Sk.abstr.objectFormat(d,new Sk.builtin.str(c)).$jsstr()})),new Sk.builtin.str(e)},Sk.formatting.formatString=function(e){if(!Sk.builtin.checkString(e))throw new Sk.builtin.TypeError("format() argument 2 must be str, not "+Sk.abstr.typeName(e));if((e=e.$jsstr().match(n))[9]&&"s"!==e[9])throw new Sk.builtin.ValueError("Unknown format code '"+e[9]+"' for object of type 'str'");if(e[3])throw new Sk.builtin.ValueError("Sign not allowed in string format specifier");if(e[4])throw new Sk.builtin.ValueError("Alternate form (#) not allowed with string format specifier");if(e[7])throw new Sk.builtin.ValueError("Cannot specify ',' with 's'");let t=this.v;return e[8]&&(t=t.substring(0,e[8])),new Sk.builtin.str(i(e,t,"",!1))}},function(e,t){function n(e){let t;const n=[];for(let i=0;i<e.length;i++)t=e.charAt(i),d.test(t)?n.push(t):"\\000"===t?n.push("\\000"):n.push("\\"+t);return n.join("")}function i(e,t,n){if(null!==(t=Sk.builtin.checkNone(t)?null:e.get$tgt(t))&&!t.length)throw new Sk.builtin.ValueError("empty separator");e=e.v;var i=0;if(null===t){var s=/[\s\xa0]+/g;i=e.length,i-=(e=e.replace(g,"")).length}else s=t.replace(f,"\\$1"),s=new RegExp(s,"g");const r=[];let o,a=0,l=0;for(n=0>n?1/0:n;null!=(o=s.exec(e))&&l<n&&o.index!==s.lastIndex;)r.push(a+i),r.push(o.index+i),a=s.lastIndex,l+=1;return(null!==t||e.length-a)&&(r.push(a+i),r.push(e.length+i)),r}function s(e,t){return function(i){if(void 0===i||Sk.builtin.checkNone(i))i=e;else{if(!(i instanceof Sk.builtin.str))throw new Sk.builtin.TypeError("strip arg must be None or str");i=n(i.v),i=new RegExp(t(i),"g")}return new Sk.builtin.str(this.v.replace(i,""))}}function r(e){return function(t){t=this.get$tgt(t);const n=this.v;let i;if(e){if(i=n.lastIndexOf(t),0>i)return new Sk.builtin.tuple([new Sk.builtin.str(""),new Sk.builtin.str(""),new Sk.builtin.str(n)])}else if(i=n.indexOf(t),0>i)return new Sk.builtin.tuple([new Sk.builtin.str(n),new Sk.builtin.str(""),new Sk.builtin.str("")]);return new Sk.builtin.tuple([new Sk.builtin.str(n.substring(0,i)),new Sk.builtin.str(t),new Sk.builtin.str(n.substring(i+t.length))])}}function o(e,t){return function(n,i){if(n=Sk.misceval.asIndexSized(n,Sk.builtin.OverflowError),void 0===i)i=" ";else{if(!(i instanceof Sk.builtin.str&&1===i.sq$length()))throw new Sk.builtin.TypeError("the fill character must be a str of length 1");i=i.v}const s=this.sq$length();let r;return s>=n?new Sk.builtin.str(this.v):t?(r=i.repeat(Math.floor((n-s)/2)),r=r+this.v+r,(n-s)%2&&(r+=i),new Sk.builtin.str(r)):(r=i.repeat(n-s),new Sk.builtin.str(e?r+this.v:this.v+r))}}function a(e,t,n){if(({start:t,end:n}=Sk.builtin.slice.startEnd$wrt(e,t,n)),e.$hasAstralCodePoints()){const i=e.codepoints[t];t=void 0===i?t+e.v.length-e.codepoints.length:i,n=void 0===(n=e.codepoints[n])?e.v.length:n}return{start:t,end:n}}function l(e){return function(t,n,i){if(t=this.get$tgt(t),({start:n,end:i}=a(this,n,i)),i<n)return-1;if(i-=t.length,t=(t=e?this.v.lastIndexOf(t,i):this.v.indexOf(t,n))>=n&&t<=i?t:-1,this.codepoints){i=this.sq$length(),n=-1;for(let e=0;e<i;e++)t==this.codepoints[e]&&(n=e)}else n=t;return n}}function c(e,t){return function(n,i,s){if(!(n instanceof Sk.builtin.str||n instanceof Sk.builtin.tuple))throw new Sk.builtin.TypeError(e+" first arg must be str or a tuple of str, not "+Sk.abstr.typeName(n));if(({start:i,end:s}=a(this,i,s)),i>s)return Sk.builtin.bool.false$;if(i=this.v.slice(i,s),n instanceof Sk.builtin.tuple){for(let s=Sk.abstr.iter(n),r=s.tp$iternext();void 0!==r;r=s.tp$iternext()){if(!(r instanceof Sk.builtin.str))throw new Sk.builtin.TypeError("tuple for "+e+" must only contain str, not "+Sk.abstr.typeName(r));if(t(i,r.v))return Sk.builtin.bool.true$}return Sk.builtin.bool.false$}return new Sk.builtin.bool(t(i,n.v))}}var u=/^[0-9!#_]/,h=Object.create(null);Sk.builtin.str=Sk.abstr.buildNativeClass("str",{constructor:function(e){if(Sk.asserts.assert(this instanceof Sk.builtin.str,"bad call to str - use 'new'"),"string"!==typeof e)if(void 0===e)e="";else if(null===e)e="None";else{if(void 0!==e.tp$str)return e.tp$str();if("number"!==typeof e)throw new Sk.builtin.TypeError("could not convert object of type '"+Sk.abstr.typeName(e)+"' to str");e=Number.isFinite(e)?String(e):String(e).replace("Infinity","inf").replace("NaN","nan")}var t=h[e];if(void 0!==t)return t;h[e]=this,t=void 0===m[e]?e:e+"_$rw$",this.$mangled=t,this.$savedKeyHash=e.replace(u,"!$&"),this.v=e},slots:{tp$getattr:Sk.generic.getAttr,tp$as_sequence_or_mapping:!0,tp$doc:"str(object='') -> str\nstr(bytes_or_buffer[, encoding[, errors]]) -> str\n\nCreate a new string object from the given object. If encoding or\nerrors is specified, then the object must expose a data buffer\nthat will be decoded using the given encoding and error handler.\nOtherwise, returns the result of object.__str__() (if defined)\nor repr(object).\nencoding defaults to sys.getdefaultencoding().\nerrors defaults to 'strict'.",tp$new(e,t){if(t=t||[],this!==Sk.builtin.str.prototype)return this.$subtype_new(e,t);if(1>=e.length&&!t.length)return new Sk.builtin.str(e[0]);if(Sk.__future__.python3){const[n,i,s]=Sk.abstr.copyKeywordsToNamedArgs("str",["object","encoding","errors"],e,t);if(void 0===n||void 0===i&&void 0===s)return new Sk.builtin.str(n);if(Sk.builtin.bytes.check$encodeArgs("str",i,s),!Sk.builtin.checkBytes(n))throw new Sk.builtin.TypeError("decoding to str: need a bytes-like object, "+Sk.abstr.typeName(n)+" found");return Sk.builtin.bytes.$decode.call(n,i,s)}throw new Sk.builtin.TypeError("str takes at most one argument ("+(e.length+t.length)+" given)")},$r(){let e="'";-1!==this.v.indexOf("'")&&-1===this.v.indexOf('"')&&(e='"');const t=this.v.length;let n=e;for(let r=0;r<t;r++){var i=this.v.charAt(r),s=this.v.charCodeAt(r);i===e||"\\"===i?n+="\\"+i:"\t"===i?n+="\\t":"\n"===i?n+="\\n":"\r"===i?n+="\\r":(255<s&&55296>s||57344<=s)&&!Sk.__future__.python3?n+="\\u"+("000"+s.toString(16)).slice(-4):55296<=s&&!Sk.__future__.python3?(i=this.v.codePointAt(r),r++,s="0000000"+(i=i.toString(16)).toString(16),n=4<i.length?n+"\\U"+s.slice(-8):n+"\\u"+s.slice(-4)):255<s&&!Sk.__future__.python3?n+="\\ufffd":" ">i||127<=s&&!Sk.__future__.python3?(2>(i=i.charCodeAt(0).toString(16)).length&&(i="0"+i),n+="\\x"+i):n+=i}return new Sk.builtin.str(n+e)},tp$str(){return this.constructor===Sk.builtin.str?this:new Sk.builtin.str(this.v)},tp$iter(){return new p(this)},tp$richcompare(e,t){if(!(e instanceof Sk.builtin.str))return Sk.builtin.NotImplemented.NotImplemented$;switch(t){case"Lt":return this.v<e.v;case"LtE":return this.v<=e.v;case"Eq":return this.v===e.v;case"NotEq":return this.v!==e.v;case"Gt":return this.v>e.v;case"GtE":return this.v>=e.v}},mp$subscript(e){let t;if(Sk.misceval.isIndex(e)){if(e=Sk.misceval.asIndexSized(e,Sk.builtin.OverflowError),t=this.sq$length(),0>e&&(e+=t),0>e||e>=t)throw new Sk.builtin.IndexError("string index out of range");return this.codepoints?new Sk.builtin.str(this.v.substring(this.codepoints[e],this.codepoints[e+1])):new Sk.builtin.str(this.v.charAt(e))}if(e instanceof Sk.builtin.slice){let n="";return t=this.sq$length(),this.codepoints?e.sssiter$(t,(e=>{n+=this.v.substring(this.codepoints[e],this.codepoints[e+1])})):e.sssiter$(t,(e=>{n+=this.v.charAt(e)})),new Sk.builtin.str(n)}throw new Sk.builtin.TypeError("string indices must be integers, not "+Sk.abstr.typeName(e))},sq$length(){return this.$hasAstralCodePoints()?this.codepoints.length:this.v.length},sq$concat(e){if(!(e instanceof Sk.builtin.str))throw new Sk.builtin.TypeError("cannot concatenate 'str' and '"+Sk.abstr.typeName(e)+"' objects");return new Sk.builtin.str(this.v+e.v)},sq$repeat(e){if(!Sk.misceval.isIndex(e))throw new Sk.builtin.TypeError("can't multiply sequence by non-int of type '"+Sk.abstr.typeName(e)+"'");if((e=Sk.misceval.asIndexSized(e,Sk.builtin.OverflowError))*this.v.length>Number.MAX_SAFE_INTEGER)throw new Sk.builtin.OverflowError;let t="";for(let n=0;n<e;n++)t+=this.v;return new Sk.builtin.str(t)},sq$contains(e){if(!(e instanceof Sk.builtin.str))throw new Sk.builtin.TypeError("'in <string>' requires string as left operand not "+Sk.abstr.typeName(e));return-1!==this.v.indexOf(e.v)},tp$as_number:!0,nb$remainder:function(e){const t=this.sk$builtinBase;e.constructor===Sk.builtin.tuple||e instanceof Sk.builtin.dict||e instanceof Sk.builtin.mappingproxy||(e=new Sk.builtin.tuple([e]));var n=0,i=this.$jsstr().replace(/%(\([a-zA-Z0-9]+\))?([#0 +\-]+)?(\*|[0-9]+)?(\.(\*|[0-9]+))?[hlL]?([diouxXeEfFgGcrsb%])/g,(function(i,s,r,o,a,l,c){var u,h,d,f,g;o=Sk.builtin.asnum$(o),a=Sk.builtin.asnum$(a),void 0!==s&&""!==s||"%"==c||(u=n++),""===a&&(a=void 0);var p=h=d=f=g=!1;if(r&&(-1!==r.indexOf("-")?f=!0:-1!==r.indexOf("0")&&(g=!0),-1!==r.indexOf("+")?h=!0:-1!==r.indexOf(" ")&&(d=!0),p=-1!==r.indexOf("#")),a&&(a=parseInt(a.substr(1),10)),r=function(e,t){var n;t=Sk.builtin.asnum$(t);var i=!1;if("number"===typeof e){0>e&&(e=-e,i=!0);var s=e.toString(t)}else e instanceof Sk.builtin.float_?(2<(s=e.str$(t,!1)).length&&".0"===s.substr(-2)&&(s=s.substr(0,s.length-2)),i=e.nb$isnegative()):(e instanceof Sk.builtin.int_||e instanceof Sk.builtin.lng)&&(s=e.str$(t,!1),i=e.nb$isnegative());if(Sk.asserts.assert(void 0!==s,"unhandled number format"),e=!1,a)for(n=s.length;n<a;++n)s="0"+s,e=!0;return n="",i?n="-":h?n="+"+n:d&&(n=" "+n),p&&(16===t?n+="0x":8!==t||e||"0"===s||(n+="0")),[n,s]},i=function(e){var t=e[0];if(e=e[1],o){o=parseInt(o,10);var n=e.length+t.length;if(g)for(;n<o;++n)e="0"+e;else if(f){for(;n<o;++n)e+=" ";Sk.__future__.python3&&(e+=t,t="")}else for(;n<o;++n)t=" "+t}return t+e},e.constructor===Sk.builtin.tuple)s=e.v[u];else if(void 0!==e.mp$subscript&&void 0!==s)s=s.substring(1,s.length-1),s=e.mp$subscript(new t(s));else{if(e.constructor!==Sk.builtin.dict&&e.constructor!==Sk.builtin.list)throw new Sk.builtin.AttributeError(e.tp$name+" instance has no attribute 'mp$subscript'");s=e}if("d"===c||"i"===c){var m=r(s,10);if(void 0===m[1])throw new Sk.builtin.TypeError("%"+c+" format: a number is required, not "+Sk.abstr.typeName(s));return c=m[1],m[1]=-1!==c.indexOf(".")?parseInt(c,10).toString():c,i(m)}if("o"===c)return i(r(s,8));if("x"===c)return i(r(s,16));if("X"===c)return i(r(s,16)).toUpperCase();if("f"===c||"F"===c||"e"===c||"E"===c||"g"===c||"G"===c)return"string"===typeof(m=Sk.builtin.asnum$(s))&&(m=Number(m)),1/0===m?"inf":-1/0===m?"-inf":isNaN(m)?"nan":(u=["toExponential","toFixed","toPrecision"]["efg".indexOf(c.toLowerCase())],void 0!==a&&""!==a||("e"===c||"E"===c?a=6:"f"!==c&&"F"!==c||(a=Sk.__future__.python3?6:7)),u=m[u](a),Sk.builtin.checkFloat(s)&&0===m&&-1/0===1/m&&(u="-"+u),Sk.__future__.python3&&(7<=u.length&&"0.0000"==u.slice(0,6)&&(u=parseFloat(u).toExponential()),"-"==u.charAt(u.length-2)&&(u=u.slice(0,u.length-1)+"0"+u.charAt(u.length-1))),-1!=="EFG".indexOf(c)&&(u=u.toUpperCase()),i(["",u]));if("c"===c){if("number"===typeof s)return String.fromCharCode(s);if(s instanceof Sk.builtin.int_||s instanceof Sk.builtin.float_)return String.fromCharCode(s.v);if(s instanceof Sk.builtin.lng)return String.fromCharCode(s.str$(10,!1)[0]);if(s.constructor===Sk.builtin.str)return s.v.substr(0,1);throw new Sk.builtin.TypeError("an integer is required")}if("r"===c)return c=Sk.builtin.repr(s),a?c.v.substr(0,a):c.v;if("s"===c&&t===Sk.builtin.str)return c=(c=new Sk.builtin.str(s)).$jsstr(),a?c.substr(0,a):(o&&(c=i([" ",c])),c);if("b"===c||"s"===c){if(t===Sk.builtin.str)throw new Sk.builtin.ValueError("unsupported format character 'b'");if(!(s instanceof Sk.builtin.bytes)&&void 0===(m=Sk.abstr.lookupSpecial(s,Sk.builtin.str.$bytes)))throw new Sk.builtin.TypeError("%b requires a bytes-like object, or an object that implements __bytes__, not '"+Sk.abstr.typeName(s)+"'");return void 0!==m&&(s=new Sk.builtin.bytes(s)),c=s.$jsstr(),a?c.substr(0,a):(o&&(c=i([" ",c])),c)}return"%"===c?"%":void 0}));return new t(i)}},proto:{toString(){return this.v},$subtype_new(e,t){const n=new this.constructor;return e=Sk.builtin.str.prototype.tp$new(e,t),n.$mangled=e.$mangled,n.$savedKeyHash=e.$savedKeyHash,n.v=e.v,n},$jsstr(){return this.v},$hasAstralCodePoints(){if(null===this.codepoints)return!1;if(void 0!==this.codepoints)return!0;for(var e=0;e<this.v.length;e++){let t=this.v.charCodeAt(e);if(55296<=t&&57344>t){for(this.codepoints=[],e=0;e<this.v.length;e++)this.codepoints.push(e),t=this.v.charCodeAt(e),55296<=t&&56320>t&&e++;return!0}}return this.codepoints=null,!1},sk$asarray(){const e=[];if(this.$hasAstralCodePoints()){var t=this.codepoints;for(let n=0;n<t.length;n++)e.push(new Sk.builtin.str(this.v.substring(t[n],t[n+1])))}else for(t=0;t<this.v.length;t++)e.push(new Sk.builtin.str(this.v[t]));return e},find$left:l(!1),find$right:l(!0),get$tgt(e){if(e instanceof Sk.builtin.str)return e.v;throw new Sk.builtin.TypeError("a str instance is required not '"+Sk.abstr.typeName(e)+"'")}},methods:{encode:{$meth:function(e,t){return({encoding:e,errors:t}=Sk.builtin.bytes.check$encodeArgs("encode",e,t)),e=Sk.builtin.bytes.str$encode(this,e,t),Sk.__future__.python3?e:new Sk.builtin.str(e.$jsstr())},$flags:{NamedArgs:["encoding","errors"]},$textsig:"($self, /, encoding='utf-8', errors='strict')",$doc:"Encode the string using the codec registered for encoding.\n\n  encoding\n    The encoding in which to encode the string.\n  errors\n    The error handling scheme to use for encoding errors.\n    The default is 'strict' meaning that encoding errors raise a\n    UnicodeEncodeError.  Other possible values are 'ignore', 'replace' and\n    'xmlcharrefreplace' as well as any other name registered with\n    codecs.register_error that can handle UnicodeEncodeErrors."},replace:{$meth(e,t,i){if(e=this.get$tgt(e),t=this.get$tgt(t),i=void 0===i?-1:Sk.misceval.asIndexSized(i,Sk.builtin.OverflowError),e=new RegExp(n(e),"g"),0>i)return new Sk.builtin.str(this.v.replace(e,t));let s=0;return e=this.v.replace(e,(e=>s++<i?t:e)),new Sk.builtin.str(e)},$flags:{MinArgs:2,MaxArgs:3},$textsig:"($self, old, new, count=-1, /)",$doc:"Return a copy with all occurrences of substring old replaced by new.\n\n  count\n    Maximum number of occurrences to replace.\n    -1 (the default value) means replace all occurrences.\n\nIf the optional argument count is given, only the first count occurrences are\nreplaced."},split:{$meth:function(e,t){e=i(this,e,t=Sk.misceval.asIndexSized(t,Sk.builtin.OverflowError)),t=[];for(let n=0;n<e.length;n++)t.push(new Sk.builtin.str(this.v.substring(e[n],e[++n])));return new Sk.builtin.list(t)},$flags:{NamedArgs:["sep","maxsplit"],Defaults:[Sk.builtin.none.none$,-1]},$textsig:"($self, /, sep=None, maxsplit=-1)",$doc:"Return a list of the words in the string, using sep as the delimiter string.\n\n  sep\n    The delimiter according which to split the string.\n    None (the default value) means split according to any whitespace,\n    and discard empty strings from the result.\n  maxsplit\n    Maximum number of splits to do.\n    -1 (the default value) means no limit."},rsplit:{$meth:function(e,t){t=Sk.misceval.asIndexSized(t,Sk.builtin.OverflowError),e=i(this,e,-1);var n=0>t?0:2*(e.length/2-t);for(t=[],0>=n?n=0:t.push(new Sk.builtin.str(this.v.slice(0,e[n-1])));n<e.length;n++)t.push(new Sk.builtin.str(this.v.substring(e[n],e[++n])));return new Sk.builtin.list(t)},$flags:{NamedArgs:["sep","maxsplit"],Defaults:[Sk.builtin.none.none$,-1]},$textsig:"($self, /, sep=None, maxsplit=-1)",$doc:"Return a list of the words in the string, using sep as the delimiter string.\n\n  sep\n    The delimiter according which to split the string.\n    None (the default value) means split according to any whitespace,\n    and discard empty strings from the result.\n  maxsplit\n    Maximum number of splits to do.\n    -1 (the default value) means no limit.\n\nSplits are done starting at the end of the string and working to the front."},join:{$meth(e){const t=[];return Sk.misceval.chain(Sk.misceval.iterFor(Sk.abstr.iter(e),(e=>{if(!(e instanceof Sk.builtin.str))throw new Sk.builtin.TypeError("sequence item "+t.length+": expected str, "+Sk.abstr.typeName(e)+" found");t.push(e.v)})),(()=>new Sk.builtin.str(t.join(this.v))))},$flags:{OneArg:!0},$textsig:"($self, iterable, /)",$doc:"Concatenate any number of strings.\n\nThe string whose method is called is inserted in between each given string.\nThe result is returned as a new string.\n\nExample: '.'.join(['ab', 'pq', 'rs']) -> 'ab.pq.rs'"},capitalize:{$meth:function(){return new Sk.builtin.str(this.v.charAt(0).toUpperCase()+this.v.slice(1).toLowerCase())},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return a capitalized version of the string.\n\nMore specifically, make the first character have upper case and the rest lower\ncase."},title:{$meth:function(){const e=this.v.replace(/[a-z][a-z]*/gi,(e=>e[0].toUpperCase()+e.substr(1).toLowerCase()));return new Sk.builtin.str(e)},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return a version of the string where each word is titlecased.\n\nMore specifically, words start with uppercased characters and all remaining\ncased characters have lower case."},center:{$meth:o(!1,!0),$flags:{MinArgs:1,MaxArgs:2},$textsig:"($self, width, fillchar=' ', /)",$doc:"Return a centered string of length width.\n\nPadding is done using the specified fill character (default is a space)."},count:{$meth:function(e,t,n){return e=this.get$tgt(e),({start:t,end:n}=a(this,t,n)),n<t?new Sk.builtin.int_(0):(e=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),e=new RegExp(e,"g"),(t=this.v.slice(t,n).match(e))?new Sk.builtin.int_(t.length):new Sk.builtin.int_(0))},$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"S.count(sub[, start[, end]]) -> int\n\nReturn the number of non-overlapping occurrences of substring sub in\nstring S[start:end].  Optional arguments start and end are\ninterpreted as in slice notation."},expandtabs:{$meth:function(e){if(!Sk.builtin.checkInt(e))throw new Sk.builtin.TypeError("an integer is required, got type"+Sk.abstr.typeName(e));e=Sk.builtin.asnum$(e);const t=Array(e+1).join(" "),n=this.v.replace(/([^\r\n\t]*)\t/g,((n,i)=>i+t.slice(i.length%e)));return new Sk.builtin.str(n)},$flags:{NamedArgs:["tabsize"],Defaults:[8]},$textsig:"($self, /, tabsize=8)",$doc:"Return a copy where all tab characters are expanded using spaces.\n\nIf tabsize is not given, a tab size of 8 characters is assumed."},find:{$meth:function(e,t,n){return new Sk.builtin.int_(this.find$left(e,t,n))},$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"S.find(sub[, start[, end]]) -> int\n\nReturn the lowest index in S where substring sub is found,\nsuch that sub is contained within S[start:end].  Optional\narguments start and end are interpreted as in slice notation.\n\nReturn -1 on failure."},partition:{$meth:r(!1),$flags:{OneArg:!0},$textsig:"($self, sep, /)",$doc:"Partition the string into three parts using the given separator.\n\nThis will search for the separator in the string.  If the separator is found,\nreturns a 3-tuple containing the part before the separator, the separator\nitself, and the part after it.\n\nIf the separator is not found, returns a 3-tuple containing the original string\nand two empty strings."},index:{$meth:function(e,t,n){if(-1===(e=this.find$left(e,t,n)))throw new Sk.builtin.ValueError("substring not found");return new Sk.builtin.int_(e)},$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"S.index(sub[, start[, end]]) -> int\n\nReturn the lowest index in S where substring sub is found, \nsuch that sub is contained within S[start:end].  Optional\narguments start and end are interpreted as in slice notation.\n\nRaises ValueError when the substring is not found."},ljust:{$meth:o(!1,!1),$flags:{MinArgs:1,MaxArgs:2},$textsig:"($self, width, fillchar=' ', /)",$doc:"Return a left-justified string of length width.\n\nPadding is done using the specified fill character (default is a space)."},lower:{$meth(){return new Sk.builtin.str(this.v.toLowerCase())},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return a copy of the string converted to lowercase."},lstrip:{$meth:s(/^\s+/g,(e=>"^["+e+"]+")),$flags:{MinArgs:0,MaxArgs:1},$textsig:"($self, chars=None, /)",$doc:"Return a copy of the string with leading whitespace removed.\n\nIf chars is given and not None, remove characters in chars instead."},rfind:{$meth(e,t,n){return new Sk.builtin.int_(this.find$right(e,t,n))},$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"S.rfind(sub[, start[, end]]) -> int\n\nReturn the highest index in S where substring sub is found,\nsuch that sub is contained within S[start:end].  Optional\narguments start and end are interpreted as in slice notation.\n\nReturn -1 on failure."},rindex:{$meth:function(e,t,n){if(-1===(e=this.find$right(e,t,n)))throw new Sk.builtin.ValueError("substring not found");return new Sk.builtin.int_(e)},$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"S.rindex(sub[, start[, end]]) -> int\n\nReturn the highest index in S where substring sub is found,\nsuch that sub is contained within S[start:end].  Optional\narguments start and end are interpreted as in slice notation.\n\nRaises ValueError when the substring is not found."},rjust:{$meth:o(!0,!1),$flags:{MinArgs:1,MaxArgs:2},$textsig:"($self, width, fillchar=' ', /)",$doc:"Return a right-justified string of length width.\n\nPadding is done using the specified fill character (default is a space)."},rstrip:{$meth:s(/\s+$/g,(e=>"["+e+"]+$")),$flags:{MinArgs:0,MaxArgs:1},$textsig:"($self, chars=None, /)",$doc:"Return a copy of the string with trailing whitespace removed.\n\nIf chars is given and not None, remove characters in chars instead."},rpartition:{$meth:r(!0),$flags:{OneArg:!0},$textsig:"($self, sep, /)",$doc:"Partition the string into three parts using the given separator.\n\nThis will search for the separator in the string, starting at the end. If\nthe separator is found, returns a 3-tuple containing the part before the\nseparator, the separator itself, and the part after it.\n\nIf the separator is not found, returns a 3-tuple containing two empty strings\nand the original string."},splitlines:{$meth:function(e){e=Sk.misceval.isTrue(e);const t=this.v,n=[],i=t.length;var s=0;for(let o=0;o<i;o++){var r=t.charAt(o);"\n"===t.charAt(o+1)&&"\r"===r?(r=o+2,s=t.slice(s,r),e||(s=s.replace(/(\r|\n)/g,"")),n.push(new Sk.builtin.str(s)),s=r):("\n"===r&&"\r"!==t.charAt(o-1)||"\r"===r)&&(r=o+1,s=t.slice(s,r),e||(s=s.replace(/(\r|\n)/g,"")),n.push(new Sk.builtin.str(s)),s=r)}return s<i&&(s=t.slice(s,i),e||(s=s.replace(/(\r|\n)/g,"")),n.push(new Sk.builtin.str(s))),new Sk.builtin.list(n)},$flags:{NamedArgs:["keepends"],Defaults:[!1]},$textsig:"($self, /, keepends=False)",$doc:"Return a list of the lines in the string, breaking at line boundaries.\n\nLine breaks are not included in the resulting list unless keepends is given and\ntrue."},strip:{$meth:s(/^\s+|\s+$/g,(e=>"^["+e+"]+|["+e+"]+$")),$flags:{MinArgs:0,MaxArgs:1},$textsig:"($self, chars=None, /)",$doc:"Return a copy of the string with leading and trailing whitespace remove.\n\nIf chars is given and not None, remove characters in chars instead."},swapcase:{$meth(){const e=this.v.replace(/[a-z]/gi,(e=>{const t=e.toLowerCase();return t===e?e.toUpperCase():t}));return new Sk.builtin.str(e)},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Convert uppercase characters to lowercase and lowercase characters to uppercase."},upper:{$meth(){return new Sk.builtin.str(this.v.toUpperCase())},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return a copy of the string converted to uppercase."},startswith:{$meth:c("startswith",((e,t)=>0===e.indexOf(t))),$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"S.startswith(prefix[, start[, end]]) -> bool\n\nReturn True if S starts with the specified prefix, False otherwise.\nWith optional start, test S beginning at that position.\nWith optional end, stop comparing S at that position.\nprefix can also be a tuple of strings to try."},endswith:{$meth:c("endswith",((e,t)=>-1!==e.indexOf(t,e.length-t.length))),$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"S.endswith(suffix[, start[, end]]) -> bool\n\nReturn True if S ends with the specified suffix, False otherwise.\nWith optional start, test S beginning at that position.\nWith optional end, stop comparing S at that position.\nsuffix can also be a tuple of strings to try."},isascii:{$meth(){return new Sk.builtin.bool(/^[\x00-\x7F]*$/.test(this.v))},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return True if all characters in the string are ASCII, False otherwise.\n\nASCII characters have code points in the range U+0000-U+007F.\nEmpty string is ASCII too."},islower:{$meth:function(){return new Sk.builtin.bool(this.v.length&&/[a-z]/.test(this.v)&&!/[A-Z]/.test(this.v))},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return True if the string is a lowercase string, False otherwise.\n\nA string is lowercase if all cased characters in the string are lowercase and\nthere is at least one cased character in the string."},isupper:{$meth:function(){return new Sk.builtin.bool(this.v.length&&!/[a-z]/.test(this.v)&&/[A-Z]/.test(this.v))},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return True if the string is an uppercase string, False otherwise.\n\nA string is uppercase if all cased characters in the string are uppercase and\nthere is at least one cased character in the string."},istitle:{$meth:function(){const e=this.v;let t,n=!1,i=!1;for(let s=0;s<e.length;s++)if(t=e.charAt(s),!/[a-z]/.test(t)&&/[A-Z]/.test(t)){if(i)return Sk.builtin.bool.false$;n=i=!0}else if(/[a-z]/.test(t)&&!/[A-Z]/.test(t)){if(!i)return Sk.builtin.bool.false$;n=!0}else i=!1;return new Sk.builtin.bool(n)},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return True if the string is a title-cased string, False otherwise.\n\nIn a title-cased string, upper- and title-case characters may only\nfollow uncased characters and lowercase characters only cased ones."},isspace:{$meth:function(){return new Sk.builtin.bool(/^\s+$/.test(this.v))},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return True if the string is a whitespace string, False otherwise.\n\nA string is whitespace if all characters in the string are whitespace and there\nis at least one character in the string."},isdigit:{$meth:function(){return new Sk.builtin.bool(/^\d+$/.test(this.v))},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return True if the string is a digit string, False otherwise.\n\nA string is a digit string if all characters in the string are digits and there\nis at least one character in the string."},isnumeric:{$meth:function(){return new Sk.builtin.bool(this.v.length&&!/[^0-9]/.test(this.v))},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return True if the string is a numeric string, False otherwise.\n\nA string is numeric if all characters in the string are numeric and there is at\nleast one character in the string."},isalpha:{$meth:function(){return new Sk.builtin.bool(this.v.length&&!/[^a-zA-Z]/.test(this.v))},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return True if the string is an alphabetic string, False otherwise.\n\nA string is alphabetic if all characters in the string are alphabetic and there\nis at least one character in the string."},isalnum:{$meth:function(){return new Sk.builtin.bool(this.v.length&&!/[^a-zA-Z0-9]/.test(this.v))},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return True if the string is an alpha-numeric string, False otherwise.\n\nA string is alpha-numeric if all characters in the string are alpha-numeric and\nthere is at least one character in the string."},zfill:{$meth:function(e){e=Sk.misceval.asIndexSized(e,Sk.builtin.OverflowError);let t="";e-=this.v.length;const n="+"===this.v[0]||"-"===this.v[0]?1:0;for(let i=0;i<e;i++)t+="0";return new Sk.builtin.str(this.v.substr(0,n)+t+this.v.substr(n))},$flags:{OneArg:!0},$textsig:"($self, width, /)",$doc:"Pad a numeric string with zeros on the left, to fill a field of the given width.\n\nThe string is never truncated."},format:{$meth:Sk.formatting.format,$flags:{FastCall:!0},$textsig:null,$doc:"S.format(*args, **kwargs) -> str\n\nReturn a formatted version of S, using substitutions from args and kwargs.\nThe substitutions are identified by braces ('{' and '}')."},__format__:{$meth:Sk.formatting.formatString,$flags:{OneArg:!0},$textsig:"($self, format_spec, /)",$doc:"Return a formatted version of the string as described by format_spec."},__getnewargs__:{$meth(){return new Sk.builtin.tuple(new Sk.builtin.str(this.v))},$flags:{NoArgs:!0},$textsig:null,$doc:null}}}),Sk.exportSymbol("Sk.builtin.str",Sk.builtin.str);var d=/^[A-Za-z0-9]+$/,f=/([.*+?=|\\\/()\[\]\{\}^$])/g,g=/^[\s\xa0]+/;Sk.builtin.str.$py2decode=new Sk.builtin.method_descriptor(Sk.builtin.str,{$name:"decode",$meth(e,t){const n=new Sk.builtin.bytes(this.v);return Sk.builtin.bytes.$decode.call(n,e,t)},$flags:{NamedArgs:["encoding","errors"]}});var p=Sk.abstr.buildIteratorClass("str_iterator",{constructor:function(e){this.$index=0,e.$hasAstralCodePoints()?(this.$seq=e.codepoints,this.tp$iternext=()=>{const t=this.$seq[this.$index];if(void 0!==t)return new Sk.builtin.str(e.v.substring(t,this.$seq[++this.$index]))}):(this.$seq=e.v,this.tp$iternext=()=>{const e=this.$seq[this.$index++];if(void 0!==e)return new Sk.builtin.str(e)})},iternext(){return this.tp$iternext()},methods:{__length_hint__:Sk.generic.iterLengthHintWithArrayMethodDef},flags:{sk$acceptable_as_base_class:!1}}),m={abstract:!0,as:!0,boolean:!0,break:!0,byte:!0,case:!0,catch:!0,char:!0,class:!0,continue:!0,const:!0,debugger:!0,default:!0,delete:!0,do:!0,double:!0,else:!0,enum:!0,export:!0,extends:!0,false:!0,final:!0,finally:!0,float:!0,for:!0,function:!0,goto:!0,if:!0,implements:!0,import:!0,in:!0,instanceof:!0,int:!0,interface:!0,is:!0,long:!0,namespace:!0,native:!0,new:!0,null:!0,package:!0,private:!0,protected:!0,public:!0,return:!0,short:!0,static:!0,super:!0,switch:!0,synchronized:!0,this:!0,throw:!0,throws:!0,transient:!0,true:!0,try:!0,typeof:!0,use:!0,var:!0,void:!0,volatile:!0,while:!0,with:!0,constructor:!0,__defineGetter__:!0,__defineSetter__:!0,apply:!0,arguments:!0,call:!0,caller:!0,eval:!0,hasOwnProperty:!0,isPrototypeOf:!0,__lookupGetter__:!0,__lookupSetter__:!0,__noSuchMethod__:!0,propertyIsEnumerable:!0,prototype:!0,toSource:!0,toLocaleString:!0,toString:!0,unwatch:!0,valueOf:!0,watch:!0,length:!0,name:!0};Sk.builtin.str.reservedWords_=m},function(e,t){Sk.builtin.func=Sk.abstr.buildNativeClass("function",{constructor:function(e,t,n,i){if(Sk.asserts.assert(this instanceof Sk.builtin.func,"builtin func should be called as a class with `new`"),this.func_code=e,this.func_globals=t||null,this.$name=e.co_name&&e.co_name.v||e.name||"<native JS>",this.$d=Sk.builtin.dict?new Sk.builtin.dict:void 0,this.$doc=e.co_docstring||Sk.builtin.none.none$,this.$module=Sk.globals&&Sk.globals.__name__||Sk.builtin.none.none$,this.$qualname=e.co_qualname&&e.co_qualname.v||this.$name,void 0!==i)for(let s in i)n[s]=i[s];this.func_closure=n,this.$memoiseFlags(),this.memoised=e.co_fastcall||null,this.tp$call=e.co_fastcall?e.bind(this):Sk.builtin.func.prototype.tp$call.bind(this)},slots:{tp$getattr:Sk.generic.getAttr,tp$descr_get(e,t){return null===e?this:new Sk.builtin.method(this,e)},$r(){return new Sk.builtin.str("<function "+this.$qualname+">")},tp$call(e,t){if(this.memoised||(this.$memoiseFlags(),this.memoised=!0),void 0===this.co_argcount&&void 0===this.co_varnames&&!this.co_kwargs&&!this.func_closure){if(t&&0!==t.length)throw new Sk.builtin.TypeError(this.$name+"() takes no keyword arguments");return this.func_code.apply(this.func_globals,e)}return e=this.$resolveArgs(e,t),this.func_closure&&e.push(this.func_closure),this.func_code.apply(this.func_globals,e)}},getsets:{__name__:{$get(){return new Sk.builtin.str(this.$name)},$set(e){if(!Sk.builtin.checkString(e))throw new Sk.builtin.TypeError("__name__ must be set to a string object");this.$name=e.$jsstr()}},__qualname__:{$get(){return new Sk.builtin.str(this.$qualname)},$set(e){if(!Sk.builtin.checkString(e))throw new Sk.builtin.TypeError("__qualname__ must be set to a string object");this.$qualname=e.$jsstr()}},__dict__:Sk.generic.getSetDict,__defaults__:{$get(){return new Sk.builtin.tuple(this.$defaults)}},__doc__:{$get(){return this.$doc},$set(e){this.$doc=e||Sk.builtin.none.none$}}},proto:{$memoiseFlags(){this.co_varnames=this.func_code.co_varnames,this.co_argcount=this.func_code.co_argcount,void 0===this.co_argcount&&this.co_varnames&&(this.co_argcount=this.co_argcount=this.co_varnames.length),this.co_kwonlyargcount=this.func_code.co_kwonlyargcount||0,this.co_varargs=this.func_code.co_varargs,this.co_kwargs=this.func_code.co_kwargs,this.$defaults=this.func_code.$defaults||[],this.$kwdefs=this.func_code.$kwdefs||[]},$resolveArgs:function(e,t){var n=this.co_argcount;void 0===n&&(n=this.co_varnames?this.co_varnames.length:e.length);var i=this.co_varnames||[],s=this.co_kwonlyargcount||0;let r,o=n+s;if(!(0!==s||this.co_kwargs||t&&0!==t.length||this.co_varargs)){if(e.length==n)return e;if(0===e.length&&this.$defaults&&this.$defaults.length===n){for(i=0;i!=this.$defaults.length;i++)e[i]=this.$defaults[i];return e}}this.co_kwargs&&(r=[]);var a=e.length;let l=e.length<=n?e:e.slice(0,n);if(this.co_varargs)e=e.length>l.length?e.slice(l.length):[],l[o]=new Sk.builtin.tuple(e);else if(a>n)throw new Sk.builtin.TypeError(this.$name+"() takes "+n+" positional argument"+(1==n?"":"s")+" but "+a+(1==a?" was ":" were ")+" given");if(t){if(this.func_code.no_kw)throw new Sk.builtin.TypeError(this.$name+"() takes no keyword arguments");for(e=0;e<t.length;e+=2){a=t[e];var c=t[e+1],u=i.indexOf(a);if(0<=u){if(void 0!==l[u])throw new Sk.builtin.TypeError(this.$name+"() got multiple values for argument '"+a+"'");l[u]=c}else{if(!r)throw new Sk.builtin.TypeError(this.$name+"() got an unexpected keyword argument '"+a+"'");r.push(new Sk.builtin.str(a),c)}}}for(e=0,a=[],c=!1,u=n-(t=this.$defaults||[]).length;e<u;e++)void 0===l[e]&&(a.push(i[e]),void 0===i[e]&&(c=!0));if(0!=a.length&&(this.co_argcount||this.co_varnames))throw new Sk.builtin.TypeError(this.$name+"() missing "+a.length+" required argument"+(1==a.length?"":"s")+(c?"":": "+a.join(", ")));for(;e<n;e++)void 0===l[e]&&(l[e]=t[e-u]);if(0<s){for(s=[],t=this.$kwdefs,e=n;e<o;e++)void 0===l[e]&&(void 0!==t[e-n]?l[e]=t[e-n]:s.push(i[e]));if(0!==s.length)throw new Sk.builtin.TypeError(this.$name+"() missing "+s.length+" required keyword argument"+(1==s.length?"":"s")+": "+s.join(", "))}if(this.func_closure&&i)for(n=l.length;n<i.length;n++)l.push(void 0);return r&&l.unshift(r),l}}})},function(e,t){Sk.builtin.asnum$=function(e){return void 0===e||null===e||"number"===typeof e?e:e instanceof Sk.builtin.int_?"number"===typeof e.v?e.v:e.v.toString():e instanceof Sk.builtin.float_?e.v:e===Sk.builtin.none.none$?null:e},Sk.exportSymbol("Sk.builtin.asnum$",Sk.builtin.asnum$),Sk.builtin.assk$=function(e){return 0===e%1?new Sk.builtin.int_(e):new Sk.builtin.float_(e)},Sk.exportSymbol("Sk.builtin.assk$",Sk.builtin.assk$),Sk.builtin.asnum$nofloat=function(e){if(void 0===e||null===e)return e;if("number"===typeof e)e=e.toString();else if(e instanceof Sk.builtin.int_)e=e.v.toString();else{if(!(e instanceof Sk.builtin.float_))return e===Sk.builtin.none.none$?null:void 0;e=e.v.toString()}if(0>e.indexOf(".")&&0>e.indexOf("e")&&0>e.indexOf("E"))return e;var t=0;if(0<=e.indexOf("e")){var n=e.substr(0,e.indexOf("e"));t=e.substr(e.indexOf("e")+1)}else 0<=e.indexOf("E")?(n=e.substr(0,e.indexOf("e")),t=e.substr(e.indexOf("E")+1)):n=e;if(t=parseInt(t,10),0>(e=n.indexOf("."))){if(0<=t){for(;0<t--;)n+="0";return n}return n.length>-t?n.substr(0,n.length+t):0}for(n=0===e?n.substr(1):e<n.length?n.substr(0,e)+n.substr(e+1):n.substr(0,e),e+=t;e>n.length;)n+="0";return 0>=e?0:n.substr(0,e)},Sk.exportSymbol("Sk.builtin.asnum$nofloat",Sk.builtin.asnum$nofloat),Sk.builtin.round=function(e,t){if(void 0===e)throw new Sk.builtin.TypeError("a float is required");if(!Sk.__future__.dunder_round){if(!Sk.builtin.checkNumber(e))throw new Sk.builtin.TypeError("a float is required");if(e.round$)return e.round$(t);throw new Sk.builtin.AttributeError(Sk.abstr.typeName(e)+" instance has no attribute '__float__'")}if(void 0!==t&&!Sk.builtin.checkNone(t)&&!Sk.misceval.isIndex(t))throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(t)+"' object cannot be interpreted as an index");if(void 0!==(e=Sk.abstr.lookupSpecial(e,Sk.builtin.str.$round)))return void 0!==t?Sk.misceval.callsimArray(e,[t]):Sk.misceval.callsimArray(e,[]);throw new Sk.builtin.TypeError("a float is required")},Sk.builtin.len=function(e){if(!e.sq$length)throw new Sk.builtin.TypeError("object of type '"+Sk.abstr.typeName(e)+"' has no len()");return e=e.sq$length(!0),Sk.misceval.chain(e,(e=>new Sk.builtin.int_(e)))},Sk.builtin.min=function(e,t){let n;const i=e.length;if(!i)throw new Sk.builtin.TypeError("min expected 1 argument, got 0");const[s,r]=Sk.abstr.copyKeywordsToNamedArgs("min",["default","key"],[],t,[null,Sk.builtin.none.none$]);if(1<i&&null!==s)throw new Sk.builtin.TypeError("Cannot specify a default for min() with multiple positional arguments");if(n=1==i?Sk.abstr.iter(e[0]):Sk.abstr.iter(new Sk.builtin.tuple(e)),!Sk.builtin.checkNone(r)&&!Sk.builtin.checkCallable(r))throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(r)+"' object is not callable");let o;return Sk.misceval.chain(n.tp$iternext(!0),(e=>{if(o=e,void 0!==o)return Sk.builtin.checkNone(r)?Sk.misceval.iterFor(n,(e=>{Sk.misceval.richCompareBool(e,o,"Lt")&&(o=e)})):Sk.misceval.chain(Sk.misceval.callsimOrSuspendArray(r,[o]),(e=>Sk.misceval.iterFor(n,(t=>Sk.misceval.chain(Sk.misceval.callsimOrSuspendArray(r,[t]),(n=>{Sk.misceval.richCompareBool(n,e,"Lt")&&(o=t,e=n)}))))))}),(()=>{if(void 0===o){if(null===s)throw new Sk.builtin.ValueError("min() arg is an empty sequence");o=s}return o}))},Sk.builtin.max=function(e,t){let n;const i=e.length;if(!i)throw new Sk.builtin.TypeError("max expected 1 argument, got 0");const[s,r]=Sk.abstr.copyKeywordsToNamedArgs("min",["default","key"],[],t,[null,Sk.builtin.none.none$]);if(1<i&&null!==s)throw new Sk.builtin.TypeError("Cannot specify a default for max() with multiple positional arguments");if(n=1===i?Sk.abstr.iter(e[0]):Sk.abstr.iter(new Sk.builtin.tuple(e)),!Sk.builtin.checkNone(r)&&!Sk.builtin.checkCallable(r))throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(r)+"' object is not callable");let o;return Sk.misceval.chain(n.tp$iternext(!0),(e=>{if(o=e,void 0!==o)return Sk.builtin.checkNone(r)?Sk.misceval.iterFor(n,(e=>{Sk.misceval.richCompareBool(e,o,"Gt")&&(o=e)})):Sk.misceval.chain(Sk.misceval.callsimOrSuspendArray(r,[o]),(e=>Sk.misceval.iterFor(n,(t=>Sk.misceval.chain(Sk.misceval.callsimOrSuspendArray(r,[t]),(n=>{Sk.misceval.richCompareBool(n,e,"Gt")&&(o=t,e=n)}))))))}),(()=>{if(void 0===o){if(null===s)throw new Sk.builtin.ValueError("min() arg is an empty sequence");o=s}return o}))},Sk.builtin.min.co_fastcall=Sk.builtin.max.co_fastcall=1,Sk.builtin.any=function(e){return Sk.misceval.chain(Sk.misceval.iterFor(Sk.abstr.iter(e),(function(e){if(Sk.misceval.isTrue(e))return new Sk.misceval.Break(Sk.builtin.bool.true$)})),(e=>e||Sk.builtin.bool.false$))},Sk.builtin.all=function(e){return Sk.misceval.chain(Sk.misceval.iterFor(Sk.abstr.iter(e),(function(e){if(!Sk.misceval.isTrue(e))return new Sk.misceval.Break(Sk.builtin.bool.false$)})),(e=>e||Sk.builtin.bool.true$))},Sk.builtin.sum=function(e,t){const n=Sk.abstr.iter(e);if(void 0===t)var i=new Sk.builtin.int_(0);else{if(Sk.builtin.checkString(t))throw new Sk.builtin.TypeError("sum() can't sum strings [use ''.join(seq) instead]");i=t}return e=void 0===t||t.constructor===Sk.builtin.int_?Sk.misceval.iterFor(n,(e=>{if(e.constructor!==Sk.builtin.int_)return e.constructor===Sk.builtin.float_?(i=i.nb$float().nb$add(e),new Sk.misceval.Break("float")):(i=Sk.abstr.numberBinOp(i,e,"Add"),new Sk.misceval.Break("slow"));i=i.nb$add(e)})):t.constructor===Sk.builtin.float_?"float":"slow",Sk.misceval.chain(e,(e=>"float"===e?Sk.misceval.iterFor(n,(e=>{if(e.constructor!==Sk.builtin.float_&&e.constructor!==Sk.builtin.int_)return i=Sk.abstr.numberBinOp(i,e,"Add"),new Sk.misceval.Break("slow");i=i.nb$add(e)})):e),(e=>{if("slow"===e)return Sk.misceval.iterFor(n,(e=>{i=Sk.abstr.numberBinOp(i,e,"Add")}))}),(()=>i))},Sk.builtin.zip=function(){var e,t;if(0===arguments.length)return new Sk.builtin.list([]);var n=[];for(t=0;t<arguments.length;t++){if(!Sk.builtin.checkIterable(arguments[t]))throw new Sk.builtin.TypeError("argument "+t+" must support iteration");n.push(Sk.abstr.iter(arguments[t]))}var i=[];for(e=!1;!e;){var s=[];for(t=0;t<arguments.length;t++){var r=n[t].tp$iternext();if(void 0===r){e=!0;break}s.push(r)}e||i.push(new Sk.builtin.tuple(s))}return new Sk.builtin.list(i)},Sk.builtin.abs=function(e){if(e.nb$abs)return e.nb$abs();throw new TypeError("bad operand type for abs(): '"+Sk.abstr.typeName(e)+"'")},Sk.builtin.fabs=function(e){return Sk.builtin.abs(e)},Sk.builtin.ord=function(e){if(Sk.builtin.checkString(e)){if(1!==e.v.length&&1!==e.sq$length())throw new Sk.builtin.TypeError("ord() expected a character, but string of length "+e.v.length+" found");return new Sk.builtin.int_(e.v.codePointAt(0))}if(Sk.builtin.checkBytes(e)){if(1!==e.sq$length())throw new Sk.builtin.TypeError("ord() expected a character, but string of length "+e.v.length+" found");return new Sk.builtin.int_(e.v[0])}throw new Sk.builtin.TypeError("ord() expected a string of length 1, but "+Sk.abstr.typeName(e)+" found")},Sk.builtin.chr=function(e){if(!Sk.builtin.checkInt(e))throw new Sk.builtin.TypeError("an integer is required");if(e=Sk.builtin.asnum$(e),Sk.__future__.python3){if(0>e||1114112<=e)throw new Sk.builtin.ValueError("chr() arg not in range(0x110000)")}else if(0>e||256<=e)throw new Sk.builtin.ValueError("chr() arg not in range(256)");return new Sk.builtin.str(String.fromCodePoint(e))},Sk.builtin.unichr=function(e){if(!Sk.builtin.checkInt(e))throw new Sk.builtin.TypeError("an integer is required");e=Sk.builtin.asnum$(e);try{return new Sk.builtin.str(String.fromCodePoint(e))}catch(t){if(t instanceof RangeError)throw new Sk.builtin.ValueError(t.message);throw t}},Sk.builtin.int2str_=function(e,t,n){let i;e.constructor===Sk.builtin.int_||e instanceof Sk.builtin.int_||(e=e.nb$index()),i=e.v;let s=i.toString(t);return s=e.nb$isnegative()?"-"+n+s.slice(1):n+s,2!==t&&!Sk.__future__.python3&&(e instanceof Sk.builtin.lng||JSBI.__isBigInt(i))&&(s+="L"),new Sk.builtin.str(s)},Sk.builtin.hex=function(e){if(!Sk.misceval.isIndex(e))throw new Sk.builtin.TypeError("hex() argument can't be converted to hex");return Sk.builtin.int2str_(e,16,"0x")},Sk.builtin.oct=function(e){if(!Sk.misceval.isIndex(e))throw new Sk.builtin.TypeError("oct() argument can't be converted to hex");return Sk.__future__.octal_number_literal?Sk.builtin.int2str_(e,8,"0o"):Sk.builtin.int2str_(e,8,"0")},Sk.builtin.bin=function(e){if(!Sk.misceval.isIndex(e))throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(e)+"' object can't be interpreted as an index");return Sk.builtin.int2str_(e,2,"0b")},Sk.builtin.dir=function(e){if(void 0!==e)return e=Sk.abstr.lookupSpecial(e,Sk.builtin.str.$dir),Sk.misceval.chain(Sk.misceval.callsimOrSuspendArray(e,[]),(e=>Sk.builtin.sorted(e)));throw new Sk.builtin.NotImplementedError("skulpt does not yet support dir with no args")},Sk.builtin.repr=function(e){return e.$r()},Sk.builtin.ascii=function(e){return Sk.misceval.chain(e.$r(),(e=>{let t,n;for(n=0;n<e.v.length;n++)if(127<=e.v.charCodeAt(n)){t=e.v.substr(0,n);break}if(!t)return e;for(;n<e.v.length;n++){var i=e.v.charAt(n),s=e.v.charCodeAt(n);127<s&&255>=s?(2>(i=s.toString(16)).length&&(i="0"+i),t+="\\x"+i):127<s&&55296>s||57344<=s?t+="\\u"+("000"+s.toString(16)).slice(-4):55296<=s?(i=e.v.codePointAt(n),n++,s="0000000"+(i=i.toString(16)).toString(16),t=4<i.length?t+"\\U"+s.slice(-8):t+"\\u"+s.slice(-4)):t+=i}return new Sk.builtin.str(t)}))},Sk.builtin.open=function(e,t,n){if(void 0===t&&(t=new Sk.builtin.str("r")),/\+/.test(t.v))throw"todo; haven't implemented read/write mode";if(("w"===t.v||"wb"===t.v||"a"===t.v||"ab"===t.v)&&!Sk.nonreadopen)throw"todo; haven't implemented non-read opens";return new Sk.builtin.file(e,t,n)},Sk.builtin.isinstance=function(e,t){if(!(Sk.builtin.checkClass(t)||t instanceof Sk.builtin.tuple))throw new Sk.builtin.TypeError("isinstance() arg 2 must be a class, type, or tuple of classes and types");var n=e.ob$type;if(n===t)return Sk.builtin.bool.true$;if(!(t instanceof Sk.builtin.tuple))return n.$isSubType(t)||(e=e.tp$getattr(Sk.builtin.str.$class))!=n&&Sk.builtin.checkClass(e)&&e.$isSubType(t)?Sk.builtin.bool.true$:Sk.builtin.bool.false$;for(n=0;n<t.v.length;++n)if(Sk.misceval.isTrue(Sk.builtin.isinstance(e,t.v[n])))return Sk.builtin.bool.true$;return Sk.builtin.bool.false$},Sk.builtin.hash=function(e){return new Sk.builtin.int_(Sk.abstr.objectHash(e))},Sk.builtin.getattr=function(e,t,n){if(!Sk.builtin.checkString(t))throw new Sk.builtin.TypeError("attribute name must be string");const i=Sk.misceval.tryCatch((()=>e.tp$getattr(t,!0)),(e=>{if(!(e instanceof Sk.builtin.AttributeError))throw e}));return Sk.misceval.chain(i,(i=>{if(void 0===i){if(void 0!==n)return n;throw new Sk.builtin.AttributeError(e.sk$attrError()+" has no attribute "+Sk.misceval.objectRepr(t))}return i}))},Sk.builtin.setattr=function(e,t,n){if(!Sk.builtin.checkString(t))throw new Sk.builtin.TypeError("attribute name must be string");return Sk.misceval.chain(e.tp$setattr(t,n,!0),(()=>Sk.builtin.none.none$))},Sk.builtin.raw_input=function(e){var t=e||"";return Sk.misceval.chain(Sk.importModule("sys",!1,!0),(function(e){return Sk.inputfunTakesPrompt?Sk.builtin.file.$readline(e.$d.stdin,null,t):Sk.misceval.chain(void 0,(function(){return Sk.misceval.callsimOrSuspendArray(e.$d.stdout.write,[e.$d.stdout,new Sk.builtin.str(t)])}),(function(){return Sk.misceval.callsimOrSuspendArray(e.$d.stdin.readline,[e.$d.stdin])}))}))},Sk.builtin.input=Sk.builtin.raw_input,Sk.builtin.jseval=function(e){return e=Sk.global.eval(Sk.ffi.remapToJs(e)),Sk.ffi.remapToPy(e)},Sk.builtin.jsmillis=function(){return console.warn("jsmillis is deprecated"),(new Date).valueOf()},Sk.builtin.eval_=function(){throw new Sk.builtin.NotImplementedError("eval is not yet implemented")},Sk.builtin.map=function(e,t){var n,i,s=[];if(Sk.builtin.pyCheckArgsLen("map",arguments.length,2),2<arguments.length){var r=[],o=Array.prototype.slice.apply(arguments).slice(1);for(i=0;i<o.length;i++){if(!Sk.builtin.checkIterable(o[i])){var a=parseInt(i,10)+2;throw new Sk.builtin.TypeError("argument "+a+" to map() must support iteration")}o[i]=Sk.abstr.iter(o[i])}for(;;){var l=[];for(i=n=0;i<o.length;i++)void 0===(a=o[i].tp$iternext())?(l.push(Sk.builtin.none.none$),n++):l.push(a);if(n===o.length)break;r.push(l)}t=new Sk.builtin.list(r)}if(!Sk.builtin.checkIterable(t))throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(t)+"' object is not iterable");return Sk.misceval.chain(Sk.misceval.iterFor(Sk.abstr.iter(t),(function(t){if(e!==Sk.builtin.none.none$)return t instanceof Array||(t=[t]),Sk.misceval.chain(Sk.misceval.callsimOrSuspendArray(e,t),(function(e){s.push(e)}));t instanceof Array&&(t=new Sk.builtin.tuple(t)),s.push(t)})),(function(){return new Sk.builtin.list(s)}))},Sk.builtin.reduce=function(e,t,n){if(!Sk.builtin.checkIterable(t))throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(t)+"' object is not iterable");if(t=Sk.abstr.iter(t),void 0===n&&void 0===(n=t.tp$iternext()))throw new Sk.builtin.TypeError("reduce() of empty sequence with no initial value");var i=n;for(n=t.tp$iternext();void 0!==n;n=t.tp$iternext())i=Sk.misceval.callsimArray(e,[i,n]);return i},Sk.builtin.sorted=function(e,t,n,i){return e=Sk.misceval.arrayFromIterable(e,!0),Sk.misceval.chain(e,(e=>((e=new Sk.builtin.list(e)).list$sort(t,n,i),e)))},Sk.builtin.filter=function(e,t){var n;if(Sk.builtin.pyCheckArgsLen("filter",arguments.length,2,2),!Sk.builtin.checkIterable(t))throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(t)+"' object is not iterable");var i=function(){return[]},s=function(e,t){return e.push(t),e},r=function(e){return new Sk.builtin.list(e)};t.ob$type===Sk.builtin.str?(i=function(){return new Sk.builtin.str("")},s=function(e,t){return e.sq$concat(t)},r=function(e){return e}):t.ob$type===Sk.builtin.tuple&&(r=function(e){return new Sk.builtin.tuple(e)});var o=i(),a=Sk.abstr.iter(t);for(n=a.tp$iternext();void 0!==n;n=a.tp$iternext())i=e===Sk.builtin.none.none$?new Sk.builtin.bool(n):Sk.misceval.callsimArray(e,[n]),Sk.misceval.isTrue(i)&&(o=s(o,n));return r(o)},Sk.builtin.hasattr=function(e,t){if(!Sk.builtin.checkString(t))throw new Sk.builtin.TypeError("hasattr(): attribute name must be string");const n=Sk.misceval.tryCatch((()=>e.tp$getattr(t,!0)),(e=>{if(!(e instanceof Sk.builtin.AttributeError))throw e}));return Sk.misceval.chain(n,(e=>void 0===e?Sk.builtin.bool.false$:Sk.builtin.bool.true$))},Sk.builtin.pow=function(e,t,n){if(void 0===n||Sk.builtin.checkNone(n))return Sk.abstr.numberBinOp(e,t,"Pow");if(!(Sk.builtin.checkInt(e)&&Sk.builtin.checkInt(t)&&Sk.builtin.checkInt(n))){if(Sk.builtin.checkFloat(e)||Sk.builtin.checkComplex(e))return e.nb$power(t,n);throw new Sk.builtin.TypeError("unsupported operand type(s) for ** or pow(): '"+Sk.abstr.typeName(e)+"', '"+Sk.abstr.typeName(t)+"', '"+Sk.abstr.typeName(n)+"'")}return e.nb$power(t,n)},Sk.builtin.quit=function(e){throw e=new Sk.builtin.str(e).v,new Sk.builtin.SystemExit(e)},Sk.builtin.issubclass=function(e,t){if(!Sk.builtin.checkClass(e))throw new Sk.builtin.TypeError("issubclass() arg 1 must be a class");var n=Sk.builtin.checkClass(t);if(!(n||t instanceof Sk.builtin.tuple))throw new Sk.builtin.TypeError("issubclass() arg 2 must be a class or tuple of classes");if(n)return e.$isSubType(t)?Sk.builtin.bool.true$:Sk.builtin.bool.false$;for(n=0;n<t.v.length;++n)if(Sk.misceval.isTrue(Sk.builtin.issubclass(e,t.v[n])))return Sk.builtin.bool.true$;return Sk.builtin.bool.false$},Sk.builtin.globals=function(){var e,t=new Sk.builtin.dict([]);for(e in Sk.globals){var n=Sk.unfixReserved(e);t.mp$ass_subscript(new Sk.builtin.str(n),Sk.globals[e])}return t},Sk.builtin.divmod=function(e,t){return Sk.abstr.numberBinOp(e,t,"DivMod")},Sk.builtin.format=function(e,t){return void 0===t&&(t=Sk.builtin.str.$emptystr),Sk.abstr.objectFormat(e,t)};const n=new Map;let i=0;Sk.builtin.id=function(e){const t=n.get(e);return void 0!==t?new Sk.builtin.int_(t):(n.set(e,i),new Sk.builtin.int_(i++))},Sk.builtin.bytearray=function(){throw new Sk.builtin.NotImplementedError("bytearray is not yet implemented")},Sk.builtin.callable=function(e){return Sk.builtin.checkCallable(e)?Sk.builtin.bool.true$:Sk.builtin.bool.false$},Sk.builtin.delattr=function(e,t){return Sk.builtin.setattr(e,t,void 0)},Sk.builtin.execfile=function(){throw new Sk.builtin.NotImplementedError("execfile is not yet implemented")},Sk.builtin.help=function(){throw new Sk.builtin.NotImplementedError("help is not yet implemented")},Sk.builtin.iter=function(e,t){return 1===arguments.length?Sk.abstr.iter(e):Sk.abstr.iter(new Sk.builtin.callable_iter_(e,t))},Sk.builtin.locals=function(){throw new Sk.builtin.NotImplementedError("locals is not yet implemented")},Sk.builtin.memoryview=function(){throw new Sk.builtin.NotImplementedError("memoryview is not yet implemented")},Sk.builtin.next_=function(e,t){if(!e.tp$iternext)throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(e)+"' object is not an iterator");if(void 0===(e=e.tp$iternext())){if(t)return t;throw new Sk.builtin.StopIteration}return e},Sk.builtin.reload=function(){throw new Sk.builtin.NotImplementedError("reload is not yet implemented")},Sk.builtin.vars=function(){throw new Sk.builtin.NotImplementedError("vars is not yet implemented")},Sk.builtin.apply_=function(){throw new Sk.builtin.NotImplementedError("apply is not yet implemented")},Sk.builtin.buffer=function(){throw new Sk.builtin.NotImplementedError("buffer is not yet implemented")},Sk.builtin.coerce=function(){throw new Sk.builtin.NotImplementedError("coerce is not yet implemented")},Sk.builtin.intern=function(){throw new Sk.builtin.NotImplementedError("intern is not yet implemented")}},function(e,t){Sk.builtin.BaseException=Sk.abstr.buildNativeClass("BaseException",{constructor:function(){Sk.asserts.assert(this instanceof Sk.builtin.BaseException,"bad call to exception constructor, use 'new'");let e=arguments.length<=0?void 0:arguments[0];"string"===typeof e&&(e=new Sk.builtin.str(e)),this.args=new Sk.builtin.tuple(e?[e]:[]),this.traceback=[],this.$d=new Sk.builtin.dict,3<=arguments.length&&this.traceback.push({lineno:arguments.length<=2?void 0:arguments[2],filename:(arguments.length<=1?void 0:arguments[1])||"<unknown>"})},slots:{tp$getattr:Sk.generic.getAttr,tp$doc:"Common base class for all exceptions",tp$new(e,t){return this.hp$type?(t=new this.constructor,Sk.builtin.BaseException.call(t)):t=new this.constructor,t.args=new Sk.builtin.tuple(e.slice()),t},tp$init(e,t){Sk.abstr.checkNoKwargs(Sk.abstr.typeName(this),t)},$r(){let e=this.tp$name;return e+="("+this.args.v.map((e=>Sk.misceval.objectRepr(e))).join(", ")+")",new Sk.builtin.str(e)},tp$str(){return 1>=this.args.v.length?new Sk.builtin.str(this.args.v[0]):this.args.$r()}},getsets:{args:{$get(){return this.args}},__dict__:Sk.generic.getSetDict},proto:{toString(){let e=this.tp$name;return e+=": "+this.tp$str().v,0!==this.traceback.length?e+" on line "+this.traceback[0].lineno:e+" at <unknown>"}}}),Sk.exportSymbol("Sk.builtin.BaseException",Sk.builtin.BaseException),Sk.builtin.Exception=Sk.abstr.buildNativeClass("Exception",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.BaseException.apply(this,t)},base:Sk.builtin.BaseException}),Sk.exportSymbol("Sk.builtin.Exception",Sk.builtin.Exception),Sk.builtin.AssertionError=Sk.abstr.buildNativeClass("AssertionError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.AssertionError",Sk.builtin.AssertionError),Sk.builtin.AttributeError=Sk.abstr.buildNativeClass("AttributeError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.builtin.ImportError=Sk.abstr.buildNativeClass("ImportError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.builtin.IndentationError=Sk.abstr.buildNativeClass("IndentationError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.builtin.IndexError=Sk.abstr.buildNativeClass("IndexError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.builtin.LookupError=Sk.abstr.buildNativeClass("LookupError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.builtin.KeyError=Sk.abstr.buildNativeClass("KeyError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.LookupError.apply(this,t)},base:Sk.builtin.LookupError}),Sk.builtin.NameError=Sk.abstr.buildNativeClass("NameError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.builtin.UnboundLocalError=Sk.abstr.buildNativeClass("UnboundLocalError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.builtin.OverflowError=Sk.abstr.buildNativeClass("OverflowError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.builtin.SyntaxError=Sk.abstr.buildNativeClass("SyntaxError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.builtin.RuntimeError=Sk.abstr.buildNativeClass("RuntimeError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.RuntimeError",Sk.builtin.RuntimeError),Sk.builtin.SuspensionError=Sk.abstr.buildNativeClass("SuspensionError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.SuspensionError",Sk.builtin.SuspensionError),Sk.builtin.SystemExit=Sk.abstr.buildNativeClass("SystemExit",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.BaseException.apply(this,t)},base:Sk.builtin.BaseException}),Sk.exportSymbol("Sk.builtin.SystemExit",Sk.builtin.SystemExit),Sk.builtin.TypeError=Sk.abstr.buildNativeClass("TypeError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.TypeError",Sk.builtin.TypeError),Sk.builtin.ValueError=Sk.abstr.buildNativeClass("ValueError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.ValueError",Sk.builtin.ValueError),Sk.builtin.ZeroDivisionError=Sk.abstr.buildNativeClass("ZeroDivisionError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.builtin.TimeLimitError=Sk.abstr.buildNativeClass("TimeLimitError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.TimeLimitError",Sk.builtin.TimeLimitError),Sk.builtin.IOError=Sk.abstr.buildNativeClass("IOError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.IOError",Sk.builtin.IOError),Sk.builtin.NotImplementedError=Sk.abstr.buildNativeClass("NotImplementedError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.NotImplementedError",Sk.builtin.NotImplementedError),Sk.builtin.NegativePowerError=Sk.abstr.buildNativeClass("NegativePowerError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.NegativePowerError",Sk.builtin.NegativePowerError),Sk.builtin.ExternalError=Sk.abstr.buildNativeClass("ExternalError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this.nativeError=t[0],!Sk.builtin.checkString(this.nativeError)&&(t[0]=this.nativeError.toString(),t[0].startsWith("RangeError: Maximum call")))return t[0]="Maximum call stack size exceeded",new Sk.builtin.RecursionError(...t);Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.ExternalError",Sk.builtin.ExternalError),Sk.builtin.RecursionError=Sk.abstr.buildNativeClass("RecursionError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.RuntimeError.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.RecursionError",Sk.builtin.RecursionError),Sk.builtin.OperationError=Sk.abstr.buildNativeClass("OperationError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.OperationError",Sk.builtin.OperationError),Sk.builtin.SystemError=Sk.abstr.buildNativeClass("SystemError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.SystemError",Sk.builtin.SystemError),Sk.builtin.UnicodeDecodeError=Sk.abstr.buildNativeClass("UnicodeDecodeError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.UnicodeDecodeError",Sk.builtin.UnicodeDecodeError),Sk.builtin.UnicodeEncodeError=Sk.abstr.buildNativeClass("UnicodeEncodeError",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.UnicodeEncodeError",Sk.builtin.UnicodeEncodeError),Sk.builtin.StopIteration=Sk.abstr.buildNativeClass("StopIteration",{constructor:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Sk.builtin.Exception.apply(this,t)},base:Sk.builtin.Exception}),Sk.exportSymbol("Sk.builtin.StopIteration",Sk.builtin.StopIteration),Sk.builtin.getExcInfo=function(e){return new Sk.builtin.tuple([e.ob$type||Sk.builtin.none.none$,e,Sk.builtin.none.none$])}},function(e,t){Sk.builtin.method=Sk.abstr.buildNativeClass("method",{constructor:function(e,t){Sk.asserts.assert(this instanceof Sk.builtin.method,"bad call to method constructor, use 'new'"),this.im_func=e,this.im_self=t,this.im_call=e.tp$call},slots:{$r(){let e=this.im_func.tp$getattr(Sk.builtin.str.$qualname)||this.im_func.tp$getattr(Sk.builtin.str.$name);return e=e&&e.v||"?",new Sk.builtin.str("<bound method "+e+" of "+Sk.misceval.objectRepr(this.im_self)+">")},tp$hash(){return Sk.abstr.objectHash(this.im_self)+Sk.abstr.objectHash(this.im_func)},tp$call(e,t){var n=this.im_call;if(void 0===n)throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(this.im_func)+"' object is not callable");return e=[this.im_self,...e],n.call(this.im_func,e,t)},tp$new(e,t){if(Sk.abstr.checkNoKwargs("method",t),Sk.abstr.checkArgsLen("method",e,2,2),t=e[0],e=e[1],!Sk.builtin.checkCallable(t))throw new Sk.builtin.TypeError("first argument must be callable");if(Sk.builtin.checkNone(e))throw new Sk.builtin.TypeError("self must not be None");return new Sk.builtin.method(t,e)},tp$richcompare(e,t){if("Eq"!=t&&"NotEq"!=t||!(e instanceof Sk.builtin.method))return Sk.builtin.NotImplemented.NotImplemented$;let n;try{n=Sk.misceval.richCompareBool(this.im_self,e.im_self,"Eq",!1)&&this.im_func==e.im_func}catch(i){n=!1}return"Eq"==t?n:!n},tp$descr_get(e,t){return this},tp$getattr(e,t){const n=Sk.abstr.lookupSpecial(this,e);return void 0!==n?n:this.im_func.tp$getattr(e,t)}},getsets:{__func__:{$get(){return this.im_func}},__self__:{$get(){return this.im_self}},__doc__:{$get(){return this.im_func.tp$getattr(Sk.builtin.str.$doc)}}},flags:{sk$suitable_as_base_class:!1}})},function(e,t){function n(e){if(null!==e&&void 0!==e){if(e.nb$index)return e.nb$index();if("number"===typeof e&&Number.isInteger(e))return e}}function i(e,t){const i=n(e);if(void 0!==i)return i;throw t=(t||"'{tp$name}' object cannot be interpreted as an integer").replace("{tp$name}",Sk.abstr.typeName(e)),new Sk.builtin.TypeError(t)}Sk.misceval={},Sk.misceval.Suspension=function(e,t,n){this.$isSuspension=!0,void 0!==e&&void 0!==t&&(this.resume=function(){return e(t.resume())}),this.child=t,this.optional=void 0!==t&&t.optional,this.data=void 0===n&&void 0!==t?t.data:n},Sk.exportSymbol("Sk.misceval.Suspension",Sk.misceval.Suspension),Sk.misceval.retryOptionalSuspensionOrThrow=function(e,t){for(;e instanceof Sk.misceval.Suspension;){if(!e.optional)throw new Sk.builtin.SuspensionError(t||"Cannot call a function that blocks or suspends here");e=e.resume()}return e},Sk.exportSymbol("Sk.misceval.retryOptionalSuspensionOrThrow",Sk.misceval.retryOptionalSuspensionOrThrow),Sk.misceval.isIndex=function(e){return null!==e&&void 0!==e&&(void 0!==e.nb$index||"number"===typeof e&&Number.isInteger(e))},Sk.exportSymbol("Sk.misceval.isIndex",Sk.misceval.isIndex),Sk.misceval.asIndex=n,Sk.misceval.asIndexSized=function(e,t,n){if("number"===typeof(n=i(e,n)))return n;if(null==t)return JSBI.lessThan(n,JSBI.__ZERO)?-Number.MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER;throw new t("cannot fit '"+Sk.abstr.typeName(e)+"' into an index-sized integer")},Sk.misceval.asIndexOrThrow=i,Sk.misceval.applySlice=function(e,t,n,i){return Sk.abstr.objectGetItem(e,new Sk.builtin.slice(t,n,null),i)},Sk.exportSymbol("Sk.misceval.applySlice",Sk.misceval.applySlice),Sk.misceval.assignSlice=function(e,t,n,i,s){return t=new Sk.builtin.slice(t,n),null===i?Sk.abstr.objectDelItem(e,t):Sk.abstr.objectSetItem(e,t,i,s)},Sk.exportSymbol("Sk.misceval.assignSlice",Sk.misceval.assignSlice),Sk.misceval.arrayFromArguments=function(e){var t;if(1!=e.length)return e;var n=e[0];if(n instanceof Sk.builtin.set?n=n.tp$iter().$obj:n instanceof Sk.builtin.dict&&(n=Sk.builtin.dict.prototype.keys.func_code(n)),n instanceof Sk.builtin.list||n instanceof Sk.builtin.tuple)return n.v;if(Sk.builtin.checkIterable(n)){for(e=[],t=(n=Sk.abstr.iter(n)).tp$iternext();void 0!==t;t=n.tp$iternext())e.push(t);return e}throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(n)+"' object is not iterable")},Sk.exportSymbol("Sk.misceval.arrayFromArguments",Sk.misceval.arrayFromArguments),Sk.misceval.iterator=Sk.abstr.buildIteratorClass("iterator",{constructor:function(e,t){this.tp$iternext=t?e:function(t){let n=e();return t||!n.$isSuspension?n:Sk.misceval.retryOptionalSuspensionOrThrow(n)}},iternext:function(e){return this.tp$iternext(e)},flags:{sk$acceptable_as_base_class:!1}}),Sk.misceval.swappedOp_={Eq:"Eq",NotEq:"NotEq",Lt:"Gt",LtE:"GtE",Gt:"Lt",GtE:"LtE"},Sk.misceval.opSymbols={Eq:"==",NotEq:"!=",Lt:"<",LtE:"<=",Gt:">",GtE:">=",Is:"is",IsNot:"is not",In_:"in",NotIn:"not in"},Sk.misceval.richCompareBool=function(e,t,n,i){var s;Sk.asserts.assert(e.sk$object&&t.sk$object,"JS object passed to richCompareBool");var r=e.ob$type,o=t.ob$type,a=o!==r&&void 0===o.sk$baseClass&&o.$isSubType(r);if(!Sk.__future__.python3&&r!==o&&("GtE"===n||"Gt"===n||"LtE"===n||"Lt"===n)){var l=[Sk.builtin.float_,Sk.builtin.int_,Sk.builtin.lng,Sk.builtin.bool],c=[Sk.builtin.dict,Sk.builtin.enumerate,Sk.builtin.filter_,Sk.builtin.list,Sk.builtin.map_,Sk.builtin.str,Sk.builtin.tuple,Sk.builtin.zip_];const i=l.indexOf(r),s=c.indexOf(r);if(l=l.indexOf(o),c=c.indexOf(o),e===Sk.builtin.none.none$)switch(n){case"Lt":case"LtE":return!0;case"Gt":case"GtE":return!1}if(t===Sk.builtin.none.none$)switch(n){case"Lt":case"LtE":return!1;case"Gt":case"GtE":return!0}if(-1!==i&&-1!==c)switch(n){case"Lt":case"LtE":return!0;case"Gt":case"GtE":return!1}if(-1!==s&&-1!==l)switch(n){case"Lt":case"LtE":return!1;case"Gt":case"GtE":return!0}if(-1!==s&&-1!==c)switch(n){case"Lt":return s<c;case"LtE":return s<=c;case"Gt":return s>c;case"GtE":return s>=c}}if("Is"===n){if(r===o){if(e===t)return!0;if(r===Sk.builtin.float_)return e.v===t.v;if(r===Sk.builtin.int_)return"number"===typeof e.v&&"number"===typeof e.v?e.v===t.v:JSBI.equal(JSBI.BigInt(e.v),JSBI.BigInt(t.v))}return!1}if("IsNot"===n)return r!==o||(r===Sk.builtin.float_?e.v!==t.v:r===Sk.builtin.int_?"number"===typeof e.v&&"number"===typeof e.v?e.v!==t.v:JSBI.notEqual(JSBI.BigInt(e.v),JSBI.BigInt(t.v)):e!==t);if("In"===n)return Sk.misceval.chain(Sk.abstr.sequenceContains(t,e,i),Sk.misceval.isTrue);if("NotIn"===n)return Sk.misceval.chain(Sk.abstr.sequenceContains(t,e,i),(function(e){return!Sk.misceval.isTrue(e)}));if(r=(o={Eq:"ob$eq",NotEq:"ob$ne",Gt:"ob$gt",GtE:"ob$ge",Lt:"ob$lt",LtE:"ob$le"})[n],a&&(t[i=o[Sk.misceval.swappedOp_[n]]]!==e[i]&&(s=t[i](e))!==Sk.builtin.NotImplemented.NotImplemented$)||(s=e[r](t))!==Sk.builtin.NotImplemented.NotImplemented$||!a&&(s=t[i=o[Sk.misceval.swappedOp_[n]]](e))!==Sk.builtin.NotImplemented.NotImplemented$)return Sk.misceval.isTrue(s);if(!Sk.__future__.python3){if(a=Sk.abstr.lookupSpecial(e,Sk.builtin.str.$cmp))try{if(s=Sk.misceval.callsimArray(a,[t]),Sk.builtin.checkNumber(s)){if(s=Sk.builtin.asnum$(s),"Eq"===n)return 0===s;if("NotEq"===n)return 0!==s;if("Lt"===n)return 0>s;if("Gt"===n)return 0<s;if("LtE"===n)return 0>=s;if("GtE"===n)return 0<=s}if(s!==Sk.builtin.NotImplemented.NotImplemented$)throw new Sk.builtin.TypeError("comparison did not return an int")}catch(u){throw new Sk.builtin.TypeError("comparison did not return an int")}if(a=Sk.abstr.lookupSpecial(t,Sk.builtin.str.$cmp))try{if(s=Sk.misceval.callsimArray(a,[e]),Sk.builtin.checkNumber(s)){if(s=Sk.builtin.asnum$(s),"Eq"===n)return 0===s;if("NotEq"===n)return 0!==s;if("Lt"===n)return 0<s;if("Gt"===n)return 0>s;if("LtE"===n)return 0<=s;if("GtE"===n)return 0>=s}if(s!==Sk.builtin.NotImplemented.NotImplemented$)throw new Sk.builtin.TypeError("comparison did not return an int")}catch(u){throw new Sk.builtin.TypeError("comparison did not return an int")}if(e===Sk.builtin.none.none$&&t===Sk.builtin.none.none$){if("Eq"===n)return e.v===t.v;if("NotEq"===n)return e.v!==t.v;if("Gt"===n)return e.v>t.v;if("GtE"===n)return e.v>=t.v;if("Lt"===n)return e.v<t.v;if("LtE"===n)return e.v<=t.v}}if("Eq"===n)return e===t;if("NotEq"===n)return e!==t;throw e=Sk.abstr.typeName(e),t=Sk.abstr.typeName(t),new Sk.builtin.TypeError("'"+Sk.misceval.opSymbols[n]+"' not supported between instances of '"+e+"' and '"+t+"'")},Sk.exportSymbol("Sk.misceval.richCompareBool",Sk.misceval.richCompareBool),Sk.misceval.objectRepr=function(e){if(Sk.asserts.assert(void 0!==e,"trying to repr undefined"),null!==e&&e.$r)return e.$r().v;try{return new Sk.builtin.str(e).v}catch(t){if(t instanceof Sk.builtin.TypeError)return"<unknown>";throw t}},Sk.exportSymbol("Sk.misceval.objectRepr",Sk.misceval.objectRepr),Sk.misceval.opAllowsEquality=function(e){switch(e){case"LtE":case"Eq":case"GtE":return!0}return!1},Sk.exportSymbol("Sk.misceval.opAllowsEquality",Sk.misceval.opAllowsEquality),Sk.misceval.isTrue=function(e){return!0===e||e===Sk.builtin.bool.true$||!1!==e&&e!==Sk.builtin.bool.false$&&null!==e&&void 0!==e&&(e.nb$bool?e.nb$bool():e.sq$length?0!==e.sq$length():!!e)},Sk.exportSymbol("Sk.misceval.isTrue",Sk.misceval.isTrue),Sk.misceval.softspace_=!1,Sk.misceval.print_=function(e){Sk.misceval.softspace_&&("\n"!==e&&Sk.output(" "),Sk.misceval.softspace_=!1);var t=new Sk.builtin.str(e);return Sk.misceval.chain(Sk.importModule("sys",!1,!0),(function(e){return Sk.misceval.apply(e.$d.stdout.write,void 0,void 0,void 0,[e.$d.stdout,t])}),(function(){var e;(e=0===t.v.length)||(e=!("\n"===(e=t.v[t.v.length-1])||"\t"===e||"\r"===e)),(e||" "===t.v[t.v.length-1])&&(Sk.misceval.softspace_=!0)}))},Sk.exportSymbol("Sk.misceval.print_",Sk.misceval.print_),Sk.misceval.loadname=function(e,t){if(void 0!==(t=t[e]))return t;if(void 0!==(t=Sk.builtins[e]))return t;throw new Sk.builtin.NameError("name '"+Sk.unfixReserved(e)+"' is not defined")},Sk.exportSymbol("Sk.misceval.loadname",Sk.misceval.loadname),Sk.misceval.call=function(e,t,n,i,s){return s=Array.prototype.slice.call(arguments,4),Sk.misceval.apply(e,t,n,i,s)},Sk.exportSymbol("Sk.misceval.call",Sk.misceval.call),Sk.misceval.callAsync=function(e,t,n,i,s,r){return r=Array.prototype.slice.call(arguments,5),Sk.misceval.applyAsync(e,t,n,i,s,r)},Sk.exportSymbol("Sk.misceval.callAsync",Sk.misceval.callAsync),Sk.misceval.callOrSuspend=function(e,t,n,i,s){return s=Array.prototype.slice.call(arguments,4),Sk.misceval.applyOrSuspend(e,t,n,i,s)},Sk.exportSymbol("Sk.misceval.callOrSuspend",Sk.misceval.callOrSuspend),Sk.misceval.callsim=function(e,t){return t=Array.prototype.slice.call(arguments,1),Sk.misceval.apply(e,void 0,void 0,void 0,t)},Sk.exportSymbol("Sk.misceval.callsim",Sk.misceval.callsim),Sk.misceval.callsimArray=function(e,t,n){return t=t||[],Sk.misceval.retryOptionalSuspensionOrThrow(Sk.misceval.callsimOrSuspendArray(e,t,n))},Sk.exportSymbol("Sk.misceval.callsimArray",Sk.misceval.callsimArray),Sk.misceval.callsimAsync=function(e,t,n){return n=Array.prototype.slice.call(arguments,2),Sk.misceval.applyAsync(e,t,void 0,void 0,void 0,n)},Sk.exportSymbol("Sk.misceval.callsimAsync",Sk.misceval.callsimAsync),Sk.misceval.callsimOrSuspend=function(e,t){return t=Array.prototype.slice.call(arguments,1),Sk.misceval.applyOrSuspend(e,void 0,void 0,void 0,t)},Sk.exportSymbol("Sk.misceval.callsimOrSuspend",Sk.misceval.callsimOrSuspend),Sk.misceval.callsimOrSuspendArray=function(e,t,n){return t=t||[],void 0!==e&&e.tp$call?e.tp$call(t,n):Sk.misceval.applyOrSuspend(e,void 0,void 0,n,t)},Sk.exportSymbol("Sk.misceval.callsimOrSuspendArray",Sk.misceval.callsimOrSuspendArray),Sk.misceval.apply=function(e,t,n,i,s){return(e=Sk.misceval.applyOrSuspend(e,t,n,i,s))instanceof Sk.misceval.Suspension?Sk.misceval.retryOptionalSuspensionOrThrow(e):e},Sk.exportSymbol("Sk.misceval.apply",Sk.misceval.apply),Sk.misceval.asyncToPromise=function(e,t){return new Promise((function(n,i){try{!function e(s){try{for(var r=function(){try{e(s.resume())}catch(t){i(t)}},o=function(e){try{s.data.result=e,r()}catch(t){i(t)}},a=function(e){try{s.data.error=e,r()}catch(t){i(t)}};s instanceof Sk.misceval.Suspension;){var l=t&&(t[s.data.type]||t["*"]);if(l){var c=l(s);if(c)return void c.then(e,i)}if("Sk.promise"==s.data.type)return void s.data.promise.then(o,a);if("Sk.yield"==s.data.type)return void Sk.global.setImmediate(r);if("Sk.delay"==s.data.type)return void Sk.global.setImmediate(r);if(!s.optional)throw new Sk.builtin.SuspensionError("Unhandled non-optional suspension of type '"+s.data.type+"'");s=s.resume()}n(s)}catch(u){i(u)}}(e())}catch(s){i(s)}}))},Sk.exportSymbol("Sk.misceval.asyncToPromise",Sk.misceval.asyncToPromise),Sk.misceval.applyAsync=function(e,t,n,i,s,r){return Sk.misceval.asyncToPromise((function(){return Sk.misceval.applyOrSuspend(t,n,i,s,r)}),e)},Sk.exportSymbol("Sk.misceval.applyAsync",Sk.misceval.applyAsync),Sk.misceval.chain=function(e,t){for(var n,i,s=1,r=e;;){if(s==arguments.length)return r;if(r&&r.$isSuspension)break;r=arguments[s](r),s++}for(i=Array(arguments.length-s),n=0;n<arguments.length-s;n++)i[n]=arguments[s+n];return n=0,function e(t){for(;n<i.length;){if(t instanceof Sk.misceval.Suspension)return new Sk.misceval.Suspension(e,t);t=i[n](t),n++}return t}(r)},Sk.exportSymbol("Sk.misceval.chain",Sk.misceval.chain),Sk.misceval.tryCatch=function(e,t){try{var n=e()}catch(i){return t(i)}return n instanceof Sk.misceval.Suspension?((e=new Sk.misceval.Suspension(void 0,n)).resume=function(){return Sk.misceval.tryCatch(n.resume,t)},e):n},Sk.exportSymbol("Sk.misceval.tryCatch",Sk.misceval.tryCatch),Sk.misceval.iterFor=function(e,t,n){var i=n,s=function(t){return i=t,t instanceof Sk.misceval.Break?t:e.tp$iternext(!0)};return function e(n){for(;void 0!==n;){if(n instanceof Sk.misceval.Suspension)return new Sk.misceval.Suspension(e,n);if(n===Sk.misceval.Break||n instanceof Sk.misceval.Break)return n.brValue;n=Sk.misceval.chain(t(n,i),s)}return i}(e.tp$iternext(!0))},Sk.exportSymbol("Sk.misceval.iterFor",Sk.misceval.iterFor),Sk.misceval.iterArray=function(e,t,n){Sk.asserts.assert(Array.isArray(e),"iterArgs requires an array");let i=0;return Sk.misceval.iterFor({tp$iternext:()=>e[i++]},t,n)},Sk.misceval.arrayFromIterable=function(e,t){if(void 0===e)return[];if(void 0===e.hp$type&&void 0!==e.sk$asarray)return e.sk$asarray();const n=[];return e=Sk.misceval.chain(Sk.misceval.iterFor(Sk.abstr.iter(e),(e=>{n.push(e)})),(()=>n)),t?e:Sk.misceval.retryOptionalSuspensionOrThrow(e)},Sk.misceval.Break=function(e){if(!(this instanceof Sk.misceval.Break))return new Sk.misceval.Break(e);this.brValue=e},Sk.exportSymbol("Sk.misceval.Break",Sk.misceval.Break),Sk.misceval.applyOrSuspend=function(e,t,n,i,s){var r;if(null==e||e===Sk.builtin.none.none$)throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(e)+"' object is not callable");"function"===typeof e&&void 0===e.tp$call&&(e=new Sk.builtin.func(e));var o=e.tp$call;if(void 0!==o){if(n)for(r=(n=n.tp$iter()).tp$iternext();void 0!==r;r=n.tp$iternext())s.push(r);if(t)for(r=(n=Sk.abstr.iter(t)).tp$iternext();void 0!==r;r=n.tp$iternext()){if(!Sk.builtin.checkString(r))throw new Sk.builtin.TypeError("Function keywords must be strings");i.push(r.v),i.push(Sk.abstr.objectGetItem(t,r,!1))}return o.call(e,s,i,t)}if(void 0!==(o=e.__call__))return s.unshift(e),Sk.misceval.apply(o,t,n,i,s);throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(e)+"' object is not callable")},Sk.exportSymbol("Sk.misceval.applyOrSuspend",Sk.misceval.applyOrSuspend),Sk.misceval.promiseToSuspension=function(e){var t=new Sk.misceval.Suspension;return t.resume=function(){if(t.data.error)throw t.data.error;return t.data.result},t.data={type:"Sk.promise",promise:e},t},Sk.exportSymbol("Sk.misceval.promiseToSuspension",Sk.misceval.promiseToSuspension),Sk.misceval.buildClass=function(e,t,n,i,s){var r=Sk.builtin.type,o={};for(var a in t(e,o,void 0===s?{}:s),e.__name__&&(o.__module__=e.__name__),e=new Sk.builtin.str(n),i=new Sk.builtin.tuple(i),t=[],o)o.hasOwnProperty(a)&&(t.push(new Sk.builtin.str(a)),t.push(o[a]));return t=new Sk.builtin.dict(t),Sk.misceval.callsimArray(r,[e,i,t])},Sk.exportSymbol("Sk.misceval.buildClass",Sk.misceval.buildClass)},function(e,t){Sk.builtin.callable_iter_=Sk.abstr.buildIteratorClass("callable_iterator",{constructor:function(e,t){if(!Sk.builtin.checkCallable(e))throw new Sk.builtin.TypeError("iter(v, w): v must be callable");this.$callable=e,this.$sentinel=t,this.$flag=!1},iternext(e){if(!0!==this.$flag){if(e)return e=Sk.misceval.callsimOrSuspendArray(this.$callable,[]),Sk.misceval.chain(e,(e=>{if(!Sk.misceval.richCompareBool(e,this.$sentinel,"Eq",!0))return e;this.$flag=!0}));if(e=Sk.misceval.callsimArray(this.$callable,[]),!Sk.misceval.richCompareBool(e,this.$sentinel,"Eq",!1))return e;this.$flag=!0}},flags:{sk$acceptable_as_base_class:!1}}),Sk.builtin.seq_iter_=Sk.abstr.buildIteratorClass("iterator",{constructor:function(e){this.$index=0,this.$seq=e},iternext(e){let t;return t=Sk.misceval.tryCatch((()=>this.$seq.mp$subscript(new Sk.builtin.int_(this.$index++),e)),(e=>{if(!(e instanceof Sk.builtin.IndexError||e instanceof Sk.builtin.StopIteration))throw e})),e?t:Sk.misceval.retryOptionalSuspensionOrThrow(t)},methods:{__length_hint__:{$flags:{NoArgs:!0},$meth(){if(this.$seq.sq$length)return this.$seq.sq$length()-this.$index;throw new Sk.builtin.NotImplementedError("len is not implemented for "+Sk.abstr.typeName(this.$seq))}}},flags:{sk$acceptable_as_base_class:!1}}),Sk.exportSymbol("Sk.builtin.callable_iter_",Sk.builtin.callable_iter_)},function(e,t){Sk.builtin.list=Sk.abstr.buildNativeClass("list",{constructor:function(e){void 0===e?e=[]:Array.isArray(e)||(e=Sk.misceval.arrayFromIterable(e)),Sk.asserts.assert(this instanceof Sk.builtin.list,"bad call to list, use 'new' with an Array of python objects"),this.v=e,this.in$repr=!1},slots:{tp$getattr:Sk.generic.getAttr,tp$as_sequence_or_mapping:!0,tp$hash:Sk.builtin.none.none$,tp$doc:"Built-in mutable sequence.\n\nIf no argument is given, the constructor creates a new empty list.\nThe argument must be an iterable if specified.",tp$new:Sk.generic.new,tp$init(e,t){return Sk.abstr.checkNoKwargs("list",t),Sk.abstr.checkArgsLen("list",e,0,1),Sk.misceval.chain(Sk.misceval.arrayFromIterable(e[0],!0),(e=>{this.v=e}))},$r(){if(this.in$repr)return new Sk.builtin.str("[...]");this.in$repr=!0;const e=this.v.map((e=>Sk.misceval.objectRepr(e)));return this.in$repr=!1,new Sk.builtin.str("["+e.join(", ")+"]")},tp$richcompare:Sk.generic.seqCompare,tp$iter(){return new n(this)},sq$length(){return this.v.length},sq$concat(e){if(!(e instanceof Sk.builtin.list))throw new Sk.builtin.TypeError("can only concatenate list to list");return new Sk.builtin.list(this.v.concat(e.v))},sq$contains(e){for(let t=this.tp$iter(),n=t.tp$iternext();void 0!==n;n=t.tp$iternext())if(n===e||Sk.misceval.richCompareBool(n,e,"Eq"))return!0;return!1},sq$repeat(e){if(!Sk.misceval.isIndex(e))throw new Sk.builtin.TypeError("can't multiply sequence by non-int of type '"+Sk.abstr.typeName(e)+"'");if((e=Sk.misceval.asIndexSized(e,Sk.builtin.OverflowError))*this.v.length>Number.MAX_SAFE_INTEGER)throw new Sk.builtin.OverflowError;const t=[];for(let n=0;n<e;n++)for(let e=0;e<this.v.length;e++)t.push(this.v[e]);return new Sk.builtin.list(t)},mp$subscript(e){if(Sk.misceval.isIndex(e))return e=Sk.misceval.asIndexSized(e,Sk.builtin.IndexError),e=this.list$inRange(e,"list index out of range"),this.v[e];if(e instanceof Sk.builtin.slice){const t=[];return e.sssiter$(this.v.length,(e=>{t.push(this.v[e])})),new Sk.builtin.list(t)}throw new Sk.builtin.TypeError("list indices must be integers or slices, not "+Sk.abstr.typeName(e))},mp$ass_subscript(e,t){void 0===t?this.del$subscript(e):this.ass$subscript(e,t)},sq$inplace_concat(e){return e===this?(this.v.push(...this.v),this):Sk.misceval.chain(Sk.misceval.iterFor(Sk.abstr.iter(e),(e=>{this.v.push(e)})),(()=>this))},sq$inplace_repeat(e){if(!Sk.misceval.isIndex(e))throw new Sk.builtin.TypeError("can't multiply sequence by non-int of type '"+Sk.abstr.typeName(e)+"'");e=Sk.misceval.asIndexSized(e,Sk.builtin.OverflowError);const t=this.v.length;if(0>=e)this.v.length=0;else if(e*t>Number.MAX_SAFE_INTEGER)throw new Sk.builtin.OverflowError;for(let n=1;n<e;n++)for(let e=0;e<t;e++)this.v.push(this.v[e]);return this}},methods:{__reversed__:{$meth(){return new i(this)},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return a reverse iterator over the list."},clear:{$meth(){return this.v.length=0,Sk.builtin.none.none$},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Remove all items from list."},copy:{$meth(){return new Sk.builtin.list(this.v.slice(0))},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return a shallow copy of the list."},append:{$meth(e){return this.v.push(e),Sk.builtin.none.none$},$flags:{OneArg:!0},$textsig:"($self, object, /)",$doc:"Append object to the end of the list."},insert:{$meth(e,t){return e=Sk.misceval.asIndexSized(e,Sk.builtin.OverflowError),({start:e}=Sk.builtin.slice.startEnd$wrt(this,e)),this.v.splice(e,0,t),Sk.builtin.none.none$},$flags:{MinArgs:2,MaxArgs:2},$textsig:"($self, index, object, /)",$doc:"Insert object before index."},extend:{$meth(e){return e===this?(this.v.push(...this.v),Sk.builtin.none.none$):Sk.misceval.chain(Sk.misceval.iterFor(Sk.abstr.iter(e),(e=>{this.v.push(e)})),(()=>Sk.builtin.none.none$))},$flags:{OneArg:!0},$textsig:"($self, iterable, /)",$doc:"Extend list by appending elements from the iterable."},pop:{$meth(e){e=void 0===e?this.v.length-1:Sk.misceval.asIndexSized(e,Sk.builtin.OverflowError),e=this.list$inRange(e,"pop index out of range");const t=this.v[e];return this.v.splice(e,1),t},$flags:{MinArgs:0,MaxArgs:1},$textsig:"($self, index=-1, /)",$doc:"Remove and return item at index (default last).\n\nRaises IndexError if list is empty or index is out of range."},remove:{$meth(e){if(-1===(e=this.list$indexOf(e)))throw new Sk.builtin.ValueError("list.remove(x): x not in list");return this.v.splice(e,1),Sk.builtin.none.none$},$flags:{OneArg:!0},$textsig:"($self, value, /)",$doc:"Remove first occurrence of value.\n\nRaises ValueError if the value is not present."},sort:{$meth(e,t){if(e.length)throw new Sk.builtin.TypeError("sort() takes no positional arguments");const[n,i]=Sk.abstr.copyKeywordsToNamedArgs("sort",["key","reverse"],e,t,[Sk.builtin.none.none$,Sk.builtin.bool.false$]);return this.list$sort(void 0,n,i)},$flags:{FastCall:!0},$textsig:"($self, /, *, key=None, reverse=False)",$doc:"Stable sort *IN PLACE*."},index:{$meth(e,t,n){if(void 0!==t&&!Sk.misceval.isIndex(t)||void 0!==n&&!Sk.misceval.isIndex(n))throw new Sk.builtin.TypeError("slice indices must be integers or have an __index__ method");if(-1===(t=this.list$indexOf(e,t,n)))throw new Sk.builtin.ValueError(Sk.misceval.objectRepr(e)+" is not in list");return new Sk.builtin.int_(t)},$flags:{MinArgs:1,MaxArgs:3},$textsig:"($self, value, start=0, stop=sys.maxsize, /)",$doc:"Return first index of value.\n\nRaises ValueError if the value is not present."},count:{$meth(e){let t=0;const n=this.v.length;for(let i=0;i<n;i++)(this.v[i]===e||Sk.misceval.richCompareBool(this.v[i],e,"Eq"))&&(t+=1);return new Sk.builtin.int_(t)},$flags:{OneArg:!0},$textsig:"($self, value, /)",$doc:"Return number of occurrences of value."},reverse:{$meth(){return this.list$reverse(),Sk.builtin.none.none$},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Reverse *IN PLACE*."}},proto:{sk$asarray(){return this.v.slice(0)},list$sort:function(e,t,n){const i=null!=t&&t!==Sk.builtin.none.none$;var s=null!=e&&e!==Sk.builtin.none.none$;let r;if(void 0===n)r=!1;else{if(!Sk.builtin.checkInt(n))throw new Sk.builtin.TypeError("an integer is required");r=Sk.misceval.isTrue(n)}n=new Sk.builtin.timSort(this),this.v=[];const o=new Sk.builtin.int_(0);if(i){n.lt=s?function(t,n){return t=Sk.misceval.callsimArray(e,[t[0],n[0]]),Sk.misceval.richCompareBool(t,o,"Lt")}:function(e,t){return Sk.misceval.richCompareBool(e[0],t[0],"Lt")};for(let e=0;e<n.listlength;e++){s=n.list.v[e];const i=Sk.misceval.callsimArray(t,[s]);n.list.v[e]=[i,s]}}else s&&(n.lt=function(t,n){return t=Sk.misceval.callsimArray(e,[t,n]),Sk.misceval.richCompareBool(t,o,"Lt")});if(r&&n.list.list$reverse(),n.sort(),r&&n.list.list$reverse(),i)for(t=0;t<n.listlength;t++)s=n.list.v[t][1],n.list.v[t]=s;if(t=0<this.sq$length(),this.v=n.list.v,t)throw new Sk.builtin.ValueError("list modified during sort");return Sk.builtin.none.none$},list$inRange(e,t){if(0>e&&(e+=this.v.length),0<=e&&e<this.v.length)return e;throw new Sk.builtin.IndexError(t)},list$indexOf(e,t,n){for(({start:t,end:n}=Sk.builtin.slice.startEnd$wrt(this,t,n));t<n&&t<this.v.length;t++)if(this.v[t]===e||Sk.misceval.richCompareBool(this.v[t],e,"Eq"))return t;return-1},list$reverse(){this.v.reverse()},ass$subscript(e,t){if(Sk.misceval.isIndex(e))this.ass$index(e,t);else{if(!(e instanceof Sk.builtin.slice))throw new Sk.builtin.TypeError("list indices must be integers or slices, not "+Sk.abstr.typeName(e));{const{start:n,stop:i,step:s}=e.slice$indices(this.v.length);1===s?this.ass$slice(n,i,t):this.ass$ext_slice(e,t)}}},ass$index(e,t){e=Sk.misceval.asIndexSized(e,Sk.builtin.IndexError),e=this.list$inRange(e,"list assignment index out of range"),this.v[e]=t},ass$slice(e,t,n){if(!Sk.builtin.checkIterable(n))throw new Sk.builtin.TypeError("can only assign an iterable");n=Sk.misceval.arrayFromIterable(n),this.v.splice(e,t-e,...n)},ass$ext_slice(e,t){const n=[];if(e.sssiter$(this.v.length,(e=>{n.push(e)})),!Sk.builtin.checkIterable(t))throw new Sk.builtin.TypeError("must assign iterable to extended slice");if(e=Sk.misceval.arrayFromIterable(t),n.length!==e.length)throw new Sk.builtin.ValueError("attempt to assign sequence of size "+e.length+" to extended slice of size "+n.length);for(t=0;t<n.length;t++)this.v.splice(n[t],1,e[t])},del$subscript(e){if(Sk.misceval.isIndex(e))this.del$index(e);else{if(!(e instanceof Sk.builtin.slice))throw new Sk.builtin.TypeError("list indices must be integers, not "+Sk.abstr.typeName(e));{const{start:t,stop:n,step:i}=e.slice$indices(this.v.length);1===i?this.del$slice(t,n):this.del$ext_slice(e,0<i?1:0)}}},del$index(e){e=Sk.misceval.asIndexSized(e,Sk.builtin.IndexError),e=this.list$inRange(e,"list assignment index out of range"),this.v.splice(e,1)},del$slice(e,t){this.v.splice(e,t-e)},del$ext_slice(e,t){let n=0;e.sssiter$(this.v.length,(e=>{this.v.splice(e-n,1),n+=t}))}}}),Sk.exportSymbol("Sk.builtin.list",Sk.builtin.list),Sk.builtin.list.py2$methods={sort:{$name:"sort",$meth(e,t){const[n,i,s]=Sk.abstr.copyKeywordsToNamedArgs("sort",["cmp","key","reverse"],e,t,[Sk.builtin.none.none$,Sk.builtin.none.none$,Sk.builtin.bool.false$]);return this.list$sort(n,i,s)},$flags:{FastCall:!0},$textsig:"($self, cmp=None, key=None, reverse=False)",$doc:"Stable sort *IN PLACE*."}};var n=Sk.abstr.buildIteratorClass("list_iterator",{constructor:function(e){this.$index=0,this.$seq=e.v},iternext:Sk.generic.iterNextWithArray,methods:{__length_hint__:Sk.generic.iterLengthHintWithArrayMethodDef},flags:{sk$acceptable_as_base_class:!1}}),i=Sk.abstr.buildIteratorClass("list_reverseiterator",{constructor:function(e){this.$index=e.v.length-1,this.$seq=e.v},iternext(){const e=this.$seq[this.$index--];if(void 0!==e)return e;this.tp$iternext=()=>{}},methods:{__length_hint__:Sk.generic.iterReverseLengthHintMethodDef},flags:{sk$acceptable_as_base_class:!1}})},function(e,t,n){function i(e){var t=e.replace(S,"").replace(w,"_").toLowerCase();return void 0===(t=y[t])?e:t}function s(e,t,n){if(void 0===t)t="utf-8";else{if(!Sk.builtin.checkString(t))throw new Sk.builtin.TypeError(e+"() argument "+("bytesstr".includes(e)?2:1)+" must be str not "+Sk.abstr.typeName(t));t=t.$jsstr()}if(void 0===n)n="strict";else{if(!Sk.builtin.checkString(n))throw new Sk.builtin.TypeError(e+"() argument "+("bytesstr".includes(e)?3:2)+" must be str not "+Sk.abstr.typeName(n));n=n.$jsstr()}return{encoding:t,errors:n}}function r(e,t,n){if(e=e.$jsstr(),t=i(t),"strict"!==n&&"ignore"!==n&&"replace"!==n)throw new Sk.builtin.NotImplementedError("'"+n+"' error handling not implemented in Skulpt");if("ascii"===t){for(s in t=[],e){const i=e.charCodeAt(s);if(127<i){if("strict"===n)throw n=o(i),new Sk.builtin.UnicodeEncodeError("'ascii' codec can't encode character '"+n+"' in position "+s+": ordinal not in range(128)");"replace"===n&&t.push(63)}else t.push(i)}var s=new Uint8Array(t)}else{if("utf-8"!==t)throw new Sk.builtin.LookupError("unknown encoding: "+t);s=k.encode(e)}return new Sk.builtin.bytes(s)}function o(e){var t=265>=e?"\\x":"\\u";return 3===(e=e.toString(16)).length&&(e=e.slice(1,3)),1===e.length?t+"0"+e:t+e}function a(e,t){if(({encoding:e,errors:t}=s("decode",e,t)),e=i(e),"strict"!==t&&"ignore"!==t&&"replace"!==t)throw new Sk.builtin.NotImplementedError("'"+t+"' error handling not implemented in Skulpt");if("ascii"===e){e=this.v;var n="";for(let i=0;i<e.length;i++){const s=e[i];if(127<s){if("strict"===t)throw new Sk.builtin.UnicodeDecodeError("'ascii' codec can't decode byte 0x"+s.toString(16)+" in position "+i+": ordinal not in range(128)");"replace"===t&&(n+=String.fromCharCode(65533))}else n+=String.fromCharCode(s)}e=n}else{if("utf-8"!==e)throw new Sk.builtin.LookupError("unknown encoding: "+e);e:if(e=this.v,n=t,t=C.decode(e),"replace"===n)e=t;else{if("strict"===n){if(-1===(n=t.indexOf("\ufffd"))){e=t;break e}throw new Sk.builtin.UnicodeDecodeError("'utf-8' codec can't decode byte 0x"+e[n].toString(16)+" in position "+n+": invalid start byte")}e=t.replace(/\ufffd/g,"")}}return new Sk.builtin.str(e)}function l(e,t){return function(n,i,s){if(!(n instanceof Sk.builtin.bytes||n instanceof Sk.builtin.tuple))throw new Sk.builtin.TypeError(e+" first arg must be bytes or a tuple of bytes, not "+Sk.abstr.typeName(n));if(({start:i,end:s}=Sk.builtin.slice.startEnd$wrt(this,i,s)),s<i)return Sk.builtin.bool.false$;if(i=this.v.subarray(i,s),n instanceof Sk.builtin.tuple){for(let e=Sk.abstr.iter(n),s=e.tp$iternext();void 0!==s;s=e.tp$iternext())if(s=this.get$raw(s),t(i,s))return Sk.builtin.bool.true$;return Sk.builtin.bool.false$}return t(i,n.v)?Sk.builtin.bool.true$:Sk.builtin.bool.false$}}function c(e){return function(t,n,i){return t=this.get$tgt(t),({start:n,end:i}=Sk.builtin.slice.startEnd$wrt(this,n,i)),i<n?-1:"number"===typeof t?(t=e?this.v.lastIndexOf(t,i-1):this.v.indexOf(t,n))>=n&&t<i?t:-1:e?this.find$subright(t,n,i):this.find$subleft(t,n,i)}}function u(e){return function(t){let n;if(t=this.get$raw(t),e){if(n=this.find$subright(t,0,this.v.length),0>n)return new Sk.builtin.tuple([new Sk.builtin.bytes,new Sk.builtin.bytes,this])}else if(n=this.find$subleft(t,0,this.v.length),0>n)return new Sk.builtin.tuple([this,new Sk.builtin.bytes,new Sk.builtin.bytes]);return new Sk.builtin.tuple([new Sk.builtin.bytes(this.v.subarray(0,n)),new Sk.builtin.bytes(t),new Sk.builtin.bytes(this.v.subarray(n+t.length))])}}function h(e,t){return function(n){var i=void 0===n||n===Sk.builtin.none.none$?new Uint8Array([9,10,11,12,13,32,133]):this.get$raw(n);n=0;var s=this.v.length;if(e)for(;n<s&&i.includes(this.v[n]);)n++;if(t)for(;s>n&&i.includes(this.v[s-1]);)s--;for(i=new Uint8Array(s-n),s=0;s<i.length;s++)i[s]=this.v[s+n];return new Sk.builtin.bytes(i)}}function d(e,t,n){return function(i,s){if(void 0===s)s=32;else{if(!(s instanceof Sk.builtin.bytes&&1==s.v.length))throw new Sk.builtin.TypeError(e+"() argument 2 must be a byte string of length 1, not "+Sk.abstr.typeName(s));s=s.v[0]}const r=this.v.length;if((i=Sk.misceval.asIndexSized(i,Sk.builtin.OverflowError))<=r)return new Sk.builtin.bytes(this.v);const o=new Uint8Array(i);let a,l;n?(a=Math.floor((i-r)/2),l=(i-r)%2?a+1:a):t?(a=i-r,l=0):(a=0,l=i-r),o.fill(s,0,a);for(let e=0;e<r;e++)o[e+a]=this.v[e];return o.fill(s,i-l),new Sk.builtin.bytes(o)}}function f(e){return 9<=e&&13>=e||32===e}function g(e){return 97<=e&&122>=e}function p(e){return 65<=e&&90>=e}function m(e){return 48<=e&&57>=e}function b(e,t){return function(){return 0===this.v.length?t?Sk.builtin.bool.true$:Sk.builtin.bool.false$:this.v.every((t=>e(t)))?Sk.builtin.bool.true$:Sk.builtin.bool.false$}}function _(e,t){return function(){let n=!1;for(let i=0;i<this.v.length;i++){if(t(this.v[i]))return Sk.builtin.bool.false$;!n&&e(this.v[i])&&(n=!0)}return n?Sk.builtin.bool.true$:Sk.builtin.bool.false$}}function v(e){return function(){const t=new Uint8Array(this.v.length);for(let n=0;n<this.v.length;n++)t[n]=e(this.v[n]);return new Sk.builtin.bytes(t)}}n(30);const y={utf:"utf-8",utf8:"utf-8",utf_8:"utf-8",ascii:"ascii"};var S=/\s+/g,w=/[_-]+/g;const k=new TextEncoder,C=new TextDecoder;Sk.builtin.bytes=Sk.abstr.buildNativeClass("bytes",{constructor:function(e){if(!(this instanceof Sk.builtin.bytes))throw new TypeError("bytes is a constructor use 'new'");if(void 0===e)this.v=new Uint8Array;else if(e instanceof Uint8Array)this.v=e;else if(Array.isArray(e))Sk.asserts.assert(e.every((e=>0<=e&&255>=e)),"bad internal call to bytes with array"),this.v=new Uint8Array(e);else if("string"===typeof e){let t;const n=new Uint8Array(e.length),i=e.length;for(let s=0;s<i;s++){if(t=e.charCodeAt(s),255<t)throw new Sk.builtin.UnicodeDecodeError("invalid string at index "+s+" (possibly contains a unicode character)");n[s]=t}this.v=n}else{if("number"!==typeof e)throw new Sk.builtin.TypeError("bad argument to bytes constructor");this.v=new Uint8Array(e)}},slots:{tp$getattr:Sk.generic.getAttr,tp$doc:"bytes(iterable_of_ints) -> bytes\nbytes(string, encoding[, errors]) -> bytes\nbytes(bytes_or_buffer) -> immutable copy of bytes_or_buffer\nbytes(int) -> bytes object of size given by the parameter initialized with null bytes\nbytes() -> empty bytes object\n\nConstruct an immutable array of bytes from:\n  - an iterable yielding integers in range(256)\n  - a text string encoded using the specified encoding\n  - any object implementing the buffer API.\n  - an integer",tp$new(e,t){if(this!==Sk.builtin.bytes.prototype)return this.$subtype_new(e,t);if(t=t||[],!(1>=e.length&&0===+t.length)){if([e,n,t]=Sk.abstr.copyKeywordsToNamedArgs("bytes",[null,"pySource","errors"],e,t),({encoding:n,errors:t}=s("bytes",n,t)),!Sk.builtin.checkString(e))throw new Sk.builtin.TypeError("encoding or errors without a string argument");return r(e,n,t)}if(void 0===(e=e[0]))return new Sk.builtin.bytes;if(void 0!==(t=Sk.abstr.lookupSpecial(e,Sk.builtin.str.$bytes))){var n=Sk.misceval.callsimOrSuspendArray(t,[]);return Sk.misceval.chain(n,(e=>{if(!Sk.builtin.checkBytes(e))throw new Sk.builtin.TypeError("__bytes__ returned non-bytes (type "+Sk.abstr.typeName(e)+")");return e}))}if(Sk.misceval.isIndex(e)){if(0>(n=Sk.misceval.asIndexSized(e,Sk.builtin.OverflowError)))throw new Sk.builtin.ValueError("negative count");return new Sk.builtin.bytes(n)}if(Sk.builtin.checkBytes(e))return new Sk.builtin.bytes(e.v);if(Sk.builtin.checkString(e))throw new Sk.builtin.TypeError("string argument without an encoding");if(Sk.builtin.checkIterable(e)){let t=[];return n=Sk.misceval.iterFor(Sk.abstr.iter(e),(e=>{if(0>(e=Sk.misceval.asIndexSized(e))||255<e)throw new Sk.builtin.ValueError("bytes must be in range(0, 256)");t.push(e)})),Sk.misceval.chain(n,(()=>new Sk.builtin.bytes(t)))}throw new Sk.builtin.TypeError("cannot convert '"+Sk.abstr.typeName(n)+"' object into bytes")},$r(){let e,t="'";const n=-1!==this.v.indexOf(34);let i="";for(let s=0;s<this.v.length;s++)if(e=this.v[s],9>e||10<e&&13>e||13<e&&32>e||126<e)i+=o(e);else if(9===e||10===e||13===e||39===e||92===e)switch(e){case 9:i+="\\t";break;case 10:i+="\\n";break;case 13:i+="\\r";break;case 39:n?i+="\\'":(i+="'",t='"');break;case 92:i+="\\\\"}else i+=String.fromCharCode(e);return new Sk.builtin.str("b"+t+i+t)},tp$str(){return this.$r()},tp$iter(){return new x(this)},tp$richcompare(e,t){if(this===e&&Sk.misceval.opAllowsEquality(t))return!0;if(!(e instanceof Sk.builtin.bytes))return Sk.builtin.NotImplemented.NotImplemented$;const n=this.v;if(e=e.v,n.length!==e.length&&("Eq"===t||"NotEq"===t))return"Eq"!==t;let i;const s=Math.min(n.length,e.length);for(i=0;i<s&&n[i]===e[i];i++);switch(t){case"Lt":return i===s&&n.length<e.length||n[i]<e[i];case"LtE":return i===s&&n.length<=e.length||n[i]<=e[i];case"Eq":return i===s;case"NotEq":return i<s;case"Gt":return i===s&&n.length>e.length||n[i]>e[i];case"GtE":return i===s&&n.length>=e.length||n[i]>=e[i]}},tp$hash(){return new Sk.builtin.str(this.$jsstr()).tp$hash()},tp$as_sequence_or_mapping:!0,mp$subscript(e){if(Sk.misceval.isIndex(e)){let t=Sk.misceval.asIndexSized(e,Sk.builtin.IndexError);if(void 0!==t){if(0>t&&(t=this.v.length+t),0>t||t>=this.v.length)throw new Sk.builtin.IndexError("index out of range");return new Sk.builtin.int_(this.v[t])}}else if(e instanceof Sk.builtin.slice){const t=[];return e.sssiter$(this.v.length,(e=>{t.push(this.v[e])})),new Sk.builtin.bytes(new Uint8Array(t))}throw new Sk.builtin.TypeError("byte indices must be integers or slices, not "+Sk.abstr.typeName(e))},sq$length(){return this.v.length},sq$concat(e){if(!(e instanceof Sk.builtin.bytes))throw new Sk.builtin.TypeError("can't concat "+Sk.abstr.typeName(e)+" to bytes");const t=new Uint8Array(this.v.length+e.v.length);let n;for(n=0;n<this.v.length;n++)t[n]=this.v[n];for(let i=0;i<e.v.length;i++,n++)t[n]=e.v[i];return new Sk.builtin.bytes(t)},sq$repeat(e){if(!Sk.misceval.isIndex(e))throw new Sk.builtin.TypeError("can't multiply sequence by non-int of type '"+Sk.abstr.typeName(e)+"'");const t=(e=Sk.misceval.asIndexSized(e,Sk.builtin.OverflowError))*this.v.length;if(t>Number.MAX_SAFE_INTEGER)throw new Sk.builtin.OverflowError;if(0>=e)return new Sk.builtin.bytes;e=new Uint8Array(t);let n=0;for(;n<t;)for(let t=0;t<this.v.length;t++)e[n++]=this.v[t];return new Sk.builtin.bytes(e)},sq$contains(e){return-1!==this.find$left(e)},tp$as_number:!0,nb$remainder:Sk.builtin.str.prototype.nb$remainder},proto:{$jsstr(){let e="";for(let t=0;t<this.v.length;t++)e+=String.fromCharCode(this.v[t]);return e},get$tgt(e){if(e instanceof Sk.builtin.bytes)return e.v;if(0>(e=Sk.misceval.asIndexOrThrow(e,"argument should be integer or bytes-like object, not {tp$name}"))||255<e)throw new Sk.builtin.ValueError("bytes must be in range(0, 256)");return e},get$raw(e){if(e instanceof Sk.builtin.bytes)return e.v;throw new Sk.builtin.TypeError("a bytes-like object is required, not '"+Sk.abstr.typeName(e)+"'")},get$splitArgs:function(e,t){if(t=0>(t=Sk.misceval.asIndexSized(t,Sk.builtin.OverflowError))?1/0:t,null!==(e=Sk.builtin.checkNone(e)?null:this.get$raw(e))&&!e.length)throw new Sk.builtin.ValueError("empty separator");return{sep:e,maxsplit:t}},find$left:c(!1),find$right:c(!0),find$subleft:function(e,t,n){n=n-e.length+1;let i=t;for(;i<n;){if(e.every(((e,t)=>e===this.v[i+t])))return i;i++}return-1},find$subright(e,t,n){let i=n-e.length;for(;i>=t;){if(e.every(((e,t)=>e===this.v[i+t])))return i;i--}return-1},$subtype_new(e,t){const n=new this.constructor;return e=Sk.builtin.bytes.prototype.tp$new(e,t),n.v=e.v,n},sk$asarray(){const e=[];return this.v.forEach((t=>{e.push(new Sk.builtin.int_(t))})),e}},flags:{str$encode:r,$decode:a,check$encodeArgs:s},methods:{__getnewargs__:{$meth(){return new Sk.builtin.tuple(new Sk.builtin.bytes(this.v))},$flags:{NoArgs:!0},$textsig:null,$doc:null},capitalize:{$meth(){const e=this.v.length;if(0===e)return new Sk.builtin.bytes(this.v);const t=new Uint8Array(e);let n=this.v[0];t[0]=g(n)?n-32:n;for(let i=1;i<e;i++)n=this.v[i],t[i]=p(n)?n+32:n;return new Sk.builtin.bytes(t)},$flags:{NoArgs:!0},$textsig:null,$doc:"B.capitalize() -> copy of B\n\nReturn a copy of B with only its first character capitalized (ASCII)\nand the rest lower-cased."},center:{$meth:d("center",!1,!0),$flags:{MinArgs:1,MaxArgs:2},$textsig:null,$doc:"B.center(width[, fillchar]) -> copy of B\n\nReturn B centered in a string of length width.  Padding is\ndone using the specified fill character (default is a space)."},count:{$meth(e,t,n){e=this.get$tgt(e),({start:t,end:n}=Sk.builtin.slice.startEnd$wrt(this,t,n));let i=0;if("number"===typeof e)for(;t<n;t++)this.v[t]===e&&i++;else{n=n-e.length+1;for(let s=t;s<n;s++)e.every(((e,t)=>e===this.v[s+t]))&&(i++,s+=e.length-1)}return new Sk.builtin.int_(i)},$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"B.count(sub[, start[, end]]) -> int\n\nReturn the number of non-overlapping occurrences of subsection sub in\nbytes B[start:end].  Optional arguments start and end are interpreted\nas in slice notation."},decode:{$meth:a,$flags:{NamedArgs:["encoding","errors"]},$textsig:"($self, /, encoding='utf-8', errors='strict')",$doc:"Decode the bytes using the codec registered for encoding.\n\n  encoding\n    The encoding with which to decode the bytes.\n  errors\n    The error handling scheme to use for the handling of decoding errors.\n    The default is 'strict' meaning that decoding errors raise a\n    UnicodeDecodeError. Other possible values are 'ignore' and 'replace'\n    as well as any other name registered with codecs.register_error that\n    can handle UnicodeDecodeErrors."},endswith:{$meth:l("endswith",((e,t)=>{const n=e.length-t.length;return 0<=n&&t.every(((t,i)=>t===e[n+i]))})),$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"B.endswith(suffix[, start[, end]]) -> bool\n\nReturn True if B ends with the specified suffix, False otherwise.\nWith optional start, test B beginning at that position.\nWith optional end, stop comparing B at that position.\nsuffix can also be a tuple of bytes to try."},expandtabs:{$meth(e){e=Sk.misceval.asIndexSized(e,Sk.builtin.OverflowError,"an integer is required (got type {tp$nam})");const t=[];let n=0;for(let s=0;s<this.v.length;s++){var i=this.v[s];9===i?(i=e-n%e,t.push(...Array(i).fill(32)),n+=i):10===i||13===i?(t.push(i),n=0):(t.push(i),n++)}return new Sk.builtin.bytes(new Uint8Array(t))},$flags:{NamedArgs:["tabsize"],Defaults:[8]},$textsig:null,$doc:"B.expandtabs(tabsize=8) -> copy of B\n\nReturn a copy of B where all tab characters are expanded using spaces.\nIf tabsize is not given, a tab size of 8 characters is assumed."},find:{$meth:function(e,t,n){return new Sk.builtin.int_(this.find$left(e,t,n))},$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"B.find(sub[, start[, end]]) -> int\n\nReturn the lowest index in B where subsection sub is found,\nsuch that sub is contained within B[start,end].  Optional\narguments start and end are interpreted as in slice notation.\n\nReturn -1 on failure."},hex:{$meth(){let e="";for(let t=0;t<this.v.length;t++)e+=this.v[t].toString(16).padStart(2,"0");return new Sk.builtin.str(e)},$flags:{NoArgs:!0},$textsig:null,$doc:"B.hex() -> string\n\nCreate a string of hexadecimal numbers from a bytes object.\nExample: b'\\xb9\\x01\\xef'.hex() -> 'b901ef'."},index:{$meth:function(e,t,n){if(-1===(e=this.find$left(e,t,n)))throw new Sk.builtin.ValueError("subsection not found");return new Sk.builtin.int_(e)},$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"B.index(sub[, start[, end]]) -> int\n\nReturn the lowest index in B where subsection sub is found,\nsuch that sub is contained within B[start,end].  Optional\narguments start and end are interpreted as in slice notation.\n\nRaises ValueError when the subsection is not found."},isalnum:{$meth:b((e=>m(e)||g(e)||p(e))),$flags:{NoArgs:!0},$textsig:null,$doc:"B.isalnum() -> bool\n\nReturn True if all characters in B are alphanumeric\nand there is at least one character in B, False otherwise."},isalpha:{$meth:b((e=>65<=e&&90>=e||97<=e&&122>=e)),$flags:{NoArgs:!0},$textsig:null,$doc:"B.isalpha() -> bool\n\nReturn True if all characters in B are alphabetic\nand there is at least one character in B, False otherwise."},isascii:{$meth:b((e=>0<=e&&127>=e),!0),$flags:{NoArgs:!0},$textsig:null,$doc:"B.isascii() -> bool\n\nReturn True if B is empty or all characters in B are ASCII,\nFalse otherwise."},isdigit:{$meth:b(m),$flags:{NoArgs:!0},$textsig:null,$doc:"B.isdigit() -> bool\n\nReturn True if all characters in B are digits\nand there is at least one character in B, False otherwise."},islower:{$meth:_(g,p),$flags:{NoArgs:!0},$textsig:null,$doc:"B.islower() -> bool\n\nReturn True if all cased characters in B are lowercase and there is\nat least one cased character in B, False otherwise."},isspace:{$meth:b(f),$flags:{NoArgs:!0},$textsig:null,$doc:"B.isspace() -> bool\n\nReturn True if all characters in B are whitespace\nand there is at least one character in B, False otherwise."},istitle:{$meth:function(){let e=!1,t=!1;for(let n=0;n<this.v.length;n++){const i=this.v[n];if(p(i)){if(e)return Sk.builtin.bool.false$;t=e=!0}else if(g(i)){if(!e)return Sk.builtin.bool.false$;t=!0}else e=!1}return t?Sk.builtin.bool.true$:Sk.builtin.bool.false$},$flags:{NoArgs:!0},$textsig:null,$doc:"B.istitle() -> bool\n\nReturn True if B is a titlecased string and there is at least one\ncharacter in B, i.e. uppercase characters may only follow uncased\ncharacters and lowercase characters only cased ones. Return False\notherwise."},isupper:{$meth:_(p,g),$flags:{NoArgs:!0},$textsig:null,$doc:"B.isupper() -> bool\n\nReturn True if all cased characters in B are uppercase and there is\nat least one cased character in B, False otherwise."},join:{$meth(e){const t=[];let n=0;return Sk.misceval.chain(Sk.misceval.iterFor(Sk.abstr.iter(e),(e=>{if(!(e instanceof Sk.builtin.bytes))throw new Sk.builtin.TypeError("sequence item "+n+": expected a bytes-like object, "+Sk.abstr.typeName(e)+" found");n++,t.length&&t.push(...this.v),t.push(...e.v)})),(()=>new Sk.builtin.bytes(new Uint8Array(t))))},$flags:{OneArg:!0},$textsig:"($self, iterable_of_bytes, /)",$doc:"Concatenate any number of bytes objects.\n\nThe bytes whose method is called is inserted in between each pair.\n\nThe result is returned as a new bytes object.\n\nExample: b'.'.join([b'ab', b'pq', b'rs']) -> b'ab.pq.rs'."},ljust:{$meth:d("ljust",!1,!1),$flags:{MinArgs:1,MaxArgs:2},$textsig:null,$doc:"B.ljust(width[, fillchar]) -> copy of B\n\nReturn B left justified in a string of length width. Padding is\ndone using the specified fill character (default is a space)."},lower:{$meth:v((e=>p(e)?e+32:e)),$flags:{NoArgs:!0},$textsig:null,$doc:"B.lower() -> copy of B\n\nReturn a copy of B with all ASCII characters converted to lowercase."},lstrip:{$meth:h(!0,!1),$flags:{MinArgs:0,MaxArgs:1},$textsig:"($self, bytes=None, /)",$doc:"Strip leading bytes contained in the argument.\n\nIf the argument is omitted or None, strip leading  ASCII whitespace."},partition:{$meth:u(!1),$flags:{OneArg:!0},$textsig:"($self, sep, /)",$doc:"Partition the bytes into three parts using the given separator.\n\nThis will search for the separator sep in the bytes. If the separator is found,\nreturns a 3-tuple containing the part before the separator, the separator\nitself, and the part after it.\n\nIf the separator is not found, returns a 3-tuple containing the original bytes\nobject and two empty bytes objects."},replace:{$meth(e,t,n){e=this.get$raw(e),t=this.get$raw(t),n=0>(n=void 0===n?-1:Sk.misceval.asIndexSized(n,Sk.builtin.OverflowError))?1/0:n;const i=[];let s=0;for(var r=0;r<this.v.length&&s<n;){const n=this.find$subleft(e,r,this.v.length);if(-1===n)break;for(;r<n;r++)i.push(this.v[r]);i.push(...t),r=n+e.length,s++}for(;r<this.v.length;r++)i.push(this.v[r]);return new Sk.builtin.bytes(new Uint8Array(i))},$flags:{MinArgs:2,MaxArgs:3},$textsig:"($self, old, new, count=-1, /)",$doc:"Return a copy with all occurrences of substring old replaced by new.\n\n  count\n    Maximum number of occurrences to replace.\n    -1 (the default value) means replace all occurrences.\n\nIf the optional argument count is given, only the first count occurrences are\nreplaced."},rfind:{$meth(e,t,n){return new Sk.builtin.int_(this.find$right(e,t,n))},$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"B.rfind(sub[, start[, end]]) -> int\n\nReturn the highest index in B where subsection sub is found,\nsuch that sub is contained within B[start,end].  Optional\narguments start and end are interpreted as in slice notation.\n\nReturn -1 on failure."},rindex:{$meth:function(e,t,n){if(-1===(e=this.find$right(e,t,n)))throw new Sk.builtin.ValueError("subsection not found");return new Sk.builtin.int_(e)},$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"B.rindex(sub[, start[, end]]) -> int\n\nReturn the highest index in B where subsection sub is found,\nsuch that sub is contained within B[start,end].  Optional\narguments start and end are interpreted as in slice notation.\n\nRaise ValueError when the subsection is not found."},rjust:{$meth:d("rjust",!0,!1),$flags:{MinArgs:1,MaxArgs:2},$textsig:null,$doc:"B.rjust(width[, fillchar]) -> copy of B\n\nReturn B right justified in a string of length width. Padding is\ndone using the specified fill character (default is a space)"},rpartition:{$meth:u(!0),$flags:{OneArg:!0},$textsig:"($self, sep, /)",$doc:"Partition the bytes into three parts using the given separator.\n\nThis will search for the separator sep in the bytes, starting at the end. If\nthe separator is found, returns a 3-tuple containing the part before the\nseparator, the separator itself, and the part after it.\n\nIf the separator is not found, returns a 3-tuple containing two empty bytes\nobjects and the original bytes object."},rsplit:{$meth:function(e,t){({sep:e,maxsplit:t}=this.get$splitArgs(e,t));const n=[];let i=0,s=this.v.length;if(null!==e){for(;0<=s&&i<t;){const t=this.find$subright(e,0,s);if(-1===t)break;n.push(new Sk.builtin.bytes(this.v.subarray(t+e.length,s))),s=t,i++}n.push(new Sk.builtin.bytes(this.v.subarray(0,s)))}else{for(s--;i<t;){for(;f(this.v[s]);)s--;if(0>s)break;for(e=s+1,s--;0<=s&&!f(this.v[s]);)s--;n.push(new Sk.builtin.bytes(this.v.subarray(s+1,e))),i++}if(0<=s){for(;f(this.v[s]);)s--;0<=s&&n.push(new Sk.builtin.bytes(this.v.subarray(0,s+1)))}}return new Sk.builtin.list(n.reverse())},$flags:{NamedArgs:["sep","maxsplit"],Defaults:[Sk.builtin.none.none$,-1]},$textsig:"($self, /, sep=None, maxsplit=-1)",$doc:"Return a list of the sections in the bytes, using sep as the delimiter.\n\n  sep\n    The delimiter according which to split the bytes.\n    None (the default value) means split on ASCII whitespace characters\n    (space, tab, return, newline, formfeed, vertical tab).\n  maxsplit\n    Maximum number of splits to do.\n    -1 (the default value) means no limit.\n\nSplitting is done starting at the end of the bytes and working to the front."},rstrip:{$meth:h(!1,!0),$flags:{MinArgs:0,MaxArgs:1},$textsig:"($self, bytes=None, /)",$doc:"Strip trailing bytes contained in the argument.\n\nIf the argument is omitted or None, strip trailing ASCII whitespace."},split:{$meth:function(e,t){({sep:e,maxsplit:t}=this.get$splitArgs(e,t));const n=[],i=this.v.length;let s=0,r=0;if(null!==e){for(;r<i&&s<t;){const t=this.find$subleft(e,r,i);if(-1===t)break;n.push(new Sk.builtin.bytes(this.v.subarray(r,t))),r=t+e.length,s++}n.push(new Sk.builtin.bytes(this.v.subarray(r,i)))}else{for(;s<t;){for(;f(this.v[r]);)r++;if(r===i)break;for(e=r,r++;r<i&&!f(this.v[r]);)r++;n.push(new Sk.builtin.bytes(this.v.subarray(e,r))),s++}if(r<i){for(;f(this.v[r]);)r++;r<i&&n.push(new Sk.builtin.bytes(this.v.subarray(r,i)))}}return new Sk.builtin.list(n)},$flags:{NamedArgs:["sep","maxsplit"],Defaults:[Sk.builtin.none.none$,-1]},$textsig:"($self, /, sep=None, maxsplit=-1)",$doc:"Return a list of the sections in the bytes, using sep as the delimiter.\n\n  sep\n    The delimiter according which to split the bytes.\n    None (the default value) means split on ASCII whitespace characters\n    (space, tab, return, newline, formfeed, vertical tab).\n  maxsplit\n    Maximum number of splits to do.\n    -1 (the default value) means no limit."},splitlines:{$meth(e){e=Sk.misceval.isTrue(e);const t=[];let n=0,i=0;const s=this.v.length;for(;i<s;){var r=this.v[i];if(13===r){const s=10===this.v[i+1];r=e?s?i+2:i+1:i,t.push(new Sk.builtin.bytes(this.v.subarray(n,r))),i=n=s?i+2:i+1}else 10===r?(r=e?i+1:i,t.push(new Sk.builtin.bytes(this.v.subarray(n,r))),i=n=i+1):i++}return n<s&&t.push(new Sk.builtin.bytes(this.v.subarray(n,s))),new Sk.builtin.list(t)},$flags:{NamedArgs:["keepends"],Defaults:[!1]},$textsig:"($self, /, keepends=False)",$doc:"Return a list of the lines in the bytes, breaking at line boundaries.\n\nLine breaks are not included in the resulting list unless keepends is given and\ntrue."},startswith:{$meth:l("startswith",((e,t)=>t.length<=e.length&&t.every(((t,n)=>t===e[n])))),$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"B.startswith(prefix[, start[, end]]) -> bool\n\nReturn True if B starts with the specified prefix, False otherwise.\nWith optional start, test B beginning at that position.\nWith optional end, stop comparing B at that position.\nprefix can also be a tuple of bytes to try."},strip:{$meth:h(!0,!0),$flags:{MinArgs:0,MaxArgs:1},$textsig:"($self, bytes=None, /)",$doc:"Strip leading and trailing bytes contained in the argument.\n\nIf the argument is omitted or None, strip leading and trailing ASCII whitespace."},swapcase:{$meth:v((e=>p(e)?e+32:g(e)?e-32:e)),$flags:{NoArgs:!0},$textsig:null,$doc:"B.swapcase() -> copy of B\n\nReturn a copy of B with uppercase ASCII characters converted\nto lowercase ASCII and vice versa."},title:{$meth(){const e=this.v.length,t=new Uint8Array(e);let n=!1;for(let i=0;i<e;i++){const e=this.v[i];p(e)?(t[i]=n?e+32:e,n=!0):g(e)?(t[i]=n?e:e-32,n=!0):(t[i]=e,n=!1)}return new Sk.builtin.bytes(t)},$flags:{NoArgs:!0},$textsig:null,$doc:"B.title() -> copy of B\n\nReturn a titlecased version of B, i.e. ASCII words start with uppercase\ncharacters, all remaining cased characters have lowercase."},upper:{$meth:v((e=>g(e)?e-32:e)),$flags:{NoArgs:!0},$textsig:null,$doc:"B.upper() -> copy of B\n\nReturn a copy of B with all ASCII characters converted to uppercase."},zfill:{$meth(e){const t=(e=Sk.misceval.asIndexSized(e,Sk.builtin.IndexError))-this.v.length;if(0>=t)return new Sk.builtin.bytes(this.v);const n=new Uint8Array(e);let i,s=0;for(43!==this.v[0]&&45!==this.v[0]||(n[0]=this.v[0],s++),n.fill(48,s,s+t),i=s,s+=t;s<e;s++,i++)n[s]=this.v[i];return new Sk.builtin.bytes(n)},$flags:{OneArg:!0},$textsig:null,$doc:"B.zfill(width) -> copy of B\n\nPad a numeric string B with zeros on the left, to fill a field\nof the specified width.  B is never truncated."}},classmethods:{fromhex:{$meth:function(e){function t(t){for(let n=o;n<t;n+=2){let t=e.substr(n,2);if(!i.test(t))throw new Sk.builtin.ValueError("non-hexadecimal number found in fromhex() arg at position "+(n+1));s.push(parseInt(t,16))}}if(!Sk.builtin.checkString(e))throw new Sk.builtin.TypeError("fromhex() argument must be str, not "+Sk.abstr.typeName(e));e=e.$jsstr();const n=/\s+/g,i=/^[abcdefABCDEF0123456789]{2}$/,s=[];let r,o=0;for(;null!==(r=n.exec(e));)t(r.index),o=n.lastIndex;return t(e.length),new this(s)},$flags:{OneArg:!0},$textsig:"($type, string, /)",$doc:"Create a bytes object from a string of hexadecimal numbers.\n\nSpaces between two numbers are accepted.\nExample: bytes.fromhex('B9 01EF') -> b'\\\\xb9\\\\x01\\\\xef'."}}});var x=Sk.abstr.buildIteratorClass("bytes_iterator",{constructor:function(e){this.$index=0,this.$seq=e.v},iternext(){const e=this.$seq[this.$index++];if(void 0!==e)return new Sk.builtin.int_(e)},methods:{__length_hint__:Sk.generic.iterLengthHintWithArrayMethodDef},flags:{sk$acceptable_as_base_class:!1}});Sk.exportSymbol("Sk.builtin.bytes",Sk.builtin.bytes)},function(e,t,n){(function(e){!function(e){function t(){}function n(){}var i=String.fromCharCode,s={}.toString,r=s.call(e.SharedArrayBuffer),o=s(),a=e.Uint8Array,l=a||Array,c=a?ArrayBuffer:l,u=c.isView||function(e){return e&&"length"in e},h=s.call(c.prototype);c=n.prototype;var d=e.TextEncoder,f=new(a?Uint16Array:l)(32);t.prototype.decode=function(e){if(!u(e)){var t=s.call(e);if(t!==h&&t!==r&&t!==o)throw TypeError("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");e=a?new l(e):e||[]}for(var n,c,d,g=t="",p=0,m=0|e.length,b=m-32|0,_=0,v=0,y=0,S=-1;p<m;){for(n=p<=b?32:m-p|0;y<n;p=p+1|0,y=y+1|0){switch((c=255&e[p])>>4){case 15:if(2!==(d=255&e[p=p+1|0])>>6||247<c){p=p-1|0;break}_=(7&c)<<6|63&d,v=5,c=256;case 14:_<<=6,_|=(15&c)<<6|63&(d=255&e[p=p+1|0]),v=2===d>>6?v+4|0:24,c=c+256&768;case 13:case 12:_<<=6,_|=(31&c)<<6|63&(d=255&e[p=p+1|0]),v=v+7|0,p<m&&2===d>>6&&_>>v&&1114112>_?(c=_,0<=(_=_-65536|0)&&(S=55296+(_>>10)|0,c=56320+(1023&_)|0,31>y?(f[y]=S,y=y+1|0,S=-1):(d=S,S=c,c=d))):(p=p-(c>>=8)-1|0,c=65533),_=v=0,n=p<=b?32:m-p|0;default:f[y]=c;continue;case 11:case 10:case 9:case 8:}f[y]=65533}if(g+=i(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15],f[16],f[17],f[18],f[19],f[20],f[21],f[22],f[23],f[24],f[25],f[26],f[27],f[28],f[29],f[30],f[31]),32>y&&(g=g.slice(0,y-32|0)),p<m){if(f[0]=S,y=~S>>>31,S=-1,g.length<t.length)continue}else-1!==S&&(g+=i(S));t+=g,g=""}return t},c.encode=function(e){var t,n=0|(e=void 0===e?"":""+e).length,i=new l(8+(n<<1)|0),s=0,r=!a;for(t=0;t<n;t=t+1|0,s=s+1|0){var o=0|e.charCodeAt(t);if(127>=o)i[s]=o;else{if(2047>=o)i[s]=192|o>>6;else{e:{if(55296<=o)if(56319>=o){var c=0|e.charCodeAt(t=t+1|0);if(56320<=c&&57343>=c){if(65535<(o=(o<<10)+c-56613888|0)){i[s]=240|o>>18,i[s=s+1|0]=128|o>>12&63,i[s=s+1|0]=128|o>>6&63,i[s=s+1|0]=128|63&o;continue}break e}o=65533}else 57343>=o&&(o=65533);!r&&t<<1<s&&t<<1<(s-7|0)&&(r=!0,(c=new l(3*n)).set(i),i=c)}i[s]=224|o>>12,i[s=s+1|0]=128|o>>6&63}i[s=s+1|0]=128|63&o}}return a?i.subarray(0,s):i.slice(0,s)},d||(e.TextDecoder=t,e.TextEncoder=n)}("undefined"==typeof e?"undefined"==typeof self?this:self:e)}).call(this,n(0))},function(e,t){Sk.builtin.tuple=Sk.abstr.buildNativeClass("tuple",{constructor:function(e){void 0===e?e=[]:Array.isArray(e)||(e=Sk.misceval.arrayFromIterable(e)),Sk.asserts.assert(this instanceof Sk.builtin.tuple,"bad call to tuple, use 'new' with an Array of python objects"),this.v=e,this.in$repr=!1},slots:{tp$getattr:Sk.generic.getAttr,tp$as_sequence_or_mapping:!0,tp$doc:"Built-in immutable sequence.\n\nIf no argument is given, the constructor returns an empty tuple.\nIf iterable is specified the tuple is initialized from iterable's items.\n\nIf the argument is a tuple, the return value is the same object.",$r(){if(this.in$repr)return new Sk.builtin.str("(...)");this.in$repr=!0;let e=this.v.map((e=>Sk.misceval.objectRepr(e)));return this.in$repr=!1,e=e.join(", "),1===this.v.length&&(e+=","),new Sk.builtin.str("("+e+")")},tp$new(e,t){return this!==Sk.builtin.tuple.prototype?this.$subtype_new(e,t):(Sk.abstr.checkNoKwargs("tuple",t),Sk.abstr.checkArgsLen("tuple",e,0,1),void 0===(e=e[0])?new Sk.builtin.tuple([]):e.constructor===Sk.builtin.tuple?e:Sk.misceval.chain(Sk.misceval.arrayFromIterable(e,!0),(e=>new Sk.builtin.tuple(e))))},tp$hash(){let e,t=3430008,n=1000003;const i=this.v.length;for(let s=0;s<i;++s){if(e=Sk.abstr.objectHash(this.v[s]),-1===e)return-1;t=(t^e)*n,n+=82520+i+i}return t+=97531,-1===t&&(t=-2),0|t},tp$richcompare:Sk.generic.seqCompare,tp$iter(){return new n(this)},mp$subscript(e){if(Sk.misceval.isIndex(e)){if(0>(e=Sk.misceval.asIndexSized(e))&&(e=this.v.length+e),0>e||e>=this.v.length)throw new Sk.builtin.IndexError("tuple index out of range");return this.v[e]}if(e instanceof Sk.builtin.slice){const t=[];return e.sssiter$(this.v.length,(e=>{t.push(this.v[e])})),new Sk.builtin.tuple(t)}throw new Sk.builtin.TypeError("tuple indices must be integers or slices, not "+Sk.abstr.typeName(e))},sq$length(){return this.v.length},sq$repeat(e){if(1===(e=Sk.misceval.asIndexSized(e,Sk.builtin.OverflowError))&&this.constructor===Sk.builtin.tuple)return this;const t=[];for(let n=0;n<e;n++)for(let e=0;e<this.v.length;e++)t.push(this.v[e]);return new Sk.builtin.tuple(t)},sq$concat(e){if(!(e instanceof Sk.builtin.tuple))throw new Sk.builtin.TypeError("can only concatenate tuple (not '"+Sk.abstr.typeName(e)+"') to tuple");return new Sk.builtin.tuple(this.v.concat(e.v))},sq$contains(e){for(let t=this.tp$iter(),n=t.tp$iternext();void 0!==n;n=t.tp$iternext())if(n===e||Sk.misceval.richCompareBool(n,e,"Eq"))return!0;return!1}},proto:{$subtype_new(e,t){return t=new this.constructor,e=Sk.builtin.tuple.prototype.tp$new(e),t.v=e.v,t},sk$asarray(){return this.v.slice(0)}},methods:{__getnewargs__:{$meth(){return new Sk.builtin.tuple(this.v.slice(0))},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:null},index:{$meth(e,t,n){if(void 0!==t&&!Sk.misceval.isIndex(t)||void 0!==n&&!Sk.misceval.isIndex(n))throw new Sk.builtin.TypeError("slice indices must be integers or have an __index__ method");({start:t,end:n}=Sk.builtin.slice.startEnd$wrt(this,t,n));const i=this.v;for(;t<n;t++)if(i[t]===e||Sk.misceval.richCompareBool(i[t],e,"Eq"))return new Sk.builtin.int_(t);throw new Sk.builtin.ValueError("tuple.index(x): x not in tuple")},$flags:{MinArgs:1,MaxArgs:3},$textsig:"($self, value, start=0, stop=sys.maxsize, /)",$doc:"Return first index of value.\n\nRaises ValueError if the value is not present."},count:{$meth(e){const t=this.v.length,n=this.v;let i=0;for(let s=0;s<t;++s)(n[s]===e||Sk.misceval.richCompareBool(n[s],e,"Eq"))&&(i+=1);return new Sk.builtin.int_(i)},$flags:{OneArg:!0},$textsig:"($self, value, /)",$doc:"Return number of occurrences of value."}}}),Sk.exportSymbol("Sk.builtin.tuple",Sk.builtin.tuple);var n=Sk.abstr.buildIteratorClass("tuple_iterator",{constructor:function(e){this.$index=0,this.$seq=e.sk$asarray()},iternext:Sk.generic.iterNextWithArray,methods:{__length_hint__:Sk.generic.iterLengthHintWithArrayMethodDef},flags:{sk$acceptable_as_base_class:!1}})},function(e,t){function n(e){let t=e.$savedKeyHash;return void 0!==t?t:t=Sk.abstr.objectHash(e)}function i(e){return new Sk.builtin.set(Sk.misceval.arrayFromIterable(e))}function s(e,t){for(let n=Sk.abstr.iter(e),i=n.tp$iternext();void 0!==i;i=n.tp$iternext())if(!Sk.abstr.sequenceContains(t,i))return!1;return!0}function r(e,t,n){const s={constructor:function(e){if(1!==arguments.length)throw new Sk.builtin.TypeError("cannot create '"+Sk.abstr.typeName(this)+"' instances");this.dict=e,this.in$repr=!1}};return s.slots=Object.assign(t,l),s.methods={isdisjoint:{$meth(e){const t=i(this);return t.isdisjoint.$meth.call(t,e)},$flags:{OneArg:!0},$textsig:null,$doc:"Return True if the view and the given iterable have a null intersection."},__reversed__:{$meth:n,$flags:{NoArgs:!0},$textsig:null,$doc:"Return a reverse iterator over the dict keys."}},s.flags={sk$acceptable_as_base:!1},"dict_values"===e&&(delete s.slots.tp$as_number,delete s.slots.tp$richcompare),Sk.abstr.buildNativeClass(e,s)}function o(e,t,n){return Sk.abstr.buildIteratorClass(e,{constructor:function(e){this.$index=0,this.$orig=e,this.tp$iternext=()=>(this.$seq=e.$items(),this.$version=e.$version,n&&(this.$seq=this.$seq.reverse()),this.tp$iternext=this.constructor.prototype.tp$iternext,this.tp$iternext())},iternext:t,methods:{__length_hint__:Sk.generic.iterLengthHintWithArrayMethodDef},flags:{sk$acceptable_as_base_class:!1},proto:{next$item:a}})}function a(){if(this.$version!==this.$orig.$version){if(this.$len!==this.$orig.get$size())throw new Sk.builtin.RuntimeError("dict changed size during iteration");throw new Sk.builtin.RuntimeError("dictionary keys changed during iteration")}return this.$seq[this.$index++]}Sk.builtin.dict=Sk.abstr.buildNativeClass("dict",{constructor:function(e){void 0===e&&(e=[]),Sk.asserts.assert(Array.isArray(e)&&0===e.length%2&&this instanceof Sk.builtin.dict,"bad call to dict constructor"),this.size=0,this.entries=Object.create(null),this.buckets={};for(let t=0;t<e.length;t+=2)this.set$item(e[t],e[t+1]);this.in$repr=!1,this.$version=0},slots:{tp$getattr:Sk.generic.getAttr,tp$as_sequence_or_mapping:!0,tp$as_number:!0,tp$hash:Sk.builtin.none.none$,tp$doc:"dict() -> new empty dictionary\ndict(mapping) -> new dictionary initialized from a mapping object's\n    (key, value) pairs\ndict(iterable) -> new dictionary initialized as if via:\n    d = {}\n    for k, v in iterable:\n        d[k] = v\ndict(**kwargs) -> new dictionary initialized with the name=value pairs\n    in the keyword argument list.  For example:  dict(one=1, two=2)",$r(){if(this.in$repr)return new Sk.builtin.str("{...}");this.in$repr=!0;const e=this.$items().map((e=>{let[t,n]=e;return Sk.misceval.objectRepr(t)+": "+Sk.misceval.objectRepr(n)}));return this.in$repr=!1,new Sk.builtin.str("{"+e.join(", ")+"}")},tp$new:Sk.generic.new,tp$init(e,t){return this.update$common(e,t,"dict")},tp$iter(){return new d(this)},tp$richcompare(e,t){let n;if(!(e instanceof Sk.builtin.dict)||"Eq"!==t&&"NotEq"!==t)return Sk.builtin.NotImplemented.NotImplemented$;if(e===this)n=!0;else if(this.size!==e.size)n=!1;else{let t;n=this.$items().every((n=>{let[i,s]=n;return t=e.mp$lookup(i),void 0!==t&&(t===s||Sk.misceval.richCompareBool(s,t,"Eq"))}))}return"Eq"===t?n:!n},nb$or(e){if(!(e instanceof Sk.builtin.dict))return Sk.builtin.NotImplemented.NotImplemented$;const t=this.dict$copy();return t.dict$merge(e),t},nb$reflected_or(e){return e instanceof Sk.builtin.dict?((e=e.dict$copy()).dict$merge(this),e):Sk.builtin.NotImplemented.NotImplemented$},nb$inplace_or(e){return Sk.misceval.chain(this.update$onearg(e),(()=>this))},sq$length(){return this.get$size()},sq$contains(e){return void 0!==this.mp$lookup(e)},mp$subscript(e,t){var n=this.mp$lookup(e);if(void 0!==n)return n;if(void 0!==(n=Sk.abstr.lookupSpecial(this,Sk.builtin.str.$missing)))return e=Sk.misceval.callsimOrSuspendArray(n,[e]),t?e:Sk.misceval.retryOptionalSuspensionOrThrow(e);throw new Sk.builtin.KeyError(e)},mp$ass_subscript(e,t){if(void 0===t){if(void 0===this.pop$item(e))throw new Sk.builtin.KeyError(e)}else this.set$item(e,t)}},methods:{__reversed__:{$meth(){return new p(this)},$flags:{NoArgs:!0},$textsig:null,$doc:"Return a reverse iterator over the dict keys."},get:{$meth(e,t){return this.mp$lookup(e)||t||Sk.builtin.none.none$},$flags:{MinArgs:1,MaxArgs:2},$textsig:"($self, key, default=None, /)",$doc:"Return the value for key if key is in the dictionary, else default."},setdefault:{$meth(e,t){let i;const s=n(e);return i="string"===typeof s?this.entries[s]:this.get$bucket_item(e,s),void 0!==i?i[1]:(t=t||Sk.builtin.none.none$,"string"===typeof s?this.entries[s]=[e,t]:this.set$bucket_item(e,t,s),this.size++,this.$version++,t)},$flags:{MinArgs:1,MaxArgs:2},$textsig:"($self, key, default=None, /)",$doc:"Insert key with a value of default if key is not in the dictionary.\n\nReturn the value for key if key is in the dictionary, else default."},pop:{$meth(e,t){const n=this.pop$item(e);if(void 0!==n)return n[1];if(void 0!==t)return t;throw new Sk.builtin.KeyError(e)},$flags:{MinArgs:1,MaxArgs:2},$textsig:null,$doc:"D.pop(k[,d]) -> v, remove specified key and return the corresponding value.\nIf key is not found, d is returned if given, otherwise KeyError is raised"},popitem:{$meth(){const e=this.get$size();if(0===e)throw new Sk.builtin.KeyError("popitem(): dictionary is empty");const[t,n]=this.$items()[e-1];return this.pop$item(t),new Sk.builtin.tuple([t,n])},$flags:{NoArgs:!0},$textsig:null,$doc:"D.popitem() -> (k, v), remove and return some (key, value) pair as a\n2-tuple; but raise KeyError if D is empty."},keys:{$meth(){return new c(this)},$flags:{NoArgs:!0},$textsig:null,$doc:"D.keys() -> a set-like object providing a view on D's keys"},items:{$meth(){return new h(this)},$flags:{NoArgs:!0},$textsig:null,$doc:"D.items() -> a set-like object providing a view on D's items"},values:{$meth(){return new u(this)},$flags:{NoArgs:!0},$textsig:null,$doc:"D.values() -> an object providing a view on D's values"},update:{$meth(e,t){return Sk.misceval.chain(this.update$common(e,t,"update"),(()=>Sk.builtin.none.none$))},$flags:{FastCall:!0},$textsig:null,$doc:"D.update([E, ]**F) -> None.  Update D from dict/iterable E and F.\nIf E is present and has a .keys() method, then does:  for k in E: D[k] = E[k]\nIf E is present and lacks a .keys() method, then does:  for k, v in E: D[k] = v\nIn either case, this is followed by: for k in F:  D[k] = F[k]"},clear:{$meth(){this.size=0,this.$version++,this.entries=Object.create(null),this.buckets={}},$flags:{NoArgs:!0},$textsig:null,$doc:"D.clear() -> None.  Remove all items from D."},copy:{$meth(){return this.dict$copy()},$flags:{NoArgs:!0},$textsig:null,$doc:"D.copy() -> a shallow copy of D"}},classmethods:{fromkeys:{$meth:function(e,t){t=t||Sk.builtin.none.none$;let n=this===Sk.builtin.dict?new this:this.tp$call([],[]);return Sk.misceval.chain(n,(i=>(n=i,Sk.misceval.iterFor(Sk.abstr.iter(e),(e=>n.mp$ass_subscript(e,t,!0))))),(()=>n))},$flags:{MinArgs:1,MaxArgs:2},$textsig:"($type, iterable, value=None, /)",$doc:"Create a new dictionary with keys from iterable and values set to value."}},proto:{quick$lookup:function(e){if(void 0!==(e=this.entries[e.$savedKeyHash]))return e[1]},mp$lookup:function(e){const t=n(e);if(void 0!==(e="string"===typeof t?this.entries[t]:this.get$bucket_item(e,t)))return e[1]},get$size(){return this.size},sk$asarray(){return Object.values(this.entries).map((e=>e[0]))},update$common:function(e,t,n){let i;return Sk.abstr.checkArgsLen(n,e,0,1),void 0!==(e=e[0])&&(i=this.update$onearg(e)),Sk.misceval.chain(i,(()=>{if(t)for(let e=0;e<t.length;e+=2)this.set$item(new Sk.builtin.str(t[e]),t[e+1])}))},update$onearg(e){return e instanceof Sk.builtin.dict||void 0!==Sk.abstr.lookupSpecial(e,Sk.builtin.str.$keys)?this.dict$merge(e):this.dict$merge_seq(e)},dict$copy(){const e=new Sk.builtin.dict([]);e.size=this.size;var t=Object.entries(this.entries);for(var n in t){var i=t[n][1];e.entries[t[n][0]]=[i[0],i[1]]}for(let s in this.buckets)for(n=this.buckets[s],e.buckets[s]=t=[],i=0;i<n.length;i++)t.push(e.entries["#"+s+"_"+i]);return e},$items(){return Object.values(this.entries)},set$item:function(e,t){const i=n(e);let s;"string"===typeof i?(s=this.entries[i],void 0===s?(this.entries[i]=[e,t],this.size++,this.$version++):s[1]=t):(s=this.get$bucket_item(e,i),void 0===s?(this.set$bucket_item(e,t,i),this.size++,this.$version++):s[1]=t)},get$bucket_item:function(e,t){if(void 0!==(t=this.buckets[t]))for(let i=0;i<t.length;i++){var n=t[i];if(void 0!==n&&(n[0]===e||Sk.misceval.richCompareBool(e,n[0],"Eq")))return n}},pop$bucket_item:function(e,t){const n=this.buckets[t];let i;if(void 0!==n)for(let s=0;s<n.length;s++)if(i=n[s],void 0!==i&&(i[0]===e||Sk.misceval.richCompareBool(e,i[0],"Eq")))return delete this.entries["#"+t+"_"+s],n[s]=void 0,n.every((e=>void 0===e))&&delete this.buckets[t],i},set$bucket_item:function(e,t,n){let i=this.buckets[n];e=[e,t],void 0===i?(this.buckets[n]=[e],n="#"+n+"_0"):-1!==(t=i.indexOf(void 0))?(n="#"+n+"_"+t,i[t]=e):(n="#"+n+"_"+i.length,i.push(e)),this.entries[n]=e},pop$item:function(e){const t=n(e);if("string"===typeof t?(e=this.entries[t],delete this.entries[t]):e=this.pop$bucket_item(e,t),void 0!==e)return this.size--,this.$version++,e},dict$merge:function(e){if(e.tp$iter!==Sk.builtin.dict.prototype.tp$iter)return t=Sk.abstr.lookupSpecial(e,Sk.builtin.str.$keys),Sk.misceval.chain(Sk.misceval.callsimOrSuspendArray(t,[]),(t=>Sk.misceval.iterFor(Sk.abstr.iter(t),(t=>Sk.misceval.chain(e.mp$subscript(t,!0),(e=>{this.set$item(t,e)}))))));var t=e.tp$iter();for(let n=t.tp$iternext();void 0!==n;n=t.tp$iternext()){const t=e.mp$subscript(n);this.set$item(n,t)}},dict$merge_seq:function(e){let t=0;return Sk.misceval.iterFor(Sk.abstr.iter(e),(e=>{if(!Sk.builtin.checkIterable(e))throw new Sk.builtin.TypeError("cannot convert dictionary update sequence element #"+t+" to a sequence");if(2!==(e=Sk.misceval.arrayFromIterable(e)).length)throw new Sk.builtin.ValueError("dictionary update sequence element #"+t+" has length "+e.length+"; 2 is required");this.set$item(e[0],e[1]),t++}))}}});const l={tp$getattr:Sk.generic.getAttr,tp$as_number:!0,tp$as_sequence_or_mapping:!0,tp$hash:Sk.builtin.none.none$,$r(){if(this.in$repr)return new Sk.builtin.str("...");this.in$repr=!0;let e=Sk.misceval.arrayFromIterable(this);return e=e.map((e=>Sk.misceval.objectRepr(e))),this.in$repr=!1,new Sk.builtin.str(Sk.abstr.typeName(this)+"(["+e.join(", ")+"])")},tp$richcompare(e,t){if(!(Sk.builtin.checkAnySet(e)||e instanceof c||e instanceof h))return Sk.builtin.NotImplemented.NotImplemented$;const n=this.sq$length(),i=e.sq$length();switch(t){case"NotEq":case"Eq":let r;return this===e?r=!0:n===i&&(r=s(this,e)),"NotEq"===t?!r:r;case"Lt":return n<i&&s(this,e);case"LtE":return n<=i&&s(this,e);case"Gt":return n>i&&s(e,this);case"GtE":return n>=i&&s(e,this)}},nb$subtract(e){const t=i(this);return t.difference.$meth.call(t,e)},nb$and(e){const t=i(this);return t.intersection.$meth.call(t,e)},nb$or(e){const t=i(this);return t.union.$meth.call(t,e)},nb$xor(e){const t=i(this);return t.symmetric_difference.$meth.call(t,e)},sq$length(){return this.dict.get$size()}};var c=r("dict_keys",{sq$contains(e){return void 0!==this.dict.mp$lookup(e)},tp$iter(){return new d(this.dict)}},(function(){return new p(this.dict)})),u=r("dict_values",{tp$iter(){return new g(this.dict)}},(function(){return new b(this.dict)})),h=r("dict_items",{sq$contains(e){if(!(e instanceof Sk.builtin.tuple&&2===e.sq$length()))return!1;var t=e.mp$subscript(new Sk.builtin.int_(0));return e=e.mp$subscript(new Sk.builtin.int_(1)),void 0!==(t=this.dict.mp$lookup(t))&&(t===e||Sk.misceval.richCompareBool(t,e,"Eq"))},tp$iter(){return new f(this.dict)}},(function(){return new m(this.dict)})),d=o("dict_keyiterator",(function(){const e=this.next$item();return e&&e[0]})),f=o("dict_itemiterator",(function(){const e=this.next$item();return e&&new Sk.builtin.tuple([e[0],e[1]])})),g=o("dict_valueiterator",(function(){const e=this.next$item();return e&&e[1]})),p=o("dict_reversekeyiterator",d.prototype.tp$iternext,!0),m=o("dict_reverseitemiterator",f.prototype.tp$iternext,!0),b=o("dict_reversevalueiterator",g.prototype.tp$iternext,!0);Sk.builtin.dict.py2$methods={has_key:{$name:"has_key",$flags:{OneArg:!0},$meth(e){return new Sk.builtin.bool(this.sq$contains(e))},$doc:"D.has_key(k) -> True if D has a key k, else False"},keys:{$name:"keys",$meth(){return new Sk.builtin.list(this.sk$asarray())},$flags:{NoArgs:!0},$textsig:null,$doc:"D.keys() -> a set-like object providing a view on D's keys"},items:{$name:"items",$meth(){return new Sk.builtin.list(this.$items().map((e=>{let[t,n]=e;return new Sk.builtin.tuple([t,n])})))},$flags:{NoArgs:!0},$textsig:null,$doc:"D.items() -> a set-like object providing a view on D's items"},values:{$name:"values",$meth(){return new Sk.builtin.list(this.$items().map((e=>{let[,t]=e;return t})))},$flags:{NoArgs:!0},$textsig:null,$doc:"D.values() -> an object providing a view on D's values"}}},function(e,t){Sk.builtin.mappingproxy=Sk.abstr.buildNativeClass("mappingproxy",{constructor:function(e){Sk.asserts.assert(this instanceof Sk.builtin.mappingproxy,"bad call to mapping proxy, use 'new'"),this.mapping=new Sk.builtin.dict([]),void 0!==e&&function(e,t){Object.defineProperties(e,{entries:{get:()=>{const e=Object.create(null);return Object.entries(t).forEach((t=>{let[n,i]=t;n=Sk.unfixReserved(n),n.includes("$")||(n=new Sk.builtin.str(n),e[n.$savedKeyHash]=[n,i])})),e},configurable:!0},size:{get:()=>Object.keys(t).map((e=>Sk.unfixReserved(e))).filter((e=>!e.includes("$"))).length,configurable:!0}})}(this.mapping,e)},slots:{tp$getattr:Sk.generic.getAttr,tp$as_sequence_or_mapping:!0,tp$hash:Sk.builtin.none.none$,tp$new(e,t){if(Sk.abstr.checkNoKwargs("mappingproxy",t),Sk.abstr.checkOneArg("mappingproxy",e,t),e=e[0],!Sk.builtin.checkMapping(e))throw new Sk.builtin.TypeError("mappingproxy() argument must be a mapping, not "+Sk.abstr.typeName(e));return(t=new Sk.builtin.mappingproxy).mapping=e,t},tp$richcompare(e,t){return Sk.misceval.richCompareBool(this.mapping,e,t)},tp$str(){return this.mapping.tp$str()},$r(){return new Sk.builtin.str("mappingproxy("+Sk.misceval.objectRepr(this.mapping)+")")},mp$subscript(e,t){return this.mapping.mp$subscript(e,t)},sq$contains(e){return this.mapping.sq$contains(e)},sq$length(){return this.mapping.sq$length()},tp$iter(){return this.mapping.tp$iter()},tp$as_number:!0,nb$or(e){return e instanceof Sk.builtin.mappingproxy&&(e=e.mapping),Sk.abstr.numberBinOp(this.mapping,e,"BitOr")},nb$reflected_or(e){return e instanceof Sk.builtin.mappingproxy&&(e=e.mapping),Sk.abstr.numberBinOp(e,this.mapping,"BitOr")},nb$inplace_or(e){throw new Sk.builtin.TypeError("'|=' is not supported by "+Sk.abstr.typeName(this)+"; use '|' instead")}},methods:{get:{$meth(e,t){return Sk.misceval.callsimArray(this.mapping.tp$getattr(this.str$get),e,t)},$flags:{FastCall:!0},$textsig:null,$doc:"D.get(k[,d]) -> D[k] if k in D, else d.  d defaults to None."},keys:{$meth(){return Sk.misceval.callsimArray(this.mapping.tp$getattr(this.str$keys),[])},$flags:{NoArgs:!0},$textsig:null,$doc:"D.keys() -> a set-like object providing a view on D's keys"},items:{$meth(){return Sk.misceval.callsimArray(this.mapping.tp$getattr(this.str$items),[])},$flags:{NoArgs:!0},$textsig:null,$doc:"D.items() -> a set-like object providing a view on D's items"},values:{$meth(){return Sk.misceval.callsimArray(this.mapping.tp$getattr(this.str$values),[])},$flags:{NoArgs:!0},$textsig:null,$doc:"D.values() -> a set-like object providing a view on D's values"},copy:{$meth(){return Sk.misceval.callsimArray(this.mapping.tp$getattr(this.str$copy),[])},$flags:{NoArgs:!0},$textsig:null,$doc:"D.copy() -> a shallow copy of D"}},proto:{str$get:new Sk.builtin.str("get"),str$copy:new Sk.builtin.str("copy"),str$keys:new Sk.builtin.str("keys"),str$items:new Sk.builtin.str("items"),str$values:new Sk.builtin.str("values"),mp$lookup(e){return this.mapping.mp$lookup(e)}},flags:{sk$acceptable_as_base_class:!1}})},function(e,t){Sk.builtin.property=Sk.abstr.buildNativeClass("property",{constructor:function(e,t,n,i){this.prop$get=e||Sk.builtin.none.none$,this.prop$set=t||Sk.builtin.none.none$,this.prop$del=n||Sk.builtin.none.none$,this.prop$doc=i||e&&e.$doc||Sk.builtin.none.none$},slots:{tp$getattr:Sk.generic.getAttr,tp$new:Sk.generic.new,tp$init(e,t){e=Sk.abstr.copyKeywordsToNamedArgs("property",["fget","fset","fdel","doc"],e,t,Array(4).fill(Sk.builtin.none.none$)),this.prop$get=e[0],this.prop$set=e[1],this.prop$del=e[2],Sk.builtin.checkNone(e[3])?Sk.builtin.checkNone(e[0])||(this.prop$doc=e[0].$doc||e[3]):this.prop$doc=e[3]},tp$doc:"Property attribute.\n\n  fget\n    function to be used for getting an attribute value\n  fset\n    function to be used for setting an attribute value\n  fdel\n    function to be used for del'ing an attribute\n  doc\n    docstring\n\nTypical use is to define a managed attribute x:\n\nclass C(object):\n    def getx(self): return self._x\n    def setx(self, value): self._x = value\n    def delx(self): del self._x\n    x = property(getx, setx, delx, 'I'm the 'x' property.')\n\nDecorators make defining new properties or modifying existing ones easy:\n\nclass C(object):\n    @property\n    def x(self):\n        'I am the 'x' property.'\n        return self._x\n    @x.setter\n    def x(self, value):\n        self._x = value\n    @x.deleter\n    def x(self):\n        del self._x",tp$descr_get(e,t){if(null===e)return this;if(void 0===this.prop$get)throw new Sk.builtin.AttributeError("unreadable attribute");return Sk.misceval.callsimOrSuspendArray(this.prop$get,[e])},tp$descr_set(e,t){let n;if(n=null==t?this.prop$del:this.prop$set,Sk.builtin.checkNone(n))throw new Sk.builtin.AttributeError("can't "+(null==t?"delete":"set")+" attribute");if(!n.tp$call)throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(n)+"' is not callable");return null==t?n.tp$call([e]):n.tp$call([e,t])}},methods:{getter:{$meth(e){return new Sk.builtin.property(e,this.prop$set,this.prop$del,this.prop$doc)},$flags:{OneArg:!0}},setter:{$meth(e){return new Sk.builtin.property(this.prop$get,e,this.prop$del,this.prop$doc)},$flags:{OneArg:!0}},deleter:{$meth(e){return new Sk.builtin.property(this.prop$get,this.prop$set,e,this.prop$doc)},$flags:{OneArg:!0}}},getsets:{fget:{$get(){return this.prop$get}},fset:{$get(){return this.prop$set}},fdel:{$get(){return this.prop$del}},__doc__:{$get(){return this.prop$doc},$set(e){this.prop$doc=e=e||Sk.builtin.none.none$}}}}),Sk.builtin.classmethod=Sk.abstr.buildNativeClass("classmethod",{constructor:function(e){this.cm$callable=e,this.$d=new Sk.builtin.dict},slots:{tp$getattr:Sk.generic.getAttr,tp$new:Sk.generic.new,tp$init(e,t){Sk.abstr.checkNoKwargs("classmethod",t),Sk.abstr.checkArgsLen("classmethod",e,1,1),this.cm$callable=e[0]},tp$doc:"classmethod(function) -> method\n\nConvert a function to be a class method.\n\nA class method receives the class as implicit first argument,\njust like an instance method receives the instance.\nTo declare a class method, use this idiom:\n\n  class C:\n      @classmethod\n      def f(cls, arg1, arg2, ...):\n          ...\n\nIt can be called either on the class (e.g. C.f()) or on an instance\n(e.g. C().f()).  The instance is ignored except for its class.\nIf a class method is called for a derived class, the derived class\nobject is passed as the implied first argument.\n\nClass methods are different than C++ or Java static methods.\nIf you want those, see the staticmethod builtin.",tp$descr_get(e,t){const n=this.cm$callable;if(void 0===n)throw new Sk.builtin.RuntimeError("uninitialized classmethod object");return void 0===t&&(t=e.ob$type),(e=n.tp$descr_get)?e.call(n,t):new Sk.builtin.method(n,t)}},getsets:{__func__:{$get(){return this.cm$callable}},__dict__:Sk.generic.getSetDict}}),Sk.builtin.staticmethod=Sk.abstr.buildNativeClass("staticmethod",{constructor:function(e){this.sm$callable=e,this.$d=new Sk.builtin.dict},slots:{tp$getattr:Sk.generic.getAttr,tp$new:Sk.generic.new,tp$init(e,t){Sk.abstr.checkNoKwargs("staticmethod",t),Sk.abstr.checkArgsLen("staticmethod",e,1,1),this.sm$callable=e[0]},tp$doc:"staticmethod(function) -> method\n\nConvert a function to be a static method.\n\nA static method does not receive an implicit first argument.\nTo declare a static method, use this idiom:\n\n     class C:\n         @staticmethod\n         def f(arg1, arg2, ...):\n             ...\n\nIt can be called either on the class (e.g. C.f()) or on an instance\n(e.g. C().f()).  The instance is ignored except for its class.\n\nStatic methods in Python are similar to those found in Java or C++.\nFor a more advanced concept, see the classmethod builtin.",tp$descr_get(e,t){if(void 0===this.sm$callable)throw new Sk.builtin.RuntimeError("uninitialized staticmethod object");return this.sm$callable}},getsets:{__func__:{$get(){return this.sm$callable}},__dict__:Sk.generic.getSetDict}})},function(e,t){function n(e,t){return function(n){if(n instanceof Sk.builtin.int_){let i=this.v;if(n=n.v,"number"===typeof i&&"number"===typeof n){const t=e(i,n);if(c(t))return new Sk.builtin.int_(t)}return i=h(i),n=h(n),new Sk.builtin.int_(t(i,n))}return Sk.builtin.NotImplemented.NotImplemented$}}function i(e,t){return function(n){if(n instanceof Sk.builtin.int_){let i=this.v;return n=n.v,"number"===typeof i&&"number"===typeof n?e(i,n):(i=h(i),n=h(n),t(i,n))}return Sk.builtin.NotImplemented.NotImplemented$}}function s(e,t){return function(){const n=this.v;return"number"===typeof n?new Sk.builtin.int_(e(n)):new Sk.builtin.int_(t(n))}}function r(){return new Sk.builtin.int_(this.v)}function o(e,t){return function(n){if(n instanceof Sk.builtin.int_){let i=this.v;if(0===(n=n.v))throw new Sk.builtin.ZeroDivisionError("integer division or modulo by zero");return"number"===typeof i&&"number"===typeof n?new Sk.builtin.int_(e(i,n)):(i=h(i),n=h(n),new Sk.builtin.int_(JSBI.numberIfSafe(t(i,n))))}return Sk.builtin.NotImplemented.NotImplemented$}}function a(e,t){return function(n){if(n instanceof Sk.builtin.int_){let i=this.v;if(n=n.v,0===i)return new Sk.builtin.int_(this.v);if("number"===typeof n){if(0>n)throw new Sk.builtin.ValueError("negative shift count");if("number"===typeof i){const t=e(i,n);if(void 0!==t)return new Sk.builtin.int_(t)}n=JSBI.BigInt(n)}else if(JSBI.lessThan(JSBI.BigInt(0)))throw new Sk.builtin.ValueError("negative shift count");return i=h(i),new Sk.builtin.int_(t(i,n))}return Sk.builtin.NotImplemented.NotImplemented$}}function l(e,t){return function(n){if(n instanceof Sk.builtin.int_){var i=this.v;return n=n.v,"number"===typeof i&&"number"===typeof n?(0>(i=e(i,n))&&(i+=4294967296),new Sk.builtin.int_(i)):(i=h(i),n=h(n),new Sk.builtin.int_(JSBI.numberIfSafe(t(i,n))))}return Sk.builtin.NotImplemented.NotImplemented$}}function c(e){return e<=Number.MAX_SAFE_INTEGER&&e>=-Number.MAX_SAFE_INTEGER}function u(e){return e<=Number.MAX_SAFE_INTEGER&&e>=-Number.MAX_SAFE_INTEGER?+e:JSBI.BigInt(e)}function h(e){return"number"===typeof e?JSBI.BigInt(e):e}Sk.builtin.int_=Sk.abstr.buildNativeClass("int",{constructor:function(e){let t;if(Sk.asserts.assert(this instanceof Sk.builtin.int_,"bad call to int use 'new'"),"number"===typeof e||JSBI.__isBigInt(e))t=e;else if(void 0===e)t=0;else if("string"===typeof e)t=u(e);else{if(e.nb$int)return e.nb$int();Sk.asserts.fail("bad argument to int constructor")}this.v=t},slots:{tp$as_number:!0,tp$doc:"int(x=0) -> integer\nint(x, base=10) -> integer\n\nConvert a number or string to an integer, or return 0 if no arguments\nare given.  If x is a number, return x.__int__().  For floating point\nnumbers, this truncates towards zero.\n\nIf x is not a number or if base is given, then x must be a string,\nbytes, or bytearray instance representing an integer literal in the\ngiven base.  The literal can be preceded by '+' or '-' and be surrounded\nby whitespace.  The base defaults to 10.  Valid bases are 0 and 2-36.\nBase 0 means to interpret the base from the string as an integer literal.\n>>> int('0b100', base=0)\n4",$r(){return new Sk.builtin.str(this.v.toString())},tp$hash(){const e=this.v;return"number"===typeof e?e:JSBI.toNumber(JSBI.remainder(e,JSBI.__MAX_SAFE))},tp$new(e,t){if(1===e.length+(t?t.length:0)?(t=e[0],e=Sk.builtin.none.none$):(t=(e=Sk.abstr.copyKeywordsToNamedArgs("int",[null,"base"],e,t,[new Sk.builtin.int_(0),Sk.builtin.none.none$]))[0],e=e[1]),e=e!==Sk.builtin.none.none$?Sk.misceval.asIndexOrThrow(e):null,t instanceof Sk.builtin.str)null===e&&(e=10),t=new Sk.builtin.int_(Sk.str2number(t.v,e));else{if(null!==e)throw new Sk.builtin.TypeError("int() can't convert non-string with explicit base");if(t.nb$int)t=t.nb$int();else{if(!(e=Sk.abstr.lookupSpecial(t,Sk.builtin.str.$trunc)))throw new Sk.builtin.TypeError("int() argument must be a string, a bytes-like object or a number, not '"+Sk.abstr.typeName(t)+"'");if(e=Sk.misceval.callsimArray(e,[]),!Sk.builtin.checkInt(e))throw new Sk.builtin.TypeError(Sk.builtin.str.$trunc.$jsstr()+" returned non-Integral (type "+Sk.abstr.typeName(t)+")");t=new Sk.builtin.int_(e.v)}}return this===Sk.builtin.int_.prototype?t:((e=new this.constructor).v=t.v,e)},tp$getattr:Sk.generic.getAttr,ob$eq:i(((e,t)=>e==t),JSBI.equal),ob$ne:i(((e,t)=>e!=t),JSBI.notEqual),ob$gt:i(((e,t)=>e>t),JSBI.greaterThan),ob$ge:i(((e,t)=>e>=t),JSBI.greaterThanOrEqual),ob$lt:i(((e,t)=>e<t),JSBI.lessThan),ob$le:i(((e,t)=>e<=t),JSBI.lessThanOrEqual),nb$int:r,nb$index(){return this.v},nb$float(){var e=this.v;if("number"===typeof e)return new Sk.builtin.float_(e);if(1/0===(e=parseFloat(JSBI.toNumber(e)))||-1/0===e)throw new Sk.builtin.OverflowError("int too large to convert to float");return new Sk.builtin.float_(e)},nb$isnegative(){const e=this.v;return"number"===typeof e?0>e:JSBI.lessThan(e,JSBI.__ZERO)},nb$ispositive(){const e=this.v;return"number"===typeof e?0>e:JSBI.greaterThanOrEqual(e,JSBI.__ZERO)},nb$bool(){return 0!==this.v},nb$positive:r,nb$negative:s((e=>-e),JSBI.unaryMinus),nb$add:n(((e,t)=>e+t),((e,t)=>JSBI.numberIfSafe(JSBI.add(e,t)))),nb$subtract:n(((e,t)=>e-t),((e,t)=>JSBI.numberIfSafe(JSBI.subtract(e,t)))),nb$multiply:n(((e,t)=>e*t),JSBI.multiply),nb$divide(e){return Sk.__future__.division?this.nb$float().nb$divide(e):this.nb$floor_divide(e)},nb$floor_divide:o(((e,t)=>Math.floor(e/t)),JSBI.divide),nb$remainder:o(((e,t)=>e-Math.floor(e/t)*t),JSBI.remainder),nb$divmod(e){const t=this.nb$floor_divide(e);return e=this.nb$remainder(e),t===Sk.builtin.NotImplemented.NotImplemented$||e===Sk.builtin.NotImplemented.NotImplemented$?Sk.builtin.NotImplemented.NotImplemented$:new Sk.builtin.tuple([t,e])},nb$and:l(((e,t)=>e&t),JSBI.bitwiseAnd),nb$or:l(((e,t)=>e|t),JSBI.bitwiseOr),nb$xor:l(((e,t)=>e^t),JSBI.bitwiseXor),nb$abs:s(Math.abs,(e=>JSBI.lessThan(e,JSBI.__ZERO)?JSBI.unaryMinus(e):e)),nb$lshift:a(((e,t)=>{if(53>t&&c(e=2*e*f[t]))return e}),JSBI.leftShift),nb$rshift:a(((e,t)=>{const n=e>>t;return 0<e&&0>n?n&Math.pow(2,32-t)-1:n}),((e,t)=>JSBI.numberIfSafe(JSBI.signedRightShift(e,t)))),nb$invert:s((e=>~e),JSBI.bitwiseNot),nb$power(e,t){let n;if(void 0!==t&&Sk.builtin.checkNone(t)&&(t=void 0),e instanceof Sk.builtin.int_&&(void 0===t||t instanceof Sk.builtin.int_)){let i=this.v,s=e.v;if("number"===typeof i&&"number"===typeof s){const e=Math.pow(i,s);if(c(e)&&(n=0>s?new Sk.builtin.float_(e):new Sk.builtin.int_(e),void 0===t))return n}if(void 0!==t){if(e.nb$isnegative())throw new Sk.builtin.ValueError("pow() 2nd argument cannot be negative when 3rd argument specified");if(0===t.v)throw new Sk.builtin.ValueError("pow() 3rd argument cannot be 0");return void 0!==n?n.nb$remainder(t):new Sk.builtin.int_(JSBI.powermod(h(i),h(s),h(t.v)))}return new Sk.builtin.int_(JSBI.exponentiate(h(i),h(s)))}return Sk.builtin.NotImplemented.NotImplemented$},nb$long(){return new Sk.builtin.lng(this.v)}},getsets:{real:{$get:r,$doc:"the real part of a complex number"},imag:{$get:()=>new Sk.builtin.int_(0),$doc:"the imaginary part of a complex number"}},methods:{conjugate:{$meth:r,$flags:{NoArgs:!0},$textsig:null,$doc:"Returns self, the complex conjugate of any int."},bit_length:{$meth(){return new Sk.builtin.int_(Sk.builtin.bin(this).sq$length()-2)},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Number of bits necessary to represent self in binary.\n\n>>> bin(37)\n'0b100101'\n>>> (37).bit_length()\n6"},to_bytes:{$meth(){throw new Sk.builtin.NotImplementedError("Not yet implemented in Skulpt")},$flags:{FastCall:!0},$textsig:"($self, /, length, byteorder, *, signed=False)",$doc:"Return an array of bytes representing an integer.\n\n  length\n    Length of bytes object to use.  An OverflowError is raised if the\n    integer is not representable with the given number of bytes.\n  byteorder\n    The byte order used to represent the integer.  If byteorder is 'big',\n    the most significant byte is at the beginning of the byte array.  If\n    byteorder is 'little', the most significant byte is at the end of the\n    byte array.  To request the native byte order of the host system, use\n    `sys.byteorder' as the byte order value.\n  signed\n    Determines whether two's complement is used to represent the integer.\n    If signed is False and a negative integer is given, an OverflowError\n    is raised."},__trunc__:{$meth:r,$flags:{NoArgs:!0},$textsig:null,$doc:"Truncating an Integral returns itself."},__floor__:{$meth:r,$flags:{NoArgs:!0},$textsig:null,$doc:"Flooring an Integral returns itself."},__ceil__:{$meth:r,$flags:{NoArgs:!0},$textsig:null,$doc:"Ceiling of an Integral returns itself."},__round__:{$meth(e){return this.round$(e)},$flags:{MinArgs:0,MaxArgs:1},$textsig:null,$doc:"Rounding an Integral returns itself.\nRounding with an ndigits argument also returns an integer."},__getnewargs__:{$meth(){return new Sk.builtin.tuple([new Sk.builtin.int_(this.v)])},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:Sk.builtin.none.none$},__format__:{$meth:Sk.formatting.mkNumber__format__(!1),$flags:{OneArg:!0},$textsig:"($self, format_spec, /)",$doc:Sk.builtin.none.none$}},proto:{str$(e,t){return e=void 0===e||10===e?this.v.toString():this.v.toString(e),t||void 0===t||"-"===e[0]&&(e=e.substring(1)),e},round$(e){e=void 0===e?0:Sk.misceval.asIndexSized(e);var t=this.v,n=Math.pow(10,-e);if(0<e)return new Sk.builtin.int_(t);if("number"===typeof t&&Sk.__future__.bankers_rounding)return e=t/n,t=Math.round(e),new Sk.builtin.int_((.5===(0<e?e:-e)%1?0===t%2?t:t-1:t)*n);if("number"===typeof t)return new Sk.builtin.int_(Math.round(t/n)*n);{n=JSBI.BigInt(10*n),e=JSBI.BigInt(10),t=JSBI.divide(t,n);const i=JSBI.divide(t,e),s=JSBI.subtract(t,JSBI.multiply(e,i));return 5>JSBI.toNumber(s)?t=JSBI.multiply(JSBI.multiply(i,e),n):JSBI.multiply(JSBI.multiply(JSBI.add(i,JSBI.BigInt(1),e),n)),new Sk.builtin.int_(t)}}}}),Sk.exportSymbol("Sk.builtin.int_",Sk.builtin.int_);const d=/_(?=[^_])/g;Sk.str2number=function(e,t){var n,i=e,s=!1;if("-"===(e=e.replace(/^\s+|\s+$/g,"")).charAt(0)&&(s=!0,e=e.substring(1)),"+"===e.charAt(0)&&(e=e.substring(1)),null!==t&&void 0!==t||(t=10),(2>t||36<t)&&0!==t)throw new Sk.builtin.ValueError("int() base must be >= 2 and <= 36");if("string"===typeof t&&(t=Number(t)),"0x"===e.substring(0,2).toLowerCase()){if(16===t||0===t)e=e.substring(2),t=16;else if(34>t)throw new Sk.builtin.ValueError("invalid literal for int() with base "+t+": '"+i+"'")}else if("0b"===e.substring(0,2).toLowerCase()){if(2===t||0===t)e=e.substring(2),t=2;else if(12>t)throw new Sk.builtin.ValueError("invalid literal for int() with base "+t+": '"+i+"'")}else if("0o"===e.substring(0,2).toLowerCase()){if(8===t||0===t)e=e.substring(2),t=8;else if(25>t)throw new Sk.builtin.ValueError("invalid literal for int() with base "+t+": '"+i+"'")}else if("0"===e.charAt(0)){if("0"===e)return 0;8!==t&&0!==t||(t=8)}if(0===t&&(t=10),-1!==e.indexOf("_")){if(-1!==e.indexOf("__"))throw new Sk.builtin.ValueError("invalid literal for int() with base "+t+": '"+i+"'");e=10!==t?e.replace(d,""):e.charAt(0)+e.substring(1).replace(d,"")}if(0===e.length)throw new Sk.builtin.ValueError("invalid literal for int() with base "+t+": '"+i+"'");for(n=0;n<e.length;n+=1){var r=e.charCodeAt(n),o=t;if(48<=r&&57>=r?o=r-48:65<=r&&90>=r?o=r-65+10:97<=r&&122>=r&&(o=r-97+10),o>=t)throw new Sk.builtin.ValueError("invalid literal for int() with base "+t+": '"+i+"'")}if(s&&(e="-"+e),c(o=parseInt(e,t)))return o;for(i=!1,"-"===e[0]&&(i=!0,e=e.substring(1)),t=JSBI.BigInt(t),s=JSBI.BigInt(1),n=JSBI.BigInt(0),r=e.length-1;0<=r;r--)48<=(o=e.charCodeAt(r))&&57>=o?o-=48:65<=o&&90>=o?o=o-65+10:97<=o&&122>=o&&(o=o-97+10),o=JSBI.multiply(JSBI.BigInt(o),s),n=JSBI.add(n,o),s=JSBI.multiply(s,t);return i&&(n=JSBI.multiply(n,JSBI.BigInt(-1))),n},Sk.builtin.int_.py2$methods={},Sk.longFromStr=function(e,t){return Sk.__future__.python3?new Sk.builtin.int_(u(e)):(e=Sk.str2number(e,t),new Sk.builtin.lng(e))},Sk.exportSymbol("Sk.longFromStr",Sk.longFromStr),Sk.builtin.int_.withinThreshold=c,Sk.builtin.int_.stringToNumberOrBig=u;const f=[.5,1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384,32768,65536,131072,262144,524288,1048576,2097152,4194304,8388608,16777216,33554432,67108864,134217728,268435456,536870912,1073741824,2147483648,4294967296,8589934592,17179869184,34359738368,68719476736,137438953472,274877906944,549755813888,1099511627776,2199023255552,4398046511104,8796093022208,17592186044416,35184372088832,70368744177664,0x800000000000,281474976710656,562949953421312,0x4000000000000,0x8000000000000,4503599627370496,9007199254740992];Sk.builtin.lng=Sk.abstr.buildNativeClass("long",{base:Sk.builtin.int_,constructor:function(e){Sk.builtin.int_.call(this,e)},slots:{$r(){return new Sk.builtin.str(this.v.toString()+"L")},tp$as_number:!0,nb$negative(){return new Sk.builtin.lng(g.nb$negative.call(this).v)},nb$positive(){return new Sk.builtin.lng(g.nb$positive.call(this).v)}}});const g=Sk.builtin.int_.prototype},function(e,t){const n=Sk.builtin.int_.prototype;Sk.builtin.bool=Sk.abstr.buildNativeClass("bool",{constructor:function(e){return Sk.misceval.isTrue(e)?Sk.builtin.bool.true$:Sk.builtin.bool.false$},base:Sk.builtin.int_,slots:{tp$doc:"bool(x) -> bool\n\nReturns True when the argument x is true, False otherwise.\nThe builtins True and False are the only two instances of the class bool.\nThe class bool is a subclass of the class int, and cannot be subclassed.",tp$new:(e,t)=>(Sk.abstr.checkNoKwargs("bool",t),Sk.abstr.checkArgsLen("bool",e,0,1),new Sk.builtin.bool(e[0])),$r(){return this.v?this.str$True:this.str$False},tp$as_number:!0,nb$and(e){return e.ob$type===Sk.builtin.bool?new Sk.builtin.bool(this.v&e.v):n.nb$and.call(this,e)},nb$or(e){return e.ob$type===Sk.builtin.bool?new Sk.builtin.bool(this.v|e.v):n.nb$or.call(this,e)},nb$xor(e){return e.ob$type===Sk.builtin.bool?new Sk.builtin.bool(this.v^e.v):n.nb$xor.call(this,e)}},flags:{sk$acceptable_as_base_class:!1},methods:{__format__:{$meth(){return this.$r()},$flags:{OneArg:!0}}},proto:{str$False:new Sk.builtin.str("False"),str$True:new Sk.builtin.str("True")}}),Sk.exportSymbol("Sk.builtin.bool",Sk.builtin.bool),Sk.builtin.bool.true$=Object.create(Sk.builtin.bool.prototype,{v:{value:1,enumerable:!0}}),Sk.builtin.bool.false$=Object.create(Sk.builtin.bool.prototype,{v:{value:0,enumerable:!0}})},function(e,t){function n(){return new Sk.builtin.float_(this.v)}function i(e){return function(t){const n=this.v;if("number"!==typeof(t=t.v)){if(!JSBI.__isBigInt(t))return Sk.builtin.NotImplemented.NotImplemented$;if(1/0==(t=parseFloat(JSBI.toNumber(t)))||-1/0==t)throw new Sk.builtin.OverflowError("int too large to convert to float")}return e(n,t)}}function s(e){const t=i(e);return function(e,n){if(void 0!==n&&!Sk.builtin.checkNone(n))throw new Sk.builtin.TypeError("pow() 3rd argument not allowed unless all arguments are integers");return t.call(this,e)}}function r(e,t){if(0===t)throw new Sk.builtin.ZeroDivisionError("integer division or modulo by zero");return 1/0===e?1/0===t||-1/0===e?new Sk.builtin.float_(NaN):0>t?new Sk.builtin.float_(-1/0):new Sk.builtin.float_(1/0):-1/0===e?1/0===t||-1/0===e?new Sk.builtin.float_(NaN):0>t?new Sk.builtin.float_(1/0):new Sk.builtin.float_(-1/0):new Sk.builtin.float_(e/t)}function o(e,t){if(1/0===e||-1/0===e)return new Sk.builtin.float_(NaN);if(0===t)throw new Sk.builtin.ZeroDivisionError("integer division or modulo by zero");return 1/0===t?0>e?new Sk.builtin.float_(-1):new Sk.builtin.float_(0):-1/0===t?0>e||0!==e?new Sk.builtin.float_(0):new Sk.builtin.float_(-1):new Sk.builtin.float_(Math.floor(e/t))}function a(e,t){if(0===t)throw new Sk.builtin.ZeroDivisionError("integer division or modulo by zero");if(0===e)return new Sk.builtin.float_(0);if(1/0===t)return 1/0===e||-1/0===this.v?new Sk.builtin.float_(NaN):0<e?new Sk.builtin.float_(e):new Sk.builtin.float_(1/0);let n=e%t;return 0>e?0<t&&0>n&&(n+=t):0>t&&0!==n&&(n+=t),0===n&&(0>t?n=-0:-1/0===1/0/n&&(n=0)),new Sk.builtin.float_(n)}function l(e,t){if(0>e&&0!==t%1)throw new Sk.builtin.ValueError("negative number cannot be raised to a fractional power");if(0===e&&0>t)throw new Sk.builtin.ZeroDivisionError("0.0 cannot be raised to a negative power");const n=Math.pow(e,t);if(1/0===Math.abs(n)&&1/0!==Math.abs(e)&&1/0!==Math.abs(t))throw new Sk.builtin.OverflowError("Numerical result out of range");return new Sk.builtin.float_(n)}const c=Object.create(null,{Infinity:{value:314159},"-Infinity":{value:-314159},NaN:{value:0}});Sk.builtin.float_=Sk.abstr.buildNativeClass("float",{constructor:function(e){if(Sk.asserts.assert(this instanceof Sk.builtin.float_,"bad call to float use 'new'"),"number"===typeof e)this.v=e;else if(void 0===e)this.v=0;else if("string"===typeof e)this.v=parseFloat(e);else{if(e.nb$float)return e.nb$float();Sk.asserts.fail("bad argument to float constructor")}},slots:{tp$gettattr:Sk.generic.getAttr,tp$as_number:!0,tp$doc:"Convert a string or number to a floating point number, if possible.",tp$hash(){const e=this.v;let t=c[e];return void 0!==t?t:(t=Number.isInteger(e)?this.nb$int().tp$hash():Math.floor(Math.random()*Number.MAX_SAFE_INTEGER-Number.MAX_SAFE_INTEGER/2),c[this.v]=t)},$r(){return new Sk.builtin.str(this.str$(10,!0))},tp$new(e,t){if(t&&t.length)throw new Sk.builtin.TypeError("float() takes no keyword arguments");if(e&&1<e.length)throw new Sk.builtin.TypeError("float expected at most 1 arguments, got "+e.length);if(void 0===(e=e[0]))var n=new Sk.builtin.float_(0);else if(e.nb$float)n=e.nb$float();else if(Sk.builtin.checkString(e)){if(e=n=e.v,-1!==n.indexOf("_")){if(u.test(n))throw new Sk.builtin.ValueError("could not convert string to float: '"+n+"'");e=n.charAt(0)+n.substring(1).replace(h,"")}if(n.match(/^-inf$/i))var i=-1/0;else n.match(/^[+]?inf$/i)?i=1/0:n.match(/^[-+]?nan$/i)?i=NaN:isNaN(e)||(i=parseFloat(e),Number.isNaN(i)&&(i=void 0));if(void 0===i)throw new Sk.builtin.ValueError("could not convert string to float: "+Sk.misceval.objectRepr(new Sk.builtin.str(n)));n=new Sk.builtin.float_(i)}if(void 0===n)throw new Sk.builtin.TypeError("float() argument must be a string or a number");return this===Sk.builtin.float_.prototype?n:((i=new this.constructor).v=n.v,i)},nb$int(){let e=this.v;if(e=0>e?Math.ceil(e):Math.floor(e),!Number.isInteger(e))throw new Sk.builtin.ValueError("cannot convert float "+Sk.misceval.objectRepr(this)+" to integer");return Sk.builtin.int_.withinThreshold(e)?new Sk.builtin.int_(e):new Sk.builtin.int_(JSBI.BigInt(e))},nb$float:n,nb$long(){return new Sk.builtin.lng(this.nb$int().v)},nb$add:i(((e,t)=>new Sk.builtin.float_(e+t))),nb$subtract:i(((e,t)=>new Sk.builtin.float_(e-t))),nb$reflected_subtract:i(((e,t)=>new Sk.builtin.float_(t-e))),nb$multiply:i(((e,t)=>new Sk.builtin.float_(e*t))),nb$divide:i(r),nb$reflected_divide:i(((e,t)=>r(t,e))),nb$floor_divide:i(o),nb$reflected_floor_divide:i(((e,t)=>o(t,e))),nb$remainder:i(a),nb$reflected_remainder:i(((e,t)=>a(t,e))),nb$divmod:i(((e,t)=>new Sk.builtin.tuple([o(e,t),a(e,t)]))),nb$reflected_divmod:i(((e,t)=>new Sk.builtin.tuple([o(t,e),a(t,e)]))),nb$power:s(l),nb$reflected_power:s(((e,t)=>l(t,e))),nb$abs(){return new Sk.builtin.float_(Math.abs(this.v))},nb$negative(){return new Sk.builtin.float_(-this.v)},nb$positive(){return new Sk.builtin.float_(this.v)},nb$bool(){return 0!==this.v},nb$isnegative(){return 0>this.v},nb$ispositive(){return 0<=this.v},ob$eq:i(((e,t)=>e==t)),ob$ne:i(((e,t)=>e!=t)),ob$gt:i(((e,t)=>e>t)),ob$ge:i(((e,t)=>e>=t)),ob$lt:i(((e,t)=>e<t)),ob$le:i(((e,t)=>e<=t))},getsets:{real:{$get:n,$doc:"the real part of a complex number"},imag:{$get:()=>new Sk.builtin.float_(0),$doc:"the imaginary part of a complex number"}},methods:{conjugate:{$meth:n,$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return self, the complex conjugate of any float."},__trunc__:{$meth(){return this.nb$int()},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return the Integral closest to x between 0 and x."},__round__:{$meth(e){return this.round$(e)},$flags:{MinArgs:0,MaxArgs:1},$textsig:"($self, ndigits=None, /)",$doc:"Return the Integral closest to x, rounding half toward even.\n\nWhen an argument is passed, work like built-in round(x, ndigits)."},is_integer:{$meth(){return new Sk.builtin.bool(Number.isInteger(this.v))},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:"Return True if the float is an integer."},__getnewargs__:{$meth(){return new Sk.builtin.tuple([this])},$flags:{NoArgs:!0},$textsig:"($self, /)",$doc:Sk.builtin.none.none$},__format__:{$meth:Sk.formatting.mkNumber__format__(!0),$flags:{OneArg:!0},$textsig:"($self, format_spec, /)",$doc:Sk.builtin.none.none$}}});const u=/_[eE]|[eE]_|\._|_\.|[+-]_|__/,h=/_(?=[^_])/g;Sk.builtin.float_.PyFloat_Check=function(e){return void 0!==e&&!!(Sk.builtin.checkNumber(e)||Sk.builtin.checkFloat(e)||e.ob$type.$isSubType(Sk.builtin.float_))},Sk.builtin.float_.prototype.toFixed=function(e){return e=Sk.builtin.asnum$(e),this.v.toFixed(e)},Sk.builtin.float_.prototype.round$=function(e){var t=Sk.builtin.asnum$(this),n=void 0===e?0:Sk.misceval.asIndexSized(e);if(Sk.__future__.bankers_rounding){t*=Math.pow(10,n);var i=Math.round(t);return n=(.5===(0<t?t:-t)%1?0===i%2?i:i-1:i)/Math.pow(10,n),void 0===e?new Sk.builtin.int_(n):new Sk.builtin.float_(n)}return e=Math.pow(10,n),n=Math.round(t*e)/e,new Sk.builtin.float_(n)},Sk.builtin.float_.prototype.str$=function(e,t){if(isNaN(this.v))return"nan";if(void 0===t&&(t=!0),1/0==this.v)return"inf";if(-1/0==this.v&&t)return"-inf";if(-1/0==this.v&&!t)return"inf";if(t=t?this.v:Math.abs(this.v),void 0===e||10===e){var n=Sk.__future__.python3?t.toPrecision(16):t.toPrecision(12),i=n.indexOf(".");if(e=t.toString().slice(0,i),i=t.toString().slice(i),e.match(/^-?0$/)&&i.slice(1).match(/^0{4,}/)&&(n=12>n.length?t.toExponential():t.toExponential(11)),0>n.indexOf("e")&&0<=n.indexOf(".")){for(;"0"==n.charAt(n.length-1);)n=n.substring(0,n.length-1);"."==n.charAt(n.length-1)&&(n+="0")}n=(n=(n=n.replace(/\.0+e/,"e","i")).replace(/(e[-+])([1-9])$/,"$10$2")).replace(/0+(e.*)/,"$1")}else n=t.toString(e);return 0===this.v&&-1/0===1/this.v&&(n="-"+n),0>n.indexOf(".")&&0>n.indexOf("E")&&0>n.indexOf("e")&&(n+=".0"),n},Sk.builtin.float_.py2$methods={}},function(e,t){function n(e){let t=e.v;if("number"===typeof t)return t;if(e.nb$float&&(t=e.nb$float()),void 0===t)throw new Sk.builtin.TypeError("a float is required");return t.v}function i(e,t,n){return n===Sk.builtin.complex.prototype?new Sk.builtin.complex(e,t):(n=new n.constructor,Sk.builtin.complex.call(n,e,t),n)}function s(e,t){return function(n){const i=this.real,s=this.imag;var r=n.real;const o=n.v;if("number"===typeof r)n=n.imag;else if("number"===typeof o)r=o,n=0;else{if(!JSBI.__isBigInt(o))return Sk.builtin.NotImplemented.NotImplemented$;if(void 0===t){if(1/0==(r=parseFloat(JSBI.toNumber(o)))||-1/0==r)throw new Sk.builtin.OverflowError("int too large to convert to float")}else r=o.toString();n=0}return e(i,s,r,n)}}function r(e,t,n,i){var s=Math.abs(n);const r=Math.abs(i);if(s>=r){if(0===s)throw new Sk.builtin.ZeroDivisionError("complex division by zero");i=(e+t*(s=i/n))/(n+=i*s),e=(t-e*s)/n}else r>=s?(n=n*(s=n/i)+i,Sk.asserts.assert(0!==i),i=(e*s+t)/n,e=(t*s-e)/n):e=i=NaN;return new Sk.builtin.complex(i,e)}function o(e,t,n,i){if(0===n&&0===i){i=1;var s=0}else if(0===e&&0===t){if(0!==i||0>n)throw new Sk.builtin.ZeroDivisionError("complex division by zero");s=i=0}else{const r=Math.hypot(e,t);s=Math.pow(r,n),n*=e=Math.atan2(t,e),0!==i&&(s/=Math.exp(e*i),n+=i*Math.log(r)),i=s*Math.cos(n),s*=Math.sin(n)}return new Sk.builtin.complex(i,s)}function a(e,t,n){let i=1;var s=new Sk.builtin.complex(1,0);for(e=new Sk.builtin.complex(e,t);0<i&&n>=i;)n&i&&(s=new Sk.builtin.complex(s.real*e.real-s.imag*e.imag,s.real*e.imag+e.real*s.imag)),i<<=1,e=new Sk.builtin.complex(e.real*e.real-e.imag*e.imag,2*e.real*e.imag);return s}function l(e,t,n,i,s){switch(s=!1,t){case"e":case"f":case"g":break;case"E":s=!0,t="e";break;case"F":s=!0,t="f";break;case"r":if(0!==n)throw Error("Bad internall call");n=17,t="g";break;default:throw Error("Bad internall call")}if(isNaN(e))e="nan";else if(1/0===e)e="inf";else if(-1/0===e)e="-inf";else{i&l.Py_DTSF_ADD_DOT_0&&(t="g");var r="%"+(i&l.Py_DTSF_ALT?"#":"");null!=n&&(r=r+"."+n),e=(e=(r=new Sk.builtin.str(r+t)).nb$remainder(new Sk.builtin.float_(e))).v}return i&l.Py_DTSF_SIGN&&"-"!==e[0]&&(e="+"+e),s&&(e=e.toUpperCase()),e}Sk.builtin.complex=Sk.abstr.buildNativeClass("complex",{constructor:function(e,t){Sk.asserts.assert(this instanceof Sk.builtin.complex,"bad call to complex constructor, use 'new'"),this.real=e,this.imag=t},slots:{tp$as_number:!0,tp$doc:"Create a complex number from a real part and an optional imaginary part.\n\nThis is equivalent to (real + imag*1j) where imag defaults to 0.",tp$hash(){var e=new Sk.builtin.float_(this.real).tp$hash();return e=1003*new Sk.builtin.float_(this.imag).tp$hash()+e,Sk.builtin.int_.withinThreshold(e)?e:new Sk.builtin.int_(JSBI.BigInt(e)).tp$hash()},tp$getattr:Sk.generic.getAttr,tp$new(e,t){{var s,r=(e=Sk.abstr.copyKeywordsToNamedArgs("complex",["real","imag"],e,t,[null,null]))[1];let a=t=!1;var o=e[0];if(null!=o&&o.constructor===Sk.builtin.complex&&null==r)t=o;else if(Sk.builtin.checkString(o)){if(null!=r)throw new Sk.builtin.TypeError("complex() can't take second arg if first is a string");t=Sk.builtin.complex.complex_subtype_from_string(o,this)}else{if(null!=r&&Sk.builtin.checkString(r))throw new Sk.builtin.TypeError("complex() second arg can't be a string");if(null==o?e=null:e=void 0!==(e=Sk.abstr.lookupSpecial(o,Sk.builtin.str.$complex))?Sk.misceval.callsimArray(e,[]):null,null!=e&&e!==Sk.builtin.NotImplemented.NotImplemented$){if(!c(e))throw new Sk.builtin.TypeError("__complex__ should return a complex object");o=e}if(null!=o&&void 0===o.nb$float)throw new Sk.builtin.TypeError("complex() first argument must be a string or a number, not '"+Sk.abstr.typeName(o)+"'");if(null!=r&&void 0===r.nb$float)throw new Sk.builtin.TypeError("complex() second argument must be a number, not '"+Sk.abstr.typeName(o)+"'");null==o?o=e=0:c(o)?(e=o.real,o=o.imag,t=!0):(e=n(o),o=0),null==r?r=s=0:c(r)?(s=r.real,r=r.imag,a=!0):(s=n(r),r=0),!0===a&&(e-=r),!0===t&&(s+=o),t=i(e,s,this)}}return t},tp$richcompare(e,t){if("Eq"!==t&&"NotEq"!==t){if(Sk.builtin.checkNumber(e)||c(e))throw new Sk.builtin.TypeError("no ordering relation is defined for complex numbers");return Sk.builtin.NotImplemented.NotImplemented$}return s((function(e,n,i,s){return e=e==i&&n==s,"Eq"===t?e:!e}),!0).call(this,e)},$r(){{var e,t;let s=e="";var n=this.real,i=this.imag;(t=0===n)&&(t=1==(n?0>n?-1:1:0>1/n?-1:1)),t?(n="",t=l(i,"g",null,0,null)):(n=e=l(n,"g",null,0,null),t=l(i,"g",null,l.Py_DTSF_SIGN,null),0===i&&-1/0===1/i&&t&&"-"!==t[0]&&(t="-"+t),e="(",s=")"),i=new Sk.builtin.str(""+e+n+t+"j"+s)}return i},nb$int(){throw new Sk.builtin.TypeError("can't convert complex to int")},nb$long(){throw new Sk.builtin.TypeError("can't convert complex to long")},nb$float(){throw new Sk.builtin.TypeError("can't convert complex to float")},nb$positive(){return new Sk.builtin.complex(this.real,this.imag)},nb$negative(){return new Sk.builtin.complex(-this.real,-this.imag)},nb$bool(){return this.real||this.imag},nb$add:s(((e,t,n,i)=>new Sk.builtin.complex(e+n,t+i))),nb$subtract:s(((e,t,n,i)=>new Sk.builtin.complex(e-n,t-i))),nb$reflected_subtract:s(((e,t,n,i)=>new Sk.builtin.complex(n-e,i-t))),nb$multiply:s(((e,t,n,i)=>new Sk.builtin.complex(n*e-i*t,e*i+t*n))),nb$divide:s(r),nb$reflected_divide:s(((e,t,n,i)=>r(n,i,e,t))),nb$floor_divide(e){throw new Sk.builtin.TypeError("can't take floor of complex number.")},nb$reflected_floor_divide(e){throw new Sk.builtin.TypeError("can't take floor of complex number.")},nb$remainder(e){throw new Sk.builtin.TypeError("can't mod complex numbers.")},nb$reflected_remainder(e){throw new Sk.builtin.TypeError("can't mod complex numbers.")},nb$divmod(e){throw new Sk.builtin.TypeError("can't take floor or mod of complex number.")},nb$power(e,t){if(null!=t&&!Sk.builtin.checkNone(t))throw new Sk.builtin.ValueError("complex modulo");return d.call(this,e)},nb$abs(){var e=this.real;const t=this.imag;if(!Number.isFinite(e)||!Number.isFinite(t))return 1/0===e||-1/0===e?new Sk.builtin.float_(Math.abs(e)):1/0===t||-1/0===t?new Sk.builtin.float_(Math.abs(t)):new Sk.builtin.float_(NaN);if(e=Math.hypot(e,t),!Number.isFinite(e))throw new Sk.builtin.OverflowError("absolute value too large");return new Sk.builtin.float_(e)}},getsets:{real:{$get(){return new Sk.builtin.float_(this.real)},$doc:"the real part of a complex number"},imag:{$get(){return new Sk.builtin.float_(this.imag)},$doc:"the imaginary part of a complex number"}},methods:{conjugate:{$meth(){return new Sk.builtin.complex(this.real,-this.imag)},$flags:{NoArgs:!0},$textsig:null,$doc:"complex.conjugate() -> complex\n\nReturn the complex conjugate of its argument. (3-4j).conjugate() == 3+4j."},__getnewargs__:{$meth(){return new Sk.builtin.tuple([new Sk.builtin.float_(this.real),new Sk.builtin.float_(this.imag)])},$flags:{NoArgs:!0},$textsig:null,$doc:Sk.builtin.none.none$},__format__:{$meth(e){if(Sk.builtin.checkString(e))throw new Sk.builtin.NotImplementedError("__format__ is not implemented for complex type.");throw new Sk.builtin.TypeError("__format__ requires str")},$flags:{OneArg:!0},$textsig:null,$doc:"complex.__format__() -> str\n\nConvert to a string according to format_spec."}}}),Sk.exportSymbol("Sk.builtin.complex",Sk.builtin.complex);const c=Sk.builtin.checkComplex,u=/_[eE]|[eE]_|\._|_\.|[+-]_|_j|j_/,h=/_(?=[^_])/g;Sk.builtin.complex.complex_subtype_from_string=function(e,t){t=t||Sk.builtin.complex.prototype;var n=0,s=0,r=!1;if(Sk.builtin.checkString(e))e=Sk.ffi.remapToJs(e);else if("string"!==typeof e)throw new TypeError("provided unsupported string-alike argument");if(-1!==e.indexOf("\0")||0===e.length||""===e)throw new Sk.builtin.ValueError("complex() arg is a malformed string");var o=0;for(e=(e=e.replace(/inf|infinity/gi,"Infinity")).replace(/nan/gi,"NaN");" "===e[o];)o++;if("("===e[o])for(r=!0,o++;" "===e[o];)o++;if(-1!==e.indexOf("_")){if(u.test(e))throw new Sk.builtin.ValueError("could not convert string to complex: '"+e+"'");e=e.charAt(0)+e.substring(1).replace(h,"")}var a=/^(?:[+-]?(?:(?:(?:\d*\.\d+)|(?:\d+\.?))(?:[eE][+-]?\d+)?|NaN|Infinity))/,l=e.substr(o),c=l.match(a);if(null!==c)if("j"===e[o+=c[0].length]||"J"===e[o])s=parseFloat(c[0]),o++;else if("+"===e[o]||"-"===e[o]){if(n=parseFloat(c[0]),null!==(c=e.substr(o).match(a))?(s=parseFloat(c[0]),o+=c[0].length):(s="+"===e[o]?1:-1,o++),"j"!==e[o]&&"J"!==e[o])throw new Sk.builtin.ValueError("complex() arg is malformed string");o++}else n=parseFloat(c[0]);else null!==(c=c=l.match(/^([+-]?[jJ])/))&&(s=1===c[0].length||"+"===c[0][0]?1:-1,o+=c[0].length);for(;" "===e[o];)o++;if(r){if(")"!==e[o])throw new Sk.builtin.ValueError("complex() arg is malformed string");for(o++;" "===e[o];)o++}if(e.length!==o)throw new Sk.builtin.ValueError("complex() arg is malformed string");return i(n,s,t)};const d=s(((e,t,n,i)=>{const s=0|n;return 0===i&&n===s?(100<s||-100>s?e=o(e,t,s,0):0<s?e=a(e,t,s):e=r(1,0,(e=a(e,t,-s)).real,e.imag),e):o(e,t,n,i)}));l.Py_DTSF_SIGN=1,l.Py_DTSF_ADD_DOT_0=2,l.Py_DTSF_ALT=4,l.Py_DTST_FINITE=0,l.Py_DTST_INFINITE=1,l.Py_DTST_NAN=2},function(e,t){Sk.builtin.slice=Sk.abstr.buildNativeClass("slice",{constructor:function(e,t,n){void 0===t&&void 0===n&&(t=e,e=Sk.builtin.none.none$),void 0===t&&(t=Sk.builtin.none.none$),void 0===n&&(n=Sk.builtin.none.none$),this.start=e,this.stop=t,this.step=n},slots:{tp$getattr:Sk.generic.getAttr,tp$doc:"slice(stop)\nslice(start, stop[, step])\n\nCreate a slice object.  This is used for extended slicing (e.g. a[0:10:2]).",tp$hash:Sk.builtin.none.none$,tp$new:(e,t)=>(Sk.abstr.checkNoKwargs("slice",t),Sk.abstr.checkArgsLen("slice",e,1,3),new Sk.builtin.slice(...e)),$r(){const e=Sk.misceval.objectRepr(this.start),t=Sk.misceval.objectRepr(this.stop),n=Sk.misceval.objectRepr(this.step);return new Sk.builtin.str("slice("+e+", "+t+", "+n+")")},tp$richcompare(e,t){if(e.ob$type!==Sk.builtin.slice)return Sk.builtin.NotImplemented.NotImplemented$;const n=new Sk.builtin.tuple([this.start,this.stop,this.step]);return e=new Sk.builtin.tuple([e.start,e.stop,e.step]),n.tp$richcompare(e,t)}},getsets:{start:{$get(){return this.start}},step:{$get(){return this.step}},stop:{$get(){return this.stop}}},methods:{indices:{$meth:function(e){if(0>(e=Sk.misceval.asIndexSized(e,Sk.builtin.OverflowError)))throw new Sk.builtin.TypeError("length should not be negative");const{start:t,stop:n,step:i}=this.slice$indices(e);return new Sk.builtin.tuple([new Sk.builtin.int_(t),new Sk.builtin.int_(n),new Sk.builtin.int_(i)])},$doc:"S.indices(len) -> (start, stop, stride)\n\nAssuming a sequence of length len, calculate the start and stop\nindices, and the stride length of the extended slice described by\nS. Out of bounds indices are clipped in a manner consistent with the\nhandling of normal slices.",$textsig:null,$flags:{OneArg:!0}}},proto:{slice$as_indices(e){let t;var n=e?e=>Sk.misceval.asIndexSized(e,null,"slice indices must be integers or None or have an __index__ method"):e=>Sk.misceval.asIndexOrThrow(e,"slice indices must be integers or None or have an __index__ method");if(Sk.builtin.checkNone(this.step))t=1;else if(t=n(this.step),0===t)throw new Sk.builtin.ValueError("slice step cannot be zero");return{start:e=Sk.builtin.checkNone(this.start)?null:n(this.start),stop:n=Sk.builtin.checkNone(this.stop)?null:n(this.stop),step:t}},$wrt:(e,t,n,i,s)=>(s=s?t=>JSBI.__isBigInt(t)?JSBI.add(t,JSBI.BigInt(e)):t+e:t=>t+e,0<i?(null===t?t=0:0>t&&(0>(t=s(t))&&(t=0)),null===n||n>e?n=e:0>n&&(n=s(n))):(null===t||t>=e?t=e-1:0>t&&(t=s(t)),null===n?n=-1:0>n&&(0>(n=s(n))&&(n=-1))),{start:t,stop:n,step:i}),slice$indices(e,t){let{start:n,stop:i,step:s}=this.slice$as_indices(!0,t);return this.$wrt(e,n,i,s,t)},sssiter$(e,t){let{start:n,stop:i,step:s}=this.slice$indices(e,!0);if(0<s)for(e=n;e<i;e+=s)t(e);else for(e=n;e>i;e+=s)t(e)}},flags:{sk$acceptable_as_base_class:!1}}),Sk.builtin.slice.startEnd$wrt=function(e,t,n){return e=e.sq$length(),void 0===t||Sk.builtin.checkNone(t)?t=0:0>(t=Sk.misceval.asIndexSized(t,null,"slice indices must be integers or have an __index__ method"))&&(0>(t+=e)&&(t=0)),void 0===n||Sk.builtin.checkNone(n)?n=e:0>(n=Sk.misceval.asIndexSized(n,null,"slice indices must be integers or have an __index__ method"))?0>(n+=e)&&(n=0):n>e&&(n=e),{start:t,end:n}}},function(e,t){function n(e){return function(t){return Sk.builtin.checkAnySet(t)?e.call(this,t):Sk.builtin.NotImplemented.NotImplemented$}}function i(e){return e instanceof Sk.builtin.set&&e.tp$hash===Sk.builtin.none.none$&&(e=new Sk.builtin.frozenset(Sk.misceval.arrayFromIterable(e))),e}e={},Sk.builtin.set=Sk.abstr.buildNativeClass("set",{constructor:function(e){void 0===e?e=[]:Array.isArray(e)||(e=Sk.misceval.arrayFromIterable(e)),Sk.asserts.assert(this instanceof Sk.builtin.set,"Bad call to set - must be called with an Array and 'new'");const t=[];for(let n=0;n<e.length;n++)t.push(e[n]),t.push(!0);this.v=new Sk.builtin.dict(t),this.in$repr=!1},slots:{tp$getattr:Sk.generic.getAttr,tp$as_number:!0,tp$as_sequence_or_mapping:!0,tp$hash:Sk.builtin.none.none$,tp$doc:"set() -> new empty set object\nset(iterable) -> new set object\n\nBuild an unordered collection of unique elements.",tp$init(e,t){return Sk.abstr.checkNoKwargs("set",t),Sk.abstr.checkArgsLen("set",e,0,1),this.set$clear(),(e=e[0])&&this.set$update(e)},tp$new:Sk.generic.new,$r(){if(this.in$repr)return new Sk.builtin.str(Sk.abstr.typeName(this)+"(...)");this.in$repr=!0;const e=this.sk$asarray().map((e=>Sk.misceval.objectRepr(e)));return this.in$repr=!1,Sk.__future__.python3?0===e.length?new Sk.builtin.str(Sk.abstr.typeName(this)+"()"):this.ob$type!==Sk.builtin.set?new Sk.builtin.str(Sk.abstr.typeName(this)+"({"+e.join(", ")+"})"):new Sk.builtin.str("{"+e.join(", ")+"}"):new Sk.builtin.str(Sk.abstr.typeName(this)+"(["+e.join(", ")+"])")},tp$iter(){return new s(this)},tp$richcompare(e,t){if(!Sk.builtin.checkAnySet(e))return Sk.builtin.NotImplemented.NotImplemented$;switch(t){case"NotEq":case"Eq":return e=this===e||this.get$size()===e.get$size()&&Sk.misceval.isTrue(this.set$issubset(e)),"Eq"===t?e:!e;case"LtE":return this===e||Sk.misceval.isTrue(this.set$issubset(e));case"GtE":return this===e||Sk.misceval.isTrue(e.set$issubset(this));case"Lt":return this.get$size()<e.get$size()&&Sk.misceval.isTrue(this.set$issubset(e));case"Gt":return this.get$size()>e.get$size()&&Sk.misceval.isTrue(e.set$issubset(this))}},nb$subtract:n((function(e){return this.difference.$meth.call(this,e)})),nb$and:n((function(e){return this.intersection.$meth.call(this,e)})),nb$or:n((function(e){return this.union.$meth.call(this,e)})),nb$xor:n((function(e){return this.symmetric_difference.$meth.call(this,e)})),nb$inplace_subtract:n((function(e){return e===this&&(e=e.set$copy()),Sk.misceval.chain(this.difference_update.$meth.call(this,e),(()=>this))})),nb$inplace_and:n((function(e){return Sk.misceval.chain(this.intersection_update.$meth.call(this,e),(()=>this))})),nb$inplace_or:n((function(e){return Sk.misceval.chain(this.update.$meth.call(this,e),(()=>this))})),nb$inplace_xor:n((function(e){return e===this&&(e=e.set$copy()),Sk.misceval.chain(this.symmetric_difference_update.$meth.call(this,e),(()=>this))})),sq$length(){return this.get$size()},sq$contains(e){return e=i(e),this.v.sq$contains(e)}},methods:{add:{$meth(e){return this.set$add(e),Sk.builtin.none.none$},$flags:{OneArg:!0},$textsig:null,$doc:"Add an element to a set.\n\nThis has no effect if the element is already present."},clear:{$meth(){return this.set$clear(),Sk.builtin.none.none$},$flags:{NoArgs:!0},$textsig:null,$doc:"Remove all elements from this set."},copy:{$meth(){return this.set$copy()},$flags:{NoArgs:!0},$textsig:null,$doc:"Return a shallow copy of a set."},discard:{$meth(e){return e=i(e),this.set$discard(e),Sk.builtin.none.none$},$flags:{OneArg:!0},$textsig:null,$doc:"Remove an element from a set if it is a member.\n\nIf the element is not a member, do nothing."},difference:{$meth(){const e=this.set$copy();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Sk.misceval.chain(Sk.misceval.iterArray(n,(t=>e.set$difference_update(t))),(()=>e))},$flags:{MinArgs:0},$textsig:null,$doc:"Return the difference of two or more sets as a new set.\n\n(i.e. all elements that are in this set but not the others.)"},difference_update:{$meth(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Sk.misceval.chain(Sk.misceval.iterArray(t,(e=>this.set$difference_update(e))),(()=>Sk.builtin.none.none$))},$flags:{MinArgs:0},$textsig:null,$doc:"Remove all elements of another set from this set."},intersection:{$meth(){return this.set$intersection_multi(...arguments)},$flags:{MinArgs:0},$textsig:null,$doc:"Return the intersection of two sets as a new set.\n\n(i.e. all elements that are in both sets.)"},intersection_update:{$meth(){return Sk.misceval.chain(this.set$intersection_multi(...arguments),(e=>(this.swap$bodies(e),Sk.builtin.none.none$)))},$flags:{MinArgs:0},$textsig:null,$doc:"Update a set with the intersection of itself and another."},isdisjoint:{$meth(e){return Sk.misceval.chain(Sk.misceval.iterFor(Sk.abstr.iter(e),(e=>{if(this.sq$contains(e))return new Sk.misceval.Break(Sk.builtin.bool.false$)})),(e=>e||Sk.builtin.bool.true$))},$flags:{OneArg:!0},$textsig:null,$doc:"Return True if two sets have a null intersection."},issubset:{$meth(e){return Sk.builtin.checkAnySet(e)||(e=this.set$make_basetype(e)),Sk.misceval.chain(e,(e=>this.set$issubset(e)))},$flags:{OneArg:!0},$textsig:null,$doc:"Report whether another set contains this set."},issuperset:{$meth(e){return Sk.builtin.checkAnySet(e)||(e=this.set$make_basetype(e)),Sk.misceval.chain(e,(e=>e.set$issubset(this)))},$flags:{OneArg:!0},$textsig:null,$doc:"Report whether this set contains another set."},pop:{$meth(){if(0===this.get$size())throw new Sk.builtin.KeyError("pop from an empty set");return Sk.misceval.callsimArray(this.v.popitem,[this.v]).v[0]},$flags:{NoArgs:!0},$textsig:null,$doc:"Remove and return an arbitrary set element.\nRaises KeyError if the set is empty."},remove:{$meth(e){const t=i(e);if(this.v.mp$lookup(t))return this.v.mp$ass_subscript(t),Sk.builtin.none.none$;throw new Sk.builtin.KeyError(e)},$flags:{OneArg:!0},$textsig:null,$doc:"Remove an element from a set; it must be a member.\n\nIf the element is not a member, raise a KeyError."},symmetric_difference:{$meth(e){let t;return Sk.misceval.chain(this.set$make_basetype(e),(e=>(t=e,t.set$symmetric_diff_update(this))),(()=>t))},$flags:{OneArg:!0},$textsig:null,$doc:"Return the symmetric difference of two sets as a new set.\n\n(i.e. all elements that are in exactly one of the sets.)"},symmetric_difference_update:{$meth(e){return Sk.builtin.checkAnySet(e)||(e=this.set$make_basetype(e)),Sk.misceval.chain(e,(e=>this.set$symmetric_diff_update(e)),(()=>Sk.builtin.none.none$))},$flags:{OneArg:!0},$textsig:null,$doc:"Update a set with the symmetric difference of itself and another."},union:{$meth(){const e=this.set$copy();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return Sk.misceval.chain(Sk.misceval.iterArray(n,(t=>e.set$update(t))),(()=>e))},$flags:{MinArgs:0},$textsig:null,$doc:"Return the union of sets as a new set.\n\n(i.e. all elements that are in either set.)"},update:{$meth(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Sk.misceval.chain(Sk.misceval.iterArray(t,(e=>this.set$update(e))),(()=>Sk.builtin.none.none$))},$flags:{MinArgs:0},$textsig:null,$doc:"Update a set with the union of itself and others."}},proto:Object.assign(e,{sk$asarray(){return this.v.sk$asarray()},get$size(){return this.v.sq$length()},set$add(e){this.v.mp$ass_subscript(e,!0)},set$make_basetype(e){return Sk.misceval.chain(Sk.misceval.arrayFromIterable(e,!0),(e=>new this.sk$builtinBase(e)))},set$discard(e){return this.v.pop$item(e)},set$clear(){this.v=new Sk.builtin.dict([])},set$copy(){const e=new this.sk$builtinBase;return e.v=this.v.dict$copy(),e},set$difference_update(e){return Sk.misceval.iterFor(Sk.abstr.iter(e),(e=>{this.set$discard(e)}))},set$intersection(e){const t=new this.sk$builtinBase;return Sk.misceval.chain(Sk.misceval.iterFor(Sk.abstr.iter(e),(e=>{this.sq$contains(e)&&t.set$add(e)})),(()=>t))},set$intersection_multi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return this.set$copy();let i=this;return Sk.misceval.chain(Sk.misceval.iterArray(t,(e=>Sk.misceval.chain(i.set$intersection(e),(e=>{i=e})))),(()=>i))},set$issubset(e){if(this.get$size()>e.get$size())return Sk.builtin.bool.false$;for(let t=this.tp$iter(),n=t.tp$iternext();void 0!==n;n=t.tp$iternext())if(!e.sq$contains(n))return Sk.builtin.bool.false$;return Sk.builtin.bool.true$},set$symmetric_diff_update(e){return Sk.misceval.iterFor(Sk.abstr.iter(e),(e=>{void 0===this.set$discard(e)&&this.set$add(e)}))},set$update(e){return Sk.misceval.iterFor(Sk.abstr.iter(e),(e=>{this.set$add(e)}))},swap$bodies(e){this.v=e.v}})}),Sk.exportSymbol("Sk.builtin.set",Sk.builtin.set),t=Sk.builtin.set.prototype,Sk.builtin.frozenset=Sk.abstr.buildNativeClass("frozenset",{constructor:function(e){void 0===e&&(e=[]),Sk.asserts.assert(Array.isArray(e)&&this instanceof Sk.builtin.frozenset,"bad call to frozen set - must be called with an Array and 'new'");const t=[];for(let n=0;n<e.length;n++)t.push(e[n]),t.push(!0);this.v=new Sk.builtin.dict(t),this.in$repr=!1},slots:{tp$getattr:Sk.generic.getAttr,tp$as_number:!0,tp$as_sequence_or_mapping:!0,tp$doc:"frozenset() -> empty frozenset object\nfrozenset(iterable) -> frozenset object\n\nBuild an immutable unordered collection of unique elements.",tp$hash(){let e=1927868237;const t=this.sk$asarray();e*=t.length+1;for(let n=0;n<t.length;n++){const i=Sk.abstr.objectHash(t[n]);e^=3644798167*(i^i<<16^89869747)}return 69069*e+907133923},tp$new(e,t){return this!==Sk.builtin.frozenset.prototype?this.$subtype_new(e,t):(Sk.abstr.checkNoKwargs("frozenset",t),Sk.abstr.checkArgsLen("frozenset",e,0,1),void 0!==(e=e[0])&&e.ob$type===Sk.builtin.frozenset?e:Sk.misceval.chain(Sk.misceval.arrayFromIterable(e,!0),(e=>e.length?new Sk.builtin.frozenset(e):Sk.builtin.frozenset.$emptyset)))},$r:t.$r,tp$iter:t.tp$iter,tp$richcompare:t.tp$richcompare,nb$subtract:t.nb$subtract,nb$and:t.nb$and,nb$or:t.nb$or,nb$xor:t.nb$xor,sq$length:t.sq$length,sq$contains:t.sq$contains},methods:{copy:Object.assign({},t.copy.d$def,{$meth(){return this.constructor===this.sk$builtinBase?this:new Sk.builtin.frozenset(this.sk$asarray())}}),difference:t.difference.d$def,intersection:t.intersection.d$def,isdisjoint:t.isdisjoint.d$def,issubset:t.issubset.d$def,issuperset:t.issuperset.d$def,symmetric_difference:t.symmetric_difference.d$def,union:t.union.d$def},proto:Object.assign({$subtype_new(e,t){const n=new this.constructor;return Sk.misceval.chain(Sk.builtin.frozenset.prototype.tp$new(e),(e=>(n.v=e.v,n)))}},e)}),Sk.builtin.frozenset.$emptyset=Object.create(Sk.builtin.frozenset.prototype,{v:{value:new Sk.builtin.dict([]),enumerable:!0},in$repr:{value:!1,enumerable:!0}}),Sk.exportSymbol("Sk.builtin.frozenset",Sk.builtin.frozenset);var s=Sk.abstr.buildIteratorClass("set_iterator",{constructor:function(e){this.$index=0,this.$seq=e.sk$asarray(),this.$orig=e},iternext:Sk.generic.iterNextWithArrayCheckSize,methods:{__length_hint__:Sk.generic.iterLengthHintWithArrayMethodDef},flags:{sk$acceptable_as_base_class:!1}})},function(e,t){Sk.builtin.print=function(e,t){let n,[i,s,r]=Sk.abstr.copyKeywordsToNamedArgs("print",["sep","end","file","flush"],[],t);if(void 0===i||Sk.builtin.checkNone(i))i=" ";else{if(!Sk.builtin.checkString(i))throw new Sk.builtin.TypeError("sep must be None or a string, not "+Sk.abstr.typeName(i));i=i.$jsstr()}if(void 0===s||Sk.builtin.checkNone(s))s="\n";else{if(!Sk.builtin.checkString(s))throw new Sk.builtin.TypeError("end must be None or a string, not "+Sk.abstr.typeName(s));s=s.$jsstr()}if(void 0!==r&&!Sk.builtin.checkNone(r)&&(n=Sk.abstr.lookupSpecial(r,Sk.builtin.str.$write),void 0===n))throw new Sk.builtin.AttributeError("'"+Sk.abstr.typeName(r)+"' object has no attribute 'write'");const o=new Sk.builtin.str(e.map((e=>new Sk.builtin.str(e).toString())).join(i)+s);if(void 0===n)return Sk.misceval.chain(Sk.importModule("sys",!1,!0),(e=>(n=Sk.abstr.lookupSpecial(e.$d.stdout,Sk.builtin.str.$write))&&Sk.misceval.callsimOrSuspendArray(n,[o])));Sk.misceval.callsimArray(n,[o])},Sk.builtin.print.co_fastcall=1},function(e,t){Sk.builtin.module=Sk.abstr.buildNativeClass("module",{constructor:function(){this.$d={}},slots:{tp$doc:"Create a module object.\n\nThe name must be a string; the optional doc argument can have any type.",tp$getattr(e,t){var n=this.$d[e.$mangled];if(void 0!==n)return n;if(void 0!==(n=this.ob$type.$typeLookup(e))){const e=n.tp$descr_get;return e?e.call(n,this,this.ob$type,t):n}const i=this.$d.__getattr__;return void 0!==i?(n=Sk.misceval.tryCatch((()=>Sk.misceval.callsimOrSuspendArray(i,[e])),(e=>{if(!(e instanceof Sk.builtin.AttributeError))throw e})),t?n:Sk.misceval.retryOptionalSuspensionOrThrow(n)):void 0},tp$setattr:Sk.generic.setAttr,tp$new:Sk.generic.new,tp$init(e,t){const[n,i]=Sk.abstr.copyKeywordsToNamedArgs("module",["name","doc"],e,t,[Sk.builtin.none.none$]);Sk.builtin.pyCheckType("module","string",n),this.init$dict(n,i)},$r(){let e=this.get$name();if(void 0!==e){var t=this.get$mod_reprf();if(void 0!==t)return Sk.misceval.callsimOrSuspendArray(t,[this])}return e=void 0===e?"'?'":e,t=void 0===(t=this.from$file())?this.empty_or$loader():t,new Sk.builtin.str("<module "+e+t+">")}},getsets:{__dict__:{$get(){return new Sk.builtin.mappingproxy(this.$d)}}},methods:{__dir__:{$meth(){const e=this.tp$getattr(Sk.builtin.str.$dict);if(!Sk.builtin.checkMapping(e))throw new Sk.builtin.TypeError("__dict__ is not a dictionary");const t=e.mp$lookup(Sk.builtin.str.$dir);return void 0!==t?Sk.misceval.callsimOrSuspendArray(t,[]):new Sk.builtin.list(Sk.misceval.arrayFromIterable(e))},$flags:{NoArgs:!0},$doc:"__dir__() -> list\nspecialized dir() implementation"}},proto:{init$dict(e,t){this.$d.__name__=e,this.$d.__doc__=t,this.$d.__package__=Sk.builtin.none.none$,this.$d.__spec__=Sk.builtin.none.none$,this.$d.__loader__=Sk.builtin.none.none$},sk$attrError(){const e=this.get$name();return void 0===e?"module":"module "+e},get$name(){const e=this.tp$getattr(Sk.builtin.str.$name);return e&&Sk.misceval.objectRepr(e)},from$file(){const e=this.tp$getattr(Sk.builtin.str.$file);return e&&" from "+Sk.misceval.objectRepr(e)},empty_or$loader(){if(this.$js&&this.$js.includes("$builtinmodule"))return" (built-in)";const e=this.tp$getattr(Sk.builtin.str.$loader);return void 0===e||Sk.builtin.checkNone(e)?"":" ("+Sk.misceval.objectRepr(e)+")"},get$mod_reprf(){const e=this.tp$getattr(Sk.builtin.str.$loader);return e&&e.tp$getattr(this.str$mod_repr)},str$mod_repr:new Sk.builtin.str("module_repr")}}),Sk.exportSymbol("Sk.builtin.module",Sk.builtin.module)},function(e,t){Sk.builtin.structseq_types={},Sk.builtin.make_structseq=function(e,t,n,i){const s=e+"."+t,r=[];e=[];for(let a in n)r.push(a),e.push(n[a]);n={};for(let a=0;a<r.length;a++)n[r[a]]={$get(){return this.v[a]},$doc:e[a]};var o=Sk.abstr.buildNativeClass(s,{constructor:function(e){Sk.asserts.assert((Array.isArray(e)||void 0===e)&&this instanceof o),Sk.builtin.tuple.call(this,e)},base:Sk.builtin.tuple,slots:{tp$new(e,t){Sk.abstr.checkOneArg(s,e,t),t=[],e=e[0];for(let n=Sk.abstr.iter(e),i=n.tp$iternext();void 0!==i;i=n.tp$iternext())t.push(i);if(t.length!=r.length)throw new Sk.builtin.TypeError(s+"() takes a "+r.length+"-sequence ("+t.length+"-sequence given)");return new o(t)},tp$doc:i||Sk.builtin.none.none$,$r(){var e;if(0===this.v.length)return new Sk.builtin.str(s+"()");var t=[];for(e=0;e<this.v.length;++e)t[e]=r[e]+"="+Sk.misceval.objectRepr(this.v[e]);return e=t.join(", "),1===this.v.length&&(e+=","),new Sk.builtin.str(s+"("+e+")")}},methods:{__reduce__:{$meth(){throw new Sk.builtin.NotImplementedError("__reduce__ is not implemented")},$flags:{NoArgs:!0}}},getsets:n,proto:{num_sequence_fields:new Sk.builtin.int_(r.length)}});return o},Sk.exportSymbol("Sk.builtin.make_structseq",Sk.builtin.make_structseq)},function(e,t){Sk.builtin.generator=Sk.abstr.buildIteratorClass("generator",{constructor:function(e,t,n,i,s){var r;if(e){if(!(this instanceof Sk.builtin.generator))throw new TypeError("bad internal call to generator, use 'new'");if(this.func_code=e,this.func_globals=t||null,this.gi$running=!1,this.gi$resumeat=0,this.gi$sentvalue=void 0,this.gi$locals={},this.gi$cells={},0<n.length)for(t=0;t<e.co_varnames.length;++t)this.gi$locals[e.co_varnames[t]]=n[t];if(void 0!==s)for(r in s)i[r]=s[r];this.func_closure=i}},slots:{$r(){return new Sk.builtin.str("<generator object "+this.func_code.co_name.v+">")}},iternext(e,t){var n=this;return this.gi$running=!0,void 0===t&&(t=Sk.builtin.none.none$),this.gi$sentvalue=t,t=[this],this.func_closure&&t.push(this.func_closure),function t(i){if(i instanceof Sk.misceval.Suspension){if(e)return new Sk.misceval.Suspension(t,i);i=Sk.misceval.retryOptionalSuspensionOrThrow(i)}if(n.gi$running=!1,Sk.asserts.assert(void 0!==i),i!==Sk.builtin.none.none$)return n.gi$resumeat=i[0],i[1]}(this.func_code.apply(this.func_globals,t))},methods:{send:{$meth(e){return this.tp$iternext(!0,e)},$flags:{OneArg:!0},$doc:"send(arg) -> send 'arg' into generator,\nreturn next yielded value or raise StopIteration."}}}),Sk.exportSymbol("Sk.builtin.generator",Sk.builtin.generator),Sk.builtin.makeGenerator=function(e,t){var n,i=new Sk.builtin.generator(null,null,null);for(n in i.tp$iternext=e,t)t.hasOwnProperty(n)&&(i[n]=t[n]);return i},Sk.exportSymbol("Sk.builtin.makeGenerator",Sk.builtin.makeGenerator)},function(e,t){Sk.builtin.file=function(e,t,n){var i;if(!(this instanceof Sk.builtin.file))return new Sk.builtin.file(e,t,n);if(this.mode=t,this.name=Sk.ffi.remapToJs(e),this.closed=!1,"/dev/stdout"===this.name)this.data$=Sk.builtin.none.none$,this.fileno=1;else if("/dev/stdin"===this.name)this.fileno=0;else if("/dev/stderr"===this.name)this.fileno=2;else{if(Sk.inBrowser)if(this.fileno=10,null==(n=document.getElementById(e.v))){if("w"!=t.v&&"a"!=t.v)throw new Sk.builtin.IOError("[Errno 2] No such file or directory: '"+e.v+"'");this.data$=""}else"textarea"==n.nodeName.toLowerCase()?this.data$=n.value:this.data$=n.textContent;else this.fileno=11,this.data$=Sk.read(e.v);for(i in this.lineList=this.data$.split("\n"),this.lineList=this.lineList.slice(0,-1),this.lineList)this.lineList[i]+="\n";this.currentLine=0}return this.pos$=0,Sk.fileopen&&10<=this.fileno&&Sk.fileopen(this),this},Sk.abstr.setUpInheritance("file",Sk.builtin.file,Sk.builtin.object),Sk.abstr.setUpBuiltinMro(Sk.builtin.file),Sk.builtin.file.prototype.$r=function(){return new Sk.builtin.str("<"+(this.closed?"closed":"open")+"file '"+this.name+"', mode '"+Sk.ffi.remapToJs(this.mode)+"'>")},Sk.builtin.file.prototype.tp$iter=function(){var e={tp$iter:function(){return e},$obj:this,$index:this.currentLine,$lines:this.lineList,tp$iternext:function(){if(!(e.$index>=e.$lines.length))return new Sk.builtin.str(e.$lines[e.$index++])}};return e},Sk.abstr.setUpSlots(Sk.builtin.file),Sk.builtin.file.prototype.__enter__=new Sk.builtin.func((function(e){return e})),Sk.builtin.file.prototype.__exit__=new Sk.builtin.func((function(e){return Sk.misceval.callsimArray(Sk.builtin.file.prototype.close,[e])})),Sk.builtin.file.prototype.close=new Sk.builtin.func((function(e){return e.closed=!0,Sk.builtin.none.none$})),Sk.builtin.file.prototype.flush=new Sk.builtin.func((function(e){})),Sk.builtin.file.prototype.fileno=new Sk.builtin.func((function(e){return this.fileno})),Sk.builtin.file.prototype.isatty=new Sk.builtin.func((function(e){return!1})),Sk.builtin.file.prototype.read=new Sk.builtin.func((function(e,t){var n=e.data$.length;if(e.closed)throw new Sk.builtin.ValueError("I/O operation on closed file");var i=void 0===t?n:Sk.ffi.remapToJs(t);return i=new Sk.builtin.str(e.data$.substr(e.pos$,i)),e.pos$=void 0===t?n:e.pos$+Sk.ffi.remapToJs(t),e.pos$>=n&&(e.pos$=n),i})),Sk.builtin.file.$readline=function(e,t,n){if(0===e.fileno){if(e=Sk.ffi.remapToJs(n),(e=Sk.inputfun(e||""))instanceof Promise||e&&"function"===typeof e.then){var i=new Sk.misceval.Suspension;return i.resume=function(){if(i.data.error)throw i.data.error;return new Sk.builtin.str(i.data.result)},i.data={type:"Sk.promise",promise:e},i}return new Sk.builtin.str(e)}return t="",e.currentLine<e.lineList.length&&(t=e.lineList[e.currentLine],e.currentLine++),new Sk.builtin.str(t)},Sk.builtin.file.prototype.readline=new Sk.builtin.func((function(e,t){return Sk.builtin.file.$readline(e,t,void 0)})),Sk.builtin.file.prototype.readlines=new Sk.builtin.func((function(e,t){if(0===e.fileno)return new Sk.builtin.NotImplementedError("readlines ins't implemented because the web doesn't support Ctrl+D");var n=[];for(t=e.currentLine;t<e.lineList.length;t++)n.push(new Sk.builtin.str(e.lineList[t]));return new Sk.builtin.list(n)})),Sk.builtin.file.prototype.seek=new Sk.builtin.func((function(e,t,n){return t=Sk.ffi.remapToJs(t),void 0===n&&(n=0),0===n?e.pos$=t:(1==n||2==n)&&(e.pos$=e.data$.length+t),Sk.builtin.none.none$})),Sk.builtin.file.prototype.tell=new Sk.builtin.func((function(e){return Sk.ffi.remapToPy(e.pos$)})),Sk.builtin.file.prototype.truncate=new Sk.builtin.func((function(e,t){Sk.asserts.fail()})),Sk.builtin.file.prototype.write=new Sk.builtin.func((function(e,t){var n=Sk.ffi.remapToJs(e.mode);if("w"!==n&&"wb"!==n&&"a"!==n&&"ab"!==n)throw new Sk.builtin.IOError("File not open for writing");if(Sk.filewrite){if(e.closed)throw new Sk.builtin.ValueError("I/O operation on closed file");1===e.fileno?Sk.output(Sk.ffi.remapToJs(t)):Sk.filewrite(e,t)}else 1===e.fileno?Sk.output(Sk.ffi.remapToJs(t)):Sk.asserts.fail();return Sk.builtin.none.none$})),Sk.exportSymbol("Sk.builtin.file",Sk.builtin.file)},function(e,t){Sk.ffi=Sk.ffi||{},Sk.ffi.remapToPy=function(e){var t;if(null===e||"undefined"===typeof e)return Sk.builtin.none.none$;if(e.ob$type||e instanceof Sk.misceval.Suspension)return e;if("[object Array]"===Object.prototype.toString.call(e)){var n=[];for(t=0;t<e.length;++t)n.push(Sk.ffi.remapToPy(e[t]));return new Sk.builtin.list(n)}if("object"===typeof e){for(t in n=[],e)n.push(Sk.ffi.remapToPy(t)),n.push(Sk.ffi.remapToPy(e[t]));return new Sk.builtin.dict(n)}return"string"===typeof e?new Sk.builtin.str(e):"number"===typeof e?Sk.builtin.assk$(e):"boolean"===typeof e?new Sk.builtin.bool(e):"undefined"===typeof e?Sk.builtin.none.none$:"function"===typeof e?new Sk.builtin.func(e):void Sk.asserts.fail("unhandled remap type "+typeof e)},Sk.exportSymbol("Sk.ffi.remapToPy",Sk.ffi.remapToPy),Sk.ffi.remapToJs=function(e){var t,n;if(e instanceof Sk.builtin.dict){var i={};return e.$items().forEach((e=>{let[t,s]=e;n=Sk.ffi.remapToJs(t),i[n]=Sk.ffi.remapToJs(s)})),i}if(e instanceof Sk.builtin.list||e instanceof Sk.builtin.tuple){for(i=[],t=0;t<e.v.length;++t)i.push(Sk.ffi.remapToJs(e.v[t]));return i}return e instanceof Sk.builtin.bool?!!e.v:e instanceof Sk.builtin.int_||e instanceof Sk.builtin.float_||e instanceof Sk.builtin.lng?Sk.builtin.asnum$(e):"number"===typeof e||"boolean"===typeof e||"string"===typeof e?e:void 0!==e?e.v:void 0},Sk.exportSymbol("Sk.ffi.remapToJs",Sk.ffi.remapToJs),Sk.ffi.callback=function(e){return void 0===e?e:function(){return Sk.misceval.apply(e,void 0,void 0,void 0,Array.prototype.slice.call(arguments,0))}},Sk.exportSymbol("Sk.ffi.callback",Sk.ffi.callback),Sk.ffi.stdwrap=function(e,t){return(e=new e).v=t,e},Sk.exportSymbol("Sk.ffi.stdwrap",Sk.ffi.stdwrap),Sk.ffi.basicwrap=function(e){return e instanceof Sk.builtin.int_||e instanceof Sk.builtin.float_||e instanceof Sk.builtin.lng?Sk.builtin.asnum$(e):"number"===typeof e||"boolean"===typeof e?e:"string"===typeof e?new Sk.builtin.str(e):void Sk.asserts.fail("unexpected type for basicwrap")},Sk.exportSymbol("Sk.ffi.basicwrap",Sk.ffi.basicwrap),Sk.ffi.unwrapo=function(e){if(void 0!==e)return e.v},Sk.exportSymbol("Sk.ffi.unwrapo",Sk.ffi.unwrapo),Sk.ffi.unwrapn=function(e){return null===e?null:e.v},Sk.exportSymbol("Sk.ffi.unwrapn",Sk.ffi.unwrapn)},function(e,t){function n(e,t,n){if(e=void 0===e?e:Sk.misceval.asIndexOrThrow(e),t=void 0===t?t:Sk.misceval.asIndexOrThrow(t),n=void 0===n?n:Sk.misceval.asIndexOrThrow(n),void 0===t&&void 0===n)t=e,e=0,n=1;else if(void 0===n)n=1;else if(0===n)throw new Sk.builtin.ValueError("range() step argument must not be zero");const s=[];if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)if(0<n)for(var r=e;r<t;r+=n)s.push(new Sk.builtin.int_(r));else for(r=e;r>t;r+=n)s.push(new Sk.builtin.int_(r));else{if(e=r=JSBI.BigInt(e),n=JSBI.BigInt(n),t=JSBI.BigInt(t),JSBI.greaterThan(n,JSBI.__ZERO))for(;JSBI.lessThan(r,t);)s.push(new Sk.builtin.int_(i(r))),r=JSBI.add(r,n);else for(;JSBI.greaterThan(r,t);)s.push(new Sk.builtin.int_(i(r))),r=JSBI.add(r,n);e=i(e),n=i(n),t=i(t)}return new Sk.builtin.range_(e,t,n,s)}function i(e){return JSBI.lessThan(e,JSBI.__MAX_SAFE)&&JSBI.greaterThan(e,JSBI.__MIN_SAFE)?JSBI.toNumber(e):e}Sk.builtin.range_=Sk.abstr.buildNativeClass("range",{constructor:function(e,t,n,i){this.start=e,this.stop=t,this.step=n,this.v=i},slots:{tp$getattr:Sk.generic.getAttr,tp$as_sequence_or_mapping:!0,tp$doc:"range(stop) -> range object\nrange(start, stop[, step]) -> range object\n\nReturn an object that produces a sequence of integers from start (inclusive)\nto stop (exclusive) by step.  range(i, j) produces i, i+1, i+2, ..., j-1.\nstart defaults to 0, and stop is omitted!  range(4) produces 0, 1, 2, 3.\nThese are exactly the valid indices for a list of 4 elements.\nWhen step is given, it specifies the increment (or decrement).",tp$new:(e,t)=>(Sk.abstr.checkNoKwargs("range",t),Sk.abstr.checkArgsLen("range",e,1,3),n(e[0],e[1],e[2])),$r(){let e="range("+this.start+", "+this.stop;return 1!=this.step&&(e+=", "+this.step),new Sk.builtin.str(e+")")},tp$richcompare(e,t){return"Eq"!==t&&"NotEq"!==t||e.ob$type!==Sk.builtin.range_?Sk.builtin.NotImplemented.NotImplemented$:(e=new Sk.builtin.list(e.v),new Sk.builtin.list(this.v).tp$richcompare(e,t))},tp$iter(){return new s(this)},nb$bool(){return 0!==this.v.length},sq$contains(e){const t=this.v;for(let n=0;n<t.length;n++)if(Sk.misceval.richCompareBool(e,t[n],"Eq"))return!0;return!1},sq$length(){return this.v.length},mp$subscript(e){if(Sk.misceval.isIndex(e)){if(0>(e=Sk.misceval.asIndexSized(e))&&(e=this.v.length+e),0>e||e>=this.v.length)throw new Sk.builtin.IndexError("range object index out of range");return this.v[e]}if(e.constructor===Sk.builtin.slice){const t=[],n=this.v;e.sssiter$(n.length,(e=>{t.push(n[e])}));let{start:i,stop:s,step:r}=e.slice$indices(n.length);return i=Sk.misceval.asIndex(n[i])||this.start,s=Sk.misceval.asIndex(n[s])||this.stop,r="number"===typeof this.step?r*this.step:JSBI.multiply(this.step,JSBI.BigInt(r)),new Sk.builtin.range_(i,s,r,t)}throw new Sk.builtin.TypeError("range indices must be integers or slices, not "+Sk.abstr.typeName(e))}},getsets:{start:{$get(){return new Sk.builtin.int_(this.start)}},step:{$get(){return new Sk.builtin.int_(this.step)}},stop:{$get(){return new Sk.builtin.int_(this.stop)}}},methods:{__reversed__:{$meth(){return new r(this)},$flags:{NoArgs:!0},$textsig:null,$doc:"Return a reverse iterator."},count:{$meth(e){let t=0;for(let n=0;n<this.v.length;n++)Sk.misceval.richCompareBool(e,this.v[n],"Eq")&&t++;return new Sk.builtin.int_(t)},$flags:{OneArg:!0},$textsig:null,$doc:"rangeobject.count(value) -> integer -- return number of occurrences of value"},index:{$meth(e){for(let t=0;t<this.v.length;t++)if(Sk.misceval.richCompareBool(e,this.v[t],"Eq"))return new Sk.builtin.int_(t);throw new Sk.builtin.ValueError(Sk.misceval.objectRepr(e)+"is not in range")},$flags:{OneArg:!0},$textsig:null,$doc:"rangeobject.index(value, [start, [stop]]) -> integer -- return index of value.\nRaise ValueError if the value is not present."}},proto:{sk$asarray(){return this.v.slice(0)}},flags:{sk$acceptable_as_base_class:!1}});var s=Sk.abstr.buildIteratorClass("range_iterator",{constructor:function(e){this.$index=0,this.$seq=e.v},iternext(){return this.$seq[this.$index++]},methods:{__length_hint__:Sk.generic.iterLengthHintWithArrayMethodDef},flags:{sk$acceptable_as_base_class:!1}}),r=Sk.abstr.buildIteratorClass("range_reverseiterator",{constructor:function(e){this.$seq=e.v,this.$index=this.$seq.length-1},iternext(){return this.$seq[this.$index--]},methods:{__length_hint__:Sk.generic.iterReverseLengthHintMethodDef},flags:{sk$acceptable_as_base_class:!1}});Sk.builtin.range=Sk.builtin.xrange=function(e,t,i){return e=n(e,t,i),new Sk.builtin.list(e.v)}},function(e,t){Sk.builtin.enumerate=Sk.abstr.buildIteratorClass("enumerate",{constructor:function(e,t){if(!(this instanceof Sk.builtin.enumerate))throw TypeError("Failed to construct 'enumerate': Please use the 'new' operator");return this.$iterable=e,this.$index=t,this},iternext(e){const t=Sk.misceval.chain(this.$iterable.tp$iternext(e),(e=>{if(void 0!==e)return new Sk.builtin.tuple([new Sk.builtin.int_(this.$index++),e])}));return e?t:Sk.misceval.retryOptionalSuspensionOrThrow(t)},slots:{tp$doc:"Return an enumerate object.\n\n  iterable\n    an object supporting iteration\n\nThe enumerate object yields pairs containing a count (from start, which\ndefaults to zero) and a value yielded by the iterable argument.\n\nenumerate is useful for obtaining an indexed list:\n    (0, seq[0]), (1, seq[1]), (2, seq[2]), ...",tp$new(e,t){let[n,i]=Sk.abstr.copyKeywordsToNamedArgs("enumerate",["iterable","start"],e,t,[new Sk.builtin.int_(0)]);return n=Sk.abstr.iter(n),i=Sk.misceval.asIndexOrThrow(i),this===Sk.builtin.enumerate.prototype?new Sk.builtin.enumerate(n,i):(e=new this.constructor,Sk.builtin.enumerate.call(e,n,i),e)}}}),Sk.exportSymbol("Sk.builtin.enumerate",Sk.builtin.enumerate)},function(e,t){Sk.builtin.filter_=Sk.abstr.buildIteratorClass("filter",{constructor:function(e,t){this.$func=e,this.$iterable=t},iternext(e){const t=Sk.misceval.iterFor(this.$iterable,(e=>Sk.misceval.chain(this.check$filter(e),(e=>e?new Sk.misceval.Break(e):void 0))));return e?t:Sk.misceval.retryOptionalSuspensionOrThrow(t)},slots:{tp$doc:"Return an iterator yielding those items of iterable for which function(item)\nis true. If function is None, return the items that are true.",tp$new(e,t){let[n,i]=Sk.abstr.copyKeywordsToNamedArgs("filter",["predicate","iterable"],e,t,[]);return n=Sk.builtin.checkNone(n)?null:n,i=Sk.abstr.iter(i),this===Sk.builtin.filter_.prototype?new Sk.builtin.filter_(n,i):(e=new this.constructor,Sk.builtin.filter_.call(e,n,i),e)}},proto:{check$filter(e){let t;return t=null===this.$func?e:Sk.misceval.callsimOrSuspendArray(this.$func,[e]),Sk.misceval.chain(t,(t=>Sk.misceval.isTrue(t)?e:void 0))}}}),Sk.exportSymbol("Sk.builtin.filter_",Sk.builtin.filter_)},function(e,t){Sk.builtin.map_=Sk.abstr.buildIteratorClass("map",{constructor:function(e,t){this.$func=e,this.$iters=t},iternext(e){const t=[],n=Sk.misceval.chain(Sk.misceval.iterArray(this.$iters,(n=>Sk.misceval.chain(n.tp$iternext(e),(e=>{if(void 0===e)return new Sk.misceval.Break(!0);t.push(e)})))),(e=>e?void 0:Sk.misceval.callsimOrSuspendArray(this.$func,t)));return e?n:Sk.misceval.retryOptionalSuspensionOrThrow(n)},slots:{tp$doc:"map(func, *iterables) --\x3e map object\n\nMake an iterator that computes the function using arguments from\neach of the iterables.  Stops when the shortest iterable is exhausted.",tp$new(e,t){this===Sk.builtin.map_.prototype&&Sk.abstr.checkNoKwargs("map",t),Sk.abstr.checkArgsLen("map",e,2),t=e[0];const n=[];for(let i=1;i<e.length;i++)n.push(Sk.abstr.iter(e[i]));return this===Sk.builtin.map_.prototype?new Sk.builtin.map_(t,n):(e=new this.constructor,Sk.builtin.map_.call(e,t,n),e)}}}),Sk.exportSymbol("Sk.builtin.map_",Sk.builtin.map_)},function(e,t){Sk.builtin.reversed=Sk.abstr.buildIteratorClass("reversed",{constructor:function(e){return this.$idx=e.sq$length()-1,this.$seq=e,this},iternext(e){if(!(0>this.$idx)){var t=Sk.misceval.tryCatch((()=>Sk.abstr.objectGetItem(this.$seq,new Sk.builtin.int_(this.$idx--),e)),(e=>{if(!(e instanceof Sk.builtin.IndexError))throw e;this.$idx=-1}));return e?t:Sk.misceval.retryOptionalSuspensionOrThrow(t)}},slots:{tp$doc:"Return a reverse iterator over the values of the given sequence.",tp$new(e,t){if(this===Sk.builtin.reversed.prototype&&Sk.abstr.checkNoKwargs("reversed",t),Sk.abstr.checkArgsLen("reversed",e,1,1),e=e[0],void 0!==(t=Sk.abstr.lookupSpecial(e,Sk.builtin.str.$reversed)))return Sk.misceval.callsimArray(t,[]);if(!Sk.builtin.checkSequence(e)||void 0===Sk.abstr.lookupSpecial(e,Sk.builtin.str.$len))throw new Sk.builtin.TypeError("'"+Sk.abstr.typeName(e)+"' object is not a sequence");return this===Sk.builtin.reversed.prototype?new Sk.builtin.reversed(e):(t=new this.constructor,Sk.builtin.reversed.call(t,e),t)}},methods:{__length_hint__:{$meth:function(){return 0<=this.$idx?new Sk.builtin.int_(this.$idx):new Sk.builtin.int_(0)},$flags:{NoArgs:!0}}}})},function(e,t){Sk.builtin.zip_=Sk.abstr.buildIteratorClass("zip",{constructor:function(e){this.$iters=e,0===e.length&&(this.tp$iternext=()=>{})},iternext(e){const t=[],n=Sk.misceval.chain(Sk.misceval.iterArray(this.$iters,(n=>Sk.misceval.chain(n.tp$iternext(e),(e=>{if(void 0===e)return new Sk.misceval.Break(!0);t.push(e)})))),(e=>e?void 0:new Sk.builtin.tuple(t)));return e?n:Sk.misceval.retryOptionalSuspensionOrThrow(n)},slots:{tp$doc:"zip(iter1 [,iter2 [...]]) --\x3e zip object\n\nReturn a zip object whose .__next__() method returns a tuple where\nthe i-th element comes from the i-th iterable argument.  The .__next__()\nmethod continues until the shortest iterable in the argument sequence\nis exhausted and then it raises StopIteration.",tp$new(e,t){this===Sk.builtin.zip_.prototype&&Sk.abstr.checkNoKwargs("zip",t),t=[];for(let i=0;i<e.length;i++)try{t.push(Sk.abstr.iter(e[i]))}catch(n){if(n instanceof Sk.builtin.TypeError)throw new Sk.builtin.TypeError("zip argument #"+(i+1)+" must support iteration");throw n}return this===Sk.builtin.zip_.prototype?new Sk.builtin.zip_(t):(e=new this.constructor,Sk.builtin.zip_.call(e,t),e)}}}),Sk.exportSymbol("Sk.builtin.zip_",Sk.builtin.zip_)},function(e,t){var n={T_ENDMARKER:0,T_NAME:1,T_NUMBER:2,T_STRING:3,T_NEWLINE:4,T_INDENT:5,T_DEDENT:6,T_LPAR:7,T_RPAR:8,T_LSQB:9,T_RSQB:10,T_COLON:11,T_COMMA:12,T_SEMI:13,T_PLUS:14,T_MINUS:15,T_STAR:16,T_SLASH:17,T_VBAR:18,T_AMPER:19,T_LESS:20,T_GREATER:21,T_EQUAL:22,T_DOT:23,T_PERCENT:24,T_LBRACE:25,T_RBRACE:26,T_EQEQUAL:27,T_NOTEQUAL:28,T_LESSEQUAL:29,T_GREATEREQUAL:30,T_TILDE:31,T_CIRCUMFLEX:32,T_LEFTSHIFT:33,T_RIGHTSHIFT:34,T_DOUBLESTAR:35,T_PLUSEQUAL:36,T_MINEQUAL:37,T_STAREQUAL:38,T_SLASHEQUAL:39,T_PERCENTEQUAL:40,T_AMPEREQUAL:41,T_VBAREQUAL:42,T_CIRCUMFLEXEQUAL:43,T_LEFTSHIFTEQUAL:44,T_RIGHTSHIFTEQUAL:45,T_DOUBLESTAREQUAL:46,T_DOUBLESLASH:47,T_DOUBLESLASHEQUAL:48,T_AT:49,T_ATEQUAL:50,T_RARROW:51,T_ELLIPSIS:52,T_OP:53,T_AWAIT:54,T_ASYNC:55,T_ERRORTOKEN:56,T_NT_OFFSET:256,T_N_TOKENS:60,T_COMMENT:57,T_NL:58,T_ENCODING:59};e={"!=":n.T_NOTEQUAL,"%":n.T_PERCENT,"%=":n.T_PERCENTEQUAL,"&":n.T_AMPER,"&=":n.T_AMPEREQUAL,"(":n.T_LPAR,")":n.T_RPAR,"*":n.T_STAR,"**":n.T_DOUBLESTAR,"**=":n.T_DOUBLESTAREQUAL,"*=":n.T_STAREQUAL,"+":n.T_PLUS,"+=":n.T_PLUSEQUAL,",":n.T_COMMA,"-":n.T_MINUS,"-=":n.T_MINEQUAL,"->":n.T_RARROW,".":n.T_DOT,"...":n.T_ELLIPSIS,"/":n.T_SLASH,"//":n.T_DOUBLESLASH,"//=":n.T_DOUBLESLASHEQUAL,"/=":n.T_SLASHEQUAL,":":n.T_COLON,";":n.T_SEMI,"<":n.T_LESS,"<<":n.T_LEFTSHIFT,"<<=":n.T_LEFTSHIFTEQUAL,"<=":n.T_LESSEQUAL,"=":n.T_EQUAL,"==":n.T_EQEQUAL,">":n.T_GREATER,">=":n.T_GREATEREQUAL,">>":n.T_RIGHTSHIFT,">>=":n.T_RIGHTSHIFTEQUAL,"@":n.T_AT,"@=":n.T_ATEQUAL,"[":n.T_LSQB,"]":n.T_RSQB,"^":n.T_CIRCUMFLEX,"^=":n.T_CIRCUMFLEXEQUAL,"{":n.T_LBRACE,"|":n.T_VBAR,"|=":n.T_VBAREQUAL,"}":n.T_RBRACE,"~":n.T_TILDE};var i={};!function(){for(var e in n)i[n[e]]=e}(),["tok_name","ISTERMINAL","ISNONTERMINAL","ISEOF"].concat(Object.keys(i).map((function(e){return i[e]}))),Sk.token={},Sk.token.tokens=n,Sk.token.tok_name=i,Sk.token.EXACT_TOKEN_TYPES=e,Sk.token.ISTERMINAL=function(e){return e<n.T_NT_OFFSET},Sk.token.ISNONTERMINAL=function(e){return e>=n.T_NT_OFFSET},Sk.token.ISEOF=function(e){return e==n.T_ENDMARKER},Sk.exportSymbol("Sk.token",Sk.token),Sk.exportSymbol("Sk.token.tokens",Sk.token.tokens),Sk.exportSymbol("Sk.token.tok_name",Sk.token.tok_name),Sk.exportSymbol("Sk.token.EXACT_TOKEN_TYPES"),Sk.exportSymbol("Sk.token.ISTERMINAL",Sk.token.ISTERMINAL),Sk.exportSymbol("Sk.token.ISNONTERMINAL",Sk.token.ISNONTERMINAL),Sk.exportSymbol("Sk.token.ISEOF",Sk.token.ISEOF)},function(e,t){function n(e,t,n,i,s){this.type=e,this.string=t,this.start=n,this.end=i,this.line=s}function i(e){return"("+Array.prototype.slice.call(arguments).join("|")+")"}function s(e){return i.apply(null,arguments)+"?"}function r(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}function o(){return" FR RF Br BR Fr r B R b bR f rb rB F Rf U rF u RB br fR fr rf Rb".split(" ")}function a(e){e?delete Sk.token.EXACT_TOKEN_TYPES["<>"]:Sk.token.EXACT_TOKEN_TYPES["<>"]=Sk.token.tokens.T_NOTEQUAL,g=Object.keys(Sk.token.EXACT_TOKEN_TYPES).sort(),p=i.apply(this,g.reverse().map((function(e){return e&&d.test(e)?e.replace(h,"\\$&"):e}))),m=i("\\r?\\n",p)}var l=Sk.token.tokens;const c=Sk.builtin.SyntaxError,u=Sk.builtin.SyntaxError;n.prototype.exact_type=function(){return this.type==l.T_OP&&this.string in Sk.token.EXACT_TOKEN_TYPES?Sk.token.EXACT_TOKEN_TYPES[this.string]:this.type};var h=/[\\^$.*+?()[\]{}|]/g,d=RegExp(h.source);const f=function(){var e=i("[A-Z]","[a-z]","[\\u{10B99}-\\u{10B9C}\\u{112A9}\\u{115DC}-\\u{115DD}\\u034F\\u115F-\\u1160\\u17B4-\\u17B5\\u2065\\u3164\\uFFA0\\uFFF0-\\uFFF8\\u{E0000}\\u{E0002}-\\u{E001F}\\u{E0080}-\\u{E00FF}\\u{E01F0}-\\u{E0FFF}\\u{112A9}\\u00D7]","[\\u02B0-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0374\\u037A\\u0559\\u06E5-\\u06E6\\u07F4-\\u07F5\\u0971\\u1C78-\\u1C7D\\u1D2C-\\u1D6A\\u1DFD-\\u1DFF\\u2E2F\\u30FC\\uA67F\\uA69C-\\uA69D\\uA717-\\uA71F\\uA788\\uA7F8-\\uA7F9\\uAB5C-\\uAB5F\\uFF70\\uFF9E-\\uFF9F\\u{16F93}-\\u{16F9F}\\u02D0-\\u02D1\\u0640\\u07FA\\u0E46\\u0EC6\\u1843\\u1AA7\\u1C7B\\u3005\\u3031-\\u3035\\u309D-\\u309E\\u30FC-\\u30FE\\uA015\\uA60C\\uA9CF\\uA9E6\\uAA70\\uAADD\\uAAF3-\\uAAF4\\uFF70\\u{16B42}-\\u{16B43}\\u{16FE0}-\\u{16FE1}\\u02B0-\\u02B8\\u02C0-\\u02C1\\u02E0-\\u02E4\\u037A\\u1D2C-\\u1D6A\\u1D78\\u1D9B-\\u1DBF\\u2071\\u207F\\u2090-\\u209C\\u2C7C-\\u2C7D\\uA69C-\\uA69D\\uA770\\uA7F8-\\uA7F9\\uAB5C-\\uAB5F\\uFF9E-\\uFF9F\\u02B2\\u1D62\\u1DA4\\u1DA8\\u2071\\u2C7C\\u2E18-\\u2E19\\u2E2F]","[\\u2135-\\u2138\\u{1EE00}-\\u{1EE03}\\u{1EE05}-\\u{1EE1F}\\u{1EE21}-\\u{1EE22}\\u{1EE24}\\u{1EE27}\\u{1EE29}-\\u{1EE32}\\u{1EE34}-\\u{1EE37}\\u{1EE39}\\u{1EE3B}\\u{1EE42}\\u{1EE47}\\u{1EE49}\\u{1EE4B}\\u{1EE4D}-\\u{1EE4F}\\u{1EE51}-\\u{1EE52}\\u{1EE54}\\u{1EE57}\\u{1EE59}\\u{1EE5B}\\u{1EE5D}\\u{1EE5F}\\u{1EE61}-\\u{1EE62}\\u{1EE64}\\u{1EE67}-\\u{1EE6A}\\u{1EE6C}-\\u{1EE72}\\u{1EE74}-\\u{1EE77}\\u{1EE79}-\\u{1EE7C}\\u{1EE7E}\\u{1EE80}-\\u{1EE89}\\u{1EE8B}-\\u{1EE9B}\\u{1EEA1}-\\u{1EEA3}\\u{1EEA5}-\\u{1EEA9}\\u{1EEAB}-\\u{1EEBB}\\u3006\\u3400-\\u4DB5\\u4E00-\\u9FEF\\uF900-\\uFA6D\\uFA70-\\uFAD9\\u{17000}-\\u{187F1}\\u{18800}-\\u{18AF2}\\u{1B170}-\\u{1B2FB}\\u{20000}-\\u{2A6D6}\\u{2A700}-\\u{2B734}\\u{2B740}-\\u{2B81D}\\u{2B820}-\\u{2CEA1}\\u{2CEB0}-\\u{2EBE0}\\u{2F800}-\\u{2FA1D}\\uAAC0\\uAAC2\\uFE20-\\uFE2F\\u{10D22}-\\u{10D23}\\u{1135D}\\u00AA\\u00BA\\u3400-\\u4DB5\\u4E00-\\u9FEF\\uFA0E-\\uFA0F\\uFA11\\uFA13-\\uFA14\\uFA1F\\uFA21\\uFA23-\\uFA24\\uFA27-\\uFA29\\u{20000}-\\u{2A6D6}\\u{2A700}-\\u{2B734}\\u{2B740}-\\u{2B81D}\\u{2B820}-\\u{2CEA1}\\u{2CEB0}-\\u{2EBE0}\\u115F-\\u1160\\u3164\\uFFA0\\u0673\\u17A3-\\u17A4\\u0E40-\\u0E44\\u0EC0-\\u0EC4\\u19B5-\\u19B7\\u19BA\\uAAB5-\\uAAB6\\uAAB9\\uAABB-\\uAABC]","[\\u3007\\u3021-\\u3029\\u3038-\\u303A\\u2170-\\u217F\\u2160-\\u216F]","_","[\\u1885-\\u1886\\u2118\\u212E\\u309B-\\u309C]"),t=i(e,"[\\u104A-\\u104B\\u102B-\\u102C\\u102D-\\u1030\\u1031\\u1032-\\u1036\\u1038\\u103B-\\u103C\\u103D-\\u103E\\u1056-\\u1057\\u1058-\\u1059\\u105E-\\u1060\\u1062\\u1067-\\u1068\\u1071-\\u1074\\u1082\\u1083-\\u1084\\u1085-\\u1086\\u109C\\u109D\\u1037\\u1039-\\u103A\\u1087-\\u108C\\u108D\\u108F\\u109A-\\u109B\\uA9E5\\uAA7B\\uAA7C\\uAA7D\\uA9E6\\uAA70\\u104A-\\u104B]","[\\u0903\\u093B\\u093E-\\u0940\\u0949-\\u094C\\u094E-\\u094F\\u0982-\\u0983\\u09BE-\\u09C0\\u09C7-\\u09C8\\u09CB-\\u09CC\\u09D7\\u0A03\\u0A3E-\\u0A40\\u0A83\\u0ABE-\\u0AC0\\u0AC9\\u0ACB-\\u0ACC\\u0B02-\\u0B03\\u0B3E\\u0B40\\u0B47-\\u0B48\\u0B4B-\\u0B4C\\u0B57\\u0BBE-\\u0BBF\\u0BC1-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0BD7\\u0C01-\\u0C03\\u0C41-\\u0C44\\u0C82-\\u0C83\\u0CBE\\u0CC0-\\u0CC4\\u0CC7-\\u0CC8\\u0CCA-\\u0CCB\\u0CD5-\\u0CD6\\u0D02-\\u0D03\\u0D3E-\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D57\\u0D82-\\u0D83\\u0DCF-\\u0DD1\\u0DD8-\\u0DDF\\u0DF2-\\u0DF3\\u0F7F\\u102B-\\u102C\\u1031\\u1038\\u103B-\\u103C\\u1056-\\u1057\\u1062\\u1067-\\u1068\\u1083-\\u1084\\u109C\\u17B6\\u17BE-\\u17C5\\u17C7-\\u17C8\\u1923-\\u1926\\u1929-\\u192B\\u1930-\\u1931\\u1933-\\u1938\\u1A19-\\u1A1A\\u1A55\\u1A57\\u1A61\\u1A63-\\u1A64\\u1A6D-\\u1A72\\u1B04\\u1B35\\u1B3B\\u1B3D-\\u1B41\\u1B43\\u1B82\\u1BA1\\u1BA6-\\u1BA7\\u1BE7\\u1BEA-\\u1BEC\\u1BEE\\u1C24-\\u1C2B\\u1C34-\\u1C35\\u1CF2-\\u1CF3\\uA823-\\uA824\\uA827\\uA880-\\uA881\\uA8B4-\\uA8C3\\uA952\\uA983\\uA9B4-\\uA9B5\\uA9BA-\\uA9BB\\uA9BD-\\uA9BF\\uAA2F-\\uAA30\\uAA33-\\uAA34\\uAA4D\\uAAEB\\uAAEE-\\uAAEF\\uAAF5\\uABE3-\\uABE4\\uABE6-\\uABE7\\uABE9-\\uABEA\\u{11000}\\u{11002}\\u{11082}\\u{110B0}-\\u{110B2}\\u{110B7}-\\u{110B8}\\u{1112C}\\u{11145}-\\u{11146}\\u{11182}\\u{111B3}-\\u{111B5}\\u{111BF}\\u{1122C}-\\u{1122E}\\u{11232}-\\u{11233}\\u{112E0}-\\u{112E2}\\u{11302}-\\u{11303}\\u{1133E}-\\u{1133F}\\u{11341}-\\u{11344}\\u{11347}-\\u{11348}\\u{1134B}-\\u{1134C}\\u{11357}\\u{11362}-\\u{11363}\\u{11435}-\\u{11437}\\u{11440}-\\u{11441}\\u{11445}\\u{114B0}-\\u{114B2}\\u{114B9}\\u{114BB}-\\u{114BE}\\u{114C1}\\u{115AF}-\\u{115B1}\\u{115B8}-\\u{115BB}\\u{115BE}\\u{11630}-\\u{11632}\\u{1163B}-\\u{1163C}\\u{1163E}\\u{116AC}\\u{116AE}-\\u{116AF}\\u{11720}-\\u{11721}\\u{11726}\\u{1182C}-\\u{1182E}\\u{11838}\\u{11A39}\\u{11A57}-\\u{11A58}\\u{11A97}\\u{11C2F}\\u{11C3E}\\u{11CA9}\\u{11CB1}\\u{11CB4}\\u{11D8A}-\\u{11D8E}\\u{11D93}-\\u{11D94}\\u{11D96}\\u{11EF5}-\\u{11EF6}\\u{16F51}-\\u{16F7E}\\u0F3E-\\u0F3F\\u1087-\\u108C\\u108F\\u109A-\\u109B\\u1B44\\u1BAA\\u1CE1\\u1CF7\\u302E-\\u302F\\uA953\\uA9C0\\uAA7B\\uAA7D\\uABEC\\u{111C0}\\u{11235}\\u{1134D}\\u{116B6}\\u{1D16D}-\\u{1D172}\\u09BE\\u09D7\\u0B3E\\u0B57\\u0BBE\\u0BD7\\u0CC2\\u0CD5-\\u0CD6\\u0D3E\\u0D57\\u0DCF\\u0DDF\\u302E-\\u302F\\u{1133E}\\u{11357}\\u{114B0}\\u{114BD}\\u{115AF}\\u{1D165}\\u{1D16E}-\\u{1D172}]","[\\u{1D7CE}-\\u{1D7FF}\\uFF10-\\uFF19]","\\u2040","[\\u00B7\\u0387\\u1369-\\u1371\\u19DA]");return!1===RegExp().unicode?new RegExp("^"+e+"+"+t+"*$","u"):(e=i("[A-Z]","[a-z]","_"),t=i(e,"[0-9]"),new RegExp("^"+e+"+"+t+"*$"))}();!function(e){i.apply(null,arguments)}("\\\\\\r?\\n[ \\f\\t]*"),s("#[^\\r\\n]*"),e=i("[0-9](?:_?[0-9])*\\.(?:[0-9](?:_?[0-9])*)?","\\.[0-9](?:_?[0-9])*")+s("[eE][-+]?[0-9](?:_?[0-9])*");var g,p,m,b=i(e,"[0-9](?:_?[0-9])*[eE][-+]?[0-9](?:_?[0-9])*"),_=i("[0-9](?:_?[0-9])*[jJ]",b+"[jJ]");e=i.apply(null,o()),t=i(e+"'''",e+'"""'),i(e+"'[^\\n'\\\\]*(?:\\\\.[^\\n'\\\\]*)*'",e+'"[^\\n"\\\\]*(?:\\\\.[^\\n"\\\\]*)*"'),a(!0),Sk.token.setupTokens=a;var v=i(e+"'[^\\n'\\\\]*(?:\\\\.[^\\n'\\\\]*)*"+i("'","\\\\\\r?\\n"),e+'"[^\\n"\\\\]*(?:\\\\.[^\\n"\\\\]*)*'+i('"',"\\\\\\r?\\n")),y=i("\\\\\\r?\\n|$","#[^\\r\\n]*",t),S={};e=o();for(let C of e)S[C+"'"]="^[^'\\\\]*(?:\\\\.[^'\\\\]*)*'",S[C+'"']='^[^"\\\\]*(?:\\\\.[^"\\\\]*)*"',S[C+"'''"]="^[^'\\\\]*(?:(?:\\\\.|'(?!''))[^'\\\\]*)*'''",S[C+'"""']='^[^"\\\\]*(?:(?:\\\\.|"(?!""))[^"\\\\]*)*"""';let w=[],k=[];for(let C of e)w.push(C+'"'),w.push(C+"'"),k.push(C+'"""'),k.push(C+"'''");Sk._tokenize=function(e,t,s,o){var a=Sk.__future__.python3?"":"(?:L?)";a=i("0[xX](?:_?[0-9a-fA-F])+"+a,"0[bB](?:_?[01])+"+a,Sk.__future__.silent_octal_literal?"0([oO]?)(?:_?[0-7])+"+a:"0([oO])(?:_?[0-7])+"+a,"(?:0(?:_?0)*|[1-9](?:_?[0-9])*)"+a),a=i(_,b,a),a="[ \\f\\t]*"+i(y,a,m,v,"\\w+"),a=new RegExp(a);var h,d,g,p=0,C=0,x=0,E="",L=0,D=null,A=[0],T=void 0,N=void 0;void 0!==s&&("utf-8-sig"==s&&(s="utf-8"),o(new n(l.T_ENCODING,s,[0,0],[0,0],"")));for(var I=s="";;){try{s=I,I=t()}catch(F){I=""}p+=1;var $=0,M=I.length;if(E){if(!I)throw new c("EOF in multi-line string",e,N[0],N[1]);T.lastIndex=0;var R=T.exec(I);if(!R){L&&"\\\n"!==I.substring(I.length-2)&&"\\\r\n"!==I.substring(I.length-3)?(o(new n(l.T_ERRORTOKEN,E+I,N,[p,I.length],D)),E="",D=null):(E+=I,D+=I);continue}$=d=R[0].length,o(new n(l.T_STRING,E+I.substring(0,d),N,[p,d],D+I)),E="",L=0,D=null}else if(0!=C||x){if(!I)throw new c("EOF in multi-line statement",e,p,0);x=0}else{if(!I)break;for(h=0;$<M;){if(" "==I[$])h+=1;else if("\t"==I[$])h=8*Math.floor(h/8+1);else{if("\f"!=I[$])break;h=0}$+=1}if($==M)break;if(r("#\r\n",I[$])){if("#"==I[$]){for(M=(h=I.substring($)).length;0<M&&-1!=="\r\n".indexOf(h.charAt(M-1));--M);M=h.substring(0,M),o(new n(l.T_COMMENT,M,[p,$],[p,$+M.length],I)),$+=M.length}o(new n(l.T_NL,I.substring($),[p,$],[p,I.length],I));continue}for(h>A[A.length-1]&&(A.push(h),o(new n(l.T_INDENT,I.substring($),[p,0],[p,$],I)));h<A[A.length-1];){if(!r(A,h))throw new u("unindent does not match any outer indentation level",e,p,$);A=A.slice(0,-1),o(new n(l.T_DEDENT,"",[p,$],[p,$],I))}}for(;$<M;){for(h=I.charAt($);" "===h||"\f"===h||"\t"===h;)$+=1,h=I.charAt($);if(g=a.exec(I.substring($))){if(d=(h=$)+g[1].length,g=[p,h],R=[p,d],$=d,h!=d){d=I.substring(h,d);var O=I[h];if(r("0123456789",O)||"."==O&&"."!=d&&"..."!=d)o(new n(l.T_NUMBER,d,g,R,I));else if(r("\r\n",O))o(new n(0<C?l.T_NL:l.T_NEWLINE,d,g,R,I));else if("#"==O)o(new n(l.T_COMMENT,d,g,R,I));else if(r(k,d)){if(!(R=(T=RegExp(S[d])).exec(I.substring($)))){N=[p,h],E=I.substring(h),D=I;break}$=R[0].length+$,d=I.substring(h,$),o(new n(l.T_STRING,d,g,[p,$],I))}else if(r(w,O)||r(w,d.substring(0,2))||r(w,d.substring(0,3))){if("\n"==d[d.length-1]){N=[p,h],T=RegExp(S[O]||S[d[1]]||S[d[2]]),E=I.substring(h),L=1,D=I;break}o(new n(l.T_STRING,d,g,R,I))}else h=O.normalize("NFKC"),f.test(h)?o(new n(l.T_NAME,d,g,R,I)):"\\"==O?x=1:(r("([{",O)?C+=1:r(")]}",O)&&--C,o(new n(l.T_OP,d,g,R,I)))}}else o(new n(l.T_ERRORTOKEN,I[$],[p,$],[p,$+1],I)),$+=1}}for(var P in s&&!r("\r\n",s[s.length-1])&&o(new n(l.T_NEWLINE,"",[p-1,s.length],[p-1,s.length+1],"")),A.slice(1))o(new n(l.T_DEDENT,"",[p,0],[p,0],""));o(new n(l.T_ENDMARKER,"",[p,0],[p,0],""))},Sk.exportSymbol("Sk._tokenize",Sk._tokenize)},function(e,t){Sk.OpMap={"(":Sk.token.tokens.T_LPAR,")":Sk.token.tokens.T_RPAR,"[":Sk.token.tokens.T_LSQB,"]":Sk.token.tokens.T_RSQB,":":Sk.token.tokens.T_COLON,",":Sk.token.tokens.T_COMMA,";":Sk.token.tokens.T_SEMI,"+":Sk.token.tokens.T_PLUS,"-":Sk.token.tokens.T_MINUS,"*":Sk.token.tokens.T_STAR,"/":Sk.token.tokens.T_SLASH,"|":Sk.token.tokens.T_VBAR,"&":Sk.token.tokens.T_AMPER,"<":Sk.token.tokens.T_LESS,">":Sk.token.tokens.T_GREATER,"=":Sk.token.tokens.T_EQUAL,".":Sk.token.tokens.T_DOT,"%":Sk.token.tokens.T_PERCENT,"`":Sk.token.tokens.T_BACKQUOTE,"{":Sk.token.tokens.T_LBRACE,"}":Sk.token.tokens.T_RBRACE,"@":Sk.token.tokens.T_AT,"@=":Sk.token.tokens.T_ATEQUAL,"==":Sk.token.tokens.T_EQEQUAL,"!=":Sk.token.tokens.T_NOTEQUAL,"<>":Sk.token.tokens.T_NOTEQUAL,"<=":Sk.token.tokens.T_LESSEQUAL,">=":Sk.token.tokens.T_GREATEREQUAL,"~":Sk.token.tokens.T_TILDE,"^":Sk.token.tokens.T_CIRCUMFLEX,"<<":Sk.token.tokens.T_LEFTSHIFT,">>":Sk.token.tokens.T_RIGHTSHIFT,"**":Sk.token.tokens.T_DOUBLESTAR,"+=":Sk.token.tokens.T_PLUSEQUAL,"-=":Sk.token.tokens.T_MINEQUAL,"*=":Sk.token.tokens.T_STAREQUAL,"/=":Sk.token.tokens.T_SLASHEQUAL,"%=":Sk.token.tokens.T_PERCENTEQUAL,"&=":Sk.token.tokens.T_AMPEREQUAL,"|=":Sk.token.tokens.T_VBAREQUAL,"^=":Sk.token.tokens.T_CIRCUMFLEXEQUAL,"<<=":Sk.token.tokens.T_LEFTSHIFTEQUAL,">>=":Sk.token.tokens.T_RIGHTSHIFTEQUAL,"**=":Sk.token.tokens.T_DOUBLESTAREQUAL,"//":Sk.token.tokens.T_DOUBLESLASH,"//=":Sk.token.tokens.T_DOUBLESLASHEQUAL,"->":Sk.token.tokens.T_RARROW,"...":Sk.token.tokens.T_ELLIPSIS},Sk.ParseTables={sym:{and_expr:257,and_test:258,annassign:259,arglist:260,argument:261,arith_expr:262,assert_stmt:263,async_funcdef:264,async_stmt:265,atom:266,atom_expr:267,augassign:268,break_stmt:269,classdef:270,comp_for:271,comp_if:272,comp_iter:273,comp_op:274,comparison:275,compound_stmt:276,continue_stmt:277,debugger_stmt:278,decorated:279,decorator:280,decorators:281,del_stmt:282,dictorsetmaker:283,dotted_as_name:284,dotted_as_names:285,dotted_name:286,encoding_decl:287,eval_input:288,except_clause:289,expr:290,expr_stmt:291,exprlist:292,factor:293,file_input:294,flow_stmt:295,for_stmt:296,funcdef:297,global_stmt:298,if_stmt:299,import_as_name:300,import_as_names:301,import_from:302,import_name:303,import_stmt:304,lambdef:305,lambdef_nocond:306,nonlocal_stmt:307,not_test:308,or_test:309,parameters:310,pass_stmt:311,power:312,print_stmt:313,raise_stmt:314,return_stmt:315,shift_expr:316,simple_stmt:317,single_input:256,sliceop:318,small_stmt:319,star_expr:320,stmt:321,subscript:322,subscriptlist:323,suite:324,term:325,test:326,test_nocond:327,testlist:328,testlist_comp:329,testlist_star_expr:330,tfpdef:331,trailer:332,try_stmt:333,typedargslist:334,varargslist:335,vfpdef:336,while_stmt:337,with_item:338,with_stmt:339,xor_expr:340,yield_arg:341,yield_expr:342,yield_stmt:343},number2symbol:{256:"single_input",257:"and_expr",258:"and_test",259:"annassign",260:"arglist",261:"argument",262:"arith_expr",263:"assert_stmt",264:"async_funcdef",265:"async_stmt",266:"atom",267:"atom_expr",268:"augassign",269:"break_stmt",270:"classdef",271:"comp_for",272:"comp_if",273:"comp_iter",274:"comp_op",275:"comparison",276:"compound_stmt",277:"continue_stmt",278:"debugger_stmt",279:"decorated",280:"decorator",281:"decorators",282:"del_stmt",283:"dictorsetmaker",284:"dotted_as_name",285:"dotted_as_names",286:"dotted_name",287:"encoding_decl",288:"eval_input",289:"except_clause",290:"expr",291:"expr_stmt",292:"exprlist",293:"factor",294:"file_input",295:"flow_stmt",296:"for_stmt",297:"funcdef",298:"global_stmt",299:"if_stmt",300:"import_as_name",301:"import_as_names",302:"import_from",303:"import_name",304:"import_stmt",305:"lambdef",306:"lambdef_nocond",307:"nonlocal_stmt",308:"not_test",309:"or_test",310:"parameters",311:"pass_stmt",312:"power",313:"print_stmt",314:"raise_stmt",315:"return_stmt",316:"shift_expr",317:"simple_stmt",318:"sliceop",319:"small_stmt",320:"star_expr",321:"stmt",322:"subscript",323:"subscriptlist",324:"suite",325:"term",326:"test",327:"test_nocond",328:"testlist",329:"testlist_comp",330:"testlist_star_expr",331:"tfpdef",332:"trailer",333:"try_stmt",334:"typedargslist",335:"varargslist",336:"vfpdef",337:"while_stmt",338:"with_item",339:"with_stmt",340:"xor_expr",341:"yield_arg",342:"yield_expr",343:"yield_stmt"},dfas:{256:[[[[1,1],[2,1],[3,2]],[[0,1]],[[2,1]]],{2:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,34:1,35:1,36:1,37:1,38:1,39:1,40:1,41:1,42:1,43:1}],257:[[[[44,1]],[[45,0],[0,1]]],{6:1,7:1,9:1,11:1,12:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],258:[[[[46,1]],[[47,0],[0,1]]],{6:1,7:1,8:1,9:1,11:1,12:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],259:[[[[48,1]],[[49,2]],[[50,3],[0,2]],[[49,4]],[[0,4]]],{48:1}],260:[[[[51,1]],[[52,2],[0,1]],[[51,1],[0,2]]],{6:1,7:1,8:1,9:1,11:1,12:1,14:1,15:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1,53:1}],261:[[[[49,1],[15,2],[53,2]],[[50,2],[54,3],[0,1]],[[49,3]],[[0,3]]],{6:1,7:1,8:1,9:1,11:1,12:1,14:1,15:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1,53:1}],262:[[[[55,1]],[[30,0],[43,0],[0,1]]],{6:1,7:1,9:1,11:1,12:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],263:[[[[24,1]],[[49,2]],[[52,3],[0,2]],[[49,4]],[[0,4]]],{24:1}],264:[[[[10,1]],[[56,2]],[[0,2]]],{10:1}],265:[[[[10,1]],[[57,2],[56,2],[58,2]],[[0,2]]],{10:1}],266:[[[[6,1],[25,1],[33,1],[9,1],[11,1],[12,2],[35,3],[38,4],[19,1],[7,5]],[[0,1]],[[59,1],[60,6]],[[61,1],[62,7],[63,7]],[[64,1],[63,8]],[[7,5],[0,5]],[[59,1]],[[61,1]],[[64,1]]],{6:1,7:1,9:1,11:1,12:1,19:1,25:1,33:1,35:1,38:1}],267:[[[[29,1],[65,2]],[[65,2]],[[66,2],[0,2]]],{6:1,7:1,9:1,11:1,12:1,19:1,25:1,29:1,33:1,35:1,38:1}],268:[[[[67,1],[68,1],[69,1],[70,1],[71,1],[72,1],[73,1],[74,1],[75,1],[76,1],[77,1],[78,1],[79,1]],[[0,1]]],{67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:1,75:1,76:1,77:1,78:1,79:1}],269:[[[[39,1]],[[0,1]]],{39:1}],270:[[[[13,1]],[[25,2]],[[48,3],[35,4]],[[80,5]],[[61,6],[81,7]],[[0,5]],[[48,3]],[[61,6]]],{13:1}],271:[[[[10,1],[34,2]],[[34,2]],[[82,3]],[[83,4]],[[84,5]],[[85,6],[0,5]],[[0,6]]],{10:1,34:1}],272:[[[[37,1]],[[86,2]],[[85,3],[0,2]],[[0,3]]],{37:1}],273:[[[[87,1],[54,1]],[[0,1]]],{10:1,34:1,37:1}],274:[[[[88,1],[89,1],[8,2],[90,1],[88,1],[83,1],[91,1],[92,3],[93,1],[94,1]],[[0,1]],[[83,1]],[[8,1],[0,3]]],{8:1,83:1,88:1,89:1,90:1,91:1,92:1,93:1,94:1}],275:[[[[95,1]],[[96,0],[0,1]]],{6:1,7:1,9:1,11:1,12:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],276:[[[[97,1],[98,1],[58,1],[99,1],[57,1],[100,1],[56,1],[101,1],[102,1]],[[0,1]]],{4:1,10:1,13:1,20:1,21:1,34:1,37:1,41:1,42:1}],277:[[[[40,1]],[[0,1]]],{40:1}],278:[[[[17,1]],[[0,1]]],{17:1}],279:[[[[103,1]],[[56,2],[104,2],[99,2]],[[0,2]]],{41:1}],280:[[[[41,1]],[[105,2]],[[2,4],[35,3]],[[61,5],[81,6]],[[0,4]],[[2,4]],[[61,5]]],{41:1}],281:[[[[106,1]],[[106,1],[0,1]]],{41:1}],282:[[[[27,1]],[[82,2]],[[0,2]]],{27:1}],283:[[[[49,1],[107,2],[53,3]],[[48,4],[54,5],[52,6],[0,1]],[[54,5],[52,6],[0,2]],[[95,7]],[[49,7]],[[0,5]],[[49,8],[107,8],[0,6]],[[54,5],[52,9],[0,7]],[[52,6],[0,8]],[[49,10],[53,11],[0,9]],[[48,12]],[[95,13]],[[49,13]],[[52,9],[0,13]]],{6:1,7:1,8:1,9:1,11:1,12:1,14:1,15:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1,53:1}],284:[[[[105,1]],[[108,2],[0,1]],[[25,3]],[[0,3]]],{25:1}],285:[[[[109,1]],[[52,0],[0,1]]],{25:1}],286:[[[[25,1]],[[110,0],[0,1]]],{25:1}],287:[[[[25,1]],[[0,1]]],{25:1}],288:[[[[111,1]],[[2,1],[112,2]],[[0,2]]],{6:1,7:1,8:1,9:1,11:1,12:1,14:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],289:[[[[113,1]],[[49,2],[0,1]],[[108,3],[52,3],[0,2]],[[49,4]],[[0,4]]],{113:1}],290:[[[[114,1]],[[115,0],[0,1]]],{6:1,7:1,9:1,11:1,12:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],291:[[[[116,1]],[[117,2],[50,3],[118,4],[0,1]],[[111,4],[62,4]],[[116,5],[62,5]],[[0,4]],[[50,3],[0,5]]],{6:1,7:1,8:1,9:1,11:1,12:1,14:1,15:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],292:[[[[95,1],[107,1]],[[52,2],[0,1]],[[95,1],[107,1],[0,2]]],{6:1,7:1,9:1,11:1,12:1,15:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],293:[[[[119,2],[30,1],[22,1],[43,1]],[[120,2]],[[0,2]]],{6:1,7:1,9:1,11:1,12:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],294:[[[[2,0],[112,1],[121,0]],[[0,1]]],{2:1,4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,34:1,35:1,36:1,37:1,38:1,39:1,40:1,41:1,42:1,43:1,112:1}],295:[[[[122,1],[123,1],[124,1],[125,1],[126,1]],[[0,1]]],{5:1,23:1,31:1,39:1,40:1}],296:[[[[34,1]],[[82,2]],[[83,3]],[[111,4]],[[48,5]],[[80,6]],[[127,7],[0,6]],[[48,8]],[[80,9]],[[0,9]]],{34:1}],297:[[[[4,1]],[[25,2]],[[128,3]],[[48,4],[129,5]],[[80,6]],[[49,7]],[[0,6]],[[48,4]]],{4:1}],298:[[[[26,1]],[[25,2]],[[52,1],[0,2]]],{26:1}],299:[[[[37,1]],[[49,2]],[[48,3]],[[80,4]],[[127,5],[130,1],[0,4]],[[48,6]],[[80,7]],[[0,7]]],{37:1}],300:[[[[25,1]],[[108,2],[0,1]],[[25,3]],[[0,3]]],{25:1}],301:[[[[131,1]],[[52,2],[0,1]],[[131,1],[0,2]]],{25:1}],302:[[[[36,1]],[[105,2],[19,3],[110,3]],[[32,4]],[[105,2],[19,3],[32,4],[110,3]],[[132,5],[15,5],[35,6]],[[0,5]],[[132,7]],[[61,5]]],{36:1}],303:[[[[32,1]],[[133,2]],[[0,2]]],{32:1}],304:[[[[134,1],[135,1]],[[0,1]]],{32:1,36:1}],305:[[[[14,1]],[[48,2],[136,3]],[[49,4]],[[48,2]],[[0,4]]],{14:1}],306:[[[[14,1]],[[48,2],[136,3]],[[86,4]],[[48,2]],[[0,4]]],{14:1}],307:[[[[18,1]],[[25,2]],[[52,1],[0,2]]],{18:1}],308:[[[[8,1],[137,2]],[[46,2]],[[0,2]]],{6:1,7:1,8:1,9:1,11:1,12:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],309:[[[[138,1]],[[139,0],[0,1]]],{6:1,7:1,8:1,9:1,11:1,12:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],310:[[[[35,1]],[[61,2],[140,3]],[[0,2]],[[61,2]]],{35:1}],311:[[[[28,1]],[[0,1]]],{28:1}],312:[[[[141,1]],[[53,2],[0,1]],[[120,3]],[[0,3]]],{6:1,7:1,9:1,11:1,12:1,19:1,25:1,29:1,33:1,35:1,38:1}],313:[[[[16,1]],[[49,2],[142,3],[0,1]],[[52,4],[0,2]],[[49,5]],[[49,2],[0,4]],[[52,6],[0,5]],[[49,7]],[[52,8],[0,7]],[[49,7],[0,8]]],{16:1}],314:[[[[5,1]],[[49,2],[0,1]],[[36,3],[52,3],[0,2]],[[49,4]],[[52,5],[0,4]],[[49,6]],[[0,6]]],{5:1}],315:[[[[23,1]],[[111,2],[0,1]],[[0,2]]],{23:1}],316:[[[[143,1]],[[144,0],[142,0],[0,1]]],{6:1,7:1,9:1,11:1,12:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],317:[[[[145,1]],[[2,2],[146,3]],[[0,2]],[[145,1],[2,2]]],{5:1,6:1,7:1,8:1,9:1,11:1,12:1,14:1,15:1,16:1,17:1,18:1,19:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,35:1,36:1,38:1,39:1,40:1,43:1}],318:[[[[48,1]],[[49,2],[0,1]],[[0,2]]],{48:1}],319:[[[[147,1],[148,1],[149,1],[150,1],[151,1],[152,1],[153,1],[154,1],[155,1],[156,1]],[[0,1]]],{5:1,6:1,7:1,8:1,9:1,11:1,12:1,14:1,15:1,16:1,17:1,18:1,19:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,35:1,36:1,38:1,39:1,40:1,43:1}],320:[[[[15,1]],[[95,2]],[[0,2]]],{15:1}],321:[[[[1,1],[3,1]],[[0,1]]],{4:1,5:1,6:1,7:1,8:1,9:1,10:1,11:1,12:1,13:1,14:1,15:1,16:1,17:1,18:1,19:1,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,34:1,35:1,36:1,37:1,38:1,39:1,40:1,41:1,42:1,43:1}],322:[[[[49,1],[48,2]],[[48,2],[0,1]],[[49,3],[157,4],[0,2]],[[157,4],[0,3]],[[0,4]]],{6:1,7:1,8:1,9:1,11:1,12:1,14:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1,48:1}],323:[[[[158,1]],[[52,2],[0,1]],[[158,1],[0,2]]],{6:1,7:1,8:1,9:1,11:1,12:1,14:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1,48:1}],324:[[[[1,1],[2,2]],[[0,1]],[[159,3]],[[121,4]],[[160,1],[121,4]]],{2:1,5:1,6:1,7:1,8:1,9:1,11:1,12:1,14:1,15:1,16:1,17:1,18:1,19:1,22:1,23:1,24:1,25:1,26:1,27:1,28:1,29:1,30:1,31:1,32:1,33:1,35:1,36:1,38:1,39:1,40:1,43:1}],325:[[[[120,1]],[[161,0],[15,0],[162,0],[41,0],[163,0],[0,1]]],{6:1,7:1,9:1,11:1,12:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],326:[[[[84,1],[164,2]],[[37,3],[0,1]],[[0,2]],[[84,4]],[[127,5]],[[49,2]]],{6:1,7:1,8:1,9:1,11:1,12:1,14:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],327:[[[[165,1],[84,1]],[[0,1]]],{6:1,7:1,8:1,9:1,11:1,12:1,14:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],328:[[[[49,1]],[[52,2],[0,1]],[[49,1],[0,2]]],{6:1,7:1,8:1,9:1,11:1,12:1,14:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],329:[[[[49,1],[107,1]],[[54,2],[52,3],[0,1]],[[0,2]],[[49,4],[107,4],[0,3]],[[52,3],[0,4]]],{6:1,7:1,8:1,9:1,11:1,12:1,14:1,15:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],330:[[[[49,1],[107,1]],[[52,2],[0,1]],[[49,1],[107,1],[0,2]]],{6:1,7:1,8:1,9:1,11:1,12:1,14:1,15:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],331:[[[[25,1]],[[48,2],[0,1]],[[49,3]],[[0,3]]],{25:1}],332:[[[[35,1],[110,2],[38,3]],[[61,4],[81,5]],[[25,4]],[[166,6]],[[0,4]],[[61,4]],[[64,4]]],{35:1,38:1,110:1}],333:[[[[20,1]],[[48,2]],[[80,3]],[[167,4],[168,5]],[[48,6]],[[48,7]],[[80,8]],[[80,9]],[[167,4],[127,10],[168,5],[0,8]],[[0,9]],[[48,11]],[[80,12]],[[168,5],[0,12]]],{20:1}],334:[[[[15,1],[169,2],[53,3]],[[169,4],[52,5],[0,1]],[[50,6],[52,7],[0,2]],[[169,8]],[[52,5],[0,4]],[[169,9],[53,3],[0,5]],[[49,10]],[[15,11],[169,2],[53,3],[0,7]],[[52,12],[0,8]],[[50,13],[52,5],[0,9]],[[52,7],[0,10]],[[169,14],[52,15],[0,11]],[[0,12]],[[49,4]],[[52,15],[0,14]],[[169,16],[53,3],[0,15]],[[50,17],[52,15],[0,16]],[[49,14]]],{15:1,25:1,53:1}],335:[[[[15,1],[53,2],[170,3]],[[170,5],[52,4],[0,1]],[[170,6]],[[50,7],[52,8],[0,3]],[[53,2],[170,9],[0,4]],[[52,4],[0,5]],[[52,10],[0,6]],[[49,11]],[[15,12],[53,2],[170,3],[0,8]],[[50,13],[52,4],[0,9]],[[0,10]],[[52,8],[0,11]],[[52,15],[170,14],[0,12]],[[49,5]],[[52,15],[0,14]],[[53,2],[170,16],[0,15]],[[50,17],[52,15],[0,16]],[[49,14]]],{15:1,25:1,53:1}],336:[[[[25,1]],[[0,1]]],{25:1}],337:[[[[21,1]],[[49,2]],[[48,3]],[[80,4]],[[127,5],[0,4]],[[48,6]],[[80,7]],[[0,7]]],{21:1}],338:[[[[49,1]],[[108,2],[0,1]],[[95,3]],[[0,3]]],{6:1,7:1,8:1,9:1,11:1,12:1,14:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],339:[[[[42,1]],[[171,2]],[[48,3],[52,1]],[[80,4]],[[0,4]]],{42:1}],340:[[[[172,1]],[[173,0],[0,1]]],{6:1,7:1,9:1,11:1,12:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,38:1,43:1}],341:[[[[111,2],[36,1]],[[49,2]],[[0,2]]],{6:1,7:1,8:1,9:1,11:1,12:1,14:1,19:1,22:1,25:1,29:1,30:1,33:1,35:1,36:1,38:1,43:1}],342:[[[[31,1]],[[174,2],[0,1]],[[0,2]]],{31:1}],343:[[[[62,1]],[[0,1]]],{31:1}]},states:[[[[1,1],[2,1],[3,2]],[[0,1]],[[2,1]]],[[[44,1]],[[45,0],[0,1]]],[[[46,1]],[[47,0],[0,1]]],[[[48,1]],[[49,2]],[[50,3],[0,2]],[[49,4]],[[0,4]]],[[[51,1]],[[52,2],[0,1]],[[51,1],[0,2]]],[[[49,1],[15,2],[53,2]],[[50,2],[54,3],[0,1]],[[49,3]],[[0,3]]],[[[55,1]],[[30,0],[43,0],[0,1]]],[[[24,1]],[[49,2]],[[52,3],[0,2]],[[49,4]],[[0,4]]],[[[10,1]],[[56,2]],[[0,2]]],[[[10,1]],[[57,2],[56,2],[58,2]],[[0,2]]],[[[6,1],[25,1],[33,1],[9,1],[11,1],[12,2],[35,3],[38,4],[19,1],[7,5]],[[0,1]],[[59,1],[60,6]],[[61,1],[62,7],[63,7]],[[64,1],[63,8]],[[7,5],[0,5]],[[59,1]],[[61,1]],[[64,1]]],[[[29,1],[65,2]],[[65,2]],[[66,2],[0,2]]],[[[67,1],[68,1],[69,1],[70,1],[71,1],[72,1],[73,1],[74,1],[75,1],[76,1],[77,1],[78,1],[79,1]],[[0,1]]],[[[39,1]],[[0,1]]],[[[13,1]],[[25,2]],[[48,3],[35,4]],[[80,5]],[[61,6],[81,7]],[[0,5]],[[48,3]],[[61,6]]],[[[10,1],[34,2]],[[34,2]],[[82,3]],[[83,4]],[[84,5]],[[85,6],[0,5]],[[0,6]]],[[[37,1]],[[86,2]],[[85,3],[0,2]],[[0,3]]],[[[87,1],[54,1]],[[0,1]]],[[[88,1],[89,1],[8,2],[90,1],[88,1],[83,1],[91,1],[92,3],[93,1],[94,1]],[[0,1]],[[83,1]],[[8,1],[0,3]]],[[[95,1]],[[96,0],[0,1]]],[[[97,1],[98,1],[58,1],[99,1],[57,1],[100,1],[56,1],[101,1],[102,1]],[[0,1]]],[[[40,1]],[[0,1]]],[[[17,1]],[[0,1]]],[[[103,1]],[[56,2],[104,2],[99,2]],[[0,2]]],[[[41,1]],[[105,2]],[[2,4],[35,3]],[[61,5],[81,6]],[[0,4]],[[2,4]],[[61,5]]],[[[106,1]],[[106,1],[0,1]]],[[[27,1]],[[82,2]],[[0,2]]],[[[49,1],[107,2],[53,3]],[[48,4],[54,5],[52,6],[0,1]],[[54,5],[52,6],[0,2]],[[95,7]],[[49,7]],[[0,5]],[[49,8],[107,8],[0,6]],[[54,5],[52,9],[0,7]],[[52,6],[0,8]],[[49,10],[53,11],[0,9]],[[48,12]],[[95,13]],[[49,13]],[[52,9],[0,13]]],[[[105,1]],[[108,2],[0,1]],[[25,3]],[[0,3]]],[[[109,1]],[[52,0],[0,1]]],[[[25,1]],[[110,0],[0,1]]],[[[25,1]],[[0,1]]],[[[111,1]],[[2,1],[112,2]],[[0,2]]],[[[113,1]],[[49,2],[0,1]],[[108,3],[52,3],[0,2]],[[49,4]],[[0,4]]],[[[114,1]],[[115,0],[0,1]]],[[[116,1]],[[117,2],[50,3],[118,4],[0,1]],[[111,4],[62,4]],[[116,5],[62,5]],[[0,4]],[[50,3],[0,5]]],[[[95,1],[107,1]],[[52,2],[0,1]],[[95,1],[107,1],[0,2]]],[[[119,2],[30,1],[22,1],[43,1]],[[120,2]],[[0,2]]],[[[2,0],[112,1],[121,0]],[[0,1]]],[[[122,1],[123,1],[124,1],[125,1],[126,1]],[[0,1]]],[[[34,1]],[[82,2]],[[83,3]],[[111,4]],[[48,5]],[[80,6]],[[127,7],[0,6]],[[48,8]],[[80,9]],[[0,9]]],[[[4,1]],[[25,2]],[[128,3]],[[48,4],[129,5]],[[80,6]],[[49,7]],[[0,6]],[[48,4]]],[[[26,1]],[[25,2]],[[52,1],[0,2]]],[[[37,1]],[[49,2]],[[48,3]],[[80,4]],[[127,5],[130,1],[0,4]],[[48,6]],[[80,7]],[[0,7]]],[[[25,1]],[[108,2],[0,1]],[[25,3]],[[0,3]]],[[[131,1]],[[52,2],[0,1]],[[131,1],[0,2]]],[[[36,1]],[[105,2],[19,3],[110,3]],[[32,4]],[[105,2],[19,3],[32,4],[110,3]],[[132,5],[15,5],[35,6]],[[0,5]],[[132,7]],[[61,5]]],[[[32,1]],[[133,2]],[[0,2]]],[[[134,1],[135,1]],[[0,1]]],[[[14,1]],[[48,2],[136,3]],[[49,4]],[[48,2]],[[0,4]]],[[[14,1]],[[48,2],[136,3]],[[86,4]],[[48,2]],[[0,4]]],[[[18,1]],[[25,2]],[[52,1],[0,2]]],[[[8,1],[137,2]],[[46,2]],[[0,2]]],[[[138,1]],[[139,0],[0,1]]],[[[35,1]],[[61,2],[140,3]],[[0,2]],[[61,2]]],[[[28,1]],[[0,1]]],[[[141,1]],[[53,2],[0,1]],[[120,3]],[[0,3]]],[[[16,1]],[[49,2],[142,3],[0,1]],[[52,4],[0,2]],[[49,5]],[[49,2],[0,4]],[[52,6],[0,5]],[[49,7]],[[52,8],[0,7]],[[49,7],[0,8]]],[[[5,1]],[[49,2],[0,1]],[[36,3],[52,3],[0,2]],[[49,4]],[[52,5],[0,4]],[[49,6]],[[0,6]]],[[[23,1]],[[111,2],[0,1]],[[0,2]]],[[[143,1]],[[144,0],[142,0],[0,1]]],[[[145,1]],[[2,2],[146,3]],[[0,2]],[[145,1],[2,2]]],[[[48,1]],[[49,2],[0,1]],[[0,2]]],[[[147,1],[148,1],[149,1],[150,1],[151,1],[152,1],[153,1],[154,1],[155,1],[156,1]],[[0,1]]],[[[15,1]],[[95,2]],[[0,2]]],[[[1,1],[3,1]],[[0,1]]],[[[49,1],[48,2]],[[48,2],[0,1]],[[49,3],[157,4],[0,2]],[[157,4],[0,3]],[[0,4]]],[[[158,1]],[[52,2],[0,1]],[[158,1],[0,2]]],[[[1,1],[2,2]],[[0,1]],[[159,3]],[[121,4]],[[160,1],[121,4]]],[[[120,1]],[[161,0],[15,0],[162,0],[41,0],[163,0],[0,1]]],[[[84,1],[164,2]],[[37,3],[0,1]],[[0,2]],[[84,4]],[[127,5]],[[49,2]]],[[[165,1],[84,1]],[[0,1]]],[[[49,1]],[[52,2],[0,1]],[[49,1],[0,2]]],[[[49,1],[107,1]],[[54,2],[52,3],[0,1]],[[0,2]],[[49,4],[107,4],[0,3]],[[52,3],[0,4]]],[[[49,1],[107,1]],[[52,2],[0,1]],[[49,1],[107,1],[0,2]]],[[[25,1]],[[48,2],[0,1]],[[49,3]],[[0,3]]],[[[35,1],[110,2],[38,3]],[[61,4],[81,5]],[[25,4]],[[166,6]],[[0,4]],[[61,4]],[[64,4]]],[[[20,1]],[[48,2]],[[80,3]],[[167,4],[168,5]],[[48,6]],[[48,7]],[[80,8]],[[80,9]],[[167,4],[127,10],[168,5],[0,8]],[[0,9]],[[48,11]],[[80,12]],[[168,5],[0,12]]],[[[15,1],[169,2],[53,3]],[[169,4],[52,5],[0,1]],[[50,6],[52,7],[0,2]],[[169,8]],[[52,5],[0,4]],[[169,9],[53,3],[0,5]],[[49,10]],[[15,11],[169,2],[53,3],[0,7]],[[52,12],[0,8]],[[50,13],[52,5],[0,9]],[[52,7],[0,10]],[[169,14],[52,15],[0,11]],[[0,12]],[[49,4]],[[52,15],[0,14]],[[169,16],[53,3],[0,15]],[[50,17],[52,15],[0,16]],[[49,14]]],[[[15,1],[53,2],[170,3]],[[170,5],[52,4],[0,1]],[[170,6]],[[50,7],[52,8],[0,3]],[[53,2],[170,9],[0,4]],[[52,4],[0,5]],[[52,10],[0,6]],[[49,11]],[[15,12],[53,2],[170,3],[0,8]],[[50,13],[52,4],[0,9]],[[0,10]],[[52,8],[0,11]],[[52,15],[170,14],[0,12]],[[49,5]],[[52,15],[0,14]],[[53,2],[170,16],[0,15]],[[50,17],[52,15],[0,16]],[[49,14]]],[[[25,1]],[[0,1]]],[[[21,1]],[[49,2]],[[48,3]],[[80,4]],[[127,5],[0,4]],[[48,6]],[[80,7]],[[0,7]]],[[[49,1]],[[108,2],[0,1]],[[95,3]],[[0,3]]],[[[42,1]],[[171,2]],[[48,3],[52,1]],[[80,4]],[[0,4]]],[[[172,1]],[[173,0],[0,1]]],[[[111,2],[36,1]],[[49,2]],[[0,2]]],[[[31,1]],[[174,2],[0,1]],[[0,2]]],[[[62,1]],[[0,1]]]],labels:[[0,"EMPTY"],[317,null],[4,null],[276,null],[1,"def"],[1,"raise"],[1,"True"],[3,null],[1,"not"],[1,"null"],[55,null],[2,null],[25,null],[1,"class"],[1,"lambda"],[16,null],[1,"print"],[1,"debugger"],[1,"nonlocal"],[52,null],[1,"try"],[1,"while"],[31,null],[1,"return"],[1,"assert"],[1,null],[1,"global"],[1,"del"],[1,"pass"],[54,null],[15,null],[1,"yield"],[1,"import"],[1,"False"],[1,"for"],[7,null],[1,"from"],[1,"if"],[9,null],[1,"break"],[1,"continue"],[49,null],[1,"with"],[14,null],[316,null],[19,null],[308,null],[1,"and"],[11,null],[326,null],[22,null],[261,null],[12,null],[35,null],[271,null],[325,null],[297,null],[339,null],[296,null],[26,null],[283,null],[8,null],[342,null],[329,null],[10,null],[266,null],[332,null],[45,null],[38,null],[40,null],[50,null],[46,null],[41,null],[42,null],[36,null],[43,null],[48,null],[44,null],[37,null],[39,null],[324,null],[260,null],[292,null],[1,"in"],[309,null],[273,null],[327,null],[272,null],[28,null],[21,null],[27,null],[29,null],[1,"is"],[30,null],[20,null],[290,null],[274,null],[333,null],[299,null],[270,null],[337,null],[279,null],[265,null],[281,null],[264,null],[286,null],[280,null],[320,null],[1,"as"],[284,null],[23,null],[328,null],[0,null],[1,"except"],[340,null],[18,null],[330,null],[268,null],[259,null],[312,null],[293,null],[321,null],[269,null],[277,null],[314,null],[315,null],[343,null],[1,"else"],[310,null],[51,null],[1,"elif"],[300,null],[301,null],[285,null],[303,null],[302,null],[335,null],[275,null],[258,null],[1,"or"],[334,null],[267,null],[34,null],[262,null],[33,null],[319,null],[13,null],[295,null],[263,null],[291,null],[311,null],[307,null],[313,null],[282,null],[298,null],[304,null],[278,null],[318,null],[322,null],[5,null],[6,null],[47,null],[17,null],[24,null],[305,null],[306,null],[323,null],[289,null],[1,"finally"],[331,null],[336,null],[338,null],[257,null],[32,null],[341,null]],keywords:{False:33,null:9,True:6,and:47,as:108,assert:24,break:39,class:13,continue:40,debugger:17,def:4,del:27,elif:130,else:127,except:113,finally:168,for:34,from:36,global:26,if:37,import:32,in:83,is:92,lambda:14,nonlocal:18,not:8,or:139,pass:28,print:16,raise:5,return:23,try:20,while:21,with:42,yield:31},tokens:{0:112,1:25,2:11,3:7,4:2,5:159,6:160,7:35,8:61,9:38,10:64,11:48,12:52,13:146,14:43,15:30,16:15,17:162,18:115,19:45,20:94,21:89,22:50,23:110,24:163,25:12,26:59,27:90,28:88,29:91,30:93,31:22,32:173,33:144,34:142,35:53,36:74,37:78,38:68,39:79,40:69,41:72,42:73,43:75,44:77,45:67,46:71,47:161,48:76,49:41,50:70,51:129,52:19,54:29,55:10},start:256}},function(e,t){function n(e,t){return this.filename=e,this.grammar=t,this.p_flags=0,this}function i(e,t){return void 0===t&&(t="file_input"),e=new n(e,Sk.ParseTables),"file_input"===t?e.setup(Sk.ParseTables.sym.file_input):Sk.asserts.fail("todo;"),e}n.FUTURE_PRINT_FUNCTION="print_function",n.FUTURE_UNICODE_LITERALS="unicode_literals",n.FUTURE_DIVISION="division",n.FUTURE_ABSOLUTE_IMPORT="absolute_import",n.FUTURE_WITH_STATEMENT="with_statement",n.FUTURE_NESTED_SCOPES="nested_scopes",n.FUTURE_GENERATORS="generators",n.CO_FUTURE_PRINT_FUNCTION=65536,n.CO_FUTURE_UNICODE_LITERALS=131072,n.CO_FUTURE_DIVISON=8192,n.CO_FUTURE_ABSOLUTE_IMPORT=16384,n.CO_FUTURE_WITH_STATEMENT=32768,n.prototype.setup=function(e){e=e||this.grammar.start,this.stack=[{dfa:this.grammar.dfas[e],state:0,node:{type:e,value:null,context:null,children:[]}}],this.used_names={}},n.prototype.addtoken=function(e,t,n){var i,s=this.classify(e,t,n);e:for(;;){var r=this.stack[this.stack.length-1],o=r.dfa[0],a=o[r.state];for(i=0;i<a.length;++i){var l=a[i][0],c=a[i][1],u=this.grammar.labels[l][0];if(s===l){for(Sk.asserts.assert(256>u),this.shift(e,t,c,n),n=c;1===o[n].length&&0===o[n][0][0]&&o[n][0][1]===n;){if(this.pop(),0===this.stack.length)return!0;n=(r=this.stack[this.stack.length-1]).state,o=r.dfa[0]}return!1}if(256<=u&&(l=(l=this.grammar.dfas[u])[1]).hasOwnProperty(s)){this.push(u,this.grammar.dfas[u],c,n);continue e}}t:{for(o=[0,r.state],r=a.length;r--;)if(a[r][0]===o[0]&&a[r][1]===o[1]){a=!0;break t}a=!1}if(!a)throw e=n[0][0],new Sk.builtin.SyntaxError("bad input",this.filename,e,n);if(this.pop(),0===this.stack.length)throw new Sk.builtin.SyntaxError("too much input",this.filename)}},n.prototype.classify=function(e,t,i){if(e===Sk.token.tokens.T_NAME){this.used_names[t]=!0;var s=this.grammar.keywords.hasOwnProperty(t)&&this.grammar.keywords[t];if("print"===t&&(this.p_flags&n.CO_FUTURE_PRINT_FUNCTION||!0===Sk.__future__.print_function)&&(s=!1),s)return s}if(!(s=this.grammar.tokens.hasOwnProperty(e)&&this.grammar.tokens[e])){t="#"+e;for(let n in Sk.token.tokens)if(Sk.token.tokens[n]==e){t=n;break}throw new Sk.builtin.SyntaxError("bad token "+t,this.filename,i[0][0],i)}return s},n.prototype.shift=function(e,t,n,i){var s=this.stack[this.stack.length-1].dfa,r=this.stack[this.stack.length-1].node;r.children.push({type:e,value:t,lineno:i[0][0],col_offset:i[0][1],children:null}),this.stack[this.stack.length-1]={dfa:s,state:n,node:r}},n.prototype.push=function(e,t,n,i){e={type:e,value:null,lineno:i[0][0],col_offset:i[0][1],children:[]},this.stack[this.stack.length-1]={dfa:this.stack[this.stack.length-1].dfa,state:n,node:this.stack[this.stack.length-1].node},this.stack.push({dfa:t,state:0,node:e})},n.prototype.pop=function(){var e=this.stack.pop().node;if(e)if(0!==this.stack.length){this.stack[this.stack.length-1].node.children.push(e)}else this.rootnode=e,this.rootnode.used_names=this.used_names},Sk.parse=function(e,t){var n=Sk.token.tokens.T_COMMENT,s=Sk.token.tokens.T_NL,r=Sk.token.tokens.T_OP,o=Sk.token.tokens.T_ENDMARKER,a=Sk.token.tokens.T_ENCODING,l=!1,c=i(e);if(Sk._tokenize(e,function(e){var t=e.split("\n").reverse().map((function(e){return e+"\n"}));return function(){if(0===t.length)throw new Sk.builtin.Exception("EOF");return t.pop()}}(t),"utf-8",(function(e){var t=null;e.type!==n&&e.type!==s&&e.type!==a&&(e.type===r&&(t=Sk.OpMap[e.string]),c.addtoken(t||e.type,e.string,[e.start,e.end,e.line]),e.type===o&&(l=!0))})),!l)throw new Sk.builtin.SyntaxError("incomplete input",this.filename);return{cst:c.rootnode,flags:c.p_flags}},Sk.parseTreeDump=function(e,t){var n,i=""+(t=t||"");if(256<=e.type)for(i+=Sk.ParseTables.number2symbol[e.type]+"\n",n=0;n<e.children.length;++n)i+=Sk.parseTreeDump(e.children[n],t+"  ");else i+=Sk.token.tok_name[e.type]+": "+new Sk.builtin.str(e.value).$r().v+"\n";return i},Sk.exportSymbol("Sk.Parser",n),Sk.exportSymbol("Sk.parse",Sk.parse),Sk.exportSymbol("Sk.parseTreeDump",Sk.parseTreeDump)},function(e,t){Sk.astnodes={},Sk.astnodes.Load=function(){},Sk.astnodes.Store=function(){},Sk.astnodes.Del=function(){},Sk.astnodes.AugLoad=function(){},Sk.astnodes.AugStore=function(){},Sk.astnodes.Param=function(){},Sk.astnodes.And=function(){},Sk.astnodes.Or=function(){},Sk.astnodes.Add=function(){},Sk.astnodes.Sub=function(){},Sk.astnodes.Mult=function(){},Sk.astnodes.MatMult=function(){},Sk.astnodes.Div=function(){},Sk.astnodes.Mod=function(){},Sk.astnodes.Pow=function(){},Sk.astnodes.LShift=function(){},Sk.astnodes.RShift=function(){},Sk.astnodes.BitOr=function(){},Sk.astnodes.BitXor=function(){},Sk.astnodes.BitAnd=function(){},Sk.astnodes.FloorDiv=function(){},Sk.astnodes.Invert=function(){},Sk.astnodes.Not=function(){},Sk.astnodes.UAdd=function(){},Sk.astnodes.USub=function(){},Sk.astnodes.Eq=function(){},Sk.astnodes.NotEq=function(){},Sk.astnodes.Lt=function(){},Sk.astnodes.LtE=function(){},Sk.astnodes.Gt=function(){},Sk.astnodes.GtE=function(){},Sk.astnodes.Is=function(){},Sk.astnodes.IsNot=function(){},Sk.astnodes.In=function(){},Sk.astnodes.NotIn=function(){},Sk.astnodes.Module=function(e,t){return this.body=e,this.docstring=t,this},Sk.astnodes.Interactive=function(e){return this.body=e,this},Sk.astnodes.Expression=function(e){return this.body=e,this},Sk.astnodes.Suite=function(e){return this.body=e,this},Sk.astnodes.FunctionDef=function(e,t,n,i,s,r,o,a){return Sk.asserts.assert(null!==o&&void 0!==o),Sk.asserts.assert(null!==a&&void 0!==a),this.name=e,this.args=t,this.body=n,this.decorator_list=i,this.returns=s,this.docstring=r,this.lineno=o,this.col_offset=a,this},Sk.astnodes.AsyncFunctionDef=function(e,t,n,i,s,r,o,a){return Sk.asserts.assert(null!==o&&void 0!==o),Sk.asserts.assert(null!==a&&void 0!==a),this.name=e,this.args=t,this.body=n,this.decorator_list=i,this.returns=s,this.docstring=r,this.lineno=o,this.col_offset=a,this},Sk.astnodes.ClassDef=function(e,t,n,i,s,r,o,a){return Sk.asserts.assert(null!==o&&void 0!==o),Sk.asserts.assert(null!==a&&void 0!==a),this.name=e,this.bases=t,this.keywords=n,this.body=i,this.decorator_list=s,this.docstring=r,this.lineno=o,this.col_offset=a,this},Sk.astnodes.Return=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.value=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.Delete=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.targets=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.Assign=function(e,t,n,i){return Sk.asserts.assert(null!==n&&void 0!==n),Sk.asserts.assert(null!==i&&void 0!==i),this.targets=e,this.value=t,this.lineno=n,this.col_offset=i,this},Sk.astnodes.AugAssign=function(e,t,n,i,s){return Sk.asserts.assert(null!==i&&void 0!==i),Sk.asserts.assert(null!==s&&void 0!==s),this.target=e,this.op=t,this.value=n,this.lineno=i,this.col_offset=s,this},Sk.astnodes.AnnAssign=function(e,t,n,i,s,r){return Sk.asserts.assert(null!==s&&void 0!==s),Sk.asserts.assert(null!==r&&void 0!==r),this.target=e,this.annotation=t,this.value=n,this.simple=i,this.lineno=s,this.col_offset=r,this},Sk.astnodes.For=function(e,t,n,i,s,r){return Sk.asserts.assert(null!==s&&void 0!==s),Sk.asserts.assert(null!==r&&void 0!==r),this.target=e,this.iter=t,this.body=n,this.orelse=i,this.lineno=s,this.col_offset=r,this},Sk.astnodes.AsyncFor=function(e,t,n,i,s,r){return Sk.asserts.assert(null!==s&&void 0!==s),Sk.asserts.assert(null!==r&&void 0!==r),this.target=e,this.iter=t,this.body=n,this.orelse=i,this.lineno=s,this.col_offset=r,this},Sk.astnodes.While=function(e,t,n,i,s){return Sk.asserts.assert(null!==i&&void 0!==i),Sk.asserts.assert(null!==s&&void 0!==s),this.test=e,this.body=t,this.orelse=n,this.lineno=i,this.col_offset=s,this},Sk.astnodes.If=function(e,t,n,i,s){return Sk.asserts.assert(null!==i&&void 0!==i),Sk.asserts.assert(null!==s&&void 0!==s),this.test=e,this.body=t,this.orelse=n,this.lineno=i,this.col_offset=s,this},Sk.astnodes.With=function(e,t,n,i){return Sk.asserts.assert(null!==n&&void 0!==n),Sk.asserts.assert(null!==i&&void 0!==i),this.items=e,this.body=t,this.lineno=n,this.col_offset=i,this},Sk.astnodes.AsyncWith=function(e,t,n,i){return Sk.asserts.assert(null!==n&&void 0!==n),Sk.asserts.assert(null!==i&&void 0!==i),this.items=e,this.body=t,this.lineno=n,this.col_offset=i,this},Sk.astnodes.Raise=function(e,t,n,i,s,r){return Sk.asserts.assert(null!==s&&void 0!==s),Sk.asserts.assert(null!==r&&void 0!==r),this.exc=e,this.cause=t,this.inst=n,this.tback=i,this.lineno=s,this.col_offset=r,this},Sk.astnodes.Try=function(e,t,n,i,s,r){return Sk.asserts.assert(null!==s&&void 0!==s),Sk.asserts.assert(null!==r&&void 0!==r),this.body=e,this.handlers=t,this.orelse=n,this.finalbody=i,this.lineno=s,this.col_offset=r,this},Sk.astnodes.Assert=function(e,t,n,i){return Sk.asserts.assert(null!==n&&void 0!==n),Sk.asserts.assert(null!==i&&void 0!==i),this.test=e,this.msg=t,this.lineno=n,this.col_offset=i,this},Sk.astnodes.Import=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.names=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.ImportFrom=function(e,t,n,i,s){return Sk.asserts.assert(null!==i&&void 0!==i),Sk.asserts.assert(null!==s&&void 0!==s),this.module=e,this.names=t,this.level=n,this.lineno=i,this.col_offset=s,this},Sk.astnodes.Global=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.names=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.Nonlocal=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.names=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.Expr=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.value=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.Pass=function(e,t){return Sk.asserts.assert(null!==e&&void 0!==e),Sk.asserts.assert(null!==t&&void 0!==t),this.lineno=e,this.col_offset=t,this},Sk.astnodes.Break=function(e,t){return Sk.asserts.assert(null!==e&&void 0!==e),Sk.asserts.assert(null!==t&&void 0!==t),this.lineno=e,this.col_offset=t,this},Sk.astnodes.Continue=function(e,t){return Sk.asserts.assert(null!==e&&void 0!==e),Sk.asserts.assert(null!==t&&void 0!==t),this.lineno=e,this.col_offset=t,this},Sk.astnodes.Print=function(e,t,n,i,s){return Sk.asserts.assert(null!==i&&void 0!==i),Sk.asserts.assert(null!==s&&void 0!==s),this.dest=e,this.values=t,this.nl=n,this.lineno=i,this.col_offset=s,this},Sk.astnodes.Debugger=function(e,t){return Sk.asserts.assert(null!==e&&void 0!==e),Sk.asserts.assert(null!==t&&void 0!==t),this.lineno=e,this.col_offset=t,this},Sk.astnodes.BoolOp=function(e,t,n,i){return Sk.asserts.assert(null!==n&&void 0!==n),Sk.asserts.assert(null!==i&&void 0!==i),this.op=e,this.values=t,this.lineno=n,this.col_offset=i,this},Sk.astnodes.BinOp=function(e,t,n,i,s){return Sk.asserts.assert(null!==i&&void 0!==i),Sk.asserts.assert(null!==s&&void 0!==s),this.left=e,this.op=t,this.right=n,this.lineno=i,this.col_offset=s,this},Sk.astnodes.UnaryOp=function(e,t,n,i){return Sk.asserts.assert(null!==n&&void 0!==n),Sk.asserts.assert(null!==i&&void 0!==i),this.op=e,this.operand=t,this.lineno=n,this.col_offset=i,this},Sk.astnodes.Lambda=function(e,t,n,i){return Sk.asserts.assert(null!==n&&void 0!==n),Sk.asserts.assert(null!==i&&void 0!==i),this.args=e,this.body=t,this.lineno=n,this.col_offset=i,this},Sk.astnodes.IfExp=function(e,t,n,i,s){return Sk.asserts.assert(null!==i&&void 0!==i),Sk.asserts.assert(null!==s&&void 0!==s),this.test=e,this.body=t,this.orelse=n,this.lineno=i,this.col_offset=s,this},Sk.astnodes.Dict=function(e,t,n,i){return Sk.asserts.assert(null!==n&&void 0!==n),Sk.asserts.assert(null!==i&&void 0!==i),this.keys=e,this.values=t,this.lineno=n,this.col_offset=i,this},Sk.astnodes.Set=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.elts=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.ListComp=function(e,t,n,i){return Sk.asserts.assert(null!==n&&void 0!==n),Sk.asserts.assert(null!==i&&void 0!==i),this.elt=e,this.generators=t,this.lineno=n,this.col_offset=i,this},Sk.astnodes.SetComp=function(e,t,n,i){return Sk.asserts.assert(null!==n&&void 0!==n),Sk.asserts.assert(null!==i&&void 0!==i),this.elt=e,this.generators=t,this.lineno=n,this.col_offset=i,this},Sk.astnodes.DictComp=function(e,t,n,i,s){return Sk.asserts.assert(null!==i&&void 0!==i),Sk.asserts.assert(null!==s&&void 0!==s),this.key=e,this.value=t,this.generators=n,this.lineno=i,this.col_offset=s,this},Sk.astnodes.GeneratorExp=function(e,t,n,i){return Sk.asserts.assert(null!==n&&void 0!==n),Sk.asserts.assert(null!==i&&void 0!==i),this.elt=e,this.generators=t,this.lineno=n,this.col_offset=i,this},Sk.astnodes.Await=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.value=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.Yield=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.value=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.YieldFrom=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.value=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.Compare=function(e,t,n,i,s){return Sk.asserts.assert(null!==i&&void 0!==i),Sk.asserts.assert(null!==s&&void 0!==s),this.left=e,this.ops=t,this.comparators=n,this.lineno=i,this.col_offset=s,this},Sk.astnodes.Call=function(e,t,n,i,s){return Sk.asserts.assert(null!==i&&void 0!==i),Sk.asserts.assert(null!==s&&void 0!==s),this.func=e,this.args=t,this.keywords=n,this.lineno=i,this.col_offset=s,this},Sk.astnodes.Num=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.n=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.Str=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.s=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.FormattedValue=function(e,t,n,i,s){return Sk.asserts.assert(null!==i&&void 0!==i),Sk.asserts.assert(null!==s&&void 0!==s),this.value=e,this.conversion=t,this.format_spec=n,this.lineno=i,this.col_offset=s,this},Sk.astnodes.JoinedStr=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.values=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.Bytes=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.s=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.NameConstant=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.value=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.Ellipsis=function(e,t){return Sk.asserts.assert(null!==e&&void 0!==e),Sk.asserts.assert(null!==t&&void 0!==t),this.lineno=e,this.col_offset=t,this},Sk.astnodes.Constant=function(e,t,n){return Sk.asserts.assert(null!==t&&void 0!==t),Sk.asserts.assert(null!==n&&void 0!==n),this.value=e,this.lineno=t,this.col_offset=n,this},Sk.astnodes.Attribute=function(e,t,n,i,s){return Sk.asserts.assert(null!==i&&void 0!==i),Sk.asserts.assert(null!==s&&void 0!==s),this.value=e,this.attr=t,this.ctx=n,this.lineno=i,this.col_offset=s,this},Sk.astnodes.Subscript=function(e,t,n,i,s){return Sk.asserts.assert(null!==i&&void 0!==i),Sk.asserts.assert(null!==s&&void 0!==s),this.value=e,this.slice=t,this.ctx=n,this.lineno=i,this.col_offset=s,this},Sk.astnodes.Starred=function(e,t,n,i){return Sk.asserts.assert(null!==n&&void 0!==n),Sk.asserts.assert(null!==i&&void 0!==i),this.value=e,this.ctx=t,this.lineno=n,this.col_offset=i,this},Sk.astnodes.Name=function(e,t,n,i){return Sk.asserts.assert(null!==n&&void 0!==n),Sk.asserts.assert(null!==i&&void 0!==i),this.id=e,this.ctx=t,this.lineno=n,this.col_offset=i,this},Sk.astnodes.List=function(e,t,n,i){return Sk.asserts.assert(null!==n&&void 0!==n),Sk.asserts.assert(null!==i&&void 0!==i),this.elts=e,this.ctx=t,this.lineno=n,this.col_offset=i,this},Sk.astnodes.Tuple=function(e,t,n,i){return Sk.asserts.assert(null!==n&&void 0!==n),Sk.asserts.assert(null!==i&&void 0!==i),this.elts=e,this.ctx=t,this.lineno=n,this.col_offset=i,this},Sk.astnodes.Slice=function(e,t,n){return this.lower=e,this.upper=t,this.step=n,this},Sk.astnodes.ExtSlice=function(e){return this.dims=e,this},Sk.astnodes.Index=function(e){return this.value=e,this},Sk.astnodes.comprehension=function(e,t,n,i){return this.target=e,this.iter=t,this.ifs=n,this.is_async=i,this},Sk.astnodes.ExceptHandler=function(e,t,n,i,s){return Sk.asserts.assert(null!==i&&void 0!==i),Sk.asserts.assert(null!==s&&void 0!==s),this.type=e,this.name=t,this.body=n,this.lineno=i,this.col_offset=s,this},Sk.astnodes.arguments_=function(e,t,n,i,s,r){return this.args=e,this.vararg=t,this.kwonlyargs=n,this.kw_defaults=i,this.kwarg=s,this.defaults=r,this},Sk.astnodes.arg=function(e,t){return this.arg=e,this.annotation=t,this},Sk.astnodes.keyword=function(e,t){return this.arg=e,this.value=t,this},Sk.astnodes.alias=function(e,t){return this.name=e,this.asname=t,this},Sk.astnodes.withitem=function(e,t){return this.context_expr=e,this.optional_vars=t,this},Sk.astnodes.Module.prototype._astname="Module",Sk.astnodes.Module.prototype._fields=["body",function(e){return e.body},"docstring",function(e){return e.docstring}],Sk.astnodes.Interactive.prototype._astname="Interactive",Sk.astnodes.Interactive.prototype._fields=["body",function(e){return e.body}],Sk.astnodes.Expression.prototype._astname="Expression",Sk.astnodes.Expression.prototype._fields=["body",function(e){return e.body}],Sk.astnodes.Suite.prototype._astname="Suite",Sk.astnodes.Suite.prototype._fields=["body",function(e){return e.body}],Sk.astnodes.FunctionDef.prototype._astname="FunctionDef",Sk.astnodes.FunctionDef.prototype._fields=["name",function(e){return e.name},"args",function(e){return e.args},"body",function(e){return e.body},"decorator_list",function(e){return e.decorator_list},"returns",function(e){return e.returns},"docstring",function(e){return e.docstring}],Sk.astnodes.AsyncFunctionDef.prototype._astname="AsyncFunctionDef",Sk.astnodes.AsyncFunctionDef.prototype._fields=["name",function(e){return e.name},"args",function(e){return e.args},"body",function(e){return e.body},"decorator_list",function(e){return e.decorator_list},"returns",function(e){return e.returns},"docstring",function(e){return e.docstring}],Sk.astnodes.ClassDef.prototype._astname="ClassDef",Sk.astnodes.ClassDef.prototype._fields=["name",function(e){return e.name},"bases",function(e){return e.bases},"keywords",function(e){return e.keywords},"body",function(e){return e.body},"decorator_list",function(e){return e.decorator_list},"docstring",function(e){return e.docstring}],Sk.astnodes.Return.prototype._astname="Return",Sk.astnodes.Return.prototype._fields=["value",function(e){return e.value}],Sk.astnodes.Delete.prototype._astname="Delete",Sk.astnodes.Delete.prototype._fields=["targets",function(e){return e.targets}],Sk.astnodes.Assign.prototype._astname="Assign",Sk.astnodes.Assign.prototype._fields=["targets",function(e){return e.targets},"value",function(e){return e.value}],Sk.astnodes.AugAssign.prototype._astname="AugAssign",Sk.astnodes.AugAssign.prototype._fields=["target",function(e){return e.target},"op",function(e){return e.op},"value",function(e){return e.value}],Sk.astnodes.AnnAssign.prototype._astname="AnnAssign",Sk.astnodes.AnnAssign.prototype._fields=["target",function(e){return e.target},"annotation",function(e){return e.annotation},"value",function(e){return e.value},"simple",function(e){return e.simple}],Sk.astnodes.For.prototype._astname="For",Sk.astnodes.For.prototype._fields=["target",function(e){return e.target},"iter",function(e){return e.iter},"body",function(e){return e.body},"orelse",function(e){return e.orelse}],Sk.astnodes.AsyncFor.prototype._astname="AsyncFor",Sk.astnodes.AsyncFor.prototype._fields=["target",function(e){return e.target},"iter",function(e){return e.iter},"body",function(e){return e.body},"orelse",function(e){return e.orelse}],Sk.astnodes.While.prototype._astname="While",Sk.astnodes.While.prototype._fields=["test",function(e){return e.test},"body",function(e){return e.body},"orelse",function(e){return e.orelse}],Sk.astnodes.If.prototype._astname="If",Sk.astnodes.If.prototype._fields=["test",function(e){return e.test},"body",function(e){return e.body},"orelse",function(e){return e.orelse}],Sk.astnodes.With.prototype._astname="With",Sk.astnodes.With.prototype._fields=["items",function(e){return e.items},"body",function(e){return e.body}],Sk.astnodes.AsyncWith.prototype._astname="AsyncWith",Sk.astnodes.AsyncWith.prototype._fields=["items",function(e){return e.items},"body",function(e){return e.body}],Sk.astnodes.Raise.prototype._astname="Raise",Sk.astnodes.Raise.prototype._fields=["exc",function(e){return e.exc},"cause",function(e){return e.cause},"inst",function(e){return e.inst},"tback",function(e){return e.tback}],Sk.astnodes.Try.prototype._astname="Try",Sk.astnodes.Try.prototype._fields=["body",function(e){return e.body},"handlers",function(e){return e.handlers},"orelse",function(e){return e.orelse},"finalbody",function(e){return e.finalbody}],Sk.astnodes.Assert.prototype._astname="Assert",Sk.astnodes.Assert.prototype._fields=["test",function(e){return e.test},"msg",function(e){return e.msg}],Sk.astnodes.Import.prototype._astname="Import",Sk.astnodes.Import.prototype._fields=["names",function(e){return e.names}],Sk.astnodes.ImportFrom.prototype._astname="ImportFrom",Sk.astnodes.ImportFrom.prototype._fields=["module",function(e){return e.module},"names",function(e){return e.names},"level",function(e){return e.level}],Sk.astnodes.Global.prototype._astname="Global",Sk.astnodes.Global.prototype._fields=["names",function(e){return e.names}],Sk.astnodes.Nonlocal.prototype._astname="Nonlocal",Sk.astnodes.Nonlocal.prototype._fields=["names",function(e){return e.names}],Sk.astnodes.Expr.prototype._astname="Expr",Sk.astnodes.Expr.prototype._fields=["value",function(e){return e.value}],Sk.astnodes.Pass.prototype._astname="Pass",Sk.astnodes.Pass.prototype._fields=[],Sk.astnodes.Break.prototype._astname="Break",Sk.astnodes.Break.prototype._fields=[],Sk.astnodes.Continue.prototype._astname="Continue",Sk.astnodes.Continue.prototype._fields=[],Sk.astnodes.Print.prototype._astname="Print",Sk.astnodes.Print.prototype._fields=["dest",function(e){return e.dest},"values",function(e){return e.values},"nl",function(e){return e.nl}],Sk.astnodes.Debugger.prototype._astname="Debugger",Sk.astnodes.Debugger.prototype._fields=[],Sk.astnodes.BoolOp.prototype._astname="BoolOp",Sk.astnodes.BoolOp.prototype._fields=["op",function(e){return e.op},"values",function(e){return e.values}],Sk.astnodes.BinOp.prototype._astname="BinOp",Sk.astnodes.BinOp.prototype._fields=["left",function(e){return e.left},"op",function(e){return e.op},"right",function(e){return e.right}],Sk.astnodes.UnaryOp.prototype._astname="UnaryOp",Sk.astnodes.UnaryOp.prototype._fields=["op",function(e){return e.op},"operand",function(e){return e.operand}],Sk.astnodes.Lambda.prototype._astname="Lambda",Sk.astnodes.Lambda.prototype._fields=["args",function(e){return e.args},"body",function(e){return e.body}],Sk.astnodes.IfExp.prototype._astname="IfExp",Sk.astnodes.IfExp.prototype._fields=["test",function(e){return e.test},"body",function(e){return e.body},"orelse",function(e){return e.orelse}],Sk.astnodes.Dict.prototype._astname="Dict",Sk.astnodes.Dict.prototype._fields=["keys",function(e){return e.keys},"values",function(e){return e.values}],Sk.astnodes.Set.prototype._astname="Set",Sk.astnodes.Set.prototype._fields=["elts",function(e){return e.elts}],Sk.astnodes.ListComp.prototype._astname="ListComp",Sk.astnodes.ListComp.prototype._fields=["elt",function(e){return e.elt},"generators",function(e){return e.generators}],Sk.astnodes.SetComp.prototype._astname="SetComp",Sk.astnodes.SetComp.prototype._fields=["elt",function(e){return e.elt},"generators",function(e){return e.generators}],Sk.astnodes.DictComp.prototype._astname="DictComp",Sk.astnodes.DictComp.prototype._fields=["key",function(e){return e.key},"value",function(e){return e.value},"generators",function(e){return e.generators}],Sk.astnodes.GeneratorExp.prototype._astname="GeneratorExp",Sk.astnodes.GeneratorExp.prototype._fields=["elt",function(e){return e.elt},"generators",function(e){return e.generators}],Sk.astnodes.Await.prototype._astname="Await",Sk.astnodes.Await.prototype._fields=["value",function(e){return e.value}],Sk.astnodes.Yield.prototype._astname="Yield",Sk.astnodes.Yield.prototype._fields=["value",function(e){return e.value}],Sk.astnodes.YieldFrom.prototype._astname="YieldFrom",Sk.astnodes.YieldFrom.prototype._fields=["value",function(e){return e.value}],Sk.astnodes.Compare.prototype._astname="Compare",Sk.astnodes.Compare.prototype._fields=["left",function(e){return e.left},"ops",function(e){return e.ops},"comparators",function(e){return e.comparators}],Sk.astnodes.Call.prototype._astname="Call",Sk.astnodes.Call.prototype._fields=["func",function(e){return e.func},"args",function(e){return e.args},"keywords",function(e){return e.keywords}],Sk.astnodes.Num.prototype._astname="Num",Sk.astnodes.Num.prototype._fields=["n",function(e){return e.n}],Sk.astnodes.Str.prototype._astname="Str",Sk.astnodes.Str.prototype._fields=["s",function(e){return e.s}],Sk.astnodes.FormattedValue.prototype._astname="FormattedValue",Sk.astnodes.FormattedValue.prototype._fields=["value",function(e){return e.value},"conversion",function(e){return e.conversion},"format_spec",function(e){return e.format_spec}],Sk.astnodes.JoinedStr.prototype._astname="JoinedStr",Sk.astnodes.JoinedStr.prototype._fields=["values",function(e){return e.values}],Sk.astnodes.Bytes.prototype._astname="Bytes",Sk.astnodes.Bytes.prototype._fields=["s",function(e){return e.s}],Sk.astnodes.NameConstant.prototype._astname="NameConstant",Sk.astnodes.NameConstant.prototype._fields=["value",function(e){return e.value}],Sk.astnodes.Ellipsis.prototype._astname="Ellipsis",Sk.astnodes.Ellipsis.prototype._fields=[],Sk.astnodes.Constant.prototype._astname="Constant",Sk.astnodes.Constant.prototype._fields=["value",function(e){return e.value}],Sk.astnodes.Attribute.prototype._astname="Attribute",Sk.astnodes.Attribute.prototype._fields=["value",function(e){return e.value},"attr",function(e){return e.attr},"ctx",function(e){return e.ctx}],Sk.astnodes.Subscript.prototype._astname="Subscript",Sk.astnodes.Subscript.prototype._fields=["value",function(e){return e.value},"slice",function(e){return e.slice},"ctx",function(e){return e.ctx}],Sk.astnodes.Starred.prototype._astname="Starred",Sk.astnodes.Starred.prototype._fields=["value",function(e){return e.value},"ctx",function(e){return e.ctx}],Sk.astnodes.Name.prototype._astname="Name",Sk.astnodes.Name.prototype._fields=["id",function(e){return e.id},"ctx",function(e){return e.ctx}],Sk.astnodes.List.prototype._astname="List",Sk.astnodes.List.prototype._fields=["elts",function(e){return e.elts},"ctx",function(e){return e.ctx}],Sk.astnodes.Tuple.prototype._astname="Tuple",Sk.astnodes.Tuple.prototype._fields=["elts",function(e){return e.elts},"ctx",function(e){return e.ctx}],Sk.astnodes.Load.prototype._astname="Load",Sk.astnodes.Load.prototype._isenum=!0,Sk.astnodes.Store.prototype._astname="Store",Sk.astnodes.Store.prototype._isenum=!0,Sk.astnodes.Del.prototype._astname="Del",Sk.astnodes.Del.prototype._isenum=!0,Sk.astnodes.AugLoad.prototype._astname="AugLoad",Sk.astnodes.AugLoad.prototype._isenum=!0,Sk.astnodes.AugStore.prototype._astname="AugStore",Sk.astnodes.AugStore.prototype._isenum=!0,Sk.astnodes.Param.prototype._astname="Param",Sk.astnodes.Param.prototype._isenum=!0,Sk.astnodes.Slice.prototype._astname="Slice",Sk.astnodes.Slice.prototype._fields=["lower",function(e){return e.lower},"upper",function(e){return e.upper},"step",function(e){return e.step}],Sk.astnodes.ExtSlice.prototype._astname="ExtSlice",Sk.astnodes.ExtSlice.prototype._fields=["dims",function(e){return e.dims}],Sk.astnodes.Index.prototype._astname="Index",Sk.astnodes.Index.prototype._fields=["value",function(e){return e.value}],Sk.astnodes.And.prototype._astname="And",Sk.astnodes.And.prototype._isenum=!0,Sk.astnodes.Or.prototype._astname="Or",Sk.astnodes.Or.prototype._isenum=!0,Sk.astnodes.Add.prototype._astname="Add",Sk.astnodes.Add.prototype._isenum=!0,Sk.astnodes.Sub.prototype._astname="Sub",Sk.astnodes.Sub.prototype._isenum=!0,Sk.astnodes.Mult.prototype._astname="Mult",Sk.astnodes.Mult.prototype._isenum=!0,Sk.astnodes.MatMult.prototype._astname="MatMult",Sk.astnodes.MatMult.prototype._isenum=!0,Sk.astnodes.Div.prototype._astname="Div",Sk.astnodes.Div.prototype._isenum=!0,Sk.astnodes.Mod.prototype._astname="Mod",Sk.astnodes.Mod.prototype._isenum=!0,Sk.astnodes.Pow.prototype._astname="Pow",Sk.astnodes.Pow.prototype._isenum=!0,Sk.astnodes.LShift.prototype._astname="LShift",Sk.astnodes.LShift.prototype._isenum=!0,Sk.astnodes.RShift.prototype._astname="RShift",Sk.astnodes.RShift.prototype._isenum=!0,Sk.astnodes.BitOr.prototype._astname="BitOr",Sk.astnodes.BitOr.prototype._isenum=!0,Sk.astnodes.BitXor.prototype._astname="BitXor",Sk.astnodes.BitXor.prototype._isenum=!0,Sk.astnodes.BitAnd.prototype._astname="BitAnd",Sk.astnodes.BitAnd.prototype._isenum=!0,Sk.astnodes.FloorDiv.prototype._astname="FloorDiv",Sk.astnodes.FloorDiv.prototype._isenum=!0,Sk.astnodes.Invert.prototype._astname="Invert",Sk.astnodes.Invert.prototype._isenum=!0,Sk.astnodes.Not.prototype._astname="Not",Sk.astnodes.Not.prototype._isenum=!0,Sk.astnodes.UAdd.prototype._astname="UAdd",Sk.astnodes.UAdd.prototype._isenum=!0,Sk.astnodes.USub.prototype._astname="USub",Sk.astnodes.USub.prototype._isenum=!0,Sk.astnodes.Eq.prototype._astname="Eq",Sk.astnodes.Eq.prototype._isenum=!0,Sk.astnodes.NotEq.prototype._astname="NotEq",Sk.astnodes.NotEq.prototype._isenum=!0,Sk.astnodes.Lt.prototype._astname="Lt",Sk.astnodes.Lt.prototype._isenum=!0,Sk.astnodes.LtE.prototype._astname="LtE",Sk.astnodes.LtE.prototype._isenum=!0,Sk.astnodes.Gt.prototype._astname="Gt",Sk.astnodes.Gt.prototype._isenum=!0,Sk.astnodes.GtE.prototype._astname="GtE",Sk.astnodes.GtE.prototype._isenum=!0,Sk.astnodes.Is.prototype._astname="Is",Sk.astnodes.Is.prototype._isenum=!0,Sk.astnodes.IsNot.prototype._astname="IsNot",Sk.astnodes.IsNot.prototype._isenum=!0,Sk.astnodes.In.prototype._astname="In",Sk.astnodes.In.prototype._isenum=!0,Sk.astnodes.NotIn.prototype._astname="NotIn",Sk.astnodes.NotIn.prototype._isenum=!0,Sk.astnodes.comprehension.prototype._astname="comprehension",Sk.astnodes.comprehension.prototype._fields=["target",function(e){return e.target},"iter",function(e){return e.iter},"ifs",function(e){return e.ifs},"is_async",function(e){return e.is_async}],Sk.astnodes.ExceptHandler.prototype._astname="ExceptHandler",Sk.astnodes.ExceptHandler.prototype._fields=["type",function(e){return e.type},"name",function(e){return e.name},"body",function(e){return e.body}],Sk.astnodes.arguments_.prototype._astname="arguments",Sk.astnodes.arguments_.prototype._fields=["args",function(e){return e.args},"vararg",function(e){return e.vararg},"kwonlyargs",function(e){return e.kwonlyargs},"kw_defaults",function(e){return e.kw_defaults},"kwarg",function(e){return e.kwarg},"defaults",function(e){return e.defaults}],Sk.astnodes.arg.prototype._astname="arg",Sk.astnodes.arg.prototype._fields=["arg",function(e){return e.arg},"annotation",function(e){return e.annotation}],Sk.astnodes.keyword.prototype._astname="keyword",Sk.astnodes.keyword.prototype._fields=["arg",function(e){return e.arg},"value",function(e){return e.value}],Sk.astnodes.alias.prototype._astname="alias",Sk.astnodes.alias.prototype._fields=["name",function(e){return e.name},"asname",function(e){return e.asname}],Sk.astnodes.withitem.prototype._astname="withitem",Sk.astnodes.withitem.prototype._fields=["context_expr",function(e){return e.context_expr},"optional_vars",function(e){return e.optional_vars}],Sk.exportSymbol("Sk.astnodes",Sk.astnodes)},function(e,t){function n(e,t,n){this.c_encoding=e,this.c_filename=t,this.c_flags=n||0}function i(e){return Sk.asserts.assert(void 0!==e,"node must be defined"),null===e.children?0:e.children.length}function s(e,t){return Sk.asserts.assert(void 0!==e,"node must be defined"),Sk.asserts.assert(void 0!==t,"index of child must be specified"),e.children[t]}function r(e,t){Sk.asserts.assert(e.type===t,"node wasn't expected type")}function o(e,t,n){throw new Sk.builtin.SyntaxError(n,e.c_filename,t.lineno)}function a(e){return Sk.asserts.assert("string"===typeof e,"expecting string, got "+typeof e),new Sk.builtin.str(e)}function l(e){var t,n;switch(e.type){case z.single_input:if(s(e,0).type===W.T_NEWLINE)break;return l(s(e,0));case z.file_input:for(t=n=0;t<i(e);++t){var r=s(e,t);r.type===z.stmt&&(n+=l(r))}return n;case z.stmt:return l(s(e,0));case z.compound_stmt:return 1;case z.simple_stmt:return Math.floor(i(e)/2);case z.suite:if(1===i(e))return l(s(e,0));for(n=0,t=2;t<i(e)-1;++t)n+=l(s(e,t));return n;default:Sk.asserts.fail("Non-statement found")}return 0}function c(e,t,n,i){if(n instanceof Sk.builtin.str&&(n=n.v),"None"===n)throw new Sk.builtin.SyntaxError("assignment to None",e.c_filename,i);if("True"===n||"False"===n)throw new Sk.builtin.SyntaxError("assignment to True or False is forbidden",e.c_filename,i)}function u(e,t,n,i){var s;Sk.asserts.assert(n!==Sk.astnodes.AugStore&&n!==Sk.astnodes.AugLoad,"context not AugStore or AugLoad");var r=s=null;switch(t.constructor){case Sk.astnodes.Attribute:case Sk.astnodes.Name:n===Sk.astnodes.Store&&c(e,0,t.attr,i.lineno),t.ctx=n;break;case Sk.astnodes.Starred:t.ctx=n,u(e,t.value,n,i);break;case Sk.astnodes.Subscript:t.ctx=n;break;case Sk.astnodes.List:t.ctx=n,s=t.elts;break;case Sk.astnodes.Tuple:if(0===t.elts.length)throw new Sk.builtin.SyntaxError("can't assign to ()",e.c_filename,i.lineno);t.ctx=n,s=t.elts;break;case Sk.astnodes.Lambda:r="lambda";break;case Sk.astnodes.Call:r="function call";break;case Sk.astnodes.BoolOp:case Sk.astnodes.BinOp:case Sk.astnodes.UnaryOp:r="operator";break;case Sk.astnodes.GeneratorExp:r="generator expression";break;case Sk.astnodes.Yield:r="yield expression";break;case Sk.astnodes.ListComp:r="list comprehension";break;case Sk.astnodes.SetComp:r="set comprehension";break;case Sk.astnodes.DictComp:r="dict comprehension";break;case Sk.astnodes.Dict:case Sk.astnodes.Set:case Sk.astnodes.Num:case Sk.astnodes.Str:r="literal";break;case Sk.astnodes.NameConstant:r="True, False or None";break;case Sk.astnodes.Compare:r="comparison";break;case Sk.astnodes.Repr:r="repr";break;case Sk.astnodes.IfExp:r="conditional expression";break;default:Sk.asserts.fail("unhandled expression in assignment")}if(r)throw new Sk.builtin.SyntaxError("can't "+(n===Sk.astnodes.Store?"assign to":"delete")+" "+r,e.c_filename,i.lineno);if(s)for(t=0;t<s.length;++t)u(e,s[t],n,i)}function h(e){if(void 0===V[e.type])throw new Sk.builtin.SyntaxError("invalid syntax",e.type,e.lineno);return V[e.type]}function d(e,t){return e.value?new Sk.builtin.str(e.value):new Sk.builtin.str(e)}function f(e,t){if(r(t,z.comp_op),1===i(t))switch(t=s(t,0),t.type){case W.T_LESS:return Sk.astnodes.Lt;case W.T_GREATER:return Sk.astnodes.Gt;case W.T_EQEQUAL:return Sk.astnodes.Eq;case W.T_LESSEQUAL:return Sk.astnodes.LtE;case W.T_GREATEREQUAL:return Sk.astnodes.GtE;case W.T_NOTEQUAL:return Sk.astnodes.NotEq;case W.T_NAME:if("in"===t.value)return Sk.astnodes.In;if("is"===t.value)return Sk.astnodes.Is}else if(2===i(t)&&s(t,0).type===W.T_NAME){if("in"===s(t,1).value)return Sk.astnodes.NotIn;if("is"===s(t,0).value)return Sk.astnodes.IsNot}Sk.asserts.fail("invalid comp_op")}function g(e,t){return e&&(e.lineno=t.lineno,e.col_offset=t.col_offset,e.end_lineno=t.end_lineno,e.end_col_offset=t.end_col_offset),e}function p(e,t){var n,r=[];for(Sk.asserts.assert(t.type===z.testlist||t.type===z.testlist_star_expr||t.type===z.listmaker||t.type===z.testlist_comp||t.type===z.testlist_safe||t.type===z.testlist1,"node type must be listlike"),n=0;n<i(t);n+=2)Sk.asserts.assert(s(t,n).type===z.test||s(t,n).type===z.old_test||s(t,n).type===z.star_expr),r[n/2]=F(e,s(t,n));return r}function m(e,t){var n;r(t,z.suite);var o=[],a=0;if(s(t,0).type===z.simple_stmt){var c=i(t=s(t,0))-1;for(s(t,c-1).type===W.T_SEMI&&--c,n=0;n<c;n+=2)o[a++]=B(e,s(t,n))}else for(n=2;n<i(t)-1;++n){r(c=s(t,n),z.stmt);var u=l(c);if(1===u)o[a++]=B(e,c);else for(r(c=s(c,0),z.simple_stmt),u=0;u<i(c);u+=2){if(0===i(s(c,u))){Sk.asserts.assert(u+1===i(c));break}o[a++]=B(e,s(c,u))}}return Sk.asserts.assert(a===l(t)),o}function b(e,t,n){var o;r(t,z.exprlist);var a=[];for(o=0;o<i(t);o+=2){var l=F(e,s(t,o));a[o/2]=l,n&&u(e,l,n,s(t,o))}return a}function _(e,t){e:for(;;)switch(t.type){case z.import_as_name:e=null;var n=a(s(t,0).value);return 3===i(t)&&(e=s(t,2).value),new Sk.astnodes.alias(n,null==e?null:a(e));case z.dotted_as_name:if(1===i(t)){t=s(t,0);continue e}return e=_(e,s(t,0)),Sk.asserts.assert(!e.asname),e.asname=a(s(t,2).value),e;case z.dotted_name:if(1===i(t))return new Sk.astnodes.alias(a(s(t,0).value),null);for(e="",n=0;n<i(t);n+=2)e+=s(t,n).value+".";return new Sk.astnodes.alias(a(e.substr(0,e.length-1)),null);case W.T_STAR:return new Sk.astnodes.alias(a("*"),null);default:throw new Sk.builtin.SyntaxError("unexpected import name",e.c_filename,t.lineno)}}function v(e,t){return Sk.asserts.assert(t.type==z.testlist_comp||t.type==z.argument),T(e,t,0)}function y(e,t){if(s(t,0).type===W.T_MINUS&&2===i(t)){var n=s(t,1);if(n.type===z.factor&&1===i(n)&&((n=s(n,0)).type===z.power&&1===i(n))){var r=s(n,0);if(r.type===z.atom&&(n=s(r,0)).type===W.T_NUMBER)return n.value="-"+n.value,O(e,r)}}switch(e=F(e,s(t,1)),s(t,0).type){case W.T_PLUS:return new Sk.astnodes.UnaryOp(Sk.astnodes.UAdd,e,t.lineno,t.col_offset);case W.T_MINUS:return new Sk.astnodes.UnaryOp(Sk.astnodes.USub,e,t.lineno,t.col_offset);case W.T_TILDE:return new Sk.astnodes.UnaryOp(Sk.astnodes.Invert,e,t.lineno,t.col_offset)}Sk.asserts.fail("unhandled factor")}function S(e,t,n,a){var l,u,h;for(r(t,z.arglist),l=h=u=0;l<i(t);l++){var d=s(t,l);d.type==z.argument&&(1==i(d)?u++:s(d,1).type==z.comp_for?(u++,a||o(e,d,"invalid syntax"),1<i(t)&&o(e,d,"Generator expression must be parenthesized")):s(d,0).type==W.T_STAR?u++:h++)}var f=[],g=[];for(l=a=h=u=0;l<i(t);l++)if((d=s(t,l)).type==z.argument){var p=s(d,0);if(1==i(d)){h&&o(e,p,a?"positional argument follows keyword argument unpacking":"positional argument follows keyword argument");var m=F(e,p);if(!m)return null;f[u++]=m}else if(p.type==W.T_STAR){if(a)return o(e,p,"iterable argument unpacking follows keyword argument unpacking"),null;if(!(m=F(e,s(d,1))))return null;d=new Sk.astnodes.Starred(m,Sk.astnodes.Load,p.lineno,p.col_offset),f[u++]=d}else if(p.type==W.T_DOUBLESTAR){if(l++,!(m=F(e,s(d,1))))return null;d=new Sk.astnodes.keyword(null,m),g[h++]=d,a++}else if(s(d,1).type==z.comp_for){if(!(m=v(e,d)))return null;f[u++]=m}else{var b;if(!(m=F(e,p)))return null;if(m.constructor===Sk.astnodes.Lambda)return o(e,p,"lambda cannot contain assignment"),null;if(m.constructor!==Sk.astnodes.Name)return o(e,p,"keyword can't be an expression"),null;if(c(e,m.id,d,1))return null;var _=m.id;for(b=0;b<h;b++)if((m=g[b].arg)&&m===_)return o(e,p,"keyword argument repeated"),null;if(!(m=F(e,s(d,2))))return null;d=new Sk.astnodes.keyword(_,m),g[h++]=d}}return new Sk.astnodes.Call(n,f,g,n.lineno,n.col_offset)}function w(e,t,n){if(r(t,z.trailer),s(t,0).type==W.T_LPAR)return 2==i(t)?new Sk.astnodes.Call(n,null,null,t.lineno,t.col_offset):S(e,s(t,1),n,!0);if(s(t,0).type==W.T_DOT){var o=d(s(t,1));return o?new Sk.astnodes.Attribute(n,o,Sk.astnodes.Load,t.lineno,t.col_offset):null}if(r(s(t,0),W.T_LSQB),r(s(t,2),W.T_RSQB),1==i(t=s(t,1)))return(o=R(e,s(t,0)))?new Sk.astnodes.Subscript(n,o,Sk.astnodes.Load,t.lineno,t.col_offset):null;var a,l=1,c=[];for(a=0;a<i(t);a+=2){if(!(o=R(e,s(t,a))))return null;o.kind!=H.Index_kind&&(l=0),c[a/2]=o}if(!l)return new Sk.astnodes.Subscript(n,new Sk.astnodes.ExtSlice(c),Sk.astnodes.Load,t.lineno,t.col_offset);for(e=[],a=0;a<c.length;++a)o=c[a],Sk.asserts.assert(o.kind==H.Index_kind&&o.v.Index.value),e[a]=o.v.Index.value;return o=new Sk.astnodes.Tuple(e,Sk.astnodes.Load,t.lineno,t.col_offset),new Sk.astnodes.Subscript(n,new Sk.astnodes.Index(o),Sk.astnodes.Load,t.lineno,t.col_offset)}function k(e,t){var n=null;Sk.asserts.assert(t.type===z.tfpdef||t.type===z.vfpdef);var r=s(t,0);return c(e,0,r.value,r.lineno),r=a(r.value),3==i(t)&&s(t,1).type===W.T_COLON&&(n=F(e,s(t,2))),new Sk.astnodes.arg(r,n,t.lineno,t.col_offset)}function C(e,t,n,r,l){var u=n,h=0;for(r||o(e,s(t,n),"named arguments must follow bare *"),Sk.asserts.assert(l);u<i(t);){var d=s(t,u);switch(d.type){case z.vfpdef:case z.tfpdef:u+1<i(t)&&s(t,u+1).type==W.T_EQUAL?(l[h]=F(e,s(t,u+2)),u+=2):l[h]=null;var f=3==i(d)?F(e,s(d,2)):null;c(e,0,(d=s(d,0)).value,d.lineno),n=a(d.value),r[h++]=new Sk.astnodes.arg(n,f,d.lineno,d.col_offset),u+=2;break;case W.T_DOUBLESTAR:return u;default:o(e,d,"unexpected node")}}return u}function x(e,t){var n,r,o,a=[],l=[],c=[],u=[],h=null,d=null;if(t.type===z.parameters){if(2===i(t))return new Sk.astnodes.arguments_([],null,[],[],null,[]);t=s(t,1)}for(Sk.asserts.assert(t.type===z.varargslist||t.type===z.typedargslist),n=r=o=0;o<i(t);){var f=s(t,o);switch(f.type){case z.tfpdef:case z.vfpdef:if(o+1<i(t)&&s(t,o+1).type==W.T_EQUAL){l[r++]=F(e,s(t,o+2)),o+=2;var g=1}else if(g)throw new Sk.builtin.SyntaxError("non-default argument follows default argument",e.c_filename,t.lineno);a[n++]=k(e,f),o+=2;break;case W.T_STAR:if(o+1>=i(t)||o+2==i(t)&&s(t,o+1).type==W.T_COMMA)throw new Sk.builtin.SyntaxError("named arguments must follow bare *",e.c_filename,t.lineno);(f=s(t,o+1)).type==W.T_COMMA?o=C(e,t,o+=2,c,u):(h=k(e,f),(o+=3)<i(t)&&(s(t,o).type==z.tfpdef||s(t,o).type==z.vfpdef)&&(o=C(e,t,o,c,u)));break;case W.T_DOUBLESTAR:f=s(t,o+1),Sk.asserts.assert(f.type==z.tfpdef||f.type==z.vfpdef),d=k(e,f),o+=3;break;default:return void Sk.asserts.fail("unexpected node in varargslist")}}return new Sk.astnodes.arguments_(a,h,c,u,d,l)}function E(e,t,n,a){var l=a?s(t,1):t,u=null,h=1,f=null;if(a&&5>e.c_feature_version)return o(e,l,"Async functions are only supported in Python 3.5 and greater"),null;r(l,z.funcdef);var g=d(s(l,h));if(c(e,0,s(l,h),0))return null;var p=x(e,s(l,h+1));if(!p)return null;if(s(l,h+2).type==W.T_RARROW){if(!(u=F(e,s(l,h+3))))return null;h+=2}if(s(l,h+3).type==W.T_TYPE_COMMENT){if(!(f=W.T_NEW_TYPE_COMMENT(s(l,h+3))))return null;h+=1}var b=m(e,s(l,h+3));if(!b)return null;if(1<i(s(l,h+3))&&(h=s(s(l,h+3),1)).type==W.T_TYPE_COMMENT){if(null!=f)return o(e,l,"Cannot have two type comments on def"),null;if(!(f=W.T_NEW_TYPE_COMMENT(h)))return null}return a?new Sk.astnodes.AsyncFunctionDef(g,p,b,n,u,f,t.lineno,t.col_offset,void 0,void 0):new Sk.astnodes.FunctionDef(g,p,b,n,u,f,l.lineno,l.col_offset,void 0,void 0)}function L(e,t,n){if(r(t,z.classdef),4==i(t)){var o=m(e,s(t,3)),a=d(s(t,1).value);return c(e,s(t,3),a,t.lineno),new Sk.astnodes.ClassDef(a,[],[],o,n,null,t.lineno,t.col_offset)}if(s(t,3).type===W.T_RPAR)return o=m(e,s(t,5)),a=d(s(t,1).value),c(e,s(t,3),a,s(t,3).lineno),new Sk.astnodes.ClassDef(a,[],[],o,n,null,t.lineno,t.col_offset);a=d(s(t,1)),a=new Sk.astnodes.Name(a,Sk.astnodes.Load,t.lineno,t.col_offset);var l=S(e,s(t,3),a,!1);return o=m(e,s(t,6)),a=d(s(t,1).value),c(e,s(t,1),a,s(t,1).lineno),new Sk.astnodes.ClassDef(a,l.args,l.keywords,o,n,null,t.lineno,t.col_offset)}function D(e,t){function n(e,t){for(e=0;;){if(r(t,z.comp_iter),s(t,0).type===z.comp_for)return e;if(r(t=s(t,0),z.comp_if),e++,2===i(t))return e;t=s(t,2)}}var o,a=function(e,t){e=0;e:for(;;){if(e++,r(t,z.comp_for),5!==i(t))return e;t=s(t,4);t:for(;;){if(r(t,z.comp_iter),(t=s(t,0)).type===z.comp_for)continue e;if(t.type===z.comp_if){if(3===i(t)){t=s(t,2);continue t}return e}break}break}Sk.asserts.fail("logic error in countCompFors")}(e,t),l=[];for(o=0;o<a;++o){r(t,z.comp_for);var c=s(t,1),u=b(e,c,Sk.astnodes.Store),h=F(e,s(t,3)),d=1===i(c)?new Sk.astnodes.comprehension(u[0],h,[]):new Sk.astnodes.comprehension(new Sk.astnodes.Tuple(u,Sk.astnodes.Store,t.lineno,t.col_offset),h,[]);if(5===i(t)){var f=n(e,t=s(t,4));for(c=[],u=0;u<f;++u)r(t,z.comp_iter),r(t=s(t,0),z.comp_if),h=F(e,s(t,1)),c[u]=h,3===i(t)&&(t=s(t,2));t.type===z.comp_iter&&(t=s(t,0)),d.ifs=c}l[o]=d}return l}function A(e,t){var n=[];e:{var o=t,a=0;t:for(;;){var l=0;if(a++,r(o,z.comp_for),s(o,0).type==W.T_ASYNC&&(l=1),i(o)!=5+l)break e;o=s(o,4+l);n:for(;;){if(r(o,z.comp_iter),(o=s(o,0)).type===z.comp_for)continue t;if(o.type===z.comp_if){if(3===i(o)){o=s(o,2);continue n}break e}break}break}a=void 0}for(o=0;o<a;o++){var c=0;s(t,0).type==W.T_ASYNC&&(c=1);var u=s(t,1+c),h=b(e,u,Sk.astnodes.Store);if(!h)return null;if(!(l=F(e,s(t,3+c))))return null;var d=h[0];if(h=1==i(u)?new Sk.astnodes.comprehension(d,l,null,c):new Sk.astnodes.comprehension(new Sk.astnodes.Tuple(h,Sk.astnodes.Store,d.lineno,d.col_offset,u.end_lineno,u.end_col_offset),l,null,c),i(t)==5+c){d=[];e:for(l=t=s(t,4+c),c=0;;){if(r(l,z.comp_iter),s(l,0).type==z.comp_for){u=c;break e}if(r(l=s(l,0),z.comp_if),c++,2==i(l)){u=c;break e}l=s(l,2)}if(-1==u)return null;for(c=0;c<u;c++){if(r(t,z.comp_iter),r(t=s(t,0),z.comp_if),!(l=F(e,s(t,1))))return null;d[c]=l,3==i(t)&&(t=s(t,2))}t.type==z.comp_iter&&(t=s(t,0)),h.ifs=d}n[o]=h}return n}function T(e,t,n){Sk.asserts.assert(1<i(t));var r=s(t,0),a=F(e,r);return a.constructor===Sk.astnodes.Starred?(o(e,r,"iterable unpacking cannot be used in comprehension"),null):(e=A(e,s(t,1)),0==n?new Sk.astnodes.GeneratorExp(a,e,t.lineno,t.col_offset,t.end_lineno,t.end_col_offset):1==n?new Sk.astnodes.ListComp(a,e,t.lineno,t.col_offset,t.end_lineno,t.end_col_offset):2==n?new Sk.astnodes.SetComp(a,e,t.lineno,t.col_offset,t.end_lineno,t.end_col_offset):null)}function N(e,t){return Sk.asserts.assert(0<i(t)),t.type===z.testlist_comp?1<i(t)&&Sk.asserts.assert(s(t,1).type!==z.comp_for):Sk.asserts.assert(t.type===z.testlist||t.type===z.testlist_star_expr),1===i(t)?F(e,s(t,0)):new Sk.astnodes.Tuple(p(e,t),Sk.astnodes.Load,t.lineno,t.col_offset)}function I(e,t){if(r(t,z.expr_stmt),1===i(t))return new Sk.astnodes.Expr(N(e,s(t,0)),t.lineno,t.col_offset);if(s(t,1).type===z.augassign){var n=s(t,0),o=N(e,n);switch(u(e,o,Sk.astnodes.Store,n),o.constructor){case Sk.astnodes.Name:var a=o.id;c(e,0,a,t.lineno);break;case Sk.astnodes.Attribute:case Sk.astnodes.Subscript:break;case Sk.astnodes.GeneratorExp:throw new Sk.builtin.SyntaxError("augmented assignment to generator expression not possible",e.c_filename,t.lineno);case Sk.astnodes.Yield:throw new Sk.builtin.SyntaxError("augmented assignment to yield expression not possible",e.c_filename,t.lineno);default:throw new Sk.builtin.SyntaxError("illegal expression for augmented assignment",e.c_filename,t.lineno)}return a=(n=s(t,2)).type===z.testlist?N(e,n):F(e,n),new Sk.astnodes.AugAssign(o,function(e,t){switch(r(t,z.augassign),(t=s(t,0)).value.charAt(0)){case"+":return Sk.astnodes.Add;case"-":return Sk.astnodes.Sub;case"/":return"/"===t.value.charAt(1)?Sk.astnodes.FloorDiv:Sk.astnodes.Div;case"%":return Sk.astnodes.Mod;case"<":return Sk.astnodes.LShift;case">":return Sk.astnodes.RShift;case"&":return Sk.astnodes.BitAnd;case"^":return Sk.astnodes.BitXor;case"|":return Sk.astnodes.BitOr;case"*":return"*"===t.value.charAt(1)?Sk.astnodes.Pow:Sk.astnodes.Mult;case"@":if(Sk.__future__.python3)return Sk.astnodes.MatMult;default:Sk.asserts.fail("invalid augassign")}}(0,s(t,1)),a,t.lineno,t.col_offset)}if(s(t,1).type===z.annassign){if(!Sk.__future__.python3)throw new Sk.builtin.SyntaxError("Annotated assignment is not supported in Python 2",e.c_filename,t.lineno);n=s(t,0);var l=s(t,1),h=1;for(o=n;1==i(o);)o=s(o,0);switch(0<i(o)&&s(o,0).type==W.T_LPAR&&(h=0),(o=N(e,n)).constructor){case Sk.astnodes.Name:c(e,0,a=o.id,t.lineno),u(e,o,Sk.astnodes.Store,n);break;case Sk.astnodes.Attribute:c(e,0,a=o.attr,t.lineno),u(e,o,Sk.astnodes.Store,n);break;case Sk.astnodes.Subscript:u(e,o,Sk.astnodes.Store,n);break;case Sk.astnodes.List:throw new Sk.builtin.SyntaxError("only single target (not list) can be annotated",e.c_filename,t.lineno);case Sk.astnodes.Tuple:throw new Sk.builtin.SyntaxError("only single target (not tuple) can be annotated",e.c_filename,t.lineno);default:throw new Sk.builtin.SyntaxError("illegal target for annotation",e.c_filename,t.lineno)}return o.constructor!=Sk.astnodes.Name&&(h=0),a=F(e,n=s(l,1)),2==i(l)?new Sk.astnodes.AnnAssign(o,a,null,h,t.lineno,t.col_offset):(e=F(e,n=s(l,3)),new Sk.astnodes.AnnAssign(o,a,e,h,t.lineno,t.col_offset))}for(r(s(t,1),W.T_EQUAL),h=[],o=0;o<i(t)-2;o+=2){if((n=s(t,o)).type===z.yield_expr)throw new Sk.builtin.SyntaxError("assignment to yield expression not possible",e.c_filename,t.lineno);u(e,n=N(e,n),Sk.astnodes.Store,s(t,o)),h[o/2]=n}return e=(n=s(t,i(t)-1)).type===z.testlist_star_expr?N(e,n):F(e,n),new Sk.astnodes.Assign(h,e,t.lineno,t.col_offset)}function $(e,t,n,i,s,r,a){Sk.asserts.assert("{"==e.charAt(t));var l=++t;let c,u,h=null,d=0,f=0,g=()=>o(r,a,"f-string: expecting '}'");for(Sk.asserts.assert(t<=n);t<n;t++){let i=e.charAt(t);if("\\"==i&&o(r,a,"f-string expression part cannot include a backslash"),h)i==h&&(3==d?t+2<n&&e.charAt(t+1)==i&&e.charAt(t+2)==i&&(t+=2,h=d=0):d=h=0);else if("'"==i||'"'==i)t+2<n&&e.charAt(t+1)==i&&e.charAt(t+2)==i?(d=3,t+=2):d=1,h=i;else if("["==i||"{"==i||"("==i)f++;else if(0==f||"]"!=i&&"}"!=i&&")"!=i){if("#"==i)o(r,a,"f-string expression part cannot include '#'");else if(!(0!=f||"!"!=i&&":"!=i&&"}"!=i||"!"==i&&t+1<n&&"="==e.charAt(t+1)))break}else f--}return h&&o(r,a,"f-string: unterminated string"),f&&o(r,a,"f-string: mismatched '(', '{', or '['"),l=function(e,t,n,i,s){Sk.asserts.assert(n>=t),Sk.asserts.assert("{"==e.charAt(t-1)),Sk.asserts.assert("}"==e.charAt(n)||"!"==e.charAt(n)||":"==e.charAt(n)),e=e.substring(t,n),/^\s*$/.test(e)&&o(i,s,"f-string: empty expression not allowed");try{let t=Sk.parse("<fstring>","("+e+")");var r=Sk.astFromParse(t.cst,"<fstring>",t.flags)}catch(a){throw a.traceback&&a.traceback[0]&&((r=a.traceback[0]).lineno=(r.lineno||1)-1+s.lineno,r.filename=i.c_filename),a}return Sk.asserts.assert(1==r.body.length&&r.body[0].constructor===Sk.astnodes.Expr),r.body[0].value}(e,l,t,r,a),"!"==e.charAt(t)&&(++t>=n&&g(),u=e.charAt(t),t++,"s"!=u&&"r"!=u&&"a"!=u&&o(r,a,"f-string: invalid conversion character: expected 's', 'r', or 'a'")),t>=n&&g(),":"==e.charAt(t)&&(++t>=n&&g(),[c,t]=M(e,t,n,i,s+1,r,a)),(t>=n||"}"!=e.charAt(t))&&g(),t++,[new Sk.astnodes.FormattedValue(l,u,c,a.lineno,a.col_offset),t]}function M(e,t,n,i,s,r,o){let a=[],l=e=>{if(-1!==e.indexOf("}")){if(/(^|[^}])}(}})*($|[^}])/.test(e))throw new SyntaxError("f-string: single '}' is not allowed",o.lineno,o.col_offset);e=e.replace(/}}/g,"}")}a.push(new Sk.astnodes.Str(new Sk.builtin.str(e),o.lineno,o.col_offset,r.end_lineno,o.end_col_offset))};for(;t<n;){let c=e.indexOf("{",t);if(0!==s){let i=e.indexOf("}",t);-1!==i&&(-1===c?n=i:c>i&&(c=-1,n=i))}if(-1===c){l(e.substring(t,n)),t=n;break}if(c+1<n&&"{"===e.charAt(c+1))l(e.substring(t,c+1)),t=c+2;else{l(e.substring(t,c)),t=c;let[u,h]=$(e,c,n,i,s,r,o);a.push(u),t=h}}return[new Sk.astnodes.JoinedStr(a,o.lineno,o.col_offset),t]}function R(e,t){var n,o;r(t,z.subscript);var a=s(t,0),l=n=o=null;return a.type===W.T_DOT?new Sk.astnodes.Ellipsis:1===i(t)&&a.type===z.test?new Sk.astnodes.Index(F(e,a)):(a.type===z.test&&(o=F(e,a)),a.type===W.T_COLON?1<i(t)&&((a=s(t,1)).type===z.test&&(n=F(e,a))):2<i(t)&&((a=s(t,2)).type===z.test&&(n=F(e,a))),(a=s(t,i(t)-1)).type===z.sliceop&&(1===i(a)?(a=s(a,0),l=new Sk.astnodes.NameConstant(Sk.builtin.none.none$,Sk.astnodes.Load,a.lineno,a.col_offset)):(a=s(a,1)).type===z.test&&(l=F(e,a))),new Sk.astnodes.Slice(o,n,l))}function O(e,t){var n=s(t,0);switch(n.type){case W.T_NAME:var l=n.value;if(4<=l.length&&5>=l.length){if("None"===l)return new Sk.astnodes.NameConstant(Sk.builtin.none.none$,t.lineno,t.col_offset);if("True"===l)return new Sk.astnodes.NameConstant(Sk.builtin.bool.true$,t.lineno,t.col_offset);if("False"===l)return new Sk.astnodes.NameConstant(Sk.builtin.bool.false$,t.lineno,t.col_offset)}return e=d(l),new Sk.astnodes.Name(e,Sk.astnodes.Load,t.lineno,t.col_offset,t.end_lineno,t.end_col_offset);case W.T_STRING:n=[];for(var c=0;c<i(t);++c){for(var u=s(t,c).value,h=e,f=s(t,c),m=u,b=m.charAt(0),_=!1,y=u=!1;;){if("u"!==b&&"U"!==b)if("r"===b||"R"===b)_=!0;else if("b"===b||"B"===b)y=!0;else{if("f"!==b&&"F"!==b)break;u=!0}b=(m=m.substr(1)).charAt(0)}if(Sk.asserts.assert("'"===b||'"'===b&&m.charAt(m.length-1)===b),4<=(m=m.substr(1,m.length-2)).length&&m.charAt(0)===b&&m.charAt(1)===b&&(Sk.asserts.assert(m.charAt(m.length-1)===b&&m.charAt(m.length-2)===b),m=m.substr(2,m.length-4)),_||-1===m.indexOf("\\")){if(y)for(b=0;b<m.length;b++)127<m.charCodeAt(b)&&o(h,f,"bytes can only contain ASCII literal characters");h=[a(m),u,y]}else{var S=(_=m).length,w="";for(m=0;m<S;++m)"\\"===(b=_.charAt(m))?(++m,"n"===(b=_.charAt(m))?w+="\n":"\\"===b?w+="\\":"t"===b?w+="\t":"r"===b?w+="\r":"b"===b?w+="\b":"f"===b?w+="\f":"v"===b?w+="\v":"0"===b?w+="\0":'"'===b?w+='"':"'"===b?w+="'":"\n"!==b&&("x"===b?(m+2>=S&&o(h,f,"Truncated \\xNN escape"),w+=String.fromCharCode(parseInt(_.substr(m+1,2),16)),m+=2):y||"u"!==b?y||"U"!==b?w+="\\"+b:(m+8>=S&&o(h,f,"Truncated \\UXXXXXXXX escape"),w+=String.fromCodePoint(parseInt(_.substr(m+1,8),16)),m+=8):(m+4>=S&&o(h,f,"Truncated \\uXXXX escape"),w+=String.fromCharCode(parseInt(_.substr(m+1,4),16)),m+=4))):y&&127<b.charCodeAt(0)?o(h,f,"bytes can only contain ASCII literal characters"):w+=b;h=[a(h=w),u,y]}if(h=(u=h)[0],f=u[1],u=u[2],0!=c&&l!==u&&o(e,t,"cannot mix bytes and nonbytes literals"),l=u,f){if(!Sk.__future__.python3)throw new Sk.builtin.SyntaxError("invalid string (f-strings are not supported in Python 2)",e.c_filename,s(t,c).lineno);var k=h.$jsstr();[k]=M(k,0,k.length,!1,0,e,s(t,c)),n.push.apply(n,k.values),k=null}else k?k.s=k.s.sq$concat(h):(k=new(l?Sk.astnodes.Bytes:Sk.astnodes.Str)(h,t.lineno,t.col_offset,e.end_lineno,t.end_col_offset),n.push(k))}return t=1===n.length&&n[0].constructor===Sk.astnodes.Str?n[0]:new Sk.astnodes.JoinedStr(n,t.lineno,t.col_offset,e.end_lineno,t.end_col_offset);case W.T_NUMBER:return new Sk.astnodes.Num(function(e,t,n){var i=t.charAt(t.length-1);if(-1!==t.indexOf("_")){if(j.test(t))throw new Sk.builtin.SyntaxError("invalid syntax",e.c_filename,n);if(U.test(t))throw new Sk.builtin.SyntaxError("invalid decimal literal",e.c_filename,n);t=t.replace(q,"")}if("j"===i||"J"===i)return Sk.builtin.complex.complex_subtype_from_string(t);if("l"===i||"L"===i)return Sk.longFromStr(t.substr(0,t.length-1),0);if(-1!==t.indexOf("."))return new Sk.builtin.float_(parseFloat(t));if(n=t,e=!1,"-"===t.charAt(0)&&(n=t.substr(1),e=!0),"0"!==n.charAt(0)||"x"!==n.charAt(1)&&"X"!==n.charAt(1)){if(-1!==t.indexOf("e")||-1!==t.indexOf("E"))return new Sk.builtin.float_(parseFloat(t));"0"!==n.charAt(0)||"b"!==n.charAt(1)&&"B"!==n.charAt(1)?"0"===n.charAt(0)?"0"===n?n=0:("o"!==(n=n.substring(1)).charAt(0)&&"O"!==n.charAt(0)||(n=n.substring(1)),n=parseInt(n,8)):n=parseInt(n,10):(n=n.substring(2),n=parseInt(n,2))}else n=n.substring(2),n=parseInt(n,16);return n>Number.MAX_SAFE_INTEGER&&Math.floor(n)===n&&-1===t.indexOf("e")&&-1===t.indexOf("E")?Sk.longFromStr(t,0):e?new Sk.builtin.int_(-n):new Sk.builtin.int_(n)}(e,n.value,t.lineno),t.lineno,t.col_offset);case W.T_ELLIPSIS:return new Sk.astnodes.Ellipsis(t.lineno,t.col_offset,t.end_lineno,t.end_col_offset);case W.T_LPAR:return(n=s(t,1)).type==W.T_RPAR?new Sk.astnodes.Tuple([],Sk.astnodes.Load,t.lineno,t.col_offset,t.end_lineno,t.end_col_offset):n.type==z.yield_expr?F(e,n):1==i(n)?N(e,n):s(n,1).type==z.comp_for?g(v(e,n),t):g(N(e,n),t);case W.T_LSQB:return(n=s(t,1)).type==W.T_RSQB?new Sk.astnodes.List([],Sk.astnodes.Load,t.lineno,t.col_offset,t.end_lineno,t.end_col_offset):(r(n,z.testlist_comp),1==i(n)||s(n,1).type==W.T_COMMA?(e=p(e,n))?new Sk.astnodes.List(e,Sk.astnodes.Load,t.lineno,t.col_offset,t.end_lineno,t.end_col_offset):null:(l=n,Sk.asserts.assert(l.type==z.testlist_comp),g(e=T(e,l,1),t)));case W.T_LBRACE:if((n=s(t,1)).type==W.T_RBRACE)return new Sk.astnodes.Dict(null,null,t.lineno,t.col_offset,t.end_lineno,t.end_col_offset);if(l=s(n,0).type==W.T_DOUBLESTAR,1==i(n)||1<i(n)&&s(n,1).type==W.T_COMMA){for(l=n,c=[],Sk.asserts.assert(l.type===z.dictorsetmaker),n=0;n<i(l);n+=2)k=F(e,s(l,n)),c[n/2]=k;e=new Sk.astnodes.Set(c,l.lineno,l.col_offset)}else if(1<i(n)&&s(n,1).type==z.comp_for)l=n,Sk.asserts.assert(l.type===z.dictorsetmaker),Sk.asserts.assert(1<i(l)),n=F(e,s(l,0)),e=D(e,s(l,1)),e=new Sk.astnodes.SetComp(n,e,l.lineno,l.col_offset);else if(i(n)>3-l&&s(n,3-l).type==z.comp_for){if(l)return o(e,t,"dict unpacking cannot be used in dict comprehension"),null;l=n,Sk.asserts.assert(3<i(l)),r(s(l,1),W.T_COLON),n=F(e,s(l,0)),c=F(e,s(l,2)),e=D(e,s(l,3)),e=new Sk.astnodes.DictComp(n,c,e,l.lineno,l.col_offset)}else{for(l=n,c=[],k=[],u=n=0;u<i(l);u++)h=e,s(f=l,y=u).type==W.T_DOUBLESTAR?(Sk.asserts.assert(2<=i(f)-y),h={key:null,value:u=F(h,s(f,y+1)),i:y+2}):(Sk.asserts.assert(3<=i(f)-y),(u=F(h,s(f,y)))?(m=u,r(s(f,y+1),W.T_COLON),h=!!(u=F(h,s(f,y+2)))&&{key:m,value:u,i:y+3}):h=0),u=h.i,c[n]=h.key,k[n]=h.value,n++;e=new Sk.astnodes.Dict(c,k,l.lineno,l.col_offset,l.end_lineno,l.end_col_offset)}return g(e,t);default:return Sk.asserts.fail("unhandled atom "+n.type),null}}function P(e,t){var n,o=0;r(t,z.atom_expr);var a=i(t);s(t,0).type===W.T_AWAIT&&(o=1,Sk.asserts.assert(1<a));var l=O(e,s(t,o));if(!l)return null;if(1===a)return l;if(o&&2===a)return new Sk.astnodes.Await(l,t.lineno,t.col_offset);for(n=o+1;n<a;n++){var c=s(t,n);if(c.type!==z.trailer)break;if(!(c=w(e,c,l)))return null;c.lineno=l.lineno,c.col_offset=l.col_offset,l=c}return o?new Sk.astnodes.Await(l,t.line,t.col_offset):l}function F(e,t){e:for(;;){switch(t.type){case z.test:case z.test_nocond:if(s(t,0).type===z.lambdef||s(t,0).type===z.lambdef_nocond){var n=s(t,0);return 3===i(n)?(t=new Sk.astnodes.arguments_([],null,null,[]),e=F(e,s(n,2))):(t=x(e,s(n,1)),e=F(e,s(n,3))),new Sk.astnodes.Lambda(t,e,n.lineno,n.col_offset)}if(1<i(t))return Sk.asserts.assert(5===i(t)),new Sk.astnodes.IfExp(F(e,s(t,2)),F(e,s(t,0)),F(e,s(t,4)),t.lineno,t.col_offset);case z.or_test:case z.and_test:if(1===i(t)){t=s(t,0);continue e}var o=[];for(n=0;n<i(t);n+=2)o[n/2]=F(e,s(t,n));return"and"===s(t,1).value?new Sk.astnodes.BoolOp(Sk.astnodes.And,o,t.lineno,t.col_offset):(Sk.asserts.assert("or"===s(t,1).value),new Sk.astnodes.BoolOp(Sk.astnodes.Or,o,t.lineno,t.col_offset));case z.not_test:if(1===i(t)){t=s(t,0);continue e}return new Sk.astnodes.UnaryOp(Sk.astnodes.Not,F(e,s(t,1)),t.lineno,t.col_offset);case z.comparison:if(1===i(t)){t=s(t,0);continue e}var a=[];for(o=[],n=1;n<i(t);n+=2)a[(n-1)/2]=f(0,s(t,n)),o[(n-1)/2]=F(e,s(t,n+1));return new Sk.astnodes.Compare(F(e,s(t,0)),a,o,t.lineno,t.col_offset);case z.star_expr:return r(t,z.star_expr),new Sk.astnodes.Starred(F(e,s(t,1)),Sk.astnodes.Load,t.lineno,t.col_offset);case z.expr:case z.xor_expr:case z.and_expr:case z.shift_expr:case z.arith_expr:case z.term:if(1===i(t)){t=s(t,0);continue e}var l=t,c=new Sk.astnodes.BinOp(F(e,s(l,0)),h(s(l,1)),F(e,s(l,2)),l.lineno,l.col_offset),u=(i(l)-1)/2;for(t=1;t<u;++t)o=h(n=s(l,2*t+1)),a=F(e,s(l,2*t+2)),c=new Sk.astnodes.BinOp(c,o,a,n.lineno,n.col_offset);return c;case z.yield_expr:return o=!1,a=null,1<i(t)&&(n=s(t,1)),n&&(a=s(n,i(n)-1),2==i(n)?(o=!0,a=F(e,a)):a=N(e,a)),o?new Sk.astnodes.YieldFrom(a,t.lineno,t.col_offset):new Sk.astnodes.Yield(a,t.lineno,t.col_offset);case z.factor:if(1===i(t)){t=s(t,0);continue e}return y(e,t);case z.power:return r(n=t,z.power),t=P(e,s(n,0)),1!==i(n)&&s(n,i(n)-1).type===z.factor&&(e=F(e,s(n,i(n)-1)),t=new Sk.astnodes.BinOp(t,Sk.astnodes.Pow,e,n.lineno,n.col_offset)),t;default:Sk.asserts.fail("unhandled expr","n.type: %d",t.type)}break}}function B(e,t){if(t.type===z.stmt&&(Sk.asserts.assert(1===i(t)),t=s(t,0)),t.type===z.simple_stmt&&(Sk.asserts.assert(1===l(t)),t=s(t,0)),t.type===z.small_stmt)switch(t=s(t,0),t.type){case z.expr_stmt:return I(e,t);case z.del_stmt:var n=t;return r(n,z.del_stmt),new Sk.astnodes.Delete(b(e,s(n,1),Sk.astnodes.Del),n.lineno,n.col_offset);case z.pass_stmt:return new Sk.astnodes.Pass(t.lineno,t.col_offset);case z.flow_stmt:return function(e,t){r(t,z.flow_stmt);var n=s(t,0);switch(n.type){case z.break_stmt:return new Sk.astnodes.Break(t.lineno,t.col_offset,t.end_lineno,t.end_col_offset);case z.continue_stmt:return new Sk.astnodes.Continue(t.lineno,t.col_offset,t.end_lineno,t.end_col_offset);case z.yield_stmt:return(e=F(e,s(n,0)))?new Sk.astnodes.Expr(e,t.lineno,t.col_offset,t.end_lineno,t.end_col_offset):null;case z.return_stmt:if(1==i(n))return new Sk.astnodes.Return(null,t.lineno,t.col_offset,t.end_lineno,t.end_col_offset);var a=N(e,s(n,1));return a?new Sk.astnodes.Return(a,t.lineno,t.col_offset,t.end_lineno,t.end_col_offset):null;case z.raise_stmt:if(1==i(n))return new Sk.astnodes.Raise(null,null,null,null,t.lineno,t.col_offset,t.end_lineno,t.end_col_offset);if(2<=i(n)){var l=null;a=F(e,s(n,1));var c=null,u=null;return 4==i(n)&&"from"==s(n,2).value?(Sk.__future__.python3||o(e,s(n,2),"raise ... from ... is not available in Python 2"),l=F(e,s(n,3))):4<=i(n)&&","==s(n,2).value&&(Sk.__future__.python3&&o(e,t,"Old raise syntax is not available in Python 3"),c=F(e,s(n,3)),6==i(n)&&(u=F(e,s(n,5)))),new Sk.astnodes.Raise(a,l,c,u,t.lineno,t.col_offset,t.end_lineno,t.end_col_offset)}default:return Sk.asserts.fail("unexpected flow_stmt: ",n.type),null}}(e,t);case z.import_stmt:var c,h=t;r(h,z.import_stmt);var d=h.lineno;if(t=h.col_offset,(h=s(h,0)).type===z.import_name){r(h=s(h,1),z.dotted_as_names);var f=[];for(c=0;c<i(h);c+=2)f[c/2]=_(e,s(h,c));e=new Sk.astnodes.Import(f,d,t)}else{if(h.type!==z.import_from)throw new Sk.builtin.SyntaxError("unknown import statement",e.c_filename,h.lineno);var g=null;for(n=0,f=1;f<i(h);++f){if(s(h,f).type===z.dotted_name){g=_(e,s(h,f)),f++;break}if(s(h,f).type===W.T_DOT)n++;else{if(s(h,f).type!==W.T_ELLIPSIS)break;n+=3}}switch(s(h,++f).type){case W.T_STAR:h=s(h,f);break;case W.T_LPAR:i(h=s(h,f+1));break;case z.import_as_names:if(0===(f=i(h=s(h,f)))%2)throw new Sk.builtin.SyntaxError("trailing comma not allowed without surrounding parentheses",e.c_filename,h.lineno);break;default:throw new Sk.builtin.SyntaxError("Unexpected node-type in from-import",e.c_filename,h.lineno)}if(f=[],h.type===W.T_STAR)f[0]=_(e,h);else for(c=0;c<i(h);c+=2)f[c/2]=_(e,s(h,c));e=g?g.name.v:"",e=new Sk.astnodes.ImportFrom(a(e),f,n,d,t)}return e;case z.global_stmt:for(e=t,t=[],r(e,z.global_stmt),n=1;n<i(e);n+=2)t[(n-1)/2]=a(s(e,n).value);return new Sk.astnodes.Global(t,e.lineno,e.col_offset);case z.nonlocal_stmt:o(e,t,"Not implemented: nonlocal");break;case z.assert_stmt:return r(n=t,z.assert_stmt),2===i(n)?e=new Sk.astnodes.Assert(F(e,s(n,1)),null,n.lineno,n.col_offset):4===i(n)?e=new Sk.astnodes.Assert(F(e,s(n,1)),F(e,s(n,3)),n.lineno,n.col_offset):(Sk.asserts.fail("improper number of parts to assert stmt"),e=void 0),e;case z.print_stmt:for(n=t,Sk.__future__.print_function&&o(e,n,"Missing parentheses in call to 'print'"),h=1,d=null,r(n,z.print_stmt),2<=i(n)&&s(n,1).type===W.T_RIGHTSHIFT&&(d=F(e,s(n,2)),h=4),t=[],g=0;h<i(n);h+=2,++g)t[g]=F(e,s(n,h));return e=s(n,i(n)-1).type!==W.T_COMMA,new Sk.astnodes.Print(d,t,e,n.lineno,n.col_offset);case z.debugger_stmt:return new Sk.astnodes.Debugger(t.lineno,t.col_offset);default:Sk.asserts.fail("unhandled small_stmt")}else switch(n=s(t,0),r(t,z.compound_stmt),n.type){case z.if_stmt:if(r(n,z.if_stmt),4===i(n))e=new Sk.astnodes.If(F(e,s(n,1)),m(e,s(n,3)),[],n.lineno,n.col_offset);else if("s"===(t=s(n,4).value.charAt(2)))e=new Sk.astnodes.If(F(e,s(n,1)),m(e,s(n,3)),m(e,s(n,6)),n.lineno,n.col_offset);else if("i"===t){for(h=!1,t=[],s(n,(d=i(n)-4)+1).type===W.T_NAME&&"s"===s(n,d+1).value.charAt(2)&&(h=!0,d-=3),d/=4,h&&(t=[new Sk.astnodes.If(F(e,s(n,i(n)-6)),m(e,s(n,i(n)-4)),m(e,s(n,i(n)-1)),s(n,i(n)-6).lineno,s(n,i(n)-6).col_offset)],d--),g=0;g<d;++g)h=5+4*(d-g-1),t=[new Sk.astnodes.If(F(e,s(n,h)),m(e,s(n,h+2)),t,s(n,h).lineno,s(n,h).col_offset)];e=new Sk.astnodes.If(F(e,s(n,1)),m(e,s(n,3)),t,n.lineno,n.col_offset)}else Sk.asserts.fail("unexpected token in 'if' statement"),e=void 0;return e;case z.while_stmt:return r(n,z.while_stmt),4===i(n)?e=new Sk.astnodes.While(F(e,s(n,1)),m(e,s(n,3)),[],n.lineno,n.col_offset):7===i(n)?e=new Sk.astnodes.While(F(e,s(n,1)),m(e,s(n,3)),m(e,s(n,6)),n.lineno,n.col_offset):(Sk.asserts.fail("wrong number of tokens for 'while' stmt"),e=void 0),e;case z.for_stmt:return t=[],r(n,z.for_stmt),9===i(n)&&(t=m(e,s(n,8))),d=b(e,h=s(n,1),Sk.astnodes.Store),d=1===i(h)?d[0]:new Sk.astnodes.Tuple(d,Sk.astnodes.Store,n.lineno,n.col_offset),new Sk.astnodes.For(d,N(e,s(n,3)),m(e,s(n,5)),t,n.lineno,n.col_offset);case z.try_stmt:if(t=[],d=((c=i(n))-3)/3,g=[],f=null,r(n,z.try_stmt),h=m(e,s(n,2)),s(n,c-3).type===W.T_NAME)"finally"===s(n,c-3).value?(9<=c&&s(n,c-6).type===W.T_NAME&&(g=m(e,s(n,c-4)),d--),f=m(e,s(n,c-1))):g=m(e,s(n,c-1)),d--;else if(s(n,c-3).type!==z.except_clause)throw new Sk.builtin.SyntaxError("malformed 'try' statement",e.c_filename,n.lineno);if(0<d)for(c=0;c<d;c++){var p=c,v=e,y=s(n,3+3*c),w=s(n,5+3*c);if(r(y,z.except_clause),r(w,z.suite),1===i(y))var k=new Sk.astnodes.ExceptHandler(null,null,m(v,w),y.lineno,y.col_offset);else 2===i(y)?k=new Sk.astnodes.ExceptHandler(F(v,s(y,1)),null,m(v,w),y.lineno,y.col_offset):4===i(y)?(Sk.__future__.python3&&","==s(y,2).value&&o(v,y,"Old-style 'except' clauses are not supported in Python 3"),F(v,s(y,1)),u(v,k=F(v,s(y,3)),Sk.astnodes.Store,s(y,3)),k=new Sk.astnodes.ExceptHandler(F(v,s(y,1)),k,m(v,w),y.lineno,y.col_offset)):(Sk.asserts.fail("wrong number of children for except clause"),k=void 0);t[p]=k}return Sk.asserts.assert(!!f||0!=t.length),new Sk.astnodes.Try(h,t,g,f,n.lineno,n.col_offset);case z.with_stmt:for(t=[],r(n,z.with_stmt),d=1;d<i(n)-2;d+=2)h=void 0,f=e,r(c=s(n,d),z.with_item),g=F(f,s(c,0)),3==i(c)&&u(f,h=F(f,s(c,2)),Sk.astnodes.Store,c),h=new Sk.astnodes.withitem(g,h),t[(d-1)/2]=h;return e=m(e,s(n,i(n)-1)),e=new Sk.astnodes.With(t,e,n.lineno,n.col_offset);case z.funcdef:return E(e,n,[],!1);case z.classdef:return L(e,n,[]);case z.decorated:for(d=null,r(n,z.decorated),r(h=s(n,0),z.decorators),t=[],g=0;g<i(h);++g){f=t,c=g,p=e,r(k=s(h,g),z.decorator),r(s(k,0),W.T_AT),r(s(k,i(k)-1),W.T_NEWLINE);var C,x=s(k,1);r(x,z.dotted_name),v=x.lineno,y=x.col_offset,w=a(s(x,0).value);var D=new Sk.astnodes.Name(w,Sk.astnodes.Load,v,y);for(C=2;C<i(x);C+=2)w=a(s(x,C).value),D=new Sk.astnodes.Attribute(D,w,Sk.astnodes.Load,v,y);v=D,p=3===i(k)?v:5===i(k)?new Sk.astnodes.Call(v,[],[],null,null,k.lineno,k.col_offset):S(p,s(k,3),v),f[c]=p}return Sk.asserts.assert(s(n,1).type==z.funcdef||s(n,1).type==z.async_funcdef||s(n,1).type==z.classdef),s(n,1).type==z.funcdef?d=E(e,d=s(n,1),t,!1):s(n,1).type==z.classdef?d=L(e,s(n,1),t):s(n,1).type==z.async_funcdef&&(r(d=s(n,1),z.async_funcdef),r(s(d,0),W.T_NAME),Sk.asserts.assert(("async"===s(d,0)).value),r(s(d,1),z.funcdef),d=E(e,d,t,!0)),d&&(d.lineno=n.lineno,d.col_offset=n.col_offset),d;case z.async_stmt:o(e,n,"Not implemented: async");break;default:Sk.asserts.assert("unhandled compound_stmt")}}var z=Sk.ParseTables.sym,W=Sk.token.tokens,H={Slice_kind:1,ExtSlice_kind:2,Index_kind:3},V={};V[W.T_VBAR]=Sk.astnodes.BitOr,V[W.T_CIRCUMFLEX]=Sk.astnodes.BitXor,V[W.T_AMPER]=Sk.astnodes.BitAnd,V[W.T_LEFTSHIFT]=Sk.astnodes.LShift,V[W.T_RIGHTSHIFT]=Sk.astnodes.RShift,V[W.T_PLUS]=Sk.astnodes.Add,V[W.T_MINUS]=Sk.astnodes.Sub,V[W.T_STAR]=Sk.astnodes.Mult,V[W.T_SLASH]=Sk.astnodes.Div,V[W.T_DOUBLESLASH]=Sk.astnodes.FloorDiv,V[W.T_PERCENT]=Sk.astnodes.Mod,Sk.setupOperators=function(e){e?V[W.T_AT]=Sk.astnodes.MatMult:V[W.T_AT]&&delete V[W.T_AT]},Sk.exportSymbol("Sk.setupOperators",Sk.setupOperators);const j=/_[eE]|[eE]_|\._|j_/,U=/_\.|[+-]_|^0_\D|_j/,q=/_(?=[^_])/g;Sk.astFromParse=function(e,t,o){var a,c=new n("utf-8",t,o),u=[],h=0;switch(e.type){case z.file_input:for(a=0;a<i(e)-1;++a){var d=s(e,a);if(e.type!==W.T_NEWLINE)if(r(d,z.stmt),1===(o=l(d)))u[h++]=B(c,d);else for(r(d=s(d,0),z.simple_stmt),t=0;t<o;++t)u[h++]=B(c,s(d,2*t))}return new Sk.astnodes.Module(u);case z.eval_input:Sk.asserts.fail("todo;");case z.single_input:Sk.asserts.fail("todo;");default:Sk.asserts.fail("todo;")}},Sk.astDump=function(e){var t=function(e){var t,n="";for(t=0;t<e;++t)n+=" ";return n},n=function(e,i){var s;if(null===e)return i+"None";if(e.prototype&&void 0!==e.prototype._astname&&e.prototype._isenum)return i+e.prototype._astname+"()";if(void 0!==e._astname){var r=t(e._astname.length+1),o=[];for(s=0;s<e._fields.length;s+=2){var a=e._fields[s],l=e._fields[s+1](e),c=t(a.length+1);o.push([a,n(l,i+r+c)])}for(l=[],s=0;s<o.length;++s)c=o[s],l.push(c[0]+"="+c[1].replace(/^\s+/,""));return s=l.join(",\n"+i+r),i+e._astname+"("+s+")"}if(Sk.isArrayLike(e)){for(r=[],s=0;s<e.length;++s)o=e[s],r.push(n(o,i+" "));return i+"["+(e=r.join(",\n")).replace(/^\s+/,"")+"]"}return i+(e=!0===e?"True":!1===e?"False":e instanceof Sk.builtin.lng?e.tp$str().v:e instanceof Sk.builtin.str?e.$r().v:""+e)};return n(e,"")},Sk.exportSymbol("Sk.astFromParse",Sk.astFromParse),Sk.exportSymbol("Sk.astDump",Sk.astDump)},function(e,t){function n(e,t,n){this.__name=e,this.__flags=t,this.__scope=t>>11&7,this.__namespaces=n||[]}function i(e,t,n,i,s){this.symFlags={},this.name=t,this.varnames=[],this.children=[],this.blockType=n,this.returnsValue=this.varkeywords=this.varargs=this.generator=this.childHasFree=this.hasFree=this.isNested=!1,this.lineno=s,this.table=e,e.cur&&(e.cur.nested||"function"===e.cur.blockType)&&(this.isNested=!0),i.scopeId=a++,e.stss[i.scopeId]=this,this.symbols={}}function s(e){this.filename=e,this.top=this.cur=null,this.stack=[],this.curClass=this.global=null,this.tmpname=0,this.stss={}}function r(e,t){var n;for(n=0;n<t.length;n++)e(t[n])}function o(e,t){for(var n in t)e[n]=t[n]}Sk.exportSymbol("Sk.SYMTAB_CONSTS",{DEF_GLOBAL:1,DEF_LOCAL:2,DEF_PARAM:4,USE:8,DEF_STAR:16,DEF_DOUBLESTAR:32,DEF_INTUPLE:64,DEF_FREE:128,DEF_FREE_GLOBAL:256,DEF_FREE_CLASS:512,DEF_IMPORT:1024,DEF_BOUND:1030,SCOPE_OFF:11,SCOPE_MASK:7,LOCAL:1,GLOBAL_EXPLICIT:2,GLOBAL_IMPLICIT:3,FREE:4,CELL:5,OPT_IMPORT_STAR:1,OPT_EXEC:2,OPT_BARE_EXEC:4,OPT_TOPLEVEL:8,GENERATOR:2,GENERATOR_EXPRESSION:2,ModuleBlock:"module",FunctionBlock:"function",ClassBlock:"class"}),n.prototype.get_name=function(){return this.__name},n.prototype.is_referenced=function(){return!!(8&this.__flags)},n.prototype.is_parameter=function(){return!!(4&this.__flags)},n.prototype.is_global=function(){return 3===this.__scope||2==this.__scope},n.prototype.is_declared_global=function(){return 2==this.__scope},n.prototype.is_local=function(){return!!(1030&this.__flags)},n.prototype.is_free=function(){return 4==this.__scope},n.prototype.is_imported=function(){return!!(1024&this.__flags)},n.prototype.is_assigned=function(){return!!(2&this.__flags)},n.prototype.is_namespace=function(){return this.__namespaces&&0<this.__namespaces.length},n.prototype.get_namespaces=function(){return this.__namespaces};var a=0;i.prototype.get_type=function(){return this.blockType},i.prototype.get_name=function(){return this.name},i.prototype.get_lineno=function(){return this.lineno},i.prototype.is_nested=function(){return this.isNested},i.prototype.has_children=function(){return 0<this.children.length},i.prototype.get_identifiers=function(){return this._identsMatching((function(){return!0}))},i.prototype.lookup=function(e){if(this.symbols.hasOwnProperty(e))e=this.symbols[e];else{var t=this.symFlags[e],i=this.__check_children(e);e=this.symbols[e]=new n(e,t,i)}return e},i.prototype.__check_children=function(e){var t,n=[];for(t=0;t<this.children.length;++t){var i=this.children[t];i.name===e&&n.push(i)}return n},i.prototype._identsMatching=function(e){var t,n=[];for(t in this.symFlags)this.symFlags.hasOwnProperty(t)&&e(this.symFlags[t])&&n.push(t);return n.sort(),n},i.prototype.get_parameters=function(){return Sk.asserts.assert("function"==this.get_type(),"get_parameters only valid for function scopes"),this._funcParams||(this._funcParams=this._identsMatching((function(e){return 4&e}))),this._funcParams},i.prototype.get_locals=function(){return Sk.asserts.assert("function"==this.get_type(),"get_locals only valid for function scopes"),this._funcLocals||(this._funcLocals=this._identsMatching((function(e){return 1030&e}))),this._funcLocals},i.prototype.get_globals=function(){return Sk.asserts.assert("function"==this.get_type(),"get_globals only valid for function scopes"),this._funcGlobals||(this._funcGlobals=this._identsMatching((function(e){return 3==(e=e>>11&7)||2==e}))),this._funcGlobals},i.prototype.get_frees=function(){return Sk.asserts.assert("function"==this.get_type(),"get_frees only valid for function scopes"),this._funcFrees||(this._funcFrees=this._identsMatching((function(e){return 4==(e>>11&7)}))),this._funcFrees},i.prototype.get_methods=function(){var e;if(Sk.asserts.assert("class"==this.get_type(),"get_methods only valid for class scopes"),!this._classMethods){var t=[];for(e=0;e<this.children.length;++e)t.push(this.children[e].name);t.sort(),this._classMethods=t}return this._classMethods},i.prototype.getScope=function(e){return void 0===(e=this.symFlags[e])?0:e>>11&7},s.prototype.getStsForAst=function(e){return Sk.asserts.assert(void 0!==e.scopeId,"ast wasn't added to st?"),e=this.stss[e.scopeId],Sk.asserts.assert(void 0!==e,"unknown sym tab entry"),e},s.prototype.SEQStmt=function(e){var t,n;if(null!==e){Sk.asserts.assert(Sk.isArrayLike(e),"SEQ: nodes isn't array? got "+e.toString());var i=e.length;for(n=0;n<i;++n)(t=e[n])&&this.visitStmt(t)}},s.prototype.SEQExpr=function(e){var t,n;if(null!==e){Sk.asserts.assert(Sk.isArrayLike(e),"SEQ: nodes isn't array? got "+e.toString());var i=e.length;for(n=0;n<i;++n)(t=e[n])&&this.visitExpr(t)}},s.prototype.enterBlock=function(e,t,n,s){e=Sk.fixReserved(e);var r=null;this.cur&&(r=this.cur,this.stack.push(this.cur)),this.cur=new i(this,e,t,n,s),"top"===e&&(this.global=this.cur.symFlags),r&&r.children.push(this.cur)},s.prototype.exitBlock=function(){this.cur=null,0<this.stack.length&&(this.cur=this.stack.pop())},s.prototype.visitParams=function(e,t){var n;for(n=0;n<e.length;++n){if((t=e[n]).constructor!==Sk.astnodes.arg)throw new Sk.builtin.SyntaxError("invalid expression in parameter list",this.filename);this.addDef(t.arg,4,t.lineno)}},s.prototype.visitArguments=function(e,t){e.args&&this.visitParams(e.args,!0),e.kwonlyargs&&this.visitParams(e.kwonlyargs,!0),e.vararg&&(this.addDef(e.vararg.arg,4,t),this.cur.varargs=!0),e.kwarg&&(this.addDef(e.kwarg.arg,4,t),this.cur.varkeywords=!0)},s.prototype.newTmpname=function(e){this.addDef(new Sk.builtin.str("_["+ ++this.tmpname+"]"),2,e)},s.prototype.addDef=function(e,t,n){var i=Sk.mangleName(this.curClass,e).v;i=Sk.fixReserved(i);var s=this.cur.symFlags[i];if(void 0!==s){if(4&t&&4&s)throw new Sk.builtin.SyntaxError("duplicate argument '"+e.v+"' in function definition",this.filename,n);s|=t}else s=t;this.cur.symFlags[i]=s,4&t?this.cur.varnames.push(i):1&t&&(s=t,void 0!==(e=this.global[i])&&(s|=e),this.global[i]=s)},s.prototype.visitSlice=function(e){var t;switch(e.constructor){case Sk.astnodes.Slice:e.lower&&this.visitExpr(e.lower),e.upper&&this.visitExpr(e.upper),e.step&&this.visitExpr(e.step);break;case Sk.astnodes.ExtSlice:for(t=0;t<e.dims.length;++t)this.visitSlice(e.dims[t]);break;case Sk.astnodes.Index:this.visitExpr(e.value)}},s.prototype.visitStmt=function(e){var t;switch(Sk.asserts.assert(void 0!==e,"visitStmt called with undefined"),e.constructor){case Sk.astnodes.FunctionDef:this.addDef(e.name,2,e.lineno),e.args.defaults&&this.SEQExpr(e.args.defaults),e.decorator_list&&this.SEQExpr(e.decorator_list),this.enterBlock(e.name.v,"function",e,e.lineno),this.visitArguments(e.args,e.lineno),this.SEQStmt(e.body),this.exitBlock();break;case Sk.astnodes.ClassDef:this.addDef(e.name,2,e.lineno),this.SEQExpr(e.bases),e.decorator_list&&this.SEQExpr(e.decorator_list),this.enterBlock(e.name.v,"class",e,e.lineno),this.curClass=e.name,this.SEQStmt(e.body),this.exitBlock();break;case Sk.astnodes.Return:if(e.value&&(this.visitExpr(e.value),this.cur.returnsValue=!0,this.cur.generator))throw new Sk.builtin.SyntaxError("'return' with argument inside generator",this.filename);break;case Sk.astnodes.Delete:this.SEQExpr(e.targets);break;case Sk.astnodes.Assign:this.SEQExpr(e.targets),this.visitExpr(e.value);break;case Sk.astnodes.AnnAssign:if(e.target.constructor==Sk.astnodes.Name){var n=e.target,i=Sk.mangleName(this.curClass,n.id).v;if(i=Sk.fixReserved(i),2049&(n=this.cur.symFlags[i])&&this.global!=this.cur.symFlags&&e.simple)throw new Sk.builtin.SyntaxError("annotated name '"+i+"' can't be global",this.filename,e.lineno);e.simple?this.addDef(new Sk.builtin.str(i),4098,e.lineno):e.value&&this.addDef(new Sk.builtin.str(i),2,e.lineno)}else this.visitExpr(e.target);this.visitExpr(e.annotation),e.value&&this.visitExpr(e.value);break;case Sk.astnodes.AugAssign:this.visitExpr(e.target),this.visitExpr(e.value);break;case Sk.astnodes.Print:e.dest&&this.visitExpr(e.dest),this.SEQExpr(e.values);break;case Sk.astnodes.For:this.visitExpr(e.target),this.visitExpr(e.iter),this.SEQStmt(e.body),e.orelse&&this.SEQStmt(e.orelse);break;case Sk.astnodes.While:case Sk.astnodes.If:this.visitExpr(e.test),this.SEQStmt(e.body),e.orelse&&this.SEQStmt(e.orelse);break;case Sk.astnodes.Raise:e.exc&&(this.visitExpr(e.exc),e.inst&&(this.visitExpr(e.inst),e.tback&&this.visitExpr(e.tback)),e.cause&&this.visitExpr(e.cause));break;case Sk.astnodes.Assert:this.visitExpr(e.test),e.msg&&this.visitExpr(e.msg);break;case Sk.astnodes.Import:case Sk.astnodes.ImportFrom:this.visitAlias(e.names,e.lineno);break;case Sk.astnodes.Global:var s=e.names.length;for(t=0;t<s;++t){if(i=Sk.mangleName(this.curClass,e.names[t]).v,i=Sk.fixReserved(i),10&(n=this.cur.symFlags[i])){if(2&n)throw new Sk.builtin.SyntaxError("name '"+i+"' is assigned to before global declaration",this.filename,e.lineno);throw new Sk.builtin.SyntaxError("name '"+i+"' is used prior to global declaration",this.filename,e.lineno)}this.addDef(new Sk.builtin.str(i),1,e.lineno)}break;case Sk.astnodes.Expr:this.visitExpr(e.value);break;case Sk.astnodes.Pass:case Sk.astnodes.Break:case Sk.astnodes.Continue:case Sk.astnodes.Debugger:break;case Sk.astnodes.With:r(this.visit_withitem.bind(this),e.items),r(this.visitStmt.bind(this),e.body);break;case Sk.astnodes.Try:this.SEQStmt(e.body),this.visitExcepthandlers(e.handlers),this.SEQStmt(e.orelse),this.SEQStmt(e.finalbody);break;default:Sk.asserts.fail("Unhandled type "+e.constructor.name+" in visitStmt")}},s.prototype.visit_withitem=function(e){this.visitExpr(e.context_expr),e.optional_vars&&this.visitExpr(e.optional_vars)},s.prototype.visitExpr=function(e){switch(Sk.asserts.assert(void 0!==e,"visitExpr called with undefined"),e.constructor){case Sk.astnodes.BoolOp:this.SEQExpr(e.values);break;case Sk.astnodes.BinOp:this.visitExpr(e.left),this.visitExpr(e.right);break;case Sk.astnodes.UnaryOp:this.visitExpr(e.operand);break;case Sk.astnodes.Lambda:this.addDef(new Sk.builtin.str("lambda"),2,e.lineno),e.args.defaults&&this.SEQExpr(e.args.defaults),this.enterBlock("lambda","function",e,e.lineno),this.visitArguments(e.args,e.lineno),this.visitExpr(e.body),this.exitBlock();break;case Sk.astnodes.IfExp:this.visitExpr(e.test),this.visitExpr(e.body),this.visitExpr(e.orelse);break;case Sk.astnodes.Dict:this.SEQExpr(e.keys),this.SEQExpr(e.values);break;case Sk.astnodes.DictComp:case Sk.astnodes.SetComp:this.visitComprehension(e.generators,0);break;case Sk.astnodes.ListComp:this.newTmpname(e.lineno),this.visitExpr(e.elt),this.visitComprehension(e.generators,0);break;case Sk.astnodes.GeneratorExp:this.visitGenexp(e);break;case Sk.astnodes.Yield:if(e.value&&this.visitExpr(e.value),this.cur.generator=!0,this.cur.returnsValue)throw new Sk.builtin.SyntaxError("'return' with argument inside generator",this.filename);break;case Sk.astnodes.Compare:this.visitExpr(e.left),this.SEQExpr(e.comparators);break;case Sk.astnodes.Call:if(this.visitExpr(e.func),e.args)for(let t of e.args)t.constructor===Sk.astnodes.Starred?this.visitExpr(t.value):this.visitExpr(t);if(e.keywords)for(let t of e.keywords)this.visitExpr(t.value);break;case Sk.astnodes.Num:case Sk.astnodes.Str:case Sk.astnodes.Bytes:break;case Sk.astnodes.JoinedStr:for(let t of e.values)this.visitExpr(t);break;case Sk.astnodes.FormattedValue:this.visitExpr(e.value),e.format_spec&&this.visitExpr(e.format_spec);break;case Sk.astnodes.Attribute:this.visitExpr(e.value);break;case Sk.astnodes.Subscript:this.visitExpr(e.value),this.visitSlice(e.slice);break;case Sk.astnodes.Name:this.addDef(e.id,e.ctx===Sk.astnodes.Load?8:2,e.lineno);break;case Sk.astnodes.NameConstant:break;case Sk.astnodes.List:case Sk.astnodes.Tuple:case Sk.astnodes.Set:this.SEQExpr(e.elts);break;case Sk.astnodes.Starred:this.visitExpr(e.value);break;default:Sk.asserts.fail("Unhandled type "+e.constructor.name+" in visitExpr")}},s.prototype.visitComprehension=function(e,t){var n,i=e.length;for(n=t;n<i;++n)t=e[n],this.visitExpr(t.target),this.visitExpr(t.iter),this.SEQExpr(t.ifs)},s.prototype.visitAlias=function(e,t){var n,i;for(i=0;i<e.length;++i){var s=e[i],r=n=null===s.asname?s.name.v:s.asname.v;if(-1!==(s=n.indexOf("."))&&(r=n.substr(0,s)),"*"!==n)this.addDef(new Sk.builtin.str(r),1024,t);else if("module"!==this.cur.blockType)throw new Sk.builtin.SyntaxError("import * only allowed at module level",this.filename)}},s.prototype.visitGenexp=function(e){var t=e.generators[0];this.visitExpr(t.iter),this.enterBlock("genexpr","function",e,e.lineno),this.cur.generator=!0,this.addDef(new Sk.builtin.str(".0"),4,e.lineno),this.visitExpr(t.target),this.SEQExpr(t.ifs),this.visitComprehension(e.generators,1),this.visitExpr(e.elt),this.exitBlock()},s.prototype.visitExcepthandlers=function(e){var t,n;for(t=0;n=e[t];++t)n.type&&this.visitExpr(n.type),n.name&&this.visitExpr(n.name),this.SEQStmt(n.body)},s.prototype.analyzeBlock=function(e,t,n,i){var s={},r={},a={},l={},c={};for(h in"class"==e.blockType&&(o(a,i),t&&o(l,t)),e.symFlags){var u=e.symFlags[h];this.analyzeName(e,r,h,u,t,s,n,i)}"class"!==e.blockType&&("function"===e.blockType&&o(l,s),t&&o(l,t),o(a,i)),s={};var h=e.children.length;for(u=0;u<h;++u)i=e.children[u],this.analyzeChildBlock(i,l,c,a,s),(i.hasFree||i.childHasFree)&&(e.childHasFree=!0);o(c,s),"function"===e.blockType&&this.analyzeCells(r,c),t=this.updateSymbols(e.symFlags,r,t,c,"class"===e.blockType),e.hasFree=e.hasFree||t,o(n,c)},s.prototype.analyzeChildBlock=function(e,t,n,i,s){var r={};o(r,t),o(t={},n),o(n={},i),this.analyzeBlock(e,r,t,n),o(s,t)},s.prototype.analyzeCells=function(e,t){var n;for(n in e){1===e[n]&&void 0!==t[n]&&(e[n]=5,delete t[n])}},s.prototype.updateSymbols=function(e,t,n,i,s){var r,o=!1;for(r in e){var a=e[r];a|=t[r]<<11,e[r]=a}for(r in i)void 0!==(t=e[r])?s&&1031&t&&(t|=512,e[r]=t):void 0!==n[r]&&(e[r]=8192,o=!0);return o},s.prototype.analyzeName=function(e,t,n,i,s,r,o,a){if(1&i){if(4&i)throw new Sk.builtin.SyntaxError("name '"+n+"' is local and global",this.filename,e.lineno);t[n]=2,a[n]=null,s&&void 0!==s[n]&&delete s[n]}else 1030&i?(t[n]=1,r[n]=null,delete a[n]):s&&void 0!==s[n]?(t[n]=4,e.hasFree=!0,o[n]=null):(a&&void 0!==a[n]||!e.isNested||(e.hasFree=!0),t[n]=3)},s.prototype.analyze=function(){this.analyzeBlock(this.top,null,{},{})},Sk.symboltable=function(e,t){var n=new s(t);for(n.enterBlock("top","module",e,0),n.top=n.cur,t=0;t<e.body.length;++t)n.visitStmt(e.body[t]);return n.exitBlock(),n.analyze(),n},Sk.dumpSymtab=function(e){var t=function(e){return e?"True":"False"},n=function(e){var t,n=[];for(t=0;t<e.length;++t)n.push(new Sk.builtin.str(e[t]).$r().v);return"["+n.join(", ")+"]"},i=function(e,s){var r,o;void 0===s&&(s="");var a=s+"Sym_type: "+e.get_type()+"\n";a+=s+"Sym_name: "+e.get_name()+"\n",a+=s+"Sym_lineno: "+e.get_lineno()+"\n",a+=s+"Sym_nested: "+t(e.is_nested())+"\n",a+=s+"Sym_haschildren: "+t(e.has_children())+"\n","class"===e.get_type()?a+=s+"Class_methods: "+n(e.get_methods())+"\n":"function"===e.get_type()&&(a+=s+"Func_params: "+n(e.get_parameters())+"\n",a+=s+"Func_locals: "+n(e.get_locals())+"\n",a+=s+"Func_globals: "+n(e.get_globals())+"\n",a+=s+"Func_frees: "+n(e.get_frees())+"\n"),a+=s+"-- Identifiers --\n";var l=e.get_identifiers(),c=l.length;for(o=0;o<c;++o){var u=e.lookup(l[o]);a+=s+"name: "+u.get_name()+"\n",a+=s+"  is_referenced: "+t(u.is_referenced())+"\n",a+=s+"  is_imported: "+t(u.is_imported())+"\n",a+=s+"  is_parameter: "+t(u.is_parameter())+"\n",a+=s+"  is_global: "+t(u.is_global())+"\n",a+=s+"  is_declared_global: "+t(u.is_declared_global())+"\n",a+=s+"  is_local: "+t(u.is_local())+"\n",a+=s+"  is_free: "+t(u.is_free())+"\n",a+=s+"  is_assigned: "+t(u.is_assigned())+"\n",a+=s+"  is_namespace: "+t(u.is_namespace())+"\n";var h=u.get_namespaces(),d=h.length;a+=s+"  namespaces: [\n";var f=[];for(r=0;r<d;++r)u=h[r],f.push(i(u,s+"    "));a+=f.join("\n"),a+=s+"  ]\n"}return a};return i(e.top,"")},Sk.exportSymbol("Sk.symboltable",Sk.symboltable),Sk.exportSymbol("Sk.dumpSymtab",Sk.dumpSymtab)},function(e,t){function n(e,t,n,i,s){this.filename=e,this.st=t,this.flags=n,this.canSuspend=i,this.interactive=!1,this.nestlevel=0,this.u=null,this.stack=[],this.result=[],this.allUnits=[],this.source=!!s&&s.split("\n")}function i(){this.name=this.ste=null,this.doesSuspend=this.canSuspend=!1,this.private_=null,this.lineno=this.firstlineno=0,this.linenoSet=!1,this.localnames=[],this.localtemps=[],this.tempsToSave=[],this.blocknum=0,this.blocks=[],this.curblock=0,this.consts={},this.scopename=null,this.suffixCode=this.switchCode=this.varDeclsCode=this.prefixCode="",this.breakBlocks=[],this.continueBlocks=[],this.exceptBlocks=[],this.finallyBlocks=[]}function s(e){return void 0===a[e]?e:e+"_$rw$"}function r(e,t){var n=t.v;if(null===e||null===n||"_"!==n.charAt(0)||"_"!==n.charAt(1)||"_"===n.charAt(n.length-1)&&"_"===n.charAt(n.length-2))return t;var i=e.v;return i.replace(/_/g,""),""===i?t:((i=e.v).replace(/^_*/,""),new Sk.builtin.str("_"+i+n))}var o;Sk.gensymcount=0,i.prototype.activateScope=function(){var e=this;o=function(){var t,n=e.blocks[e.curblock];if(null===n._next)for(t=0;t<arguments.length;++t)n.push(arguments[t])}},n.prototype.getSourceLine=function(e){return Sk.asserts.assert(this.source),this.source[e-1]},n.prototype.annotateSource=function(e){var t;if(this.source){var n=e.lineno,i=e.col_offset;for(o("\n//\n// line ",n,":\n// ",this.getSourceLine(n),"\n// "),t=0;t<i;++t)o(" ");o("^\n//\n"),Sk.asserts.assert(void 0!==e.lineno&&void 0!==e.col_offset),o("$currLineNo = ",n,";\n$currColNo = ",i,";\n\n")}},n.prototype.gensym=function(e){return"$"+(e||"")+Sk.gensymcount++},n.prototype.niceName=function(e){return this.gensym(e.replace("<","").replace(">","").replace(" ","_"))};var a=Sk.builtin.str.reservedWords_;n.prototype.makeConstant=function(e){var t,n="";for(t=0;t<arguments.length;++t)n+=arguments[t];for(i in this.u.consts)if(this.u.consts.hasOwnProperty(i)&&(t=this.u.consts[i])==n)return i;var i=this.u.scopename+"."+this.gensym("const");return this.u.consts[i]=n,i},n.prototype._gr=function(e,t){var n,i=this.gensym(e);for(this.u.localtemps.push(i),o("var ",i,"="),n=1;n<arguments.length;++n)o(arguments[n]);return o(";"),i},n.prototype.outputInterruptTest=function(){var e="";return(null!==Sk.execLimit||null!==Sk.yieldLimit&&this.u.canSuspend)&&(e+="var $dateNow = Date.now();",null!==Sk.execLimit&&(e+="if ($dateNow - Sk.execStart > Sk.execLimit) {throw new Sk.builtin.TimeLimitError(Sk.timeoutMsg())}"),null!==Sk.yieldLimit&&this.u.canSuspend&&(e=e+"if ($dateNow - Sk.lastYield > Sk.yieldLimit) {var $susp = $saveSuspension({data: {type: 'Sk.yield'}, resume: function() {}}, '"+this.filename+"',$currLineNo,$currColNo);",e+="$susp.$blk = $blk;$susp.optional = true;return $susp;}",this.u.doesSuspend=!0)),e},n.prototype._jumpfalse=function(e,t){e=this._gr("jfalse","(",e,"===false||!Sk.misceval.isTrue(",e,"))"),o("if(",e,"){/*test failed */$blk=",t,";continue;}")},n.prototype._jumpundef=function(e,t){o("if(",e,"===undefined){$blk=",t,";continue;}")},n.prototype._jumpnotundef=function(e,t){o("if(",e,"!==undefined){$blk=",t,";continue;}")},n.prototype._jumptrue=function(e,t){e=this._gr("jtrue","(",e,"===true||Sk.misceval.isTrue(",e,"))"),o("if(",e,"){/*test passed */$blk=",t,";continue;}")},n.prototype._jump=function(e){null===this.u.blocks[this.u.curblock]._next&&(o("$blk=",e,";"),this.u.blocks[this.u.curblock]._next=e)},n.prototype._checkSuspension=function(e){if(this.u.canSuspend){var t=this.newBlock("function return or resume suspension");this._jump(t),this.setBlock(t),e=e||{lineno:"$currLineNo",col_offset:"$currColNo"},o("if ($ret && $ret.$isSuspension) { return $saveSuspension($ret,'"+this.filename+"',"+e.lineno+","+e.col_offset+"); }"),this.u.doesSuspend=!0,this.u.tempsToSave=this.u.tempsToSave.concat(this.u.localtemps)}else o("if ($ret && $ret.$isSuspension) { $ret = Sk.misceval.retryOptionalSuspensionOrThrow($ret); }")},n.prototype.cunpackstarstoarray=function(e,t){if(!e||0==e.length)return"[]";let n=!1;for(let i of e){if(t&&n)throw new Sk.builtin.SyntaxError("Extended argument unpacking is not permitted in Python 2");i.constructor===Sk.astnodes.Starred&&(n=!0)}if(n){t=this._gr("unpack","[]");for(let n of e)n.constructor!==Sk.astnodes.Starred?o(t,".push(",this.vexpr(n),");"):(o("$ret = Sk.misceval.iterFor(Sk.abstr.iter(",this.vexpr(n.value),"), function(e) { ",t,".push(e); });"),this._checkSuspension());return t}return"["+e.map((e=>this.vexpr(e))).join(",")+"]"},n.prototype.ctuplelistorset=function(e,t,n){var i;Sk.asserts.assert("tuple"===n||"list"===n||"set"===n);var s=!1;for(i=0;i<e.elts.length;i++)if(e.elts[i].constructor===Sk.astnodes.Starred){s=!0;var r=i;break}if(e.ctx===Sk.astnodes.Store){if(s){if(!Sk.__future__.python3)throw new Sk.builtin.SyntaxError("assignment unpacking with stars is not supported in Python 2",this.filename,e.lineno);for(i=r+1;i<e.elts.length;i++)if(e.elts[i].constructor===Sk.astnodes.Starred)throw new Sk.builtin.SyntaxError("multiple starred expressions in assignment",this.filename,e.lineno)}for(n=s?r:e.elts.length,o("$ret = Sk.abstr.sequenceUnpack("+t+","+n+","+(s?e.elts.length-1:n)+", "+s+");"),this._checkSuspension(),t=this._gr("items","$ret"),i=0;i<e.elts.length;++i)i===r?this.vexpr(e.elts[i].value,t+"["+i+"]"):this.vexpr(e.elts[i],t+"["+i+"]")}else if(e.ctx===Sk.astnodes.Load||"set"===n){if(s){if(!Sk.__future__.python3)throw new Sk.builtin.SyntaxError("List packing with stars is not supported in Python 2");return this._gr("load"+n,"new Sk.builtins['",n,"'](",this.cunpackstarstoarray(e.elts),")")}if("tuple"===n){for(s=!0,t=[],i=0;i<e.elts.length;++i)r=this.vexpr(e.elts[i]),s&&-1==r.indexOf("$const")&&(s=!1),t.push(r);if(s)return this.makeConstant("new Sk.builtin.tuple(["+t+"])");for(i=0;i<t.length;++i)t[i]=this._gr("elem",t[i]);return this._gr("load"+n,"new Sk.builtins['",n,"']([",t,"])")}for(t=[],i=0;i<e.elts.length;++i)t.push(this._gr("elem",this.vexpr(e.elts[i])));return this._gr("load"+n,"new Sk.builtins['",n,"']([",t,"])")}},n.prototype.cdict=function(e){var t,n=[];if(null!==e.keys)for(Sk.asserts.assert(e.values.length===e.keys.length),t=0;t<e.values.length;++t){var i=this.vexpr(e.values[t]);n.push(this.vexpr(e.keys[t])),n.push(i)}return this._gr("loaddict","new Sk.builtins['dict']([",n,"])")},n.prototype.clistcomp=function(e){Sk.asserts.assert(e instanceof Sk.astnodes.ListComp);var t=this._gr("_compr","new Sk.builtins['list']([])");return this.ccompgen("list",t,e.generators,0,e.elt,null,e)},n.prototype.cdictcomp=function(e){Sk.asserts.assert(e instanceof Sk.astnodes.DictComp);var t=this._gr("_dcompr","new Sk.builtins.dict([])");return this.ccompgen("dict",t,e.generators,0,e.value,e.key,e)},n.prototype.csetcomp=function(e){Sk.asserts.assert(e instanceof Sk.astnodes.SetComp);var t=this._gr("_setcompr","new Sk.builtins.set([])");return this.ccompgen("set",t,e.generators,0,e.elt,null,e)},n.prototype.ccompgen=function(e,t,n,i,s,r,a){var l,c=this.newBlock(e+" comp start"),u=this.newBlock(e+" comp skip"),h=this.newBlock(e+" comp anchor"),d=n[i],f=this.vexpr(d.iter);f=this._gr("iter","Sk.abstr.iter(",f,")"),this._jump(c),this.setBlock(c),o("$ret = Sk.abstr.iternext(",f,", true);"),this._checkSuspension(a),f=this._gr("next","$ret"),this._jumpundef(f,h),this.vexpr(d.target,f);var g=d.ifs?d.ifs.length:0;for(l=0;l<g;++l)f=this.vexpr(d.ifs[l]),this._jumpfalse(f,c);return++i<n.length&&this.ccompgen(e,t,n,i,s,r,a),i>=n.length&&(n=this.vexpr(s),"dict"===e?(e=this.vexpr(r),o(t,".mp$ass_subscript(",e,",",n,");")):"list"===e?o(t,".v.push(",n,");"):"set"===e&&o(t,".v.mp$ass_subscript(",n,", true);"),this._jump(u),this.setBlock(u)),this._jump(c),this.setBlock(h),t},n.prototype.cyield=function(e){if(this.u.ste.blockType!==Sk.SYMTAB_CONSTS.FunctionBlock)throw new Sk.builtin.SyntaxError("'yield' outside function",this.filename,e.lineno);var t="Sk.builtin.none.none$";return e.value&&(t=this.vexpr(e.value)),e=this.newBlock("after yield"),o("return [/*resume*/",e,",/*ret*/",t,"];"),this.setBlock(e),"$gen.gi$sentvalue"},n.prototype.ccompare=function(e){var t;Sk.asserts.assert(e.ops.length===e.comparators.length);var n=this.vexpr(e.left),i=e.ops.length,s=this.newBlock("done"),r=this._gr("compareres","null");for(t=0;t<i;++t){var a=this.vexpr(e.comparators[t]);o("$ret = Sk.builtin.bool(Sk.misceval.richCompareBool(",n,",",a,",'",e.ops[t].prototype._astname,"', true));"),this._checkSuspension(e),o(r,"=$ret;"),this._jumpfalse("$ret",s),n=a}return this._jump(s),this.setBlock(s),r},n.prototype.ccall=function(e){var t=this.vexpr(e.func);let n=this.cunpackstarstoarray(e.args,!Sk.__future__.python3);var i="undefined";if(e.keywords&&0<e.keywords.length){let n=!1;i=[];for(let t of e.keywords){if(n&&!Sk.__future__.python3)throw new SyntaxError("Advanced unpacking of function arguments is not supported in Python 2");t.arg?(i.push("'"+t.arg.v+"'"),i.push(this.vexpr(t.value))):n=!0}if(i="["+i.join(",")+"]",n){i=this._gr("keywordArgs",i);for(let n of e.keywords)n.arg||(o("$ret = Sk.abstr.mappingUnpackIntoKeywordArray(",i,",",this.vexpr(n.value),",",t,");"),this._checkSuspension())}}return Sk.__future__.super_args&&e.func.id&&"super"===e.func.id.v&&"[]"===n&&(o('if (typeof self === "undefined" || self.toString().indexOf("Window") > 0) { throw new Sk.builtin.RuntimeError("super(): no arguments") };'),n="[$gbl.__class__,self]"),o("$ret = (",t,".tp$call)?",t,".tp$call(",n,",",i,") : Sk.misceval.applyOrSuspend(",t,",undefined,undefined,",i,",",n,");"),this._checkSuspension(e),this._gr("call","$ret")},n.prototype.cslice=function(e){if(Sk.asserts.assert(e instanceof Sk.astnodes.Slice),Sk.__future__.python3)var t=e.lower?this.vexpr(e.lower):"Sk.builtin.none.none$",n=e.upper?this.vexpr(e.upper):"Sk.builtin.none.none$";else t=e.lower?this.vexpr(e.lower):e.step?"Sk.builtin.none.none$":"new Sk.builtin.int_(0)",n=e.upper?this.vexpr(e.upper):e.step?"Sk.builtin.none.none$":"new Sk.builtin.int_(2147483647)";return e=e.step?this.vexpr(e.step):"Sk.builtin.none.none$",this._gr("slice","new Sk.builtins['slice'](",t,",",n,",",e,")")},n.prototype.eslice=function(e){var t;Sk.asserts.assert(e instanceof Array);var n=[];for(t=0;t<e.length;t++)n.push(this.vslicesub(e[t]));return this._gr("extslice","new Sk.builtins['tuple']([",n,"])")},n.prototype.vslicesub=function(e){switch(e.constructor){case Sk.astnodes.Index:var t=this.vexpr(e.value);break;case Sk.astnodes.Slice:t=this.cslice(e);break;case Sk.astnodes.Ellipsis:Sk.asserts.fail("todo compile.js Ellipsis;");break;case Sk.astnodes.ExtSlice:t=this.eslice(e.dims);break;default:Sk.asserts.fail("invalid subscript kind")}return t},n.prototype.vslice=function(e,t,n,i){return e=this.vslicesub(e),this.chandlesubscr(t,n,e,i)},n.prototype.chandlesubscr=function(e,t,n,i){if(e===Sk.astnodes.Load||e===Sk.astnodes.AugLoad)return o("$ret = Sk.abstr.objectGetItem(",t,",",n,", true);"),this._checkSuspension(),this._gr("lsubscr","$ret");e===Sk.astnodes.Store||e===Sk.astnodes.AugStore?(o("$ret = Sk.abstr.objectSetItem(",t,",",n,",",i,", true);"),this._checkSuspension()):e===Sk.astnodes.Del?o("Sk.abstr.objectDelItem(",t,",",n,");"):Sk.asserts.fail("handlesubscr fail")},n.prototype.cboolop=function(e){var t,n;Sk.asserts.assert(e instanceof Sk.astnodes.BoolOp);var i=e.op===Sk.astnodes.And?this._jumpfalse:this._jumptrue,s=this.newBlock("end of boolop"),r=e.values,a=r.length;for(t=0;t<a;++t)e=this.vexpr(r[t]),0===t&&(n=this._gr("boolopsucc",e)),o(n,"=",e,";"),i.call(this,e,s);return this._jump(s),this.setBlock(s),n},n.prototype.cjoinedstr=function(e){let t;Sk.asserts.assert(e instanceof Sk.astnodes.JoinedStr);for(let n of e.values)e=this.vexpr(n),t?o(t,"=",t,".sq$concat(",e,");"):t=this._gr("joinedstr",e);return t||(t="Sk.builtin.str.$emptystr"),t},n.prototype.cformattedvalue=function(e){let t=this.vexpr(e.value);switch(e.conversion){case"s":t=this._gr("value","new Sk.builtin.str(",t,")");break;case"a":t=this._gr("value","Sk.builtin.ascii(",t,")");break;case"r":t=this._gr("value","Sk.builtin.repr(",t,")")}return e=e.format_spec?this.vexpr(e.format_spec):"Sk.builtin.str.$emptystr",this._gr("formatted","Sk.abstr.objectFormat("+t+","+e+")")},n.prototype.vexpr=function(e,t,n,i){var s;switch(e.lineno>this.u.lineno&&(this.u.lineno=e.lineno,this.u.linenoSet=!1),e.constructor){case Sk.astnodes.BoolOp:return this.cboolop(e);case Sk.astnodes.BinOp:return this._gr("binop","Sk.abstr.numberBinOp(",this.vexpr(e.left),",",this.vexpr(e.right),",'",e.op.prototype._astname,"')");case Sk.astnodes.UnaryOp:return this._gr("unaryop","Sk.abstr.numberUnaryOp(",this.vexpr(e.operand),",'",e.op.prototype._astname,"')");case Sk.astnodes.Lambda:return this.clambda(e);case Sk.astnodes.IfExp:return this.cifexp(e);case Sk.astnodes.Dict:return this.cdict(e);case Sk.astnodes.ListComp:return this.clistcomp(e);case Sk.astnodes.DictComp:return this.cdictcomp(e);case Sk.astnodes.SetComp:return this.csetcomp(e);case Sk.astnodes.GeneratorExp:return this.cgenexp(e);case Sk.astnodes.Yield:return this.cyield(e);case Sk.astnodes.Compare:return this.ccompare(e);case Sk.astnodes.Call:return t=this.ccall(e),this.annotateSource(e),t;case Sk.astnodes.Num:if("number"===typeof e.n)return e.n;if(e.n instanceof Sk.builtin.lng)return this.makeConstant("new Sk.builtin.lng('"+e.n.v.toString()+"')");if(e.n instanceof Sk.builtin.int_)return"number"===typeof e.n.v?this.makeConstant("new Sk.builtin.int_("+e.n.v+")"):this.makeConstant("new Sk.builtin.int_('"+e.n.v.toString()+"')");if(e.n instanceof Sk.builtin.float_)return e=0===e.n.v&&-1/0===1/e.n.v?"-0":e.n.v,this.makeConstant("new Sk.builtin.float_("+e+")");if(e.n instanceof Sk.builtin.complex)return this.makeConstant("new Sk.builtin.complex("+(0===e.n.real&&-1/0===1/e.n.real?"-0":e.n.real)+", "+(0===e.n.imag&&-1/0===1/e.n.imag?"-0":e.n.imag)+")");Sk.asserts.fail("unhandled Num type");case Sk.astnodes.Bytes:if(Sk.__future__.python3){for(t=[],e=e.s.$jsstr(),n=0;n<e.length;n++)t.push(e.charCodeAt(n));return this.makeConstant("new Sk.builtin.bytes([",t.join(", "),"])")}case Sk.astnodes.Str:return this.makeConstant("new Sk.builtin.str(",function(e){let t='"';for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);t=10==i?t+"\\n":92==i?t+"\\\\":34==i||32>i||127<=i&&256>i?t+"\\x"+("0"+i.toString(16)).substr(-2):256<=i?t+"\\u"+("000"+i.toString(16)).substr(-4):t+e.charAt(n)}return t+'"'}(e.s.$jsstr()),")");case Sk.astnodes.Attribute:switch(e.ctx!==Sk.astnodes.AugLoad&&e.ctx!==Sk.astnodes.AugStore&&(s=this.vexpr(e.value)),i=(i=e.attr.$r().v).substring(1,i.length-1),i=r(this.u.private_,new Sk.builtin.str(i)).v,i=this.makeConstant("new Sk.builtin.str('"+i+"')"),e.ctx){case Sk.astnodes.AugLoad:return o("$ret = ",n,".tp$getattr(",i,", true);"),this._checkSuspension(e),o("\nif ($ret === undefined) {"),o("\nthrow new Sk.builtin.AttributeError(",n,'.sk$attrError() + " has no attribute \'" + ',i,'.$jsstr() + "\'");'),o("\n};"),this._gr("lattr","$ret");case Sk.astnodes.Load:return o("$ret = ",s,".tp$getattr(",i,", true);"),this._checkSuspension(e),o("\nif ($ret === undefined) {"),o("\nthrow new Sk.builtin.AttributeError(",s,'.sk$attrError() + " has no attribute \'" + ',i,'.$jsstr() + "\'");'),o("\n};"),this._gr("lattr","$ret");case Sk.astnodes.AugStore:o("$ret = undefined;"),o("if(",t,"!==undefined){"),o("$ret = ",n,".tp$setattr(",i,",",t,", true);"),o("}"),this._checkSuspension(e);break;case Sk.astnodes.Store:o("$ret = ",s,".tp$setattr(",i,",",t,", true);"),this._checkSuspension(e);break;case Sk.astnodes.Del:o("$ret = ",s,".tp$setattr(",i,", undefined, true);"),this._checkSuspension(e);break;default:Sk.asserts.fail("invalid attribute expression")}break;case Sk.astnodes.Subscript:switch(e.ctx){case Sk.astnodes.AugLoad:return o("$ret = Sk.abstr.objectGetItem(",n,",",i,", true);"),this._checkSuspension(e),this._gr("gitem","$ret");case Sk.astnodes.Load:case Sk.astnodes.Store:case Sk.astnodes.Del:return this.vslice(e.slice,e.ctx,this.vexpr(e.value),t);case Sk.astnodes.AugStore:o("$ret=undefined;"),o("if(",t,"!==undefined){"),o("$ret=Sk.abstr.objectSetItem(",n,",",i,",",t,", true)"),o("}"),this._checkSuspension(e);break;default:Sk.asserts.fail("invalid subscript expression")}break;case Sk.astnodes.Name:return this.nameop(e.id,e.ctx,t);case Sk.astnodes.NameConstant:if(e.ctx===Sk.astnodes.Store||e.ctx===Sk.astnodes.AugStore||e.ctx===Sk.astnodes.Del)throw new Sk.builtin.SyntaxError("can not assign to a constant name");switch(e.value){case Sk.builtin.none.none$:return"Sk.builtin.none.none$";case Sk.builtin.bool.true$:return"Sk.builtin.bool.true$";case Sk.builtin.bool.false$:return"Sk.builtin.bool.false$";default:Sk.asserts.fail("invalid named constant")}break;case Sk.astnodes.List:return this.ctuplelistorset(e,t,"list");case Sk.astnodes.Tuple:return this.ctuplelistorset(e,t,"tuple");case Sk.astnodes.Set:return this.ctuplelistorset(e,t,"set");case Sk.astnodes.Starred:if(e.ctx===Sk.astnodes.Store)throw new Sk.builtin.SyntaxError("starred assignment target must be in a list or tuple",this.filename,e.lineno);throw new Sk.builtin.SyntaxError("can't use starred expression here",this.filename,e.lineno);case Sk.astnodes.JoinedStr:return this.cjoinedstr(e);case Sk.astnodes.FormattedValue:return this.cformattedvalue(e);default:Sk.asserts.fail("unhandled case "+e.constructor.name+" vexpr")}},n.prototype.vseqexpr=function(e,t){var n;Sk.asserts.assert(void 0===t||e.length===t.length);var i=[];for(n=0;n<e.length;++n)i.push(this.vexpr(e[n],void 0===t?void 0:t[n]));return i},n.prototype.caugassign=function(e){Sk.asserts.assert(e instanceof Sk.astnodes.AugAssign);var t=e.target;switch(t.constructor){case Sk.astnodes.Attribute:var n=this.vexpr(t.value);t=new Sk.astnodes.Attribute(t.value,t.attr,Sk.astnodes.AugLoad,t.lineno,t.col_offset);var i=this.vexpr(t,void 0,n),s=this.vexpr(e.value);return e=this._gr("inplbinopattr","Sk.abstr.numberInplaceBinOp(",i,",",s,",'",e.op.prototype._astname,"')"),t.ctx=Sk.astnodes.AugStore,this.vexpr(t,e,n);case Sk.astnodes.Subscript:n=this.vexpr(t.value);var r=this.vslicesub(t.slice);return t=new Sk.astnodes.Subscript(t.value,r,Sk.astnodes.AugLoad,t.lineno,t.col_offset),i=this.vexpr(t,void 0,n,r),s=this.vexpr(e.value),e=this._gr("inplbinopsubscr","Sk.abstr.numberInplaceBinOp(",i,",",s,",'",e.op.prototype._astname,"')"),t.ctx=Sk.astnodes.AugStore,this.vexpr(t,e,n,r);case Sk.astnodes.Name:return n=this.nameop(t.id,Sk.astnodes.Load),s=this.vexpr(e.value),e=this._gr("inplbinop","Sk.abstr.numberInplaceBinOp(",n,",",s,",'",e.op.prototype._astname,"')"),this.nameop(t.id,Sk.astnodes.Store,e);default:Sk.asserts.fail("unhandled case in augassign")}},n.prototype.exprConstant=function(e){switch(e.constructor){case Sk.astnodes.Num:return Sk.misceval.isTrue(e.n)?1:0;case Sk.astnodes.Str:return Sk.misceval.isTrue(e.s)?1:0;default:return-1}},n.prototype.newBlock=function(e){var t=this.u.blocknum++;return this.u.blocks[t]=[],this.u.blocks[t]._name=e||"<unnamed>",this.u.blocks[t]._next=null,t},n.prototype.setBlock=function(e){Sk.asserts.assert(0<=e&&e<this.u.blocknum),this.u.curblock=e},n.prototype.pushBreakBlock=function(e){Sk.asserts.assert(0<=e&&e<this.u.blocknum),this.u.breakBlocks.push(e)},n.prototype.popBreakBlock=function(){this.u.breakBlocks.pop()},n.prototype.pushContinueBlock=function(e){Sk.asserts.assert(0<=e&&e<this.u.blocknum),this.u.continueBlocks.push(e)},n.prototype.popContinueBlock=function(){this.u.continueBlocks.pop()},n.prototype.pushExceptBlock=function(e){Sk.asserts.assert(0<=e&&e<this.u.blocknum),this.u.exceptBlocks.push(e)},n.prototype.popExceptBlock=function(){this.u.exceptBlocks.pop()},n.prototype.pushFinallyBlock=function(e){Sk.asserts.assert(0<=e&&e<this.u.blocknum),Sk.asserts.assert(this.u.breakBlocks.length===this.u.continueBlocks.length),this.u.finallyBlocks.push({blk:e,breakDepth:this.u.breakBlocks.length})},n.prototype.popFinallyBlock=function(){this.u.finallyBlocks.pop()},n.prototype.peekFinallyBlock=function(){return 0<this.u.finallyBlocks.length?this.u.finallyBlocks[this.u.finallyBlocks.length-1]:void 0},n.prototype.setupExcept=function(e){o("$exc.push(",e,");")},n.prototype.endExcept=function(){o("$exc.pop();")},n.prototype.outputLocals=function(e){var t,n={};for(t=0;e.argnames&&t<e.argnames.length;++t)n[e.argnames[t]]=!0;e.localnames.sort();var i=[];for(t=0;t<e.localnames.length;++t){var s=e.localnames[t];void 0===n[s]&&(i.push(s),n[s]=!0)}return 0<i.length?"var "+i.join(",")+"; /* locals */":""},n.prototype.outputSuspensionHelpers=function(e){var t,n=[],i=e.localnames.concat(e.tempsToSave),s={},r=e.ste.blockType===Sk.SYMTAB_CONSTS.FunctionBlock&&e.ste.childHasFree,o=(0<i.length?"var "+i.join(",")+";":"")+"var $wakeFromSuspension = function() {var susp = "+e.scopename+".$wakingSuspension; "+e.scopename+".$wakingSuspension = undefined;$blk=susp.$blk; $loc=susp.$loc; $gbl=susp.$gbl; $exc=susp.$exc; $err=susp.$err; $postfinally=susp.$postfinally;$currLineNo=susp.$lineno; $currColNo=susp.$colno; Sk.lastYield=Date.now();"+(r?"$cell=susp.$cell;":"");for(t=0;t<i.length;t++){var a=i[t];void 0===s[a]&&(o+=a+"=susp.$tmps."+a+";",s[a]=!0)}for(o+="try { $ret=susp.child.resume(); } catch(err) { if (!(err instanceof Sk.builtin.BaseException)) { err = new Sk.builtin.ExternalError(err); } err.traceback.push({lineno: $currLineNo, colno: $currColNo, filename: '"+this.filename+"'}); if($exc.length>0) { $err=err; $blk=$exc.pop(); } else { throw err; } }};",o+="var $saveSuspension = function($child, $filename, $lineno, $colno) {var susp = new Sk.misceval.Suspension(); susp.child=$child;susp.resume=function(){"+e.scopename+".$wakingSuspension=susp; return "+e.scopename+"("+(e.ste.generator?"$gen":"")+"); };susp.data=susp.child.data;susp.$blk=$blk;susp.$loc=$loc;susp.$gbl=$gbl;susp.$exc=$exc;susp.$err=$err;susp.$postfinally=$postfinally;susp.$filename=$filename;susp.$lineno=$lineno;susp.$colno=$colno;susp.optional=susp.child.optional;"+(r?"susp.$cell=$cell;":""),s={},t=0;t<i.length;t++)void 0===s[a=i[t]]&&(n.push('"'+a+'":'+a),s[a]=!0);return o+"susp.$tmps={"+n.join(",")+"};return susp;};"},n.prototype.outputAllUnits=function(){var e,t,n="";for(t=0;t<this.allUnits.length;++t){var i=this.allUnits[t];n+=i.prefixCode,n+=this.outputLocals(i),i.doesSuspend&&(n+=this.outputSuspensionHelpers(i)),n+=i.varDeclsCode,n+=i.switchCode;var s=i.blocks,r=Object.create(null);for(e=0;e<s.length;++e){var o=e;if(!(o in r))for(;;){if(r[o]=!0,n+="case "+o+": /* --- "+s[o]._name+" --- */",n+=s[o].join(""),null===s[o]._next){n+="throw new Sk.builtin.SystemError('internal error: unterminated block');";break}if(s[o]._next in r){n+="/* jump */ continue;";break}n+="/* allowing case fallthrough */",o=s[o]._next}}n+=i.suffixCode}return n},n.prototype.cif=function(e){var t;Sk.asserts.assert(e instanceof Sk.astnodes.If);var n=this.exprConstant(e.test);if(0===n)e.orelse&&0<e.orelse.length&&this.vseqstmt(e.orelse);else if(1===n)this.vseqstmt(e.body);else{var i=this.newBlock("end of if");e.orelse&&0<e.orelse.length&&(t=this.newBlock("next branch of if")),n=this.vexpr(e.test),e.orelse&&0<e.orelse.length?(this._jumpfalse(n,t),this.vseqstmt(e.body),this._jump(i),this.setBlock(t),this.vseqstmt(e.orelse)):(this._jumpfalse(n,i),this.vseqstmt(e.body)),this._jump(i),this.setBlock(i)}},n.prototype.cwhile=function(e){if(0===this.exprConstant(e.test))e.orelse&&this.vseqstmt(e.orelse);else{var t=this.newBlock("while test");this._jump(t),this.setBlock(t);var n=this.newBlock("after while"),i=0<e.orelse.length?this.newBlock("while orelse"):null,s=this.newBlock("while body");this.annotateSource(e),this._jumpfalse(this.vexpr(e.test),i||n),this._jump(s),this.pushBreakBlock(n),this.pushContinueBlock(t),this.setBlock(s),(Sk.debugging||Sk.killableWhile)&&this.u.canSuspend&&(s=this.newBlock("debug breakpoint for line "+e.lineno),o("if (Sk.breakpoints('"+this.filename+"',"+e.lineno+","+e.col_offset+")) {","var $susp = $saveSuspension({data: {type: 'Sk.delay'}, resume: function() {}}, '"+this.filename+"',"+e.lineno+","+e.col_offset+");","$susp.$blk = "+s+";","$susp.optional = true;","return $susp;","}"),this._jump(s),this.setBlock(s),this.u.doesSuspend=!0),this.vseqstmt(e.body),this._jump(t),this.popContinueBlock(),this.popBreakBlock(),0<e.orelse.length&&(this.setBlock(i),this.vseqstmt(e.orelse),this._jump(n)),this.setBlock(n)}},n.prototype.cfor=function(e){var t=this.newBlock("for start"),n=this.newBlock("for cleanup"),i=this.newBlock("for end");this.pushBreakBlock(i),this.pushContinueBlock(t);var s=this.vexpr(e.iter);if(this.u.ste.generator){var r="$loc."+this.gensym("iter");o(r,"=Sk.abstr.iter(",s,");")}else r=this._gr("iter","Sk.abstr.iter(",s,")"),this.u.tempsToSave.push(r);this._jump(t),this.setBlock(t),o("$ret = Sk.abstr.iternext(",r,this.u.canSuspend?", true":", false",");"),this._checkSuspension(e),r=this._gr("next","$ret"),this._jumpundef(r,n),this.vexpr(e.target,r),(Sk.debugging||Sk.killableFor)&&this.u.canSuspend&&(r=this.newBlock("debug breakpoint for line "+e.lineno),o("if (Sk.breakpoints('"+this.filename+"',"+e.lineno+","+e.col_offset+")) {","var $susp = $saveSuspension({data: {type: 'Sk.delay'}, resume: function() {}}, '"+this.filename+"',"+e.lineno+","+e.col_offset+");","$susp.$blk = "+r+";","$susp.optional = true;","return $susp;","}"),this._jump(r),this.setBlock(r),this.u.doesSuspend=!0),this.vseqstmt(e.body),this._jump(t),this.setBlock(n),this.popContinueBlock(),this.popBreakBlock(),this.vseqstmt(e.orelse),this._jump(i),this.setBlock(i)},n.prototype.craise=function(e){if(e.exc){var t=this._gr("exc",this.vexpr(e.exc)),n=this.newBlock("exception now instantiated"),i=this._gr("isclass",t+".prototype instanceof Sk.builtin.BaseException");this._jumpfalse(i,n),e.inst?(i=this._gr("inst",this.vexpr(e.inst)),o("if(!(",i," instanceof Sk.builtin.tuple)) {",i,"= new Sk.builtin.tuple([",i,"]);","}"),o("$ret = Sk.misceval.callsimOrSuspendArray(",t,",",i,".v);")):o("$ret = Sk.misceval.callsimOrSuspend(",t,");"),this._checkSuspension(e),o(t,"=$ret;"),this._jump(n),this.setBlock(n),o("if (",t," instanceof Sk.builtin.BaseException) {throw ",t,";} else {throw new Sk.builtin.TypeError('exceptions must derive from BaseException');};")}else o("throw $err;")},n.prototype.outputFinallyCascade=function(e){if(0==this.u.finallyBlocks.length)o("if($postfinally!==undefined) { if ($postfinally.returning) { return $postfinally.returning; } else { $blk=$postfinally.gotoBlock; $postfinally=undefined; continue; } }");else{var t=this.peekFinallyBlock();o("if($postfinally!==undefined) {","if ($postfinally.returning",t.breakDepth==e.breakDepth?"|| $postfinally.isBreak":"",") {","$blk=",t.blk,";continue;","} else {","$blk=$postfinally.gotoBlock;$postfinally=undefined;continue;","}","}")}},n.prototype.ctry=function(e){var t,n=e.handlers.length;if(e.finalbody){var i=this.newBlock("finalbody"),s=this.newBlock("finalexh"),r=this._gr("finally_reraise","undefined");this.u.tempsToSave.push(r),this.pushFinallyBlock(i);var a=this.peekFinallyBlock();this.setupExcept(s)}var l=[];for(t=0;t<n;++t)l.push(this.newBlock("except_"+t+"_"));var c=this.newBlock("unhandled"),u=this.newBlock("orelse"),h=this.newBlock("end");for(0!=l.length&&this.setupExcept(l[0]),this.vseqstmt(e.body),0!=l.length&&this.endExcept(),this._jump(u),t=0;t<n;++t){this.setBlock(l[t]);var d=e.handlers[t];if(!d.type&&t<n-1)throw new Sk.builtin.SyntaxError("default 'except:' must be last",this.filename,d.lineno);if(d.type){var f=this.vexpr(d.type),g=t==n-1?c:l[t+1];f=this._gr("instance","Sk.misceval.isTrue(Sk.builtin.isinstance($err, ",f,"))"),this._jumpfalse(f,g)}d.name&&this.vexpr(d.name,"$err"),this.vseqstmt(d.body),this._jump(h)}this.setBlock(c),o("throw $err;"),this.setBlock(u),this.vseqstmt(e.orelse),this._jump(h),this.setBlock(h),e.finalbody&&(this.endExcept(),this._jump(i),this.setBlock(s),o(r,"=$err;"),this._jump(i),this.setBlock(i),this.popFinallyBlock(),this.vseqstmt(e.finalbody),o("if(",r,"!==undefined) { throw ",r,";}"),this.outputFinallyCascade(a))},n.prototype.cwith=function(e,t){var n=this.newBlock("withexh"),i=this.newBlock("withtidyup"),s=this.newBlock("withcarryon"),r=this._gr("mgr",this.vexpr(e.items[t].context_expr));o("$ret = Sk.abstr.lookupSpecial(",r,",Sk.builtin.str.$exit);"),this._checkSuspension(e);var a=this._gr("exit","$ret");this.u.tempsToSave.push(a),o("$ret = Sk.abstr.lookupSpecial(",r,",Sk.builtin.str.$enter);"),this._checkSuspension(e),o("$ret = Sk.misceval.callsimOrSuspendArray($ret);"),this._checkSuspension(e),r=this._gr("value","$ret"),this.pushFinallyBlock(i);var l=this.u.finallyBlocks[this.u.finallyBlocks.length-1];this.setupExcept(n),e.items[t].optional_vars&&this.nameop(e.items[t].optional_vars.id,Sk.astnodes.Store,r),t+1<e.items.length?this.cwith(e,t+1):this.vseqstmt(e.body),this.endExcept(),this._jump(i),this.setBlock(n),o("$ret = Sk.misceval.applyOrSuspend(",a,",undefined,Sk.builtin.getExcInfo($err),undefined,[]);"),this._checkSuspension(e),this._jumptrue("$ret",s),o("throw $err;"),this.setBlock(i),this.popFinallyBlock(),o("$ret = Sk.misceval.callsimOrSuspendArray(",a,",[Sk.builtin.none.none$,Sk.builtin.none.none$,Sk.builtin.none.none$]);"),this._checkSuspension(e),this.outputFinallyCascade(l),this._jump(s),this.setBlock(s)},n.prototype.cassert=function(e){var t=this.vexpr(e.test),n=this.newBlock("end");this._jumptrue(t,n),o("throw new Sk.builtin.AssertionError(",e.msg?this.vexpr(e.msg):"",");"),this.setBlock(n)},n.prototype.cimportas=function(e,t,n){var i=(e=e.v).indexOf("."),s=n;if(-1!==i)for(e=e.substr(i+1);-1!==i;)n=-1!==(i=e.indexOf("."))?e.substr(0,i):e,s=this._gr("lattr","Sk.abstr.gattr(",s,", new Sk.builtin.str('",n,"'))"),e=e.substr(i+1);return this.nameop(t,Sk.astnodes.Store,s)},n.prototype.cimport=function(e){var t,n=e.names.length;for(t=0;t<n;++t){var i=e.names[t];o("$ret = Sk.builtin.__import__(",i.name.$r().v,",$gbl,$loc,[],",Sk.__future__.absolute_import?0:-1,");"),this._checkSuspension(e);var s=this._gr("module","$ret");if(i.asname)this.cimportas(i.name,i.asname,s);else{var r=i.name;-1!==(i=r.v.indexOf("."))&&(r=new Sk.builtin.str(r.v.substr(0,i))),this.nameop(r,Sk.astnodes.Store,s)}}},n.prototype.cfromimport=function(e){var t,n=e.names.length,i=[],r=e.level;for(0!=r||Sk.__future__.absolute_import||(r=-1),t=0;t<n;++t)i[t]="'"+s(e.names[t].name.v)+"'";for(o("$ret = Sk.builtin.__import__(",e.module.$r().v,",$gbl,$loc,[",i,"],",r,");"),this._checkSuspension(e),r=this._gr("module","$ret"),t=0;t<n;++t){var a="'"+(i=e.names[t]).name.v+"'";if(0===t&&"*"===i.name.v){Sk.asserts.assert(1===n),o("Sk.importStar(",r,",$loc, $gbl);");break}var l=this._gr("item","Sk.abstr.gattr(",r,", new Sk.builtin.str(",a,"), undefined)");a=i.name,i.asname&&(a=i.asname),this.nameop(a,Sk.astnodes.Store,l)}},n.prototype.buildcodeobj=function(e,t,n,i,a,l){var c,u=[],h=[],d=[],f=[],g=null,p=null;if(n&&(h=this.vseqexpr(n)),i&&i.defaults&&(d=this.vseqexpr(i.defaults)),i&&i.kw_defaults&&(f=i.kw_defaults.map((e=>e?this.vexpr(e):"undefined"))),i&&i.vararg&&(g=i.vararg),i&&i.kwarg&&(p=i.kwarg),!Sk.__future__.python3&&i&&i.kwonlyargs&&0!=i.kwonlyargs.length)throw new Sk.builtin.SyntaxError("Keyword-only arguments are not supported in Python 2");var m=this.enterScope(t,e,e.lineno,this.canSuspend);n=this.u.ste.generator;var b=this.u.ste.hasFree,_=this.u.ste.childHasFree,v=this.newBlock("codeobj entry");this.u.prefixCode="var "+m+"=(function "+this.niceName(t.v)+"$(";var y=[];if(n){if(p)throw new Sk.builtin.SyntaxError(t.v+"(): keyword arguments in generators not supported",this.filename,e.lineno);if(g)throw new Sk.builtin.SyntaxError(t.v+"(): variable number of arguments in generators not supported",this.filename,e.lineno);y.push("$gen")}else{for(p&&(y.push("$kwa"),this.u.tempsToSave.push("$kwa")),c=0;i&&c<i.args.length;++c)y.push(this.nameop(i.args[c].arg,Sk.astnodes.Param));for(c=0;i&&i.kwonlyargs&&c<i.kwonlyargs.length;++c)y.push(this.nameop(i.kwonlyargs[c].arg,Sk.astnodes.Param));g&&y.push(this.nameop(i.vararg.arg,Sk.astnodes.Param))}let S=!n;b&&(S||y.push("$free"),this.u.tempsToSave.push("$free")),this.u.prefixCode=S?this.u.prefixCode+"$posargs,$kwargs":this.u.prefixCode+y.join(","),this.u.prefixCode+="){",n&&(this.u.prefixCode+="\n// generator\n"),b&&(this.u.prefixCode+="\n// has free\n"),_&&(this.u.prefixCode+="\n// has cell\n"),S&&(this.u.prefixCode+="\n// fast call\n");var w="{}";if(n&&(v="$gen.gi$resumeat",w="$gen.gi$locals"),c=",$cell={}",_&&n&&(c=",$cell=$gen.gi$cells"),this.u.varDeclsCode+="var $blk="+v+",$exc=[],$loc="+w+c+",$gbl="+(S?"this && this.func_globals":"this")+(S&&b?",$free=this && this.func_closure":"")+",$err=undefined,$ret=undefined,$postfinally=undefined,$currLineNo=undefined,$currColNo=undefined;",null!==Sk.execLimit&&(this.u.varDeclsCode+="if (typeof Sk.execStart === 'undefined') {Sk.execStart = Date.now()}"),null!==Sk.yieldLimit&&this.u.canSuspend&&(this.u.varDeclsCode+="if (typeof Sk.lastYield === 'undefined') {Sk.lastYield = Date.now()}"),this.u.varDeclsCode+="if ("+m+".$wakingSuspension!==undefined) { $wakeFromSuspension(); } else {",S){for(this.u.varDeclsCode=p||g||i&&i.kwonlyargs&&0!==i.kwonlyargs.length?this.u.varDeclsCode+"\nvar $args = this.$resolveArgs($posargs,$kwargs)\n":this.u.varDeclsCode+"var $args = ((!$kwargs || $kwargs.length===0) && $posargs.length==="+y.length+") ? $posargs : this.$resolveArgs($posargs,$kwargs)",c=0;c<y.length;c++)this.u.varDeclsCode+=","+y[c]+"=$args["+c+"]";this.u.varDeclsCode+=";\n"}if(n&&0<d.length)for(v=i.args.length-d.length,c=0;c<d.length;++c)y=this.nameop(i.args[c+v].arg,Sk.astnodes.Param),this.u.varDeclsCode+="if("+y+"===undefined)"+y+"="+m+".$defaults["+c+"];";for(c=0;i&&c<i.args.length;++c)y=i.args[c].arg,this.isCell(y)&&(y=s(r(this.u.private_,y).v),this.u.varDeclsCode+="$cell."+y+"="+y+";");for(c=0;i&&i.kwonlyargs&&c<i.kwonlyargs.length;++c)y=i.kwonlyargs[c].arg,this.isCell(y)&&(y=s(r(this.u.private_,y).v),this.u.varDeclsCode+="$cell."+y+"="+y+";");if(g&&this.isCell(g.arg)&&(c=s(r(this.u.private_,g.arg).v),this.u.varDeclsCode+="$cell."+c+"="+c+";"),p&&(this.u.localnames.push(p.arg.v),this.u.varDeclsCode+=p.arg.v+"=new Sk.builtins['dict']($kwa);",this.isCell(p.arg)&&(c=s(r(this.u.private_,p.arg).v),this.u.varDeclsCode+="$cell."+c+"="+c+";")),this.u.varDeclsCode+="}",Sk.__future__.python3&&l&&(this.u.varDeclsCode+="$gbl.__class__=$gbl."+l.v+";"),this.u.switchCode="while(true){try{",this.u.switchCode+=this.outputInterruptTest(),this.u.switchCode+="switch($blk){",this.u.suffixCode="} }catch(err){ if (!(err instanceof Sk.builtin.BaseException)) { err = new Sk.builtin.ExternalError(err); } err.traceback.push({lineno: $currLineNo, colno: $currColNo, filename: '"+this.filename+"'}); if ($exc.length>0) { $err = err; $blk=$exc.pop(); continue; } else { throw err; }} }});",a.call(this,m),i){for(let e of i.args)u.push(e.arg.v);for(let e of i.kwonlyargs||[])u.push(e.arg.v);this.u.argnames=u}if(this.exitScope(),0<d.length&&o(m,".$defaults=[",d.join(","),"];"),i&&i.kwonlyargs&&0<i.kwonlyargs.length&&(o(m,".co_argcount=",i.args.length,";"),o(m,".co_kwonlyargcount=",i.kwonlyargs.length,";"),o(m,".$kwdefs=[",f.join(","),"];")),0<u.length?o(m,".co_varnames=['",u.join("','"),"'];"):o(m,".co_varnames=[];"),o(m,".co_docstring=",this.cDocstringOfCode(e),";"),p&&o(m,".co_kwargs=1;"),g&&o(m,".co_varargs=1;"),n||o(m,".co_fastcall=1;"),e="",b&&(e=",$cell",(a=this.u.ste.hasFree)&&(e+=",$free")),n)return i&&0<i.args.length?this._gr("gener","new Sk.builtins['function']((function(){var $origargs=Array.prototype.slice.call(arguments);Sk.builtin.pyCheckArgsLen(\"",t.v,'",arguments.length,',i.args.length-d.length,",",i.args.length,");return new Sk.builtins['generator'](",m,",$gbl,$origargs",e,");}))"):this._gr("gener","new Sk.builtins['function']((function(){Sk.builtin.pyCheckArgsLen(\"",t.v,"\",arguments.length,0,0);return new Sk.builtins['generator'](",m,",$gbl,[]",e,");}))");if(0<h.length){o("$ret = new Sk.builtins['function'](",m,",$gbl",e,");");for(let e of h.reverse())o("$ret = Sk.misceval.callsimOrSuspendArray(",e,",[$ret]);"),this._checkSuspension();return this._gr("funcobj","$ret")}return this._gr("funcobj","new Sk.builtins['function'](",m,",$gbl",e,")")},n.prototype.maybeCDocstringOfBody=function(e){return 0===e.length||(e=e[0]).constructor!==Sk.astnodes.Expr||(e=e.value).constructor!==Sk.astnodes.Str?null:this.vexpr(e)},n.prototype.cDocstringOfCode=function(e){switch(e.constructor){case Sk.astnodes.AsyncFunctionDef:case Sk.astnodes.FunctionDef:return this.maybeCDocstringOfBody(e.body)||"Sk.builtin.none.none$";case Sk.astnodes.Lambda:case Sk.astnodes.GeneratorExp:return"Sk.builtin.none.none$";default:Sk.asserts.fail("unexpected node kind ".concat(e.constructor.name))}},n.prototype.cfunction=function(e,t){Sk.asserts.assert(e instanceof Sk.astnodes.FunctionDef),t=this.buildcodeobj(e,e.name,e.decorator_list,e.args,(function(t){this.vseqstmt(e.body),o("return Sk.builtin.none.none$;")}),t),this.nameop(e.name,Sk.astnodes.Store,t)},n.prototype.clambda=function(e){return Sk.asserts.assert(e instanceof Sk.astnodes.Lambda),this.buildcodeobj(e,new Sk.builtin.str("<lambda>"),null,e.args,(function(t){t=this.vexpr(e.body),o("return ",t,";")}))},n.prototype.cifexp=function(e){var t=this.newBlock("next of ifexp"),n=this.newBlock("end of ifexp"),i=this._gr("res","null"),s=this.vexpr(e.test);return this._jumpfalse(s,t),o(i,"=",this.vexpr(e.body),";"),this._jump(n),this.setBlock(t),o(i,"=",this.vexpr(e.orelse),";"),this._jump(n),this.setBlock(n),i},n.prototype.cgenexpgen=function(e,t,n){var i=this.newBlock("start for "+t),s=this.newBlock("skip for "+t);this.newBlock("if cleanup for "+t);var r=this.newBlock("end for "+t),a=e[t];if(0===t)var l="$loc.$iter0";else{var c=this.vexpr(a.iter);l="$loc."+this.gensym("iter"),o(l,"=","Sk.abstr.iter(",c,");")}this._jump(i),this.setBlock(i),this.annotateSource(n),o("$ret = Sk.abstr.iternext(",l,this.u.canSuspend?", true":", false",");"),this._checkSuspension(n),c=this._gr("next","$ret"),this._jumpundef(c,r),this.vexpr(a.target,c);var u=a.ifs?a.ifs.length:0;for(l=0;l<u;++l)this.annotateSource(a.ifs[l]),c=this.vexpr(a.ifs[l]),this._jumpfalse(c,i);++t<e.length&&this.cgenexpgen(e,t,n),t>=e.length&&(this.annotateSource(n),e=this.vexpr(n),o("return [",s,"/*resume*/,",e,"/*ret*/];"),this.setBlock(s)),this._jump(i),this.setBlock(r),1===t&&o("return Sk.builtin.none.none$;")},n.prototype.cgenexp=function(e){var t=this.buildcodeobj(e,new Sk.builtin.str("<genexpr>"),null,null,(function(t){this.cgenexpgen(e.generators,0,e.elt)}));return t=this._gr("gener","Sk.misceval.callsimArray(",t,");"),o(t,".gi$locals.$iter0=Sk.abstr.iter(",this.vexpr(e.generators[0].iter),");"),t},n.prototype.cclass=function(e){Sk.asserts.assert(e instanceof Sk.astnodes.ClassDef);var t=this.vseqexpr(e.decorator_list),n=this.vseqexpr(e.bases),i=this.enterScope(e.name,e,e.lineno),s=this.newBlock("class entry");this.u.prefixCode="var "+i+"=(function $"+e.name.v+"$class_outer($globals,$locals,$cell){var $gbl=$globals,$loc=$locals;$free=$globals;",this.u.switchCode+="(function $"+e.name.v+"$_closure($cell){",this.u.switchCode+="var $blk="+s+",$exc=[],$ret=undefined,$postfinally=undefined,$currLineNo=undefined,$currColNo=undefined;",null!==Sk.execLimit&&(this.u.switchCode+="if (typeof Sk.execStart === 'undefined') {Sk.execStart = Date.now()}"),null!==Sk.yieldLimit&&this.u.canSuspend&&(this.u.switchCode+="if (typeof Sk.lastYield === 'undefined') {Sk.lastYield = Date.now()}"),this.u.switchCode+="while(true){try{",this.u.switchCode+=this.outputInterruptTest(),this.u.switchCode+="switch($blk){",this.u.suffixCode="}}catch(err){ if (!(err instanceof Sk.builtin.BaseException)) { err = new Sk.builtin.ExternalError(err); } err.traceback.push({lineno: $currLineNo, colno: $currColNo, filename: '"+this.filename+"'}); if ($exc.length>0) { $err = err; $blk=$exc.pop(); continue; } else { throw err; }}}",this.u.suffixCode+="}).call(null, $cell);});",this.u.private_=e.name,this.cbody(e.body,e.name),o("return;"),this.exitScope(),o("$ret = Sk.misceval.buildClass($gbl,",i,",",e.name.$r().v,",[",n,"], $cell);");for(let r of t)o("$ret = Sk.misceval.callsimOrSuspendArray(",r,", [$ret]);"),this._checkSuspension();this.nameop(e.name,Sk.astnodes.Store,"$ret")},n.prototype.ccontinue=function(e){var t=this.peekFinallyBlock();if(0==this.u.continueBlocks.length)throw new Sk.builtin.SyntaxError("'continue' outside loop",this.filename,e.lineno);e=this.u.continueBlocks[this.u.continueBlocks.length-1],Sk.asserts.assert(this.u.breakBlocks.length===this.u.continueBlocks.length),t&&t.breakDepth==this.u.continueBlocks.length?o("$postfinally={isBreak:true,gotoBlock:",e,"};"):this._jump(e)},n.prototype.cbreak=function(e){var t=this.peekFinallyBlock();if(0===this.u.breakBlocks.length)throw new Sk.builtin.SyntaxError("'break' outside loop",this.filename,e.lineno);e=this.u.breakBlocks[this.u.breakBlocks.length-1],t&&t.breakDepth==this.u.breakBlocks.length?o("$postfinally={isBreak:true,gotoBlock:",e,"};"):this._jump(e)},n.prototype.vstmt=function(e,t){if(this.u.lineno=e.lineno,this.u.linenoSet=!1,this.u.localtemps=[],Sk.debugging&&this.u.canSuspend){var n=this.newBlock("debug breakpoint for line "+e.lineno);o("if (Sk.breakpoints('"+this.filename+"',"+e.lineno+","+e.col_offset+")) {","var $susp = $saveSuspension({data: {type: 'Sk.debug'}, resume: function() {}}, '"+this.filename+"',"+e.lineno+","+e.col_offset+");","$susp.$blk = "+n+";","$susp.optional = true;","return $susp;","}"),this._jump(n),this.setBlock(n),this.u.doesSuspend=!0}switch(this.annotateSource(e),e.constructor){case Sk.astnodes.FunctionDef:this.cfunction(e,t);break;case Sk.astnodes.ClassDef:this.cclass(e);break;case Sk.astnodes.Return:if(this.u.ste.blockType!==Sk.SYMTAB_CONSTS.FunctionBlock)throw new Sk.builtin.SyntaxError("'return' outside function",this.filename,e.lineno);n=e.value?this.vexpr(e.value):"Sk.builtin.none.none$",0==this.u.finallyBlocks.length?o("return ",n,";"):(o("$postfinally={returning:",n,"};"),this._jump(this.peekFinallyBlock().blk));break;case Sk.astnodes.Delete:this.vseqexpr(e.targets);break;case Sk.astnodes.Assign:var i=e.targets.length;for(n=this.vexpr(e.value),t=0;t<i;++t)this.vexpr(e.targets[t],n);break;case Sk.astnodes.AnnAssign:n=this.vexpr(e.value),this.vexpr(e.target,n),this.vexpr(e.annotation);break;case Sk.astnodes.AugAssign:return this.caugassign(e);case Sk.astnodes.Print:this.cprint(e);break;case Sk.astnodes.For:return this.cfor(e);case Sk.astnodes.While:return this.cwhile(e);case Sk.astnodes.If:return this.cif(e);case Sk.astnodes.Raise:return this.craise(e);case Sk.astnodes.Try:return this.ctry(e);case Sk.astnodes.With:return this.cwith(e,0);case Sk.astnodes.Assert:return this.cassert(e);case Sk.astnodes.Import:return this.cimport(e);case Sk.astnodes.ImportFrom:return this.cfromimport(e);case Sk.astnodes.Global:break;case Sk.astnodes.Expr:this.vexpr(e.value);break;case Sk.astnodes.Pass:break;case Sk.astnodes.Break:this.cbreak(e);break;case Sk.astnodes.Continue:this.ccontinue(e);break;case Sk.astnodes.Debugger:o("debugger;");break;default:Sk.asserts.fail("unhandled case in vstmt: "+JSON.stringify(e))}},n.prototype.vseqstmt=function(e){var t;for(t=0;t<e.length;++t)this.vstmt(e[t])},n.prototype.isCell=function(e){return e=s(r(this.u.private_,e).v),this.u.ste.getScope(e)===Sk.SYMTAB_CONSTS.CELL},n.prototype.nameop=function(e,t,n){if((t===Sk.astnodes.Store||t===Sk.astnodes.AugStore||t===Sk.astnodes.Del)&&"__debug__"===e.v)throw new Sk.builtin.SyntaxError("can not assign to __debug__",this.filename,this.u.lineno);if(Sk.asserts.assert("None"!==e.v),"NotImplemented"===e.v)return"Sk.builtin.NotImplemented.NotImplemented$";var i=r(this.u.private_,e).v;i=s(i);var a=3,l=this.u.ste.getScope(i),c=null;switch(l){case Sk.SYMTAB_CONSTS.FREE:c="$free",a=2;break;case Sk.SYMTAB_CONSTS.CELL:c="$cell",a=2;break;case Sk.SYMTAB_CONSTS.LOCAL:this.u.ste.blockType!==Sk.SYMTAB_CONSTS.FunctionBlock||this.u.ste.generator||(a=0);break;case Sk.SYMTAB_CONSTS.GLOBAL_IMPLICIT:this.u.ste.blockType===Sk.SYMTAB_CONSTS.FunctionBlock&&(a=1);break;case Sk.SYMTAB_CONSTS.GLOBAL_EXPLICIT:a=1}switch(Sk.asserts.assert(l||"_"===e.v.charAt(1)),e=i,this.u.ste.generator||this.u.ste.blockType!==Sk.SYMTAB_CONSTS.FunctionBlock?i="$loc."+i:(0===a||3===a)&&this.u.localnames.push(i),a){case 0:switch(t){case Sk.astnodes.Load:case Sk.astnodes.Param:return o("if (",i," === undefined) { throw new Sk.builtin.UnboundLocalError('local variable \\'",i,"\\' referenced before assignment'); }\n"),i;case Sk.astnodes.Store:o(i,"=",n,";");break;case Sk.astnodes.Del:o("delete ",i,";");break;default:Sk.asserts.fail("unhandled")}break;case 3:switch(t){case Sk.astnodes.Load:return this._gr("loadname",i,"!==undefined?",i,":Sk.misceval.loadname('",e,"',$gbl);");case Sk.astnodes.Store:o(i,"=",n,";");break;case Sk.astnodes.Del:o("delete ",i,";");break;case Sk.astnodes.Param:return i;default:Sk.asserts.fail("unhandled")}break;case 1:switch(t){case Sk.astnodes.Load:return this._gr("loadgbl","Sk.misceval.loadname('",e,"',$gbl)");case Sk.astnodes.Store:o("$gbl.",e,"=",n,";");break;case Sk.astnodes.Del:o("delete $gbl.",e);break;default:Sk.asserts.fail("unhandled case in name op_global")}break;case 2:switch(t){case Sk.astnodes.Load:return c+"."+e;case Sk.astnodes.Store:o(c,".",e,"=",n,";");break;case Sk.astnodes.Param:return e;default:Sk.asserts.fail("unhandled case in name op_deref")}break;default:Sk.asserts.fail("unhandled case")}},n.prototype.enterScope=function(e,t,n,s){var r=new i;return r.ste=this.st.getStsForAst(t),r.name=e,r.firstlineno=n,r.canSuspend=s||!1,this.u&&this.u.private_&&(r.private_=this.u.private_),this.stack.push(this.u),this.allUnits.push(r),e=this.gensym("scope"),r.scopename=e,this.u=r,this.u.activateScope(),this.nestlevel++,e},n.prototype.exitScope=function(){var e=this.u;if(this.nestlevel--,(this.u=0<=this.stack.length-1?this.stack.pop():null)&&this.u.activateScope(),"<module>"!==e.name.v){var t=e.name.$r().v;t=t.substring(1,t.length-1),o(e.scopename,".co_name=new Sk.builtins['str']('",t,"');"),this.stack.length&&"class"==this.u.ste.blockType&&o(e.scopename,".co_qualname=new Sk.builtins['str']('"+this.u.name.v+"."+t+"');")}for(var n in e.consts)e.consts.hasOwnProperty(n)&&(e.suffixCode+=n+" = "+e.consts[n]+";")},n.prototype.cbody=function(e,t){var n=0;const i=this.maybeCDocstringOfBody(e);for(null!==i&&(o("$loc.__doc__ = ",i,";"),n=1);n<e.length;++n)this.vstmt(e[n],t)},n.prototype.cprint=function(e){var t;Sk.asserts.assert(e instanceof Sk.astnodes.Print),e.dest&&this.vexpr(e.dest);var n=e.values.length;for(t=0;t<n;++t)o("$ret = Sk.misceval.print_(","new Sk.builtins['str'](",this.vexpr(e.values[t]),").v);"),this._checkSuspension(e);e.nl&&(o("$ret = Sk.misceval.print_(",'"\\n");'),this._checkSuspension(e))},n.prototype.cmod=function(e){var t=this.enterScope(new Sk.builtin.str("<module>"),e,0,this.canSuspend),n=this.newBlock("module entry");if(this.u.prefixCode="var "+t+"=(function($forcegbl){",this.u.varDeclsCode="var $gbl = $forcegbl || {}, $blk="+n+",$exc=[],$loc=$gbl,$cell={},$err=undefined;$loc.__file__=new Sk.builtins.str('"+this.filename+"');var $ret=undefined,$postfinally=undefined,$currLineNo=undefined,$currColNo=undefined;",null!==Sk.execLimit&&(this.u.varDeclsCode+="if (typeof Sk.execStart === 'undefined') {Sk.execStart = Date.now()}"),null!==Sk.yieldLimit&&this.u.canSuspend&&(this.u.varDeclsCode+="if (typeof Sk.lastYield === 'undefined') {Sk.lastYield = Date.now()}"),this.u.varDeclsCode+="if ("+t+".$wakingSuspension!==undefined) { $wakeFromSuspension(); }if (Sk.retainGlobals) {    if (Sk.globals) { $gbl = Sk.globals; Sk.globals = $gbl; $loc = $gbl; }    if (Sk.globals) { $gbl = Sk.globals; Sk.globals = $gbl; $loc = $gbl; $loc.__file__=new Sk.builtins.str('"+this.filename+"');}    else { Sk.globals = $gbl; }} else { Sk.globals = $gbl; }",this.u.switchCode="while(true){try{",this.u.switchCode+=this.outputInterruptTest(),this.u.switchCode+="switch($blk){",this.u.suffixCode="}",this.u.suffixCode+="}catch(err){ if (!(err instanceof Sk.builtin.BaseException)) { err = new Sk.builtin.ExternalError(err); } err.traceback.push({lineno: $currLineNo, colno: $currColNo, filename: '"+this.filename+"'}); if ($exc.length>0) { $err = err; $blk=$exc.pop(); continue; } else { throw err; }} } });",e.constructor===Sk.astnodes.Module)this.cbody(e.body),o("return $loc;");else Sk.asserts.fail("todo; unhandled case in compilerMod");return this.exitScope(),this.result.push(this.outputAllUnits()),t},Sk.compile=function(e,t,i,s){i=Sk.__future__,Sk.__future__=Object.create(Sk.__future__);var r=Sk.parse(t,e),o=Sk.astFromParse(r.cst,t,r.flags);return r=r.flags,t=(e=new n(t,Sk.symboltable(o,t),r,s,e)).cmod(o),Sk.__future__=i,{funcname:"$compiledmod",code:"$compiledmod = function() {"+e.result.join("")+"\nreturn "+t+";}();"}},Sk.exportSymbol("Sk.compile",Sk.compile),Sk.resetCompiler=function(){Sk.gensymcount=0},Sk.exportSymbol("Sk.resetCompiler",Sk.resetCompiler),Sk.fixReserved=s,Sk.exportSymbol("Sk.fixReserved",Sk.fixReserved),Sk.unfixReserved=function(e){return e.replace(/_\$rw\$$/,"")},Sk.exportSymbol("Sk.unfixReserved",Sk.unfixReserved),Sk.mangleName=r,Sk.exportSymbol("Sk.mangleName",Sk.mangleName),Sk.reservedWords_=a,Sk.exportSymbol("Sk.reservedWords_",Sk.reservedWords_)},function(e,t){Sk.sysmodules=new Sk.builtin.dict([]),Sk.realsyspath=void 0,Sk.importSearchPathForName=function(e,t,n){var i=e.replace(/\./g,"/"),s=function(e,t){return Sk.misceval.chain(Sk.misceval.tryCatch((function(){return Sk.read(e)}),(function(e){})),(function(n){if(void 0!==n)return new Sk.misceval.Break({filename:e,code:n,packagePath:t})}))};return void 0===n&&(n=Sk.realsyspath),Sk.misceval.iterFor(n.tp$iter(),(function(e){return Sk.misceval.chain(s(e.v+"/"+i+t,!1),(function(n){return n||s(e.v+"/"+i+"/__init__"+t,e.v+"/"+i)}))}))},Sk.importSetUpPath=function(e){if(!Sk.realsyspath){var t=[new Sk.builtin.str("src/builtin"),new Sk.builtin.str("src/lib"),new Sk.builtin.str(".")];for(e=0;e<Sk.syspath.length;++e)t.push(new Sk.builtin.str(Sk.syspath[e]));Sk.realsyspath=new Sk.builtin.list(t)}},Sk.importModuleInternal_=function(e,t,n,i,s,r,o){var a,l,c,u,h=null,d=void 0!==s?s.tp$getattr(Sk.builtin.str.$name):void 0,f=void 0!==d?d.v+".":"",g=void 0!==s?s.tp$getattr(Sk.builtin.str.$path):void 0;if(Sk.importSetUpPath(o),s&&!d){if(r)return;throw new Sk.builtin.ValueError("Attempted to import relative to invalid package (no name)")}void 0===n&&(n=f+e);var p=e.split(".");if(1<p.length){var m=p.slice(0,p.length-1).join(".");h=Sk.importModuleInternal_(m,t,void 0,void 0,s,r,o)}var b=Sk.misceval.chain(h,(function(b){return h=b,void 0!==(l=Sk.sysmodules.quick$lookup(new Sk.builtin.str(n)))?h||l:Sk.misceval.chain(void 0,(function(){var t=e;if(1<p.length){if(!h)return;c=Sk.sysmodules.mp$subscript(new Sk.builtin.str(f+m)),t=p[p.length-1],g=c.tp$getattr(Sk.builtin.str.$path)}if(u=new Sk.builtin.module,"string"===typeof i){a=e+".py";var n=Sk.compile(i,a,"exec",o)}else n=Sk.misceval.chain(void 0,(function(){if(Sk.onBeforeImport&&"function"===typeof Sk.onBeforeImport)return Sk.onBeforeImport(e)}),(function(n){if(!1===n)throw new Sk.builtin.ImportError("Importing "+e+" is not allowed");if("string"===typeof n)throw new Sk.builtin.ImportError(n);return Sk.importSearchPathForName(t,".js",g)}),(function(e){return e?{funcname:"$builtinmodule",code:e.code,filename:e.filename,packagePath:e.packagePath}:Sk.misceval.chain(Sk.importSearchPathForName(t,".py",g),(function(t){if(e=t)return Sk.compile(e.code,e.filename,"exec",o)}),(function(t){if(t)return t.packagePath=e.packagePath,t}))}));return n}),(function(e){if(e){Sk.sysmodules.mp$ass_subscript(new Sk.builtin.str(n),u);var i=u.$js=e.code;if(null==a&&(a=e.filename),null!=Sk.dateSet&&Sk.dateSet||(i="Sk.execStart = Sk.lastYield = new Date();\n"+e.code,Sk.dateSet=!0),t){i=function(e){var t,n=Sk.js_beautify(e).split("\n");for(t=1;t<=n.length;++t){var i=(""+t).length;for(e="";5>i;++i)e+=" ";n[t-1]="/* "+e+t+" */ "+n[t-1]}return n.join("\n")}(i),Sk.debugout(i)}return i+="\n"+e.funcname+";",i=Sk.global.eval(i),u.$d={__name__:new Sk.builtin.str(n),__doc__:Sk.builtin.none.none$,__package__:e.packagePath?new Sk.builtin.str(n):m?new Sk.builtin.str(f+m):d||Sk.builtin.none.none$},e.packagePath&&(u.$d.__path__=new Sk.builtin.tuple([new Sk.builtin.str(e.packagePath)])),i(u.$d)}}),(function(t){var n;if(void 0===t){if(r&&!h)return;throw new Sk.builtin.ImportError("No module named "+e)}if(t!==u.$d){for(n in u.$d)t[n]||(t[n]=u.$d[n]);u.$d=t}if(Sk.onAfterImport&&"function"===typeof Sk.onAfterImport)try{Sk.onAfterImport(e)}catch(i){}return h?(c.tp$setattr(new Sk.builtin.str(p[p.length-1]),u),h):(s&&s.tp$setattr(new Sk.builtin.str(e),u),u)}))}));return o?b:Sk.misceval.retryOptionalSuspensionOrThrow(b)},Sk.importModule=function(e,t,n){return Sk.importModuleInternal_(e,t,void 0,void 0,void 0,!1,n)},Sk.importMain=function(e,t,n){return Sk.dateSet=!1,Sk.filesLoaded=!1,Sk.sysmodules=new Sk.builtin.dict([]),Sk.realsyspath=void 0,Sk.resetCompiler(),Sk.importModuleInternal_(e,t,"__main__",void 0,void 0,!1,n)},Sk.importMainWithBody=function(e,t,n,i){return Sk.dateSet=!1,Sk.filesLoaded=!1,Sk.sysmodules=new Sk.builtin.dict([]),Sk.realsyspath=void 0,Sk.resetCompiler(),Sk.importModuleInternal_(e,t,"__main__",n,void 0,!1,i)},Sk.importBuiltinWithBody=function(e,t,n,i){return Sk.importModuleInternal_(e,t,"__builtin__."+e,n,void 0,!1,i)},Sk.builtin.__import__=function(e,t,n,i,s){var r,o=Sk.globals;if(void 0===s&&(s=Sk.__future__.absolute_import?0:-1),0!==s&&t.__package__&&t.__package__!==Sk.builtin.none.none$){if((r=t.__package__.v)&&0<s){if(t=r.split("."),s-1>=t.length)throw new Sk.builtin.ValueError("Attempted relative import beyond toplevel package");t.length-=s-1,r=t.join(".")}var a=Sk.sysmodules.quick$lookup(new Sk.builtin.str(r))}if(0<s&&void 0===a)throw new Sk.builtin.ValueError("Attempted relative import in non-package");return e.split("."),Sk.misceval.chain(void 0,(function(){if(0!==s&&void 0!==a)return""===e?a:Sk.importModuleInternal_(e,void 0,r+"."+e,void 0,a,-1==s,!0)}),(function(t){return void 0===t?(r=a=void 0,Sk.importModuleInternal_(e,void 0,void 0,void 0,void 0,!1,!0)):t}),(function(t){if(i&&0!==i.length){var n,s=Sk.sysmodules.mp$subscript(new Sk.builtin.str((r||"")+(r&&e?".":"")+e));for(t=0;t<i.length;t++){var o=i[t];"*"!=o&&void 0===s.tp$getattr(new Sk.builtin.str(o))&&(n=Sk.misceval.chain(n,Sk.importModuleInternal_.bind(null,o,void 0,void 0,void 0,s,!0,!0)))}return Sk.misceval.chain(n,(function(){return Sk.asserts.assert(s),s}))}return t}),(function(e){return o!==Sk.globals&&(Sk.globals=o),e}))},Sk.importStar=function(e,t,n){if(n=e.tp$getattr(new Sk.builtin.str("__all__")))for(let i=Sk.abstr.iter(n),s=i.tp$iternext();void 0!==s;s=i.tp$iternext())t[s.v]=Sk.abstr.gattr(e,s);else{n=Object.getOwnPropertyNames(e.$d);for(let i in n)"_"!=n[i].charAt(0)&&(t[n[i]]=e.$d[n[i]])}},Sk.exportSymbol("Sk.importMain",Sk.importMain),Sk.exportSymbol("Sk.importMainWithBody",Sk.importMainWithBody),Sk.exportSymbol("Sk.importBuiltinWithBody",Sk.importBuiltinWithBody),Sk.exportSymbol("Sk.builtin.__import__",Sk.builtin.__import__),Sk.exportSymbol("Sk.importStar",Sk.importStar)},function(e,t){Sk.builtin.timSort=function(e,t){this.list=new Sk.builtin.list(e.v),this.MIN_GALLOP=7,this.listlength=t||e.sq$length()},Sk.builtin.timSort.prototype.lt=function(e,t){return Sk.misceval.richCompareBool(e,t,"Lt")},Sk.builtin.timSort.prototype.le=function(e,t){return!this.lt(t,e)},Sk.builtin.timSort.prototype.setitem=function(e,t){this.list.v[e]=t},Sk.builtin.timSort.prototype.binary_sort=function(e,t){var n;for(n=e.base+t;n<e.base+e.len;n++){var i=e.base,s=n;for(t=e.getitem(s);i<s;){var r=i+(s-i>>1);this.lt(t,e.getitem(r))?s=r:i=r+1}for(Sk.asserts.assert(i===s),r=n;r>i;r--)e.setitem(r,e.getitem(r-1));e.setitem(i,t)}},Sk.builtin.timSort.prototype.count_run=function(e){var t;if(1>=e.len)var n=e.len,i=!1;else if(n=2,this.lt(e.getitem(e.base+1),e.getitem(e.base)))for(i=!0,t=e.base+2;t<e.base+e.len&&this.lt(e.getitem(t),e.getitem(t-1));t++)n++;else for(i=!1,t=e.base+2;t<e.base+e.len&&!this.lt(e.getitem(t),e.getitem(t-1));t++)n++;return{run:new Sk.builtin.listSlice(e.list,e.base,n),descending:i}},Sk.builtin.timSort.prototype.sort=function(){var e,t=new Sk.builtin.listSlice(this.list,0,this.listlength);if(!(2>t.len)){for(this.merge_init(),e=this.merge_compute_minrun(t.len);0<t.len;){var n=this.count_run(t);if(n.descending&&n.run.reverse(),n.run.len<e){var i=n.run.len;n.run.len=e<t.len?e:t.len,this.binary_sort(n.run,i)}t.advance(n.run.len),this.pending.push(n.run),this.merge_collapse()}Sk.asserts.assert(t.base==this.listlength),this.merge_force_collapse(),Sk.asserts.assert(1==this.pending.length),Sk.asserts.assert(0===this.pending[0].base),Sk.asserts.assert(this.pending[0].len==this.listlength)}},Sk.builtin.timSort.prototype.gallop=function(e,t,n,i){var s;Sk.asserts.assert(0<=n&&n<t.len);var r=this;i=i?function(e,t){return r.le(e,t)}:function(e,t){return r.lt(e,t)};var o=t.base+n,a=0,l=1;if(i(t.getitem(o),e)){for(s=t.len-n;l<s&&i(t.getitem(o+l),e);){a=l;try{l=1+(l<<1)}catch(c){l=s}}l>s&&(l=s),a+=n,l+=n}else{for(s=n+1;l<s&&!i(t.getitem(o-l),e);){a=l;try{l=1+(l<<1)}catch(c){l=s}}l>s&&(l=s),o=n-a,a=n-l,l=o}for(Sk.asserts.assert(-1<=a<l<=t.len),a+=1;a<l;)n=a+(l-a>>1),i(t.getitem(t.base+n),e)?a=n+1:l=n;return Sk.asserts.assert(a==l),l},Sk.builtin.timSort.prototype.merge_init=function(){this.min_gallop=this.MIN_GALLOP,this.pending=[]},Sk.builtin.timSort.prototype.merge_lo=function(e,t){var n,i,s;Sk.asserts.assert(0<e.len&&0<t.len&&e.base+e.len==t.base);var r=this.min_gallop,o=e.base;e=e.copyitems();try{if(this.setitem(o,t.popleft()),o++,1!=e.len&&0!==t.len)for(;;){for(i=n=0;;)if(this.lt(t.getitem(t.base),e.getitem(e.base))){if(this.setitem(o,t.popleft()),o++,0===t.len)return;if(n=0,++i>=r)break}else{if(this.setitem(o,e.popleft()),o++,1==e.len)return;if(i=0,++n>=r)break}for(r+=1;;){for(this.min_gallop=r-=1<r,n=this.gallop(t.getitem(t.base),e,0,!0),s=e.base;s<e.base+n;s++)this.setitem(o,e.getitem(s)),o++;if(e.advance(n),1>=e.len)return;if(this.setitem(o,t.popleft()),o++,0===t.len)return;for(i=this.gallop(e.getitem(e.base),t,0,!1),s=t.base;s<t.base+i;s++)this.setitem(o,t.getitem(s)),o++;if(t.advance(i),0===t.len)return;if(this.setitem(o,e.popleft()),o++,1==e.len)return;if(n<this.MIN_GALLOP&&i<this.MIN_GALLOP)break;r++,this.min_gallop=r}}}finally{for(Sk.asserts.assert(0<=e.len&&0<=t.len),s=t.base;s<t.base+t.len;s++)this.setitem(o,t.getitem(s)),o++;for(s=e.base;s<e.base+e.len;s++)this.setitem(o,e.getitem(s)),o++}},Sk.builtin.timSort.prototype.merge_hi=function(e,t){var n,i,s;Sk.asserts.assert(0<e.len&&0<t.len&&e.base+e.len==t.base);var r=this.min_gallop,o=t.base+t.len;t=t.copyitems();try{if(o--,this.setitem(o,e.popright()),0!==e.len&&1!=t.len)for(;;){for(i=n=0;;){var a=e.getitem(e.base+e.len-1),l=t.getitem(t.base+t.len-1);if(this.lt(l,a)){if(o--,this.setitem(o,a),e.len--,0===e.len)return;if(i=0,++n>=r)break}else{if(o--,this.setitem(o,l),t.len--,1==t.len)return;if(n=0,++i>=r)break}}for(r+=1;;){this.min_gallop=r-=1<r,l=t.getitem(t.base+t.len-1);var c=this.gallop(l,e,e.len-1,!0);for(n=e.len-c,s=e.base+e.len-1;s>e.base+c-1;s--)o--,this.setitem(o,e.getitem(s));if(e.len-=n,0===e.len)return;if(o--,this.setitem(o,t.popright()),1==t.len)return;for(a=e.getitem(e.base+e.len-1),c=this.gallop(a,t,t.len-1,!1),i=t.len-c,s=t.base+t.len-1;s>t.base+c-1;s--)o--,this.setitem(o,t.getitem(s));if(t.len-=i,1>=t.len)return;if(o--,this.setitem(o,e.popright()),0===e.len)return;if(n<this.MIN_GALLOP&&i<this.MIN_GALLOP)break;r++,this.min_gallop=r}}}finally{for(Sk.asserts.assert(0<=e.len&&0<=t.len),s=e.base+e.len-1;s>e.base-1;s--)o--,this.setitem(o,e.getitem(s));for(s=t.base+t.len-1;s>t.base-1;s--)o--,this.setitem(o,t.getitem(s))}},Sk.builtin.timSort.prototype.merge_at=function(e){0>e&&(e=this.pending.length+e);var t=this.pending[e],n=this.pending[e+1];Sk.asserts.assert(0<t.len&&0<n.len),Sk.asserts.assert(t.base+t.len==n.base),this.pending[e]=new Sk.builtin.listSlice(this.list,t.base,t.len+n.len),this.pending.splice(e+1,1),e=this.gallop(n.getitem(n.base),t,0,!0),t.advance(e),0!==t.len&&(n.len=this.gallop(t.getitem(t.base+t.len-1),n,n.len-1,!1),0!==n.len&&(t.len<=n.len?this.merge_lo(t,n):this.merge_hi(t,n)))},Sk.builtin.timSort.prototype.merge_collapse=function(){for(var e=this.pending;1<e.length;)if(3<=e.length&&e[e.length-3].len<=e[e.length-2].len+e[e.length-1].len)e[e.length-3].len<e[e.length-1].len?this.merge_at(-3):this.merge_at(-2);else{if(!(e[e.length-2].len<=e[e.length-1].len))break;this.merge_at(-2)}},Sk.builtin.timSort.prototype.merge_force_collapse=function(){for(var e=this.pending;1<e.length;)3<=e.length&&e[e.length-3].len<e[e.length-1].len?this.merge_at(-3):this.merge_at(-2)},Sk.builtin.timSort.prototype.merge_compute_minrun=function(e){for(var t=0;64<=e;)t|=1&e,e>>=1;return e+t},Sk.builtin.listSlice=function(e,t,n){this.list=e,this.base=t,this.len=n},Sk.builtin.listSlice.prototype.copyitems=function(){var e=this.base,t=this.base+this.len;return Sk.asserts.assert(0<=e<=t),new Sk.builtin.listSlice(new Sk.builtin.list(this.list.v.slice(e,t)),0,this.len)},Sk.builtin.listSlice.prototype.advance=function(e){this.base+=e,this.len-=e,Sk.asserts.assert(this.base<=this.list.sq$length())},Sk.builtin.listSlice.prototype.getitem=function(e){return this.list.v[e]},Sk.builtin.listSlice.prototype.setitem=function(e,t){this.list.v[e]=t},Sk.builtin.listSlice.prototype.popleft=function(){var e=this.list.v[this.base];return this.base++,this.len--,e},Sk.builtin.listSlice.prototype.popright=function(){return this.len--,this.list.v[this.base+this.len]},Sk.builtin.listSlice.prototype.reverse=function(){for(var e,t,n=this.list,i=this.base,s=i+this.len-1;i<s;)e=n.v[s],t=n.v[i],n.v[i]=e,n.v[s]=t,i++,s--},Sk.exportSymbol("Sk.builtin.listSlice",Sk.builtin.listSlice),Sk.exportSymbol("Sk.builtin.timSort",Sk.builtin.timSort)},function(e,t){Sk.builtin.super_=Sk.abstr.buildNativeClass("super",{constructor:function(e,t){if(Sk.asserts.assert(this instanceof Sk.builtin.super_,"bad call to super, use 'new'"),this.type=e,this.obj=t,void 0!==e&&!Sk.builtin.checkClass(e))throw new Sk.builtin.TypeError("must be type, not "+Sk.abstr.typeName(e));this.obj_type=void 0!==this.obj?this.$supercheck(e,this.obj):null},slots:{tp$doc:"super() -> same as super(__class__, <first argument>)\nsuper(type) -> unbound super object\nsuper(type, obj) -> bound super object; requires isinstance(obj, type)\nsuper(type, type2) -> bound super object; requires issubclass(type2, type)\nTypical use to call a cooperative superclass method:\nclass C(B):\n    def meth(self, arg):\n        super().meth(arg)\nThis works for class methods too:\nclass C(B):\n    @classmethod\n    def cmeth(cls, arg):\n        super().cmeth(arg)\n",tp$new:Sk.generic.new,tp$init(e,t){if(Sk.abstr.checkNoKwargs("super",t),Sk.abstr.checkArgsLen("super",e,1,2),t=e[0],e=e[1],!Sk.builtin.checkClass(t))throw new Sk.builtin.TypeError("must be type, not "+Sk.abstr.typeName(t));this.obj=e,this.type=t,null!=this.obj&&(this.obj_type=this.$supercheck(t,this.obj))},$r(){return this.obj?new Sk.builtin.str("<super: <class '"+this.type.prototype.tp$name+"'>, <"+Sk.abstr.typeName(this.obj)+" object>>"):new Sk.builtin.str("<super: <class '"+this.type.prototype.tp$name+"'>, NULL>")},tp$getattr(e,t){let n=this.obj_type;if(null==n)return Sk.generic.getAttr.call(this,e,t);var i=n.prototype.tp$mro;const s=i.length;if(e===Sk.builtin.str.$class)return Sk.generic.getAttr.call(this,e,t);let r,o;for(r=0;r+1<s&&this.type!==i[r];r++);if(r++,r>=s)return Sk.generic.getAttr.call(this,e,t);for(e=e.$mangled;r<s;){if((t=i[r].prototype).hasOwnProperty(e)&&(o=t[e]),void 0!==o)return void 0!==(i=o.tp$descr_get)&&(o=i.call(o,this.obj===n?null:this.obj,n)),o;r++}},tp$descr_get(e,t){if(null===e||null!=this.obj)return this;if(this.ob$type!==Sk.builtin.super_)return Sk.misceval.callsimOrSuspendArray(this.ob$type,[this.type,e]);{t=this.$supercheck(this.type,e);const n=new Sk.builtin.super_;return n.type=this.type,n.obj=e,n.obj_type=t,n}}},getsets:{__thisclass__:{$get(){return this.type},$doc:"the class invoking super()"},__self__:{$get(){return this.obj||Sk.builtin.none.none$},$doc:"the instance invoking super(); may be None"},__self_class__:{$get(){return this.obj_type||Sk.builtin.none.none$},$doc:"the type of the instance invoking super(); may be None"}},proto:{$supercheck(e,t){if(Sk.builtin.checkClass(t)&&t.$isSubType(e))return t;if(t.ob$type.$isSubType(e))return t.ob$type;{const n=t.tp$getattr(Sk.builtin.str.$class);if(void 0!==n&&n!==t.ob$type&&Sk.builtin.checkClass(n)&&n.$isSubType(e))return n}throw new Sk.builtin.TypeError("super(type, obj): obj must be an instance or subtype of type")}}})},function(e,t){Sk.builtins={round:null,len:null,min:null,max:null,sum:null,abs:null,fabs:null,ord:null,chr:null,hex:null,oct:null,bin:null,dir:null,repr:null,open:null,isinstance:null,hash:null,getattr:null,hasattr:null,id:null,reduce:new Sk.builtin.func(Sk.builtin.reduce),sorted:null,any:null,all:null,enumerate:Sk.builtin.enumerate,filter:Sk.builtin.filter_,map:Sk.builtin.map_,range:Sk.builtin.range_,reversed:Sk.builtin.reversed,zip:Sk.builtin.zip_,BaseException:Sk.builtin.BaseException,AttributeError:Sk.builtin.AttributeError,ValueError:Sk.builtin.ValueError,Exception:Sk.builtin.Exception,ZeroDivisionError:Sk.builtin.ZeroDivisionError,AssertionError:Sk.builtin.AssertionError,ImportError:Sk.builtin.ImportError,IndentationError:Sk.builtin.IndentationError,IndexError:Sk.builtin.IndexError,LookupError:Sk.builtin.LookupError,KeyError:Sk.builtin.KeyError,TypeError:Sk.builtin.TypeError,UnicodeDecodeError:Sk.builtin.UnicodeDecodeError,UnicodeEncodeError:Sk.builtin.UnicodeEncodeError,NameError:Sk.builtin.NameError,IOError:Sk.builtin.IOError,NotImplementedError:Sk.builtin.NotImplementedError,SystemExit:Sk.builtin.SystemExit,OverflowError:Sk.builtin.OverflowError,OperationError:Sk.builtin.OperationError,NegativePowerError:Sk.builtin.NegativePowerError,RuntimeError:Sk.builtin.RuntimeError,RecursionError:Sk.builtin.RecursionError,StopIteration:Sk.builtin.StopIteration,SyntaxError:Sk.builtin.SyntaxError,SystemError:Sk.builtin.SystemError,float_$rw$:Sk.builtin.float_,int_$rw$:Sk.builtin.int_,bool:Sk.builtin.bool,complex:Sk.builtin.complex,dict:Sk.builtin.dict,file:Sk.builtin.file,frozenset:Sk.builtin.frozenset,function:Sk.builtin.func,generator:Sk.builtin.generator,list:Sk.builtin.list,long_$rw$:Sk.builtin.lng,method:Sk.builtin.method,object:Sk.builtin.object,slice:Sk.builtin.slice,str:Sk.builtin.str,set:Sk.builtin.set,tuple:Sk.builtin.tuple,type:Sk.builtin.type,input:null,raw_input:new Sk.builtin.func(Sk.builtin.raw_input),setattr:null,jseval:Sk.builtin.jseval,jsmillis:Sk.builtin.jsmillis,quit:new Sk.builtin.func(Sk.builtin.quit),exit:new Sk.builtin.func(Sk.builtin.quit),print:null,divmod:null,format:null,globals:null,issubclass:null,iter:null,execfile:Sk.builtin.execfile,help:Sk.builtin.help,memoryview:Sk.builtin.memoryview,reload:Sk.builtin.reload,super_$rw$:Sk.builtin.super_,unichr:Sk.builtin.unichr,vars:Sk.builtin.vars,apply_$rw$:Sk.builtin.apply_,buffer:Sk.builtin.buffer,coerce:Sk.builtin.coerce,intern:Sk.builtin.intern,property:Sk.builtin.property,classmethod:Sk.builtin.classmethod,staticmethod:Sk.builtin.staticmethod},Sk.abstr.setUpModuleMethods("builtins",Sk.builtins,{__import__:{$meth:Sk.builtin.__import__,$flags:{NamedArgs:["name","globals","locals","fromlist","level"]},$textsig:null,$doc:"__import__(name, globals=None, locals=None, fromlist=(), level=0) -> module\n\nImport a module. Because this function is meant for use by the Python\ninterpreter and not for general use, it is better to use\nimportlib.import_module() to programmatically import a module.\n\nThe globals argument is only used to determine the context;\nthey are not modified.  The locals argument is unused.  The fromlist\nshould be a list of names to emulate ``from name import ...'', or an\nempty list to emulate ``import name''.\nWhen importing a module from a package, note that __import__('A.B', ...)\nreturns package A when fromlist is empty, but its submodule B when\nfromlist is not empty.  The level argument is used to determine whether to\nperform absolute or relative imports: 0 is absolute, while a positive number\nis the number of parent directories to search relative to the current module."},abs:{$meth:Sk.builtin.abs,$flags:{OneArg:!0},$textsig:"($module, x, /)",$doc:"Return the absolute value of the argument."},all:{$meth:Sk.builtin.all,$flags:{OneArg:!0},$textsig:"($module, iterable, /)",$doc:"Return True if bool(x) is True for all values x in the iterable.\n\nIf the iterable is empty, return True."},any:{$meth:Sk.builtin.any,$flags:{OneArg:!0},$textsig:"($module, iterable, /)",$doc:"Return True if bool(x) is True for any x in the iterable.\n\nIf the iterable is empty, return False."},ascii:{$meth:Sk.builtin.ascii,$flags:{OneArg:!0},$textsig:"($module, obj, /)",$doc:"Return an ASCII-only representation of an object.\n\nAs repr(), return a string containing a printable representation of an\nobject, but escape the non-ASCII characters in the string returned by\nrepr() using \\\\x, \\\\u or \\\\U escapes. This generates a string similar\nto that returned by repr() in Python 2."},bin:{$meth:Sk.builtin.bin,$flags:{OneArg:!0},$textsig:"($module, number, /)",$doc:"Return the binary representation of an integer.\n\n   >>> bin(2796202)\n   '0b1010101010101010101010'"},callable:{$meth:Sk.builtin.callable,$flags:{OneArg:!0},$textsig:"($module, obj, /)",$doc:"Return whether the object is callable (i.e., some kind of function).\n\nNote that classes are callable, as are instances of classes with a\n__call__() method."},chr:{$meth:Sk.builtin.chr,$flags:{OneArg:!0},$textsig:"($module, i, /)",$doc:"Return a Unicode string of one character with ordinal i; 0 <= i <= 0x10ffff."},delattr:{$meth:Sk.builtin.delattr,$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, obj, name, /)",$doc:"Deletes the named attribute from the given object.\n\ndelattr(x, 'y') is equivalent to ``del x.y''"},dir:{$meth:Sk.builtin.dir,$flags:{MinArgs:0,MaxArgs:1},$textsig:null,$doc:"dir([object]) -> list of strings\n\nIf called without an argument, return the names in the current scope.\nElse, return an alphabetized list of names comprising (some of) the attributes\nof the given object, and of attributes reachable from it.\nIf the object supplies a method named __dir__, it will be used; otherwise\nthe default dir() logic is used and returns:\n  for a module object: the module's attributes.\n  for a class object:  its attributes, and recursively the attributes\n    of its bases.\n  for any other object: its attributes, its class's attributes, and\n    recursively the attributes of its class's base classes."},divmod:{$meth:Sk.builtin.divmod,$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, x, y, /)",$doc:"Return the tuple (x//y, x%y).  Invariant: div*y + mod == x."},eval_$rw$:{$name:"eval",$meth:Sk.builtin.eval_,$flags:{MinArgs:1,MaxArgs:3},$textsig:"($module, source, globals=None, locals=None, /)",$doc:"Evaluate the given source in the context of globals and locals.\n\nThe source may be a string representing a Python expression\nor a code object as returned by compile().\nThe globals must be a dictionary and locals can be any mapping,\ndefaulting to the current globals and locals.\nIf only globals is given, locals defaults to it."},format:{$meth:Sk.builtin.format,$flags:{MinArgs:1,MaxArgs:2},$textsig:"($module, value, format_spec='', /)",$doc:"Return value.__format__(format_spec)\n\nformat_spec defaults to the empty string.\nSee the Format Specification Mini-Language section of help('FORMATTING') for\ndetails."},getattr:{$meth:Sk.builtin.getattr,$flags:{MinArgs:2,MaxArgs:3},$textsig:null,$doc:"getattr(object, name[, default]) -> value\n\nGet a named attribute from an object; getattr(x, 'y') is equivalent to x.y.\nWhen a default argument is given, it is returned when the attribute doesn't\nexist; without it, an exception is raised in that case."},globals:{$meth:Sk.builtin.globals,$flags:{NoArgs:!0},$textsig:"($module, /)",$doc:"Return the dictionary containing the current scope's global variables.\n\nNOTE: Updates to this dictionary *will* affect name lookups in the current\nglobal scope and vice-versa."},hasattr:{$meth:Sk.builtin.hasattr,$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, obj, name, /)",$doc:"Return whether the object has an attribute with the given name.\n\nThis is done by calling getattr(obj, name) and catching AttributeError."},hash:{$meth:Sk.builtin.hash,$flags:{OneArg:!0},$textsig:"($module, obj, /)",$doc:"Return the hash value for the given object.\n\nTwo objects that compare equal must also have the same hash value, but the\nreverse is not necessarily true."},hex:{$meth:Sk.builtin.hex,$flags:{OneArg:!0},$textsig:"($module, number, /)",$doc:"Return the hexadecimal representation of an integer.\n\n   >>> hex(12648430)\n   '0xc0ffee'"},id:{$meth:Sk.builtin.id,$flags:{OneArg:!0},$textsig:"($module, obj, /)",$doc:"Return the identity of an object.\n\nThis is guaranteed to be unique among simultaneously existing objects.\n(CPython uses the object's memory address.)"},input:{$meth:Sk.builtin.input,$flags:{MinArgs:0,MaxArgs:1},$textsig:"($module, prompt=None, /)",$doc:"Read a string from standard input.  The trailing newline is stripped.\n\nThe prompt string, if given, is printed to standard output without a\ntrailing newline before reading input.\n\nIf the user hits EOF (*nix: Ctrl-D, Windows: Ctrl-Z+Return), raise EOFError.\nOn *nix systems, readline is used if available."},isinstance:{$meth:Sk.builtin.isinstance,$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, obj, class_or_tuple, /)",$doc:"Return whether an object is an instance of a class or of a subclass thereof.\n\nA tuple, as in ``isinstance(x, (A, B, ...))``, may be given as the target to\ncheck against. This is equivalent to ``isinstance(x, A) or isinstance(x, B)\nor ...`` etc."},issubclass:{$meth:Sk.builtin.issubclass,$flags:{MinArgs:2,MaxArgs:2},$textsig:"($module, cls, class_or_tuple, /)",$doc:"Return whether 'cls' is a derived from another class or is the same class.\n\nA tuple, as in ``issubclass(x, (A, B, ...))``, may be given as the target to\ncheck against. This is equivalent to ``issubclass(x, A) or issubclass(x, B)\nor ...`` etc."},iter:{$meth:Sk.builtin.iter,$flags:{MinArgs:1,MaxArgs:2},$textsig:"($module, iterable /)",$doc:"iter(iterable) -> iterator\niter(callable, sentinel) -> iterator\n\nGet an iterator from an object.  In the first form, the argument must\nsupply its own iterator, or be a sequence.\nIn the second form, the callable is called until it returns the sentinel."},len:{$meth:Sk.builtin.len,$flags:{OneArg:!0},$textsig:"($module, obj, /)",$doc:"Return the number of items in a container."},locals:{$meth:Sk.builtin.locals,$flags:{NoArgs:!0},$textsig:"($module, /)",$doc:"Return a dictionary containing the current scope's local variables.\n\nNOTE: Whether or not updates to this dictionary will affect name lookups in\nthe local scope and vice-versa is *implementation dependent* and not\ncovered by any backwards compatibility guarantees."},max:{$meth:Sk.builtin.max,$flags:{FastCall:!0},$textsig:null,$doc:"max(iterable, *[, default=obj, key=func]) -> value\nmax(arg1, arg2, *args, *[, key=func]) -> value\n\nWith a single iterable argument, return its biggest item. The\ndefault keyword-only argument specifies an object to return if\nthe provided iterable is empty.\nWith two or more arguments, return the largest argument."},min:{$meth:Sk.builtin.min,$flags:{FastCall:!0},$textsig:null,$doc:"min(iterable, *[, default=obj, key=func]) -> value\nmin(arg1, arg2, *args, *[, key=func]) -> value\n\nWith a single iterable argument, return its smallest item. The\ndefault keyword-only argument specifies an object to return if\nthe provided iterable is empty.\nWith two or more arguments, return the smallest argument."},next:{$name:"next",$meth:Sk.builtin.next_,$flags:{MinArgs:1,MaxArgs:2},$textsig:null,$doc:"next(iterator[, default])\n\nReturn the next item from the iterator. If default is given and the iterator\nis exhausted, it is returned instead of raising StopIteration."},oct:{$meth:Sk.builtin.oct,$flags:{OneArg:!0},$textsig:"($module, number, /)",$doc:"Return the octal representation of an integer.\n\n   >>> oct(342391)\n   '0o1234567'"},open:{$meth:Sk.builtin.open,$flags:{MinArgs:1,MaxArgs:3},$textsig:null,$doc:"open(name[, mode[, buffering]]) -> file object\n\nOpen a file using the file() type, returns a file object.  This is the\npreferred way to open a file.  See file.__doc__ for further information."},ord:{$meth:Sk.builtin.ord,$flags:{OneArg:!0},$textsig:"($module, c, /)",$doc:"Return the Unicode code point for a one-character string."},pow:{$meth:Sk.builtin.pow,$flags:{MinArgs:2,MaxArgs:3},$textsig:"($module, x, y, z=None, /)",$doc:"Equivalent to x**y (with two arguments) or x**y % z (with three arguments)\n\nSome types, such as ints, are able to use a more efficient algorithm when\ninvoked using the three argument form."},print:{$meth:Sk.builtin.print,$flags:{FastCall:!0},$textsig:null,$doc:"print(value, ..., sep=' ', end='\\n', file=sys.stdout, flush=False)\n\nPrints the values to a stream, or to sys.stdout by default.\nOptional keyword arguments:\nfile:  a file-like object (stream); defaults to the current sys.stdout.\nsep:   string inserted between values, default a space.\nend:   string appended after the last value, default a newline.\nflush: whether to forcibly flush the stream."},repr:{$meth:Sk.builtin.repr,$flags:{OneArg:!0},$textsig:"($module, obj, /)",$doc:"Return the canonical string representation of the object.\n\nFor many object types, including most builtins, eval(repr(obj)) == obj."},round:{$meth:Sk.builtin.round,$flags:{NamedArgs:["number","ndigits"]},$textsig:"($module, /, number, ndigits=None)",$doc:"Round a number to a given precision in decimal digits.\n\nThe return value is an integer if ndigits is omitted or None.  Otherwise\nthe return value has the same type as the number.  ndigits may be negative."},setattr:{$meth:Sk.builtin.setattr,$flags:{MinArgs:3,MaxArgs:3},$textsig:"($module, obj, name, value, /)",$doc:"Sets the named attribute on the given object to the specified value.\n\nsetattr(x, 'y', v) is equivalent to ``x.y = v''"},sorted:{$meth:Sk.builtin.sorted,$flags:{NamedArgs:[null,"cmp","key","reverse"],Defaults:[Sk.builtin.none.none$,Sk.builtin.none.none$,Sk.builtin.bool.false$]},$textsig:"($module, iterable, /, *, key=None, reverse=False)",$doc:"Return a new list containing all items from the iterable in ascending order.\n\nA custom key function can be supplied to customize the sort order, and the\nreverse flag can be set to request the result in descending order."},sum:{$meth:Sk.builtin.sum,$flags:{NamedArgs:[null,"start"],Defaults:[new Sk.builtin.int_(0)]},$textsig:"($module, iterable, /, start=0)",$doc:"Return the sum of a 'start' value (default: 0) plus an iterable of numbers\n\nWhen the iterable is empty, return the start value.\nThis function is intended specifically for use with numeric values and may\nreject non-numeric types."},vars:{$meth:Sk.builtin.vars,$flags:{MinArgs:0,MaxArgs:1},$textsig:null,$doc:"vars([object]) -> dictionary\n\nWithout arguments, equivalent to locals().\nWith an argument, equivalent to object.__dict__."}}),Sk.setupObjects=function(e){e?(Sk.builtins.filter=Sk.builtin.filter_,Sk.builtins.map=Sk.builtin.map_,Sk.builtins.zip=Sk.builtin.zip_,Sk.builtins.range=Sk.builtin.range_,delete Sk.builtins.xrange,delete Sk.builtins.StandardError,delete Sk.builtins.unicode,delete Sk.builtins.basestring,delete Sk.builtins.long_$rw$,Sk.builtin.int_.prototype.$r=function(){return new Sk.builtin.str(this.v.toString())},delete Sk.builtin.int_.prototype.tp$str,delete Sk.builtin.bool.prototype.tp$str,delete Sk.builtins.raw_input,delete Sk.builtin.str.prototype.decode,Sk.builtins.bytes=Sk.builtin.bytes,Sk.builtins.ascii=new Sk.builtin.sk_method({$meth:Sk.builtin.ascii,$flags:{OneArg:!0},$textsig:"($module, obj, /)",$doc:"Return an ASCII-only representation of an object.\n\nAs repr(), return a string containing a printable representation of an\nobject, but escape the non-ASCII characters in the string returned by\nrepr() using \\\\x, \\\\u or \\\\U escapes. This generates a string similar\nto that returned by repr() in Python 2."},null,"builtins")):(Sk.builtins.range=new Sk.builtin.sk_method({$meth:Sk.builtin.range,$name:"range",$flags:{MinArgs:1,MaxArgs:3}},void 0,"builtins"),Sk.builtins.xrange=new Sk.builtin.sk_method({$meth:Sk.builtin.xrange,$name:"xrange",$flags:{MinArgs:1,MaxArgs:3}},null,"builtins"),Sk.builtins.filter=new Sk.builtin.func(Sk.builtin.filter),Sk.builtins.map=new Sk.builtin.func(Sk.builtin.map),Sk.builtins.zip=new Sk.builtin.func(Sk.builtin.zip),Sk.builtins.StandardError=Sk.builtin.Exception,Sk.builtins.unicode=Sk.builtin.str,Sk.builtins.basestring=Sk.builtin.str,Sk.builtins.long_$rw$=Sk.builtin.lng,Sk.builtin.int_.prototype.$r=function(){const e=this.v;return"number"===typeof e?new Sk.builtin.str(e.toString()):new Sk.builtin.str(e.toString()+"L")},Sk.builtin.int_.prototype.tp$str=function(){return new Sk.builtin.str(this.v.toString())},Sk.builtin.bool.prototype.tp$str=function(){return this.$r()},Sk.builtins.raw_input=new Sk.builtin.func(Sk.builtin.raw_input),Sk.builtin.str.prototype.decode=Sk.builtin.str.$py2decode,delete Sk.builtins.bytes,delete Sk.builtins.ascii)},Sk.exportSymbol("Sk.setupObjects",Sk.setupObjects),Sk.exportSymbol("Sk.builtins",Sk.builtins)},function(e,t){Sk.builtin.str.$empty=new Sk.builtin.str(""),Sk.builtin.str.$emptystr=Sk.builtin.str.$empty,Sk.builtin.str.$utf8=new Sk.builtin.str("utf-8"),Sk.builtin.str.$ascii=new Sk.builtin.str("ascii"),Sk.builtin.str.$default_factory=new Sk.builtin.str("default_factory"),Sk.builtin.str.$imag=new Sk.builtin.str("imag"),Sk.builtin.str.$real=new Sk.builtin.str("real"),Sk.builtin.str.$abs=new Sk.builtin.str("__abs__"),Sk.builtin.str.$bytes=new Sk.builtin.str("__bytes__"),Sk.builtin.str.$call=new Sk.builtin.str("__call__"),Sk.builtin.str.$class=new Sk.builtin.str("__class__"),Sk.builtin.str.$cmp=new Sk.builtin.str("__cmp__"),Sk.builtin.str.$complex=new Sk.builtin.str("__complex__"),Sk.builtin.str.$contains=new Sk.builtin.str("__contains__"),Sk.builtin.str.$copy=new Sk.builtin.str("__copy__"),Sk.builtin.str.$dict=new Sk.builtin.str("__dict__"),Sk.builtin.str.$dir=new Sk.builtin.str("__dir__"),Sk.builtin.str.$doc=new Sk.builtin.str("__doc__"),Sk.builtin.str.$enter=new Sk.builtin.str("__enter__"),Sk.builtin.str.$eq=new Sk.builtin.str("__eq__"),Sk.builtin.str.$exit=new Sk.builtin.str("__exit__"),Sk.builtin.str.$index=new Sk.builtin.str("__index__"),Sk.builtin.str.$init=new Sk.builtin.str("__init__"),Sk.builtin.str.$int_=new Sk.builtin.str("__int__"),Sk.builtin.str.$iter=new Sk.builtin.str("__iter__"),Sk.builtin.str.$file=new Sk.builtin.str("__file__"),Sk.builtin.str.$float_=new Sk.builtin.str("__float__"),Sk.builtin.str.$format=new Sk.builtin.str("__format__"),Sk.builtin.str.$ge=new Sk.builtin.str("__ge__"),Sk.builtin.str.$getattr=new Sk.builtin.str("__getattr__"),Sk.builtin.str.$getattribute=new Sk.builtin.str("__getattribute__"),Sk.builtin.str.$getitem=new Sk.builtin.str("__getitem__"),Sk.builtin.str.$gt=new Sk.builtin.str("__gt__"),Sk.builtin.str.$keys=new Sk.builtin.str("keys"),Sk.builtin.str.$le=new Sk.builtin.str("__le__"),Sk.builtin.str.$len=new Sk.builtin.str("__len__"),Sk.builtin.str.$length_hint=new Sk.builtin.str("__length_hint__"),Sk.builtin.str.$loader=new Sk.builtin.str("__loader__"),Sk.builtin.str.$lt=new Sk.builtin.str("__lt__"),Sk.builtin.str.$module=new Sk.builtin.str("__module__"),Sk.builtin.str.$missing=new Sk.builtin.str("__missing__"),Sk.builtin.str.$name=new Sk.builtin.str("__name__"),Sk.builtin.str.$ne=new Sk.builtin.str("__ne__"),Sk.builtin.str.$new=new Sk.builtin.str("__new__"),Sk.builtin.str.$next=new Sk.builtin.str("__next__"),Sk.builtin.str.$path=new Sk.builtin.str("__path__"),Sk.builtin.str.$qualname=new Sk.builtin.str("__qualname__"),Sk.builtin.str.$repr=new Sk.builtin.str("__repr__"),Sk.builtin.str.$reversed=new Sk.builtin.str("__reversed__"),Sk.builtin.str.$round=new Sk.builtin.str("__round__"),Sk.builtin.str.$setattr=new Sk.builtin.str("__setattr__"),Sk.builtin.str.$setitem=new Sk.builtin.str("__setitem__"),Sk.builtin.str.$str=new Sk.builtin.str("__str__"),Sk.builtin.str.$trunc=new Sk.builtin.str("__trunc__"),Sk.builtin.str.$write=new Sk.builtin.str("write"),Sk.misceval.op2method_={Eq:Sk.builtin.str.$eq,NotEq:Sk.builtin.str.$ne,Gt:Sk.builtin.str.$gt,GtE:Sk.builtin.str.$ge,Lt:Sk.builtin.str.$lt,LtE:Sk.builtin.str.$le}}])}).call(this||window)},282:(e,t,n)=>{n(663),n(938),e.exports=Sk}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.amdD=function(){throw new Error("define cannot be used indirect")},__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;__webpack_require__.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"===typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"===typeof n.then)return n}var s=Object.create(null);__webpack_require__.r(s);var r={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>r[e]=()=>n[e]));return r.default=()=>n,__webpack_require__.d(s,r),s}})(),__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};(()=>{"use strict";var e={};__webpack_require__.r(e),__webpack_require__.d(e,{hasBrowserEnv:()=>me,hasStandardBrowserEnv:()=>be,hasStandardBrowserWebWorkerEnv:()=>ve});var t=__webpack_require__(43),n=__webpack_require__.t(t,2),i=__webpack_require__(391),s=__webpack_require__(216),r=__webpack_require__(579);const o=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h3",{style:{margin:"20px",textAlign:"center"},children:["Practice Your Code here"," ",(0,r.jsx)("img",{style:{width:"40px",height:"40px"},src:"https://cdn4.iconfinder.com/data/icons/developer-set-3/128/code-512.png",alt:"logo"})]}),(0,r.jsx)("div",{className:"container mt-5 mb-5",children:(0,r.jsxs)("div",{className:"row",children:[(0,r.jsx)("div",{className:"col-md-4 mb-4",children:(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("h5",{className:"card-title",children:"Python IDE"}),(0,r.jsxs)("p",{className:"card-text",children:["A web-based Python IDE for practicing Python code. Write and execute Python scripts in a user-friendly environment.",(0,r.jsx)("br",{})," "]}),(0,r.jsx)("a",{href:"/python",children:(0,r.jsx)("button",{type:"button",class:"btn btn-info w-100",children:"Go To Python IDE"})})]})})}),(0,r.jsx)("div",{className:"col-md-4 mb-4",children:(0,r.jsx)("div",{className:"card",children:(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("h5",{className:"card-title",children:"JavaScript IDE"}),(0,r.jsxs)("p",{className:"card-text",children:["Practice JS coding with our IDE. Write and run JavaScript code snippets ",(0,r.jsx)("b",{children:"NOTE :"})," ",(0,r.jsx)("i",{children:"We are currently working on handling async functions"})]}),(0,r.jsx)("a",{href:"/javascript",children:(0,r.jsx)("button",{type:"button",class:"btn btn-warning w-100",children:"Go To JavaScript IDE"})})]})})})]})}),(0,r.jsx)("hr",{})]});__webpack_require__(955);var a=__webpack_require__(869),l=(__webpack_require__(960),__webpack_require__(698),__webpack_require__(282)),c=__webpack_require__.n(l);const u=e=>{let{id:n,question:i,input:s,outPut:o,onBackClick:l}=e;const[u,d]=(0,t.useState)(""),[f,g]=(0,t.useState)("");return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"ide-python",children:[(0,r.jsx)("div",{className:"ide-python-editor",children:(0,r.jsx)(a.Ay,{mode:"python",theme:"monokai",onChange:e=>d(e),value:u,editorProps:{$blockScrolling:!0},width:"100%",height:"400px"})}),(0,r.jsx)(h,{props:{executeCode:()=>{g(""),c().configure({output:e=>g((t=>t+e))}),c().misceval.asyncToPromise((()=>c().importMainWithBody("<stdin>",!1,u,!0))),setTimeout((()=>{g((e=>(0,r.jsxs)("span",{children:["=> ","Output : ",(0,r.jsx)("b",{children:e})," ",(0,r.jsx)("br",{})," [AT : ",(new Date).toLocaleTimeString(),"]"]})))}),0)},setOutput:g,output:f}})]})})};function h(e){let{props:t}=e;const{executeCode:n,setOutput:i,output:s}=t;return(0,r.jsxs)("div",{className:"ide-python-output",children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid",padding:"8px"},children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)("img",{style:{width:"50px"},src:"https://qph.cf2.quoracdn.net/main-qimg-dca3cd734f5eb8c4854f00af58e534ff",alt:"py"}),(0,r.jsx)("h4",{style:{textAlign:"center"},children:"OUTPUT"})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,r.jsx)("button",{className:"btn btn-success w-10",onClick:n,children:"Run Code"})," ",(0,r.jsx)("button",{className:"ide-output-top",onClick:()=>i((()=>"")),children:"Clear"})]})]}),(0,r.jsx)("div",{style:{overflow:"auto",height:"300px"},children:(0,r.jsx)("p",{className:"pre",children:s})})]})}const d=()=>{const e=localStorage.getItem("rg-ide-token"),n=(0,s.Zp)();return(0,t.useEffect)((()=>{e||n("/login")}),[e]),(0,r.jsx)("div",{children:(0,r.jsx)(u,{})})};__webpack_require__(576);const f=()=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Ay,{mode:"sql",theme:"monokai",onChange:e=>{},name:"your-editor",editorProps:{$blockScrolling:!0},fontSize:14,width:"100%",height:"250px"}),(0,r.jsx)("button",{className:"btn btn-warning w-100",onClick:()=>{},children:"Run Query"}),(0,r.jsxs)("div",{style:{height:"150px",border:"1px dashed"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid",padding:"8px"},children:[(0,r.jsx)("h5",{style:{textAlign:"center"},children:"SQL OUTPUT"}),(0,r.jsx)("button",{className:"ide-output-top",onClick:()=>{},children:"Clear"})]}),(0,r.jsx)("pre",{children:"output"})]})]}),g=()=>(0,r.jsx)("div",{children:(0,r.jsx)(f,{})});var p=__webpack_require__(619);const m="https://integrated-development-environment.onrender.com/v1";function b(e,t){return function(){return e.apply(t,arguments)}}const{toString:_}=Object.prototype,{getPrototypeOf:v}=Object,y=(S=Object.create(null),e=>{const t=_.call(e);return S[t]||(S[t]=t.slice(8,-1).toLowerCase())});var S;const w=e=>(e=e.toLowerCase(),t=>y(t)===e),k=e=>t=>typeof t===e,{isArray:C}=Array,x=k("undefined");const E=w("ArrayBuffer");const L=k("string"),D=k("function"),A=k("number"),T=e=>null!==e&&"object"===typeof e,N=e=>{if("object"!==y(e))return!1;const t=v(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},I=w("Date"),$=w("File"),M=w("Blob"),R=w("FileList"),O=w("URLSearchParams");function P(e,t){let n,i,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),C(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const i=s?Object.getOwnPropertyNames(e):Object.keys(e),r=i.length;let o;for(n=0;n<r;n++)o=i[n],t.call(null,e[o],o,e)}}function F(e,t){t=t.toLowerCase();const n=Object.keys(e);let i,s=n.length;for(;s-- >0;)if(i=n[s],t===i.toLowerCase())return i;return null}const B="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,z=e=>!x(e)&&e!==B;const W=(H="undefined"!==typeof Uint8Array&&v(Uint8Array),e=>H&&e instanceof H);var H;const V=w("HTMLFormElement"),j=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),U=w("RegExp"),q=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};P(n,((n,s)=>{let r;!1!==(r=t(n,s,e))&&(i[s]=r||n)})),Object.defineProperties(e,i)},K="abcdefghijklmnopqrstuvwxyz",G="0123456789",Y={DIGIT:G,ALPHA:K,ALPHA_DIGIT:K+K.toUpperCase()+G};const Q=w("AsyncFunction"),X={isArray:C,isArrayBuffer:E,isBuffer:function(e){return null!==e&&!x(e)&&null!==e.constructor&&!x(e.constructor)&&D(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||D(e.append)&&("formdata"===(t=y(e))||"object"===t&&D(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&E(e.buffer),t},isString:L,isNumber:A,isBoolean:e=>!0===e||!1===e,isObject:T,isPlainObject:N,isUndefined:x,isDate:I,isFile:$,isBlob:M,isRegExp:U,isFunction:D,isStream:e=>T(e)&&D(e.pipe),isURLSearchParams:O,isTypedArray:W,isFileList:R,forEach:P,merge:function e(){const{caseless:t}=z(this)&&this||{},n={},i=(i,s)=>{const r=t&&F(n,s)||s;N(n[r])&&N(i)?n[r]=e(n[r],i):N(i)?n[r]=e({},i):C(i)?n[r]=i.slice():n[r]=i};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&P(arguments[s],i);return n},extend:function(e,t,n){let{allOwnKeys:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return P(t,((t,i)=>{n&&D(t)?e[i]=b(t,n):e[i]=t}),{allOwnKeys:i}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let s,r,o;const a={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),r=s.length;r-- >0;)o=s[r],i&&!i(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&v(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:y,kindOfTest:w,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(C(e))return e;let t=e.length;if(!A(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:V,hasOwnProperty:j,hasOwnProp:j,reduceDescriptors:q,freezeMethods:e=>{q(e,((t,n)=>{if(D(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];D(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach((e=>{n[e]=!0}))};return C(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:F,global:B,isContextDefined:z,ALPHABET:Y,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.ALPHA_DIGIT,n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n},isSpecCompliantForm:function(e){return!!(e&&D(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(T(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[i]=e;const s=C(e)?[]:{};return P(e,((e,t)=>{const r=n(e,i+1);!x(r)&&(s[t]=r)})),t[i]=void 0,s}}return e};return n(e,0)},isAsyncFn:Q,isThenable:e=>e&&(T(e)||D(e))&&D(e.then)&&D(e.catch)};function Z(e,t,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s)}X.inherits(Z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:X.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const J=Z.prototype,ee={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{ee[e]={value:e}})),Object.defineProperties(Z,ee),Object.defineProperty(J,"isAxiosError",{value:!0}),Z.from=(e,t,n,i,s,r)=>{const o=Object.create(J);return X.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Z.call(o,e.message,t,n,i,s),o.cause=e,o.name=e.name,r&&Object.assign(o,r),o};const te=Z;function ne(e){return X.isPlainObject(e)||X.isArray(e)}function ie(e){return X.endsWith(e,"[]")?e.slice(0,-2):e}function se(e,t,n){return e?e.concat(t).map((function(e,t){return e=ie(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const re=X.toFlatObject(X,{},null,(function(e){return/^is[A-Z]/.test(e)}));const oe=function(e,t,n){if(!X.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const i=(n=X.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!X.isUndefined(t[e])}))).metaTokens,s=n.visitor||c,r=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&X.isSpecCompliantForm(t);if(!X.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(X.isDate(e))return e.toISOString();if(!a&&X.isBlob(e))throw new te("Blob is not supported. Use a Buffer instead.");return X.isArrayBuffer(e)||X.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let a=e;if(e&&!s&&"object"===typeof e)if(X.endsWith(n,"{}"))n=i?n:n.slice(0,-2),e=JSON.stringify(e);else if(X.isArray(e)&&function(e){return X.isArray(e)&&!e.some(ne)}(e)||(X.isFileList(e)||X.endsWith(n,"[]"))&&(a=X.toArray(e)))return n=ie(n),a.forEach((function(e,i){!X.isUndefined(e)&&null!==e&&t.append(!0===o?se([n],i,r):null===o?n:n+"[]",l(e))})),!1;return!!ne(e)||(t.append(se(s,n,r),l(e)),!1)}const u=[],h=Object.assign(re,{defaultVisitor:c,convertValue:l,isVisitable:ne});if(!X.isObject(e))throw new TypeError("data must be an object");return function e(n,i){if(!X.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+i.join("."));u.push(n),X.forEach(n,(function(n,r){!0===(!(X.isUndefined(n)||null===n)&&s.call(t,n,X.isString(r)?r.trim():r,i,h))&&e(n,i?i.concat(r):[r])})),u.pop()}}(e),t};function ae(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function le(e,t){this._pairs=[],e&&oe(e,this,t)}const ce=le.prototype;ce.append=function(e,t){this._pairs.push([e,t])},ce.toString=function(e){const t=e?function(t){return e.call(this,t,ae)}:ae;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const ue=le;function he(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function de(e,t,n){if(!t)return e;const i=n&&n.encode||he,s=n&&n.serialize;let r;if(r=s?s(t,n):X.isURLSearchParams(t)?t.toString():new ue(t,n).toString(i),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}const fe=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){X.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},ge={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},pe={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ue,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},me="undefined"!==typeof window&&"undefined"!==typeof document,be=(_e="undefined"!==typeof navigator&&navigator.product,me&&["ReactNative","NativeScript","NS"].indexOf(_e)<0);var _e;const ve="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,ye={...e,...pe};const Se=function(e){function t(e,n,i,s){let r=e[s++];if("__proto__"===r)return!0;const o=Number.isFinite(+r),a=s>=e.length;if(r=!r&&X.isArray(i)?i.length:r,a)return X.hasOwnProp(i,r)?i[r]=[i[r],n]:i[r]=n,!o;i[r]&&X.isObject(i[r])||(i[r]=[]);return t(e,n,i[r],s)&&X.isArray(i[r])&&(i[r]=function(e){const t={},n=Object.keys(e);let i;const s=n.length;let r;for(i=0;i<s;i++)r=n[i],t[r]=e[r];return t}(i[r])),!o}if(X.isFormData(e)&&X.isFunction(e.entries)){const n={};return X.forEachEntry(e,((e,i)=>{t(function(e){return X.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),i,n,0)})),n}return null};const we={transitional:ge,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,s=X.isObject(e);s&&X.isHTMLForm(e)&&(e=new FormData(e));if(X.isFormData(e))return i?JSON.stringify(Se(e)):e;if(X.isArrayBuffer(e)||X.isBuffer(e)||X.isStream(e)||X.isFile(e)||X.isBlob(e))return e;if(X.isArrayBufferView(e))return e.buffer;if(X.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return oe(e,new ye.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return ye.isNode&&X.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=X.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return oe(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||i?(t.setContentType("application/json",!1),function(e,t,n){if(X.isString(e))try{return(t||JSON.parse)(e),X.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||we.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(e&&X.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(s){if(n){if("SyntaxError"===s.name)throw te.from(s,te.ERR_BAD_RESPONSE,this,null,this.response);throw s}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ye.classes.FormData,Blob:ye.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};X.forEach(["delete","get","head","post","put","patch"],(e=>{we.headers[e]={}}));const ke=we,Ce=X.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),xe=Symbol("internals");function Ee(e){return e&&String(e).trim().toLowerCase()}function Le(e){return!1===e||null==e?e:X.isArray(e)?e.map(Le):String(e)}function De(e,t,n,i,s){return X.isFunction(i)?i.call(this,t,n):(s&&(t=n),X.isString(t)?X.isString(i)?-1!==t.indexOf(i):X.isRegExp(i)?i.test(t):void 0:void 0)}class Ae{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function s(e,t,n){const s=Ee(t);if(!s)throw new Error("header name must be a non-empty string");const r=X.findKey(i,s);(!r||void 0===i[r]||!0===n||void 0===n&&!1!==i[r])&&(i[r||t]=Le(e))}const r=(e,t)=>X.forEach(e,((e,n)=>s(e,n,t)));return X.isPlainObject(e)||e instanceof this.constructor?r(e,t):X.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?r((e=>{const t={};let n,i,s;return e&&e.split("\n").forEach((function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),i=e.substring(s+1).trim(),!n||t[n]&&Ce[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)})),t})(e),t):null!=e&&s(t,e,n),this}get(e,t){if(e=Ee(e)){const n=X.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(X.isFunction(t))return t.call(this,e,n);if(X.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ee(e)){const n=X.findKey(this,e);return!(!n||void 0===this[n]||t&&!De(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function s(e){if(e=Ee(e)){const s=X.findKey(n,e);!s||t&&!De(0,n[s],s,t)||(delete n[s],i=!0)}}return X.isArray(e)?e.forEach(s):s(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const s=t[n];e&&!De(0,this[s],s,e,!0)||(delete this[s],i=!0)}return i}normalize(e){const t=this,n={};return X.forEach(this,((i,s)=>{const r=X.findKey(n,s);if(r)return t[r]=Le(i),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(s):String(s).trim();o!==s&&delete t[s],t[o]=Le(i),n[o]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return X.forEach(this,((n,i)=>{null!=n&&!1!==n&&(t[i]=e&&X.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return i.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[xe]=this[xe]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=Ee(e);t[i]||(!function(e,t){const n=X.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+n,{value:function(e,n,s){return this[i].call(this,t,e,n,s)},configurable:!0})}))}(n,e),t[i]=!0)}return X.isArray(e)?e.forEach(i):i(e),this}}Ae.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),X.reduceDescriptors(Ae.prototype,((e,t)=>{let{value:n}=e,i=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[i]=e}}})),X.freezeMethods(Ae);const Te=Ae;function Ne(e,t){const n=this||ke,i=t||n,s=Te.from(i.headers);let r=i.data;return X.forEach(e,(function(e){r=e.call(n,r,s.normalize(),t?t.status:void 0)})),s.normalize(),r}function Ie(e){return!(!e||!e.__CANCEL__)}function $e(e,t,n){te.call(this,null==e?"canceled":e,te.ERR_CANCELED,t,n),this.name="CanceledError"}X.inherits($e,te,{__CANCEL__:!0});const Me=$e;const Re=ye.hasStandardBrowserEnv?{write(e,t,n,i,s,r){const o=[e+"="+encodeURIComponent(t)];X.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),X.isString(i)&&o.push("path="+i),X.isString(s)&&o.push("domain="+s),!0===r&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Oe(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Pe=ye.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function i(n){let i=n;return e&&(t.setAttribute("href",i),i=t.href),t.setAttribute("href",i),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(e){const t=X.isString(e)?i(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};const Fe=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let s,r=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=i[o];s||(s=l),n[r]=a,i[r]=l;let u=o,h=0;for(;u!==r;)h+=n[u++],u%=e;if(r=(r+1)%e,r===o&&(o=(o+1)%e),l-s<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};function Be(e,t){let n=0;const i=Fe(50,250);return s=>{const r=s.loaded,o=s.lengthComputable?s.total:void 0,a=r-n,l=i(a);n=r;const c={loaded:r,total:o,progress:o?r/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&r<=o?(o-r)/l:void 0,event:s};c[t?"download":"upload"]=!0,e(c)}}const ze={http:null,xhr:"undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let i=e.data;const s=Te.from(e.headers).normalize();let r,o,{responseType:a,withXSRFToken:l}=e;function c(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}if(X.isFormData(i))if(ye.hasStandardBrowserEnv||ye.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if(!1!==(o=s.getContentType())){const[e,...t]=o?o.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}let u=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(t+":"+n))}const h=Oe(e.baseURL,e.url);function d(){if(!u)return;const i=Te.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());!function(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new te("Request failed with status code "+n.status,[te.ERR_BAD_REQUEST,te.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),c()}),(function(e){n(e),c()}),{data:a&&"text"!==a&&"json"!==a?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:i,config:e,request:u}),u=null}if(u.open(e.method.toUpperCase(),de(h,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,"onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))&&setTimeout(d)},u.onabort=function(){u&&(n(new te("Request aborted",te.ECONNABORTED,e,u)),u=null)},u.onerror=function(){n(new te("Network Error",te.ERR_NETWORK,e,u)),u=null},u.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const i=e.transitional||ge;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new te(t,i.clarifyTimeoutError?te.ETIMEDOUT:te.ECONNABORTED,e,u)),u=null},ye.hasStandardBrowserEnv&&(l&&X.isFunction(l)&&(l=l(e)),l||!1!==l&&Pe(h))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&Re.read(e.xsrfCookieName);t&&s.set(e.xsrfHeaderName,t)}void 0===i&&s.setContentType(null),"setRequestHeader"in u&&X.forEach(s.toJSON(),(function(e,t){u.setRequestHeader(t,e)})),X.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&"json"!==a&&(u.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",Be(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",Be(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=t=>{u&&(n(!t||t.type?new Me(null,e,u):t),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);f&&-1===ye.protocols.indexOf(f)?n(new te("Unsupported protocol "+f+":",te.ERR_BAD_REQUEST,e)):u.send(i||null)}))}};X.forEach(ze,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const We=e=>"- ".concat(e),He=e=>X.isFunction(e)||null===e||!1===e,Ve=e=>{e=X.isArray(e)?e:[e];const{length:t}=e;let n,i;const s={};for(let r=0;r<t;r++){let t;if(n=e[r],i=n,!He(n)&&(i=ze[(t=String(n)).toLowerCase()],void 0===i))throw new te("Unknown adapter '".concat(t,"'"));if(i)break;s[t||"#"+r]=i}if(!i){const e=Object.entries(s).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(We).join("\n"):" "+We(e[0]):"as no adapter specified";throw new te("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i};function je(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Me(null,e)}function Ue(e){je(e),e.headers=Te.from(e.headers),e.data=Ne.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ve(e.adapter||ke.adapter)(e).then((function(t){return je(e),t.data=Ne.call(e,e.transformResponse,t),t.headers=Te.from(t.headers),t}),(function(t){return Ie(t)||(je(e),t&&t.response&&(t.response.data=Ne.call(e,e.transformResponse,t.response),t.response.headers=Te.from(t.response.headers))),Promise.reject(t)}))}const qe=e=>e instanceof Te?e.toJSON():e;function Ke(e,t){t=t||{};const n={};function i(e,t,n){return X.isPlainObject(e)&&X.isPlainObject(t)?X.merge.call({caseless:n},e,t):X.isPlainObject(t)?X.merge({},t):X.isArray(t)?t.slice():t}function s(e,t,n){return X.isUndefined(t)?X.isUndefined(e)?void 0:i(void 0,e,n):i(e,t,n)}function r(e,t){if(!X.isUndefined(t))return i(void 0,t)}function o(e,t){return X.isUndefined(t)?X.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function a(n,s,r){return r in t?i(n,s):r in e?i(void 0,n):void 0}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t)=>s(qe(e),qe(t),!0)};return X.forEach(Object.keys(Object.assign({},e,t)),(function(i){const r=l[i]||s,o=r(e[i],t[i],i);X.isUndefined(o)&&r!==a||(n[i]=o)})),n}const Ge="1.6.7",Ye={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Ye[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Qe={};Ye.transitional=function(e,t,n){function i(e,t){return"[Axios v1.6.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,r)=>{if(!1===e)throw new te(i(s," has been removed"+(t?" in "+t:"")),te.ERR_DEPRECATED);return t&&!Qe[s]&&(Qe[s]=!0,console.warn(i(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,r)}};const Xe={assertOptions:function(e,t,n){if("object"!==typeof e)throw new te("options must be an object",te.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let s=i.length;for(;s-- >0;){const r=i[s],o=t[r];if(o){const t=e[r],n=void 0===t||o(t,r,e);if(!0!==n)throw new te("option "+r+" must be "+n,te.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new te("Unknown option "+r,te.ERR_BAD_OPTION)}},validators:Ye},Ze=Xe.validators;class Je{constructor(e){this.defaults=e,this.interceptors={request:new fe,response:new fe}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ke(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:s}=t;void 0!==n&&Xe.assertOptions(n,{silentJSONParsing:Ze.transitional(Ze.boolean),forcedJSONParsing:Ze.transitional(Ze.boolean),clarifyTimeoutError:Ze.transitional(Ze.boolean)},!1),null!=i&&(X.isFunction(i)?t.paramsSerializer={serialize:i}:Xe.assertOptions(i,{encode:Ze.function,serialize:Ze.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=s&&X.merge(s.common,s[t.method]);s&&X.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete s[e]})),t.headers=Te.concat(r,s);const o=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,h=0;if(!a){const e=[Ue.bind(this),void 0];for(e.unshift.apply(e,o),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=o.length;let d=t;for(h=0;h<u;){const e=o[h++],t=o[h++];try{d=e(d)}catch(f){t.call(this,f);break}}try{c=Ue.call(this,d)}catch(f){return Promise.reject(f)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return de(Oe((e=Ke(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}X.forEach(["delete","get","head","options"],(function(e){Je.prototype[e]=function(t,n){return this.request(Ke(n||{},{method:e,url:t,data:(n||{}).data}))}})),X.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,s){return this.request(Ke(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}Je.prototype[e]=t(),Je.prototype[e+"Form"]=t(!0)}));const et=Je;class tt{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e,i,s){n.reason||(n.reason=new Me(e,i,s),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new tt((function(t){e=t})),cancel:e}}}const nt=tt;const it={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(it).forEach((e=>{let[t,n]=e;it[n]=t}));const st=it;const rt=function e(t){const n=new et(t),i=b(et.prototype.request,n);return X.extend(i,et.prototype,n,{allOwnKeys:!0}),X.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(Ke(t,n))},i}(ke);rt.Axios=et,rt.CanceledError=Me,rt.CancelToken=nt,rt.isCancel=Ie,rt.VERSION=Ge,rt.toFormData=oe,rt.AxiosError=te,rt.Cancel=rt.CanceledError,rt.all=function(e){return Promise.all(e)},rt.spread=function(e){return function(t){return e.apply(null,t)}},rt.isAxiosError=function(e){return X.isObject(e)&&!0===e.isAxiosError},rt.mergeConfig=Ke,rt.AxiosHeaders=Te,rt.formToJSON=e=>Se(X.isHTMLForm(e)?new FormData(e):e),rt.getAdapter=Ve,rt.HttpStatusCode=st,rt.default=rt;const ot=rt,at=()=>{const e=(0,s.Zp)(),[n,i]=(0,t.useState)({username:"",email:"",password:""}),[o,a]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[u,h]=(0,t.useState)(""),[d,f]=(0,t.useState)(""),g=e=>{const{name:t,value:s}=e.target;i({...n,[t]:s})};return(0,r.jsxs)("div",{className:"auth-form container-fluid",children:[(0,r.jsx)("h2",{style:{textAlign:"center"},children:"Sign up"}),(0,r.jsxs)("form",{className:"auth-forms",children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"username",className:"form-label",children:"User Name"}),(0,r.jsx)("input",{type:"text",className:"form-control",id:"username",name:"username",required:!0,value:n.username,onChange:g})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"username",className:"form-label",children:"User Email"}),(0,r.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",required:!0,value:n.email,onChange:g})]}),(0,r.jsx)("label",{htmlFor:"username",className:"form-label",children:"User Password"}),(0,r.jsxs)("div",{className:"input-group mb-3",children:[(0,r.jsx)("input",{type:l?"text":"password",className:"form-control",id:"password",name:"password",value:n.password,onChange:g,minLength:8}),(0,r.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>c(!l),children:l?"Hide":"Show"})]}),d&&(0,r.jsx)("p",{style:{color:"red"},children:d}),u&&(0,r.jsx)("p",{style:{color:"green"},children:u}),(0,r.jsx)("button",{type:"button",className:"btn btn-info mb-3 w-100",onClick:async t=>{t.preventDefault();try{a(!0);const t=await ot.post("".concat(m,"/signup"),n);201===t.status&&(i({username:"",email:"",password:""}),f(""),h((e=>t.data.message)),a(!1),setTimeout((()=>{e("/login")}),1e3))}catch(d){a(!1),h(""),f((t=>d.response.data))}},disabled:o,children:o?"checking...":"Sign up"}),(0,r.jsx)("p",{style:{textAlign:"center"},children:"OR"}),(0,r.jsxs)("p",{style:{marginBottom:"1rem"},children:["Already Signed up ? ",(0,r.jsx)("a",{href:"/login",children:"Login here"})]})]})]})},lt=()=>{const[e,n]=(0,t.useState)({email:"",password:""}),[i,s]=(0,t.useState)(!1),[o,a]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[u,h]=(0,t.useState)(!1),[d,f]=(0,t.useState)(!1),[g,p]=(0,t.useState)(""),b=t=>{const{name:i,value:s}=t.target;n({...e,[i]:s})};return(0,r.jsxs)("div",{className:"auth-form container",children:[(0,r.jsx)("h2",{style:{textAlign:"center"},children:"Login"}),g&&(0,r.jsx)("p",{style:{color:"green",fontSize:"17px"},children:(0,r.jsx)("u",{children:g})}),(0,r.jsxs)("form",{className:"auth-forms",children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"username",className:"form-label",children:"User Email"}),(0,r.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",required:!0,value:e.email,onChange:b})]}),(0,r.jsx)("label",{htmlFor:"username",className:"form-label",children:"User Password"}),(0,r.jsxs)("div",{className:"input-group mb-3",children:[(0,r.jsx)("input",{type:i?"text":"password",className:"form-control",id:"password",name:"password",value:e.password,onChange:b}),(0,r.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:()=>s(!i),children:i?"Hide":"Show"})]}),(0,r.jsx)("h6",{style:{textAlign:"end",color:"grey",fontSize:"13px",padding:"5px 0",cursor:"pointer"},onClick:async()=>{try{f(!0);const t=await ot.post("".concat(m,"/reset-password"),{email:e.email});f(!1),t.data.status?p("No user Found"):p("A mail has been sent to you ,You can reset password with 5 min ,check your spam folders too")}catch(l){console.log(l)}},children:d?"checking ...":"Forgot password"}),(0,r.jsx)("button",{type:"button",className:"btn btn-info mb-3 w-100",onClick:async t=>{t.preventDefault();try{h(!0);const t=await ot.post("".concat(m,"/login"),e);h(!1),t.data.token&&(c(""),a(t.data.message),localStorage.setItem("rg-ide-token",t.data.token),n({email:"",password:""}),setTimeout((()=>{window.location.href="/javascript"}),600))}catch(l){h(!1),a(""),c(l.response.data.error)}},disabled:u,children:u?"Checking...":"Login"}),l&&(0,r.jsx)("p",{style:{color:"red"},children:l}),o&&(0,r.jsx)("p",{style:{color:"green"},children:o}),(0,r.jsx)("p",{style:{textAlign:"center"},children:"OR"}),(0,r.jsxs)("p",{style:{marginBottom:"1rem"},children:["Need an Account ? ",(0,r.jsx)("a",{href:"/signup",children:"Register Now"})]})]})]})};class ct extends Error{}function ut(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(n){return atob(t)}}function ht(e,t){if("string"!==typeof e)throw new ct("Invalid token specified: must be a string");t||(t={});const n=!0===t.header?0:1,i=e.split(".")[n];if("string"!==typeof i)throw new ct("Invalid token specified: missing part #".concat(n+1));let s;try{s=ut(i)}catch(r){throw new ct("Invalid token specified: invalid base64 for part #".concat(n+1," (").concat(r.message,")"))}try{return JSON.parse(s)}catch(r){throw new ct("Invalid token specified: invalid json for part #".concat(n+1," (").concat(r.message,")"))}}ct.prototype.name="InvalidTokenError";const dt=()=>{const e=localStorage.getItem("rg-ide-token"),n=e?ht(e):null,i=(0,s.Zp)();(0,t.useEffect)((()=>{n||i("/login")}),[n]);return(0,r.jsx)("div",{className:"container",children:(0,r.jsx)("div",{className:"card mb-3",children:(0,r.jsxs)("div",{className:"row g-0",children:[(0,r.jsx)("div",{className:"col-md-4",children:(0,r.jsx)("img",{src:"https://cdn.dribbble.com/users/730703/screenshots/6581243/avento.gif",className:"img-fluid rounded-start",alt:"..."})}),(0,r.jsx)("div",{className:"col-md-8",children:(0,r.jsxs)("div",{className:"card-body",children:[(0,r.jsx)("h5",{className:"card-title",children:null===n||void 0===n?void 0:n.name}),(0,r.jsxs)("p",{className:"card-text",children:["Registered email : ",(0,r.jsx)("b",{children:null===n||void 0===n?void 0:n.email})]}),(0,r.jsx)("button",{className:"btn btn-danger",onClick:()=>{window.confirm("Do you want to logout ?")&&(localStorage.removeItem("rg-ide-token"),setTimeout((()=>{window.location.href="/"}),600))},children:"logout"})]})})]})})})},ft=()=>(0,r.jsxs)(s.BV,{children:[(0,r.jsx)(s.qh,{path:"/",element:(0,r.jsx)(o,{})}),(0,r.jsx)(s.qh,{path:"/signup",element:(0,r.jsx)(at,{})}),(0,r.jsx)(s.qh,{path:"/login",element:(0,r.jsx)(lt,{})}),(0,r.jsx)(s.qh,{path:"/javascript",element:(0,r.jsx)(p.A,{})}),(0,r.jsx)(s.qh,{path:"/python",element:(0,r.jsx)(d,{})}),(0,r.jsx)(s.qh,{path:"/sql",element:(0,r.jsx)(g,{})}),(0,r.jsx)(s.qh,{path:"/user/:id",element:(0,r.jsx)(dt,{})}),(0,r.jsx)(s.qh,{path:"*",element:(0,r.jsx)(o,{})})]}),gt=()=>(0,r.jsx)("footer",{id:"footer",children:(0,r.jsxs)("div",{className:"container",children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"col-lg-4",align:"left",children:[(0,r.jsx)("h5",{className:"text-white",align:"left",children:"Quick Links"}),(0,r.jsx)("hr",{}),(0,r.jsxs)("ul",{style:{fontSize:"18px"},children:[(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"https://rg-tech.in/about-us",children:"About Us"})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"https://rg-tech.in/courses",children:"Our Courses"})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"https://rg-tech.in/contact-us",children:"Contact Us"})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"https://rg-tech.in/job-openings",children:"Career"})}),(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"https://rg-tech.in/terms-of-use",children:"Terms & Conditions"})})]}),(0,r.jsx)("br",{}),(0,r.jsx)("h5",{className:"text-white",align:"left",children:"Contact Us"}),(0,r.jsx)("hr",{}),(0,r.jsxs)("div",{style:{fontSize:"25px"},children:[(0,r.jsx)("i",{className:"bi bi-telephone"}),(0,r.jsx)("a",{href:"tel:918250283017",children:"\xa0\xa0+91 82502 83017"}),(0,r.jsx)("br",{}),(0,r.jsx)("i",{className:"bi bi-envelope"}),(0,r.jsx)("a",{href:"mailto:rgtechnologiesjpg@gmail.com",children:"\xa0\xa0Support Mail"})]}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("h5",{className:"text-white",align:"left",children:"Follow Us"}),(0,r.jsx)("hr",{}),(0,r.jsxs)("div",{className:"row col-lg-12 sociallogo",children:[(0,r.jsx)("a",{href:"https://wa.me/918250283017/",target:"_blank",children:(0,r.jsx)("i",{className:"bi bi-whatsapp"})}),(0,r.jsx)("a",{href:"https://www.linkedin.com/in/rg-technologies-781430178",target:"_blank",children:(0,r.jsx)("i",{className:"bi bi-linkedin"})})]})]}),(0,r.jsxs)("div",{className:"col-lg-4",align:"text-center",children:[(0,r.jsx)("h5",{className:"text-white",align:"left",children:"Important Updates"}),(0,r.jsx)("hr",{})]})]}),(0,r.jsx)("hr",{}),(0,r.jsx)("div",{className:"row",children:(0,r.jsx)("div",{className:"col-lg-12 codexio-footer",style:{textAlign:"right"},children:(0,r.jsxs)("p",{children:["Copyright \xa9\xa0R.G.Technologies, ",(new Date).getFullYear(),"\xa0|\xa0All rights reserved"]})})})]})}),pt=()=>(0,r.jsx)("div",{className:"wrap",children:(0,r.jsx)("div",{className:"container",children:(0,r.jsxs)("div",{className:"row justify-content-between",children:[(0,r.jsx)("div",{className:"col-md-8 col-lg-8 d-flex align-items-center",children:(0,r.jsx)("p",{className:"mb-0 phone",children:(0,r.jsx)("span",{className:"mailus",children:(0,r.jsxs)("b",{children:[(0,r.jsx)("i",{className:"bi bi-buildings"}),"\xa0\xa0Netaji Subhash Chandra Bose Road,Besides Touch Nursing Home, Rajbari Para, 735101"]})})})}),(0,r.jsx)("div",{className:"col-12 col-md d-flex justify-content-md-end",children:(0,r.jsx)("div",{className:"social-media",children:(0,r.jsxs)("p",{className:"mb-0 d-flex",children:[(0,r.jsx)("a",{href:"tel:918250283017",children:(0,r.jsx)("i",{className:"bi bi-telephone",style:{fontSize:"20px",paddingRight:"10px"}})}),(0,r.jsx)("a",{href:"mailto:rgtechnologiesjpg@gmail.com",children:(0,r.jsx)("i",{className:"bi bi-envelope",style:{fontSize:"20px",paddingRight:"10px"}})}),(0,r.jsx)("a",{href:"https://wa.me/918250283017/",target:"_blank",children:(0,r.jsx)("i",{className:"bi bi-whatsapp",style:{fontSize:"20px",paddingRight:"10px"}})}),(0,r.jsx)("a",{href:"https://www.linkedin.com/in/rg-technologies-781430178",target:"_blank",children:(0,r.jsx)("i",{className:"bi bi-linkedin",style:{fontSize:"20px",paddingRight:"10px"}})}),(0,r.jsx)("a",{href:"https://rg-tech.in/admin/login",children:(0,r.jsx)("i",{className:"bi bi-gear-fill",style:{fontSize:"20px",paddingRight:"10px"}})})]})})})]})})}),mt=()=>{const e=localStorage.getItem("rg-ide-token"),t=e?ht(e):null;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light",children:(0,r.jsxs)("div",{className:"container-fluid",children:[(0,r.jsx)("a",{className:"navbar-brand",href:"https://rg-tech.in/",children:(0,r.jsx)("img",{src:"../assets/logo_blackbase.png",alt:"logo",className:"img-fluid",style:{width:"90px",height:"60px"}})}),(0,r.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",style:{border:0},children:(0,r.jsx)("span",{className:"navbar-toggler-icon"})}),(0,r.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:(0,r.jsxs)("ul",{className:"navbar-nav",style:{width:"99%",paddingRight:"10px",display:"flex",justifyContent:"right"},children:[(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)("a",{className:"nav-link",href:"/",children:"Home"})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)("a",{className:"nav-link",href:"/javascript",children:"JavaScript"})}),(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)("a",{className:"nav-link",href:"/python",children:"Python"})}),t?(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)("a",{style:{color:"white"},className:"nav-link",href:"/user/".concat(t.userId),children:t.name})}):(0,r.jsx)("li",{className:"nav-item",children:(0,r.jsx)("a",{style:{color:"white"},className:"nav-link",href:"/login",children:"Login"})})]})})]})})})};const bt=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(pt,{}),(0,r.jsx)(mt,{}),(0,r.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[(0,r.jsx)("strong",{children:"Beta Mode:"})," This IDE is currently in beta testing. It may undergo changes, and unexpected issues may arise. Your feedback is valuable in improving the user experience."]}),(0,r.jsx)(ft,{}),(0,r.jsx)(gt,{})]})};var _t=__webpack_require__(950),vt=__webpack_require__.t(_t,2),yt=__webpack_require__(387);new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(xt){}new Map;const St=n.startTransition;vt.flushSync,n.useId;function wt(e){let{basename:n,children:i,future:r,window:o}=e,a=t.useRef();null==a.current&&(a.current=(0,yt.zR)({window:o,v5Compat:!0}));let l=a.current,[c,u]=t.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},d=t.useCallback((e=>{h&&St?St((()=>u(e))):u(e)}),[u,h]);return t.useLayoutEffect((()=>l.listen(d)),[l,d]),t.createElement(s.Ix,{basename:n,children:i,location:c.location,navigationType:c.action,navigator:l,future:r})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var kt,Ct;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(kt||(kt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ct||(Ct={}));i.createRoot(document.getElementById("root")).render((0,r.jsx)(wt,{children:(0,r.jsx)(bt,{})}))})()})();
//# sourceMappingURL=main.fbdb1d86.js.map